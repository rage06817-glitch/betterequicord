// Equicord d5e5ab26 (BetterVencord patchset built by 09c7a72)
// Standalone: false
// Platform: win32
// Updater Disabled: false
"use strict";var Vencord=(()=>{var S_e=Object.create;var IE=Object.defineProperty;var w_e=Object.getOwnPropertyDescriptor;var k_e=Object.getOwnPropertyNames;var E_e=Object.getPrototypeOf,A_e=Object.prototype.hasOwnProperty;var Bte=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,o)=>(typeof require<"u"?require:t)[o]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var x=(e,t)=>()=>(e&&(t=e(e=0)),t);var Ro=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Ao=(e,t)=>{for(var o in t)IE(e,o,{get:t[o],enumerable:!0})},Pte=(e,t,o,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of k_e(t))!A_e.call(e,i)&&i!==o&&IE(e,i,{get:()=>t[i],enumerable:!(n=w_e(t,i))||n.enumerable});return e};var Ml=(e,t,o)=>(o=e!=null?S_e(E_e(e)):{},Pte(t||!e||!e.__esModule?IE(o,"default",{value:e,enumerable:!0}):o,e)),hh=e=>Pte(IE({},"__esModule",{value:!0}),e);var f,r,d=x(()=>{"use strict";f=Symbol.for("react.fragment"),r=(...e)=>(r=Vencord.Webpack.Common.React.createElement)(...e)});var Pr={};Ao(Pr,{clear:()=>T_e,createStore:()=>i0,del:()=>Ta,delMany:()=>xL,entries:()=>vL,get:()=>zt,getMany:()=>hL,keys:()=>bL,promisifyRequest:()=>el,set:()=>Gt,setMany:()=>C_e,update:()=>iu,values:()=>I_e});function el(e){return new Promise((t,o)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>o(e.error)})}function i0(e,t){let o=indexedDB.open(e);o.onupgradeneeded=()=>o.result.createObjectStore(t);let n=el(o);return(i,s)=>n.then(a=>s(a.transaction(t,i).objectStore(t)))}function nd(){return gL||(gL=i0("VencordData","VencordStore")),gL}function zt(e,t=nd()){return t("readonly",o=>el(o.get(e)))}function Gt(e,t,o=nd()){return o("readwrite",n=>(n.put(t,e),el(n.transaction)))}function C_e(e,t=nd()){return t("readwrite",o=>(e.forEach(n=>o.put(n[1],n[0])),el(o.transaction)))}function hL(e,t=nd()){return t("readonly",o=>Promise.all(e.map(n=>el(o.get(n)))))}function iu(e,t,o=nd()){return o("readwrite",n=>new Promise((i,s)=>{n.get(e).onsuccess=function(){try{n.put(t(this.result),e),i(el(n.transaction))}catch(a){s(a)}}}))}function Ta(e,t=nd()){return t("readwrite",o=>(o.delete(e),el(o.transaction)))}function xL(e,t=nd()){return t("readwrite",o=>(e.forEach(n=>o.delete(n)),el(o.transaction)))}function T_e(e=nd()){return e("readwrite",t=>(t.clear(),el(t.transaction)))}function yL(e,t){return e.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},el(e.transaction)}function bL(e=nd()){return e("readonly",t=>{if(t.getAllKeys)return el(t.getAllKeys());let o=[];return yL(t,n=>o.push(n.key)).then(()=>o)})}function I_e(e=nd()){return e("readonly",t=>{if(t.getAll)return el(t.getAll());let o=[];return yL(t,n=>o.push(n.value)).then(()=>o)})}function vL(e=nd()){return e("readonly",t=>{if(t.getAll&&t.getAllKeys)return Promise.all([el(t.getAllKeys()),el(t.getAll())]).then(([n,i])=>n.map((s,a)=>[s,i[a]]));let o=[];return e("readonly",n=>yL(n,i=>o.push([i.key,i.value])).then(()=>o))})}var gL,vn=x(()=>{"use strict";d();});function rn(e,t=300){let o;return function(...n){clearTimeout(o),o=setTimeout(()=>{e(...n)},t)}}var la=x(()=>{"use strict";d()});var ca,r1=x(()=>{"use strict";d();({localStorage:ca}=window)});function su(e){let t=document.createElement("a");t.href=URL.createObjectURL(e),t.download=e.name,document.body.appendChild(t),t.click(),setImmediate(()=>{URL.revokeObjectURL(t.href),document.body.removeChild(t)})}function i1(e){return new Promise(t=>{let o=document.createElement("input");o.type="file",o.style.display="none",o.accept=e,o.onchange=async()=>{t(o.files?.[0]??null)},document.body.appendChild(o),o.click(),setImmediate(()=>document.body.removeChild(o))})}var rd=x(()=>{"use strict";d()});var Fte=x(()=>{});function gc(e,t){let o=document.createElement("style");return o.id=e,t.append(o),o}var SL,de,nt=x(()=>{"use strict";d();SL=(e,t="")=>e.split(" ").map(o=>`.${t}${o}`).join(""),de=(e="")=>(...t)=>{let o=new Set;for(let n of t)n&&typeof n=="string"?o.add(n):Array.isArray(n)?n.forEach(i=>o.add(i)):n&&typeof n=="object"&&Object.entries(n).forEach(([i,s])=>s&&o.add(i));return Array.from(o,n=>e+n).join(" ")}});var M_e,ip,au,xh,DE,wL,kL,ME,NE,RS,EL,yh,AL,s1,BE,CL,TL,N_e,Ute,IL,B_e,LS,P_e,__e,DL,ML,ri,OS,R_e,w,j,s0,a0,H=x(()=>{"use strict";d();M_e="Vencord.Webpack.Common.React",ip="1297590739911573585",au="1173279886065029291",xh="1173316879083896912",DE="1222677964760682556",wL="1173520023239786538",kL="1326406112144265257",ME="1287079931645263968",NE="1173343399470964856",RS="1243063117852835941",EL="1026515880080842772",yh="1015060230222131221",AL="1017176847865352332",s1="1042507929485586532",BE="1026534353167208489",CL="1026504932959977532",TL="1108135649699180705",N_e="1222936386626129920",Ute="1345457031426871417",IL=[EL,Ute],B_e=[au,yh],LS=[ip,EL],P_e=[xh,s1],__e=[DE,ME,NE,BE],DL=navigator.platform.toLowerCase(),ML=DL.startsWith("win"),ri=DL.startsWith("mac"),OS=DL.startsWith("linux"),R_e=navigator.userAgent.includes("Mobi"),w=Object.freeze({Ven:{name:"V",id:343383572805058560n},Apexo:{name:"Apexo",id:228548952687902720n},Arjix:{name:"ArjixWasTaken",id:674710789138939916n,badge:!1},Cyn:{name:"Cynosphere",id:150745989836308480n},Trwy:{name:"trey",id:354427199023218689n},Megu:{name:"Megumin",id:545581357812678656n},botato:{name:"botato",id:440990343899643943n},fawn:{name:"fawn",id:336678828233588736n},rushii:{name:"rushii",id:295190422244950017n},Glitch:{name:"Glitchy",id:269567451199569920n},Samu:{name:"Samu",id:702973430449832038n},Nyako:{name:"nyako",id:118437263754395652n},MaiKokain:{name:"Mai",id:722647978577363026n},amy:{name:"Amy",id:603229858612510720n},katlyn:{name:"katlyn",id:250322741406859265n},nea:{name:"nea",id:310702108997320705n},Nuckyz:{name:"Nuckyz",id:235834946571337729n},D3SOX:{name:"D3SOX",id:201052085641281538n},Nickyux:{name:"Nickyux",id:427146305651998721n},mantikafasi:{name:"mantikafasi",id:287555395151593473n},Xinto:{name:"Xinto",id:423915768191647755n},JacobTm:{name:"Jacob.Tm",id:302872992097107991n},DustyAngel47:{name:"DustyAngel47",id:714583473804935238n},BanTheNons:{name:"BanTheNons",id:460478012794863637n},BigDuck:{name:"BigDuck",id:1024588272623681609n},AverageReactEnjoyer:{name:"Average React Enjoyer",id:1004904120056029256n},adryd:{name:"adryd",id:0n},Tyman:{name:"Tyman",id:487443883127472129n},afn:{name:"afn",id:420043923822608384n},KraXen72:{name:"KraXen72",id:379304073515499530n},kemo:{name:"kemo",id:715746190813298788n},dzshn:{name:"dzshn",id:310449948011528192n},Ducko:{name:"Ducko",id:506482395269169153n},jewdev:{name:"jewdev",id:222369866529636353n},Luna:{name:"Luny",id:821472922140803112n},Vap:{name:"Vap0r1ze",id:454072114492866560n},KingFish:{name:"King Fish",id:499400512559382538n},Commandtechno:{name:"Commandtechno",id:296776625432035328n},TheSun:{name:"sunnie",id:406028027768733696n},rae:{name:"rae",id:1398136199503282277n},pointy:{name:"pointy",id:99914384989519872n},SammCheese:{name:"Samm-Cheese",id:372148345894076416n},zt:{name:"zt",id:289556910426816513n},captain:{name:"Captain",id:347366054806159360n},nick:{name:"nick",id:347884694408265729n,badge:!1},whqwert:{name:"whqwert",id:586239091520176128n},lewisakura:{name:"lewisakura",id:96269247411400704n},RuiNtD:{name:"RuiNtD",id:157917665162297344n},hunt:{name:"hunt-g",id:222800179697287168n},cloudburst:{name:"cloudburst",id:892128204150685769n},Aria:{name:"Syncxv",id:549244932213309442n},TheKodeToad:{name:"TheKodeToad",id:706152404072267788n},LordElias:{name:"LordElias",id:319460781567639554n},juby:{name:"Juby210",id:324622488644616195n},Alyxia:{name:"Alyxia Sother",id:952185386350829688n},Remty:{name:"Remty",id:335055032204656642n},skyevg:{name:"skyevg",id:1090310844283363348n},Dziurwa:{name:"Dziurwa",id:1001086404203389018n},arHSM:{name:"arHSM",id:841509053422632990n},AutumnVN:{name:"AutumnVN",id:393694671383166998n},pylix:{name:"pylix",id:492949202121261067n},Tyler:{name:"\\\\GGTyler\\\\",id:143117463788191746n},RyanCaoDev:{name:"RyanCaoDev",id:952235800110694471n},FieryFlames:{name:"Fiery",id:890228870559698955n},KannaDev:{name:"Kanna",id:317728561106518019n},carince:{name:"carince",id:818323528755314698n},PandaNinjas:{name:"PandaNinjas",id:455128749071925248n},CatNoir:{name:"CatNoir",id:260371016348336128n},outfoxxed:{name:"outfoxxed",id:837425748435796060n},UwUDev:{name:"UwU",id:691413039156690994n},amia:{name:"amia",id:142007603549962240n},phil:{name:"phil",id:305288513941667851n},ImLvna:{name:"lillith <3",id:799319081723232267n},rad:{name:"rad",id:610945092504780823n},AndrewDLO:{name:"Andrew-DLO",id:434135504792059917n},HypedDomi:{name:"HypedDomi",id:354191516979429376n},Rini:{name:"Rini",id:1079479184478441643n},castdrian:{name:"castdrian",id:224617799434108928n},Arrow:{name:"arrow",id:958158495302176778n},bb010g:{name:"bb010g",id:72791153467990016n},Dolfies:{name:"Dolfies",id:852892297661906993n},RuukuLada:{name:"RuukuLada",id:119705748346241027n},blahajZip:{name:"blahaj.zip",id:683954422241427471n},archeruwu:{name:"archer_uwu",id:160068695383736320n},ProffDea:{name:"ProffDea",id:609329952180928513n},UlyssesZhan:{name:"UlyssesZhan",id:586808226058862623n},ant0n:{name:"ant0n",id:145224646868860928n},Board:{name:"BoardTM",id:285475344817848320n},philipbry:{name:"philipbry",id:554994003318276106n},Korbo:{name:"Korbo",id:455856406420258827n},maisymoe:{name:"maisy",id:257109471589957632n},Lexi:{name:"Lexi",id:506101469787717658n},Mopi:{name:"Mopi",id:1022189106614243350n},Grzesiek11:{name:"Grzesiek11",id:368475654662127616n},Samwich:{name:"Samwich",id:976176454511509554n},coolelectronics:{name:"coolelectronics",id:696392247205298207n},Av32000:{name:"Av32000",id:593436735380127770n},Noxillio:{name:"Noxillio",id:138616536502894592n},Kyuuhachi:{name:"Kyuuhachi",id:236588665420251137n},nin0dev:{name:"nin0dev",id:886685857560539176n},Elvyra:{name:"Elvyra",id:708275751816003615n},HappyEnderman:{name:"Happy enderman",id:1083437693347827764n},Vishnya:{name:"Vishnya",id:282541644484575233n},Inbestigator:{name:"Inbestigator",id:761777382041714690n},newwares:{name:"newwares",id:421405303951851520n},JohnyTheCarrot:{name:"JohnyTheCarrot",id:132819036282159104n},puv:{name:"puv",id:469441552251355137n},Kodarru:{name:"Kodarru",id:785227396218748949n},nakoyasha:{name:"nakoyasha",id:222069018507345921n},Sqaaakoi:{name:"Sqaaakoi",id:259558259491340288n},iamme:{name:"i am me",id:984392761929256980n},Byeoon:{name:"byeoon",id:1167275288036655133n},Kaitlyn:{name:"kaitlyn",id:306158896630988801n},PolisanTheEasyNick:{name:"Oleh Polisan",id:242305263313485825n},HAHALOSAH:{name:"HAHALOSAH",id:903418691268513883n},GabiRP:{name:"GabiRP",id:507955112027750401n},ImBanana:{name:"Im_Banana",id:635250116688871425n},xocherry:{name:"xocherry",id:221288171013406720n},ScattrdBlade:{name:"ScattrdBlade",id:678007540608532491n},goodbee:{name:"goodbee",id:658968552606400512n},Moxxie:{name:"Moxxie",id:712653921692155965n},Ethan:{name:"Ethan",id:721717126523781240n},nyx:{name:"verticalsync.",id:1207087393929171095n},nekohaxx:{name:"nekohaxx",id:1176270221628153886n},Antti:{name:"Antti",id:312974985876471810n},Joona:{name:"Joona",id:297410829589020673n},sadan:{name:"sadan",id:521819891141967883n},Kylie:{name:"Cookie",id:721853658941227088n},AshtonMemer:{name:"AshtonMemer",id:373657230530052099n},surgedevs:{name:"Chloe",id:1084592643784331324n},Lumap:{name:"Lumap",id:585278686291427338n},Obsidian:{name:"Obsidian",id:683171006717755446n},SerStars:{name:"SerStars",id:861631850681729045n},niko:{name:"niko",id:341377368075796483n},relitrix:{name:"Relitrix",id:423165393901715456n},RamziAH:{name:"RamziAH",id:1279957227612147747n},SomeAspy:{name:"SomeAspy",id:516750892372852754n},jamesbt365:{name:"jamesbt365",id:158567567487795200n},samsam:{name:"samsam",id:400482410279469056n},Cootshk:{name:"Cootshk",id:921605971577548820n},thororen:{name:"thororen",id:848339671629299742n},alfred:{name:"alfred",id:1038466644353232967n},vv:{name:"VV",id:254866377087778816n},u32:{name:"u32",id:1063237286818488351n},prism:{name:"prism",id:390884143749136386n}}),j=Object.freeze({nobody:{name:"nobody",id:0n},thororen:{name:"thororen",id:848339671629299742n},dotdas:{name:"dotdas",id:353229259482857475n},nyx:{name:"verticalsync",id:1207087393929171095n},Cortex:{name:"Cortex",id:913205935319691335n},KrystalSkull:{name:"krystalskullofficial",id:929208515883569182n},Naibuu:{name:"hs50",id:1120045713867423835n},Ven:{name:"Vee",id:343383572805058560n},nexpid:{name:"Nexpid",id:853550207039832084n},FoxStorm1:{name:"FoxStorm1",id:789872551731527690n},camila314:{name:"camila314",id:738592270617542716n},Wolfie:{name:"wolfieeeeeeee",id:347096063569559553n},ryan:{name:"ryan",id:479403382994632704n},MrDiamond:{name:"MrDiamond",id:523338295644782592n},Fres:{name:"fres",id:843448897737064448n},Dams:{name:"Dams",id:769939285792653325n},KawaiianPizza:{name:"KawaiianPizza",id:501000986735673347n},Perny:{name:"Perny",id:1101508982570504244n},Jaxx:{name:"Jaxx",id:901016640253227059n},Balaclava:{name:"Balaclava",id:854886148455399436n},dat_insanity:{name:"dat_insanity",id:0n},coolesding:{name:"cooles",id:406084422308331522n},SerStars:{name:"SerStars",id:861631850681729045n},MaxHerbold:{name:"MaxHerbold",id:1189527130611138663n},Combatmaster:{name:"Combatmaster331",id:790562534503612437n},Megal:{name:"Megal",id:387790666484285441n},Synth:{name:"synthxcx",id:934393331562205195n},Hanzy:{name:"hanzydev",id:1093131781043126322n},zoodogood:{name:"zoodogood",id:921403577539387454n},Drag:{name:"dragalt_",id:1189903210564038697n},bhop:{name:"femeie",id:442626774841556992n},Panniku:{name:"Panniku",id:703634705152606318n},Tolgchu:{name:"\u2728Tolgchu\u2728",id:329671025312923648n},DaBluLite:{name:"DaBluLite",id:582170007505731594n},meowabyte:{name:"meowabyte",id:105170831130234880n},Fafa:{name:"Fafa",id:428188716641812481n},Colorman:{name:"colorman",id:298842558610800650n},walrus:{name:"walrus",id:305317288775778306n},Prince527:{name:"Prince527",id:364105797162237952n},ThePirateStoner:{name:"ThePirateStoner",id:1196220620376121381n},Sampath:{name:"Sampath",id:984015688807100419n},catcraft:{name:"catcraft",id:290162449213292546n},ShadyGoat:{name:"Shady Goat",id:376079696489742338n},Joona:{name:"Joona",id:297410829589020673n},SimplyData:{name:"SimplyData",id:301494563514613762n},keifufu:{name:"keifufu",id:469588398110146590n},Blackilykat:{name:"Blackilykat",id:442033332952498177n},niko:{name:"niko",id:341377368075796483n},sadan:{name:"sadan",id:521819891141967883n},x3rt:{name:"x3rt",id:131602100332396544n},Hen:{name:"Hen",id:279266228151779329n},Crxa:{name:"Crxa",id:711604934201704469n},vmohammad:{name:"vMohammad",id:840854894881538079n},SpikeHD:{name:"SpikeHD",id:221757857836564485n},bep:{name:"bep",id:0n},llytz:{name:"llytz",id:1271128098301022240n},nin0dev:{name:"nin0dev",id:886685857560539176n},D3SOX:{name:"D3SOX",id:201052085641281538n},newwares:{name:"newwares",id:421405303951851520n},Kyuuhachi:{name:"Kyuuhachi",id:236588665420251137n},ImLvna:{name:"lillith <3",id:799319081723232267n},AutumnVN:{name:"AutumnVN",id:393694671383166998n},Arjix:{name:"ArjixWasTaken",id:674710789138939916n,badge:!1},Inbestigator:{name:"Inbestigator",id:761777382041714690n},Sqaaakoi:{name:"Sqaaakoi",id:259558259491340288n},Samwich:{name:"Samwich",id:976176454511509554n},TheSun:{name:"sunnie",id:406028027768733696n},TheKodeToad:{name:"TheKodeToad",id:706152404072267788n},Nickyux:{name:"Nickyux",id:427146305651998721n},Ethan:{name:"Ethan",id:721717126523781240n},castdrian:{name:"castdrian",id:224617799434108928n},echo:{name:"ECHO",id:712639419785412668n},RyanCaoDev:{name:"RyanCaoDev",id:952235800110694471n},HypedDomi:{name:"HypedDomi",id:354191516979429376n},Grzesiek11:{name:"Grzesiek11",id:368475654662127616n},Aria:{name:"Syncxv",id:549244932213309442n},ProffDea:{name:"ProffDea",id:609329952180928513n},HappyEnderman:{name:"Happy enderman",id:1083437693347827764n},Nyako:{name:"nyako",id:118437263754395652n},ant0n:{name:"ant0n",id:145224646868860928n},MaiKokain:{name:"Mai",id:722647978577363026n},Korbo:{name:"Korbo",id:455856406420258827n},Moxxie:{name:"Moxxie",id:712653921692155965n},arHSM:{name:"arHSM",id:841509053422632990n},iamme:{name:"i am me",id:984392761929256980n},creations:{name:"Creation's",id:209830981060788225n},Leko:{name:"Leko",id:108153734541942784n},SomeAspy:{name:"SomeAspy",id:516750892372852754n},nvhhr:{name:"nvhhr",id:165098921071345666n},Z1xus:{name:"Z1xus",id:377450600797044746n},Oggetto:{name:"Oggetto",id:619203349954166804n},zyqunix:{name:"zyqunix",id:1201415921802170388n},examplegit:{name:"example.user",id:175411535357673473n},Loukios:{name:"Loukios",id:211461918127292416n},vappstar:{name:"vappstar",id:747192967311261748n},voidbbg:{name:"voidbbg",id:117126234588184582n},OIRNOIR:{name:"OIRNOIR",id:720842469024989195n},cassie:{name:"cassie",id:280411966126948353n},mochienya:{name:"mochie",id:1043599230247374869n},okiso:{name:"okiso",id:274178934143451137n},port22exposed:{name:"port",id:1318383159645311009n},PhoenixAceVFX:{name:"PhoenixAceVFX",id:1016895892055396484n},TheArmagan:{name:"TheArmagan",id:707309693449535599n},seth:{name:"S\u20ACth",id:1273447359417942128n},SteelTech:{name:"SteelTech",id:1344190786476183643n},talhakf:{name:"talhakf",id:1140716160560676976n},xijexo:{name:"xijexo",id:1284113557201620995n},omaw:{name:"omaw",id:1155026301791514655n},WKoA:{name:"WKoA",id:724416180097384498n},smuki:{name:"smuki",id:691517398523576331n},ItsAlex:{name:"ItsAlex",id:551023598203043840n},Byeoon:{name:"byeoon",id:1167275288036655133n},Skully:{name:"Skully",id:150298098516754432n},Buzzy:{name:"Buzzy",id:1273353654644117585n},Reycko:{name:"Reycko",id:1123725368004726794n},Campfire:{name:"Campfire",id:376414446840578081n},Cootshk:{name:"Cootshk",id:921605971577548820n},sliwka:{name:"sliwka",id:1165286199628419129n},bbgaming25k:{name:"bbgaming25k",id:851222385528274964n},davidkra230:{name:"davidkra230",id:652699312631054356n},GroupXyz:{name:"GroupXyz",id:950033410229944331n},Suffocate:{name:"Suffocate",id:772601756776923187n},veygax:{name:"veygax",id:1119938236245094521n},secp192k1:{name:"secp192k1",id:477497542205243392n},VillainsRule:{name:"VillainsRule",id:0n},Etorix:{name:"Etorix",id:94597845868355584n},Johannes7k75:{name:"Johannes7k75",id:587701169103699994n},DiabeloDEV:{name:"DiabeloDEV",id:1231342375465390100n},ryanamay:{name:"ryanamay",id:1262793452236570667n},Mocha:{name:"Mocha",id:808802000224518264n},justjxke:{name:"justjxke",id:852558183087472640n},nicola02nb:{name:"nicola02nb",id:257900031351193600n},qouesm:{name:"qouesm",id:130388483494641664n},CallMeGii:{name:"gii",id:156481332652802048n},mmeta:{name:"mmeta",id:297075664530440192n},SSnowly:{name:"Snowy",id:1183482753375809537n},ZcraftElite:{name:"ZcraftElite",id:926788037785047050n},mart:{name:"mja00",id:108698087769260032n},vei:{name:"Vei",id:239414094799699968n},prism:{name:"prism",id:390884143749136386n},square:{name:"square",id:219363409097916416n},neoarz:{name:"neoarz",id:1015372540937502851n},KamiRu:{name:"KamiRu",id:819191621676695563n},soapphia:{name:"soap phia",id:1012095822957133976n},benjii:{name:"Benjii",id:463702169443368970n},keyages:{name:"Key",id:1230319937155760131n},PWall:{name:"PWall",id:0n},busyboxkitty:{name:"busyboxkitty",id:1312185484159483948n},BioTomateDE:{name:"BioTomateDE",id:553499669226061844n},korzi:{name:"korzi",id:740966310875365416n},davri:{name:"Davri",id:457579346282938368n}}),s0=Object.freeze(Object.fromEntries(Object.entries(w).filter(e=>e[1].id!==0n).map(([e,t])=>[t.id,t]))),a0=Object.freeze(Object.fromEntries(Object.entries(j).filter(e=>e[1].id!==0n).map(([e,t])=>[t.id,t])))});function me(...e){return e.filter(Boolean).join(" ")}function tl(e){return new Promise(t=>setTimeout(t,e))}function L_e(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function a1(e){for(let t in e)if(Object.hasOwn(e,t))return!1;return!0}function NL(e){try{return new URL(e)}catch{return null}}function Nl(e){return e}function RL(e,t,o=t+"s"){return e===1?`${e} ${t}`:`${e} ${o}`}function FS(e,...t){return t.some(o=>o==null)?"":String.raw({raw:e},...t)}function RE(e,t){try{let o=e();return o instanceof Promise?o.catch(()=>t):o}catch{return t}}function l0(e,t=!1){return e?t?e===au:ne.getChannel(e).guild_id===au:!1}function LL(e){return e?e===ip:!1}function bh(e){return e&&Lt.getMember(au,e)?.roles?.includes(kL)||!1}var BL,PE,PL,_E,_L,lu,xt=x(()=>{"use strict";d();B();H();BL=e=>{let t=e.getBoundingClientRect(),o=Math.max(document.documentElement.clientHeight,window.innerHeight);return!(t.bottom<0||t.top-o>=0)};PE=e=>Object.hasOwn(s0,e),PL=e=>PE(e)&&s0[e].badge!==!1,_E=e=>Object.hasOwn(a0,e),_L=e=>_E(e)&&a0[e].badge!==!1,lu=e=>Object.hasOwn(s0,e)||Object.hasOwn(a0,e)});function OL(){let e="";for(let[t,{fontSize:o,lineHeight:n}]of Object.entries($te))e+=`.${vh(t)}{font-size:${o};line-height:${n};}`;for(let[t,o]of Object.entries(Hte))e+=`.${vh(t)}{font-weight:${o};}`;return e}function Y(e){let{size:t="md",weight:o="normal",color:n,tag:i="div",selectable:s=!1,lineClamp:a,tabularNumbers:l=!1,children:c,className:u,style:p,...m}=e;return r(i,{className:me(vh("base",t,o),s&&vh("selectable"),a===1&&vh("line-clamp-1"),a!=null&&a>1&&vh("line-clamp"),l&&vh("tabular-numbers"),u),style:{...p,...n&&{color:zte[n]},...a&&a>1&&{WebkitLineClamp:a}},...m},c)}var vh,$te,Hte,zte,FL,Et=x(()=>{"use strict";d();Fte();nt();xt();vh=de("vc-text-"),$te={xxs:{fontSize:"10px",lineHeight:"1.2"},xs:{fontSize:"12px",lineHeight:"1.33333"},sm:{fontSize:"14px",lineHeight:"1.28571"},md:{fontSize:"16px",lineHeight:"1.25"},lg:{fontSize:"20px",lineHeight:"1.2"},xl:{fontSize:"24px",lineHeight:"1.25"},xxl:{fontSize:"32px",lineHeight:"1.25"}},Hte={thin:"100",extralight:"200",light:"300",normal:"400",medium:"500",semibold:"600",bold:"700",extrabold:"800"},zte={"text-default":"var(--text-default)","text-muted":"var(--text-muted)","text-link":"var(--text-link)","text-danger":"var(--text-feedback-critical)","text-brand":"var(--text-brand)","text-strong":"var(--text-strong)","text-subtle":"var(--text-subtle)","text-invert":"var(--text-invert)","text-feedback-critical":"var(--text-feedback-critical)","text-feedback-info":"var(--text-feedback-info)","text-feedback-positive":"var(--text-feedback-positive)","text-feedback-warning":"var(--text-feedback-warning)","text-status-dnd":"var(--text-status-dnd)","text-status-idle":"var(--text-status-idle)","text-status-offline":"var(--text-status-offline)","text-status-online":"var(--text-status-online)","control-text-critical":"var(--control-text-critical-secondary-default)","control-text-primary":"var(--control-text-primary-default)"};FL=function({color:t,variant:o,...n}){let i=n;if(o){let[s,a]=o.split("/");if(s&&a){let l=s.split("-").pop();i.size=l,i.weight=a}}return t&&(i.style??={},i.style.color=`var(--${t}, var(--text-default))`),r(Y,{...i})}});var Gte=x(()=>{});var qte=x(()=>{});function Zo({height:e=24,width:t=24,className:o,children:n,viewBox:i,...s}){return r("svg",{className:me(o,"vc-icon"),role:"img",width:t,height:e,viewBox:i,...s},n)}function hc({height:e=24,width:t=24,className:o}){return r(Zo,{height:e,width:t,className:me(o,"vc-link-icon"),viewBox:"0 0 24 24"},r("g",{fill:"none",fillRule:"evenodd"},r("path",{fill:"currentColor",d:"M10.59 13.41c.41.39.41 1.03 0 1.42-.39.39-1.03.39-1.42 0a5.003 5.003 0 0 1 0-7.07l3.54-3.54a5.003 5.003 0 0 1 7.07 0 5.003 5.003 0 0 1 0 7.07l-1.49 1.49c.01-.82-.12-1.64-.4-2.42l.47-.48a2.982 2.982 0 0 0 0-4.24 2.982 2.982 0 0 0-4.24 0l-3.53 3.53a2.982 2.982 0 0 0 0 4.24zm2.82-4.24c.39-.39 1.03-.39 1.42 0a5.003 5.003 0 0 1 0 7.07l-3.54 3.54a5.003 5.003 0 0 1-7.07 0 5.003 5.003 0 0 1 0-7.07l1.49-1.49c-.01.82.12 1.64.4 2.43l-.47.47a2.982 2.982 0 0 0 0 4.24 2.982 2.982 0 0 0 4.24 0l3.53-3.53a2.982 2.982 0 0 0 0-4.24.973.973 0 0 1 0-1.42z"}),r("rect",{width:t,height:e})))}function ol(e){return r(Zo,{...e,className:me(e.className,"vc-copy-icon"),viewBox:"0 0 24 24"},r("g",{fill:"currentColor"},r("path",{d:"M3 16a1 1 0 0 1-1-1v-5a8 8 0 0 1 8-8h5a1 1 0 0 1 1 1v.5a.5.5 0 0 1-.5.5H10a6 6 0 0 0-6 6v5.5a.5.5 0 0 1-.5.5H3Z"}),r("path",{d:"M6 18a4 4 0 0 0 4 4h8a4 4 0 0 0 4-4v-4h-3a5 5 0 0 1-5-5V6h-4a4 4 0 0 0-4 4v8Z"}),r("path",{d:"M21.73 12a3 3 0 0 0-.6-.88l-4.25-4.24a3 3 0 0 0-.88-.61V9a3 3 0 0 0 3 3h2.73Z"})))}function _r(e){return r(Zo,{...e,className:me(e.className,"vc-open-external-icon"),viewBox:"0 0 24 24"},r("path",{fill:"currentColor",d:"M15 2a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v6a1 1 0 1 1-2 0V4.41l-4.3 4.3a1 1 0 1 1-1.4-1.42L19.58 3H16a1 1 0 0 1-1-1Z"}),r("path",{fill:"currentColor",d:"M5 2a3 3 0 0 0-3 3v14a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-6a1 1 0 1 0-2 0v6a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h6a1 1 0 1 0 0-2H5Z"}))}function nl(e){return r(Zo,{...e,className:me(e.className,"vc-image-icon"),viewBox:"0 0 24 24"},r("path",{fill:"currentColor",d:"M21,19V5c0,-1.1 -0.9,-2 -2,-2H5c-1.1,0 -2,0.9 -2,2v14c0,1.1 0.9,2 2,2h14c1.1,0 2,-0.9 2,-2zM8.5,13.5l2.5,3.01L14.5,12l4.5,6H5l3.5,-4.5z"}))}function cu(e){return r(Zo,{...e,className:me(e.className,"vc-info-icon"),viewBox:"0 0 24 24"},r("path",{fill:"currentColor",fillRule:"evenodd",d:"M23 12a11 11 0 1 1-22 0 11 11 0 0 1 22 0Zm-9.5-4.75a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0Zm-.77 3.96a1 1 0 1 0-1.96-.42l-1.04 4.86a2.77 2.77 0 0 0 4.31 2.83l.24-.17a1 1 0 1 0-1.16-1.62l-.24.17a.77.77 0 0 1-1.2-.79l1.05-4.86Z",clipRule:"evenodd"}))}function UL({height:e=32,width:t=32,className:o}){return r(Zo,{height:e,width:t,className:me(o,"vc-warning-icon"),viewBox:"0 0 24 24"},r("path",{fill:"currentColor",fillRule:"evenodd",d:"M10 3.1a2.37 2.37 0 0 1 4 0l8.71 14.75c.84 1.41-.26 3.15-2 3.15H3.29c-1.74 0-2.84-1.74-2-3.15L9.99 3.1Zm3.25 14.65a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0ZM13.06 14l.37-5.94a1 1 0 0 0-1-1.06h-.87a1 1 0 0 0-1 1.06l.38 5.94a1.06 1.06 0 0 0 2.12 0Z"}))}function $L(e){return r(Zo,{"aria-label":St("GUILD_OWNER"),...e,className:me(e.className,"vc-owner-crown-icon"),role:"img",viewBox:"0 0 16 16"},r("path",{fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd",d:"M13.6572 5.42868C13.8879 5.29002 14.1806 5.30402 14.3973 5.46468C14.6133 5.62602 14.7119 5.90068 14.6473 6.16202L13.3139 11.4954C13.2393 11.7927 12.9726 12.0007 12.6666 12.0007H3.33325C3.02725 12.0007 2.76058 11.792 2.68592 11.4954L1.35258 6.16202C1.28792 5.90068 1.38658 5.62602 1.60258 5.46468C1.81992 5.30468 2.11192 5.29068 2.34325 5.42868L5.13192 7.10202L7.44592 3.63068C7.46173 3.60697 7.48377 3.5913 7.50588 3.57559C7.5192 3.56612 7.53255 3.55663 7.54458 3.54535L6.90258 2.90268C6.77325 2.77335 6.77325 2.56068 6.90258 2.43135L7.76458 1.56935C7.89392 1.44002 8.10658 1.44002 8.23592 1.56935L9.09792 2.43135C9.22725 2.56068 9.22725 2.77335 9.09792 2.90268L8.45592 3.54535C8.46794 3.55686 8.48154 3.56651 8.49516 3.57618C8.51703 3.5917 8.53897 3.60727 8.55458 3.63068L10.8686 7.10202L13.6572 5.42868ZM2.66667 12.6673H13.3333V14.0007H2.66667V12.6673Z"}))}function HL(e){return r(Zo,{...e,className:me(e.className,"vc-screenshare-icon"),viewBox:"0 0 24 24"},r("path",{fill:"currentColor",d:"M2 4.5C2 3.397 2.897 2.5 4 2.5H20C21.103 2.5 22 3.397 22 4.5V15.5C22 16.604 21.103 17.5 20 17.5H13V19.5H17V21.5H7V19.5H11V17.5H4C2.897 17.5 2 16.604 2 15.5V4.5ZM13.2 14.3375V11.6C9.864 11.6 7.668 12.6625 6 15C6.672 11.6625 8.532 8.3375 13.2 7.6625V5L18 9.6625L13.2 14.3375Z"}))}function Sh(e){return r(Zo,{...e,className:me(e.className,"vc-image-visible"),viewBox:"0 0 24 24"},r("path",{fill:"currentColor",d:"M5 21q-.825 0-1.413-.587Q3 19.825 3 19V5q0-.825.587-1.413Q4.175 3 5 3h14q.825 0 1.413.587Q21 4.175 21 5v14q0 .825-.587 1.413Q19.825 21 19 21Zm0-2h14V5H5v14Zm1-2h12l-3.75-5-3 4L9 13Zm-1 2V5v14Z"}))}function c0(e){return r(Zo,{...e,className:me(e.className,"vc-image-invisible"),viewBox:"0 0 24 24"},r("path",{fill:"currentColor",d:"m21 18.15-2-2V5H7.85l-2-2H19q.825 0 1.413.587Q21 4.175 21 5Zm-1.2 4.45L18.2 21H5q-.825 0-1.413-.587Q3 19.825 3 19V5.8L1.4 4.2l1.4-1.4 18.4 18.4ZM6 17l3-4 2.25 3 .825-1.1L5 7.825V19h11.175l-2-2Zm7.425-6.425ZM10.6 13.4Z"}))}function zL(e){return r(Zo,{...e,className:me(e.className,"vc-microphone"),viewBox:"0 0 24 24"},r("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.99 11C14.99 12.66 13.66 14 12 14C10.34 14 9 12.66 9 11V5C9 3.34 10.34 2 12 2C13.66 2 15 3.34 15 5L14.99 11ZM12 16.1C14.76 16.1 17.3 14 17.3 11H19C19 14.42 16.28 17.24 13 17.72V21H11V17.72C7.72 17.23 5 14.41 5 11H6.7C6.7 14 9.24 16.1 12 16.1ZM12 4C11.2 4 11 4.66667 11 5V11C11 11.3333 11.2 12 12 12C12.8 12 13 11.3333 13 11V5C13 4.66667 12.8 4 12 4Z",fill:"currentColor"}),r("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.99 11C14.99 12.66 13.66 14 12 14C10.34 14 9 12.66 9 11V5C9 3.34 10.34 2 12 2C13.66 2 15 3.34 15 5L14.99 11ZM12 16.1C14.76 16.1 17.3 14 17.3 11H19C19 14.42 16.28 17.24 13 17.72V22H11V17.72C7.72 17.23 5 14.41 5 11H6.7C6.7 14 9.24 16.1 12 16.1Z",fill:"currentColor"}))}function u0(e){return r(Zo,{...e,className:me(e.className,"vc-cog-wheel"),viewBox:"0 0 24 24"},r("path",{fill:"currentColor",fillRule:"evenodd",d:"M10.56 1.1c-.46.05-.7.53-.64.98.18 1.16-.19 2.2-.98 2.53-.8.33-1.79-.15-2.49-1.1-.27-.36-.78-.52-1.14-.24-.77.59-1.45 1.27-2.04 2.04-.28.36-.12.87.24 1.14.96.7 1.43 1.7 1.1 2.49-.33.8-1.37 1.16-2.53.98-.45-.07-.93.18-.99.64a11.1 11.1 0 0 0 0 2.88c.06.46.54.7.99.64 1.16-.18 2.2.19 2.53.98.33.8-.14 1.79-1.1 2.49-.36.27-.52.78-.24 1.14.59.77 1.27 1.45 2.04 2.04.36.28.87.12 1.14-.24.7-.95 1.7-1.43 2.49-1.1.8.33 1.16 1.37.98 2.53-.07.45.18.93.64.99a11.1 11.1 0 0 0 2.88 0c.46-.06.7-.54.64-.99-.18-1.16.19-2.2.98-2.53.8-.33 1.79.14 2.49 1.1.27.36.78.52 1.14.24.77-.59 1.45-1.27 2.04-2.04.28-.36.12-.87-.24-1.14-.96-.7-1.43-1.7-1.1-2.49.33-.8 1.37-1.16 2.53-.98.45.07.93-.18.99-.64a11.1 11.1 0 0 0 0-2.88c-.06-.46-.54-.7-.99-.64-1.16.18-2.2-.19-2.53-.98-.33-.8.14-1.79 1.1-2.49.36-.27.52-.78.24-1.14a11.07 11.07 0 0 0-2.04-2.04c-.36-.28-.87-.12-1.14.24-.7.96-1.7 1.43-2.49 1.1-.8-.33-1.16-1.37-.98-2.53.07-.45-.18-.93-.64-.99a11.1 11.1 0 0 0-2.88 0ZM16 12a4 4 0 1 1-8 0 4 4 0 0 1 8 0Z",clipRule:"evenodd"}))}function O_e(e){return r(Zo,{...e,className:me(e.className,"vc-reply-icon"),viewBox:"0 0 24 24"},r("path",{fill:"currentColor",d:"M10 8.26667V4L3 11.4667L10 18.9333V14.56C15 14.56 18.5 16.2667 21 20C20 14.6667 17 9.33333 10 8.26667Z"}))}function $i(e){return r(Zo,{...e,className:me(e.className,"vc-delete-icon"),viewBox:"0 0 24 24"},r("path",{fill:"currentColor",d:"M15 3.999V2H9V3.999H3V5.999H21V3.999H15Z"}),r("path",{fill:"currentColor",d:"M5 6.99902V18.999C5 20.101 5.897 20.999 7 20.999H17C18.103 20.999 19 20.101 19 18.999V6.99902H5ZM11 17H9V11H11V17ZM15 17H13V11H15V17Z"}))}function GL(e){return r(Zo,{...e,className:me(e.className,"vc-plugin-icon"),viewBox:"0 0 24 24"},r("path",{fill:"currentColor",d:"M20.5 11H19V7c0-1.1-.9-2-2-2h-4V3.5C13 2.12 11.88 1 10.5 1S8 2.12 8 3.5V5H4c-1.1 0-1.99.9-1.99 2v3.8H3.5c1.49 0 2.7 1.21 2.7 2.7s-1.21 2.7-2.7 2.7H2V20c0 1.1.9 2 2 2h3.8v-1.5c0-1.49 1.21-2.7 2.7-2.7s2.7 1.21 2.7 2.7V22H17c1.1 0 2-.9 2-2v-4h1.5c1.38 0 2.5-1.12 2.5-2.5S21.88 11 20.5 11z"}))}function Am(e){return r(Zo,{...e,className:me(e.className,"vc-plus-icon"),viewBox:"0 0 18 18"},r("polygon",{fillRule:"nonzero",fill:"currentColor",points:"15 10 10 10 10 15 8 15 8 10 3 10 3 8 8 8 8 3 10 3 10 8 15 8"}))}function US(e){return r(Zo,{...e,className:me(e.className,"vc-no-entry-sign-icon"),viewBox:"0 0 24 24"},r("path",{d:"M0 0h24v24H0z",fill:"none"}),r("path",{fill:"currentColor",d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8 0-1.85.63-3.55 1.69-4.9L16.9 18.31C15.55 19.37 13.85 20 12 20zm6.31-3.1L7.1 5.69C8.45 4.63 10.15 4 12 4c4.42 0 8 3.58 8 8 0 1.85-.63 3.55-1.69 4.9z"}))}function qL(e){return r(Zo,{...e,className:me(e.className,"vc-paste-icon"),viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},r("rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1"}),r("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}))}function jL(e){return r(Zo,{...e,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},r("path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),r("path",{d:"M3 3v5h5"}))}function WL(e){return r(Zo,{...e,className:me(e.className,"vc-safety-icon"),viewBox:"0 0 24 24"},r("path",{fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd",d:"M4.27 5.22A2.66 2.66 0 0 0 3 7.5v2.3c0 5.6 3.3 10.68 8.42 12.95.37.17.79.17 1.16 0A14.18 14.18 0 0 0 21 9.78V7.5c0-.93-.48-1.78-1.27-2.27l-6.17-3.76a3 3 0 0 0-3.12 0L4.27 5.22ZM6 7.68l6-3.66V12H6.22C6.08 11.28 6 10.54 6 9.78v-2.1Zm6 12.01V12h5.78A11.19 11.19 0 0 1 12 19.7Z"}))}function KL(e){return r(Zo,{...e,className:me(e.className,"vc-notes-icon"),viewBox:"0 0 24 24"},r("path",{fill:"currentColor",d:"M8 3C7.44771 3 7 3.44772 7 4V5C7 5.55228 7.44772 6 8 6H16C16.5523 6 17 5.55228 17 5V4C17 3.44772 16.5523 3 16 3H15.1245C14.7288 3 14.3535 2.82424 14.1002 2.52025L13.3668 1.64018C13.0288 1.23454 12.528 1 12 1C11.472 1 10.9712 1.23454 10.6332 1.64018L9.8998 2.52025C9.64647 2.82424 9.27121 3 8.8755 3H8Z"}),r("path",{fillRule:"evenodd",clipRule:"evenodd",fill:"currentColor",d:"M19 4.49996V4.99996C19 6.65681 17.6569 7.99996 16 7.99996H8C6.34315 7.99996 5 6.65681 5 4.99996V4.49996C5 4.22382 4.77446 3.99559 4.50209 4.04109C3.08221 4.27826 2 5.51273 2 6.99996V19C2 20.6568 3.34315 22 5 22H19C20.6569 22 22 20.6568 22 19V6.99996C22 5.51273 20.9178 4.27826 19.4979 4.04109C19.2255 3.99559 19 4.22382 19 4.49996ZM8 12C7.44772 12 7 12.4477 7 13C7 13.5522 7.44772 14 8 14H16C16.5523 14 17 13.5522 17 13C17 12.4477 16.5523 12 16 12H8ZM7 17C7 16.4477 7.44772 16 8 16H13C13.5523 16 14 16.4477 14 17C14 17.5522 13.5523 18 13 18H8C7.44772 18 7 17.5522 7 17Z"}))}function YL(e){return r(Zo,{...e,className:me(e.className,"vc-id-icon"),viewBox:"0 0 24 24"},r("path",{fill:"currentColor",d:"M15.3 14.48c-.46.45-1.08.67-1.86.67h-1.39V9.2h1.39c.78 0 1.4.22 1.86.67.46.45.68 1.22.68 2.31 0 1.1-.22 1.86-.68 2.31Z"}),r("path",{fill:"currentColor",fillRule:"evenodd",d:"M5 2a3 3 0 0 0-3 3v14a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V5a3 3 0 0 0-3-3H5Zm1 15h2.04V7.34H6V17Zm4-9.66V17h3.44c1.46 0 2.6-.42 3.38-1.25.8-.83 1.2-2.02 1.2-3.58s-.4-2.75-1.2-3.58c-.79-.83-1.92-1.25-3.38-1.25H10Z",clipRule:"evenodd"}))}function uu(e){return r(Zo,{...e,className:me(e.className,"vc-folder-icon"),viewBox:"0 0 24 24"},r("path",{fill:"currentColor",d:"M2 5a3 3 0 0 1 3-3h3.93a2 2 0 0 1 1.66.9L12 5h7a3 3 0 0 1 3 3v11a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3V5Z"}))}function $S(e){return r(Zo,{...e,className:me(e.className,"vc-log-icon"),viewBox:"0 0 24 24"},r("path",{fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd",d:"M3.11 8H6v10.82c0 .86.37 1.68 1 2.27.46.43 1.02.71 1.63.84A1 1 0 0 0 9 22h10a4 4 0 0 0 4-4v-1a2 2 0 0 0-2-2h-1V5a3 3 0 0 0-3-3H4.67c-.87 0-1.7.32-2.34.9-.63.6-1 1.42-1 2.28 0 .71.3 1.35.52 1.75a5.35 5.35 0 0 0 .48.7l.01.01h.01L3.11 7l-.76.65a1 1 0 0 0 .76.35Zm1.56-4c-.38 0-.72.14-.97.37-.24.23-.37.52-.37.81a1.69 1.69 0 0 0 .3.82H6v-.83c0-.29-.13-.58-.37-.8C5.4 4.14 5.04 4 4.67 4Zm5 13a3.58 3.58 0 0 1 0 3H19a2 2 0 0 0 2-2v-1H9.66ZM3.86 6.35ZM11 8a1 1 0 1 0 0 2h5a1 1 0 1 0 0-2h-5Zm-1 5a1 1 0 0 1 1-1h5a1 1 0 1 1 0 2h-5a1 1 0 0 1-1-1Z"}))}function HS(e){return r(Zo,{...e,className:me(e.className,"vc-restart-icon"),viewBox:"0 0 24 24"},r("path",{fill:"currentColor",d:"M4 12a8 8 0 0 1 14.93-4H15a1 1 0 1 0 0 2h6a1 1 0 0 0 1-1V3a1 1 0 1 0-2 0v3a9.98 9.98 0 0 0-18 6 10 10 0 0 0 16.29 7.78 1 1 0 0 0-1.26-1.56A8 8 0 0 1 4 12Z"}))}function Cm(e){return r(Zo,{...e,className:me(e.className,"vc-paintbrush-icon"),viewBox:"0 0 24 24"},r("path",{fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd",d:"M15.35 7.24C15.9 6.67 16 5.8 16 5a3 3 0 1 1 3 3c-.8 0-1.67.09-2.24.65a1.5 1.5 0 0 0 0 2.11l1.12 1.12a3 3 0 0 1 0 4.24l-5 5a3 3 0 0 1-4.25 0l-5.76-5.75a3 3 0 0 1 0-4.24l4.04-4.04.97-.97a3 3 0 0 1 4.24 0l1.12 1.12c.58.58 1.52.58 2.1 0ZM6.9 9.9 4.3 12.54a1 1 0 0 0 0 1.42l2.17 2.17.83-.84a1 1 0 0 1 1.42 1.42l-.84.83.59.59 1.83-1.84a1 1 0 0 1 1.42 1.42l-1.84 1.83.17.17a1 1 0 0 0 1.42 0l2.63-2.62L6.9 9.9Z"}))}function zS(e){return r(Zo,{...e,className:me(e.className,"vc-pencil-icon"),viewBox:"0 0 24 24"},r("path",{fill:"currentColor",d:"m13.96 5.46 4.58 4.58a1 1 0 0 0 1.42 0l1.38-1.38a2 2 0 0 0 0-2.82l-3.18-3.18a2 2 0 0 0-2.82 0l-1.38 1.38a1 1 0 0 0 0 1.42ZM2.11 20.16l.73-4.22a3 3 0 0 1 .83-1.61l7.87-7.87a1 1 0 0 1 1.42 0l4.58 4.58a1 1 0 0 1 0 1.42l-7.87 7.87a3 3 0 0 1-1.6.83l-4.23.73a1.5 1.5 0 0 1-1.73-1.73Z"}))}function l1(e){return r(Zo,{...e,viewBox:"-3 -3 30 30"},r("path",{fill:e.fill||"currentColor",d:"M12 0C5.37 0 0 5.37 0 12c0 5.3 3.438 9.8 8.205 11.385.6.11.82-.26.82-.577v-2.17c-3.338.726-4.042-1.61-4.042-1.61-.546-1.387-1.333-1.757-1.333-1.757-1.09-.745.083-.73.083-.73 1.205.084 1.84 1.237 1.84 1.237 1.07 1.835 2.807 1.305 3.492.998.108-.775.42-1.305.763-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.467-2.38 1.235-3.22-.123-.303-.535-1.523.117-3.176 0 0 1.008-.322 3.3 1.23.957-.266 1.98-.398 3-.403 1.02.005 2.043.137 3 .403 2.29-1.552 3.297-1.23 3.297-1.23.653 1.653.24 2.873.118 3.176.77.84 1.233 1.91 1.233 3.22 0 4.61-2.803 5.625-5.475 5.92.43.37.823 1.102.823 2.222v3.293c0 .32.218.694.825.577C20.565 21.797 24 17.298 24 12c0-6.63-5.37-12-12-12z"}))}function QL(e){return r(Zo,{...e,viewBox:"0 0 24 24"},r("path",{fill:e.fill||"currentColor",d:"M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zM4 12c0-.899.156-1.762.431-2.569L6 11l2 2v2l2 2 1 1v1.931C7.061 19.436 4 16.072 4 12zm14.33 4.873C17.677 16.347 16.687 16 16 16v-1a2 2 0 0 0-2-2h-4v-3a2 2 0 0 0 2-2V7h1a2 2 0 0 0 2-2v-.411C17.928 5.778 20 8.65 20 12a7.947 7.947 0 0 1-1.67 4.873z"}))}function ZL(e){return r(Zo,{...e,viewBox:"0 0 24 24"},r("path",{fill:e.fill||"currentColor",fillRule:"evenodd",d:"M5 2a3 3 0 0 0-3 3v14a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V5a3 3 0 0 0-3-3H5Zm6.81 7c-.54 0-1 .26-1.23.61A1 1 0 0 1 8.92 8.5 3.49 3.49 0 0 1 11.82 7c1.81 0 3.43 1.38 3.43 3.25 0 1.45-.98 2.61-2.27 3.06a1 1 0 0 1-1.96.37l-.19-1a1 1 0 0 1 .98-1.18c.87 0 1.44-.63 1.44-1.25S12.68 9 11.81 9ZM13 16a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm7-10.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0ZM18.5 20a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3ZM7 18.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0ZM5.5 7a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z",clipRule:"evenodd"}))}function XL(e){return r(Zo,{...e,viewBox:"0 0 24 24"},r("path",{fill:e.fill||"currentColor",d:"M10.56 1.1c-.46.05-.7.53-.64.98.18 1.16-.19 2.2-.98 2.53-.8.33-1.79-.15-2.49-1.1-.27-.36-.78-.52-1.14-.24-.77.59-1.45 1.27-2.04 2.04-.28.36-.12.87.24 1.14.96.7 1.43 1.7 1.1 2.49-.33.8-1.37 1.16-2.53.98-.45-.07-.93.18-.99.64a11.1 11.1 0 0 0 0 2.88c.06.46.54.7.99.64 1.16-.18 2.2.19 2.53.98.33.8-.14 1.79-1.1 2.49-.36.27-.52.78-.24 1.14.59.77 1.27 1.45 2.04 2.04.36.28.87.12 1.14-.24.7-.95 1.7-1.43 2.49-1.1.8.33 1.16 1.37.98 2.53-.07.45.18.93.64.99a11.1 11.1 0 0 0 2.88 0c.46-.06.7-.54.64-.99-.18-1.16.19-2.2.98-2.53.8-.33 1.79.14 2.49 1.1.27.36.78.52 1.14.24.77-.59 1.45-1.27 2.04-2.04.28-.36.12-.87-.24-1.14-.96-.7-1.43-1.7-1.1-2.49.33-.8 1.37-1.16 2.53-.98.45.07.93-.18.99-.64a11.1 11.1 0 0 0 0-2.88c-.06-.46-.54-.7-.99-.64-1.16.18-2.2-.19-2.53-.98-.33-.8.14-1.79 1.1-2.49.36-.27.52-.78.24-1.14a11.07 11.07 0 0 0-2.04-2.04c-.36-.28-.87-.12-1.14.24-.7.96-1.7 1.43-2.49 1.1-.8-.33-1.16-1.37-.98-2.53.07-.45-.18-.93-.64-.99a11.1 11.1 0 0 0-2.88 0ZM16 12a4 4 0 1 1-8 0 4 4 0 0 1 8 0Z"}))}function JL(e){return r(Zo,{...e,viewBox:"0 0 24 24"},r("path",{fill:e.fill||"currentColor",d:"M18.559 12.8227C17.7884 13.4957 16.6663 13.3616 15.9404 12.641C14.7975 11.5063 11.4931 8.21104 11.4931 8.21104C10.897 7.63087 10.897 6.44662 11.4931 5.85464C12.319 5.03435 13.6053 3.75146 13.6053 3.75146C13.9641 3.39195 14.456 3.18972 14.9653 3.18886L18.3363 3.18425L19.5255 2L22.5 4.96048L21.3108 6.14473L21.3021 9.50878C21.2992 10.0164 21.0967 10.5026 20.735 10.8613C20.735 10.8613 19.5718 11.9384 18.559 12.8227ZM15.2315 13.9548L13.4954 15.8273C14.0972 16.4265 14.0972 16.9113 13.64 17.6997L11.3976 20.2485C11.0359 20.6081 10.5469 20.8103 10.0347 20.8111L6.66378 20.8158L5.47455 22L2.5 19.0395L3.68927 17.8553L3.70082 14.4912C3.70082 13.9836 3.90338 13.4974 4.26507 13.1387L6.37153 11.0404C6.96759 10.4485 8.15685 10.4485 8.73844 11.0404L8.74424 11.0465L10.5295 9.26998L11.7188 10.4542L9.93347 12.2305L12.3119 14.599L14.0972 12.8227L15.2315 13.9548Z"}))}function VL(e){return r(Zo,{...e,viewBox:"0 0 24 24"},r("path",{fill:e.fill||"currentColor",d:"M16.8333 19H5.16667C3.16667 19 1.5 17.3333 1.5 15.3333C1.5 13.4 2.96667 11.8667 4.83333 11.6667V11.3333C4.83333 7.86667 7.7 5 11.1667 5C14.0333 5 16.5667 6.93333 17.3 9.66667C19.7 9.86667 21.5 11.8667 21.5 14.3333C21.5 16.9333 19.4333 19 16.8333 19Z"}))}function eO(e){return r(Zo,{...e,viewBox:"0 0 24 24"},r("path",{fill:e.fill||"currentColor",d:"M21 2.01232C21.2652 2.01232 21.5196 2.11757 21.7071 2.30492C21.8946 2.49226 22 2.74636 22 3.0113V9.00521C22 9.27015 21.8946 9.52425 21.7071 9.7116C21.5196 9.89894 21.2652 10.0042 21 10.0042H15C14.7348 10.0042 14.4804 9.89894 14.2929 9.7116C14.1054 9.52425 14 9.27015 14 9.00521C14 8.74026 14.1054 8.48617 14.2929 8.29882C14.4804 8.11147 14.7348 8.00622 15 8.00622H18.93C18.352 7.00597 17.5638 6.14275 16.6198 5.47602C15.6758 4.80929 14.5983 4.35488 13.4616 4.1441C12.3249 3.93332 11.1559 3.97117 10.0353 4.25505C8.91459 4.53892 7.86883 5.06208 6.97 5.78848C6.76313 5.9554 6.49836 6.03338 6.23393 6.00528C5.96951 5.97718 5.72709 5.84529 5.56 5.63863C5.39291 5.43197 5.31485 5.16747 5.34298 4.90331C5.37111 4.63916 5.50313 4.39698 5.71 4.23006C6.7542 3.38308 7.959 2.7557 9.25204 2.38561C10.5451 2.01552 11.8996 1.91037 13.2344 2.07646C14.5691 2.24255 15.8565 2.67646 17.0191 3.35212C18.1818 4.02778 19.1957 4.93125 20 6.00826V3.0113C20 2.74636 20.1054 2.49226 20.2929 2.30492C20.4804 2.11757 20.7348 2.01232 21 2.01232ZM3 21.992C2.73478 21.992 2.48043 21.8867 2.29289 21.6994C2.10536 21.5121 2 21.258 2 20.993V14.9991C2 14.7342 2.10536 14.4801 2.29289 14.2927C2.48043 14.1054 2.73478 14.0001 3 14.0001H9C9.26522 14.0001 9.51957 14.1054 9.70711 14.2927C9.89464 14.4801 10 14.7342 10 14.9991C10 15.2641 9.89464 15.5182 9.70711 15.7055C9.51957 15.8928 9.26522 15.9981 9 15.9981H5.07C5.64801 16.9983 6.43617 17.8616 7.3802 18.5283C8.32424 19.195 9.40171 19.6494 10.5384 19.8602C11.6751 20.071 12.8441 20.0331 13.9647 19.7493C15.0854 19.4654 16.1312 18.9422 17.03 18.2158C17.1324 18.1332 17.2502 18.0715 17.3764 18.0343C17.5027 17.9971 17.6351 17.9851 17.7661 17.999C17.897 18.013 18.0239 18.0525 18.1395 18.1154C18.2552 18.1783 18.3573 18.2634 18.44 18.3657C18.5227 18.468 18.5845 18.5856 18.6217 18.7118C18.659 18.8379 18.6709 18.9702 18.657 19.101C18.6431 19.2318 18.6035 19.3586 18.5405 19.4741C18.4776 19.5896 18.3924 19.6916 18.29 19.7743C17.2452 20.6199 16.0403 21.2461 14.7475 21.6154C13.4547 21.9847 12.1005 22.0895 10.7662 21.9235C9.43181 21.7574 8.14476 21.324 6.98212 20.6491C5.81947 19.9743 4.80518 19.0719 4 17.9961V20.993C4 21.258 3.89464 21.5121 3.70711 21.6994C3.51957 21.8867 3.26522 21.992 3 21.992Z"}))}function F_e(e){return r(Zo,{...e,viewBox:"0 0 24 24"},r("path",{fill:e.fill||"currentColor",d:"M12 2C12.2652 2 12.5196 2.10536 12.7071 2.29289C12.8946 2.48043 13 2.73478 13 3V13.59L16.3 10.29C16.3904 10.186 16.5013 10.1018 16.6258 10.0427C16.7503 9.98362 16.8856 9.95088 17.0234 9.94656C17.1611 9.94224 17.2982 9.96644 17.4261 10.0176C17.5541 10.0688 17.6701 10.1459 17.7668 10.244C17.8635 10.3421 17.939 10.4592 17.9883 10.5878C18.0377 10.7165 18.0599 10.8539 18.0537 10.9916C18.0474 11.1292 18.0127 11.2641 17.9519 11.3877C17.891 11.5114 17.8053 11.6211 17.7 11.71L12.7 16.71C12.5131 16.8932 12.2618 16.9959 12 16.9959C11.7382 16.9959 11.4869 16.8932 11.3 16.71L6.3 11.71C6.19474 11.6211 6.10898 11.5114 6.04812 11.3877C5.98726 11.2641 5.95261 11.1292 5.94634 10.9916C5.94007 10.8539 5.96231 10.7165 6.01167 10.5878C6.06104 10.4592 6.13646 10.3421 6.2332 10.244C6.32994 10.1459 6.44592 10.0688 6.57385 10.0176C6.70179 9.96644 6.83892 9.94224 6.97665 9.94656C7.11438 9.95088 7.24972 9.98362 7.3742 10.0427C7.49868 10.1018 7.6096 10.186 7.7 10.29L11 13.59V3C11 2.73478 11.1054 2.48043 11.2929 2.29289C11.4804 2.10536 11.7348 2 12 2ZM3 20C2.73478 20 2.48043 20.1054 2.29289 20.2929C2.10536 20.4804 2 20.7348 2 21C2 21.2652 2.10536 21.5196 2.29289 21.7071C2.48043 21.8946 2.73478 22 3 22H21C21.2652 22 21.5196 21.8946 21.7071 21.7071C21.8946 21.5196 22 21.2652 22 21C22 20.7348 21.8946 20.4804 21.7071 20.2929C21.5196 20.1054 21.2652 20 21 20H3Z"}))}function U_e(e){return r(Zo,{...e,viewBox:"0 0 24 24"},r("path",{fill:e.fill||"currentColor",d:"M7.79997 15.7699C8.49996 16.1999 8.99997 16.9099 8.99997 17.7299V20.9999C8.99997 21.2651 9.10533 21.5195 9.29286 21.707C9.48039 21.8945 9.73476 21.9999 9.99996 21.9999H14C14.2652 21.9999 14.5196 21.8945 14.7071 21.707C14.8946 21.5195 15 21.2651 15 20.9999V17.7299C15 16.9099 15.5 16.1999 16.2 15.7699C17.357 15.0536 18.3137 14.056 18.9812 12.8701C19.6486 11.6842 20.0048 10.3487 20.0168 8.98795C20.0288 7.62724 19.6961 6.28564 19.0497 5.08819C18.4032 3.89074 17.4642 2.87647 16.32 2.13989C15.72 1.74989 15 2.22989 15 2.93989V8.91988C15 9.18511 14.8946 9.43945 14.7071 9.62701C14.5196 9.81454 14.2652 9.9199 14 9.9199H9.99996C9.73476 9.9199 9.48039 9.81454 9.29286 9.62701C9.10533 9.43945 8.99997 9.18511 8.99997 8.91988V2.93989C8.99997 2.22989 8.27997 1.74989 7.67997 2.13989C6.53577 2.87647 5.59671 3.89074 4.9503 5.08819C4.30386 6.28564 3.97113 7.62724 3.9831 8.98795C3.9951 10.3487 4.35138 11.6842 5.01879 12.8701C5.6862 14.056 6.64299 15.0536 7.79997 15.7699Z"}))}function $_e(e){return r(Zo,{...e,viewBox:"0 0 24 24"},r("path",{fill:e.fill||"currentColor",d:"M18.157.056a1.224 1.224 0 0 0-.709.628c-.105.229-.114.305-.115 1.081v.836l-.351.176a5.545 5.545 0 0 0-.586.342l-.233.167-.543-.311c-.899-.515-.944-.535-1.293-.539-.562-.004-1.018.352-1.17.917-.07.262-.021.567.138.858.151.28.21.325 1.02.794l.606.35v1.38l-.606.35c-.81.469-.869.514-1.02.793-.16.291-.208.597-.137.859.151.564.607.92 1.17.916.347-.004.393-.023 1.289-.537l.54-.308.313.21c.172.116.438.262.588.325l.275.114v.85c.001.793.009.87.115 1.098a1.19 1.19 0 0 0 1.969.282c.269-.307.292-.412.292-1.37v-.869l.315-.148c.173-.081.435-.228.582-.325l.266-.177.706.4c.796.45 1.029.523 1.408.438.882-.198 1.235-1.287.635-1.96-.085-.097-.457-.348-.827-.56l-.67-.385V5.359l.67-.386c.37-.212.742-.463.827-.56.6-.672.247-1.762-.635-1.96-.38-.084-.612-.012-1.405.437l-.7.397-.235-.18a3.792 3.792 0 0 0-.586-.344l-.35-.163v-.848c0-.935-.023-1.044-.292-1.35a1.2 1.2 0 0 0-1.26-.346M4.007 1.25a4.15 4.15 0 0 0-1.21.44c-.354.207-1.102.955-1.309 1.309-.199.34-.374.837-.441 1.252-.07.434-.07 10.426 0 10.86.127.792.42 1.343 1.039 1.963.477.478.81.697 1.317.874.59.204.818.216 4.125.217h3.163v2.42l-1.975.014c-2.202.015-2.148.008-2.5.362-.255.253-.346.474-.346.84s.09.587.345.84c.376.376-.09.348 5.688.348 5.75 0 5.309.025 5.67-.327a1.1 1.1 0 0 0 .362-.86c.002-.367-.09-.586-.344-.84-.353-.355-.3-.348-2.5-.363l-1.976-.014v-2.42h3.164c3.306-.001 3.535-.013 4.124-.217.508-.177.84-.396 1.318-.874.882-.882 1.113-1.57 1.082-3.213-.018-.956-.047-1.068-.364-1.384-.253-.255-.474-.346-.84-.346s-.586.091-.84.346c-.317.316-.343.42-.372 1.47-.023.846-.036.966-.13 1.14a1.22 1.22 0 0 1-.597.553c-.217.098-.276.098-7.757.098-7.48 0-7.54 0-7.757-.098a1.153 1.153 0 0 1-.612-.602l-.114-.242V9.68c.001-5.041.003-5.119.1-5.333.122-.27.3-.462.553-.599.19-.103.242-.104 2.958-.128 3.08-.027 2.927-.01 3.288-.372.255-.254.345-.474.345-.84s-.09-.587-.345-.84c-.364-.365-.204-.347-3.288-.355-1.52-.004-2.881.012-3.024.036m15.047 3.693c.207.108.452.361.57.59.143.278.143.755 0 1.028-.285.54-1.08.81-1.636.556a1.357 1.357 0 0 1-.59-.625c-.107-.255-.092-.7.032-.956.121-.251.46-.568.69-.645.213-.073.755-.043.934.052"}))}function tO(e){return r(Zo,{...e,viewBox:"0 0 24 24"},r("path",{fill:e.fill||"currentColor",d:"M15.56 11.77c.2-.1.44.02.44.23a4 4 0 1 1-4-4c.21 0 .33.25.23.44a2.5 2.5 0 0 0 3.32 3.32Z"}),r("path",{clipRule:"evenodd",fillRule:"evenodd",fill:e.fill||"currentColor",d:"M22.89 11.7c.07.2.07.4 0 .6C22.27 13.9 19.1 21 12 21c-7.11 0-10.27-7.11-10.89-8.7a.83.83 0 0 1 0-.6C1.73 10.1 4.9 3 12 3c7.11 0 10.27 7.11 10.89 8.7Zm-4.5-3.62A15.11 15.11 0 0 1 20.85 12c-.38.88-1.18 2.47-2.46 3.92C16.87 17.62 14.8 19 12 19c-2.8 0-4.87-1.38-6.39-3.08A15.11 15.11 0 0 1 3.15 12c.38-.88 1.18-2.47 2.46-3.92C7.13 6.38 9.2 5 12 5c2.8 0 4.87 1.38 6.39 3.08Z"}))}function oO(e){return r(Zo,{...e,viewBox:"0 0 24 24"},r("path",{fill:e.fill||"currentColor",d:"M12.37 9.04c.25-.26.73-.2 1.06.13L15 10.7c.33.33.39.8.13 1.06L4.92 21.84c-.27.26-.74.2-1.07-.13l-1.56-1.54c-.33-.32-.39-.8-.13-1.05l10.2-10.08ZM16.09 5.16c.25-.26.73-.2 1.06.13l1.56 1.54c.33.32.39.8.13 1.05l-2.1 2.08c-.26.25-.74.2-1.07-.13l-1.56-1.54c-.33-.33-.38-.8-.13-1.05l2.1-2.08ZM17.48 14.36a.56.56 0 0 1 1.04 0l.85 2.27 2.27.85c.48.18.48.86 0 1.04l-2.27.85-.85 2.27a.56.56 0 0 1-1.04 0l-.85-2.27-2.27-.85a.56.56 0 0 1 0-1.04l2.27-.85.85-2.27ZM7.6 2.32a.5.5 0 0 1 .94 0L9.17 4l1.66.62a.5.5 0 0 1 0 .93l-1.66.63-.63 1.66a.5.5 0 0 1-.93 0l-.63-1.66-1.66-.63a.5.5 0 0 1 0-.93l1.66-.62.63-1.67Z"}))}function nO(e){return r(Zo,{...e,viewBox:"0 0 24 24"},r("path",{clipRule:"evenodd",fillRule:"evenodd",fill:e.fill||"currentColor",d:"M15.62 17.03a9 9 0 1 1 1.41-1.41l4.68 4.67a1 1 0 0 1-1.42 1.42l-4.67-4.68ZM17 10a7 7 0 1 1-14 0 7 7 0 0 1 14 0Z"}))}function rO(e){return r(Zo,{...e,viewBox:"0 0 24 24"},r("path",{fill:e.fill||"currentColor",d:"M6.5 20Q4.22 20 2.61 18.43 1 16.85 1 14.58 1 12.63 2.17 11.1 3.35 9.57 5.25 9.15 5.83 7.13 7.39 5.75 8.95 4.38 11 4.08V12.15L9.4 10.6L8 12L12 16L16 12L14.6 10.6L13 12.15V4.08Q15.58 4.43 17.29 6.39 19 8.35 19 11 20.73 11.2 21.86 12.5 23 13.78 23 15.5 23 17.38 21.69 18.69 20.38 20 18.5 20Z"}))}function iO(e){return r(Zo,{...e,viewBox:"0 0 24 24"},r("path",{fill:e.fill||"currentColor",d:"M11 20H6.5Q4.22 20 2.61 18.43 1 16.85 1 14.58 1 12.63 2.17 11.1 3.35 9.57 5.25 9.15 5.88 6.85 7.75 5.43 9.63 4 12 4 14.93 4 16.96 6.04 19 8.07 19 11 20.73 11.2 21.86 12.5 23 13.78 23 15.5 23 17.38 21.69 18.69 20.38 20 18.5 20H13V12.85L14.6 14.4L16 13L12 9L8 13L9.4 14.4L11 12.85Z"}))}var ao=x(()=>{"use strict";d();qte();mt();xt()});var jte=x(()=>{});function Go({disabled:e,useDefaultUnderlineStyles:t=!0,href:o,rel:n,target:i,className:s,children:a,...l}){let c=o&&/^(?:discord:\/)?\/[a-zA-Z0-9_-]/.test(o),u=o&&!c;return r("a",{role:"link",href:o,target:i??(u?"_blank":void 0),rel:n??(u?"noreferrer noopener":void 0),className:me("vc-link",t&&"vc-link-underline-on-hover",e&&"vc-link-disabled",s),"aria-disabled":e,...l},a)}var ts=x(()=>{"use strict";d();jte();xt()});function Me({variant:e="primary",size:t="medium",children:o,className:n,...i}){return r("button",{"data-mana-component":"button",className:me(LE("base",e,t),n),...i},o,e==="link"&&r(_r,{className:LE("link-icon")}))}function sO({variant:e="link",size:t="medium",className:o,children:n,...i}){return r(Go,{"data-mana-component":"button",className:me(LE("base",e,t),o),...i},n,r(_r,{className:LE("link-icon")}))}function Ia({variant:e="primary",className:t,...o}){return r("button",{className:me(H_e("base",e),t),...o})}var LE,H_e,c1,z_e,G_e,Co=x(()=>{"use strict";d();Gte();nt();xt();ao();ts();LE=de("vc-btn-"),H_e=de("vc-text-btn-");c1=function({look:t,color:o="BRAND",size:n="medium",...i}){return t==="LINK"?r(Ia,{variant:G_e[o],...i}):r(Me,{variant:z_e[o],size:n,...i})};c1.Looks={FILLED:"",LINK:"LINK"};c1.Colors={BRAND:"BRAND",PRIMARY:"PRIMARY",RED:"RED",TRANSPARENT:"TRANSPARENT",CUSTOM:"CUSTOM",GREEN:"GREEN",LINK:"LINK",WHITE:"WHITE"};z_e={BRAND:"primary",PRIMARY:"secondary",RED:"dangerPrimary",TRANSPARENT:"secondary",CUSTOM:"none",GREEN:"positive",LINK:"link",WHITE:"overlayPrimary"},G_e={BRAND:"primary",PRIMARY:"primary",RED:"danger",TRANSPARENT:"secondary",CUSTOM:"secondary",GREEN:"primary",LINK:"link",WHITE:"secondary"};c1.Sizes={SMALL:"small",MEDIUM:"medium",LARGE:"medium",XLARGE:"medium",NONE:"min",MIN:"min"}});var Wte=x(()=>{});function Bt({className:e,...t}){return r("hr",{className:me("vc-divider",e),...t})}var Ar=x(()=>{"use strict";d();Wte();xt()});var Kte=x(()=>{});function Be({flexDirection:e,gap:t="1em",justifyContent:o,alignItems:n,flexWrap:i,children:s,style:a,...l}){return a={display:"flex",flexDirection:e,gap:t,justifyContent:o,alignItems:n,flexWrap:i,...a},r("div",{style:a,...l},s)}var eo=x(()=>{"use strict";d()});function Tm({children:e,size:t="sm",weight:o="normal",...n}){return r(Y,{tag:"span",size:t,weight:o,...n},e)}var u1=x(()=>{"use strict";d();Et()});var Yte=x(()=>{});function os({checked:e,onChange:t,disabled:o,id:n,hasIcon:i=!1,innerRef:s,...a}){let[l,c]=L(!1),u=p=>{let m=p.currentTarget;c(m.matches(":focus-visible"))};return r("label",{className:OE("container",{checked:e,disabled:o,focusVisible:l})},r("div",{className:OE("indicator"),"data-mana-component":"switch"},r("svg",{className:OE("thumb"),viewBox:"0 0 24 24",preserveAspectRatio:"xMidYMin meet","aria-hidden":"true"},r("rect",{fill:"var(--switch-thumb-background-default)",x:4,y:4,width:16,height:16,rx:8}),i&&r("svg",{viewBox:"0 0 24 24",fill:"none"},r("g",{transform:"translate(4 4)"},e?r(f,null,r("path",{fill:"var(--switch-thumb-icon-active)",d:"M6.31649 11.88304L5.0437 10.61032L11.44792 4.20604L12.72072 5.47883L6.31649 11.88304Z"}),r("path",{fill:"var(--switch-thumb-icon-active)",d:"M3.26914 8.87224L4.54194 7.59943L7.5588 10.61632L6.28601 11.88912L3.26914 8.87224Z"})):r(f,null,r("path",{fill:"var(--switch-thumb-icon-default)",d:"M4.10585 5.3837L5.37864 4.11091L11.884 10.61632L10.6112 11.88912L4.10585 5.3837Z"}),r("path",{fill:"var(--switch-thumb-icon-default)",d:"M10.61632 4.11091L11.88912 5.3837L5.3837 11.88912L4.11091 10.61632L10.61632 4.11091Z"})))))),r("input",{ref:s,id:n,type:"checkbox",role:"switch",className:OE("input"),tabIndex:0,checked:e,disabled:o,onChange:p=>t(p.currentTarget.checked),onFocus:u,onBlur:u,...a}))}var OE,Im=x(()=>{"use strict";d();Yte();nt();B();OE=de("vc-switch-")});function fn({onChange:e,title:t,value:o,description:n,disabled:i,className:s,hideBorder:a}){return r("div",{className:me("vc-form-switch-container",a&&"vc-form-switch-no-border")},r("label",{className:me("vc-form-switch",s,i&&"vc-form-switch-disabled")},r("div",{className:"vc-form-switch-text"},r(Be,{flexDirection:"column",gap:"4px"},r(Tm,{size:"md",weight:"medium",color:"text-strong"},t),n&&r(Tm,{size:"sm",color:"text-subtle"},n))),r("div",{className:"vc-form-switch-control"},r(os,{checked:o,onChange:e,disabled:i}))))}function aO({note:e,children:t,...o}){return r(fn,{title:t??"",description:e,...o})}var Qs=x(()=>{"use strict";d();Kte();xt();eo();u1();Im()});var Qte=x(()=>{});function re(e){let{tag:t="h5",children:o,className:n,...i}=e;return r(t,{className:me(`vc-${t}`,`vc-${t}-defaultMargin`,n),...i},o)}function Jo({children:e,...t}){return r(re,{tag:"h2",...t},e)}function so({children:e,...t}){return r(re,{tag:"h3",...t},e)}function Vn({children:e,...t}){return r(re,{tag:"h4",...t},e)}var ut=x(()=>{"use strict";d();Qte();xt()});function W({children:e,size:t="sm",weight:o="normal",...n}){return r(Y,{tag:"p",size:t,weight:o,...n},e)}var wt=x(()=>{"use strict";d();Et()});function ii({children:e,...t}){return r(Ue,{...t},o=>r("div",{...o},e))}var du=x(()=>{"use strict";d();B()});var d1,lO,Zte=x(()=>{"use strict";d();d1=()=>{},lO=({children:e})=>{if(typeof e!="function")return null;let t=e({onBlur:d1,onFocus:d1,onMouseEnter:d1,onMouseLeave:d1,onClick:d1,onContextMenu:d1});return r(f,null,t)};lO.Colors={}});function sd(e,t=5){let o=0,n;return()=>(n===void 0&&t>o++&&(n=e(),n===void 0&&t===o&&console.error("Lazy factory failed:",e)),n)}function _n(e,t=5,o=!1){let n=!0;o||setTimeout(()=>n=!1,0);let i=0,s=Object.assign(function(){},{[Dm]:void 0,[id](){return!s[Dm]&&t>i++&&(s[Dm]=e(),!s[Dm]&&t===i&&console.error("Lazy factory failed:",e)),s[Dm]}});return new Proxy(s,{...FE,get(a,l,c){if(l===Dm||l===id)return Reflect.get(a,l,c);if(!o&&n)return _n(()=>Reflect.get(a[id](),l,c),t,!0);let u=a[id]();if(typeof u=="object"||typeof u=="function")return Reflect.get(u,l,c);throw new Error("proxyLazy called on a primitive value")}})}var Xte,FE,id,Dm,Is=x(()=>{"use strict";d();Xte=["arguments","caller","prototype"],FE={},id=Symbol.for("vencord.lazy.get"),Dm=Symbol.for("vencord.lazy.cached");for(let e of["apply","construct","defineProperty","deleteProperty","getOwnPropertyDescriptor","getPrototypeOf","has","isExtensible","ownKeys","preventExtensions","set","setPrototypeOf"])FE[e]=(t,...o)=>Reflect[e](t[id](),...o);FE.ownKeys=e=>{let t=e[id](),o=Reflect.ownKeys(t);for(let n of Xte)o.includes(n)||o.push(n);return o};FE.getOwnPropertyDescriptor=(e,t)=>{if(typeof t=="string"&&Xte.includes(t))return Reflect.getOwnPropertyDescriptor(e,t);let o=Reflect.getOwnPropertyDescriptor(e[id](),t);return o&&Object.defineProperty(e,t,o),o}});function Rn(e,t=5){let o=sd(e,t),n=i=>{let s=o()??q_e;return r(s,{...i})};return n.$$vencordGetWrappedComponent=o,n}var q_e,wh=x(()=>{"use strict";d();Is();q_e=()=>null});var ke,At=x(()=>{"use strict";d();ke=class{constructor(t,o="white"){this.name=t;this.color=o}static makeTitle(t,o){return["%c %c %s ","",`background: ${t}; color: black; font-weight: bold; border-radius: 5px;`,o]}_log(t,o,n,i=""){console[t](`%c Equicord %c %c ${this.name} ${i}`,`background: ${o}; color: black; font-weight: bold; border-radius: 5px;`,"",`background: ${this.color}; color: black; font-weight: bold; border-radius: 5px;`,...n)}log(...t){this._log("log","#a6d189",t)}info(...t){this._log("info","#a6d189",t)}error(...t){this._log("error","#e78284",t)}errorCustomFmt(t,...o){this._log("error","#e78284",o,t)}warn(...t){this._log("warn","#e5c890",t)}debug(...t){this._log("debug","#eebebe",t)}}});function eoe(e,t,o,n){return BigInt(e)|BigInt(t)<<16n|BigInt(o)<<32n|BigInt(n)<<48n}function Mm(e,t){return BigInt(e[t])|BigInt(e[t+1])<<8n|BigInt(e[t+2])<<16n|BigInt(e[t+3])<<24n|BigInt(e[t+4])<<32n|BigInt(e[t+5])<<40n|BigInt(e[t+6])<<48n|BigInt(e[t+7])<<56n}function ns(e,t){return e<<t&j_e|e>>toe-t}function Lo(e){return BigInt.asUintN(64,e)}function UE(e,t=0){return new cO(t).update(e).digest()}var Ci,ua,Jte,GS,Vte,toe,j_e,W_e,cO,uO=x(()=>{d();Ci=11400714785074694791n,ua=14029467366897019727n,Jte=1609587929392839161n,GS=9650029242287828579n,Vte=2870177450012600261n,toe=64n,j_e=2n**toe-1n,W_e=new TextEncoder;cO=class{#e;#t;#o;#n;#r;#a;#i;#s;constructor(t=0){this.reset(t)}reset(t=this.#e){return this.#e=BigInt.asUintN(32,BigInt(t)),this.#t=Lo(this.#e+Ci+ua),this.#o=Lo(this.#e+ua),this.#n=this.#e,this.#r=Lo(this.#e-Ci),this.#a=null,this.#i=0,this.#s=0,this}update(t){typeof t=="string"&&(t=W_e.encode(t));let o=0,n=t.length,i=o+n;if(n===0)return this;if(this.#i+=n,this.#s===0&&(this.#a=new Uint8Array(32)),this.#s+n<32)return this.#a.set(t.subarray(0,n),this.#s),this.#s+=n,this;if(this.#s>0){this.#a.set(t.subarray(0,32-this.#s),this.#s);let s=0,a;a=Mm(this.#a,s),this.#t=Lo(ns(Lo(this.#t+a*ua),31n)*Ci),s+=8,a=Mm(this.memory,s),this.#o=Lo(ns(Lo(this.#o+a*ua),31n)*Ci),s+=8,a=Mm(this.memory,s),this.#n=Lo(ns(Lo(this.#n+a*ua),31n)*Ci),s+=8,a=Mm(this.memory,s),this.#r=Lo(ns(Lo(this.#r+a*ua),31n)*Ci),o+=32-this.#s,this.#s=0}if(o<=i-32){let s=i-32;do{let a;a=Mm(t,o),this.#t=Lo(ns(Lo(this.#t+a*ua),31n)*Ci),o+=8,a=Mm(t,o),this.#o=Lo(ns(Lo(this.#o+a*ua),31n)*Ci),o+=8,a=Mm(t,o),this.#n=Lo(ns(Lo(this.#n+a*ua),31n)*Ci),o+=8,a=Mm(t,o),this.#r=Lo(ns(Lo(this.#r+a*ua),31n)*Ci),o+=8}while(o<=s)}return o<i&&(this.#a.set(t.subarray(o,i),this.#s),this.#s=i-o),this}digest(){let t=this.#a,o=this.#s,n=0,i=0n,s=0n,a=0n;for(this.#i>=32?(i=ns(this.#t,1n)+ns(this.#o,7n)+ns(this.#n,12n)+ns(this.#r,18n),i=Lo(i^ns(Lo(this.#t*ua),31n)*Ci),i=Lo(i*Ci+GS),i=Lo(i^ns(Lo(this.#o*ua),31n)*Ci),i=Lo(i*Ci+GS),i=Lo(i^ns(Lo(this.#n*ua),31n)*Ci),i=Lo(i*Ci+GS),i=Lo(i^ns(Lo(this.#r*ua),31n)*Ci),i=Lo(i*Ci+GS)):i=Lo(this.#e+Vte),i+=BigInt(this.#i);n<=o-8;)a=Mm(t,n),a=Lo(ns(Lo(a*ua),31n)*Ci),i=Lo(ns(i^a,27n)*Ci+GS),n+=8;for(n+4<=o&&(a=eoe(t[n+1]<<8|t[n],t[n+3]<<8|t[n+2],0,0),i=Lo(ns(i^Lo(a*Ci),23n)*ua+Jte),n+=4);n<o;)a=eoe(t[n++],0,0,0),i=Lo(ns(i^Lo(a*Vte),11n)*Ci);return s=Lo(i>>33n),i=Lo((i^s)*ua),s=Lo(i>>29n),i=Lo((i^s)*Jte),s=Lo(i>>32n),i=Lo(i^s),i}}});function Y_e(e){e=BigInt(e);let t=[],o=Math.ceil(Math.floor(Math.log2(Number(e))+1)/8);for(let i=0;i<o;i++)t.unshift(Number(e>>BigInt(8*i)&BigInt(255)));let n=new Uint8Array(t);return K_e?n:n.reverse()}function kh(e){let t=UE(e,0),o=Y_e(t);return[p1[o[0]>>2],p1[(o[0]&3)<<4|o[1]>>4],p1[(o[1]&15)<<2|o[2]>>6],p1[o[2]&63],p1[o[3]>>2],p1[(o[3]&3)<<4|o[4]>>4]].join("")}var p1,K_e,qS=x(()=>{"use strict";d();uO();p1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),K_e=(()=>{let e=new Uint8Array(4),t=new Uint32Array(e.buffer);return!((t[0]=1)&e[0])})()});function Ti(e){let t=typeof e=="string"?e:e.source;if(t=t.replaceAll(/#{intl::([\w$+/]*)(?:::(\w+))?}/g,(i,s,a)=>{let l=a==="raw"?s:kh(s);if(a==="hash")return l;let c=typeof e=="string";return!Number.isNaN(Number(l[0]))||l.includes("+")||l.includes("/")?c?`["${l}"]`:String.raw`(?:\["${l}"\])`.replaceAll("+","\\+"):c?`.${l}`:String.raw`(?:\.${l})`}),typeof e=="string")return t;let o=t.replaceAll(/(\\*)\\i/g,(i,s)=>s.length%2===0?`${s}${String.raw`(?:[A-Za-z_$][\w$]*)`}`:i.slice(1)),n=new RegExp(o,e.flags);return n.toString=e.toString.bind(e),n}function jS(e,t){return typeof e!="function"?e.replaceAll("$self",t):((...o)=>e(...o).replaceAll("$self",t))}function $E(e,t){if(e.get){let o=e.get;e.get=function(){return t(o.call(this))}}else e.value&&(e.value=t(e.value));return e}function WS(e,t){let o=Object.getOwnPropertyDescriptors(e);o.match=$E(o.match,Ti),o.replace=$E(o.replace,n=>jS(n,t)),Object.defineProperties(e,o)}function dO(e){let t=Object.getOwnPropertyDescriptors(e);t.find=$E(t.find,Ti),Object.defineProperties(e,t)}var ad=x(()=>{"use strict";d();qS()});function ooe(e,t,o){return o===!1?t?e.slice(0,-1):e:e[0]}function QS(e,t,o=!1){let{moment:n}=(B(),hh(d0)),i=n.duration(e,t),s=nRe.map(u=>({amount:i[u](),unit:u})),a=0;e:for(let u=0;u<s.length;u++)if(!(s[u].amount===0||!(u+1<s.length))){for(let p=u+1;p<s.length;p++)if(s[p].amount!==0)continue e;a=s.length-(u+1)}s=a===0?s:s.slice(0,-a);let l=s.findIndex(({unit:u})=>u==="days");if(l!==-1){let u=s[l],p=u.amount%7;p===0?s.splice(l,1):u.amount=p}let c="";for(;s.length;){let{amount:u,unit:p}=s.shift();c.length&&(c+=s.length?", ":" and "),(u>0||c.length)&&(c+=`${u} ${ooe(p,u===1,o)}`)}return c.length?c:`0 ${ooe(t,!1,o)}`}function ZS(e,t=!1,o=!0){let n=m=>t?m:m.toString().padStart(2,"0"),i=m=>t?m:"",s=t?" ":":",a=Math.floor(e/864e5),l=Math.floor(e%864e5/36e5),c=Math.floor(e%864e5%36e5/6e4),u=Math.floor(e%864e5%36e5%6e4/1e3),p="";return a&&(p+=`${a}${i("d")}${s}`),(l||p||!o)&&(p+=`${n(l)}${i("h")}${s}`),(c||p||!t||!o)&&(p+=`${n(c)}${i("m")}`),o&&(c||p||!t)&&(p+=`${s}`),o&&(p+=`${n(u)}${i("s")}`),p}function pO(e,t=o=>o){let{length:o}=e;if(o===0)return"";if(o===1)return t(e[0]);let n="";for(let i=0;i<o;i++)n+=t(e[i]),o-i>2?n+=", ":o-i>1&&(n+=" and ");return n}function Bm(e,t){return`\`\`\`${t||""}
${e.replaceAll("```","\\`\\`\\`")}
\`\`\``}function noe(e,...t){let o=String.raw({raw:e},...t),n=o.match(/^[ \t]*(?=\S)/gm);if(!n)return o.trim();let i=n.reduce((s,a)=>Math.min(s,a.length),1/0);return o.replace(new RegExp(`^[ \\t]{${i}}`,"gm"),"").trim()}function rRe(e){return"``"+KS+e.replaceAll("`",KS+"`"+KS)+KS+"``"}var YS,Q_e,Z_e,X_e,J_e,V_e,eRe,tRe,oRe,Nm,nRe,KS,mO,Da=x(()=>{"use strict";d();YS=e=>e.split(/(?=[A-Z][a-z])|(?<=[a-z])(?=[A-Z])/).map(t=>/^[A-Z]{2,}$/.test(t)?t:t.toLowerCase()),Q_e=e=>e.toLowerCase().split("_"),Z_e=e=>e.toLowerCase().split("-"),X_e=e=>e.split(/(?=[A-Z])/).map(t=>t.toLowerCase()),J_e=e=>e.toLowerCase().split(" "),V_e=e=>e.map((t,o)=>o?t[0].toUpperCase()+t.slice(1):t).join(""),eRe=e=>e.join("_").toUpperCase(),tRe=e=>e.join("-").toLowerCase(),oRe=e=>e.map(t=>t[0].toUpperCase()+t.slice(1)).join(""),Nm=e=>e.map(t=>t[0].toUpperCase()+t.slice(1)).join(" "),nRe=["years","months","weeks","days","hours","minutes","seconds"];KS="\u200B";mO=RegExp.escape??function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}});function iRe(e,t,o){return function(...n){return[t.apply(this,n),0]}}function sRe(e,t,o){return t}var roe,Pm,HE=x(()=>{"use strict";d();At();roe=iRe,Pm=sRe});var WE={};Ao(WE,{ChunkIdsRegex:()=>ow,DefaultExtractAndLoadChunksRegex:()=>Th,LazyComponentWebpack:()=>coe,_blacklistBadModules:()=>qE,_initWebpack:()=>VS,_resolveReady:()=>XS,cache:()=>mu,extract:()=>nw,extractAndLoadChunks:()=>hO,extractAndLoadChunksLazy:()=>Ds,factoryListeners:()=>Ah,filters:()=>ot,find:()=>da,findAll:()=>m0,findBulk:()=>jE,findByCode:()=>ap,findByCodeLazy:()=>vt,findByProps:()=>Ch,findByPropsLazy:()=>He,findComponentByCode:()=>uoe,findComponentByCodeLazy:()=>De,findComponentLazy:()=>m1,findCssClasses:()=>fO,findCssClassesLazy:()=>et,findExportedComponentLazy:()=>fu,findLazy:()=>An,findModuleFactory:()=>ew,findModuleId:()=>sp,findStore:()=>cd,findStoreLazy:()=>Ft,fluxStores:()=>pu,handleModuleNotFound:()=>ld,lazyWebpackSearchHistory:()=>loe,makeClassNameRegex:()=>zE,mapMangledCssClasses:()=>tw,mapMangledModule:()=>gO,mapMangledModuleLazy:()=>qn,moduleListeners:()=>GE,onceReady:()=>p0,proxyLazyWebpack:()=>fr,search:()=>f1,stringMatches:()=>JS,waitFor:()=>Ln,waitForSubscriptions:()=>Eh,wreq:()=>Bo});function zE(e){return new RegExp(`(?:\\b|_)${mO(e)}(?:\\b|_)`)}function VS(e){Bo=e,mu=e.c,Reflect.defineProperty(e.c,Symbol.toStringTag,{value:"ModuleCache",configurable:!0,writable:!0,enumerable:!1})}function soe(e){return e==null||e===window||e===document||e===document.documentElement||e[Symbol.toStringTag]==="DOMTokenList"||e[Symbol.toStringTag]==="IntlMessagesProxy"?!0:e[ioe]!==void 0?(Reflect.deleteProperty(e,ioe),!0):e instanceof aRe}function aoe(e,t){let o=Object.getOwnPropertyDescriptor(e,t);o!=null&&Reflect.defineProperty(e,t,{...o,enumerable:!1})}function qE(e,t,o){try{if(soe(t))return aoe(e,o),!0}catch(s){_m.error(`Error while blacklisting module:
`,s,`

Module id:`,o,`

Module exports:`,t)}if(typeof t!="object")return!1;let n=!0;for(let s in t)try{try{var i=t[s]}catch{continue}soe(i)?aoe(t,s):n=!1}catch(a){_m.error(`Error while blacklistng module:
`,a,`

Module id:`,o,`

Export value:`,i)}return n}function ld(e,...t){let o=new Error(`webpack.${e} found no module`);_m.error(o,"Filter:",t)}function m0(e,{topLevelOnly:t=!1}={}){if(typeof e!="function")throw new Error("Invalid filter. Expected a function got "+typeof e);let o=[];for(let n in mu){let i=mu[n];if(!(!i?.loaded||i.exports==null)&&(e(i.exports)&&o.push(i.exports),!(typeof i.exports!="object"||t)))for(let s in i.exports){let a=i.exports[s];a&&e(a)&&o.push(a)}}return o}function ew(...e){let t=sp(...e);return t?Bo.m[t]:null}function fr(e,t){return _n(e,t)}function coe(e,t){return Rn(e,t)}function An(e,t=!0){return _n(()=>da(e))}function Ch(...e){let t=da(ot.byProps(...e),{isIndirect:!0});return t||ld("findByProps",...e),t}function He(...e){return _n(()=>Ch(...e))}function ap(...e){let t=da(ot.byCode(...e),{isIndirect:!0});return t||ld("findByCode",...e),t}function vt(...e){return _n(()=>ap(...e))}function lRe(){let{Flux:e}=(B(),hh(d0));e.Store.getAll?.().forEach(t=>pu.set(t.getName(),t));try{let o=ap("libdiscoreWasm is not initialized")();for(let n in o){if(!n.endsWith("Store"))continue;let i=n,s=o[i];pu.set(i,s)}}catch{}}function cd(e){if(pu.has(e)||lRe(),pu.has(e))return pu.get(e);let t=da(ot.byStoreName(e),{isIndirect:!0});return t?(pu.set(e,t),t):(ld("findStore",e),null)}function Ft(e){return _n(()=>cd(e))}function uoe(...e){let t=da(ot.componentByCode(...e),{isIndirect:!0});return t||ld("findComponentByCode",...e),t}function m1(e){return Rn(()=>{let t=da(e,{isIndirect:!0});return t||ld("findComponent",e),t})}function De(...e){return Rn(()=>{let t=da(ot.componentByCode(...e),{isIndirect:!0});return t||ld("findComponentByCode",...e),t})}function fu(...e){return Rn(()=>{let t=da(ot.byProps(...e),{isIndirect:!0});return t||ld("findExportedComponent",...e),t[e[0]]})}function tw(e,t){let o=Object.values(e),n={};for(let i of t){let s=zE(i);if(n[i]=o.find(a=>typeof a=="string"&&s.test(a)),!n[i])throw new Error(`mapMangledCssClasses: Invalid input. ${i} not found in module`)}return n}function fO(...e){let t=da(ot.byClassNames(...e),{isIndirect:!0,topLevelOnly:!0});return t?tw(t,e):(ld("findCssClasses",...e),{})}function et(...e){return _n(()=>fO(...e))}function cRe(e,t){let o=new Set,n=t?Object.getOwnPropertyNames:Object.keys;do n(e).forEach(i=>i!=="__esModule"&&o.add(i)),e=Object.getPrototypeOf(e);while(e!=null);return o}function qn(e,t,o=!1){return _n(()=>gO(e,t,o))}async function hO(e,t=Th){let o=ew(...e);if(!o){let c=new Error("extractAndLoadChunks: Couldn't find module factory");return _m.warn(c,"Code:",e,"Matcher:",t),!1}let n=String(o).match(Ti(t));if(!n){let c=new Error("extractAndLoadChunks: Couldn't find chunk loading in module factory code");return _m.warn(c,"Code:",e,"Matcher:",t),!1}let[,i,s]=n;if(s==null){let c=new Error("extractAndLoadChunks: Matcher didn't return a capturing group with the chunk ids array or the entry point id");return _m.warn(c,"Code:",e,"Matcher:",t),!1}let a=Number(s),l=Number.isNaN(a)?s:a;if(i){let c=Array.from(i.matchAll(ow)).map(u=>{let p=Number(u[1]);return Number.isNaN(p)?u[1]:p});await Promise.all(c.map(u=>Bo.e(u)))}if(Bo.m[l]==null){let c=new Error("extractAndLoadChunks: Entry point is not loaded in the module factories, perhaps one of the chunks failed to load");return _m.warn(c,"Code:",e,"Matcher:",t),!1}return Bo(l),!0}function Ds(e,t=Th){return sd(()=>hO(e,t))}function Ln(e,t,{isIndirect:o=!1}={}){if(typeof e=="string")e=ot.byProps(e);else if(Array.isArray(e))e=ot.byProps(...e);else if(typeof e!="function")throw new Error("filter must be a string, string[] or function, got "+typeof e);if(mu!=null){let[n,i]=da(e,{isIndirect:!0,isWaitFor:!0});if(n)return void t(n,i)}Eh.set(e,t)}function f1(...e){e=e.map(Ti);let t={},o=Bo.m;for(let n in o){let i=o[n];JS(i.toString(),e)&&(t[n]=i)}return t}function nw(e){let t=Bo.m[e];if(!t)return null;let o=String(t),i="0,"+(o.startsWith("(")?"":"function")+o.slice(o.indexOf("(")),s=`
// [EXTRACTED] WebpackModule${String(e)}
// WARNING: This module was extracted to be more easily readable.
//          This module is NOT ACTUALLY USED! This means putting breakpoints will have NO EFFECT!!

0,${i}
//# sourceURL=file:///ExtractedWebpackModule${String(e)}
`;return(0,eval)(s)}var _m,XS,p0,Bo,mu,pu,JS,ot,Eh,GE,Ah,aRe,ioe,da,jE,sp,loe,gO,Th,ow,fe=x(()=>{"use strict";d();Is();wh();At();ad();Da();HE();_m=new ke("Webpack"),p0=new Promise(e=>XS=e),pu=new Map,JS=(e,t)=>t.every(o=>typeof o=="string"?e.includes(o):(o.global&&(o.lastIndex=0),o.test(e)));ot={byProps:(...e)=>e.length===1?t=>t[e[0]]!==void 0:t=>e.every(o=>t[o]!==void 0),byCode:(...e)=>{let t=e.map(Ti),o=n=>typeof n!="function"?!1:JS(Function.prototype.toString.call(n),t);return o.$$vencordProps=[...e],o},byStoreName:e=>t=>t.constructor?.displayName===e,componentByCode:(...e)=>{let t=ot.byCode(...e),o=n=>{let i=n;for(;i!=null;){if(t(i))return!0;if(i.$$typeof)if(i.type)i=i.type;else if(i.render)i=i.render;else return!1;else return!1}return!1};return o.$$vencordProps=[...e],o},byClassNames:(...e)=>{let t=e.map(zE);return o=>{if(typeof o!="object")return!1;let n=Object.values(o);return t.every(i=>n.some(s=>typeof s=="string"&&i.test(s)))}}},Eh=new Map,GE=new Set,Ah=new Set;aRe=Object.getPrototypeOf(Int8Array),ioe="is this a proxy that returns values for any key?";da=Pm("find",function(t,{isIndirect:o=!1,isWaitFor:n=!1,topLevelOnly:i=!1}={}){if(typeof t!="function")throw new Error("Invalid filter. Expected a function got "+typeof t);for(let s in mu){let a=mu[s];if(!(!a?.loaded||a.exports==null)){if(t(a.exports))return n?[a.exports,s]:a.exports;if(!(typeof a.exports!="object"||i))for(let l in a.exports){let c=a.exports[l];if(c&&t(c))return n?[c,s]:c}}}return o||ld("find",t),n?[null,null]:null});jE=Pm("findBulk",function(...t){if(!Array.isArray(t))throw new Error("Invalid filters. Expected function[] got "+typeof t);let{length:o}=t;if(o===0)throw new Error("Expected at least two filters.");if(o===1)return da(t[0]);let n=t,i=0,s=Array(o);e:for(let a in mu){let l=mu[a];if(!(!l?.loaded||l.exports==null))for(let c=0;c<o;c++){let u=n[c];if(u!==void 0){if(u(l.exports)){if(s[c]=l.exports,n[c]=void 0,++i===o)break e;break}if(typeof l.exports=="object")for(let p in l.exports){let m=l.exports[p];if(m&&u(m)){if(s[c]=m,n[c]=void 0,++i===o)break e;continue e}}}}}if(i!==o){let a=new Error(`Got ${o} filters, but only found ${i} modules!`);_m.warn(a)}return s}),sp=Pm("findModuleId",function(...t){t=t.map(Ti);for(let n in Bo.m)if(JS(Bo.m[n].toString(),t))return n;let o=new Error(`Didn't find module with code(s):
`+t.join(`
`));return _m.warn(o),null});loe=[];gO=Pm("mapMangledModule",function(t,o,n=!1){let i={},s=sp(...Array.isArray(t)?t:[t]);if(s===null)return i;let a=Bo(s),l=cRe(a,n);e:for(let c of l){let u=a[c];for(let p in o)if(o[p](u)){i[p]=u;continue e}}return i});Th=/(?:(?:Promise\.all\(\[)?((?:\i\.e\("?[^)]+?"?\),?)+?)(?:\]\))?|Promise\.resolve\(\))\.then\(\i\.bind\(\i,"?([^)]+?)"?\)\)/,ow=/\("([^"]+?)"\)/g});function yO(e){let t=typeof e;return t==="string"||t==="number"||t==="bigint"||t==="boolean"||t==="undefined"}function Cr(e,t){let o=Object.assign({fallbackValue:null,deps:[],onError:null},t),[n,i]=L({value:o.fallbackValue,error:null,pending:!0});return se(()=>{let s=!0;return n.pending||i({...n,pending:!0}),e().then(a=>{s&&(i({value:a,error:null,pending:!1}),o.onSuccess?.(a))}).catch(a=>{s&&(i({value:null,error:a,pending:!1}),o.onError?.(a))}),()=>void(s=!1)},o.deps),[n.value,n.error,n.pending]}function Vo(e){let t=f0(o=>o+1,0);return e?t:t[1]}function iw({interval:e=1e3,deps:t=[]}){let[o,n]=L(0),i=rt(()=>Date.now(),t);return se(()=>{let s=setInterval(()=>n(Date.now()-i),e);return()=>{n(0),clearInterval(s)}},t),o}function bO({interval:e=1e3,initialTime:t=Date.now()}){let[o,n]=L(Date.now()-t);return se(()=>{let i=setInterval(()=>n(Date.now()-t),e);return()=>{clearInterval(i)}},[t]),o}function uRe(e,t){se(()=>e,t)}var xO,rw,qo=x(()=>{"use strict";d();B();xt();wh();xO=()=>null;rw=(e=!1)=>{let t=X.useRef(null),[o,n]=L(!1);return[s=>{t.current?.disconnect(),t.current=null,s&&(BL(s)&&(n(!0),e)||(t.current=new IntersectionObserver(a=>{for(let l of a)l.target===s&&(l.isIntersecting&&e?(n(!0),t.current?.disconnect(),t.current=null):n(l.isIntersecting))}),t.current.observe(s)))},o]}});function rs(e,t,o=null){let n=null,i=Rn(()=>{if(n)return n;let s=new Error(`Vencord could not find the ${e} Component`);return dRe.error(s),o});return Ln(t,s=>{n=s,Object.assign(i,s)},{isIndirect:!0}),i}function bo(e,t){Ln(ot.byStoreName(e),t,{isIndirect:!0})}var dRe,vO=x(()=>{"use strict";d();At();qo();fe();dRe=new ke("Webpack")});var er,Zs,U,pRe,SO,Ue,mRe,qe,cp,to,Ii,Tr,g1,wO,Rr,aw,en,Bl,si,ud,lw,KE,doe,lp,fRe,gRe,sw,hRe,dd,xRe,kO,yRe,YE,cw,uw,Di,pd,QE,EO=x(()=>{"use strict";d();Et();Co();Ar();Qs();ut();wt();du();Zte();wh();fe();vO();er={FormTitle:re,FormText:W,FormSection:"section",FormDivider:Bt},Zs=FL,U=c1,pRe=aO,SO=rs("Checkbox",ot.componentByCode('"data-toggleable-component":"checkbox')),Ue=rs("Tooltip",e=>e.prototype?.shouldShowTooltip&&e.prototype.render,lO),mRe=ii,qe=rs("TextInput",ot.componentByCode("#{intl::MAXIMUM_LENGTH_ERROR}",'"input"')),cp=rs("TextArea",ot.componentByCode("this.getPaddingRight()},id:")),to=rs("Select",ot.componentByCode('"Select"')),Ii=rs("SearchableSelect",ot.componentByCode('"SearchableSelect"')),Tr=rs("Slider",ot.componentByCode("markDash","this.renderMark(")),g1=rs("Popout",ot.componentByCode("ref:this.ref,","renderPopout:this.renderPopout,")),wO=rs("Dialog",ot.componentByCode('role:"dialog",tabIndex:-1')),Rr=rs("TabBar",ot.componentByCode("ref:this.tabBarRef,className:")),aw=rs("Paginator",ot.componentByCode('rel:"prev",children:')),en=rs("Clickable",ot.componentByCode("this.context?this.renderNonInteractive():")),Bl=rs("Avatar",ot.componentByCode(".size-1.375*")),si=rs("ColorPicker",ot.componentByCode("#{intl::USER_SETTINGS_PROFILE_COLOR_SELECT_COLOR}","showEyeDropper")),ud=rs("UserSummaryItem",ot.componentByCode("defaultRenderUser","showDefaultAvatarsForNullUsers")),doe=["thin","auto","fade"],lp=et("thin","auto","fade","customTheme","none"),fRe=ot.byClassNames(...doe),gRe=ot.byClassNames("customTheme"),sw=fr(()=>{let e=da(t=>fRe(t)&&!gRe(t),{topLevelOnly:!0});return e?tw(e,doe):{}});Ln(ot.byCode('="ltr",orientation:',"customTheme:","forwardRef"),e=>lw=e);Ln(ot.byCode("getScrollerNode:","resizeObserver:","sectionHeight:"),e=>KE=e);hRe=Rn(()=>lw(lp.none,lp.fade,lp.customTheme)),dd=Rn(()=>lw(lp.thin,lp.fade,lp.customTheme)),xRe=Rn(()=>lw(lp.auto,lp.fade,lp.customTheme)),kO=Rn(()=>KE(sw.thin,sw.fade,"",ResizeObserver)),yRe=Rn(()=>KE(sw.auto,sw.fade,"",ResizeObserver)),YE=rs("FocusLock",ot.componentByCode(".containerRef,{keyboardModeEnabled:"));Ln(e=>{if(typeof e!="function")return!1;let t=String(e);return t.includes(".resolve({theme:")&&t.includes('"refresh-fast-follow-avatars"')&&!t.includes("useMemo")},e=>cw=e);uw=rs("MaskedLink",ot.componentByCode("MASKED_LINK)")),Di=rs("Timestamp",ot.componentByCode("#{intl::MESSAGE_EDITED_TIMESTAMP_A11Y_LABEL}")),pd=rs("OAuth2AuthorizeModal",ot.componentByCode("hasContentBackground","oauth2_authorize")),QE=qn(".assign({colorNames:",{Transition:ot.componentByCode('["items","children"]',",null,"),animated:ot.byProps("div","text")})});var M,Dt,AO=x(()=>{"use strict";d();fe();M={};Ln(e=>e.name==="MenuCheckboxItem",(e,t)=>{let o=Bo(t);for(let i in o){try{var n=o[i]}catch{continue}typeof n=="function"&&n.name.startsWith("Menu")&&(M[n.name]=n)}});Ln(ot.componentByCode('path:["empty"]'),e=>M.Menu=e);Ln(ot.componentByCode("SLIDER)","handleSize:16"),e=>M.MenuSliderControl=e);Ln(ot.componentByCode(".SEARCH)",".focus()","query:"),e=>M.MenuSearchControl=e);Dt=qn('type:"CONTEXT_MENU_OPEN',{closeContextMenu:ot.byCode("CONTEXT_MENU_CLOSE"),openContextMenu:ot.byCode("renderLazy:"),openContextMenuLazy:e=>typeof e=="function"&&e.toString().length<100})});var X,L,se,gu,rt,kt,f0,gn,CO,Ms,poe=x(()=>{"use strict";d();fe();CO=He("createPortal"),Ms=vt("(299));",".onRecoverableError");Ln("useState",e=>{X=e,{useEffect:se,useState:L,useLayoutEffect:gu,useMemo:rt,useRef:kt,useReducer:f0,useCallback:gn}=X})});var moe={};Ao(moe,{AccessibilityStore:()=>TO,ActiveJoinedThreadsStore:()=>dw,ApplicationCommandIndexStore:()=>fw,ApplicationStore:()=>DO,AuthenticationStore:()=>Ns,CallStore:()=>PO,ChannelRTCStore:()=>h0,ChannelStore:()=>ne,DraftStore:()=>g0,DraftType:()=>sn,EditMessageStore:()=>b1,EmojiStore:()=>Hi,Flux:()=>is,FriendsStore:()=>_O,GuildChannelStore:()=>rl,GuildMemberCountStore:()=>h1,GuildMemberStore:()=>Lt,GuildRoleStore:()=>tr,GuildScheduledEventStore:()=>IO,GuildStore:()=>ct,InstantInviteStore:()=>RO,InviteStore:()=>LO,LocaleStore:()=>OO,MediaEngineStore:()=>On,MessageStore:()=>Rt,NotificationSettingsStore:()=>NO,OverridePremiumTypeStore:()=>Ma,PermissionStore:()=>Kt,PopoutWindowStore:()=>x0,PresenceStore:()=>cr,QuestStore:()=>$O,RTCConnectionStore:()=>FO,ReadStateStore:()=>ss,RelationshipStore:()=>Tt,RunningGameStore:()=>y1,SelectedChannelStore:()=>st,SelectedGuildStore:()=>hn,SoundboardStore:()=>UO,SpellCheckStore:()=>BO,SpotifyStore:()=>MO,StickersStore:()=>Xs,StreamerModeStore:()=>sl,ThemeStore:()=>x1,TypingStore:()=>il,UploadAttachmentStore:()=>up,UserGuildSettingsStore:()=>pw,UserProfileStore:()=>gr,UserSettingsProtoStore:()=>mw,UserStore:()=>z,VoiceStateStore:()=>lo,WindowStore:()=>Pl,useStateFromStores:()=>Je});var is,sn,Rt,Kt,rl,ss,cr,TO,ct,tr,IO,h1,Lt,z,Ns,DO,gr,st,hn,ne,il,Tt,lo,Hi,Xs,x1,Pl,g0,sl,MO,On,NO,BO,up,Ma,y1,dw,pw,mw,PO,h0,_O,RO,LO,OO,FO,UO,x0,fw,b1,$O,Je,HO=x(()=>{"use strict";d();fe();vO();is=He("connectStores"),sn=He("ChannelMessage","SlashCommand"),Je=vt("useStateFromStores");bo("AccessibilityStore",e=>TO=e);bo("ApplicationStore",e=>DO=e);bo("AuthenticationStore",e=>Ns=e);bo("DraftStore",e=>g0=e);bo("UserStore",e=>z=e);bo("UserProfileStore",e=>gr=e);bo("ChannelStore",e=>ne=e);bo("SelectedChannelStore",e=>st=e);bo("SelectedGuildStore",e=>hn=e);bo("GuildStore",e=>ct=e);bo("GuildMemberStore",e=>Lt=e);bo("RelationshipStore",e=>Tt=e);bo("MediaEngineStore",e=>On=e);bo("NotificationSettingsStore",e=>NO=e);bo("SpellcheckStore",e=>BO=e);bo("PermissionStore",e=>Kt=e);bo("PresenceStore",e=>cr=e);bo("ReadStateStore",e=>ss=e);bo("GuildChannelStore",e=>rl=e);bo("GuildRoleStore",e=>tr=e);bo("GuildScheduledEventStore",e=>IO=e);bo("GuildMemberCountStore",e=>h1=e);bo("MessageStore",e=>Rt=e);bo("WindowStore",e=>Pl=e);bo("EmojiStore",e=>Hi=e);bo("StickersStore",e=>Xs=e);bo("TypingStore",e=>il=e);bo("VoiceStateStore",e=>lo=e);bo("StreamerModeStore",e=>sl=e);bo("SpotifyStore",e=>MO=e);bo("OverridePremiumTypeStore",e=>Ma=e);bo("UploadAttachmentStore",e=>up=e);bo("RunningGameStore",e=>y1=e);bo("ActiveJoinedThreadsStore",e=>dw=e);bo("UserGuildSettingsStore",e=>pw=e);bo("UserSettingsProtoStore",e=>mw=e);bo("CallStore",e=>PO=e);bo("ChannelRTCStore",e=>h0=e);bo("FriendsStore",e=>_O=e);bo("InstantInviteStore",e=>RO=e);bo("InviteStore",e=>LO=e);bo("LocaleStore",e=>OO=e);bo("RTCConnectionStore",e=>FO=e);bo("SoundboardStore",e=>UO=e);bo("PopoutWindowStore",e=>x0=e);bo("ApplicationCommandIndexStore",e=>fw=e);bo("EditMessageStore",e=>b1=e);bo("QuestStore",e=>$O=e);bo("ThemeStore",e=>{x1=e,Vencord.Api.Themes.initQuickCssThemeStore(e)})});var al,foe=x(()=>{"use strict";d();fe();al={FrecencyUserSettingsActionCreators:An(e=>e.ProtoClass?.typeName?.endsWith(".FrecencyUserSettings")),PreloadedUserSettingsActionCreators:An(e=>e.ProtoClass?.typeName?.endsWith(".PreloadedUserSettings"))}});function Re(e,t=goe.MESSAGE,o){D.show(D.create(e,t,o))}function xi(e){hoe(e+"_panel")}var V,Bs,jo,Ht,ll,bRe,y0,Rm,ZE,vRe,hu,b0,ai,Jt,go,goe,SRe,D,as,_l,ls,zi,ho,pa,Lm,Nt,Ih,zO,hoe,Fn,XE,GO,gw,xc,Ir,JE,Dh,VE,Mh,To,v0,hw,qO,wRe,kRe,S0,xw,jO,xoe=x(()=>{"use strict";d();fe();Ln(["dispatch","subscribe"],e=>{V=e,Vencord.Api.PluginManager.subscribeAllPluginsFluxEvents(e);let t=()=>{e.unsubscribe("CONNECTION_OPEN",t),XS()};e.subscribe("CONNECTION_OPEN",t)});Ln(["dispatchToLastSubscribed"],e=>Bs=e);jo=qn('ME:"/users/@me"',{Endpoints:ot.byProps("USER","ME"),UserFlags:ot.byProps("STAFF","SPAMMER"),FriendsSections:e=>e.PENDING==="PENDING"&&e.ADD_FRIEND}),Ht=An(e=>typeof e=="object"&&e.del&&e.put),ll=He("parseTwoDigitYear"),bRe=He("highlight","registerLanguage"),y0=vt("useDrag::spec.begin was deprecated"),Rm=vt(".options);return",".collect,"),{match:ZE,P:vRe}=qn("@ts-pattern/matcher",{match:ot.byCode("return new"),P:ot.byProps("when")}),hu=He("debounce","cloneDeep"),b0=qn(['defaultLocale:"en-US"',/initialLocale:\i/],{t:e=>e?.[Symbol.toStringTag]==="IntlMessagesProxy",intl:e=>e!=null&&Object.getPrototypeOf(e)?.withFormatters!=null},!0);Ln(["fromTimestamp","extractTimestamp"],e=>ai=e);Ln("parseTopic",e=>Jt=e);Ln(["show","close"],e=>go=e);goe={MESSAGE:"message",SUCCESS:"success",FAILURE:"failure",CUSTOM:"custom",CLIP:"clip",LINK:"link",FORWARD:"forward",BOOKMARK:"bookmark",CLOCK:"clock"},SRe={TOP:0,BOTTOM:1},D={Type:goe,Position:SRe,genId:()=>(Math.random()||Math.random()).toString(36).slice(2)};Ln("showToast",e=>{D.show=e.showToast,D.pop=e.popToast,D.create=e.createToast});as={getUser:vt(".USER(")},_l=He("clearAll","addFile"),ls={promptToUpload:vt("Unexpected mismatch between files and file metadata")},zi=qn("getAssetImage: size must === [",{fetchAssetIds:ot.byCode('.startsWith("http:")',".dispatch({"),getAssetFromImageURL:ot.byCode("].serialize(",":null"),getAssetImage:ot.byCode("getAssetImage: size must === ["),getAssets:ot.byCode(".assets")}),ho=qn("transitionTo - Transitioning to",{transitionTo:ot.byCode("transitionTo -"),transitionToGuild:ot.byCode("transitionToGuild -"),back:ot.byCode("goBack()"),forward:ot.byCode("goForward()")}),pa=qn('"Thread must have a parent ID."',{transitionToChannel:ot.byCode(".preload"),transitionToThread:ot.byCode('"Thread must have a parent ID."')});Ln(["openUserSettings","USER_SETTINGS_MODAL_KEY"],e=>Lm=e);Nt=An(e=>typeof e.ADMINISTRATOR=="bigint"),{zustandCreate:Ih}=qn(["useSyncExternalStoreWithSelector:","Object.assign"],{zustandCreate:ot.byCode(/=>(\i)\?\i\(\1/)}),{zustandPersist:zO}=qn(".onRehydrateStorage)?",{zustandPersist:ot.byCode(/(\(\i,\i\))=>.+?\i\1/)}),{openUserSettings:hoe}=He("openUserSettings");Fn=He("editMessage","sendMessage"),XE=He("clearCache","_channelMessages"),GO=He("openUserProfileModal","closeUserProfileModal"),gw=He("resolveInvite"),xc=He("openPrivateChannel"),Ir=He("toggleSelfMute"),JE=He("setServerMute","setServerDeaf"),Dh=He("selectChannel","selectVoiceChannel"),VE=He("saveDraft","changeDraft"),Mh=He("pinMessage","unpinMessage"),To=He("getGuildBannerURL","getUserAvatarURL"),v0=qn('type:"ENABLE_AUTOMATIC_ACK",',{ackChannel:ot.byCode(".isForumLikeChannel(")}),hw=qn("expression-picker-last-active-view",{openExpressionPicker:ot.byCode(/setState\({activeView:(?:(?!null)\i),activeViewType:/),closeExpressionPicker:ot.byCode("setState({activeView:null"),toggleMultiExpressionPicker:ot.byCode(".EMOJI,"),toggleExpressionPicker:ot.byCode(/getState\(\)\.activeView===\i\?\i\(\):\i\(/),setExpressionPickerView:ot.byCode(/setState\({activeView:\i,lastActiveView:/),setSearchQuery:ot.byCode("searchQuery:"),useExpressionPickerStore:ot.byCode(/\(\i,\i=\i\)=>/)}),qO=qn('type:"POPOUT_WINDOW_OPEN"',{open:ot.byCode('type:"POPOUT_WINDOW_OPEN"'),close:ot.byCode('type:"POPOUT_WINDOW_CLOSE"'),setAlwaysOnTop:ot.byCode('type:"POPOUT_WINDOW_SET_ALWAYS_ON_TOP"')}),wRe=He("useName","getGlobalName"),kRe=qn(/=\i\.getUserProfile\(\i\),\i=\i\.getGuildMemberProfile\(/,{getDisplayProfile:ot.byCode(".getGuildMemberProfile("),useDisplayProfile:ot.byCode(/\[\i\.\i,\i\.\i],\(\)=>/)}),S0=qn("millisecondsInUnit:",{calendarFormat:ot.byCode('<-1?"sameElse":'),dateFormat:ot.byCode('<2?"nextDay":"sameElse";'),isSameDay:ot.byCode(/Math\.abs\(\i-\i\)/),diffAsUnits:ot.byCode("days:0","millisecondsInUnit")}),xw=He("REPLYABLE","FORWARDABLE"),jO=vt('"Invalid Origin"',".application")});var d0={};Ao(d0,{AccessibilityStore:()=>TO,ActiveJoinedThreadsStore:()=>dw,Alerts:()=>go,Animations:()=>QE,ApplicationAssetUtils:()=>zi,ApplicationCommandIndexStore:()=>fw,ApplicationStore:()=>DO,AuthenticationStore:()=>Ns,Avatar:()=>Bl,Button:()=>U,CallStore:()=>PO,ChannelActionCreators:()=>xc,ChannelActions:()=>Dh,ChannelRTCStore:()=>h0,ChannelRouter:()=>pa,ChannelStore:()=>ne,Checkbox:()=>SO,Clickable:()=>en,ColorPicker:()=>si,ComponentDispatch:()=>Bs,Constants:()=>jo,ContextMenuApi:()=>Dt,DateUtils:()=>S0,Dialog:()=>wO,DisplayProfileUtils:()=>kRe,DraftActions:()=>VE,DraftStore:()=>g0,DraftType:()=>sn,EditMessageStore:()=>b1,EmojiStore:()=>Hi,ExpressionPickerStore:()=>hw,Flux:()=>is,FluxDispatcher:()=>V,FocusLock:()=>YE,Forms:()=>er,FriendsStore:()=>_O,GuildActions:()=>JE,GuildChannelStore:()=>rl,GuildMemberCountStore:()=>h1,GuildMemberStore:()=>Lt,GuildRoleStore:()=>tr,GuildScheduledEventStore:()=>IO,GuildStore:()=>ct,IconUtils:()=>To,InstantInviteStore:()=>RO,InviteActions:()=>gw,InviteStore:()=>LO,ListScrollerAuto:()=>yRe,ListScrollerThin:()=>kO,LocaleStore:()=>OO,MaskedLink:()=>uw,MediaEngineStore:()=>On,Menu:()=>M,MessageActions:()=>Fn,MessageCache:()=>XE,MessageStore:()=>Rt,MessageTypeSets:()=>xw,NavigationRouter:()=>ho,NotificationSettingsStore:()=>NO,OAuth2AuthorizeModal:()=>pd,OverridePremiumTypeStore:()=>Ma,P:()=>vRe,Paginator:()=>aw,Parser:()=>Jt,PermissionStore:()=>Kt,PermissionsBits:()=>Nt,PinActions:()=>Mh,Popout:()=>g1,PopoutActions:()=>qO,PopoutWindowStore:()=>x0,PresenceStore:()=>cr,QuestStore:()=>$O,RTCConnectionStore:()=>FO,React:()=>X,ReactDOM:()=>CO,ReadStateStore:()=>ss,ReadStateUtils:()=>v0,RelationshipStore:()=>Tt,RestAPI:()=>Ht,RunningGameStore:()=>y1,ScrollerAuto:()=>xRe,ScrollerNone:()=>hRe,ScrollerThin:()=>dd,SearchableSelect:()=>Ii,Select:()=>to,SelectedChannelStore:()=>st,SelectedGuildStore:()=>hn,SettingsRouter:()=>Lm,Slider:()=>Tr,SnowflakeUtils:()=>ai,SoundboardStore:()=>UO,SpellCheckStore:()=>BO,SpotifyStore:()=>MO,StickersStore:()=>Xs,StreamerModeStore:()=>sl,Switch:()=>pRe,TabBar:()=>Rr,Text:()=>Zs,TextArea:()=>cp,TextInput:()=>qe,ThemeStore:()=>x1,Timestamp:()=>Di,Toasts:()=>D,Tooltip:()=>Ue,TooltipContainer:()=>mRe,TypingStore:()=>il,UploadAttachmentStore:()=>up,UploadHandler:()=>ls,UploadManager:()=>_l,UserGuildSettingsStore:()=>pw,UserProfileActions:()=>GO,UserProfileStore:()=>gr,UserSettingsActionCreators:()=>al,UserSettingsProtoStore:()=>mw,UserStore:()=>z,UserSummaryItem:()=>ud,UserUtils:()=>as,UsernameUtils:()=>wRe,VoiceActions:()=>Ir,VoiceStateStore:()=>lo,WindowStore:()=>Pl,createListScroller:()=>KE,createRoot:()=>Ms,createScroller:()=>lw,fetchApplicationsRPC:()=>jO,hljs:()=>bRe,i18n:()=>b0,listScrollerClasses:()=>sw,lodash:()=>hu,match:()=>ZE,moment:()=>ll,openUserSettings:()=>hoe,openUserSettingsPanel:()=>xi,scrollerClasses:()=>lp,showToast:()=>Re,useCallback:()=>gn,useDrag:()=>y0,useDrop:()=>Rm,useEffect:()=>se,useLayoutEffect:()=>gu,useMemo:()=>rt,useReducer:()=>f0,useRef:()=>kt,useState:()=>L,useStateFromStores:()=>Je,useToken:()=>cw,zustandCreate:()=>Ih,zustandPersist:()=>zO});var B=x(()=>{"use strict";d();EO();AO();poe();HO();foe();xoe()});function Oo(e){return navigator.clipboard.writeText(e)}var cs=x(()=>{"use strict";d()});var Po,v1,Pe,je,$e,ht,Ut,yc,WO,Nh,Om,Ee,vo,li,at=x(()=>{"use strict";d();fe();qo();Po=(i=>(i.SMALL="small",i.MEDIUM="medium",i.LARGE="large",i.DYNAMIC="dynamic",i))(Po||{}),v1=qn(".MODAL_ROOT_LEGACY,",{ModalRoot:ot.componentByCode('.MODAL,"aria-labelledby":'),ModalHeader:ot.componentByCode(",id:"),ModalContent:ot.componentByCode("scrollbarType:"),ModalFooter:ot.componentByCode(".HORIZONTAL_REVERSE,"),ModalCloseButton:ot.componentByCode(".withCircleBackground")}),Pe=Rn(()=>v1.ModalRoot),je=Rn(()=>v1.ModalHeader),$e=Rn(()=>v1.ModalContent),ht=Rn(()=>v1.ModalFooter),Ut=Rn(()=>v1.ModalCloseButton),yc=De("CLOSE_BUTTON_LABEL"),WO=vt("hasMediaOptions","shouldHideMediaOptions"),Nh=qn(".modalKey?",{openModalLazy:ot.byCode(".modalKey?"),openModal:ot.byCode(",instant:"),closeModal:ot.byCode(".onCloseCallback()"),closeAllModals:ot.byCode(".getState();for")}),{openModalLazy:Om,openModal:Ee,closeModal:vo,closeAllModals:li}=Nh});var boe={};Ao(boe,{Theme:()=>eA,copyWithToast:()=>$t,fetchUserProfile:()=>dp,getCurrentChannel:()=>Cn,getCurrentGuild:()=>bc,getGuildAcronym:()=>Ba,getIntlMessage:()=>St,getIntlMessageFromHash:()=>KO,getTheme:()=>tA,getUniqueUsername:()=>yu,hasGuildFeature:()=>S1,insertTextIntoChatInputBox:()=>xu,openImageModal:()=>us,openInviteModal:()=>Gi,openPrivateChannel:()=>yoe,openUserProfile:()=>or,sendMessage:()=>Na});function St(e,t){return KO(kh(e),t,e)}function KO(e,t,o){try{return t==null?b0.intl.string(b0.t[e]):b0.intl.format(b0.t[e],t)}catch(n){return ERe.error(`Failed to get intl message for key: ${o??e}`,n),o??""}}async function Gi(e){let{invite:t}=await gw.resolveInvite(e,"Desktop Modal");if(!t)throw new Error("Invalid invite: "+e);return V.dispatch({type:"INVITE_MODAL_OPEN",invite:t,code:e,context:"APP"}),new Promise(o=>{let n,i,s=!1;V.subscribe("INVITE_ACCEPT",i=()=>{s=!0}),V.subscribe("INVITE_MODAL_CLOSE",n=()=>{V.unsubscribe("INVITE_MODAL_CLOSE",n),V.unsubscribe("INVITE_ACCEPT",i),o(s)})})}function Cn(){return ne.getChannel(st.getChannelId())}function bc(){return ct.getGuild(Cn()?.guild_id)}function yoe(e){xc.openPrivateChannel(e)}function tA(){try{return al.PreloadedUserSettingsActionCreators.getCurrentValue()?.appearance?.theme}catch{return 1}}function xu(e){Bs.dispatchToLastSubscribed("INSERT_TEXT",{rawText:e,plainText:e})}async function $t(e,t="Copied to clipboard!"){await Oo(e),D.show({message:t,id:D.genId(),type:D.Type.SUCCESS})}function Na(e,t,o=!0,n={}){let i={content:"",invalidEmojis:[],tts:!1,validNonShortcutEmojis:[],...t};return Fn.sendMessage(e,i,o,n)}function us(e,t){return WO({items:[{type:"IMAGE",original:e.original??e.url,...e}],...t})}async function or(e){if(!await as.getUser(e))throw new Error("No such user: "+e);let o=hn.getGuildId();GO.openUserProfileModal({userId:e,guildId:o,channelId:st.getChannelId(),analyticsLocation:{page:o?"Guild Channel":"DM Channel",section:"Profile Popout"}})}async function dp(e,t,o=!0){let n=gr.getUserProfile(e);if(n&&o)return n;V.dispatch({type:"USER_PROFILE_FETCH_START",userId:e});let{body:i}=await Ht.get({url:jo.Endpoints.USER_PROFILE(e),query:{with_mutual_guilds:!1,with_mutual_friends_count:!1,...t},oldFormErrors:!0});return V.dispatch({type:"USER_UPDATE",user:i.user}),await V.dispatch({type:"USER_PROFILE_FETCH_SUCCESS",userProfile:i}),t?.guild_id&&i.guild_member&&V.dispatch({type:"GUILD_MEMBER_PROFILE_UPDATE",guildId:t.guild_id,guildMember:i.guild_member}),gr.getUserProfile(e)}function yu(e){return e.discriminator==="0"?e.username:e.tag}function Ba(e){return e.name.replaceAll("'s "," ").replace(/\w+/g,t=>t[0]).replace(/\s/g,"")}function S1(e,t){return e.features?.has(t)??!1}var ERe,eA,mt=x(()=>{"use strict";d();B();cs();qS();At();at();ERe=new ke("IntlManager");eA=(o=>(o[o.Dark=1]="Dark",o[o.Light=2]="Light",o))(eA||{})});var Soe=x(()=>{});function QO(){let e="";for(let t of TRe)for(let o of IRe){let n=YO(`${t}-${o}`);Z[`${t}${o}`]=n,e+=`.${n}{margin-${t}:${o}px;}`}return Z.reset=YO("reset"),e+=`.${Z.reset}{margin:0;}`,Z.centerHorz=YO("center-horz"),e+=`.${Z.centerHorz}{margin-left:auto;margin-right:auto;}`,e}var YO,TRe,IRe,Z,w0=x(()=>{"use strict";d();nt();YO=de("vc-margin-"),TRe=["top","bottom","left","right"],IRe=[4,8,16,20,24,40,60],Z={}});var co=x(()=>{"use strict";d();w0()});var woe=x(()=>{});function Mi(e){return r("div",{...e,className:me(e.className,"vc-error-card")},e.children)}var vc=x(()=>{"use strict";d();woe();xt()});var DRe,MRe,koe,ZO,ee,tt=x(()=>{"use strict";d();wh();At();co();vc();DRe="#e78284",MRe=new ke("React ErrorBoundary",DRe),koe={},ZO=Rn(()=>class extends Vencord.Webpack.Common.React.PureComponent{state={error:koe,stack:"",message:""};static getDerivedStateFromError(t){let o=t?.stack??"",n=t?.message||String(t);if(t instanceof Error&&o){let i=o.indexOf(`
`);i!==-1&&(n=o.slice(0,i),o=o.slice(i+1).replace(/https:\/\/\S+\/assets\//g,""))}return{error:t,stack:o,message:n}}componentDidCatch(t,o){this.props.onError?.({error:t,errorInfo:o,props:this.props.wrappedProps}),MRe.error(`${this.props.message||"A component threw an Error"}
`,t,o.componentStack)}get isNoop(){return this.props.noop}render(){if(this.state.error===koe)return this.props.children;if(this.isNoop)return null;if(this.props.fallback)return r(this.props.fallback,{wrappedProps:this.props.wrappedProps,...this.state},this.props.children);let t=this.props.message||"An error occurred while rendering this Component. More info can be found below and in your console.";return r(Mi,{style:{overflow:"hidden"}},r("h1",null,"Oh no!"),r("p",null,t),r("code",null,this.state.message,!!this.state.stack&&r("pre",{className:Z.top8},this.state.stack)))}});ZO.wrap=(e,t)=>{let o=n=>r(ZO,{...t,wrappedProps:n},r(e,{...n}));return t?.displayName&&(o.displayName=t.displayName),o};ee=ZO});var XO=x(()=>{});var JO,Eoe,nA,Aoe=x(()=>{"use strict";d();JO=Symbol("SettingsStore.isProxy"),Eoe=Symbol("SettingsStore.getRawTarget"),nA=class{pathListeners=new Map;prefixListeners=new Map;globalListeners=new Set;proxyContexts=new WeakMap;proxyHandler=(()=>{let t=this;return{get(o,n,i){if(n===JO)return!0;if(n===Eoe)return o;let s=Reflect.get(o,n,i),a=t.proxyContexts.get(o);if(a==null)return s;let{root:l,path:c}=a;if(!(n in o)&&t.getDefaultValue!=null&&(s=t.getDefaultValue({target:o,key:n,root:l,path:c})),typeof s=="object"&&s!==null&&!s[JO]){let u=`${c}${c&&"."}${n}`;return t.makeProxy(s,l,u)}return s},set(o,n,i){if(i?.[JO]&&(i=i[Eoe]),o[n]===i)return!0;if(!Reflect.set(o,n,i))return!1;let s=t.proxyContexts.get(o);if(s==null)return!0;let{root:a,path:l}=s,c=`${l}${l&&"."}${n}`;return t.notifyListeners(c,i,a),!0},deleteProperty(o,n){if(!Reflect.deleteProperty(o,n))return!1;let i=t.proxyContexts.get(o);if(i==null)return!0;let{root:s,path:a}=i,l=`${a}${a&&"."}${n}`;return t.notifyListeners(l,void 0,s),!0}}})();constructor(t,o={}){this.plain=t,this.store=this.makeProxy(t),Object.assign(this,o)}makeProxy(t,o=t,n=""){return this.proxyContexts.set(t,{root:o,path:n}),new Proxy(t,this.proxyHandler)}notifyPrefixListeners(t,o,n){for(let i=1;i<=o.length;i++){let s=o.slice(0,i).join(".");this.prefixListeners.get(s)?.forEach(a=>a(n,t))}}notifyListeners(t,o,n){let i=t.split(".");if(i.length>3&&i[0]==="plugins"){let s=i.slice(0,3),a=s.join("."),l=s.reduce((c,u)=>c[u],n);this.globalListeners.forEach(c=>c(n,a)),this.pathListeners.get(a)?.forEach(c=>c(l))}else this.globalListeners.forEach(s=>s(n,t));this.pathListeners.get(t)?.forEach(s=>s(o)),this.notifyPrefixListeners(t,i,o)}setData(t,o){if(this.readOnly)throw new Error("SettingsStore is read-only");if(this.plain=t,this.store=this.makeProxy(t),o){let n=t,i=o.split(".");for(let s of i){if(!n){console.warn(`Settings#setData: Path ${o} does not exist in new data. Not dispatching update`);return}n=n[s]}this.pathListeners.get(o)?.forEach(s=>s(n)),this.notifyPrefixListeners(o,i,n)}this.markAsChanged()}addGlobalChangeListener(t){this.globalListeners.add(t)}addChangeListener(t,o){let n=this.pathListeners.get(t)??new Set;n.add(o),this.pathListeners.set(t,n)}addPrefixChangeListener(t,o){let n=this.prefixListeners.get(t)??new Set;n.add(o),this.prefixListeners.set(t,n)}removeGlobalChangeListener(t){this.globalListeners.delete(t)}removeChangeListener(t,o){let n=this.pathListeners.get(t);n&&(n.delete(o),n.size||this.pathListeners.delete(t))}removePrefixChangeListener(t,o){let n=this.prefixListeners.get(t);n&&(n.delete(o),n.size||this.prefixListeners.delete(t))}markAsChanged(){this.globalListeners.forEach(t=>t(this.plain,""))}}});function k1(e,t){for(let o in t){let n=t[o];typeof n=="object"&&!Array.isArray(n)?(e[o]??={},k1(e[o],n)):e[o]??=n}return e}var rA=x(()=>{"use strict";d()});function k(e){return e}function uo(e,t,o=1){let n=[];for(let i=e;i<=t;i+=o)n.push(Math.round(i*100)/100);return n}var $=x(()=>{"use strict";d()});var tF={};Ao(tF,{PlainSettings:()=>Rl,Settings:()=>Ge,SettingsStore:()=>Tn,definePluginSettings:()=>R,migratePluginSetting:()=>pp,migratePluginSettings:()=>jn,migratePluginToSettings:()=>Bh,migrateSettingsFromPlugin:()=>eF,useSettings:()=>tn});function tn(e){let[,t]=X.useReducer(()=>({}),{});return se(()=>e?(e.forEach(o=>{o.endsWith(".*")?Tn.addPrefixChangeListener(o.slice(0,-2),t):Tn.addChangeListener(o,t)}),()=>e.forEach(o=>{o.endsWith(".*")?Tn.removePrefixChangeListener(o.slice(0,-2),t):Tn.removeChangeListener(o,t)})):(Tn.addGlobalChangeListener(t),()=>Tn.removeGlobalChangeListener(t)),[e]),Tn.store}function jn(e,...t){let{plugins:o}=Tn.plain;if(!(e in o)){for(let n of t)if(n in o){iA.info(`Migrating settings from old name ${n} to ${e}`),o[e]=o[n],delete o[n],Tn.markAsChanged();break}}}function pp(e,t,o){let n=Tn.plain.plugins[e];n&&(!Object.hasOwn(n,o)||Object.hasOwn(n,t)||(iA.info(`Migrating plugin setting from ${o} to ${t} on ${e}`),n[t]=n[o],delete n[o],Tn.markAsChanged()))}function Bh(e,t,o,...n){let{plugins:i}=Tn.plain,s=i[t],a=i[o];if(s&&a?.enabled){for(let l of n)iA.info(`Migrating plugin to setting from old name ${o} to ${t} as ${l}`),s[l]=!0;s.enabled=!0,e&&delete i[o],Tn.markAsChanged()}}function eF(e,t,...o){let{plugins:n}=Tn.plain,i=n[t],s=n[e];if(!(!i||!s)){for(let a of o)Object.hasOwn(i,a)&&(Object.hasOwn(s,a)||(iA.info(`Migrating plugin setting "${a}" from ${t} to ${e}`),s[a]=i[a],delete i[a]));Tn.markAsChanged()}}function R(e,t){let o={get store(){if(!o.pluginName)throw new Error("Cannot access settings before plugin is initialized");return Ge.plugins[o.pluginName]},get plain(){if(!o.pluginName)throw new Error("Cannot access settings before plugin is initialized");return Rl.plugins[o.pluginName]},use:n=>tn(n?n.map(i=>`plugins.${o.pluginName}.${i}`):[`plugins.${o.pluginName}.*`]).plugins[o.pluginName],def:e,checks:t??{},pluginName:"",withPrivateSettings(){return this}};return o}var iA,NRe,VO,Tn,Rl,Ge,Q=x(()=>{"use strict";d();Aoe();At();rA();$();B();Ps();iA=new ke("Settings"),NRe={autoUpdate:!0,autoUpdateNotification:!0,useQuickCss:!0,themeLinks:[],eagerPatches:!1,enabledThemes:[],enabledThemeLinks:[],enableOnlineThemes:!0,pinnedThemes:[],themeNames:{},enableReactDevtools:!1,frameless:!1,transparent:!1,winCtrlQ:!1,macosVibrancyStyle:void 0,disableMinSize:!1,winNativeTitleBar:!1,plugins:{},uiElements:{chatBarButtons:{},messagePopoverButtons:{}},notifications:{timeout:5e3,position:"bottom-right",useNative:"not-focused",missed:!0,logLimit:50},cloud:{authenticated:!1,url:"https://cloud.equicord.org/",settingsSync:!1,settingsSyncVersion:0},ignoreResetWarning:!1,userCssVars:{}},VO=VencordNative.settings.get();k1(VO,NRe);Tn=new nA(VO,{readOnly:!0,getDefaultValue({target:e,key:t,path:o}){let n=e[t];if(!pt)return n;if(o==="plugins"&&t in pt)return e[t]={enabled:pt[t].required||pt[t].enabledByDefault||!1};if(o.startsWith("plugins.")){let i=o.slice(8);if(i in pt){let s=pt[i].options?.[t];if(!s)return n;if("default"in s)return e[t]=s.default;if(s.type===4){let a=s.options.find(l=>l.default);return a&&(e[t]=a.value),a?.value}}}return n}});Tn.addGlobalChangeListener((e,t)=>{Tn.plain.cloud.settingsSyncVersion=Date.now(),VencordNative.settings.set(Tn.plain,t)});Rl=VO,Ge=Tn.store});var ds,oF=x(()=>{"use strict";d();Q();$();ds=R({showPrefix:{type:3,description:"Shows the Mod as Prefix",default:!0,restartNeeded:!1,onChange:(e=>{e&&ds.store.showSuffix&&(ds.store.showSuffix=!1)})},showSuffix:{type:3,description:"Shows the Mod as Suffix",default:!1,restartNeeded:!1,onChange:(e=>{e&&ds.store.showPrefix&&(ds.store.showPrefix=!1)})},showCustom:{type:3,description:"Show Custom Badges",default:!0,restartNeeded:!1},showNekocord:{type:3,description:"Show Nekocord Badges",default:!0,restartNeeded:!1},showReviewDB:{type:3,description:"Show ReviewDB Badges",default:!0,restartNeeded:!1},showAero:{type:3,description:"Show Aero Badges",default:!0,restartNeeded:!1},showAliucord:{type:3,description:"Show Aliucord Badges",default:!0,restartNeeded:!1},showRaincord:{type:3,description:"Show Raincord Badges",default:!0,restartNeeded:!1},showVelocity:{type:3,description:"Show Velocity Badges",default:!0,restartNeeded:!1},showEnmity:{type:3,description:"Show Enmity Badges",default:!0,restartNeeded:!1},showPaicord:{type:3,description:"Show Paicord Badges",default:!0,restartNeeded:!1},apiUrl:{type:0,description:"API to use",default:"https://badges.equicord.org/",restartNeeded:!1,isValid:(e=>!!e)}})});async function aA(){let e=ds.store.apiUrl.endsWith("/")?ds.store.apiUrl+"users":ds.store.apiUrl+"/users",t=await fetch(e,{cache:"no-cache"}).then(n=>n.json()),o={};for(let n in t.users)o[n]=t.users[n].filter(i=>{let{mod:s}=i;if(!s||PRe.includes(s))return!1;let a={aero:ds.store.showAero,velocity:ds.store.showVelocity,badgevault:ds.store.showCustom,nekocord:ds.store.showNekocord,reviewdb:ds.store.showReviewDB,aliucord:ds.store.showAliucord,raincord:ds.store.showRaincord,enmity:ds.store.showEnmity};return!(s in a&&!a[s])}).map(i=>{let s=BRe[i.mod],a=ds.store.showPrefix?`${s} - `:"",l=ds.store.showSuffix?` - ${s}`:"",c=a+i.tooltip+l;return{...i,key:i.tooltip,tooltip:c}});E1=o}var E1,sA,Fm,BRe,PRe,nF=x(()=>{"use strict";d();XO();nt();oF();E1={},sA="kwHCJPxp8t",Fm=de("vc-global-badges-"),BRe={badgevault:"BadgeVault",nekocord:"Nekocord",reviewdb:"ReviewDB",aero:"Aero",aliucord:"Aliucord",raincord:"Raincord",velocity:"Velocity",enmity:"Enmity",paicord:"Paicord"},PRe=["vencord","equicord"]});function Coe(e){let t=E1[e.id].map(o=>r(_Re,{key:o.key,tooltip:o.tooltip,badge:o.badge}));Ee(o=>r(Pe,{...o},r(ee,null,r(je,null,r("img",{className:Fm("modal-avatar"),src:e.getAvatarURL(void 0,512,!0),alt:""}),r(Vn,{className:Fm("modal-name")},e.username)),r($e,{className:Fm("modal-description")},t.length?r(f,null,r(W,{className:Fm("modal-text")},t.length," global badge",t.length>1?"s":"","."),r("div",{className:Fm("modal-badges")},t)):r(W,null,"No global badges.")),r(ht,null,r(Me,{variant:"link",onClick:()=>Gi(sA)},"Join GlobalBadges Server")))))}var _Re,Toe=x(()=>{"use strict";d();Co();tt();ut();wt();mt();at();B();nF();_Re=({key:e,tooltip:t,badge:o})=>r(f,null,r(Ue,{text:t},n=>r("img",{className:Fm("modal-badge"),key:e,...n,src:o})))});var rF,Ph,iF=x(()=>{"use strict";d();XO();A1();Q();Co();_h();H();mt();$();B();Toe();oF();nF();pp("GlobalBadges","showRaincord","showRa1ncord");Ph=k({name:"GlobalBadges",description:"Adds global badges from other client mods",authors:[w.HypedDomi,j.Wolfie,w.thororen],settings:ds,settingsAboutComponent:()=>r(f,null,r(Me,{variant:"link",className:Fm("settings-button"),onClick:()=>Gi(sA)},"Join GlobalBadges Server")),async start(){await aA(),clearInterval(rF),rF=setInterval(aA,1e3*60*30)},async stop(){clearInterval(rF)},toolboxActions:{async"Refetch Global Badges"(){await aA(),D.show({id:D.genId(),message:"Successfully refetched global badges!",type:D.Type.SUCCESS})}},get GlobalBadges(){return E1},getGlobalBadges(e){return E1[e]?.map(t=>({iconSrc:t.badge,description:t.tooltip,position:0,props:{style:{borderRadius:"50%",transform:"scale(0.9)"}},onContextMenu(o,n){Dt.openContextMenu(o,()=>r(lA,{badge:n}))},onClick(){return Coe(z.getUser(e))}}))}})});var Ioe=x(()=>{});var aF={};Ao(aF,{_usePatchContextMenu:()=>ORe,addContextMenuPatch:()=>Ll,addGlobalContextMenuPatch:()=>RRe,findGroupChildrenByChildId:()=>Qt,globalPatches:()=>cA,navPatches:()=>bw,removeContextMenuPatch:()=>bu,removeGlobalContextMenuPatch:()=>LRe});function Ll(e,t){Array.isArray(e)||(e=[e]);for(let o of e){let n=bw.get(o);n||(n=new Set,bw.set(o,n)),n.add(t)}}function RRe(e){cA.add(e)}function bu(e,t){let n=(Array.isArray(e)?e:[e]).map(i=>bw.get(i)?.delete(t)??!1);return Array.isArray(e)?n:n[0]}function LRe(e){return cA.delete(e)}function Qt(e,t,o=!1){for(let n of t){if(n==null)continue;if(Array.isArray(n)){let s=Qt(e,n,o);if(s!==null)return s}if(Array.isArray(e)&&e.some(s=>o?n.props?.id?.includes(s):n.props?.id===s)||(o?n.props?.id?.includes(e):n.props?.id===e))return t;let i=n.props?.children;if(i){Array.isArray(i)||(i=[i],n.props.children=i);let s=Qt(e,i,o);if(s!==null)return s}}return null}function ORe(e){e={...e,children:sF(e.children)},e.contextMenuAPIArguments??=[];let t=bw.get(e.navId);if(Array.isArray(e.children)||(e.children=[e.children]),t)for(let o of t)try{o(e.children,...e.contextMenuAPIArguments)}catch(n){Doe.error(`Patch for ${e.navId} errored,`,n)}for(let o of cA)try{o(e.navId,e.children,...e.contextMenuAPIArguments)}catch(n){Doe.error("Global patch errored,",n)}return e}function sF(e){return Array.isArray(e)?e.map(sF):(X.isValidElement(e)&&(e=X.cloneElement(e),e?.props?.children&&(e.type!==M.MenuControlItem||e.type===M.MenuControlItem&&e.props.control!=null)&&(e.props.children=sF(e.props.children))),e)}var Doe,bw,cA,Un=x(()=>{"use strict";d();At();B();Doe=new ke("ContextMenu"),bw=new Map,cA=new Set});var cF={};Ao(cF,{ChatBarButton:()=>Lr,ChatBarButtonMap:()=>Rh,_injectButtons:()=>$Re,addChatBarButton:()=>uA,removeChatBarButton:()=>lF});function URe(e){let{chatBarButtons:t}=tn(["uiElements.chatBarButtons.*"]).uiElements,{analyticsName:o}=e.type;return r(f,null,Array.from(Rh).filter(([n])=>t[n]?.enabled!==!1).map(([n,{render:i}])=>r(ee,{noop:!0,key:n,onError:s=>FRe.error(`Failed to render ${n}`,s.error)},r(i,{...e,isMainChat:o==="normal",isAnyChat:["normal","sidebar"].includes(o)}))))}function $Re(e,t){t.disabled||e.length===0||e.unshift(r(URe,{key:"vencord-chat-buttons",...t}))}var Moe,Noe,Rh,FRe,uA,lF,Lr,ma=x(()=>{"use strict";d();Ioe();tt();At();xt();fe();B();Un();Q();Moe=et("button","buttonWrapper","notificationDot"),Noe=et("buttonContainer","channelTextArea","button"),Rh=new Map,FRe=new ke("ChatButtons");uA=(e,t,o)=>Rh.set(e,{render:t,icon:o}),lF=e=>Rh.delete(e),Lr=ee.wrap(e=>r(Ue,{text:e.tooltip},({onMouseEnter:t,onMouseLeave:o})=>r("div",{className:`expression-picker-chat-input-button ${Noe?.buttonContainer??""}`},r(en,{"aria-label":e.tooltip,onMouseEnter:t,onMouseLeave:o,className:me(Moe.button,Noe?.button),onClick:e.onClick,onContextMenu:e.onContextMenu,onAuxClick:e.onAuxClick,...e.buttonProps},r("div",{className:Moe.buttonWrapper},e.children)))),{noop:!0});Ll("textarea-context",(e,t)=>{let{chatBarButtons:o}=tn(["uiElements.chatBarButtons.*"]).uiElements,n=Array.from(Rh.entries());if(!n.length)return;let i=Qt("submit-button",e);if(!i)return;let s=i.findIndex(a=>a?.props?.id==="submit-button");s!==-1&&i.splice(s,0,r(M.MenuItem,{id:"vc-chat-buttons",key:"vencord-chat-buttons",label:"Vencord Buttons"},n.map(([a])=>r(M.MenuCheckboxItem,{label:a,key:a,id:`vc-chat-button-${a}`,checked:o[a]?.enabled!==!1,action:()=>{let l=o[a]?.enabled!==!1;o[a]??={},o[a].enabled=!l}}))))})});function Lh(){return`-${ai.fromTimestamp(Date.now())}`}function Vt(e,t){let o=HRe({channelId:e,content:"",embeds:[]});return Fn.receiveMessage(e,k1(t,o)),t}function Pt(e,t,o){return e.find(n=>n.name===t)?.value??o}var HRe,uF=x(()=>{"use strict";d();rA();fe();B();HRe=vt('username:"Clyde"')});var Boe=x(()=>{"use strict";d()});var Poe=x(()=>{"use strict";d()});var _oe=x(()=>{"use strict";d()});var cl,Js,dA,Roe=x(()=>{"use strict";d();cl=(m=>(m[m.SUB_COMMAND=1]="SUB_COMMAND",m[m.SUB_COMMAND_GROUP=2]="SUB_COMMAND_GROUP",m[m.STRING=3]="STRING",m[m.INTEGER=4]="INTEGER",m[m.BOOLEAN=5]="BOOLEAN",m[m.USER=6]="USER",m[m.CHANNEL=7]="CHANNEL",m[m.ROLE=8]="ROLE",m[m.MENTIONABLE=9]="MENTIONABLE",m[m.NUMBER=10]="NUMBER",m[m.ATTACHMENT=11]="ATTACHMENT",m))(cl||{}),Js=(s=>(s[s.BUILT_IN=0]="BUILT_IN",s[s.BUILT_IN_TEXT=1]="BUILT_IN_TEXT",s[s.BUILT_IN_INTEGRATION=2]="BUILT_IN_INTEGRATION",s[s.BOT=3]="BOT",s[s.PLACEHOLDER=4]="PLACEHOLDER",s))(Js||{}),dA=(i=>(i[i.CHAT_INPUT=1]="CHAT_INPUT",i[i.USER=2]="USER",i[i.MESSAGE=3]="MESSAGE",i[i.PRIMARY_ENTRY_POINT=4]="PRIMARY_ENTRY_POINT",i))(dA||{})});var Loe=x(()=>{"use strict";d()});var Ooe=x(()=>{"use strict";d()});var Foe=x(()=>{"use strict";d()});var Uoe=x(()=>{"use strict";d()});var $oe=x(()=>{"use strict";d()});var Hoe=x(()=>{"use strict";d()});var zoe=x(()=>{"use strict";d()});var hr=x(()=>{"use strict";d();Boe();Poe();_oe();Roe();Loe();Ooe();Foe();Uoe();$oe();Hoe();zoe()});var dF=x(()=>{"use strict";d();hr()});var fF={};Ao(fF,{ApplicationCommandInputType:()=>Js,ApplicationCommandOptionType:()=>cl,ApplicationCommandType:()=>dA,BUILT_IN:()=>mp,OptionalMessageOption:()=>$n,RequiredMessageOption:()=>Um,_handleCommand:()=>GRe,_init:()=>zRe,commands:()=>pF,findOption:()=>Pt,generateId:()=>Lh,prepareOption:()=>mF,registerCommand:()=>C1,sendBotMessage:()=>Vt,unregisterCommand:()=>vw});function mF(e){return e.displayName||=e.name,e.displayDescription||=e.description,e.options?.forEach((t,o,n)=>{t===Goe?n[o]=$n:t===qoe&&(n[o]=Um),t.choices?.forEach(i=>i.displayName||=i.name),mF(n[o])}),e}function qRe(e,t){e.options?.forEach(o=>{if(o.type!==1)throw new Error("When specifying sub-command options, all options must be sub-commands.");let n={...e,...o,options:o.options!==void 0?o.options:void 0,type:1,name:`${e.name} ${o.name}`,id:`${o.name}-${e.id}`,displayName:`${e.name} ${o.name}`,subCommandPath:[{name:o.name,type:o.type,displayName:o.name}],rootCommand:e};C1(n,t)})}function C1(e,t){if(!mp){console.warn("[CommandsAPI]",`Not registering ${e.name} as the CommandsAPI hasn't been initialised.`,"Please restart to use commands");return}if(mp.some(o=>o.name===e.name))throw new Error(`Command '${e.name}' already exists.`);if(e.isVencordCommand=!0,e.untranslatedName??=e.name,e.untranslatedDescription??=e.description,e.id??=`-${mp.length+joe+1}`,e.applicationId??="-1",e.type??=1,e.inputType??=1,e.plugin||=t,mF(e),e.options?.[0]?.type===1){qRe(e,t);return}pF[e.name]=e,mp.push(e)}function vw(e){let t=mp.findIndex(o=>o.name===e);return t===-1?!1:(mp.splice(t,1),delete pF[e],!0)}var mp,pF,Goe,qoe,$n,Um,joe,zRe,GRe,yi=x(()=>{"use strict";d();At();Da();uF();dF();uF();dF();pF={},Goe=Symbol("OptionalMessageOption"),qoe=Symbol("RequiredMessageOption"),$n=Goe,Um=qoe,zRe=function(e){try{mp=e,$n=e.find(t=>(t.untranslatedName||t.displayName)==="shrug").options[0],Um=e.find(t=>(t.untranslatedName||t.displayName)==="me").options[0],joe=Math.abs(mp.map(t=>Number(t.id)).sort((t,o)=>t-o)[0])-mp.length}catch(t){new ke("CommandsAPI").error("Failed to load CommandsApi",t," - cmds is",e)}return e},GRe=function(e,t,o){if(!e.isVencordCommand)return e.execute(t,o);let n=i=>{let s=`An Error occurred while executing command "${e.name}"`,a=i instanceof Error?i.stack||i.message:String(i);console.error(s,i),Vt(o.channel.id,{content:`${s}:
${Bm(a)}`,author:{username:"Equicord"}})};try{let i=e.execute(t,o);return i instanceof Promise?i.catch(n):i}catch(i){return n(i)}}});var xF={};Ao(xF,{__getDecorators:()=>jRe,addMemberListDecorator:()=>gF,decoratorsFactories:()=>pA,removeMemberListDecorator:()=>hF});function gF(e,t,o){pA.set(e,{render:t,onlyIn:o})}function hF(e){pA.delete(e)}function jRe(e,t){let o=Array.from(pA.entries(),([n,{render:i,onlyIn:s}])=>s==="guilds"&&t!=="guild"||s==="dms"&&t!=="dm"?null:r(ee,{noop:!0,key:n,message:`Failed to render ${n} Member List Decorator`},r(i,{...e,type:t})));return r("div",{className:"vc-member-list-decorators-wrapper"},o)}var pA,yF=x(()=>{"use strict";d();tt();pA=new Map});var bF={};Ao(bF,{_modifyAccessories:()=>WRe,accessories:()=>mA,addMessageAccessory:()=>Oh,removeMessageAccessory:()=>Sw});function Oh(e,t,o){mA.set(e,{render:t,position:o})}function Sw(e){mA.delete(e)}function WRe(e,t){for(let[o,n]of mA.entries()){let i=r(ee,{noop:!0,message:`Failed to render ${o} Message Accessory`,key:o},r(n.render,{...t}));e.splice(n.position!=null?n.position<0?e.length+n.position:n.position:e.length,0,i)}return e}var mA,ww=x(()=>{"use strict";d();tt();mA=new Map});var wF={};Ao(wF,{__addDecorationsToMessage:()=>KRe,addMessageDecoration:()=>vF,decorationsFactories:()=>fA,removeMessageDecoration:()=>SF});function vF(e,t){fA.set(e,t)}function SF(e){fA.delete(e)}function KRe(e){let t=Array.from(fA.entries(),([o,n])=>r(ee,{noop:!0,message:`Failed to render ${o} Message Decoration`,key:o},r(n,{...e})));return r("div",{className:"vc-message-decorations-wrapper"},t)}var fA,kF=x(()=>{"use strict";d();tt();fA=new Map});var MF={};Ao(MF,{_handleClick:()=>ZRe,_handlePreEdit:()=>QRe,_handlePreSend:()=>YRe,addMessageClickListener:()=>IF,addMessagePreEditListener:()=>Fh,addMessagePreSendListener:()=>qi,removeMessageClickListener:()=>DF,removeMessagePreEditListener:()=>Uh,removeMessagePreSendListener:()=>ji});async function YRe(e,t,o,n){o.replyOptions=n;for(let i of AF)try{if((await i(e,t,o))?.cancel)return!0}catch(s){EF.error(`MessageSendHandler: Listener encountered an unknown error
`,s)}return!1}async function QRe(e,t,o){for(let n of CF)try{if((await n(e,t,o))?.cancel)return!0}catch(i){EF.error(`MessageEditHandler: Listener encountered an unknown error
`,i)}return!1}function qi(e){return AF.add(e),e}function Fh(e){return CF.add(e),e}function ji(e){return AF.delete(e)}function Uh(e){return CF.delete(e)}function ZRe(e,t,o){e=Rt.getMessage(t.id,e.id)??e;for(let n of TF)try{n(e,t,o)}catch(i){EF.error(`MessageClickHandler: Listener encountered an unknown error
`,i)}}function IF(e){return TF.add(e),e}function DF(e){return TF.delete(e)}var EF,AF,CF,TF,vu=x(()=>{"use strict";d();At();B();EF=new ke("MessageEvents","#e5c890"),AF=new Set,CF=new Set;TF=new Set});var BF={};Ao(BF,{MessagePopoverButtonMap:()=>T1,_buildPopoverElements:()=>VRe,addMessagePopoverButton:()=>gA,removeMessagePopoverButton:()=>NF});function gA(e,t,o){T1.set(e,{render:t,icon:o})}function NF(e){T1.delete(e)}function JRe(e){let{Component:t,message:o}=e,{messagePopoverButtons:n}=tn(["uiElements.messagePopoverButtons.*"]).uiElements,i=Array.from(T1.entries()).filter(([s])=>n[s]?.enabled!==!1).map(([s,{render:a}])=>{try{let l=a(o);return l?r(ee,{noop:!0},r(t,{key:s,...l})):null}catch(l){return XRe.error(`[${s}]`,l),null}});return r(f,null,i)}function VRe(e,t){return r(JRe,{Component:e,message:t})}var XRe,T1,hA=x(()=>{"use strict";d();tt();At();Q();XRe=new ke("MessagePopover"),T1=new Map});var LF={};Ao(LF,{_renderIcons:()=>tLe,addNicknameIcon:()=>_F,removeNicknameIcon:()=>RF});function _F(e,t,o=0){return PF.set(e,{priority:o,factory:ee.wrap(t,{noop:!0,onError:n=>eLe.error(`Failed to render ${e}`,n)})})}function RF(e){return PF.delete(e)}function tLe(e){return Array.from(PF).sort((t,o)=>o[1].priority-t[1].priority).map(([t,{factory:o}])=>r(o,{key:t,...e}))}var PF,eLe,OF=x(()=>{"use strict";d();tt();At();PF=new Map,eLe=new ke("NicknameIcons")});var HF={};Ao(HF,{classNameFactory:()=>$h,compileStyle:()=>$F,coreStyleRootNode:()=>I1,disableStyle:()=>Fr,enableStyle:()=>Or,initStyles:()=>FF,isStyleEnabled:()=>UF,managedStyleRootNode:()=>Hh,requireStyle:()=>Ew,setStyleClassNames:()=>nLe,styleMap:()=>Woe,toggleStyle:()=>oLe,userStyleRootNode:()=>kw,vencordRootNode:()=>D1});function FF(){let e=gc("vencord-os-theme-values",I1);gc("vencord-text",I1).textContent=OL();let t=gc("vencord-css-core",I1),o=null;gc("vencord-margins",I1).textContent=QO(),VencordNative.native.getRendererCss().then(n=>t.textContent=n),VencordNative.themes.getSystemValues().then(n=>{let i=Object.entries(n).filter(([,s])=>!!s).map(([s,a])=>`--${s}: ${a};`).join("");e.textContent=`:root{${i}}`})}function Ew(e){let t=Woe.get(e);if(!t)throw new Error(`Style "${e}" does not exist`);return t}function Or(e){let t=Ew(e);return t.dom?.isConnected?!1:(t.dom||(t.dom=document.createElement("style"),t.dom.dataset.vencordName=t.name),$F(t),Hh.appendChild(t.dom),!0)}function Fr(e){let t=Ew(e);return t.dom?.isConnected?(t.dom.remove(),t.dom=null,!0):!1}var $h,Woe,D1,I1,Hh,kw,oLe,UF,nLe,$F,ps=x(()=>{"use strict";d();Et();w0();nt();$h=de,Woe=window.VencordStyles??=new Map,D1=document.createElement("vencord-root"),I1=document.createElement("vencord-styles"),Hh=document.createElement("vencord-managed-styles"),kw=document.createElement("vencord-user-styles");D1.style.display="none";D1.append(I1,Hh,kw);document.addEventListener("DOMContentLoaded",()=>{document.documentElement.append(D1)},{once:!0});oLe=e=>UF(e)?Fr(e):Or(e),UF=e=>Ew(e).dom?.isConnected??!1,nLe=(e,t,o=!0)=>{let n=Ew(e);n.classNames=t,o&&UF(n.name)&&$F(n)},$F=e=>{if(!e.dom)throw new Error("Style has no DOM element");e.dom.textContent=e.source.replace(/\[--(\w+)\]/g,(t,o)=>{let n=e.classNames[o];return n?SL(n):t})}});function $m(e){let t=!1,o;return function(){return t?o:(t=!0,o=e.apply(this,arguments))}}var M1=x(()=>{"use strict";d()});var Koe=x(()=>{"use strict";d()});var jF={};Ao(jF,{SYM_IS_PROXIED_FACTORY:()=>zF,SYM_ORIGINAL_FACTORY:()=>k0,SYM_PATCHED_BY:()=>qF,SYM_PATCHED_SOURCE:()=>GF,allWebpackInstances:()=>xA,getBuildNumber:()=>Zoe,getFactoryPatchedBy:()=>sLe,getFactoryPatchedSource:()=>iLe,patchTimings:()=>rLe,patches:()=>zh});function iLe(e,t=Bo){return t.m[e]?.[GF]}function sLe(e,t=Bo){return t.m[e]?.[qF]}function Xoe(e,t,o,n,i=!1){if(cLe(e,t,o,n,i))return!0;uLe(t,o);let s=new Proxy(Ge.eagerPatches?Voe(t,o):o,lLe);return Reflect.set(e,t,s,n)}function cLe(e,t,o,n,i){let s,a;for(let l of xA)if(!(i&&l.m===e)&&Object.hasOwn(l.m,t)){s=l.m[t],a=l.m;break}return s!=null?(a!==e&&s[zF]?Reflect.set(e,t,s,n):Joe(t,o),s[k0]!=null&&(s[k0]=o),!0):!1}function Joe(e,t){for(let o of xA)md(o.m,e,{value:t})}function uLe(e,t){for(let o of Ah)try{o(t,e)}catch(n){Su.error(`Error in Webpack factory listener:
`,n,o)}}function Qoe(e,t,o){let n=e[k0];e===n&&delete e[k0];let[i,s,a]=o;if(Joe(i.id,n),Bo==null&&!Yoe&&(Yoe=!0,typeof a=="function"&&a.m!=null&&a.c!=null)){let{stack:u}=new Error,p=u?.match(/\/assets\/(.+?\.js)/)?.[1];Su.warn(`WebpackRequire was not initialized, falling back to WebpackRequire passed to the first called wrapped module factory (id: ${String(i.id)}`+FS`, WebpackInstance origin: ${p}`+")"),VS(a)}let l;try{l=e.apply(t,o)}catch(u){if(e===n)throw u;return Su.error(`Error in patched module factory:
`,u),n.apply(t,o)}if(s=i.exports,typeof a=="function"&&a.c&&qE(a.c,s,i.id)||s==null)return l;for(let u of GE)try{u(s,i.id)}catch(p){Su.error(`Error in Webpack module listener:
`,p,u)}for(let[u,p]of Eh){try{if(u(s)){Eh.delete(u),p(s,i.id);continue}}catch(m){Su.error(`Error while filtering or firing callback for Webpack waitFor subscription:
`,m,`

Module exports:`,s,`

Filter:`,u,`

Callback:`,p)}if(typeof s=="object")for(let m in s)try{try{var c=s[m]}catch{continue}if(c!=null&&u(c)){Eh.delete(u),p(c,i.id);break}}catch(g){Su.error(`Error while filtering or firing callback for Webpack waitFor subscription:
`,g,`

Export value:`,s,`

Filter:`,u,`

Callback:`,p)}}return l}function Voe(e,t){let o=String(t),i="0,"+(o.startsWith("(")?"":"function")+o.slice(o.indexOf("(")),s=i,a=t,l=new Set;for(let c=0;c<zh.length;c++){let u=zh[c],p=Zoe(),m=p!==-1;if(m&&u.fromBuild!=null&&p<u.fromBuild||u.toBuild!=null&&p>u.toBuild){zh.splice(c--,1);continue}if(!(typeof u.find=="string"?i.includes(u.find):(u.find.global&&(u.find.lastIndex=0),u.find.test(i))))continue;let y=roe(`patch by ${u.plugin}`,(A,C)=>(typeof A!="string"&&A.global&&(A.lastIndex=0),i.replace(A,C))),b=i,v=t,E=!1;for(let A of u.replacement){if(m&&A.fromBuild!=null&&p<A.fromBuild||A.toBuild!=null&&p>A.toBuild)continue;let C=i,I=t;try{let[N,_]=y(A.match,A.replace);if(N===i){if(u.noWarn||A.noWarn||Su.warn(`Patch by ${u.plugin} had no effect (Module id is ${String(e)}): ${A.match}`),u.group){Su.warn(`Undoing patch group ${u.find} by ${u.plugin} because replacement ${A.match} had no effect`),i=b,a=v,E&&l.delete(u.plugin);break}continue}let O=[...l];l.has(u.plugin)||O.push(u.plugin),i=N,s=`// Webpack Module ${String(e)} - Patched by ${O.join(", ")}
${i}
//# sourceURL=file:///WebpackModule${String(e)}`,a=(0,eval)(s),l.has(u.plugin)||(l.add(u.plugin),E=!0)}catch(N){if(Su.error(`Patch by ${u.plugin} errored (Module id is ${String(e)}): ${A.match}
`,N),E&&l.delete(u.plugin),u.group){Su.warn(`Undoing patch group ${u.find} by ${u.plugin} because replacement ${A.match} errored`),i=b,a=v;break}i=C,a=I}}u.all||zh.splice(c--,1)}return a[k0]=t,a}var zh,zF,k0,GF,qF,xA,rLe,Zoe,Su,Yoe,md,aLe,lLe,yA=x(()=>{"use strict";d();Q();Is();At();xt();Koe();HE();fe();zh=[],zF=Symbol("WebpackPatcher.isProxiedFactory"),k0=Symbol("WebpackPatcher.originalFactory"),GF=Symbol("WebpackPatcher.patchedSource"),qF=Symbol("WebpackPatcher.patchedBy"),xA=new Set,rLe=[],Zoe=sd(()=>{try{let t=function(i){let s=i.match(/"Trying to open a changelog for an invalid build number (\d+?)"\)/);return s==null?-1:Number(s[1])};var e=t;let o=String(Bo.m[446023]);if(o.includes("Trying to open a changelog for an invalid build number")){let i=t(o);if(i!==-1)return i}let n=ew("Trying to open a changelog for an invalid build number");return t(String(n))}catch{return-1}});Su=new ke("WebpackPatcher","#8caaee"),Yoe=!1,md=(e,t,o)=>(Object.hasOwn(o,"value")&&(o.writable=!0),Reflect.defineProperty(e,t,{configurable:!0,enumerable:!0,...o}));md(Function.prototype,"m",{enumerable:!1,set(e){md(this,"m",{value:e});let{stack:t}=new Error;if(!t?.includes("http")||t.match(/at \d+? \(/)||!String(this).includes("exports:{}"))return;let o=t.match(/\/assets\/(.+?\.js)/)?.[1];if(["sentry","libdiscore"].some(a=>o?.toLowerCase()?.includes(a)))return;md(this,"p",{enumerable:!1,set(a){md(this,"p",{value:a}),clearTimeout(n),!(a!=="/assets/"||/(?:=>|{return)"[^"]/.exec(String(this.u)))&&(Bo==null&&this.c!=null&&(Su.info("Main WebpackInstance found"+FS` in ${o}`+", initializing internal references to WebpackRequire"),VS(this)),s())}}),md(this,"O",{enumerable:!1,set(a){md(this,"O",{value:a}),clearTimeout(i);let l=this;md(a,"j",{enumerable:!1,set(c){md(this,"j",{value:c}),l.p==null&&s()}})}});let n=setTimeout(()=>Reflect.deleteProperty(this,"p"),0),i=setTimeout(()=>Reflect.deleteProperty(this,"O"),0),s=()=>{Su.info("Found Webpack module factories"+FS` in ${o}`),xA.add(this);for(let l in e)Xoe(e,l,e[l],e,!0);md(e,Symbol.toStringTag,{value:"ModuleFactories",enumerable:!1});let a=new Proxy(e,aLe);md(this,"m",{value:a}),this.d=function(l,c){for(let u in c)Object.hasOwn(c,u)&&!Object.hasOwn(l,u)&&Object.defineProperty(l,u,{enumerable:!0,configurable:!0,get:c[u]})}}}});aLe={set:Xoe},lLe={apply(e,t,o){if(e[k0]!=null)return Qoe(e,t,o);let n=e.name,i=Voe(n,e);return Qoe(i,t,o)},get(e,t,o){if(t===zF)return!0;let n=e[k0]??e;if(t==="toString"||t===GF||t===qF){let i=Reflect.get(n,t,n);return t==="toString"?i.bind(n):i}return Reflect.get(e,t,o)}}});var ene=x(()=>{"use strict";d()});var WF={};Ao(WF,{ChunkIdsRegex:()=>ow,Common:()=>d0,DefaultExtractAndLoadChunksRegex:()=>Th,LazyComponentWebpack:()=>coe,_blacklistBadModules:()=>qE,_initWebpack:()=>VS,_resolveReady:()=>XS,cache:()=>mu,extract:()=>nw,extractAndLoadChunks:()=>hO,extractAndLoadChunksLazy:()=>Ds,factoryListeners:()=>Ah,filters:()=>ot,find:()=>da,findAll:()=>m0,findBulk:()=>jE,findByCode:()=>ap,findByCodeLazy:()=>vt,findByProps:()=>Ch,findByPropsLazy:()=>He,findComponentByCode:()=>uoe,findComponentByCodeLazy:()=>De,findComponentLazy:()=>m1,findCssClasses:()=>fO,findCssClassesLazy:()=>et,findExportedComponentLazy:()=>fu,findLazy:()=>An,findModuleFactory:()=>ew,findModuleId:()=>sp,findStore:()=>cd,findStoreLazy:()=>Ft,fluxStores:()=>pu,handleModuleNotFound:()=>ld,lazyWebpackSearchHistory:()=>loe,makeClassNameRegex:()=>zE,mapMangledCssClasses:()=>tw,mapMangledModule:()=>gO,mapMangledModuleLazy:()=>qn,moduleListeners:()=>GE,onceReady:()=>p0,proxyLazyWebpack:()=>fr,search:()=>f1,stringMatches:()=>JS,waitFor:()=>Ln,waitForSubscriptions:()=>Eh,wreq:()=>Bo});var bA=x(()=>{"use strict";d();B();ene();fe()});var ZF={};Ao(ZF,{AudioType:()=>vA,addAudioProcessor:()=>YF,audioProcessorFunctions:()=>Aw,createAudioPlayer:()=>fd,defaultAudioNames:()=>SA,identifyAudioType:()=>Cw,playAudio:()=>_s,removeAudioProcessor:()=>QF});function fd(e,t={}){let o=new pLe(e,null,null,"default",t);return new KF(o)}function _s(e,t={}){let o=fd(e,t);return o.play(),o}function Cw(e){if(SA().includes(e))return"discord";try{let t=new URL(e);return t.protocol==="http:"||t.protocol==="https:"?"url":t.protocol==="data:"?"data-uri":t.protocol==="blob:"?"blob":t.protocol==="file:"?"file-path":"other"}catch{return"other"}}function YF(e,t){Aw[e]=t}function QF(e){delete Aw[e]}function SA(){return tne??=(dLe.keys()||[]).map(e=>{let t=e.match(/((?:\w|-)+)\.mp3$/);return t?t[1]:null}).filter(Boolean),tne}var tne,dLe,pLe,Aw,vA,KF,Ol=x(()=>{"use strict";d();bA();tne=null,dLe=An(e=>e.resolve&&e.id&&e.keys().some(t=>t.endsWith(".mp3")),!1),pLe=vt("could not play audio"),Aw={},vA=(a=>(a.URL="url",a.DATA="data-uri",a.BLOB="blob",a.PATH="file-path",a.DISCORD="discord",a.OTHER="other",a))(vA||{}),KF=class{internalPlayer;constructor(t){this.internalPlayer=t}get audio(){return this.internalPlayer.audio}set audio(t){this.internalPlayer.preprocessDataOriginal.audio=t,this.internalPlayer.processAudio()}get volume(){return this.internalPlayer._volume*100}set volume(t){this.internalPlayer.preprocessDataOriginal.volume=Math.max(0,Math.min(1,t/100)),this.internalPlayer.processAudio()}get speed(){return this.internalPlayer._speed}set speed(t){this.internalPlayer.preprocessDataOriginal.speed=Math.max(.0625,Math.min(16,t)),this.internalPlayer.processAudio()}get time(){return this.internalPlayer._audio?.then(t=>t.currentTime)??null}set time(t){this.internalPlayer.ensureAudio().then(o=>o.currentTime=t)}get persistent(){return this.internalPlayer.persistent}set persistent(t){this.internalPlayer.persistent=t}get preload(){return this.internalPlayer.preload}set preload(t){this.internalPlayer.preload=t,t&&this.internalPlayer.ensureAudio()}get muted(){return this.internalPlayer._audio?.then(t=>t.muted)??null}set muted(t){this.internalPlayer.ensureAudio().then(o=>o.muted=t)}get paused(){return this.internalPlayer._audio?.then(t=>t.paused)??null}set paused(t){t?this.internalPlayer.pause():this.internalPlayer.play()}get type(){return this.internalPlayer.type}get duration(){return this.internalPlayer._audio?.then(t=>t.duration)??null}load(){this.internalPlayer.ensureAudio()}loop(){this.internalPlayer.loop()}play(){this.internalPlayer.play()}pause(){this.internalPlayer.pause()}stop(t){this.internalPlayer.stop(t)}restart(){this.internalPlayer.stop(!0)}seek(t){this.internalPlayer.ensureAudio().then(o=>o.currentTime=t)}mute(){this.internalPlayer.ensureAudio().then(t=>t.muted=!0)}unmute(){this.internalPlayer.ensureAudio().then(t=>t.muted=!1)}delete(){this.internalPlayer.destroyAudio()}}});var nU={};Ao(nU,{ChannelToolbarButton:()=>fLe,HeaderBarButton:()=>ul,_addChannelToolbarButtons:()=>yLe,_addHeaderBarButtons:()=>xLe,addChannelToolbarButton:()=>tU,addHeaderBarButton:()=>VF,removeChannelToolbarButton:()=>oU,removeHeaderBarButton:()=>eU});function ul(e){let{icon:t,tooltip:o,onClick:n,onContextMenu:i,className:s,iconSize:a=18,position:l="bottom",selected:c,ref:u,"aria-label":p}=e,m=p??(typeof o=="string"?o:void 0);return r(Ue,{text:o??"",position:l,shouldShow:o!=null},({onMouseEnter:g,onMouseLeave:y})=>r(en,{innerRef:u,className:me(one.clickable,one.withHighlight,s),style:{width:a,boxSizing:"content-box",justifyContent:"center"},onClick:n,onContextMenu:i,onMouseEnter:g,onMouseLeave:y,role:"button",tabIndex:0,"aria-label":m,"aria-expanded":c},r(t,{size:"custom",width:a,height:a,color:"currentColor"})))}function fLe(e){return r(mLe,{...e})}function VF(e,t,o=0){XF.set(e,{render:t,priority:o}),wA.forEach(n=>n())}function eU(e){XF.delete(e),wA.forEach(t=>t())}function tU(e,t,o=0){JF.set(e,{render:t,priority:o}),kA.forEach(n=>n())}function oU(e){JF.delete(e),kA.forEach(t=>t())}function gLe(){let[,e]=L(0);return se(()=>{let t=()=>e(o=>o+1);return wA.add(t),()=>{wA.delete(t)}},[]),Array.from(XF).sort(([,t],[,o])=>t.priority-o.priority).map(([t,{render:o}])=>r(ee,{noop:!0,key:t,onError:n=>nne.error(`Failed to render header bar button: ${t}`,n.error)},r(o,null)))}function hLe(){let[,e]=L(0);return se(()=>{let t=()=>e(o=>o+1);return kA.add(t),()=>{kA.delete(t)}},[]),Array.from(JF).sort(([,t],[,o])=>t.priority-o.priority).map(([t,{render:o}])=>r(ee,{noop:!0,key:t,onError:n=>nne.error(`Failed to render channel toolbar button: ${t}`,n.error)},r(o,null)))}function xLe(){return[r(gLe,{key:"vc-header-bar-buttons"})]}function yLe(e){e.push(r(hLe,{key:"vc-channel-toolbar-buttons"}))}var nne,one,mLe,XF,JF,wA,kA,Hm=x(()=>{"use strict";d();tt();At();xt();fe();B();nne=new ke("HeaderBarAPI"),one=et("clickable","withHighlight"),mLe=De(".HEADER_BAR_BADGE_TOP:",'"aria-haspopup":');XF=new Map,JF=new Map,wA=new Set,kA=new Set});var sU={};Ao(sU,{UserAreaButton:()=>zm,_renderButtons:()=>wLe,addUserAreaButton:()=>rU,buttons:()=>EA,removeUserAreaButton:()=>iU});function rU(e,t,o=0){EA.set(e,{render:t,priority:o})}function iU(e){EA.delete(e)}function SLe({props:e}){return r(f,null,Array.from(EA).sort(([,t],[,o])=>t.priority-o.priority).map(([t,{render:o}])=>r(ee,{noop:!0,key:t,onError:n=>vLe.error(`Failed to render ${t}`,n.error)},r(o,{...e}))))}function wLe(e){return[r(SLe,{key:"vc-user-area-buttons",props:e})]}var bLe,zm,vLe,EA,Gh=x(()=>{"use strict";d();tt();At();fe();bLe=De("tooltipPositionKey","positionKeyStemOverride"),zm=bLe,vLe=new ke("UserArea"),EA=new Map});var Iw={};Ao(Iw,{PMLogger:()=>kLe,addPatch:()=>ine,initPluginManager:()=>uU,isPluginEnabled:()=>yt,isPluginRequired:()=>lU,pluginRequiresRestart:()=>AA,plugins:()=>pt,startAllPlugins:()=>Tw,startDependenciesRecursive:()=>N1,startPlugin:()=>Gm,stopPlugin:()=>qm,subscribeAllPluginsFluxEvents:()=>ELe,subscribePluginFluxEvents:()=>cU,unsubscribePluginFluxEvents:()=>sne});function yt(e){return(pt[e]?.required||pt[e]?.isDependency||Ge.plugins[e]?.enabled)??!1}function lU(e){return pt[e]?.required??!1}function ine(e,t,o=`Vencord.Plugins.plugins[${JSON.stringify(t)}]`){let n=e;if(n.plugin=t,!(n.predicate&&!n.predicate())){dO(n),Array.isArray(n.replacement)||(n.replacement=[n.replacement]);for(let i of n.replacement)WS(i,o);n.replacement=n.replacement.filter(({predicate:i})=>!i||i()),zh.push(n)}}function AA(e){return e.requiresRestart!==!1&&(e.requiresRestart||!!e.patches?.length)}function N1(e){let t=Ge.plugins,o=!1,n=[];return e.dependencies?.forEach(i=>{if(!t[i].enabled){let s=pt[i];if(N1(s),t[i].enabled=!0,s.isDependency=!0,AA(s)){ms.warn(`Enabling dependency ${i} requires restart.`),o=!0;return}Gm(s)||n.push(i)}}),{restartNeeded:o,failures:n}}function cU(e,t){if(e.flux&&!aU.has(e.name)){aU.add(e.name),ms.debug("Subscribing to flux events of plugin",e.name);for(let[o,n]of Object.entries(e.flux)){let i=e.flux[o]=function(){if(!(e.name==="Encryptcord"&&o==="MESSAGE_CREATE"))try{let s=n.apply(e,arguments);return s instanceof Promise?s.catch(a=>ms.error(`${e.name}: Error while handling ${o}
`,a)):s}catch(s){ms.error(`${e.name}: Error while handling ${o}
`,s)}};t.subscribe(o,i)}}}function sne(e,t){if(e.flux){aU.delete(e.name),ms.debug("Unsubscribing from flux events of plugin",e.name);for(let[o,n]of Object.entries(e.flux))t.unsubscribe(o,n)}}function ELe(e){rne=!0;for(let t in pt)yt(t)&&cU(pt[t],e)}var ms,kLe,rne,aU,Tw,Gm,qm,uU,Wo=x(()=>{"use strict";d();A1();ma();yi();Un();yF();ww();kF();vu();hA();OF();Q();ps();At();M1();ad();$();B();yA();Ps();HE();Ol();Hm();Gh();ms=new ke("PluginManager","#a6d189"),kLe=ms,rne=!1,aU=new Set;Tw=Pm("startAllPlugins",function(t){ms.info(`Starting plugins (stage ${t})`);for(let o in pt)if(yt(o)){if((pt[o].startAt??"WebpackReady")!==t)continue;Gm(pt[o])}});Gm=Pm("startPlugin",function(t){let{name:o,commands:n,contextMenus:i,managedStyle:s,userProfileBadges:a,onBeforeMessageEdit:l,onBeforeMessageSend:c,onMessageClick:u,renderChatBarButton:p,chatBarButton:m,renderMemberListDecorator:g,renderMessageAccessory:y,renderMessageDecoration:b,renderMessagePopoverButton:v,messagePopoverButton:E,renderNicknameIcon:A,headerBarButton:C,audioProcessor:I,userAreaButton:N}=t;if(t.start){if(ms.info("Starting plugin",o),t.started)return ms.warn(`${o} already started`),!1;try{t.start()}catch(_){return ms.error(`Failed to start ${o}
`,_),!1}}if(t.started=!0,n?.length){ms.debug("Registering commands of plugin",o);for(let _ of n)try{C1(_,o)}catch(O){return ms.error(`Failed to register command ${_.name}
`,O),!1}}if(rne&&cU(t,V),i){ms.debug("Adding context menus patches of plugin",o);for(let _ in i)Ll(_,i[_])}return s&&Or(s),a&&a.forEach(_=>dU(_)),l&&Fh(l),c&&qi(c),u&&IF(u),m?uA(o,m.render,m.icon):p&&uA(o,p),g&&gF(o,g),b&&vF(o,b),y&&Oh(o,y),E?gA(o,E.render,E.icon):v&&gA(o,v),A&&_F(o,A),C&&(C.location==="channeltoolbar"?tU(o,C.render,C.priority):VF(o,C.render,C.priority)),I&&YF(o,I),N&&rU(o,N.render,N.priority),!0},e=>`startPlugin ${e.name}`),qm=Pm("stopPlugin",function(t){let{name:o,commands:n,contextMenus:i,managedStyle:s,userProfileBadges:a,onBeforeMessageEdit:l,onBeforeMessageSend:c,onMessageClick:u,renderChatBarButton:p,chatBarButton:m,renderMemberListDecorator:g,renderMessageAccessory:y,renderMessageDecoration:b,renderMessagePopoverButton:v,messagePopoverButton:E,renderNicknameIcon:A,headerBarButton:C,audioProcessor:I,userAreaButton:N}=t;if(t.stop){if(ms.info("Stopping plugin",o),!t.started)return ms.warn(`${o} already stopped`),!1;try{t.stop()}catch(_){return ms.error(`Failed to stop ${o}
`,_),!1}}if(t.started=!1,n?.length){ms.debug("Unregistering commands of plugin",o);for(let _ of n)try{vw(_.name)}catch(O){return ms.error(`Failed to unregister command ${_.name}
`,O),!1}}if(sne(t,V),i){ms.debug("Removing context menus patches of plugin",o);for(let _ in i)bu(_,i[_])}return s&&Fr(s),a&&a.forEach(_=>pU(_)),l&&Uh(l),c&&ji(c),u&&DF(u),(m||p)&&lF(o),g&&hF(o),b&&SF(o),y&&Sw(o),(E||v)&&NF(o),A&&RF(o),C&&(C.location==="channeltoolbar"?oU(o):eU(o)),I&&QF(o),N&&iU(o),!0},e=>`stopPlugin ${e.name}`),uU=$m(function(){let t=Object.values(pt),o=Ge.plugins,n=["onBeforeMessageEdit","onBeforeMessageSend","onMessageClick","renderChatBarButton","renderMemberListDecorator","renderMessageAccessory","renderMessageDecoration","renderMessagePopoverButton","renderNicknameIcon"],i=new Set;for(let s of t)if(yt(s.name)){s.dependencies?.forEach(a=>{let l=pt[a];if(!l){let c=new Error(`Plugin ${s.name} has unresolved dependency ${a}`);ms.warn(c);return}o[a].enabled=!0,l.isDependency=!0}),s.commands?.length&&i.add("CommandsAPI"),(s.onBeforeMessageEdit||s.onBeforeMessageSend||s.onMessageClick)&&i.add("MessageEventsAPI"),(s.chatBarButton||s.renderChatBarButton)&&i.add("ChatInputButtonAPI"),s.renderMemberListDecorator&&i.add("MemberListDecoratorsAPI"),s.renderMessageAccessory&&i.add("MessageAccessoriesAPI"),s.renderMessageDecoration&&i.add("MessageDecorationsAPI"),(s.messagePopoverButton||s.renderMessagePopoverButton)&&i.add("MessagePopoverAPI"),s.userProfileBadge&&i.add("BadgeAPI"),s.renderNicknameIcon&&i.add("NicknameIconsAPI"),s.headerBarButton&&i.add("HeaderBarAPI"),s.audioProcessor&&i.add("AudioPlayerAPI"),s.userAreaButton&&i.add("UserAreaAPI");for(let a of n)s[a]&&=s[a].bind(s)}for(let s of i)pt[s].isDependency=!0,o[s].enabled=!0;for(let s of t){if(s.settings){s.options??={},s.settings.pluginName=s.name;for(let a in s.settings.def){let l=s.settings.def[a],c=s.settings.checks?.[a];s.options[a]={...l,...c}}}if(s.options)for(let a in s.options){let l=s.options[a];l.onChange!=null&&Tn.addChangeListener(`plugins.${s.name}.${a}`,l.onChange)}if(s.patches&&yt(s.name))for(let a of s.patches)ine(a,s.name)}})});var gU={};Ao(gU,{BadgePosition:()=>yw,_getBadges:()=>fU,addProfileBadge:()=>dU,removeProfileBadge:()=>pU});function dU(e){e.component&&=ee.wrap(e.component,{noop:!0}),mU.add(e)}function pU(e){return mU.delete(e)}function fU(e){let t=[];for(let s of mU){if(s.shouldShow&&!s.shouldShow(e))continue;let a=s.getBadges?s.getBadges(e).map(l=>({...e,...l,component:l.component&&ee.wrap(l.component,{noop:!0})})):[{...e,...s}];s.position===0?t.unshift(...a):t.push(...a)}let o=Ul.getDonorBadges(e.userId),n=Ul.getEquicordDonorBadges(e.userId),i=yt(Ph.name)?Ph.getGlobalBadges(e.userId):!1;return i&&t.unshift(...i.map(s=>({...e,...s}))),o&&t.unshift(...o.map(s=>({...e,...s}))),n&&t.unshift(...n.map(s=>({...e,...s}))),t}var yw,mU,A1=x(()=>{"use strict";d();tt();iF();_h();Wo();yw=(o=>(o[o.START=0]="START",o[o.END=1]="END",o))(yw||{}),mU=new Set});var ane=x(()=>{});var lne=x(()=>{});var cne=x(()=>{});function CLe(e){return r("svg",{"aria-hidden":"true",role:"img",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"none",viewBox:"0 0 24 24",...e},r("path",{fill:"currentColor",fillRule:"evenodd",d:"M23 12a11 11 0 1 1-22 0 11 11 0 0 1 22 0Zm-9.5-4.75a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0Zm-.77 3.96a1 1 0 1 0-1.96-.42l-1.04 4.86a2.77 2.77 0 0 0 4.31 2.83l.24-.17a1 1 0 1 0-1.16-1.62l-.24.17a.77.77 0 0 1-1.2-.79l1.05-4.86Z",clipRule:"evenodd"}))}function TLe(e){return r("svg",{"aria-hidden":"true",role:"img",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"none",viewBox:"0 0 24 24",...e},r("path",{fill:"currentColor",fillRule:"evenodd",d:"M10 3.1a2.37 2.37 0 0 1 4 0l8.71 14.75c.84 1.41-.26 3.15-2 3.15H3.29c-1.74 0-2.84-1.74-2-3.15L9.99 3.1Zm3.25 14.65a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0ZM13.06 14l.37-5.94a1 1 0 0 0-1-1.06h-.87a1 1 0 0 0-1 1.06l.38 5.94a1.06 1.06 0 0 0 2.12 0Z",clipRule:"evenodd"}))}function ILe(e){return r("svg",{"aria-hidden":"true",role:"img",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"none",viewBox:"0 0 24 24",...e},r("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 23a11 11 0 1 0 0-22 11 11 0 0 0 0 22Zm4.7-15.7a1 1 0 0 0-1.4 0L12 10.58l-3.3-3.3a1 1 0 0 0-1.4 1.42L10.58 12l-3.3 3.3a1 1 0 1 0 1.42 1.4L12 13.42l3.3 3.3a1 1 0 0 0 1.4-1.42L13.42 12l3.3-3.3a1 1 0 0 0 0-1.4Z",clipRule:"evenodd"}))}function DLe(e){return r("svg",{"aria-hidden":"true",role:"img",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"none",viewBox:"0 0 24 24",...e},r("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 23a11 11 0 1 0 0-22 11 11 0 0 0 0 22Zm5.7-13.3a1 1 0 0 0-1.4-1.4L10 14.58l-2.3-2.3a1 1 0 0 0-1.4 1.42l3 3a1 1 0 0 0 1.4 0l7-7Z",clipRule:"evenodd"}))}function ur({children:e,variant:t="info",icon:o,action:n,hidden:i=!1,className:s,...a}){let l=o??MLe[t];return r("div",{className:me(qh("container",t),i&&qh("hidden"),s),...a},r("div",{className:qh("inner")},r("div",{className:qh("icon-wrapper")},r(l,{className:qh("icon")})),r("div",{className:qh("text")},e),n&&r("div",{className:qh("action")},n)))}var qh,ALe,MLe,gd=x(()=>{"use strict";d();cne();nt();xt();qh=de("vc-notice-"),ALe=["info","warning","danger","positive"];MLe={info:CLe,warning:TLe,danger:ILe,positive:DLe};ur.Info=e=>r(ur,{variant:"info",...e});ur.Warning=e=>r(ur,{variant:"warning",...e});ur.Danger=e=>r(ur,{variant:"danger",...e});ur.Positive=e=>r(ur,{variant:"positive",...e})});var une=x(()=>{});function Dw({text:e,variant:t="default",icon:o,className:n,color:i,backgroundColor:s,style:a,...l}){let c=i||s?{...a,...i&&{color:i},...s&&{backgroundColor:s}}:a;return r("div",{className:me(dne("base",t),n),style:c,...l},o&&r(o,{size:"xxs",className:dne("icon")}),e)}var dne,NLe,CA=x(()=>{"use strict";d();une();nt();xt();dne=de("vc-badge-"),NLe=["default","expressive","danger","positive","warning","premium"]});var hU=x(()=>{});function jh({disabled:e,isNew:t,sourceBadge:o,tooltip:n,name:i,infoButton:s,footer:a,author:l,enabled:c,setEnabled:u,description:p,onMouseEnter:m,onMouseLeave:g}){let y=kt(null),b=kt(null);return r("div",{className:fp("card",{"card-disabled":e}),onMouseEnter:m,onMouseLeave:g},r("div",{className:fp("header")},r("div",{className:fp("name-author")},r(Y,{size:"md",weight:"bold",className:fp("name")},r("div",{ref:b,className:fp("title-container")},r("div",{ref:y,className:fp("title"),onMouseOver:()=>{let v=y.current,E=b.current;v.style.setProperty("--offset",`${E.clientWidth-v.scrollWidth}px`),v.style.setProperty("--duration",`${Math.max(.5,(v.scrollWidth-E.clientWidth)/7)}s`)}},i)),t&&r(Dw,{text:"NEW",variant:"danger"})),!!l&&r(Y,{size:"md",color:"text-subtle",className:fp("author")},l)),r(Ue,{text:n},({onMouseEnter:v,onMouseLeave:E})=>r("div",{className:fp("source"),onMouseEnter:v,onMouseLeave:E},o)),s,r(os,{checked:c,onChange:u,disabled:e})),r("div",{className:fp("note"),style:{lineHeight:"1.25em",fontSize:"small"},title:p?p.toString():""},p),a&&r("div",{className:fp("footer")},a))}var fp,xU=x(()=>{"use strict";d();hU();CA();Et();Im();nt();B();fp=de("vc-addon-")});function gp(e){return r("svg",{"aria-hidden":"true",viewBox:"0 0 16 16",height:"16",width:"16",...e,className:me("vc-heart-icon",e.className)},r("path",{fill:"#db61a2",fillRule:"evenodd",d:"M4.25 2.5c-1.336 0-2.75 1.164-2.75 3 0 2.15 1.58 4.144 3.365 5.682A20.565 20.565 0 008 13.393a20.561 20.561 0 003.135-2.211C12.92 9.644 14.5 7.65 14.5 5.5c0-1.836-1.414-3-2.75-3-1.373 0-2.609.986-3.029 2.456a.75.75 0 01-1.442 0C6.859 3.486 5.623 2.5 4.25 2.5zM8 14.25l-.345.666-.002-.001-.006-.003-.018-.01a7.643 7.643 0 01-.31-.17 22.075 22.075 0 01-3.434-2.414C2.045 10.731 0 8.35 0 5.5 0 2.836 2.086 1 4.25 1 5.797 1 7.153 1.802 8 3.02 8.847 1.802 10.203 1 11.75 1 13.914 1 16 2.836 16 5.5c0 2.85-2.045 5.231-3.885 6.818a22.08 22.08 0 01-3.744 2.584l-.018.01-.006.003h-.002L8 14.25zm0 0l.345.666a.752.752 0 01-.69 0L8 14.25z"}))}var B1=x(()=>{"use strict";d();xt()});function P1({equicord:e=!1,className:t,...o}){let n=e?"https://github.com/sponsors/thororen1234":"https://github.com/sponsors/Vendicated";return r(Me,{...o,variant:"none",size:"medium",type:"button",onClick:()=>VencordNative.native.openExternal(n),className:t||"vc-donate-button"},r(gp,null),"Donate")}function yU({className:e,...t}){return r(Me,{...t,variant:"none",size:"medium",type:"button",onClick:async o=>{o.preventDefault(),Gi("wKgT9j2xfN").catch(()=>Re("Invalid or expired invite"))},className:e||"vc-donate-button"},"Invite",r(_r,{className:"vc-invite-link"}))}var bU=x(()=>{"use strict";d();Co();B1();ao();mt();B()});var pne=x(()=>{});var mne=x(()=>{});function cn({variant:e="primary",outline:t=!1,defaultPadding:o,children:n,className:i,...s}){return r("div",{className:me(BLe("base",e,t&&"outline",(o??!i)&&"defaultPadding"),i),...s},n)}var BLe,fs=x(()=>{"use strict";d();mne();nt();xt();BLe=de("vc-card-")});function Pa(e){let{Icon:t,action:o,text:n,disabled:i}=e;return r("button",{className:vU("pill"),onClick:o,disabled:i},r(t,{className:vU("img")}),n)}function Wh(e){return r(cn,{className:vU("card"),style:e.columns?{gridTemplateColumns:`repeat(${e.columns}, 1fr)`}:void 0},e.children)}var vU,TA=x(()=>{"use strict";d();pne();fs();nt();vU=de("vc-settings-quickActions-")});var fne=x(()=>{});function Mw({title:e,subtitle:t,description:o,cardImage:n,backgroundImage:i,backgroundColor:s,buttonTitle:a,buttonOnClick:l,children:c}){let u={backgroundColor:s||"#9c85ef",backgroundImage:`url(${i||""})`};return r(cn,{className:hd("card","card-special"),style:u},r("div",{className:hd("card-flex")},r("div",{className:hd("card-flex-main")},r(re,{className:hd("title"),tag:"h5"},e),r(W,{className:hd("subtitle")},t),r(W,{className:hd("text")},o),c),n&&r("div",{className:hd("image-container")},r("img",{role:"presentation",src:n,alt:"",className:hd("image")}))),a&&r(f,null,r(Bt,{className:hd("seperator")}),r(en,{onClick:l,className:hd("hyperlink")},r(W,{className:hd("hyperlink-text")},a))))}var hd,SU=x(()=>{"use strict";d();fne();fs();Ar();ut();wt();nt();B();hd=de("vc-special-")});var fa=x(()=>{"use strict";d();CA();Im();xU();bU();TA();SU();Nw()});function gne({value:e,onChange:t,className:o}){let[n,i]=L(!1),[s,a]=L(e),l=kt(null);return se(()=>{n&&l.current&&l.current.focus()},[n]),n?r("input",{ref:l,className:o,value:s,onChange:c=>a(c.target.value),onBlur:()=>{i(!1),t(s)},onKeyDown:c=>{c.key==="Enter"?(i(!1),t(s)):c.key==="Escape"&&(i(!1),a(e))}}):r(Y,{className:o,onClick:()=>i(!0),style:{cursor:"pointer"}},e)}var hne=x(()=>{"use strict";d();Et();B()});function xne(e){let t=kt(null),[o,n]=L(e);return se(()=>{if(!t.current)return;let i=t.current,s=36,a=e;if(i.textContent=a,i.scrollHeight<=s){n(a);return}let l=0,c=a.length;for(;l<c;){let p=Math.floor((l+c)/2),m=a.slice(0,p).trim()+"\u2026";i.textContent=m,i.scrollHeight<=s?l=p+1:c=p}let u=a.slice(0,c-1).trim()+"\u2026";n(u)},[e]),{truncated:o,containerRef:t}}var yne=x(()=>{"use strict";d();B()});function bne({disabled:e,isNew:t,name:o,infoButton:n,footer:i,author:s,enabled:a,setEnabled:l,description:c,onMouseEnter:u,onMouseLeave:p,customName:m,onEditName:g}){let y=kt(null),b=kt(null),{truncated:v,containerRef:E}=xne(c?c.toString():"");return r("div",{className:hp("card",{"card-disabled":e}),onMouseEnter:u,onMouseLeave:p},r("div",{className:hp("header")},r("div",{className:hp("name-author")},r(Y,{size:"md",weight:"bold",className:hp("name")},r("div",{ref:b,className:hp("title-container")},r("div",{ref:y,className:hp("title"),onMouseOver:()=>{let A=y.current,C=b.current;A.style.setProperty("--offset",`${C.clientWidth-A.scrollWidth}px`),A.style.setProperty("--duration",`${Math.max(.5,(A.scrollWidth-C.clientWidth)/7)}s`)}},g?r(gne,{value:m||(o?o.toString():""),onChange:g,className:hp("editable")}):m||o)),t&&r(Dw,{text:"NEW",variant:"danger"})),!!s&&r(Y,{size:"md",color:"text-subtle",className:hp("author")},s)),n,r(os,{checked:a,onChange:l,disabled:e})),r("div",{ref:E,className:hp("note"),style:{lineHeight:"1.25em",fontSize:"small"},title:c?c.toString():""},v),i&&r("div",{className:hp("footer")},i))}var hp,vne=x(()=>{"use strict";d();hU();CA();Et();fa();nt();B();hne();yne();hp=de("vc-addon-")});function kU(){let e=Vo();return gu(()=>(wU.add(e),()=>void wU.delete(e)),[e]),[..._1]}var PLe,_1,wU,EU=x(()=>{"use strict";d();B();qo();PLe=["style-src","style-src-elem","img-src","font-src"],_1=new Set,wU=new Set;document.addEventListener("securitypolicyviolation",({effectiveDirective:e,blockedURI:t})=>{!t||!PLe.includes(e)||(_1.add(t),wU.forEach(o=>o()))})});function xd(){location.reload()}function Sne(e){window.VesktopNative.fileManager.showItemInFolder(e)}var yd=x(()=>{"use strict";d()});function AU(e,t={}){return{fileName:e,name:t.name??e.replace(/\.css$/i,""),author:t.author??"Unknown Author",description:t.description??"A Discord Theme.",version:t.version,license:t.license,source:t.source,website:t.website,invite:t.invite}}function wne(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}function IA(e,t){if(!e)return AU(t);let o=e.split("/**",2)?.[1]?.split("*/",1)?.[0];if(!o)return AU(t);let n={},i="",s="";for(let a of o.split(_Le))if(a.length!==0)if(a.charAt(0)==="@"&&a.charAt(1)!==" "){n[i]=s.trim();let l=a.indexOf(" ");i=a.substring(1,l),s=a.substring(l+1)}else s+=" "+a.replace("\\n",`
`).replace(RLe,"@");return n[i]=s.trim(),delete n[""],AU(t,n)}var _Le,RLe,kne=x(()=>{"use strict";d();_Le=/[^\S\r\n]*?\r?(?:\r\n|\n)[^\S\r\n]*?\*[^\S\r\n]?/,RLe=/^\\@/});var DA=Ro((k4t,Ene)=>{d();var Bw=class extends Error{constructor(t){super(t.message),delete t.message,this.name="ParseError",Object.assign(this,t)}},CU=class extends Bw{constructor(t,o){super({code:"missingChar",args:t,message:`Missing character: ${t.map(n=>`'${n}'`).join(", ")}`,index:o})}},TU=class extends Bw{constructor(t){super({code:"EOF",message:"Unexpected end of file",index:t})}};Ene.exports={ParseError:Bw,MissingCharError:CU,EOFError:TU}});var PU=Ro((A4t,_ne)=>{d();var{ParseError:R1,MissingCharError:IU,EOFError:LLe}=DA(),Ane=/<<<EOT([\s\S]+?)EOT;/y,Kh=/.*/y,Cne=/-?(\d+(\.\d+)?|\.\d+)([eE]-?\d+)?\s*/y,Tne=/\s*/y,Ine=/[^\S\n]*/y,Dne=/([\w-]+)\s*/y,OLe=/(`(?:\\`|[\s\S])*?`)/y,FLe=/((['"])(?:\\\2|[^\n])*?\2|\w+)/y,DU=/[^"]*/y,ULe=/^v?\d+(\.\d+)*(?:-(\w[-\w]*(\.[-\w]+)*))?(?:\+(\w[-\w]*(\.[-\w]+)*))?$/,Mne={__proto__:null,null:null,true:!0,false:!1};function Nne(e){return e.replace(/\*\\\//g,"*/")}function BU(e){let t=e[0];return t===e[e.length-1]&&(t==='"'||t==="'"||t==="`")?e.slice(1,-1).replace(new RegExp(`\\\\([${t}\\\\/bfnrt]|u[0-9a-fA-F]{4})`,"g"),o=>o[1]===t?t:JSON.parse(`"${o}"`)):Nne(e)}function $Le(e){Kh.lastIndex=e.lastIndex,Kh.exec(e.text),e.lastIndex=Kh.lastIndex}function bd(e){Tne.lastIndex=e.lastIndex,e.lastIndex+=Tne.exec(e.text)[0].length}function HLe(e){Ine.lastIndex=e.lastIndex,e.lastIndex+=Ine.exec(e.text)[0].length}function zLe(e){if(e.lastIndex>=e.text.length)throw new LLe(e.lastIndex);e.index=e.lastIndex,e.value=e.text[e.lastIndex],e.lastIndex++,bd(e)}function Bne(e){let t=e.lastIndex;Dne.lastIndex=t;let o=Dne.exec(e.text);if(!o)throw new R1({code:"invalidWord",message:"Invalid word",index:t});e.index=t,e.value=o[1],e.lastIndex+=o[0].length}function GLe(e){let t=e.lastIndex;try{NU(e)}catch(o){throw o.message=`Invalid JSON: ${o.message}`,o}e.index=t}function qLe(e){let t=e.lastIndex;Ane.lastIndex=t;let o=Ane.exec(e.text);if(!o)throw new R1({code:"missingEOT",message:"Missing EOT",index:t});e.index=t,e.lastIndex+=o[0].length,e.value=Nne(o[1].trim()),bd(e)}function jLe(e){DU.lastIndex=e.lastIndex;let t=DU.exec(e.text);e.index=e.lastIndex,e.lastIndex=DU.lastIndex,e.value=t[0].trim().replace(/\s+/g,"-")}function MU(e,t=!1){let o=e.lastIndex,n=e.text[o]==="`"?OLe:FLe;n.lastIndex=o;let i=n.exec(e.text);if(!i)throw new R1({code:"invalidString",message:"Invalid string",index:o});e.index=o,e.lastIndex+=i[0].length,e.value=BU(i[1]),t?HLe(e):bd(e)}function NU(e){let{text:t}=e;if(t[e.lastIndex]==="{"){let o={};for(e.lastIndex++,bd(e);t[e.lastIndex]!=="}";){MU(e);let n=e.value;if(t[e.lastIndex]!==":")throw new IU([":"],e.lastIndex);if(e.lastIndex++,bd(e),NU(e),o[n]=e.value,t[e.lastIndex]===",")e.lastIndex++,bd(e);else if(t[e.lastIndex]!=="}")throw new IU([",","}"],e.lastIndex)}e.lastIndex++,bd(e),e.value=o}else if(t[e.lastIndex]==="["){let o=[];for(e.lastIndex++,bd(e);t[e.lastIndex]!=="]";)if(NU(e),o.push(e.value),t[e.lastIndex]===",")e.lastIndex++,bd(e);else if(t[e.lastIndex]!=="]")throw new IU([",","]"],e.lastIndex);e.lastIndex++,bd(e),e.value=o}else if(t[e.lastIndex]==='"'||t[e.lastIndex]==="'"||t[e.lastIndex]==="`")MU(e);else if(/[-\d.]/.test(t[e.lastIndex]))Pne(e);else{if(Bne(e),!(e.value in Mne))throw new R1({code:"unknownJSONLiteral",args:[e.value],message:`Unknown literal '${e.value}'`,index:e.index});e.value=Mne[e.value]}}function Pne(e){let t=e.lastIndex;Cne.lastIndex=t;let o=Cne.exec(e.text);if(!o)throw new R1({code:"invalidNumber",message:"Invalid number",index:t});e.index=t,e.value=Number(o[0].trim()),e.lastIndex+=o[0].length}function WLe(e){Kh.lastIndex=e.lastIndex;let o=Kh.exec(e.text)[0].trim();if(!o)throw new R1({code:"missingValue",message:"Missing value",index:Kh.lastIndex});e.index=e.lastIndex,e.value=BU(o),e.lastIndex=Kh.lastIndex}function KLe(e){return ULe.test(e)}_ne.exports={eatLine:$Le,eatWhitespace:bd,parseChar:zLe,parseEOT:qLe,parseJSON:GLe,parseNumber:Pne,parseString:MU,parseStringToEnd:WLe,parseStringUnquoted:jLe,parseWord:Bne,unquote:BU,isValidVersion:KLe}});var Lne=Ro(Rne=>{d();Rne.URL=self.URL});var Fne=Ro((D4t,One)=>{d();One.exports=["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pt","pc","px","deg","grad","rad","turn","s","ms","Hz","kHz","dpi","dpcm","dppx","%"]});var $ne=Ro((N4t,Une)=>{d();function YLe(e){let t=Array(e);for(let o=0;o<e;o++)t[o]=o;return t}function QLe(e,t,o){let n=e.length,i=t.length;if(Math.abs(n-i)>o)return!1;let a=YLe(n+1),l=Array(n+1);for(let c=1;c<=i;c++){l[0]=c;let u=c;for(let m=1;m<=n;m++){let g=e[m-1]===t[c-1]?0:1,y=a[m]+1,b=l[m-1]+1,v=a[m-1]+g;l[m]=Math.min(y,b,v),l[m]<u&&(u=l[m])}if(u>o)return!1;let p=l;l=a,a=p}return a[n]<=o}Une.exports={LevenshteinDistanceWithMax:QLe}});var Vne=Ro((P4t,Jne)=>{"use strict";d();var{URL:ZLe}=Lne(),XLe=Fne(),{ParseError:Ni,MissingCharError:JLe}=DA(),{LevenshteinDistanceWithMax:VLe}=$ne(),{eatLine:eOe,eatWhitespace:tOe,parseEOT:oOe,parseJSON:Zne,parseString:RU,parseStringToEnd:Sc,parseStringUnquoted:nOe,parseWord:Hne,parseChar:rOe,isValidVersion:iOe}=PU(),sOe=new Set(XLe),aOe={name:Sc,version:Sc,namespace:Sc,author:Sc,description:Sc,homepageURL:Sc,supportURL:Sc,updateURL:Sc,license:Sc,preprocessor:Sc},lOe={version:pOe,homepageURL:_U,supportURL:_U,updateURL:_U},cOe={text:Sc,color:Sc,checkbox:rOe,select:qne,dropdown:{advanced:jne},image:{var:qne,advanced:jne},number:Gne,range:Gne},uOe={checkbox:mOe,number:Yne,range:Yne},dOe=["name","namespace","version"],zne=["default","min","max","step"];function Gne(e){Zne(e);let t={min:null,max:null,step:null,units:null};if(typeof e.value=="number")t.default=e.value;else if(Array.isArray(e.value)){let o=0;for(let n of e.value)if(typeof n=="string"){if(t.units!=null)throw new Ni({code:"invalidRangeMultipleUnits",message:"units is alredy defined",args:[e.type],index:e.valueIndex});t.units=n}else if(typeof n=="number"||n===null){if(o>=zne.length)throw new Ni({code:"invalidRangeTooManyValues",message:"the array contains too many values",args:[e.type],index:e.valueIndex});t[zne[o++]]=n}else throw new Ni({code:"invalidRangeValue",message:"value must be number, string, or null",args:[e.type],index:e.valueIndex})}else throw new Ni({code:"invalidRange",message:"the default value must be an array or a number",index:e.valueIndex,args:[e.type]});e.value=t.default,Object.assign(e.varResult,t)}function qne(e){if(Zne(e),typeof e.value!="object"||!e.value)throw new Ni({code:"invalidSelect",message:"The value must be an array or object"});let t=Array.isArray(e.value)?e.value.map(n=>Wne(n)):Object.keys(e.value).map(n=>Wne(n,e.value[n]));if(new Set(t.map(n=>n.name)).size<t.length)throw new Ni({code:"invalidSelectNameDuplicated",message:"Option name is duplicated"});if(t.length===0)throw new Ni({code:"invalidSelectEmptyOptions",message:"Option list is empty"});let o=t.filter(n=>n.isDefault);if(o.length>1)throw new Ni({code:"invalidSelectMultipleDefaults",message:"multiple default values"});t.forEach(n=>{delete n.isDefault}),e.varResult.options=t,e.value=(o.length>0?o[0]:t[0]).name}function jne(e){let t=e.lastIndex;if(e.text[e.lastIndex]!=="{")throw new JLe(["{"],t);let o=[];for(e.lastIndex++;e.text[e.lastIndex]!=="}";){let n={};nOe(e),n.name=e.value,RU(e),n.label=e.value,e.type==="dropdown"?oOe(e):RU(e),n.value=e.value,o.push(n)}if(e.lastIndex++,tOe(e),o.length===0)throw new Ni({code:"invalidSelectEmptyOptions",message:"Option list is empty",index:t});e.type==="dropdown"&&(e.varResult.type="select",e.type="select"),e.varResult.options=o,e.value=o[0].name}function Wne(e,t){if(typeof e!="string"||t&&typeof t!="string")throw new Ni({code:"invalidSelectValue",message:"Values in the object/array must be strings"});let o=!1;e.endsWith("*")&&(o=!0,e=e.slice(0,-1));let n,i=e.match(/^(\w+):(.*)/);if(i&&([,n,e]=i),n||(n=e),!e)throw new Ni({code:"invalidSelectLabel",message:"Option label is empty"});return t==null&&(t=n),{name:n,label:e,value:t,isDefault:o}}function Kne(e,t){if(t)try{e()}catch(o){t.push(o)}else e()}function pOe(e){if(!iOe(e.value))throw new Ni({code:"invalidVersion",args:[e.value],message:`Invalid version: ${e.value}`,index:e.valueIndex});e.value=fOe(e.value)}function _U(e){let t;try{t=new ZLe(e.value)}catch(o){throw o.args=[e.value],o.index=e.valueIndex,o}if(!/^https?:/.test(t.protocol))throw new Ni({code:"invalidURLProtocol",args:[t.protocol],message:`Invalid protocol: ${t.protocol}`,index:e.valueIndex})}function mOe(e){if(e.value!=="1"&&e.value!=="0")throw new Ni({code:"invalidCheckboxDefault",message:"value must be 0 or 1",index:e.valueIndex})}function Yne(e){let t=e.value;if(typeof t!="number")throw new Ni({code:"invalidRangeDefault",message:`the default value of @var ${e.type} must be a number`,index:e.valueIndex,args:[e.type]});let o=e.varResult;if(o.min!=null&&t<o.min)throw new Ni({code:"invalidRangeMin",message:"the value is smaller than the minimum",index:e.valueIndex,args:[e.type]});if(o.max!=null&&t>o.max)throw new Ni({code:"invalidRangeMax",message:"the value is larger than the maximum",index:e.valueIndex,args:[e.type]});if(o.step!=null&&[t,o.min,o.max].some(n=>n!=null&&!Xne(n,o.step)))throw new Ni({code:"invalidRangeStep",message:"the value is not a multiple of the step",index:e.valueIndex,args:[e.type]});if(o.units&&!sOe.has(o.units))throw new Ni({code:"invalidRangeUnits",message:`Invalid CSS unit: ${o.units}`,index:e.valueIndex,args:[e.type,o.units]})}function Xne(e,t){let o=Math.abs(e/t),n=Math.round(o);return Math.abs(o-n)<Math.pow(10,`${n}`.length-16)}function Qne({unknownKey:e="ignore",mandatoryKeys:t=dOe,parseKey:o,parseVar:n,validateKey:i,validateVar:s,allowErrors:a=!1}={}){if(!["ignore","assign","throw"].includes(e))throw new TypeError("unknownKey must be 'ignore', 'assign', or 'throw'");let l=Object.assign(Object.create(null),aOe,o),c=[...Object.keys(l),"advanced","var"],u=Object.assign({},cOe,n),p=Object.assign({},lOe,i),m=Object.assign({},uOe,s);return{parse:v,validateVar:g};function g(A){let C={key:"var",type:A.type,value:A.value,varResult:A};y(C)}function y(A){let C=typeof m[A.type]=="object"?m[A.type][A.key]:m[A.type];C&&C(A)}function b(A){let C={type:null,label:null,name:null,value:null,default:null,options:null};A.varResult=C,Hne(A),A.type=A.value,C.type=A.type;let I=typeof u[A.type]=="object"?u[A.type][A.key]:u[A.type];if(!I)throw new Ni({code:"unknownVarType",message:`Unknown @${A.key} type: ${A.type}`,args:[A.key,A.type],index:A.index});Hne(A),C.name=A.value,RU(A,!0),C.label=A.value,A.valueIndex=A.lastIndex,I(A),y(A),C.default=A.value,A.usercssData.vars||(A.usercssData.vars={}),A.usercssData.vars[C.name]=C,A.key==="advanced"&&(A.maybeUSO=!0)}function v(A){if(A.includes("\r"))throw new TypeError("metadata includes invalid character: '\\r'");let C={},I=[],N=/@([\w-]+)[^\S\r\n]*/gm,_={index:0,lastIndex:0,text:A,usercssData:C,warn:F=>I.push(F)},O;for(;O=N.exec(A);)_.index=O.index,_.lastIndex=N.lastIndex,_.key=O[1],_.shouldIgnore=!1,Kne(()=>{try{_.key==="var"||_.key==="advanced"?b(_):E(_)}catch(F){throw F.index===void 0&&(F.index=_.index),F}_.key!=="var"&&_.key!=="advanced"&&!_.shouldIgnore&&(C[_.key]=_.value)},a&&I),N.lastIndex=_.lastIndex;return _.maybeUSO&&!C.preprocessor&&(C.preprocessor="uso"),Kne(()=>{let F=t.filter(J=>!Object.prototype.hasOwnProperty.call(C,J)||!C[J]);if(F.length>0)throw new Ni({code:"missingMandatory",args:F,message:`Missing metadata: ${F.map(J=>`@${J}`).join(", ")}`})},a&&I),{metadata:C,errors:I}}function E(A){let C=l[A.key];if(!C)if(e==="assign")C=Sc;else{if(eOe(A),e==="ignore"){A.shouldIgnore=!0;return}let I=Math.log2(A.key.length),N=c.find(_=>VLe(_,A.key,I));throw new Ni({code:"unknownMeta",args:[A.key,N],message:`Unknown metadata: @${A.key}${N?`, did you mean @${N}?`:""}`,index:A.index})}A.valueIndex=A.lastIndex,C(A),p[A.key]&&p[A.key](A)}}function fOe(e){return e[0]==="v"||e[0]==="="?e.slice(1):e}Jne.exports={parse(e,t){return Qne(t).parse(e)},createParser:Qne,isMultipleOf:Xne}});var nre=Ro((R4t,ore)=>{d();function ere({alignKeys:e=!1,space:t=2,format:o="stylus",stringifyKey:n={},stringifyVar:i={}}={}){function s(a){let l;if(o==="stylus")l="var";else if(o==="xstyle")l="advanced";else throw new TypeError("options.format must be 'stylus' or 'xstyle'");let c=[];for(let p of Object.keys(a)){let m=a[p];if(Object.prototype.hasOwnProperty.call(n,p)){let g=n[p](m);Array.isArray(g)?c.push.apply(c,g.map(y=>[p,y])):c.push([p,g])}else if(p==="vars")for(let g of Object.values(m))c.push([l,gOe(g,o,i,t)]);else if(Array.isArray(m))for(let g of m)c.push([p,tre(g)]);else c.push([p,tre(m)])}let u=e?Math.max.apply(null,c.map(p=>p[0].length)):0;return`/* ==UserStyle==
${hOe(c.map(([p,m])=>`@${p.padEnd(u)} ${m}`).join(`
`))}
==/UserStyle== */`}return{stringify:s}}function gOe(e,t,o,n){return`${i()} ${e.name} ${JSON.stringify(e.label)} ${s()}`;function i(){return t==="xstyle"&&e.type==="select"?"dropdown":e.type}function s(){if(Object.prototype.hasOwnProperty.call(o,e.type))return o[e.type](e,t,n);if(e.options)return t==="stylus"?JSON.stringify(e.options.reduce((a,l)=>{let c=l.name===e.default?"*":"";return a[`${l.name}:${l.label}${c}`]=l.value,a},{}),null,n):xOe(e.options,e.type==="image",n);if(e.type==="text"&&t==="xstyle")return JSON.stringify(e.default);if(e.type==="number"||e.type==="range"){let a=[e.default,e.min,e.max,e.step];return e.units&&a.push(e.units),JSON.stringify(a)}return e.default}}function tre(e){return typeof e=="string"&&e.includes(`
`)?JSON.stringify(e):e}function hOe(e){return e.replace(/\*\//g,"*\\/")}function xOe(e,t=!1,o=0){let n=typeof o=="string"?o:" ".repeat(o);return`{
${e.map(s=>`${n}${s.name} ${JSON.stringify(s.label)} ${i(s.value)}`).join(`
`)}
}`;function i(s){return t?JSON.stringify(s):`<<<EOT
${s} EOT;`}}ore.exports={stringify(e,t){return ere(t).stringify(e)},createStringifier:ere}});var ire=Ro((O4t,rre)=>{d();var yOe=PU(),{ParseError:bOe}=DA(),{parse:vOe,createParser:SOe}=Vne(),{stringify:wOe,createStringifier:kOe}=nre();rre.exports={ParseError:bOe,util:yOe,parse:vOe,createParser:SOe,stringify:wOe,createStringifier:kOe}});async function are(e,t){let{metadata:o,errors:n}=(0,sre.parse)(e.replace(/\r/g,""),{allowErrors:!0,unknownKey:"assign"});n.length&&EOe.warn("Parsed",t,"with errors:",n);let i=o["vc-requiredPlugins"]?.split(",").map(s=>s.trim());return{...o,fileName:t,id:await AOe(o),requiredPlugins:i}}async function AOe(e){let t=new TextEncoder,o=t.encode(e.name),n=t.encode(e.namespace),i=new Uint8Array(await window.crypto.subtle.digest("SHA-256",o)),s=new Uint8Array(await window.crypto.subtle.digest("SHA-256",n)),a=await window.crypto.subtle.digest("SHA-256",new Uint8Array([...i,...s]));return window.btoa(String.fromCharCode(...new Uint8Array(a))).substring(0,43)}var sre,EOe,lre=x(()=>{"use strict";d();At();sre=Ml(ire()),EOe=new ke("UserCSS","#d2acf5")});var cre=x(()=>{});function ure({label:e,name:t,themeSettings:o}){function n(i){let s=i?"1":"0";o[t]=s}return r("section",null,r(fn,{title:e,key:t,className:COe("switch"),value:o[t]==="1",onChange:n,hideBorder:!0}))}var COe,dre=x(()=>{"use strict";d();cre();Qs();nt();COe=de("vc-settings-boolean-")});var pre=x(()=>{});function mre({label:e,name:t,themeSettings:o}){function n(s){let a="#"+(s?.toString(16).padStart(6,"0")??"000000");o[t]=a}let i=rt(()=>parseInt(TOe(o[t]).toHex(),16),[o[t]]);return r("section",null,r("div",{className:IOe("swatch-row")},r("span",null,e),r(si,{key:t,color:i,onChange:n})))}var TOe,IOe,fre=x(()=>{"use strict";d();pre();nt();fe();B();TOe=vt("this._gradientType="),IOe=de("vc-usercss-settings-color-")});function gre({label:e,name:t,themeSettings:o}){function n(i){o[t]=i}return r("section",null,r(re,null,e),r(qe,{type:"number",pattern:"-?[0-9]+",key:t,value:o[t],onChange:n}))}var hre=x(()=>{"use strict";d();ut();B()});function xre({label:e,name:t,default:o,min:n,max:i,step:s,themeSettings:a}){function l(u){let p=u.toString();a[t]=p}let c=rt(()=>{let u=[];for(let p=n??0;p<=(i??10);p+=s??1)u.push(p);return u},[n,i,s]);return r("section",null,r(re,null,e),r(Tr,{initialValue:parseInt(a[t],10),defaultValue:o,onValueChange:l,minValue:n,maxValue:i,markers:c,stickToMarkers:!0}))}var yre=x(()=>{"use strict";d();ut();B()});function bre({label:e,name:t,options:o,default:n,themeSettings:i}){function s(l){i[t]=l}let a=rt(()=>o.map(l=>({disabled:!1,key:l.name,value:l.value,default:n===l.name,label:l.label})),[o,n]);return r("section",null,r(re,null,e),r(to,{placeholder:e,key:t,options:a,closeOnSelect:!0,select:s,isSelected:l=>l===i[t],serialize:Nl}))}var vre=x(()=>{"use strict";d();ut();xt();B()});function Sre({label:e,name:t,themeSettings:o}){function n(i){o[t]=i}return r("section",null,r(re,null,e),r(qe,{key:t,value:o[t],onChange:n}))}var wre=x(()=>{"use strict";d();ut();B()});var kre=x(()=>{"use strict";d();dre();fre();hre();yre();vre();wre()});function DOe({themeSettings:e}){return r(Ue,{text:"Copy theme settings"},({onMouseLeave:t,onMouseEnter:o})=>r("div",{style:{cursor:"pointer"},onMouseEnter:o,onMouseLeave:t,onClick:()=>{$t(JSON.stringify(e),"Copied theme settings to clipboard.")}},r(ol,null)))}function MOe({themeSettings:e}){return r(Ue,{text:"Paste theme settings"},({onMouseLeave:t,onMouseEnter:o})=>r("div",{style:{cursor:"pointer"},onMouseEnter:o,onMouseLeave:t,onClick:async()=>{let n=(await navigator.clipboard.read())[0];if(!n)return Re("Your clipboard is empty.",D.Type.FAILURE);if(!n.types.includes("text/plain"))return Re("Your clipboard doesn't have valid settings data.",D.Type.FAILURE);try{var i=JSON.parse(await n.getType("text/plain").then(s=>s.text()))}catch{return Re("Your clipboard doesn't have valid settings data.",D.Type.FAILURE)}for(let[s,a]of Object.entries(i))Object.prototype.hasOwnProperty.call(e,s)&&(e[s]=a);Re("Pasted theme settings from clipboard.",D.Type.SUCCESS)}},r(qL,null)))}function NOe({themeSettings:e,themeId:t,close:o,onReset:n}){return r(Ue,{text:"Reset settings to default"},({onMouseLeave:i,onMouseEnter:s})=>r("div",{style:{cursor:"pointer"},onMouseEnter:s,onMouseLeave:i,onClick:()=>{o(),delete e[t],n()}},r(jL,null)))}function Ere({modalProps:e,theme:t,onSettingsReset:o}){let{userCssVars:n}=tn(["userCssVars"],!1),i=n[t.id],s=[];for(let[a,l]of Object.entries(t.vars))switch(l.type){case"text":{s.push(r(Sre,{label:l.label,name:a,themeSettings:i}));break}case"checkbox":{s.push(r(ure,{label:l.label,name:a,themeSettings:i}));break}case"color":{s.push(r(mre,{label:l.label,name:a,themeSettings:i}));break}case"number":{s.push(r(gre,{label:l.label,name:a,themeSettings:i}));break}case"select":{s.push(r(bre,{label:l.label,name:a,options:l.options,default:l.default,themeSettings:i}));break}case"range":{s.push(r(xre,{label:l.label,name:a,default:l.default,min:l.min,max:l.max,step:l.step,themeSettings:i}));break}}return r(Pe,{...e},r(je,{separator:!1},r(Y,{size:"lg",weight:"semibold",style:{flexGrow:1}},"Settings for ",t.name),r(Be,{style:{gap:4,marginRight:4},className:"vc-settings-usercss-ie-buttons"},r(DOe,{themeSettings:i}),r(MOe,{themeSettings:i}),r(NOe,{themeSettings:n,themeId:t.id,close:e.onClose,onReset:o})),r(Ut,{onClick:e.onClose})),r($e,null,r(Be,{flexDirection:"column",style:{gap:12,marginBottom:16}},s)))}var Are=x(()=>{"use strict";d();Q();Et();eo();ao();mt();at();B();kre()});function OOe({size:e}){let t=e==="sm"?16:24;return r("svg",{viewBox:"0 0 24 24",width:t,height:t,fill:"currentColor"},r("path",{d:"M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2z"}))}function FOe({size:e}){let t=e==="sm"?16:24;return r("svg",{viewBox:"0 0 24 24",width:t,height:t,fill:"currentColor"},r("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"}))}function HOe({link:e,onValidate:t}){let[o,n,i]=Cr(()=>fetch(e).then(a=>{if(a.status>300)throw`${a.status} ${a.statusText}`;let l=a.headers.get("Content-Type");if(!l?.startsWith("text/css")&&!l?.startsWith("text/plain"))throw t(!1),"Not a CSS file. Remember to use the raw link!";return t(!0),"Okay!"})),s=i?"Checking...":n?`Error: ${n instanceof Error?n.message:String(n)}`:"Valid!";return r(W,{style:{color:i?"var(--text-muted)":n?"var(--text-feedback-critical)":"var(--status-positive)"}},s)}function zOe({theme:e,enabled:t,onChange:o,onDelete:n,onSettingsReset:i}){let s=rt(()=>e.requiredPlugins?.filter(a=>!yt(a)),[e]);return r(jh,{name:e.name??"Unknown",description:e.description,author:e.author??"Unknown",enabled:t,setEnabled:o,disabled:s&&s.length>0,infoButton:r(f,null,s&&s.length>0&&r(Ue,{text:"The following plugins are required, but aren't enabled: "+s.join(", ")},({onMouseLeave:a,onMouseEnter:l})=>r("div",{style:{color:"var(--status-danger"},onMouseEnter:l,onMouseLeave:a},r(GL,null))),e.vars&&r("div",{style:{cursor:"pointer"},onClick:()=>Ee(a=>r(Ere,{modalProps:a,theme:e,onSettingsReset:i}))},r(u0,null)),r("div",{style:{cursor:"pointer",color:"var(--status-danger"},onClick:n},r($i,null))),footer:r(Be,{flexDirection:"row",gap:"0.4em",style:{alignItems:"center"}},!!e.homepageURL&&r(Go,{href:e.homepageURL},"Homepage"),!!(e.homepageURL&&e.supportURL)&&r("span",{style:{color:"var(--text-muted)"}},"\u2022"),!!e.supportURL&&r(Go,{href:e.supportURL},"Support"))})}function Tre({theme:e,enabled:t,onChange:o,onDelete:n,showDeleteButton:i,onEditName:s,disabled:a,onPin:l,isPinned:c,onRefresh:u,onOpenFolder:p,onCopyUrl:m,onDownload:g,themeLink:y,isLocal:b}){let v=E=>{Dt.openContextMenu(E,()=>r(M.Menu,{navId:"theme-card-menu",onClose:Dt.closeContextMenu},l&&r(M.MenuItem,{id:"pin-theme",label:c?"Unpin":"Pin",icon:Cre,action:l}),e.website&&r(M.MenuItem,{id:"open-website",label:"Open Website",icon:BOe,action:()=>window.open(e.website,"_blank")}),e.invite&&r(M.MenuItem,{id:"join-discord",label:"Join Discord",icon:ROe,action:()=>{Gi(e.invite).catch(()=>Re("Invalid or expired invite"))}}),m&&y&&r(M.MenuItem,{id:"copy-url",label:"Copy URL",icon:_Oe,action:m}),g&&r(M.MenuItem,{id:"download-theme",label:"Download",icon:LOe,action:g}),p&&r(M.MenuItem,{id:"open-folder",label:"Open in Folder",icon:uu,action:p}),u&&r(M.MenuItem,{id:"refresh-theme",label:"Refresh",icon:POe,action:u}),n&&r(f,null,r(M.MenuSeparator,null),r(M.MenuItem,{id:"delete-theme",label:"Delete",color:"danger",icon:$i,action:()=>n()}))))};return r(bne,{customName:e.customName,name:e.name,description:e.description,author:e.author,enabled:t,setEnabled:o,disabled:a,infoButton:r("div",{className:Yh("menu-button"),onClick:v},r(u0,null)),footer:r(Be,{flexDirection:"row",gap:"0.4em",alignItems:"center"},r(Ue,{text:b?"Local Theme":"Online Theme"},({onMouseLeave:E,onMouseEnter:A})=>r("div",{onMouseEnter:A,onMouseLeave:E,style:{color:"var(--text-muted)",display:"flex"}},b?r(OOe,{size:"sm"}):r(FOe,{size:"sm"}))),c&&r(Ue,{text:"Pinned"},({onMouseLeave:E,onMouseEnter:A})=>r("div",{onMouseEnter:A,onMouseLeave:E,className:Yh("footer-pin-icon")},r(Cre,{size:"xs"}))),!!e.website&&r(Go,{href:e.website},"Website"),!!(e.website&&e.invite)&&r("span",{style:{color:"var(--text-muted)"}},"\u2022"),!!e.invite&&r(Go,{href:`https://discord.gg/${e.invite}`,onClick:async E=>{E.preventDefault(),e.invite!=null&&Gi(e.invite).catch(()=>Re("Invalid or expired invite"))}},"Discord Server")),onEditName:s})}function GOe(){let e=tn(["themeLinks","enabledThemeLinks","enabledThemes","enableOnlineThemes","pinnedThemes"]),t=L(null)[1],[o,n]=L(""),[i,s]=L(!1),[a,l]=L(null),[c,u]=L(null),[p,m]=L(()=>e.themeNames??{}),[g]=Cr(VencordNative.themes.getThemesDir),[y,b]=L(""),[v,E]=L("all");se(()=>{A()},[]);async function A(){await C(),I(),F()}async function C(){e.themeLinks=e.themeLinks.map(ce=>ce.startsWith("https://discord-themes.com/api")?ce.replace("https://discord-themes.com/api","https://themes.equicord.org/api"):ce)}async function I(){let ce=await VencordNative.themes.getThemesList(),pe=[];for(let{fileName:xe,content:Ze}of ce)if(xe.endsWith(".css"))if("legcord"in window&&xe.endsWith(".user.css")){let ge=await are(Ze,xe);pe.push({type:"usercss",header:ge}),Ge.userCssVars[ge.id]??={};for(let[ae,Ne]of Object.entries(ge.vars??{})){let Fe="";switch(Ne.type){case"text":case"color":case"checkbox":Fe=Ne.default;break;case"select":Fe=Ne.options.find(Xe=>Xe.name===Ne.default).value;break;case"range":Fe=`${Ne.default}${Ne.units}`;break;case"number":Fe=String(Ne.default);break}Ge.userCssVars[ge.id][ae]??=Fe}}else pe.push({type:"other",header:IA(wne(Ze),xe)});l(pe)}function N(ce,pe){if(pe){if(e.enabledThemes.includes(ce))return;e.enabledThemes=[...e.enabledThemes,ce]}else e.enabledThemes=e.enabledThemes.filter(xe=>xe!==ce)}async function _(ce){if(ce.stopPropagation(),ce.preventDefault(),!ce.currentTarget?.files?.length)return;let{files:pe}=ce.currentTarget,xe=Array.from(pe,Ze=>{let{name:ge}=Ze;if(ge.endsWith(".css"))return new Promise((ae,Ne)=>{let Fe=new FileReader;Fe.onload=()=>{VencordNative.themes.uploadTheme(ge,Fe.result).then(ae).catch(Ne)},Fe.readAsText(Ze)})});await Promise.all(xe),I()}function O(ce){i&&(e.themeLinks.includes(ce)||(e.themeLinks=[...e.themeLinks,ce],n(""),F()))}async function F(){let ce=await Promise.all(e.themeLinks.map(async pe=>{try{let xe=await fetch(pe);if(!xe.ok)throw new Error(`Failed to fetch ${pe}`);let Ze=await xe.text();return{...IA(Ze,pe),link:pe}}catch(xe){return console.warn(`Theme fetch failed for ${pe}:`,xe),null}}));u(ce.filter(pe=>pe!==null))}function J(ce,pe){if(pe){if(e.enabledThemeLinks.includes(ce))return;e.enabledThemeLinks=[...e.enabledThemeLinks,ce]}else e.enabledThemeLinks=e.enabledThemeLinks.filter(xe=>xe!==ce)}function G(ce){e.themeLinks=e.themeLinks.filter(pe=>pe!==ce),e.pinnedThemes=e.pinnedThemes.filter(pe=>pe!==ce),F()}function te(ce){e.pinnedThemes.includes(ce)?e.pinnedThemes=e.pinnedThemes.filter(pe=>pe!==ce):e.pinnedThemes=[...e.pinnedThemes,ce]}async function K(ce){try{let pe=await fetch(ce);if(!pe.ok)throw new Error(`Failed to fetch ${ce}`);let xe=await pe.text(),Ze={...IA(xe,ce),link:ce};u(ge=>ge?.map(ae=>ae.link===ce?Ze:ae)??null),Re("Theme refreshed!",D.Type.SUCCESS)}catch{Re("Failed to refresh theme",D.Type.FAILURE)}}async function oe(ce,pe){try{let xe=await fetch(ce);if(!xe.ok)throw new Error(`Failed to fetch ${ce}`);let Ze=await xe.text(),ge=pe.replace(/[^a-z0-9]/gi,"-")+".css";{let ae=new Blob([Ze],{type:"text/css"}),Ne=URL.createObjectURL(ae),Fe=document.createElement("a");Fe.href=Ne,Fe.download=ge,Fe.click(),URL.revokeObjectURL(Ne)}}catch{Re("Failed to download theme",D.Type.FAILURE)}}let le=rt(()=>{let ce=[];for(let pe of c??[]){let xe=p[pe.link]??null;ce.push({type:"online",themeType:"other",name:xe??pe.name??pe.fileName,enabled:e.enabledThemeLinks.includes(pe.link),header:{...pe,customName:xe},link:pe.link})}for(let{type:pe,header:xe}of a??[]){let Ze=pe==="usercss"?xe.name??"Unknown":xe.name??xe.fileName;ce.push({type:"local",themeType:pe,name:Ze,enabled:e.enabledThemes.includes(xe.fileName),header:xe})}return ce},[c,a,p,e.enabledThemeLinks,e.enabledThemes]),he=rt(()=>{let ce=le;if(y.trim()){let xe=y.toLowerCase();ce=ce.filter(Ze=>Ze.name.toLowerCase().includes(xe))}switch(v){case"online":ce=ce.filter(xe=>xe.type==="online");break;case"local":ce=ce.filter(xe=>xe.type==="local");break;case"enabled":ce=ce.filter(xe=>xe.enabled);break;case"disabled":ce=ce.filter(xe=>!xe.enabled);break}let pe=xe=>xe.type==="online"?xe.link:xe.header.fileName;return ce.sort((xe,Ze)=>{let ge=pe(xe),ae=pe(Ze),Ne=e.pinnedThemes.indexOf(ge),Fe=e.pinnedThemes.indexOf(ae),Xe=Ne!==-1,It=Fe!==-1;return Xe&&!It?-1:!Xe&&It?1:Xe&&It?Ne-Fe:0}),ce},[le,y,v,e.pinnedThemes]),Ae=le.filter(ce=>ce.type==="local").length,Ce=le.filter(ce=>ce.type==="online").length,ye=le.filter(ce=>ce.enabled).length;return r(bi,null,r(qOe,null),r(re,{className:Z.top16},"Theme Management"),r(W,{className:Z.bottom16},"Customize Discord's appearance with themes. Add local .css files or load themes directly from URLs. Themes with a cog wheel icon have customizable settings you can modify."),r(re,null,"Quick Actions"),r(W,{className:Z.bottom16},"Shortcuts for managing your themes. Open your themes folder to add new themes, use QuickCSS for quick style tweaks, or reload themes after making changes."),r(Wh,null,r(Pa,{text:r("span",{style:{position:"relative"}},"Upload Theme",r(UOe,{ref:t,onChange:_,multiple:!0,filters:[{extensions:["css"]}]})),Icon:Am}),r(Pa,{text:"Load missing Themes",action:I,Icon:HS}),r(Pa,{text:"Edit QuickCSS",action:()=>VencordNative.quickCss.openEditor(),Icon:Cm}),Ge.plugins.ClientTheme.enabled&&r(Pa,{text:"Edit ClientTheme",action:()=>Rs(pt.ClientTheme),Icon:zS})),r(Bt,{className:Z.top20}),r(re,{className:Z.top20},"Online Themes"),r(W,{className:Z.bottom16},"Load themes directly from URLs instead of local files. Online themes auto-update when the source changes, so you always have the latest version without manual downloads."),r(fn,{title:"Enable Online Themes",description:"Toggle online theme loading. When disabled, all online themes will be turned off and you won't be able to add new ones.",value:e.enableOnlineThemes??!0,onChange:ce=>{e.enableOnlineThemes=ce,ce||(e.enabledThemeLinks=[])}}),r(ur.Info,{className:Z.bottom16,style:{width:"100%"}},"Looking for themes? Check out ",r(Go,{href:"https://betterdiscord.app/themes"},"BetterDiscord Themes")," or search on ",r(Go,{href:"https://github.com/search?q=discord+theme"},"GitHub"),'. When downloading from BetterDiscord, click "Download" and place the .theme.css file into your themes folder.'),r("div",{className:Yh("link-row")},r(qe,{placeholder:"https://example.com/theme.css",value:o,onChange:n,disabled:!(e.enableOnlineThemes??!0)}),r(Me,{onClick:()=>O(o),disabled:!i||!(e.enableOnlineThemes??!0)},"Add")),o&&r("div",{className:Z.top8},r(HOe,{link:o,onValidate:s})),r(Bt,{className:Z.top20}),r(re,{className:Z.top20},"Installed Themes"),r(W,{className:Z.bottom8},"Manage your themes here. Local themes load from your themes folder, online themes from URLs. Themes with a cog wheel icon have customizable settings."),r(W,{color:"text-subtle",className:Z.bottom16},le.length," theme",le.length!==1?"s":""," installed (",Ae," local, ",Ce," online) \xB7 ",ye," enabled"),r("div",{className:Yh("filter-row")},r(qe,{placeholder:"Search for a theme...",value:y,onChange:b}),r("div",null,r(to,{options:$Oe,select:E,isSelected:ce=>ce===v,serialize:ce=>ce}))),a===null?r(W,{color:"text-muted",className:Z.top16},"Loading themes..."):he.length===0?r(W,{color:"text-muted",className:Z.top16},le.length===0?"No themes installed yet. Add theme files to your themes folder or add an online theme above to get started.":"No themes match your search or filter criteria."):r("div",{className:me(Yh("grid"),Z.top16)},he.map(ce=>{if(ce.type==="online"){let xe=ce.header,Ze=!(e.enableOnlineThemes??!0);return r(Tre,{key:xe.link,theme:xe,enabled:ce.enabled,onChange:ge=>J(xe.link,ge),onDelete:()=>{J(xe.link,!1),G(xe.link)},showDeleteButton:!0,disabled:Ze,onPin:()=>te(xe.link),isPinned:e.pinnedThemes.includes(xe.link),themeLink:xe.link,onCopyUrl:()=>$t(xe.link,"Theme URL copied!"),onRefresh:()=>K(xe.link),onDownload:()=>oe(xe.link,xe.name??"theme"),isLocal:!1,onEditName:ge=>{let ae={...p,[xe.link]:ge};m(ae),e.themeNames={...e.themeNames,[xe.link]:ge}}})}if(ce.themeType==="usercss"){let xe=ce.header;return r(zOe,{key:xe.fileName,enabled:ce.enabled,onChange:Ze=>N(xe.fileName,Ze),onDelete:async()=>{N(xe.fileName,!1),await VencordNative.themes.deleteTheme(xe.fileName),I()},onSettingsReset:I,theme:xe})}let pe=ce.header;return r(Tre,{key:pe.fileName,enabled:ce.enabled,onChange:xe=>N(pe.fileName,xe),onDelete:async()=>{N(pe.fileName,!1),await VencordNative.themes.deleteTheme(pe.fileName),I()},showDeleteButton:!0,onPin:()=>te(pe.fileName),isPinned:e.pinnedThemes.includes(pe.fileName),onOpenFolder:void 0,onRefresh:I,isLocal:!0,theme:pe})})))}function qOe(){return null}var Cre,BOe,POe,_Oe,ROe,LOe,UOe,Yh,$Oe,E0,Ire=x(()=>{"use strict";d();lne();Wo();Q();Co();Ar();vc();eo();Qs();ut();ao();ts();gd();wt();fa();vne();EU();nt();mt();co();xt();at();yd();qo();kne();lre();rd();fe();B();AO();Ps();Are();Cre=De("1-.06-.63L6.16"),BOe=De("m2.4 8.4 8.38-6.46a2"),POe=De("M21 2a1 1 0 0 1 1 1v6"),_Oe=De("M16.32 14.72a1 1 0 0 1 0-1.41l2.51-2.51"),ROe=De("1.6 5.64-2.87"),LOe=De("1.42l3.3 3.3V3a1");UOe=An(e=>e.prototype?.activateUploadDialogue&&e.prototype.setRef),Yh=de("vc-settings-theme-"),$Oe=[{label:"Show All",value:"all"},{label:"Online Themes",value:"online"},{label:"Local Themes",value:"local"},{label:"Enabled",value:"enabled"},{label:"Disabled",value:"disabled"}];E0=Bi(GOe,"Themes")});var dl,L1=x(()=>{d();dl="d5e5ab26 (BetterVencord patchset built by 09c7a72)"});var FU={};Ao(FU,{UpdateLogger:()=>A0,changes:()=>O1,checkForUpdates:()=>vd,getRepo:()=>U1,isNewer:()=>LU,isOutdated:()=>Pw,maybePromptToUpdate:()=>_w,update:()=>F1,updateError:()=>OU});async function MA(e){let t=await e;if(t.ok)return t.value;throw OU=t.error,t.error}async function vd(){return O1=await MA(VencordNative.updater.getUpdates()),Pw=O1.length>0}async function F1(){if(!Pw)return!0;let e=await MA(VencordNative.updater.update());if(e&&(Pw=!1,!await MA(VencordNative.updater.rebuild())))throw new Error("The Build failed. Please try manually building the new update");return e}async function _w(e,t=!1){}var A0,Pw,LU,OU,O1,U1,wu=x(()=>{"use strict";d();L1();At();yd();A0=new ke("Updater","white"),Pw=!1,LU=!1;U1=()=>MA(VencordNative.updater.getRepo())});function Dre(){_w("Uh Oh! Failed to render this Page. However, there is an update available that might fix it. Would you like to update and restart now?")}var Mre=x(()=>{"use strict";d();wu()});function bi({children:e}){return r("section",{className:"vc-settings-tab"},e)}function Bi(e,t){return ee.wrap(e,{displayName:`${t}SettingsTab`,message:`Failed to render the ${t} tab. If this issue persists, try using the installer to reinstall!`,onError:UU})}function $1(e){try{Ee(Bi(t=>r(Pe,{...t,size:"medium"},r($e,{className:"vc-settings-modal"},r(Ut,{onClick:t.onClose,className:"vc-settings-modal-close"}),r(e,null))),e.displayName||"Settings Tab"))}catch{UU()}}var UU,H1=x(()=>{"use strict";d();tt();Mre();at();M1();UU=$m(Dre)});var Nre=x(()=>{});var Bre=x(()=>{"use strict";d();vc();wu();B()});function NA({repo:e,hash:t,disabled:o=!1}){return r(Go,{href:`${e}/commit/${t}`,disabled:o},t.slice(0,7))}var $U=x(()=>{"use strict";d();Co();fs();vc();eo();ts();wt();u1();co();yd();wu();B();Bre()});var HU={};Ao(HU,{updateMessage:()=>wc});function wc(e,t,o){let n=XE.getOrCreate(e);if(!n.has(t))return;let i=n.update(t,s=>o?s.merge(o):new s.constructor(s));XE.commit(i),Rt.emitChange()}var z1=x(()=>{"use strict";d();B()});var GU={};Ao(GU,{currentNotice:()=>Qh,nextNotice:()=>Pre,noticesQueue:()=>Rw,popNotice:()=>C0,showNotice:()=>ku});function C0(){zU.dismiss()}function Pre(){Qh=Rw.shift(),Qh&&zU.show(...Qh,"EquicordNotice")}function ku(e,t,o){let n=yO(e)?e:r(ee,{fallback:()=>"Error Showing Notice"},e);Rw.push(["GENERIC",n,t,o]),Qh||Pre()}var zU,Rw,Qh,T0=x(()=>{"use strict";d();tt();qo();fe();Ln(e=>e.show&&e.dismiss&&!e.suppressAll,e=>zU=e);Rw=[],Qh=null});var pl,I0=x(()=>{"use strict";d();pl=class{constructor(t=1/0){this.maxSize=t}queue=[];promise;next(){let t=this.queue.shift();t?this.promise=Promise.resolve().then(t).finally(()=>this.next()):this.promise=void 0}run(){this.promise||this.next()}push(t){this.size>=this.maxSize&&this.queue.shift(),this.queue.push(t),this.run()}unshift(t){this.size>=this.maxSize&&this.queue.pop(),this.queue.unshift(t),this.run()}get size(){return this.queue.length}}});var _re=x(()=>{});var BA,qU=x(()=>{"use strict";d();_re();Q();tt();xt();B();BA=ee.wrap(function({title:t,body:o,richBody:n,color:i,icon:s,onClick:a,onClose:l,image:c,permanent:u,className:p,dismissOnClick:m}){let{timeout:g,position:y}=tn(["notifications.timeout","notifications.position"]).notifications,[b,v]=L(!1),[E,A]=L(0),C=kt(Date.now()),I=kt(null);se(()=>{if(g===0||u)return;if(b){I.current===null&&(I.current=Date.now());return}if(I.current!==null){let O=Date.now()-I.current;C.current+=O,I.current=null}let _=setInterval(()=>{let O=Date.now()-C.current;O>=g?l():A(O)},10);return()=>clearInterval(_)},[g,b,u]);let N=E/g;return r("button",{className:me("vc-notification-root",p),style:y==="bottom-right"?{bottom:"1rem"}:{top:"3rem"},onClick:()=>{a?.(),m!==!1&&l()},onContextMenu:_=>{_.preventDefault(),_.stopPropagation(),l()},onMouseEnter:()=>v(!0),onMouseLeave:()=>v(!1)},r("div",{className:"vc-notification"},s&&r("img",{className:"vc-notification-icon",src:s,alt:""}),r("div",{className:"vc-notification-content"},r("div",{className:"vc-notification-header"},r("h2",{className:"vc-notification-title"},t),r("button",{className:"vc-notification-close-btn",onClick:_=>{_.preventDefault(),_.stopPropagation(),l()}},r("svg",{width:"24",height:"24",viewBox:"0 0 24 24",role:"img","aria-labelledby":"vc-notification-dismiss-title"},r("title",{id:"vc-notification-dismiss-title"},"Dismiss Notification"),r("path",{fill:"currentColor",d:"M18.4 4L12 10.4L5.6 4L4 5.6L10.4 12L4 18.4L5.6 20L12 13.6L18.4 20L20 18.4L13.6 12L20 5.6L18.4 4Z"})))),n??r("p",{className:"vc-notification-p"},o))),c&&r("img",{className:"vc-notification-img",src:c,alt:""}),g!==0&&!u&&r("div",{className:"vc-notification-progressbar",style:{width:`${(1-N)*100}%`,backgroundColor:i||"var(--brand-500)"}}))},{onError:({props:e})=>e.onClose()})});function PA(){Ee(e=>r(Pe,{...e,size:"medium"},r(je,null,r(Y,{size:"lg",weight:"semibold",style:{flexGrow:1}},"Notification Settings"),r(Ut,{onClick:e.onClose})),r($e,null,r(jOe,null))))}function jOe(){let e=tn(["notifications.*"]).notifications;return r("div",{style:{padding:"1em 0"}},r(re,null,"Notification Style"),e.useNative!=="never"&&Notification?.permission==="denied"&&r(Mi,{style:{padding:"1em"},className:Z.bottom8},r(re,null,"Desktop Notification Permission denied"),r(W,null,"You have denied Notification Permissions. Thus, Desktop notifications will not work!")),r(W,{className:Z.bottom8},"Some plugins may show you notifications. These come in two styles:",r("ul",null,r("li",null,r("strong",null,"Equicord Notifications"),": These are in-app notifications"),r("li",null,r("strong",null,"Desktop Notifications"),": Native Desktop notifications (like when you get a ping)"))),r(to,{placeholder:"Notification Style",options:[{label:"Only use Desktop notifications when Discord is not focused",value:"not-focused",default:!0},{label:"Always use Desktop notifications",value:"always"},{label:"Always use Equicord notifications",value:"never"}],closeOnSelect:!0,select:t=>e.useNative=t,isSelected:t=>t===e.useNative,serialize:Nl}),r(re,{className:Z.top16+" "+Z.bottom8},"Notification Position"),r(to,{isDisabled:e.useNative==="always",placeholder:"Notification Position",options:[{label:"Bottom Right",value:"bottom-right",default:!0},{label:"Top Right",value:"top-right"}],select:t=>e.position=t,isSelected:t=>t===e.position,serialize:Nl}),r(re,{className:Z.top16+" "+Z.bottom8},"Missed Notification Count"),r(fn,{title:"When refocusing discord a notification will popup with how you missed",value:e.missed,onChange:t=>e.missed=t}),r(re,{className:Z.top16+" "+Z.bottom8},"Notification Timeout"),r(W,{className:Z.bottom16},"Set to 0s to never automatically time out"),r(Tr,{disabled:e.useNative==="always",markers:[0,1e3,2500,5e3,1e4,2e4],minValue:0,maxValue:2e4,initialValue:e.timeout,onValueChange:t=>e.timeout=t,onValueRender:t=>(t/1e3).toFixed(2)+"s",onMarkerRender:t=>t/1e3+"s",stickToMarkers:!1}),r(re,{className:Z.top16+" "+Z.bottom8},"Notification Log Limit"),r(W,{className:Z.bottom16},"The amount of notifications to save in the log until old ones are removed. Set to ",r("code",null,"0")," to disable Notification log and ",r("code",null,"\u221E")," to never automatically remove old Notifications"),r(Tr,{markers:[0,25,50,75,100,200],minValue:0,maxValue:200,stickToMarkers:!0,initialValue:e.logLimit,onValueChange:t=>e.logLimit=t,onValueRender:t=>t===200?"\u221E":t,onMarkerRender:t=>t===200?"\u221E":t}))}var jU=x(()=>{"use strict";d();Lw();Q();Et();Co();vc();eo();Qs();ut();wt();co();xt();at();B()});var Rre,Lre=x(()=>{d();Rre="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"});var Ore,Fre=x(()=>{d();Lre();Ore=(e=21)=>{let t="",o=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+=Rre[o[e]&63];return t}});async function $re(e){if(e.noPersist)return;let t=Ge.notifications.logLimit;t!==0&&(await iu(_A,o=>{let n=o??[],{onClick:i,onClose:s,richBody:a,permanent:l,noPersist:c,dismissOnClick:u,...p}=e;return n.unshift({...p,timestamp:Date.now(),id:Ore()}),n.length>t&&t!==200&&(n.length=t),n}),Ow.forEach(o=>o()))}async function WOe(e){let t=await Ure(),o=t.findIndex(n=>n.timestamp===e);o!==-1&&(t.splice(o,1),await Gt(_A,t),Ow.forEach(n=>n()))}function KOe(){let[e,t]=f0(s=>s+1,0);se(()=>(Ow.add(t),()=>void Ow.delete(t)),[]);let[o,n,i]=Cr(Ure,{fallbackValue:[],deps:[e]});return[o,i]}function YOe({data:e}){let[t,o]=L(!1);return r("div",{className:M0("wrapper",{removing:t})},r(BA,{...e,permanent:!0,dismissOnClick:!1,onClose:()=>{t||(o(!0),setTimeout(()=>WOe(e.timestamp),200))},richBody:r("div",{className:M0("body-wrapper")},r("div",{className:M0("body")},e.body),r(Di,{timestamp:new Date(e.timestamp),className:M0("timestamp")}))}))}function QOe({log:e,pending:t}){return!e.length&&!t?r("div",{className:M0("container")},r("div",{className:M0("empty")}),r(W,{style:{textAlign:"center"}},"No notifications yet")):r(kO,{className:M0("container"),sections:[e.length],sectionHeight:0,rowHeight:120,renderSection:()=>null,renderRow:o=>r(YOe,{data:e[o.row],key:e[o.row].id})})}function ZOe({modalProps:e,close:t}){let[o,n]=KOe();return r(Pe,{...e,size:"large",className:M0("modal")},r(je,null,r(Y,{size:"lg",weight:"semibold",style:{flexGrow:1}},"Notification Log"),r(Ut,{onClick:t})),r("div",{style:{width:"100%"}},r(QOe,{log:o,pending:n})),r(ht,null,r(Be,null,r(U,{onClick:PA},"Notification Settings"),r(U,{disabled:o.length===0,color:U.Colors.RED,onClick:()=>{go.show({title:"Are you sure?",body:`This will permanently remove ${o.length} notification${o.length===1?"":"s"}. This action cannot be undone.`,async onConfirm(){await Gt(_A,[]),Ow.forEach(i=>i())},confirmText:"Do it!",confirmColor:"vc-notification-log-danger-btn",cancelText:"Nevermind"})}},"Clear Notification Log"))))}function D0(){let e=Ee(t=>r(ZOe,{modalProps:t,close:()=>vo(e)}))}var _A,Ure,M0,Ow,Lw=x(()=>{"use strict";d();vn();Q();Et();eo();wt();jU();nt();at();qo();B();Fre();qU();_A="notification-log",Ure=async()=>await zt(_A)??[],M0=de("vc-notification-log-"),Ow=new Set});function VOe(){if(!WU){let e=document.createElement("div");e.id="vc-notification-container",document.body.append(e),WU=Ms(e)}return WU}function eFe(e,t){let o=VOe();return new Promise(n=>{o.render(r(BA,{key:t,...e,onClose:()=>{e.onClose?.(),o.render(null),n()}}))})}function tFe(){if(typeof Notification>"u")return!1;let{useNative:e}=Ge.notifications;return e==="always"?!0:e==="not-focused"?!document.hasFocus():!1}async function Hre(){return Notification.permission==="granted"||Notification.permission!=="denied"&&await Notification.requestPermission()==="granted"}async function qt(e){if($re(e),tFe()&&await Hre()){let{title:t,body:o,icon:n,image:i,onClick:s=null,onClose:a=null}=e,l=new Notification(t,{body:o,icon:n,image:i});l.onclick=s,l.onclose=a,Pl.isFocused()||Fw++}else XOe.push(()=>eFe({...e,onClose:()=>{e.onClose?.(),Pl.isFocused()||Fw++}},JOe++))}var XOe,WU,JOe,Fw,zre=x(()=>{"use strict";d();Q();I0();B();qU();Lw();XOe=new pl,JOe=42,Fw=0;window.addEventListener("focus",()=>{let{missed:e,timeout:t,useNative:o}=Ge.notifications;e&&Fw>0&&t>0&&o==="never"&&(qt({title:"While you were away",body:`${Fw} notifications received`,onClick:()=>D0()}),Fw=0)})});var KU={};Ao(KU,{requestPermission:()=>Hre,showNotification:()=>qt});var _a=x(()=>{"use strict";d();zre()});var QU={};Ao(QU,{ServerListRenderPosition:()=>N0,addServerListElement:()=>kc,removeServerListElement:()=>Ec,renderAll:()=>iFe});function YU(e){switch(e){case 0:return nFe;case 1:return oFe;case 2:return rFe}}function kc(e,t){YU(e).add(t)}function Ec(e,t){YU(e).delete(t)}var N0,oFe,nFe,rFe,iFe,B0=x(()=>{"use strict";d();tt();N0=(n=>(n[n.Above=0]="Above",n[n.In=1]="In",n[n.Below=2]="Below",n))(N0||{}),oFe=new Set,nFe=new Set,rFe=new Set;iFe=e=>Array.from(YU(e),(t,o)=>r(ee,{noop:!0,key:o},r(t,null)))});var ZU={};Ao(ZU,{initQuickCssThemeStore:()=>sFe});async function qre(e){G1?G1.disabled=!e:e&&(G1=gc("vencord-custom-css",kw),VencordNative.quickCss.addChangeListener(t=>{G1.textContent=t,G1.disabled=!Ge.useQuickCss,Wre()}),G1.textContent=await VencordNative.quickCss.get())}async function Uw(){Gre??=gc("vencord-themes",kw);let{enabledThemeLinks:e,enabledThemes:t}=Ge,{ThemeStore:o}=(HO(),hh(moe)),n=o==null?void 0:o.theme==="light"?"light":"dark",i=e.map(s=>{let a=/^@(light|dark) (.*)/.exec(s);if(!a)return s;let[,l,c]=a;return l===n?c:null}).filter(s=>s!==null);for(let s of t){let a=await VencordNative.themes.getThemeData(s);if(!a)continue;let l=new Blob([a],{type:"text/css"});i.push(URL.createObjectURL(l))}Gre.textContent=i.map(s=>`@import url("${s.trim()}");`).join(`
`),Wre()}function jre(e,t){if(!e?.document||t==="DISCORD_OutOfProcessOverlay")return;let o=e.document;o.querySelector("vencord-root")?.remove(),o.documentElement.appendChild(D1.cloneNode(!0))}function Wre(){if(x0)for(let e of x0.getWindowKeys())jre(x0.getWindow(e),e)}function sFe(e){Uw();let t=e.theme;e.addChangeListener(()=>{t!==e.theme&&(t=e.theme,Uw())})}var G1,Gre,Kre=x(()=>{"use strict";d();Q();nt();B();ps();document.addEventListener("DOMContentLoaded",()=>{Uw(),qre(Ge.useQuickCss),Tn.addChangeListener("useQuickCss",qre),Tn.addChangeListener("enabledThemeLinks",Uw),Tn.addChangeListener("enabledThemes",Uw),window.addEventListener("message",e=>{let{discordPopoutEvent:t}=e.data||{};t?.type==="loaded"&&jre(x0.getWindow(t.key),t.key)})},{once:!0})});var JU={};Ao(JU,{UserSettings:()=>XU,getUserSetting:()=>Yre,getUserSettingLazy:()=>nr});function Yre(e,t){if(!yt("UserSettingsAPI"))throw new Error("Cannot use UserSettingsAPI without setting it as a dependency.");for(let o in XU){let n=XU[o];if(n.userSettingsAPIGroup===e&&n.userSettingsAPIName===t)return n}}function nr(e,t){return _n(()=>Yre(e,t))}var XU,Ra=x(()=>{"use strict";d();Is();At();fe();Wo();XU=fr(()=>{let e=sp('"textAndImages","renderSpoilers"');return e==null?new ke("UserSettingsAPI").error("Didn't find settings module."):Bo(e)})});var VU={};Ao(VU,{AudioPlayer:()=>EFe,Badges:()=>RA,ChatButtons:()=>yFe,Commands:()=>cFe,ContextMenu:()=>xFe,DataStore:()=>Oe,HeaderBar:()=>bFe,MemberListDecorators:()=>fFe,MessageAccessories:()=>uFe,MessageDecorations:()=>mFe,MessageEvents:()=>aFe,MessagePopover:()=>dFe,MessageUpdater:()=>vFe,NicknameIcons:()=>kFe,Notices:()=>lFe,Notifications:()=>$w,PluginManager:()=>Iw,ServerList:()=>pFe,Settings:()=>gFe,Styles:()=>hFe,Themes:()=>wFe,UserArea:()=>AFe,UserSettings:()=>SFe,isEquicord:()=>CFe});var aFe,lFe,cFe,Oe,uFe,dFe,RA,pFe,mFe,fFe,gFe,hFe,$w,xFe,yFe,bFe,vFe,SFe,wFe,kFe,EFe,AFe,CFe,dr=x(()=>{"use strict";d();Ol();A1();ma();yi();Un();vn();Hm();yF();ww();kF();vu();hA();z1();OF();T0();_a();Gh();Wo();B0();Q();ps();Kre();Ra();aFe=MF,lFe=GU,cFe=fF,Oe=Pr,uFe=bF,dFe=BF,RA=gU,pFe=QU,mFe=wF,fFe=xF,gFe=tF,hFe=HF,$w=KU,xFe=aF,yFe=cF,bFe=nU,vFe=HU,SFe=JU,wFe=ZU,kFe=LF,EFe=ZF,AFe=sU,CFe=!0});function IFe(e){if(!e)return null;try{let t=e.replace(/^git\+/,""),o=new URL(t);if(!o.hostname.endsWith("github.com"))return null;let n=o.pathname.replace(/\.git$/,"").split("/").filter(Boolean);return n.length<2?null:`${n[0]}/${n[1]}`}catch{return null}}async function DFe(e,t,o){if(!e||typeof fetch!="function")return[];try{let n=await fetch(`${TFe}/${e}/compare/${t}...${o}`,{headers:{Accept:"application/vnd.github+json","Cache-Control":"no-cache"}});if(!n.ok)return[];let i=await n.json();return!i||!Array.isArray(i.commits)?[]:i.commits.map(s=>{let l=(s?.commit?.message??"").split(`
`)[0]||"No message",c=s?.commit?.author?.name||s?.author?.login||"Unknown",u=s?.commit?.author?.date?Date.parse(s.commit.author.date):void 0;return{hash:s?.sha||"",author:c,message:l,timestamp:Number.isNaN(u)?void 0:u}})}catch(n){return console.warn("Failed to fetch commits between hashes",n),[]}}function MFe(e){let t=new Set,o=n=>{n!=null&&t.add(typeof n=="string"?n:String(n))};return e instanceof Set||e instanceof Map||Array.isArray(e)?e.forEach(o):typeof e=="string"?o(e):e&&typeof e=="object"&&Object.values(e).forEach(o),t}function NFe(e){let t=new Map,o=(n,i)=>{n!=null&&t.set(String(n),MFe(i))};return e?e instanceof Map?(e.forEach((n,i)=>o(i,n)),t):Array.isArray(e)?(e.forEach(n=>{Array.isArray(n)&&n.length>0&&o(n[0],n[1])}),t):(typeof e=="object"&&Object.entries(e).forEach(([n,i])=>o(n,i)),t):t}function BFe(e){return Object.fromEntries(Array.from(e.entries()).map(([t,o])=>[t,Array.from(o)]))}async function e$(e){await Oe.set(o$,BFe(e))}function Xre(e){return e&&typeof e.get=="function"&&typeof e.size=="number"}function Hw(e){return e?Xre(e)?e.size:Object.keys(e).length:0}function n$(e){return e?Xre(e)?Array.from(e.entries()):Object.entries(e):[]}async function OA(){let e=await Oe.get(LA);return e&&e.forEach(t=>{t.newSettings&&!(t.newSettings instanceof Map)&&(t.newSettings=new Map(Object.entries(t.newSettings)))}),e||[]}async function r$(e,t,o,n,i=!1){let s=await OA(),a=await i$(),l=dl;if(i){let g=await $A(),y=e.length>0?e[0].hash:l;if(g===y)return}if(!i&&e.length===0&&t.length===0&&o.length===0&&Hw(n)===0)return;let c=i?"repository_fetch":"update",u=l,p=l;i?e.length>0&&(p=e[0].hash):(u=a||"unknown",p=l);let m={id:crypto.randomUUID(),timestamp:Date.now(),fromHash:u,toHash:p,commits:e,newPlugins:t,updatedPlugins:o,newSettings:Hw(n)>0?Object.fromEntries(n):void 0,type:c};if(s.unshift(m),s.length>50&&s.splice(50),await Oe.set(LA,s),!i)await Jre(l);else{let g=e.length>0?e[0].hash:l;await _Fe(g)}await eie(),await nie()}async function i$(){return await Oe.get(t$)}async function Jre(e){await Oe.set(t$,e)}async function Vre(){let e=await Oe.get(Qre);return new Set(e||[])}async function eie(){let e=Object.keys(pt);await Oe.set(Qre,e)}function PFe(e){let t=pt[e]?.settings?.def||{};return new Set(Object.keys(t).filter(o=>o!=="enabled"))}function s$(e){return new Map(e.map(t=>[t,PFe(t)]))}async function tie(){let e=await Oe.get(o$);if(e===void 0){let o=await Vre(),n=[...new Set([...Object.keys(pt),...Array.from(o)])],i=s$(n);return await e$(i),i}let t=NFe(e);return(e instanceof Map||Array.isArray(e)||e&&typeof e=="object"&&Object.values(e).some(o=>o instanceof Set||o instanceof Map))&&await e$(t),t}async function a$(){let e=s$(Object.keys(pt)),t=await tie(),o=new Map;return e.forEach((n,i)=>{let s=t.get(i);if(!s)return;let a=[...n].filter(l=>!s.has(l));a.length>0&&o.set(i,a)}),o}async function oie(e){let t=await i$();if(!t||t==="unknown"||t===dl)return[];let o=IFe(e);return o?DFe(o,t,dl):[]}async function nie(){let e=s$(Object.keys(pt)),t=await tie(),o=new Map;new Set([...e.keys(),...t.keys()]).forEach(n=>{o.set(n,new Set([...t.get(n)||[],...e.get(n)||[]]))}),await e$(o)}async function FA(){let e=Object.keys(pt),t=await Vre();return e.filter(o=>!t.has(o)&&!pt[o].hidden&&!pt[o].required)}async function UA(){return[]}async function rie(){await Oe.del(LA),await Oe.del(t$),await Oe.del(o$)}async function iie(e){let o=(await OA()).filter(n=>n.id!==e);await Oe.set(LA,o)}async function sie(){await i$()||(await Jre(dl),await eie(),await nie())}async function $A(){return await Oe.get(Zre)}async function _Fe(e){await Oe.set(Zre,e)}function aie(e){let t=new Date(e),n=new Date().getTime()-t.getTime(),i=Math.floor(n/(1e3*60)),s=Math.floor(n/(1e3*60*60)),a=Math.floor(n/(1e3*60*60*24));return i<60?`${i} minute${i!==1?"s":""} ago`:s<24?`${s} hour${s!==1?"s":""} ago`:a<7?`${a} day${a!==1?"s":""} ago`:t.toLocaleDateString()}var LA,t$,Qre,o$,Zre,TFe,lie=x(()=>{"use strict";d();dr();L1();Ps();LA="EquicordChangelog_History",t$="EquicordChangelog_LastSeenHash",Qre="EquicordChangelog_KnownPlugins",o$="EquicordChangelog_KnownSettings",Zre="EquicordChangelog_LastRepoCheck",TFe="https://api.github.com/repos"});var cie=x(()=>{});var Sd,l$=x(()=>{d();Sd="Vendicated/Vencord"});var P0,H9t,z9t,Zh=x(()=>{"use strict";d();L1();l$();P0=dl.slice(0,7),H9t=`Equicord/${dl}${Sd?` (https://github.com/${Sd})`:""}`,z9t=`Equicord${Sd?` (https://github.com/${Sd})`:""}`});var uie=x(()=>{});function Eu(e){return typeof e=="string"?e:e?null:"Invalid input provided"}function ci({tag:e="div",name:t,description:o,error:n,inlineSetting:i,children:s}){return r(e,{className:Xh("section")},r("div",{className:me(Xh("content"),i&&Xh("inline"))},r("div",{className:Xh("label")},t&&r(Y,{className:Xh("title"),size:"md",weight:"medium"},Nm(YS(t))),o&&r(Y,{className:Xh("description"),size:"sm"},o)),s),n&&r(Y,{className:Xh("error"),size:"sm"},n))}var Xh,xp=x(()=>{"use strict";d();Et();nt();xt();Da();Xh=de("vc-plugins-setting-")});function die({option:e,pluginSettings:t,definedSettings:o,id:n,onChange:i}){let s=t[n]??e.default,[a,l]=L(s??!1),[c,u]=L(null);function p(m){let g=e.isValid?.call(o,m)??!0;l(m),u(Eu(g)),g===!0&&i(m)}return r(ci,{tag:"label",name:n,description:e.description,error:c,inlineSetting:!0},r(os,{checked:a,onChange:p,disabled:e.disabled?.call(o)??!1}))}var pie=x(()=>{"use strict";d();Im();B();xp()});function mie({option:e,onChange:t}){return e.component({setValue:t,option:e})}var fie=x(()=>{"use strict";d()});function c$({option:e,pluginSettings:t,definedSettings:o,id:n,onChange:i}){function s(m){return e.type===2?BigInt(m):Number(m)}let[a,l]=L(`${t[n]??e.default??0}`),[c,u]=L(null);function p(m){let g=e.isValid?.call(o,m)??!0;u(Eu(g)),g===!0&&i(s(m)),e.type===1&&BigInt(m)>=RFe?l(`${Number.MAX_SAFE_INTEGER}`):l(m)}return r(ci,{name:n,description:e.description,error:c},r(qe,{type:"number",pattern:"-?[0-9]+",placeholder:e.placeholder??"Enter a number",value:a,onChange:p,disabled:e.disabled?.call(o)??!1,...e.componentProps}))}var RFe,gie=x(()=>{"use strict";d();$();B();xp();RFe=BigInt(Number.MAX_SAFE_INTEGER)});function hie({option:e,pluginSettings:t,definedSettings:o,onChange:n,id:i}){let s=t[i]??e.options?.find(m=>m.default)?.value,[a,l]=L(s??null),[c,u]=L(null);function p(m){let g=e.isValid?.call(o,m)??!0;l(m),u(Eu(g)),g===!0&&n(m)}return r(ci,{name:i,description:e.description,error:c},r(to,{placeholder:e.placeholder??"Select an option",options:e.options,maxVisibleItems:5,closeOnSelect:!0,select:p,isSelected:m=>m===a,serialize:m=>String(m),isDisabled:e.disabled?.call(o)??!1,...e.componentProps}))}var xie=x(()=>{"use strict";d();B();xp()});function yie({option:e,pluginSettings:t,definedSettings:o,id:n,onChange:i}){let s=t[n]??e.default,[a,l]=L(null);function c(u){let p=e.isValid?.call(o,u)??!0;l(Eu(p)),p===!0&&i(u)}return r(ci,{name:n,description:e.description,error:a},r(Tr,{markers:e.markers,minValue:e.markers[0],maxValue:e.markers[e.markers.length-1],initialValue:s,onValueChange:c,onValueRender:u=>String(u.toFixed(2)),stickToMarkers:e.stickToMarkers??!0,disabled:e.disabled?.call(o)??!1,...e.componentProps}))}var bie=x(()=>{"use strict";d();B();xp()});function vie({option:e,pluginSettings:t,definedSettings:o,id:n,onChange:i}){let[s,a]=L(t[n]??e.default??null),[l,c]=L(null);function u(p){let m=e.isValid?.call(o,p)??!0;a(p),c(Eu(m)),m===!0&&i(p)}return r(ci,{name:n,description:e.description,error:l},e.multiline?r(cp,{placeholder:e.placeholder??"Enter a value",value:s,onChange:u,disabled:e.disabled?.call(o)??!1,...e.componentProps}):r(qe,{type:"text",placeholder:e.placeholder??"Enter a value",value:s,onChange:u,maxLength:null,disabled:e.disabled?.call(o)??!1,...e.componentProps}))}var Sie=x(()=>{"use strict";d();B();xp()});var HA,u$=x(()=>{"use strict";d();uie();$();pie();fie();gie();xie();bie();Sie();HA={0:vie,1:c$,2:c$,3:die,4:hie,5:yie,6:mie,7:()=>null}});var wie=x(()=>{});function zA({text:e,href:t}){return r(Me,{variant:"secondary",size:"small",style:{gap:4},onClick:()=>VencordNative.native.openExternal(t)},r(QL,{width:16,height:16}),e)}function GA({text:e,href:t}){return r(Me,{variant:"secondary",size:"small",style:{gap:4},onClick:()=>VencordNative.native.openExternal(t)},r(l1,{width:16,height:16}),e)}var d$=x(()=>{"use strict";d();Co();ao()});function wd(e){Ee(t=>r(Pe,{...t},r(ee,null,r(LFe,{user:e}))))}function LFe({user:e}){tn();let t=Je([gr],()=>gr.getUserProfile(e.id));se(()=>{!t&&!e.bot&&e.id&&dp(e.id)},[e.id,e.bot,t]);let o=t?.connectedAccounts?.find(l=>l.type==="github")?.name,n=t?.connectedAccounts?.find(l=>l.type==="domain")?.name,i=rt(()=>{let l=Object.values(pt);return(s0[e.id]||a0[e.id]?l.filter(u=>u.authors.includes(s0[e.id]||a0[e.id])):l.filter(u=>Kr[u.name]?.userPlugin&&u.authors.some(p=>p.id.toString()===e.id)||u.authors.some(p=>p.name===e.username))).filter(u=>!u.name.endsWith("API")).sort((u,p)=>Number(u.required??!1)-Number(p.required??!1))},[e.id,e.username]),s=r(Go,{href:"https://github.com/Equicord/Equicord"},"contributed"),a=n||o;return r(f,null,r($e,{className:q1("root")},r("div",{className:q1("header")},r("img",{className:q1("avatar"),src:e.getAvatarURL(void 0,512,!0),alt:""}),r(Jo,{className:q1("name")},e.username)),i.length?r(W,null,e.username," has ",s," to ",RL(i.length,"plugin"),"!"):r(W,null,e.username," has not made any plugins. They likely ",s," in other ways!"),!!i.length&&r("div",{className:q1("plugins")},i.map(l=>r($l,{key:l.name,plugin:l,disabled:l.required??!1,onRestartNeeded:()=>Re("Restart to apply changes!")})))),a&&r(ht,null,r("div",{className:q1("links")},n&&r(zA,{text:n,href:`https://${n}`}),o&&r(GA,{text:o,href:`https://github.com/${o}`}))))}var q1,p$=x(()=>{"use strict";d();wie();Q();tt();ut();ts();wt();H();nt();mt();xt();at();B();Ps();d$();j1();q1=de("vc-author-modal-")});function f$(e){let t=new $Fe({username:e.username,id:e.id??Lh(),avatar:e.avatar,bot:!0});return V.dispatch({type:"USER_UPDATE",user:t}),t}function kie({plugin:e,onRestartNeeded:t,onClose:o,transitionState:n}){let i=tn([`plugins.${e.name}.*`]).plugins[e.name],s=!!(i&&e.options&&!a1(e.options)),a=rt(()=>[f$({username:"Loading...",id:"-1465912127305809920"})],[]),[l,c]=L([]);se(()=>{(async()=>{for(let[b,v]of e.authors.slice(0,6).entries())try{let E=v.id?await as.getUser(String(v.id)).catch(()=>f$({username:v.name})):f$({username:v.name});c(A=>[...A,E])}catch{continue}})()},[e.authors]);function u(){g$(e,t)}function p(){if(!s||!e.options)return r(W,null,"There are no settings for this plugin.");let b=Object.entries(e.options).map(([v,E])=>{if(E.type===7||E.hidden)return null;function A(I){let N=e.options?.[v];!N||N.type===7||(i[v]=I,N.restartNeeded&&t(v))}let C=HA[E.type];return r(ee,{noop:!0,key:v},r(C,{id:v,option:E,onChange:rn(A),pluginSettings:i,definedSettings:e.settings}))});return r("div",{className:"vc-plugins-settings"},b)}function m(b){let v=e.authors.slice(6);return r(Ue,{text:v.map(E=>E.name).join(", ")},({onMouseEnter:E,onMouseLeave:A})=>r("div",{className:m$.moreUsers,onMouseEnter:E,onMouseLeave:A},"+",v.length))}let g=Kr[e.name],y=g.folderName.startsWith("src/equicordplugins/")??!1;return r(Pe,{transitionState:n,size:"medium"},r(je,{separator:!1,className:jm("header")},r("div",{className:jm("header-content")},r(Y,{size:"lg",weight:"semibold",className:jm("title")},e.name),r(Y,{size:"sm",className:jm("description")},e.description),!!e.settingsAboutComponent&&r("div",{className:Z.top8},r(ee,{message:"An error occurred while rendering this plugin's custom Info Component"},r(e.settingsAboutComponent,null)))),r("div",{className:jm("header-trailing")},r(OFe,{onClick:o}))),r($e,{className:"vc-settings-modal-content"},r("section",null,r(Y,{size:"lg",weight:"semibold",color:"text-strong",className:Z.bottom8},"Authors"),r("div",{style:{width:"fit-content"}},r(ee,{noop:!0},r(ud,{users:l.length?l:a,guildId:void 0,renderIcon:!1,showDefaultAvatarsForNullUsers:!0,renderMoreUsers:m,renderUser:b=>r(en,{className:m$.clickableAvatar,onClick:()=>y?wd(b):wd(b)},r("img",{className:m$.avatar,src:b.getAvatarURL(void 0,80,!0),alt:b.username,title:b.username}))})))),r("section",null,r(Y,{size:"lg",weight:"semibold",color:"text-strong",className:me(Z.top16,Z.bottom8)},"Settings"),p())),r(ht,null,r(Be,{flexDirection:"column",style:{width:"100%"}},r(Be,{style:{justifyContent:"space-between",alignItems:"center"}},s?r(Ue,{text:"Reset to default settings",shouldShow:!a1(i)},({onMouseEnter:b,onMouseLeave:v})=>r(Me,{className:jm("disable-warning"),size:"small",variant:"primary",onClick:u,onMouseEnter:b,onMouseLeave:v},"Reset")):r("div",null),!g.userPlugin&&r("div",{className:jm("links")},r(zA,{text:"Website",href:y?`https://equicord.org/plugins/${e.name}`:`https://vencord.dev/plugins/${e.name}`}),r(GA,{text:"Source Code",href:`https://github.com/${Sd}/tree/main/${g.folderName}`}))))))}function Rs(e,t){Ee(o=>r(kie,{...o,plugin:e,onRestartNeeded:n=>t?.(e.name,n)}))}function HFe(e,t){let o=e.settings?.def,n=e.name;if(!o)return;let i={},s=!1;for(let l in o){if(l==="enabled")continue;let c=o[l];c.type=c.type??0,c.type===0?i[l]=c.default!==void 0&&c.default!==""?c.default:"":"default"in c&&c.default!==void 0&&(i[l]=c.default),c?.restartNeeded&&(s=!0)}let a=e.settings?.store;a&&Object.assign(a,i),s&&t?.(e.name),D.show({message:`Settings for ${n} have been reset.`,id:D.genId(),type:D.Type.SUCCESS,options:{position:D.Position.TOP}})}function g$(e,t,o=!0,n,i){Ee(s=>r(FFe,{...s,className:jm("confirm"),header:o?"Reset Settings":"Disable Plugins",confirmText:o?"Reset":"Disable All",cancelText:"Cancel",onConfirm:()=>{o&&e?HFe(e,t):i?.()},onCancel:s.onClose},r(W,null,o?r(f,null,"Are you sure you want to reset all settings for ",r("strong",null,e?.name)," to their default values?"):`Are you sure you want to disable ${n} plugins?`),r("div",{className:me(Z.top16,jm("warning"))},r(UFe,{color:"var(--text-feedback-critical)"}),r("span",null,"This action cannot be undone."))))}var jm,m$,OFe,FFe,UFe,$Fe,qA=x(()=>{"use strict";d();cie();yi();Q();Et();Co();tt();eo();wt();la();Zh();nt();Is();co();xt();at();$();fe();B();Ps();u$();p$();d$();jm=de("vc-plugin-modal-"),m$=et("moreUsers","avatar","clickableAvatar"),OFe=De("CLOSE_BUTTON_LABEL"),FFe=De('parentComponent:"ConfirmModal"'),UFe=De("3.15H3.29c-1.74"),$Fe=_n(()=>z.getCurrentUser().constructor)});function $l({plugin:e,disabled:t,onRestartNeeded:o,onMouseEnter:n,onMouseLeave:i,isNew:s}){let a=Ge.plugins[e.name],l=Kr[e.name],c=l.folderName.startsWith("src/equicordplugins/")??!1,u=l.folderName.startsWith("src/plugins/")??!1,p=l?.userPlugin??!1,m=e.isModified??!1,g=()=>yt(e.name);function y(){let C=g();if(!C){let{restartNeeded:N,failures:_}=N1(e);if(_.length){zFe.error(`Failed to start dependencies for ${e.name}: ${_.join(", ")}`),ku("Failed to start dependencies: "+_.join(", "),"Close",()=>null);return}if(N){a.enabled=!0,o(e.name,"enabled");return}}if(AA(e)){a.enabled=!C,o(e.name,"enabled");return}if(C&&!e.started){a.enabled=!C;return}if(!(C?qm(e):Gm(e))){a.enabled=!1;let N=`Error while ${C?"stopping":"starting"} plugin ${e.name}`;Re(N,D.Type.FAILURE,{position:D.Position.BOTTOM});return}a.enabled=!C}let v=[{condition:m,src:"https://equicord.org/assets/icons/equicord/modified.png",alt:"Modified",title:"Modified Vencord Plugin"},{condition:c,src:"https://equicord.org/assets/favicon.png",alt:"Equicord",title:"Equicord Plugin"},{condition:u,src:"https://equicord.org/assets/icons/vencord/icon-light.png",alt:"Vencord",title:"Vencord Plugin"},{condition:p,src:"https://equicord.org/assets/icons/misc/userplugin.png",alt:"User",title:"User Plugin"}].find(C=>C.condition),E=v?r("img",{src:v.src,alt:v.alt,className:jA("source")}):null,A=v?.title||"Unknown Plugin";return r(jh,{name:e.name,sourceBadge:E,tooltip:A,description:e.description,isNew:s,enabled:g(),setEnabled:y,disabled:t,onMouseEnter:n,onMouseLeave:i,infoButton:r("button",{role:"switch",onClick:()=>Rs(e,o),className:jA("info-button")},e.settings?.def&&Object.values(e.settings.def).some(C=>C.type!==7&&!C.hidden)?r(u0,{className:jA("info-icon")}):r(cu,{className:jA("info-icon")}))})}var zFe,jA,j1=x(()=>{"use strict";d();T0();Wo();ao();xU();nt();At();$();B();Jh();Ps();qA();zFe=new ke("PluginCard"),jA=de("vc-plugins-")});var Wm,zw=x(()=>{"use strict";d();Wm=class{set=new Set;get changeCount(){return this.set.size}get hasChanges(){return this.changeCount>0}handleChange(t){this.set.delete(t)||this.set.add(t)}add(t){return this.set.add(t)}remove(t){return this.set.delete(t)}getChanges(){return this.set.values()}map(t){return[...this.getChanges()].map(t)}}});function Eie({newPlugins:e,onPluginToggle:t}){let o=tn(),n=X.useMemo(()=>new Wm,[]),i=Vo(),s=X.useMemo(()=>{let u={};for(let p in pt){let m=pt[p].dependencies;if(m)for(let g of m)u[g]??=[],u[g].push(p)}return u},[]),a=u=>u.map(p=>pt[p]).filter(p=>p&&!p.hidden).sort((p,m)=>p.name.localeCompare(m.name)),l=X.useMemo(()=>a(e),[e]);if(l.length===0)return null;let c=u=>u?r(X.Fragment,null,r(W,null,"This plugin is required by:"),u.map(p=>r(W,{key:p,className:"vc-changelog-dep-text"},p))):null;return r("div",{className:W1("new-plugins-section")},r(re,{className:Z.bottom8},"New Plugins (",l.length,")"),r(W,{className:Z.bottom16},"The following plugins have been added in recent updates:"),r("div",{className:W1("new-plugins-grid")},l.map(u=>{let p=u.required||s[u.name]?.some(g=>o.plugins[g].enabled)||u.name.endsWith("API"),m=u.required?"This plugin is required for Equicord to function.":c(s[u.name]?.filter(g=>o.plugins[g].enabled));return p?r(Ue,{text:m,key:u.name},({onMouseLeave:g,onMouseEnter:y})=>r(cn,{className:W1("new-plugin-card","required")},r($l,{onMouseLeave:g,onMouseEnter:y,onRestartNeeded:b=>{n.handleChange(b),i()},disabled:!0,plugin:u,isNew:!0}))):r(cn,{key:u.name,className:W1("new-plugin-card")},r($l,{onRestartNeeded:g=>{n.handleChange(g),i()},disabled:!1,plugin:u,isNew:!0}))})),n.hasChanges&&r("div",{className:W1("restart-notice")},r(Ue,{text:r(f,null,"The following plugins require a restart:",r("div",{className:Z.bottom8}),r("ul",null,n.map(u=>r("li",{key:u},u))))},u=>r(Me,{...u,variant:"link",size:"small",onClick:()=>location.reload(),className:Z.top16},"Restart Required"))))}function GFe({pluginName:e,depMap:t,settings:o}){let n=pt[e];if(!n||n.hidden)return null;let i=n.required||t[n.name]?.some(a=>o.plugins[a].enabled),s=n.required?"This plugin is required for Equicord to function.":t[n.name]?.length>0?`This plugin is required by: ${t[n.name]?.filter(a=>o.plugins[a].enabled).join(", ")}`:null;return r("div",{className:`vc-changelog-entry ${i?"required":""}`},r("div",{className:"vc-changelog-entry-header"},r("span",{className:"vc-changelog-entry-hash"},n.name,i&&" *"),r("span",{className:"vc-changelog-entry-author"},n.authors?.[0]?.name||"Unknown")),r("div",{className:"vc-changelog-entry-message"},n.description||"No description available"),s&&r("div",{className:"vc-changelog-dep-text"},s))}function WA({newPlugins:e,maxDisplay:t=20}){let o=tn(),n=X.useMemo(()=>{let a={};for(let l in pt){let c=pt[l].dependencies;if(c)for(let u of c)a[u]??=[],a[u].push(l)}return a},[]);if(e.length===0)return null;let i=e.slice(0,t),s=e.length>t;return r("div",{className:W1("new-plugins-compact")},r("div",{className:"vc-changelog-plugins-list"},i.map(a=>r(GFe,{key:a,pluginName:a,depMap:n,settings:o})),s&&r("div",{className:"vc-changelog-entry"},r("div",{className:"vc-changelog-entry-message"},"+",e.length-t," more plugins"))))}var W1,Aie=x(()=>{"use strict";d();Q();Co();fs();ut();wt();j1();zw();nt();co();qo();B();Ps();W1=de("vc-changelog-")});function Cie({entry:e,repo:t,repoPending:o}){return r(cn,{className:"vc-changelog-entry"},r("div",{style:{display:"flex",flexDirection:"column",gap:"0.25em"}},r("div",{className:"vc-changelog-entry-header"},r("code",{className:"vc-changelog-entry-hash"},r(NA,{repo:t,hash:e.hash,disabled:o})),r("span",{className:"vc-changelog-entry-author"},"by ",e.author)),r("div",{className:"vc-changelog-entry-message"},e.message)))}function qFe({log:e,repo:t,repoPending:o,isExpanded:n,onToggleExpand:i,onClearLog:s}){let a=e.type==="repository_fetch"||e.type===void 0&&e.fromHash===e.toHash&&e.commits.length===0,l=e.fromHash===e.toHash;return r(cn,{className:"vc-changelog-log"},r("div",{className:"vc-changelog-log-header",onClick:i},r("div",{className:"vc-changelog-log-info"},r("div",{className:"vc-changelog-log-title"},r("span",null,a?l?`Repository check: ${e.fromHash.slice(0,7)} (up to date)`:`Repository check: ${e.fromHash.slice(0,7)} \u2192 ${e.toHash.slice(0,7)}`:`Update: ${e.fromHash.slice(0,7)} \u2192 ${e.toHash.slice(0,7)}`),r(Me,{size:"min",variant:"secondary",className:"vc-changelog-delete-button",style:{padding:"4px",color:"var(--status-danger)",opacity:.6,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},onClick:c=>{c.stopPropagation(),s(e.id)}},r($i,{width:16,height:16}))),r("div",{className:"vc-changelog-log-meta"},aie(e.timestamp),e.commits.length>0&&` \u2022 ${e.commits.length} commits available`,e.commits.length===0&&" \u2022 No new commits",e.newPlugins.length>0&&` \u2022 ${e.newPlugins.length} new plugins`,e.updatedPlugins.length>0&&` \u2022 ${e.updatedPlugins.length} updated plugins`,e.newSettings&&Hw(e.newSettings)>0&&` \u2022 ${n$(e.newSettings).reduce((c,[,u])=>c+u.length,0)} new settings`)),r("div",{className:`vc-changelog-log-toggle ${n?"expanded":""}`},"\u25BC")),n&&r("div",{className:"vc-changelog-log-content"},e.newPlugins.length>0&&r("div",{className:"vc-changelog-log-plugins"},r(WA,{newPlugins:e.newPlugins,maxDisplay:50})),e.updatedPlugins.length>0&&r("div",{className:"vc-changelog-log-plugins"},r(re,{className:Z.bottom8},"Updated Plugins"),r(WA,{newPlugins:e.updatedPlugins,maxDisplay:50})),e.newSettings&&Hw(e.newSettings)>0&&r("div",{className:"vc-changelog-log-plugins"},r(re,{className:Z.bottom8},"New Settings"),r("div",{className:"vc-changelog-new-plugins-list"},n$(e.newSettings).map(([c,u])=>u.map(p=>r("span",{key:`${c}-${p}`,className:"vc-changelog-new-plugin-tag",title:`New setting in ${c}`},c,".",p))))),e.commits.length>0&&r("div",{className:"vc-changelog-log-commits"},r("div",{className:"vc-changelog-log-commits-list"},e.commits.map(c=>r(Cie,{key:c.hash,entry:c,repo:t,repoPending:o}))))))}function jFe(){let[e,t,o]=Cr(U1,{fallbackValue:"Loading..."}),[n,i]=X.useState([]),[s,a]=X.useState([]),[l,c]=X.useState([]),[u,p]=X.useState([]),[m,g]=X.useState(!0),[y,b]=X.useState(null),[v,E]=X.useState(new Set),[A,C]=X.useState(!1),[I,N]=X.useState(!1);X.useEffect(()=>{(async()=>{try{await sie(),await _()}catch(oe){console.error("Failed to initialize changelog:",oe)}})()},[]),X.useEffect(()=>{t&&(A0.error("Failed to retrieve repo",t),b("Failed to retrieve repository information"))},[t]);let _=X.useCallback(async()=>{try{let K=await OA();a(K)}catch(K){console.error("Failed to load changelog history:",K)}},[]),O=X.useCallback(async()=>{try{let K=await FA(),oe=await UA();c(K),p(oe)}catch(K){console.error("Failed to load new plugins:",K)}},[]),F=X.useCallback(async()=>{if(o||t)return!1;let K=e;if(!K)return!1;try{let oe=await oie(K);if(oe.length===0)return!1;let le=await FA(),he=await UA(),Ae=await a$();return await r$(oe,le,he,Ae),i(oe),c(le),p(he),await _(),!0}catch(oe){return console.error("Failed to log local update:",oe),!1}},[e,t,o,_]);X.useEffect(()=>{!o&&!t&&(async()=>{try{let oe=await $A(),le=await VencordNative.updater.getUpdates();if(le.ok){let he=le.value.length>0?le.value[0].hash:dl;N(oe===he)}}catch{N(!1)}})()},[o,t]);let J=X.useCallback(async()=>{if(!(o||t)){g(!0),b(null);try{let K=await VencordNative.updater.getUpdates(),oe=await $A(),le=K.ok&&K.value.length>0?K.value[0].hash:dl;if(oe===le){g(!1),N(!0),await F()||(i([]),D.show({message:"Already up to date with repository",id:D.genId(),type:D.Type.MESSAGE,options:{position:D.Position.BOTTOM}}));return}if(K.ok&&K.value)if(K.value.length>0){i(K.value);let he=await FA(),Ae=await UA(),Ce=await a$();c(he),p(Ae),await r$(K.value,he,Ae,Ce,!0),await _(),N(!0),D.show({message:`Found ${K.value.length} commit${K.value.length===1?"":"s"} from repository`,id:D.genId(),type:D.Type.SUCCESS,options:{position:D.Position.BOTTOM}})}else{let he=await F();N(!0),D.show({message:he?"Logged commits from your latest update":"Repository is up to date with your local copy",id:D.genId(),type:he?D.Type.SUCCESS:D.Type.MESSAGE,options:{position:D.Position.BOTTOM}}),he||i([])}else if(!K.ok)throw new Error(K.error?.message||"Failed to fetch from repository")}catch(K){A0.error("Failed to fetch commits from repository",K);let oe=K?.message||"Failed to connect to repository. Check your internet connection.";b(oe),D.show({message:"Could not fetch commits from repository",id:D.genId(),type:D.Type.FAILURE,options:{position:D.Position.BOTTOM}})}finally{g(!1)}}},[o,t,O,_]);X.useEffect(()=>{(async()=>{!o&&!t?(await O(),await F()?g(!1):await J()):o||(await O(),g(!1))})()},[o,t,J,O,F]);let G=K=>{let oe=new Set(v);oe.has(K)?oe.delete(K):oe.add(K),E(oe)},te=n.length>0||l.length>0||u.length>0;return r(f,null,r(re,{className:Z.top16},"Fetch Changes"),r(W,{className:Z.bottom16},"Check the repository for new commits, plugin updates, and code changes. This will compare your current version with the latest available and show you what's new."),r("div",{className:"vc-changelog-controls"},r(Me,{size:"small",disabled:m||o||!!t,onClick:J,variant:I?"positive":"primary"},m?"Loading...":I?"Repository Up to Date":"Fetch from Repository"),s.length>0&&r(f,null,r(Me,{size:"small",variant:A?"primary":"secondary",onClick:()=>C(!A),style:{marginLeft:"8px"}},A?"Hide Logs":"Show Logs"),r(Me,{size:"small",variant:"dangerPrimary",onClick:()=>{go.show({title:"Clear All Logs",body:"Are you sure you would like to clear all logs? This can't be undone.",confirmText:"Clear All",confirmColor:"danger",cancelText:"Cancel",onConfirm:async()=>{await rie(),await _(),C(!1),D.show({message:"All logs have been cleared",id:D.genId(),type:D.Type.SUCCESS,options:{position:D.Position.BOTTOM}})}})},style:{marginLeft:"8px"}},"Clear All Logs"))),y&&r(Mi,{style:{padding:"1em",marginTop:"1em"}},r(W,null,y),r(W,{color:"text-subtle",style:{marginTop:"0.5em"}},"Make sure you have an internet connection and try again.")),r(Bt,{className:Z.top20}),r(re,{className:Z.top20},"Repository"),r(W,{className:Z.bottom8},"This is the GitHub repository where Equicord fetches updates from."),r(W,{color:"text-subtle"},o?e:t?"Failed to retrieve - check console":r(Go,{href:e},e.split("/").slice(-2).join("/"))," ","(",r(NA,{repo:e,hash:dl,disabled:o}),")"),te&&r(f,null,r(Bt,{className:Z.top20}),r(re,{className:Z.top20},"Recent Changes"),r(W,{className:Z.bottom16},"These are the new commits and plugin updates since your last version. You can see what features were added, bugs were fixed, and which plugins received updates."),l.length>0&&r("div",{className:Z.bottom16},r(Eie,{newPlugins:l,onPluginToggle:()=>{}})),u.length>0&&r("div",{className:Z.bottom16},r(re,{className:Z.bottom8},"Updated Plugins (",u.length,")"),r(WA,{newPlugins:u})),n.length>0&&r("div",null,r(re,{className:Z.bottom8},"Code Changes (",n.length," ",n.length===1?"commit":"commits",")"),r("div",{className:"vc-changelog-commits-list"},n.map(K=>r(Cie,{key:K.hash,entry:K,repo:e,repoPending:o}))))),!te&&!m&&!y&&r(f,null,r(Bt,{className:Z.top20}),r(re,{className:Z.top20},"Recent Changes"),r(W,{color:"text-subtle"},'No commits available ahead of your current version. Click "Fetch from Repository" to check for new changes.')),A&&s.length>0&&r(f,null,r(Bt,{className:Z.top20}),r(re,{className:Z.top20},"Update Logs (",s.length," ",s.length===1?"log":"logs",")"),r(W,{className:Z.bottom16},"A history of your previous update sessions with their commit history and plugin changes. Click on a log to expand it and see the details."),r("div",{className:"vc-changelog-history-list"},s.map(K=>r(qFe,{key:K.id,log:K,repo:e,repoPending:o,isExpanded:v.has(K.id),onToggleExpand:()=>G(K.id),onClearLog:oe=>{go.show({title:"Clear Log",body:"Are you sure you would like to clear this log? This can't be undone.",confirmText:"Clear Log",confirmColor:"danger",cancelText:"Cancel",onConfirm:async()=>{await iie(oe),await _(),E(new Set(Array.from(v).filter(le=>le!==oe))),D.show({message:"Log has been cleared",id:D.genId(),type:D.Type.SUCCESS,options:{position:D.Position.BOTTOM}})}})}})))))}function WFe(){return r(bi,null,r(jFe,null))}var Gw,Tie=x(()=>{"use strict";d();Nre();Co();fs();Ar();vc();ut();ao();ts();wt();H1();$U();co();qo();wu();B();L1();lie();Aie();Gw=Bi(WFe,"Changelog")});function Hl(e){return r("div",{className:Iie.markup},Jt.defaultRules.codeBlock.react(e,null,{}))}function KFe({children:e}){return r("span",{className:Iie.markup},r("code",{className:"inline"},e))}var Iie,_0=x(()=>{"use strict";d();fe();B();Iie=et("markup","codeContainer")});var Die=x(()=>{"use strict";d();wt();B()});var Mie=x(()=>{"use strict";d();ut();wt();co();ad();Da();B()});var Nie=x(()=>{"use strict";d();Qs();ut();wt();co();B()});var NTt,Bie,Pie=x(()=>{"use strict";d();Co();_0();Ar();eo();ut();wt();H1();u1();la();mt();co();Da();fe();B();Die();Mie();Nie();NTt=rn(function({find:e,setModule:t,setError:o}){let n=f1(e),i=Object.keys(n),s=i.length;s===0?o("No match. Perhaps that module is lazy loaded?"):s!==1?o("Multiple matches. Please refine your filter"):t([i[0],n[i[0]]])}),Bie=null});var h$=x(()=>{});function R0(e){return!!e}function kd(e){return e!=null}var Km=x(()=>{"use strict";d()});function _ie({totalStockPlugins:e,enabledStockPlugins:t}){return r("div",{className:"vc-plugin-stats vc-stockplugins-stats-card"},r("div",{className:"vc-plugin-stats-card-container"},r("div",{className:"vc-plugin-stats-card-section"},r(Y,{size:"md",weight:"semibold"},"Enabled Plugins"),r(Y,{size:"xl",weight:"bold"},t)),r("div",{className:"vc-plugin-stats-card-divider"}),r("div",{className:"vc-plugin-stats-card-section"},r(Y,{size:"md",weight:"semibold"},"Total Plugins"),r(Y,{size:"xl",weight:"bold"},e))))}function Rie({totalUserPlugins:e,enabledUserPlugins:t}){return e===0?r("div",{className:"vc-plugin-stats vc-stockplugins-stats-card"},r("div",{className:"vc-plugin-stats-card-container "},r("div",{className:"vc-plugin-stats-card-section"},r(Y,{size:"md",weight:"semibold"},"Total Userplugins"),r(Ue,{text:r("img",{src:"https://discord.com/assets/ab6835d2922224154ddf.svg",style:{width:"40px",height:"40px"}})},o=>r("span",{style:{display:"inline",position:"relative"}},r(Y,{size:"xl",weight:"bold",...o},e)))))):r("div",{className:"vc-plugin-stats vc-stockplugins-stats-card"},r("div",{className:"vc-plugin-stats-card-container"},r("div",{className:"vc-plugin-stats-card-section"},r(Y,{size:"md",weight:"semibold"},"Enabled Userplugins"),r(Y,{size:"xl",weight:"bold"},t)),r("div",{className:"vc-plugin-stats-card-divider"}),r("div",{className:"vc-plugin-stats-card-section"},r(Y,{size:"md",weight:"semibold"},"Total Userplugins"),r(Y,{size:"xl",weight:"bold"},e))))}var Lie=x(()=>{"use strict";d();h$();Et();B()});var Oie=x(()=>{});function Uie(){return r(en,{onClick:()=>Ee(e=>r(YFe,{...e}))},r(cn,{className:Vh("button"),defaultPadding:!0},r("div",{className:Vh("button-description")},r(W,{size:"md",weight:"semibold"},"Manage plugin UI elements"),r(W,{size:"xs"},"Allows you to hide buttons you don't like")),r("svg",{className:Vh("button-arrow"),"aria-hidden":"true",viewBox:"0 0 24 24"},r("path",{fill:"currentColor",d:"M9.3 5.3a1 1 0 0 0 0 1.4l5.29 5.3-5.3 5.3a1 1 0 1 0 1.42 1.4l6-6a1 1 0 0 0 0-1.4l-6-6a1 1 0 0 0-1.42 0Z"}))))}function Fie(e){let{buttonMap:t,description:o,title:n,settings:i}=e,s=Array.from(t,([a,{icon:l}])=>{let c=l??ZL;return r(W,{size:"md",weight:"semibold",key:a,className:Vh("switches-row")},r(c,{height:20,width:20}),a,r(os,{checked:i[a]?.enabled??!0,onChange:u=>{i[a]??={},i[a].enabled=u}}))});return r("section",null,r(Y,{tag:"h3",size:"xl",weight:"bold"},n),r(W,{size:"sm",className:me(Z.top8,Z.bottom20)},o),r("div",{className:Vh("switches")},s.length===0&&r(W,{weight:"medium",className:Vh("switches-row"),style:{color:"var(--text-muted)"}},"Buttons of enabled plugins will appear here."),s))}function YFe(e){let{uiElements:t}=tn(["uiElements.*"]);return r(Pe,{...e,size:"medium"},r($e,{className:Vh("modal-content")},r(Fie,{title:"Chatbar Buttons",description:"These are the buttons on the right side of the chat input bar",buttonMap:Rh,settings:t.chatBarButtons}),r(Fie,{title:"Message Popover Buttons",description:"These are the floating buttons on the right when you hover over a message",buttonMap:T1,settings:t.messagePopoverButtons})))}var Vh,$ie=x(()=>{"use strict";d();Oie();ma();hA();Q();Et();fs();ao();wt();Im();nt();co();xt();at();B();Vh=de("vc-plugin-ui-elements-")});function ZFe(e){D.show({message:e,type:D.Type.FAILURE,id:D.genId(),options:{position:D.Position.BOTTOM}})}function XFe({required:e,enabledPlugins:t,openWarningModal:o,resetCheckAndDo:n}){return r(cn,{className:me(Ym("info-card"),e&&"vc-warning-card")},e?r(f,null,r(Vn,null,"Restart required!"),r(W,{className:Ym("dep-text")},"Restart now to apply new plugins and their settings"),r(Me,{variant:"primary",className:Ym("restart-button"),onClick:()=>location.reload()},"Restart")):r(f,null,r(Vn,null,"Plugin Management"),r(W,null,"Press the cog wheel or info icon to get more info on a plugin"),r(W,null,"Plugins with a cog wheel have settings you can modify!")),t.length>0&&!e&&r(Me,{variant:"secondary",size:"small",className:"vc-plugins-disable-warning vc-modal-align-reset",onClick:()=>o(null,void 0,!1,t.length,n)},"Disable All Plugins"))}function JFe({search:e}){let t=e?Object.entries(jw).filter(([o])=>o.toLowerCase().includes(e)):[];return r(W,{className:Z.top16},t.length?r(f,null,r(W,null,"Are you looking for:"),r("ul",null,t.map(([o,n])=>r("li",{key:o},r("b",null,o),": Only available on the ",x$[n])))):"No plugins meet the search criteria.")}function L0(){let e=tn(),t=X.useMemo(()=>new Wm,[]);X.useEffect(()=>()=>{if(!t.hasChanges)return;let Ce=[...t.getChanges()],ye=[...new Set(Ce.map(Ze=>Ze.split(":")[0]))],pe=ye.slice(0,15),xe=ye.length-pe.length;go.show({title:"Restart required",body:r("div",null,pe.map((Ze,ge)=>r("span",{key:ge},ge>0&&", ",Jt.parse("`"+Ze+"`"))),xe>0&&r("span",null," and ",xe," more")),confirmText:"Restart now",cancelText:"Later!",onConfirm:()=>location.reload()})},[]);let o=rt(()=>{let Ce={};for(let ye in pt){let ce=pt[ye].dependencies;if(ce)for(let pe of ce)Ce[pe]??=[],Ce[pe].push(ye)}return Ce},[]),n=rt(()=>Object.values(pt).sort((Ce,ye)=>Ce.name.localeCompare(ye.name)),[]),i=rt(()=>!1,[]),[s,a]=L({value:"",status:0}),[l,c]=L(""),u=rt(()=>rn(Ce=>a(ye=>({...ye,value:Ce})),150),[]),p=s.value.toLowerCase(),m=gn(Ce=>{c(Ce),u(Ce)},[u]),g=gn(Ce=>{a(ye=>({...ye,status:Ce}))},[]),y=gn((Ce,ye)=>{let{status:ce}=s,pe=yt(Ce.name);switch(ce){case 2:if(pe)return!1;break;case 1:if(!pe)return!1;break;case 3:if(!Kr[Ce.name].folderName.startsWith("src/equicordplugins/"))return!1;break;case 4:if(!Kr[Ce.name].folderName.startsWith("src/plugins/"))return!1;break;case 5:if(!ye?.has(Ce.name))return!1;break;case 6:if(!Kr[Ce.name]?.userPlugin)return!1;break;case 7:if(!Ce.name.endsWith("API"))return!1;break}return p.length?Ce.name.toLowerCase().includes(p.replace(/\s+/g,""))||Ce.description.toLowerCase().includes(p)||Ce.tags?.some(xe=>xe.toLowerCase().includes(p)):!0},[s,p]),[b]=Cr(()=>zt("Vencord_existingPlugins").then(Ce=>{let ye=Date.now()/1e3,ce={},pe=Object.values(n).map(Ze=>Ze.name),xe=[];for(let{name:Ze}of n)(ce[Ze]=Ce?.[Ze]??ye)+3600*24*2>ye&&xe.push(Ze);return Gt("Vencord_existingPlugins",ce),hu.isEqual(xe,pe)?null:new Set(xe)})),v=gn((Ce,ye)=>t.handleChange(`${Ce}:${ye}`),[t]),{plugins:E,requiredPlugins:A}=rt(()=>{let Ce=[],ye=[],ce=s.status===7;for(let pe of n){if(pe.hidden||!pe.settings?.def&&pe.name.endsWith("API")&&!ce||!y(pe,b))continue;if(pe.required||pe.isDependency||o[pe.name]?.some(Ze=>e.plugins[Ze].enabled)){let Ze=pe.required||!o[pe.name]?"This plugin is required for Equicord to function.":r(qw,{deps:o[pe.name]?.filter(ge=>e.plugins[ge].enabled)});ye.push(r(Ue,{text:Ze,key:pe.name},({onMouseLeave:ge,onMouseEnter:ae})=>r($l,{onMouseLeave:ge,onMouseEnter:ae,onRestartNeeded:v,disabled:!0,plugin:pe})))}else Ce.push(r($l,{onRestartNeeded:v,disabled:!1,plugin:pe,isNew:b?.has(pe.name),key:pe.name}))}return{plugins:Ce,requiredPlugins:ye}},[n,s,b,o,e.plugins,y,v]);function C(){let Ce=!1;for(let ye of F){let ce=e.plugins[ye];if(pt[ye].patches?.length){ce.enabled=!1,t.handleChange(ye),Ce=!0;continue}if(!qm(pt[ye])){QFe.error(`Error while stopping plugin ${ye}`),ZFe(`Error while stopping plugin ${ye}`);continue}ce.enabled=!1}Ce&&go.show({title:"Restart Required",body:r(f,null,r("p",{style:{textAlign:"center"}},"Some plugins require a restart to fully disable."),r("p",{style:{textAlign:"center"}},"Would you like to restart now?")),confirmText:"Restart Now",cancelText:"Later",onConfirm:()=>location.reload()})}let{totalStockPlugins:I,totalUserPlugins:N,enabledStockPlugins:_,enabledUserPlugins:O,enabledPlugins:F}=rt(()=>{let Ce=ae=>ae.endsWith("API")||pt[ae].required,ye=Object.keys(pt).filter(ae=>!Ce(ae)),ce=Object.keys(pt).filter(ae=>yt(ae)&&!Ce(ae)),pe=ye.filter(ae=>!Kr[ae].userPlugin&&!pt[ae].hidden).length,xe=ye.filter(ae=>Kr[ae].userPlugin).length,Ze=ce.filter(ae=>!Kr[ae].userPlugin).length,ge=ce.filter(ae=>Kr[ae].userPlugin).length;return{totalStockPlugins:pe,totalUserPlugins:xe,enabledStockPlugins:Ze,enabledUserPlugins:ge,enabledPlugins:ce}},[e.plugins]),J=Math.min(36,E.length),[G,te]=X.useState(J),K=X.useCallback(()=>{te(Ce=>Math.min(Ce+J,E.length))},[E.length]),oe=rt(()=>rn(K,100),[K]),[le,he]=rw();X.useEffect(()=>{he&&G<E.length&&oe()},[he,G,E.length,oe]);let Ae=E.slice(0,G);return r(bi,null,r(XFe,{required:t.hasChanges,enabledPlugins:F,openWarningModal:g$,resetCheckAndDo:C}),r("div",{className:Ym("stats-container")},r(_ie,{totalStockPlugins:I,enabledStockPlugins:_}),r(Rie,{totalUserPlugins:N,enabledUserPlugins:O})),r("div",{className:Ym("ui-elements")},r(Uie,null)),r(Vn,{className:me(Z.top20,Z.bottom8)},"Filters"),r("div",{className:me(Z.bottom20,Ym("filter-controls"))},r(ee,{noop:!0},r(qe,{autoFocus:!0,value:l,placeholder:"Search for a plugin...",onChange:m})),r("div",null,r(ee,{noop:!0},r(to,{options:[{label:"Show All",value:0,default:!0},{label:"Show Enabled",value:1},{label:"Show Disabled",value:2},{label:"Show Equicord",value:3},{label:"Show Vencord",value:4},{label:"Show New",value:5},i&&{label:"Show UserPlugins",value:6},{label:"Show API Plugins",value:7}].filter(R0),serialize:String,select:g,isSelected:Ce=>Ce===s.status,closeOnSelect:!0})))),r(Vn,{className:Z.top20},"Plugins"),E.length||A.length?r(f,null,r("div",{className:Ym("grid")},Ae.length?Ae:r(W,null,"No plugins meet the search criteria.")),G<E.length&&r("div",{ref:le,style:{height:32}})):r(JFe,{search:p}),r(Bt,{className:Z.top20}),r(Vn,{className:me(Z.top20,Z.bottom8)},"Required Plugins"),r("div",{className:Ym("grid")},A.length?A:r(W,null,"No plugins meet the search criteria.")))}function qw({deps:e}){return r(f,null,r(W,null,"This plugin is required by:"),e.map(t=>r(W,{key:t,className:Ym("dep-text")},t)))}var Ym,QFe,x$,KA=x(()=>{"use strict";d();h$();vn();Wo();Q();Co();fs();Ar();tt();ut();wt();fa();la();zw();nt();Km();At();co();xt();qo();B();Ps();j1();qA();Lie();$ie();Ym=de("vc-plugins-"),QFe=new ke("PluginSettings","#a6d189");x$={desktop:"Discord Desktop app or Vesktop/Equibop",discordDesktop:"Discord Desktop app",vesktop:"Vesktop/Equibop apps",equibop:"Vesktop/Equibop apps",web:"Vesktop/Equibop apps & Discord web",dev:"Developer version of Equicord"}});function y$(e,t){for(let o in t){let n=t[o];n!==null&&typeof n=="object"&&!Array.isArray(n)?((e[o]===null||e[o]===void 0||typeof e[o]!="object"||Array.isArray(e[o]))&&(e[o]={}),y$(e[o],n)):e[o]=n}return e}function zie(e){if(e==null||typeof e!="object")return!0;for(let t in e)if(["__proto__","constructor","prototype"].includes(t)||!zie(e[t]))return!1;return!0}async function b$(e,t="all",o=!1){try{var n=JSON.parse(e)}catch(i){throw console.log(e),new Error("Failed to parse JSON: "+String(i))}if(!zie(n))throw new Error("Unsafe Settings");switch(t){case"all":{if(!o&&!("settings"in n))throw new Error("Invalid Settings. Plugin settings is required for this import try a different one.");n.settings&&(y$(Rl,n.settings),await VencordNative.settings.set(Rl)),n.quickCss&&await VencordNative.quickCss.set(n.quickCss),n.dataStore&&await Oe.setMany(n.dataStore);break}case"plugins":{if(!n.settings)throw new Error("Plugin settings missing");y$(Rl,n.settings),await VencordNative.settings.set(Rl);break}case"css":{if(!n.quickCss)throw new Error("CSS missing");await VencordNative.quickCss.set(n.quickCss);break}case"datastore":{if(!n.dataStore)throw new Error("DataStore data missing");await Oe.setMany(n.dataStore);break}}}async function v$({syncDataStore:e=!0,type:t="all",minify:o}){let n=VencordNative.settings.get(),i=await VencordNative.quickCss.get(),s=e?await Oe.entries():void 0;switch(t){case"all":return JSON.stringify({settings:n,quickCss:i,...e&&{dataStore:s}},null,o?void 0:4);case"plugins":return JSON.stringify({settings:n},null,o?void 0:4);case"css":return JSON.stringify({quickCss:i},null,o?void 0:4);case"datastore":return JSON.stringify({dataStore:s},null,o?void 0:4)}}async function Ww(e="all",{minify:t}={}){let o=await v$({minify:t,type:e}),n=`equicord-${e}-backup-${ll().format("YYYY-MM-DD")}.json`,i=new TextEncoder().encode(o);su(new File([i],n,{type:"application/json"}))}async function Kw(e="all",t=!0){{let o=await i1("application/json");if(!o)return;let n=new FileReader;n.onload=async()=>{try{await b$(n.result,e),t&&VFe()}catch(i){tUe.error(i),t&&eUe(i)}},n.readAsText(o)}}var Hie,VFe,eUe,tUe,S$=x(()=>{"use strict";d();Q();At();rd();B();dr();Hie=(e,t)=>D.show({type:e,message:t,id:D.genId()}),VFe=()=>Hie(D.Type.SUCCESS,"Settings successfully imported. Restart to apply changes!"),eUe=e=>Hie(D.Type.FAILURE,`Failed to import settings: ${String(e)}`),tUe=new ke("SettingsSync:Offline","#39b7e0")});function oUe(){return r(bi,null,r(re,{className:Z.top16},"Backup & Restore"),r(W,{className:Z.bottom20},"Import and export your Equicord settings as a JSON file. This allows you to easily transfer your settings to another device, or recover them after reinstalling Equicord or Discord."),r(ur.Warning,{className:Z.bottom20},"Importing a settings file will overwrite your current settings. Make sure to export a backup first if you want to keep your current configuration."),r(re,null,"What's included in a backup"),r(W,{className:Z.bottom20},"\u2022 Custom QuickCSS",r("br",null),"\u2022 Theme Links",r("br",null),"\u2022 Plugin Settings",r("br",null),"\u2022 DataStore Data"),r(Bt,{className:Z.bottom20}),r(re,null,"Import Settings"),r(W,{className:Z.bottom16},"Select a previously exported settings file to restore your configuration. This will replace all your current settings with the ones from the backup."),r(Be,{gap:"8px",className:Z.bottom20,style:{flexWrap:"wrap"}},r(Me,{onClick:()=>Kw("all"),size:"small",variant:"secondary"},"Import All Settings"),r(Me,{onClick:()=>Kw("plugins"),size:"small"},"Import Plugins"),r(Me,{onClick:()=>Kw("css"),size:"small"},"Import QuickCSS"),r(Me,{onClick:()=>Kw("datastore"),size:"small"},"Import DataStore")),r(Bt,{className:Z.bottom20}),r(re,null,"Export Settings"),r(W,{className:Z.bottom16},"Download your current settings as a backup file. You can export everything at once, or choose to export only specific parts of your configuration."),r(Be,{gap:"8px",style:{flexWrap:"wrap"}},r(Me,{onClick:()=>Ww("all"),size:"small",variant:"secondary"},"Export All Settings"),r(Me,{onClick:()=>Ww("plugins"),size:"small"},"Export Plugins"),r(Me,{onClick:()=>Ww("css"),size:"small"},"Export QuickCSS"),r(Me,{onClick:()=>Ww("datastore"),size:"small"},"Export DataStore")))}var Yw,Gie=x(()=>{"use strict";d();S$();Co();Ar();eo();ut();gd();wt();H1();co();Yw=Bi(oUe,"Backup & Restore")});async function jie(){let e=await zt("Vencord_cloudSecret")??{},t=w$();return e[t]?(await iu("Vencord_cloudSecret",o=>(o??={},o[`${t}:${Qw()}`]=o[t],delete o[t],o)),e[t]):e[`${t}:${Qw()}`]}async function nUe(e){await iu("Vencord_cloudSecret",t=>(t??={},t[`${w$()}:${Qw()}`]=e,t))}async function K1(){await iu("Vencord_cloudSecret",e=>(e??={},delete e[`${w$()}:${Qw()}`],e))}async function YA(){if(await jie()!==void 0){Ge.cloud.authenticated=!0;return}try{let o=await fetch(new URL("/v1/oauth/settings",ex()));var{clientId:e,redirectUri:t}=await o.json()}catch{qt({title:"Cloud Integration",body:"Setup failed (couldn't retrieve OAuth configuration)."}),Ge.cloud.authenticated=!1;return}Ee(o=>r(pd,{...o,scopes:["identify"],responseType:"code",redirectUri:t,permissions:0n,clientId:e,cancelCompletesFlow:!1,callback:async({location:n})=>{if(!n){Ge.cloud.authenticated=!1;return}try{let i=await fetch(n,{headers:{Accept:"application/json"}}),{secret:s}=await i.json();s?(qie.info("Authorized with secret"),await nUe(s),qt({title:"Cloud Integration",body:"Cloud integrations enabled!"}),Ge.cloud.authenticated=!0):(qt({title:"Cloud Integration",body:"Setup failed (no secret returned?)."}),Ge.cloud.authenticated=!1)}catch(i){qie.error("Failed to authorize",i),qt({title:"Cloud Integration",body:`Setup failed (${i.toString()}).`}),Ge.cloud.authenticated=!1}}}))}async function Zw(){let e=await jie();return window.btoa(`${e}:${Qw()}`)}var qie,ex,w$,Qw,k$=x(()=>{"use strict";d();vn();_a();Q();At();at();B();qie=new ke("SettingsSync:CloudSetup","#39b7e0"),ex=()=>new URL(Ge.cloud.url),w$=()=>ex().origin,Qw=()=>{let e=z.getCurrentUser()?.id;if(!e)throw new Error("User not yet logged in");return e}});function L$(e,t){return fUe(e,t||{},0,0)}function ise(e,t){return ose(e,{i:2},t&&t.out,t&&t.dictionary)}function Zie(e,t){if(t){for(var o=new Ur(e.length),n=0;n<e.length;++n)o[n]=e.charCodeAt(n);return o}if(Qie)return Qie.encode(e);for(var i=e.length,s=new Ur(e.length+(e.length>>1)),a=0,l=function(p){s[a++]=p},n=0;n<i;++n){if(a+5>s.length){var c=new Ur(a+8+(i-n<<1));c.set(s),s=c}var u=e.charCodeAt(n);u<128||t?l(u):u<2048?(l(192|u>>6),l(128|u&63)):u>55295&&u<57344?(u=65536+(u&1047552)|e.charCodeAt(++n)&1023,l(240|u>>18),l(128|u>>12&63),l(128|u>>6&63),l(128|u&63)):(l(224|u>>12),l(128|u>>6&63),l(128|u&63))}return tx(s,0,a)}function yUe(e,t){if(t){for(var o="",n=0;n<e.length;n+=16384)o+=String.fromCharCode.apply(null,e.subarray(n,n+16384));return o}else{if(B$)return B$.decode(e);var i=xUe(e),s=i.s,o=i.r;return o.length&&gs(8),s}}function ox(e,t){t||(t={});var o={},n=[];sse(e,"",o,t);var i=0,s=0;for(var a in o){var l=o[a],c=l[0],u=l[1],p=u.level==0?0:8,m=Zie(a),g=m.length,y=u.comment,b=y&&Zie(y),v=b&&b.length,E=P$(u.extra);g>65535&&gs(11);var A=p?L$(c,u):c,C=A.length,I=mUe();I.p(c),n.push(rse(u,{size:c.length,crc:I.d(),c:A,f:m,m:b,u:g!=a.length||b&&y.length!=v,o:i,compression:p})),i+=30+g+E+C,s+=76+2*(g+E)+(v||0)+C}for(var N=new Ur(s+22),_=i,O=s-i,F=0;F<n.length;++F){var m=n[F];Xie(N,m.o,m,m.f,m.u,m.c.length);var J=30+m.f.length+P$(m.extra);N.set(m.c,m.o+J),Xie(N,i,m,m.f,m.u,m.c.length,m.o,m.m),i+=16+J+(m.m?m.m.length:0)}return vUe(N,i,n.length,O,_),N}var Ur,Ac,_$,QA,ZA,I$,Jie,Vie,ese,D$,tse,rUe,Wie,M$,Qm,Wn,yp,O0,Wn,Wn,Wn,Wn,Vw,Wn,iUe,sUe,aUe,lUe,E$,Ed,A$,R$,tx,cUe,gs,ose,Zm,Xw,C$,N$,Kie,Jw,nse,Yie,uUe,Y1,dUe,pUe,mUe,fUe,rse,Q1,Z1,T$,ga,gUe,sse,Qie,B$,hUe,xUe,bUe,P$,Xie,vUe,SUe,ase,lse,e8=x(()=>{d();Ur=Uint8Array,Ac=Uint16Array,_$=Int32Array,QA=new Ur([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ZA=new Ur([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),I$=new Ur([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Jie=function(e,t){for(var o=new Ac(31),n=0;n<31;++n)o[n]=t+=1<<e[n-1];for(var i=new _$(o[30]),n=1;n<30;++n)for(var s=o[n];s<o[n+1];++s)i[s]=s-o[n]<<5|n;return{b:o,r:i}},Vie=Jie(QA,2),ese=Vie.b,D$=Vie.r;ese[28]=258,D$[258]=28;tse=Jie(ZA,0),rUe=tse.b,Wie=tse.r,M$=new Ac(32768);for(Wn=0;Wn<32768;++Wn)Qm=(Wn&43690)>>1|(Wn&21845)<<1,Qm=(Qm&52428)>>2|(Qm&13107)<<2,Qm=(Qm&61680)>>4|(Qm&3855)<<4,M$[Wn]=((Qm&65280)>>8|(Qm&255)<<8)>>1;yp=(function(e,t,o){for(var n=e.length,i=0,s=new Ac(t);i<n;++i)e[i]&&++s[e[i]-1];var a=new Ac(t);for(i=1;i<t;++i)a[i]=a[i-1]+s[i-1]<<1;var l;if(o){l=new Ac(1<<t);var c=15-t;for(i=0;i<n;++i)if(e[i])for(var u=i<<4|e[i],p=t-e[i],m=a[e[i]-1]++<<p,g=m|(1<<p)-1;m<=g;++m)l[M$[m]>>c]=u}else for(l=new Ac(n),i=0;i<n;++i)e[i]&&(l[i]=M$[a[e[i]-1]++]>>15-e[i]);return l}),O0=new Ur(288);for(Wn=0;Wn<144;++Wn)O0[Wn]=8;for(Wn=144;Wn<256;++Wn)O0[Wn]=9;for(Wn=256;Wn<280;++Wn)O0[Wn]=7;for(Wn=280;Wn<288;++Wn)O0[Wn]=8;Vw=new Ur(32);for(Wn=0;Wn<32;++Wn)Vw[Wn]=5;iUe=yp(O0,9,0),sUe=yp(O0,9,1),aUe=yp(Vw,5,0),lUe=yp(Vw,5,1),E$=function(e){for(var t=e[0],o=1;o<e.length;++o)e[o]>t&&(t=e[o]);return t},Ed=function(e,t,o){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(t&7)&o},A$=function(e,t){var o=t/8|0;return(e[o]|e[o+1]<<8|e[o+2]<<16)>>(t&7)},R$=function(e){return(e+7)/8|0},tx=function(e,t,o){return(t==null||t<0)&&(t=0),(o==null||o>e.length)&&(o=e.length),new Ur(e.subarray(t,o))},cUe=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],gs=function(e,t,o){var n=new Error(t||cUe[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,gs),!o)throw n;return n},ose=function(e,t,o,n){var i=e.length,s=n?n.length:0;if(!i||t.f&&!t.l)return o||new Ur(0);var a=!o,l=a||t.i!=2,c=t.i;a&&(o=new Ur(i*3));var u=function(po){var no=o.length;if(po>no){var mo=new Ur(Math.max(no*2,po));mo.set(o),o=mo}},p=t.f||0,m=t.p||0,g=t.b||0,y=t.l,b=t.d,v=t.m,E=t.n,A=i*8;do{if(!y){p=Ed(e,m,1);var C=Ed(e,m+1,3);if(m+=3,C)if(C==1)y=sUe,b=lUe,v=9,E=5;else if(C==2){var O=Ed(e,m,31)+257,F=Ed(e,m+10,15)+4,J=O+Ed(e,m+5,31)+1;m+=14;for(var G=new Ur(J),te=new Ur(19),K=0;K<F;++K)te[I$[K]]=Ed(e,m+K*3,7);m+=F*3;for(var oe=E$(te),le=(1<<oe)-1,he=yp(te,oe,1),K=0;K<J;){var Ae=he[Ed(e,m,le)];m+=Ae&15;var I=Ae>>4;if(I<16)G[K++]=I;else{var Ce=0,ye=0;for(I==16?(ye=3+Ed(e,m,3),m+=2,Ce=G[K-1]):I==17?(ye=3+Ed(e,m,7),m+=3):I==18&&(ye=11+Ed(e,m,127),m+=7);ye--;)G[K++]=Ce}}var ce=G.subarray(0,O),pe=G.subarray(O);v=E$(ce),E=E$(pe),y=yp(ce,v,1),b=yp(pe,E,1)}else gs(1);else{var I=R$(m)+4,N=e[I-4]|e[I-3]<<8,_=I+N;if(_>i){c&&gs(0);break}l&&u(g+N),o.set(e.subarray(I,_),g),t.b=g+=N,t.p=m=_*8,t.f=p;continue}if(m>A){c&&gs(0);break}}l&&u(g+131072);for(var xe=(1<<v)-1,Ze=(1<<E)-1,ge=m;;ge=m){var Ce=y[A$(e,m)&xe],ae=Ce>>4;if(m+=Ce&15,m>A){c&&gs(0);break}if(Ce||gs(2),ae<256)o[g++]=ae;else if(ae==256){ge=m,y=null;break}else{var Ne=ae-254;if(ae>264){var K=ae-257,Fe=QA[K];Ne=Ed(e,m,(1<<Fe)-1)+ese[K],m+=Fe}var Xe=b[A$(e,m)&Ze],It=Xe>>4;Xe||gs(3),m+=Xe&15;var pe=rUe[It];if(It>3){var Fe=ZA[It];pe+=A$(e,m)&(1<<Fe)-1,m+=Fe}if(m>A){c&&gs(0);break}l&&u(g+131072);var Ve=g+Ne;if(g<pe){var _t=s-pe,Wt=Math.min(pe,Ve);for(_t+g<0&&gs(3);g<Wt;++g)o[g]=n[_t+g]}for(;g<Ve;++g)o[g]=o[g-pe]}}t.l=y,t.p=ge,t.b=g,t.f=p,y&&(p=1,t.m=v,t.d=b,t.n=E)}while(!p);return g!=o.length&&a?tx(o,0,g):o.subarray(0,g)},Zm=function(e,t,o){o<<=t&7;var n=t/8|0;e[n]|=o,e[n+1]|=o>>8},Xw=function(e,t,o){o<<=t&7;var n=t/8|0;e[n]|=o,e[n+1]|=o>>8,e[n+2]|=o>>16},C$=function(e,t){for(var o=[],n=0;n<e.length;++n)e[n]&&o.push({s:n,f:e[n]});var i=o.length,s=o.slice();if(!i)return{t:Y1,l:0};if(i==1){var a=new Ur(o[0].s+1);return a[o[0].s]=1,{t:a,l:1}}o.sort(function(_,O){return _.f-O.f}),o.push({s:-1,f:25001});var l=o[0],c=o[1],u=0,p=1,m=2;for(o[0]={s:-1,f:l.f+c.f,l,r:c};p!=i-1;)l=o[o[u].f<o[m].f?u++:m++],c=o[u!=p&&o[u].f<o[m].f?u++:m++],o[p++]={s:-1,f:l.f+c.f,l,r:c};for(var g=s[0].s,n=1;n<i;++n)s[n].s>g&&(g=s[n].s);var y=new Ac(g+1),b=N$(o[p-1],y,0);if(b>t){var n=0,v=0,E=b-t,A=1<<E;for(s.sort(function(O,F){return y[F.s]-y[O.s]||O.f-F.f});n<i;++n){var C=s[n].s;if(y[C]>t)v+=A-(1<<b-y[C]),y[C]=t;else break}for(v>>=E;v>0;){var I=s[n].s;y[I]<t?v-=1<<t-y[I]++-1:++n}for(;n>=0&&v;--n){var N=s[n].s;y[N]==t&&(--y[N],++v)}b=t}return{t:new Ur(y),l:b}},N$=function(e,t,o){return e.s==-1?Math.max(N$(e.l,t,o+1),N$(e.r,t,o+1)):t[e.s]=o},Kie=function(e){for(var t=e.length;t&&!e[--t];);for(var o=new Ac(++t),n=0,i=e[0],s=1,a=function(c){o[n++]=c},l=1;l<=t;++l)if(e[l]==i&&l!=t)++s;else{if(!i&&s>2){for(;s>138;s-=138)a(32754);s>2&&(a(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(a(i),--s;s>6;s-=6)a(8304);s>2&&(a(s-3<<5|8208),s=0)}for(;s--;)a(i);s=1,i=e[l]}return{c:o.subarray(0,n),n:t}},Jw=function(e,t){for(var o=0,n=0;n<t.length;++n)o+=e[n]*t[n];return o},nse=function(e,t,o){var n=o.length,i=R$(t+2);e[i]=n&255,e[i+1]=n>>8,e[i+2]=e[i]^255,e[i+3]=e[i+1]^255;for(var s=0;s<n;++s)e[i+s+4]=o[s];return(i+4+n)*8},Yie=function(e,t,o,n,i,s,a,l,c,u,p){Zm(t,p++,o),++i[256];for(var m=C$(i,15),g=m.t,y=m.l,b=C$(s,15),v=b.t,E=b.l,A=Kie(g),C=A.c,I=A.n,N=Kie(v),_=N.c,O=N.n,F=new Ac(19),J=0;J<C.length;++J)++F[C[J]&31];for(var J=0;J<_.length;++J)++F[_[J]&31];for(var G=C$(F,7),te=G.t,K=G.l,oe=19;oe>4&&!te[I$[oe-1]];--oe);var le=u+5<<3,he=Jw(i,O0)+Jw(s,Vw)+a,Ae=Jw(i,g)+Jw(s,v)+a+14+3*oe+Jw(F,te)+2*F[16]+3*F[17]+7*F[18];if(c>=0&&le<=he&&le<=Ae)return nse(t,p,e.subarray(c,c+u));var Ce,ye,ce,pe;if(Zm(t,p,1+(Ae<he)),p+=2,Ae<he){Ce=yp(g,y,0),ye=g,ce=yp(v,E,0),pe=v;var xe=yp(te,K,0);Zm(t,p,I-257),Zm(t,p+5,O-1),Zm(t,p+10,oe-4),p+=14;for(var J=0;J<oe;++J)Zm(t,p+3*J,te[I$[J]]);p+=3*oe;for(var Ze=[C,_],ge=0;ge<2;++ge)for(var ae=Ze[ge],J=0;J<ae.length;++J){var Ne=ae[J]&31;Zm(t,p,xe[Ne]),p+=te[Ne],Ne>15&&(Zm(t,p,ae[J]>>5&127),p+=ae[J]>>12)}}else Ce=iUe,ye=O0,ce=aUe,pe=Vw;for(var J=0;J<l;++J){var Fe=n[J];if(Fe>255){var Ne=Fe>>18&31;Xw(t,p,Ce[Ne+257]),p+=ye[Ne+257],Ne>7&&(Zm(t,p,Fe>>23&31),p+=QA[Ne]);var Xe=Fe&31;Xw(t,p,ce[Xe]),p+=pe[Xe],Xe>3&&(Xw(t,p,Fe>>5&8191),p+=ZA[Xe])}else Xw(t,p,Ce[Fe]),p+=ye[Fe]}return Xw(t,p,Ce[256]),p+ye[256]},uUe=new _$([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Y1=new Ur(0),dUe=function(e,t,o,n,i,s){var a=s.z||e.length,l=new Ur(n+a+5*(1+Math.ceil(a/7e3))+i),c=l.subarray(n,l.length-i),u=s.l,p=(s.r||0)&7;if(t){p&&(c[0]=s.r>>3);for(var m=uUe[t-1],g=m>>13,y=m&8191,b=(1<<o)-1,v=s.p||new Ac(32768),E=s.h||new Ac(b+1),A=Math.ceil(o/3),C=2*A,I=function(Sn){return(e[Sn]^e[Sn+1]<<A^e[Sn+2]<<C)&b},N=new _$(25e3),_=new Ac(288),O=new Ac(32),F=0,J=0,G=s.i||0,te=0,K=s.w||0,oe=0;G+2<a;++G){var le=I(G),he=G&32767,Ae=E[le];if(v[he]=Ae,E[le]=he,K<=G){var Ce=a-G;if((F>7e3||te>24576)&&(Ce>423||!u)){p=Yie(e,c,0,N,_,O,J,te,oe,G-oe,p),te=F=J=0,oe=G;for(var ye=0;ye<286;++ye)_[ye]=0;for(var ye=0;ye<30;++ye)O[ye]=0}var ce=2,pe=0,xe=y,Ze=he-Ae&32767;if(Ce>2&&le==I(G-Ze))for(var ge=Math.min(g,Ce)-1,ae=Math.min(32767,G),Ne=Math.min(258,Ce);Ze<=ae&&--xe&&he!=Ae;){if(e[G+ce]==e[G+ce-Ze]){for(var Fe=0;Fe<Ne&&e[G+Fe]==e[G+Fe-Ze];++Fe);if(Fe>ce){if(ce=Fe,pe=Ze,Fe>ge)break;for(var Xe=Math.min(Ze,Fe-2),It=0,ye=0;ye<Xe;++ye){var Ve=G-Ze+ye&32767,_t=v[Ve],Wt=Ve-_t&32767;Wt>It&&(It=Wt,Ae=Ve)}}}he=Ae,Ae=v[he],Ze+=he-Ae&32767}if(pe){N[te++]=268435456|D$[ce]<<18|Wie[pe];var po=D$[ce]&31,no=Wie[pe]&31;J+=QA[po]+ZA[no],++_[257+po],++O[no],K=G+ce,++F}else N[te++]=e[G],++_[e[G]]}}for(G=Math.max(G,K);G<a;++G)N[te++]=e[G],++_[e[G]];p=Yie(e,c,u,N,_,O,J,te,oe,G-oe,p),u||(s.r=p&7|c[p/8|0]<<3,p-=7,s.h=E,s.p=v,s.i=G,s.w=K)}else{for(var G=s.w||0;G<a+u;G+=65535){var mo=G+65535;mo>=a&&(c[p/8|0]=u,mo=a),p=nse(c,p+1,e.subarray(G,mo))}s.i=a}return tx(l,0,n+R$(p)+i)},pUe=(function(){for(var e=new Int32Array(256),t=0;t<256;++t){for(var o=t,n=9;--n;)o=(o&1&&-306674912)^o>>>1;e[t]=o}return e})(),mUe=function(){var e=-1;return{p:function(t){for(var o=e,n=0;n<t.length;++n)o=pUe[o&255^t[n]]^o>>>8;e=o},d:function(){return~e}}},fUe=function(e,t,o,n,i){if(!i&&(i={l:1},t.dictionary)){var s=t.dictionary.subarray(-32768),a=new Ur(s.length+e.length);a.set(s),a.set(e,s.length),e=a,i.w=s.length}return dUe(e,t.level==null?6:t.level,t.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,o,n,i)},rse=function(e,t){var o={};for(var n in e)o[n]=e[n];for(var n in t)o[n]=t[n];return o},Q1=function(e,t){return e[t]|e[t+1]<<8},Z1=function(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0},T$=function(e,t){return Z1(e,t)+Z1(e,t+4)*4294967296},ga=function(e,t,o){for(;o;++t)e[t]=o,o>>>=8};gUe=(function(){function e(t,o){typeof t=="function"&&(o=t,t={}),this.ondata=o;var n=t&&t.dictionary&&t.dictionary.subarray(-32768);this.s={i:0,b:n?n.length:0},this.o=new Ur(32768),this.p=new Ur(0),n&&this.o.set(n)}return e.prototype.e=function(t){if(this.ondata||gs(5),this.d&&gs(4),!this.p.length)this.p=t;else if(t.length){var o=new Ur(this.p.length+t.length);o.set(this.p),o.set(t,this.p.length),this.p=o}},e.prototype.c=function(t){this.s.i=+(this.d=t||!1);var o=this.s.b,n=ose(this.p,this.s,this.o);this.ondata(tx(n,o,this.s.b),this.d),this.o=tx(n,this.s.b-32768),this.s.b=this.o.length,this.p=tx(this.p,this.s.p/8|0),this.s.p&=7},e.prototype.push=function(t,o){this.e(t),this.c(o)},e})();sse=function(e,t,o,n){for(var i in e){var s=e[i],a=t+i,l=n;Array.isArray(s)&&(l=rse(n,s[1]),s=s[0]),s instanceof Ur?o[a]=[s,l]:(o[a+="/"]=[new Ur(0),l],sse(s,a,o,n))}},Qie=typeof TextEncoder<"u"&&new TextEncoder,B$=typeof TextDecoder<"u"&&new TextDecoder,hUe=0;try{B$.decode(Y1,{stream:!0}),hUe=1}catch{}xUe=function(e){for(var t="",o=0;;){var n=e[o++],i=(n>127)+(n>223)+(n>239);if(o+i>e.length)return{s:t,r:tx(e,o-1)};i?i==3?(n=((n&15)<<18|(e[o++]&63)<<12|(e[o++]&63)<<6|e[o++]&63)-65536,t+=String.fromCharCode(55296|n>>10,56320|n&1023)):i&1?t+=String.fromCharCode((n&31)<<6|e[o++]&63):t+=String.fromCharCode((n&15)<<12|(e[o++]&63)<<6|e[o++]&63):t+=String.fromCharCode(n)}};bUe=function(e,t){for(;Q1(e,t)!=1;t+=4+Q1(e,t+2));return[T$(e,t+12),T$(e,t+4),T$(e,t+20)]},P$=function(e){var t=0;if(e)for(var o in e){var n=e[o].length;n>65535&&gs(9),t+=n+4}return t},Xie=function(e,t,o,n,i,s,a,l){var c=n.length,u=o.extra,p=l&&l.length,m=P$(u);ga(e,t,a!=null?33639248:67324752),t+=4,a!=null&&(e[t++]=20,e[t++]=o.os),e[t]=20,t+=2,e[t++]=o.flag<<1|(s<0&&8),e[t++]=i&&8,e[t++]=o.compression&255,e[t++]=o.compression>>8;var g=new Date(o.mtime==null?Date.now():o.mtime),y=g.getFullYear()-1980;if((y<0||y>119)&&gs(10),ga(e,t,y<<25|g.getMonth()+1<<21|g.getDate()<<16|g.getHours()<<11|g.getMinutes()<<5|g.getSeconds()>>1),t+=4,s!=-1&&(ga(e,t,o.crc),ga(e,t+4,s<0?-s-2:s),ga(e,t+8,o.size)),ga(e,t+12,c),ga(e,t+14,m),t+=16,a!=null&&(ga(e,t,p),ga(e,t+6,o.attrs),ga(e,t+10,a),t+=14),e.set(n,t),t+=c,m)for(var b in u){var v=u[b],E=v.length;ga(e,t,+b),ga(e,t+2,E),e.set(v,t+4),t+=4+E}return p&&(e.set(l,t),t+=p),t},vUe=function(e,t,o,n,i){ga(e,t,101010256),ga(e,t+8,o),ga(e,t+10,o),ga(e,t+12,n),ga(e,t+16,i)};SUe=(function(){function e(){}return e.prototype.push=function(t,o){this.ondata(null,t,o)},e.compression=0,e})(),ase=(function(){function e(){var t=this;this.i=new gUe(function(o,n){t.ondata(null,o,n)})}return e.prototype.push=function(t,o){try{this.i.push(t,o)}catch(n){this.ondata(n,null,o)}},e.compression=8,e})(),lse=(function(){function e(t){this.onfile=t,this.k=[],this.o={0:SUe},this.p=Y1}return e.prototype.push=function(t,o){var n=this;if(this.onfile||gs(5),this.p||gs(4),this.c>0){var i=Math.min(this.c,t.length),s=t.subarray(0,i);if(this.c-=i,this.d?this.d.push(s,!this.c):this.k[0].push(s),t=t.subarray(i),t.length)return this.push(t,o)}else{var a=0,l=0,c=void 0,u=void 0;this.p.length?t.length?(u=new Ur(this.p.length+t.length),u.set(this.p),u.set(t,this.p.length)):u=this.p:u=t;for(var p=u.length,m=this.c,g=m&&this.d,y=function(){var A,C=Z1(u,l);if(C==67324752){a=1,c=l,b.d=null,b.c=0;var I=Q1(u,l+6),N=Q1(u,l+8),_=I&2048,O=I&8,F=Q1(u,l+26),J=Q1(u,l+28);if(p>l+30+F+J){var G=[];b.k.unshift(G),a=2;var te=Z1(u,l+18),K=Z1(u,l+22),oe=yUe(u.subarray(l+30,l+=30+F),!_);te==4294967295?(A=O?[-2]:bUe(u,l),te=A[0],K=A[1]):O&&(te=-1),l+=J,b.c=te;var le,he={name:oe,compression:N,start:function(){if(he.ondata||gs(5),!te)he.ondata(null,Y1,!0);else{var Ae=n.o[N];Ae||he.ondata(gs(14,"unknown compression type "+N,1),null,!1),le=te<0?new Ae(oe):new Ae(oe,te,K),le.ondata=function(pe,xe,Ze){he.ondata(pe,xe,Ze)};for(var Ce=0,ye=G;Ce<ye.length;Ce++){var ce=ye[Ce];le.push(ce,!1)}n.k[0]==G&&n.c?n.d=le:le.push(Y1,!0)}},terminate:function(){le&&le.terminate&&le.terminate()}};te>=0&&(he.size=te,he.originalSize=K),b.onfile(he)}return"break"}else if(m){if(C==134695760)return c=l+=12+(m==-2&&8),a=3,b.c=0,"break";if(C==33639248)return c=l-=4,a=3,b.c=0,"break"}},b=this;l<p-4;++l){var v=y();if(v==="break")break}if(this.p=Y1,m<0){var E=a?u.subarray(0,c-12-(m==-2&&8)-(Z1(u,c-16)==134695760&&4)):u.subarray(0,l);g?g.push(E,!!a):this.k[+(a==2)].push(E)}if(a&2)return this.push(u.subarray(l),o);this.p=u.subarray(l)}o&&(this.c&&gs(13),this.p=null)},e.prototype.register=function(t){this.o[t.compression]=t},e})()});function XA(e){let t=ca.Vencord_cloudSyncDirection;return t===e||t==="both"}async function t8(e){let t=await v$({syncDataStore:!1,minify:!0});try{let o=await fetch(new URL("/v1/settings",ex()),{method:"PUT",headers:{Authorization:await Zw(),"Content-Type":"application/octet-stream"},body:L$(new TextEncoder().encode(t))});if(!o.ok){Au.error(`Failed to sync up, API returned ${o.status}`),qt({title:"Cloud Settings",body:`Could not synchronize settings to cloud (API returned ${o.status}).`,color:"var(--red-360)"});return}let{written:n}=await o.json();Rl.cloud.settingsSyncVersion=n,VencordNative.settings.set(Rl),Au.info("Settings uploaded to cloud successfully"),e&&qt({title:"Cloud Settings",body:"Synchronized settings to the cloud!",noPersist:!0}),delete ca.Vencord_settingsDirty}catch(o){Au.error("Failed to sync up",o),qt({title:"Cloud Settings",body:`Could not synchronize settings to the cloud (${o.toString()}).`,color:"var(--red-360)"})}}async function JA(e=!0,t=!1){try{let o=await fetch(new URL("/v1/settings",ex()),{method:"GET",headers:{Authorization:await Zw(),Accept:"application/octet-stream","If-None-Match":Ge.cloud.settingsSyncVersion.toString()}});if(o.status===401)return qt({title:"Cloud Settings",body:"Cloud sync was disabled because this account isn't connected to the cloud App. You can enable it again by connecting this account in Cloud Settings. (note: it will store your preferences separately)",color:"var(--yellow-360)",onClick:()=>xi("equicord_cloud")}),Ge.cloud.authenticated=!1,!1;if(o.status===404)return Au.info("No settings on the cloud"),e&&qt({title:"Cloud Settings",body:"There are no settings in the cloud.",noPersist:!0}),!1;if(o.status===304)return Au.info("Settings up to date"),e&&qt({title:"Cloud Settings",body:"Your settings are up to date.",noPersist:!0}),!1;if(!o.ok)return Au.error(`Failed to sync down, API returned ${o.status}`),qt({title:"Cloud Settings",body:`Could not synchronize settings from the cloud (API returned ${o.status}).`,color:"var(--red-360)"}),!1;let n=Number(o.headers.get("etag")),i=Ge.cloud.settingsSyncVersion;if(!t&&n<i){e&&qt({title:"Cloud Settings",body:"Your local settings are newer than the cloud ones.",noPersist:!0});return}let s=await o.arrayBuffer(),a=new TextDecoder().decode(ise(new Uint8Array(s)));return await b$(a,"all",!0),Rl.cloud.settingsSyncVersion=n,VencordNative.settings.set(Rl),Au.info("Settings loaded from cloud successfully"),e&&qt({title:"Cloud Settings",body:"Your settings have been updated! Click here to restart to fully apply changes!",color:"var(--green-360)",onClick:()=>location.reload(),noPersist:!0}),delete ca.Vencord_settingsDirty,!0}catch(o){return Au.error("Failed to sync down",o),qt({title:"Cloud Settings",body:`Could not synchronize settings from the cloud (${o.toString()}).`,color:"var(--red-360)"}),!1}}async function cse(){try{let e=await fetch(new URL("/v1/settings",ex()),{method:"DELETE",headers:{Authorization:await Zw()}});if(!e.ok){Au.error(`Failed to delete, API returned ${e.status}`),qt({title:"Cloud Settings",body:`Could not delete settings (API returned ${e.status}).`,color:"var(--red-360)"});return}Au.info("Settings deleted from cloud successfully"),qt({title:"Cloud Settings",body:"Settings deleted from cloud!",color:"var(--green-360)"})}catch(e){Au.error("Failed to delete",e),qt({title:"Cloud Settings",body:`Could not delete settings (${e.toString()}).`,color:"var(--red-360)"})}}async function use(){let e=await fetch(new URL("/v1/",ex()),{method:"DELETE",headers:{Authorization:await Zw()}});if(!e.ok){Au.error(`Failed to erase data, API returned ${e.status}`),qt({title:"Cloud Integrations",body:`Could not erase all data (API returned ${e.status}), please contact support.`,color:"var(--red-360)"});return}Ge.cloud.authenticated=!1,await K1(),qt({title:"Cloud Integrations",body:"Successfully erased all data.",color:"var(--green-360)"})}var Au,O$=x(()=>{"use strict";d();_a();Q();r1();At();yd();B();e8();k$();S$();Au=new ke("SettingsSync:Cloud","#39b7e0")});function bp({value:e,onChange:t,validate:o,placeholder:n}){let[i,s]=X.useState(e),[a,l]=X.useState();function c(u){s(u);let p=o(u);p===!0?(l(void 0),t(u)):l(p)}return r(f,null,r(qe,{type:"text",value:i,onChange:c,error:a,placeholder:n}))}var X1=x(()=>{"use strict";d();B()});function kUe(){return r("img",{src:"https://equicord.org/assets/favicon.png",alt:"Equicord",style:pse})}function EUe(){return r("img",{src:"https://equicord.org/assets/icons/vencord/icon-light.png",alt:"Vencord",style:pse})}function IUe(e){try{return new URL(e),!0}catch{return"Invalid URL"}}function MUe(){let e=tn(["cloud.authenticated","cloud.url","cloud.settingsSync"]),[t,o]=L(0),n=Vo(),{cloud:i}=e,s=i.authenticated,a=s&&i.settingsSync;async function l(c){i.url=c,i.authenticated=!1,await K1(),await YA(),o(u=>u+1)}return r(bi,null,r(re,{className:Z.top16},"Cloud Integration"),r(W,{className:Z.bottom16},"Equicord's cloud integration allows you to sync your settings across multiple devices and Discord installations. Your data is securely stored and can be easily restored at any time."),r(ur.Info,{className:Z.bottom16},"We use our own ",r(Go,{href:"https://github.com/Equicord/Equicloud"},"Equicloud backend")," with enhanced features. View our ",r(Go,{href:"https://equicord.org/cloud/policy"},"privacy policy")," to see what we store and how we use your data. Equicloud is BSD 3.0 licensed, so you can self-host if preferred."),r(fn,{title:"Enable Cloud Integration",description:"Connect to the cloud backend for settings synchronization. This will request authorization if you haven't set up cloud integration yet.",value:s,onChange:c=>{c?YA():i.authenticated=c},hideBorder:!0}),r(Bt,{className:Z.top20}),r(re,{className:Z.top20},"Cloud Backend"),r(W,{className:Z.bottom16},"Choose which cloud backend to use for storing your settings. You can switch between Equicord's and Vencord's cloud services, or use a self-hosted instance."),r(Ii,{options:dse,value:dse.find(c=>c.value===i.url),onChange:c=>l(c),className:Z.bottom16,closeOnSelect:!0,renderOptionPrefix:c=>c?.value?.includes("equicord")?r(kUe,null):r(EUe,null)}),r(Be,{gap:"8px",alignItems:"center"},r("div",{style:{flex:1}},r(bp,{key:`backendUrl-${t}`,value:i.url,onChange:async c=>{i.url=c,i.authenticated=!1,await K1()},validate:IUe})),r(Me,{disabled:!s,onClick:async()=>{i.authenticated=!1,await K1(),await YA()}},r(Be,{gap:"8px",alignItems:"center"},r(AUe,{color:"currentColor"}),"Reauthorize"))),r(Bt,{className:Z.top20}),r(re,{className:Z.top20},"Settings Sync"),r(W,{className:Z.bottom16},"Synchronize your Equicord settings to the cloud. This makes it easy to keep your configuration consistent across multiple devices without manual import/export."),r(fn,{title:"Enable Settings Sync",description:"When enabled, your settings can be synced to and from the cloud. Use the actions below to manually sync.",value:i.settingsSync,onChange:c=>{i.settingsSync=c},disabled:!s,hideBorder:!0}),r(Bt,{className:Z.top20}),r(re,{className:Z.top20},"Sync Rules for This Device"),r(W,{className:Z.bottom16},"This setting controls how settings move between ",r("strong",null,"this device")," and the cloud. You can let changes flow both ways, or choose one place to be the main source of truth."),r(to,{options:DUe,isSelected:c=>c===(ca.Vencord_cloudSyncDirection??"both"),select:c=>{ca.Vencord_cloudSyncDirection=c,n()},serialize:c=>c,isDisabled:!a}),r(Be,{gap:"8px",className:Z.top16},r(Me,{style:{flex:1},disabled:!a,onClick:()=>t8(!0)},r(Be,{gap:"8px",alignItems:"center"},r(iO,null),"Sync to Cloud")),r(Me,{style:{flex:1},disabled:!a,onClick:()=>JA(!0,!0)},r(Be,{gap:"8px",alignItems:"center"},r(rO,null),"Sync from Cloud"))),!s&&r(ur.Warning,{className:Z.top8},"Enable cloud integration above to use settings sync features."),r(Bt,{className:Z.top20}),r(re,{className:Z.top20},"Danger Zone"),r(W,{className:Z.bottom16},"Permanently delete all your data from the cloud. This action cannot be undone and will remove all synced settings and any other data stored on the cloud backend."),r(Be,{gap:"8px"},r(Me,{variant:"dangerPrimary",size:"medium",disabled:!a,onClick:()=>cse()},r(Be,{gap:"8px",alignItems:"center"},r(CUe,{color:"currentColor"}),"Delete Cloud Settings")),r(Me,{variant:"dangerSecondary",size:"medium",disabled:!s,onClick:()=>go.show({title:"Delete Cloud Account",body:"Are you sure you want to permanently delete your cloud account and all associated data? This action cannot be undone.",onConfirm:use,confirmText:"Delete Account",confirmColor:"vc-cloud-erase-data-danger-btn",cancelText:"Cancel"})},r(Be,{gap:"8px",alignItems:"center"},r(TUe,{color:"currentColor"}),"Delete Cloud Account"))))}var pse,AUe,CUe,TUe,dse,DUe,o8,mse=x(()=>{"use strict";d();Q();k$();O$();Co();X1();Ar();eo();Qs();ut();ao();ts();gd();wt();H1();r1();co();qo();fe();B();pse={width:20,height:20,borderRadius:4,verticalAlign:"middle"};AUe=De("M4 12a8 8 0 0 1 14.93-4H15"),CUe=De("2.81h8.36a3"),TUe=De("m13.47 1 .07.04c.45.06");dse=[{label:"Equicord Cloud",value:"https://cloud.equicord.org/"},{label:"Vencord Cloud",value:"https://api.vencord.dev/"}],DUe=[{label:"Two-way sync (changes go both directions)",value:"both"},{label:"This device is the source (upload only)",value:"push"},{label:"The cloud is the source (download only)",value:"pull"},{label:"Do not sync automatically (manual sync via buttons below only)",value:"manual"}];o8=Bi(MUe,"Cloud")});var F$,fse=x(()=>{"use strict";d();Q();Ar();Qs();ut();ts();wt();fa();co();qo();wu();B();L1();$U();F$=null});var gse=x(()=>{});function U$({donated:e=!1}){return r(Be,null,r(P1,{equicord:!0,className:e?"":"vc-donate-support-button",style:{marginTop:"1em"}}),r(yU,{className:e?"":"vc-invite-support-button",style:{marginTop:"1em"}}))}var hse=x(()=>{"use strict";d();eo();bU();_h();H();B()});function LUe(){let e=tn(),t=X.useMemo(()=>Math.random()>.5?NUe:BUe,[]),o=!1,n=z?.getCurrentUser(),i=[{key:"useQuickCss",title:"Enable Custom CSS",description:"Load custom CSS from the QuickCSS editor. This allows you to customize Discord's appearance with your own styles.",restartRequired:!0,warning:{enabled:!1}},!1,!1,!1,!1,!1];return r(bi,null,yse(n?.id)||$$(n?.id)?r(Mw,{title:"Donations",subtitle:"Thank you for donating!",description:yse(n?.id)&&$$(n?.id)?"All Vencord users can see your Vencord donor badge, and Equicord users can see your Equicord donor badge. To change your Vencord donor badge, contact @vending.machine. For your Equicord donor badge, make a ticket in Equicord's server.":$$(n?.id)?"All Vencord users can see your badge! You can manage your perks by messaging @vending.machine.":"All Equicord users can see your badge! You can manage your perks by making a ticket in Equicord's server.",cardImage:PUe,backgroundImage:xse,backgroundColor:"#ED87A9"},r(U$,{donated:!0})):r(Mw,{title:"Support the Project",description:"Please consider supporting the development of Equicord by donating!",cardImage:t,backgroundImage:xse,backgroundColor:"#c3a3ce"},r(U$,null)),lu(n?.id)&&r(Mw,{title:"Contributions",subtitle:"Thank you for contributing!",description:"Since you've contributed to Equicord you now have a cool new badge!",cardImage:_Ue,backgroundImage:RUe,backgroundColor:"#EDCC87"},r(Me,{variant:"none",size:"medium",type:"button",onClick:()=>wd(n),className:"vc-contrib-button"},r(l1,{"aria-hidden":!0,fill:"#000000",className:"vc-contrib-github"}),"See what you've contributed to")),r(re,{className:Z.top16},"Quick Actions"),r(W,{className:Z.bottom16},"Common actions you might want to perform. These shortcuts give you quick access to frequently used features without navigating through menus."),r(Wh,null,r(Pa,{Icon:$S,text:"Notification Log",action:D0}),r(Pa,{Icon:Cm,text:"Edit QuickCSS",action:()=>VencordNative.quickCss.openEditor()}),!1,!1,r(Pa,{Icon:l1,text:"View Source Code",action:()=>VencordNative.native.openExternal("https://github.com/"+Sd)})),r(Bt,{className:Z.top20}),r(re,{className:Z.top20},"Client Settings"),r(W,{className:Z.bottom16},"Configure how Equicord behaves and integrates with Discord. These settings affect the Discord client's appearance and behavior."),r(ur.Info,{className:Z.bottom20,style:{width:"100%"}},"You can customize where this settings section appears in Discord's settings menu by configuring the"," ",r("a",{role:"button",onClick:()=>Rs(pt.Settings),style:{cursor:"pointer",color:"var(--text-link)"}},"Settings Plugin"),"."),i.filter(s=>!!s).map(s=>r(fn,{key:s.key,value:e[s.key],onChange:a=>e[s.key]=a,title:s.title,description:s.warning.enabled?r(f,null,s.description,r(ur.Warning,{className:Z.top8,style:{width:"100%"}},s.warning.message)):s.description,hideBorder:!0})),o&&r(f,null,r(Bt,{className:Z.top20}),r(re,{className:Z.top20},"Window Vibrancy"),r(W,{className:Z.bottom16},"Customize the macOS window vibrancy effect. This controls the blur and transparency style of the Discord window. Changes require a restart to take effect."),r(to,{className:Z.bottom20,placeholder:"Window vibrancy style",options:[{label:"No vibrancy",value:void 0},{label:"Under Page (window tinting)",value:"under-page"},{label:"Content",value:"content"},{label:"Window",value:"window"},{label:"Selection",value:"selection"},{label:"Titlebar",value:"titlebar"},{label:"Header",value:"header"},{label:"Sidebar",value:"sidebar"},{label:"Tooltip",value:"tooltip"},{label:"Menu",value:"menu"},{label:"Popover",value:"popover"},{label:"Fullscreen UI (transparent but slightly muted)",value:"fullscreen-ui"},{label:"HUD (Most transparent)",value:"hud"}],select:s=>e.macosVibrancyStyle=s,isSelected:s=>e.macosVibrancyStyle===s,serialize:Nl})),r(Bt,{className:Z.top20}),r(re,{className:Z.top20},"Notifications"),r(W,{className:Z.bottom16},"Configure how Equicord handles notifications. You can customize when and how you receive alerts, or view a history of past notifications."),r(Be,{gap:"16px"},r(Me,{onClick:PA},"Notification Settings"),r(Me,{variant:"secondary",onClick:D0},"View Notification Log")))}function yse(e){let t=Ul.getEquicordDonorBadges(e);return Lt.getMember(au,e)?.roles.includes(xh)||!!t}function $$(e){let t=Ul.getDonorBadges(e);return Lt.getMember(yh,e)?.roles.includes(s1)||!!t}var NUe,BUe,PUe,_Ue,xse,RUe,W7t,n8,bse=x(()=>{"use strict";d();gse();Lw();Wo();Q();Co();Ar();eo();Qs();ut();ao();gd();wt();fa();TA();SU();Zh();H();nt();co();xt();yd();B();_h();hse();jU();NUe="https://cdn.discordapp.com/emojis/1026533090627174460.png",BUe="https://equicord.org/assets/favicon.png",PUe="https://cdn.discordapp.com/emojis/1238120638020063377.png",_Ue="https://cdn.discordapp.com/emojis/1026533070955872337.png",xse="https://media.discordapp.net/stickers/1311070116305436712.png?size=2048",RUe="https://media.discordapp.net/stickers/1311070166481895484.png?size=2048",W7t=de("vc-vencord-tab-");n8=Bi(LUe,"Equicord Settings")});var Nw=x(()=>{"use strict";d();ane();Ire();H1();Tie();Pie();KA();p$();qA();Gie();mse();fse();bse()});function OUe(e){let t={display:e.inline?"inline-grid":"grid",gridTemplateColumns:`repeat(${e.columns}, 1fr)`,gap:e.gap,...e.style};return r("div",{...e,style:t},e.children)}var vse=x(()=>{"use strict";d()});var H$={};Ao(H$,{AddonCard:()=>jh,BackupAndRestoreTab:()=>Yw,BackupRestoreIcon:()=>eO,Badge:()=>Dw,BadgeVariants:()=>NLe,BaseText:()=>Y,Button:()=>Me,ButtonCompat:()=>c1,Card:()=>cn,ChangelogTab:()=>Gw,CheckedTextInput:()=>bp,CloudDownloadIcon:()=>rO,CloudIcon:()=>VL,CloudTab:()=>o8,CloudUploadIcon:()=>iO,CodeBlock:()=>Hl,CogWheel:()=>u0,ColorPaletteIcon:()=>oO,CopyIcon:()=>ol,DeleteIcon:()=>$i,Divider:()=>Bt,DonateButton:()=>P1,ErrorBoundary:()=>ee,ErrorCard:()=>Mi,EyeIcon:()=>tO,Flex:()=>Be,FolderIcon:()=>uu,FormSwitch:()=>fn,FormSwitchCompat:()=>aO,GithubIcon:()=>l1,Grid:()=>OUe,Heading:()=>re,HeadingPrimary:()=>Jo,HeadingSecondary:()=>so,HeadingTertiary:()=>Vn,Heart:()=>gp,IDIcon:()=>YL,ImageIcon:()=>nl,ImageInvisible:()=>c0,ImageVisible:()=>Sh,InfoIcon:()=>cu,InlineCode:()=>KFe,InviteButton:()=>yU,Link:()=>Go,LinkButton:()=>sO,LinkIcon:()=>hc,LogIcon:()=>$S,MagnifyingGlassIcon:()=>nO,MainSettingsIcon:()=>XL,Margins:()=>Z,Microphone:()=>zL,NoEntrySignIcon:()=>US,NotesIcon:()=>KL,Notice:()=>ur,NoticeVariants:()=>ALe,OpenExternalIcon:()=>_r,OwnerCrownIcon:()=>$L,PaintbrushIcon:()=>Cm,Paragraph:()=>W,PasteIcon:()=>qL,PatchHelperIcon:()=>U_e,PatchHelperTab:()=>Bie,PencilIcon:()=>zS,PlaceholderIcon:()=>ZL,PluginIcon:()=>GL,PluginsIcon:()=>JL,PluginsTab:()=>L0,PlusIcon:()=>Am,QuickAction:()=>Pa,QuickActionCard:()=>Wh,ReplyIcon:()=>O_e,ResetIcon:()=>jL,RestartIcon:()=>HS,SafetyIcon:()=>WL,ScreenshareIcon:()=>HL,SettingsTab:()=>bi,Span:()=>Tm,SpecialCard:()=>Mw,Switch:()=>os,TextButton:()=>Ia,TextColors:()=>zte,TextCompat:()=>FL,TextSizes:()=>$te,TextWeights:()=>Hte,ThemesTab:()=>E0,UpdaterIcon:()=>F_e,UpdaterTab:()=>F$,VencordTab:()=>n8,VesktopSettingsIcon:()=>$_e,WarningIcon:()=>UL,WebsiteIcon:()=>QL,generateMarginCss:()=>QO,generateTextCss:()=>OL,handleSettingsTabError:()=>UU,openContributorModal:()=>wd,openPluginModal:()=>Rs,openSettingsTabModal:()=>$1,wrapTab:()=>Bi});var Ad=x(()=>{"use strict";d();Et();Co();fs();X1();_0();Ar();tt();vc();eo();Qs();vse();ut();B1();ao();ts();w0();gd();wt();fa();u1();Im()});function Sse(){let e=Ee(t=>r(ee,{noop:!0,onError:()=>{vo(e),VencordNative.native.openExternal("https://github.com/sponsors/Vendicated")}},r(Pe,{...t},r(je,null,r(Jo,{style:{width:"100%",textAlign:"center",margin:0}},r(Be,{justifyContent:"center",alignItems:"center",gap:"0.5em"},r(gp,null),"Vencord Donor"))),r($e,null,r(Be,null,r("img",{role:"presentation",src:"https://cdn.discordapp.com/emojis/1026533070955872337.png",alt:"",style:{margin:"auto"}}),r("img",{role:"presentation",src:"https://cdn.discordapp.com/emojis/1026533090627174460.png",alt:"",style:{margin:"auto"}})),r("div",{style:{padding:"1em"}},r(W,null,"This Badge is a special perk for Vencord Donors"),r(W,{className:Z.top20},"Please consider supporting the development of Vencord by becoming a donor. It would mean a lot!!"))),r(ht,null,r(Be,{justifyContent:"center",style:{width:"100%"}},r(P1,null))))))}function wse(){let e=Ee(t=>r(ee,{noop:!0,onError:()=>{vo(e),VencordNative.native.openExternal("https://github.com/sponsors/thororen1234")}},r(Pe,{...t},r(je,null,r(Jo,{style:{width:"100%",textAlign:"center",margin:0}},r(Be,{justifyContent:"center",alignItems:"center",gap:"0.5em"},r(gp,null),"Equicord Donor"))),r($e,null,r(Be,null,r("img",{role:"presentation",src:"https://cdn.discordapp.com/emojis/1026533070955872337.png",alt:"",style:{margin:"auto"}}),r("img",{role:"presentation",src:"https://cdn.discordapp.com/emojis/1026533090627174460.png",alt:"",style:{margin:"auto"}})),r("div",{style:{padding:"1em"}},r(W,null,"This Badge is a special perk for Equicord (Not Vencord) Donors"),r(W,{className:Z.top20},"Please consider supporting the development of Equicord by becoming a donor. It would mean a lot! :3"))),r(ht,null,r(Be,{justifyContent:"center",style:{width:"100%"}},r(P1,{equicord:!0}))))))}var kse=x(()=>{"use strict";d();eo();B1();Ad();co();at()});async function Ese(e,t=!1){let o={};return t&&(o.cache="no-cache"),await fetch(e,o).then(n=>n.json())}async function z$(e=!1){let t=await Ese("https://badges.vencord.dev/badges.json",e),o=await Ese("https://equicord.org/badges.json",e);q$=t,j$=o}function lA({badge:e}){return r(M.Menu,{navId:"vc-badge-context",onClose:Dt.closeContextMenu,"aria-label":"Badge Options"},e.description&&r(M.MenuItem,{id:"vc-badge-copy-name",label:"Copy Badge Name",action:()=>$t(e.description)}),e.iconSrc&&r(M.MenuItem,{id:"vc-badge-copy-link",label:"Copy Badge Image Link",action:()=>$t(e.iconSrc)}))}var FUe,UUe,$Ue,HUe,zUe,GUe,q$,j$,G$,Ul,_h=x(()=>{"use strict";d();Soe();A1();tt();Nw();H();mt();At();xt();$();B();Ps();kse();FUe="https://cdn.discordapp.com/emojis/1092089799109775453.png?size=64",UUe="https://equicord.org/assets/favicon.png",$Ue="https://equicord.org/assets/icons/misc/userplugin.png",HUe={description:"Vencord Contributor",iconSrc:FUe,position:0,shouldShow:({userId:e})=>PL(e),onClick:(e,{userId:t})=>wd(z.getUser(t))},zUe={description:"Equicord Contributor",iconSrc:UUe,position:0,shouldShow:({userId:e})=>_L(e),onClick:(e,{userId:t})=>wd(z.getUser(t)),props:{style:{borderRadius:"50%",transform:"scale(0.9)"}}},GUe={description:"User Plugin Contributor",iconSrc:$Ue,position:0,shouldShow:({userId:e})=>!1,onClick:(e,{userId:t})=>wd(z.getUser(t)),props:{style:{borderRadius:"50%",transform:"scale(0.9)"}}},q$={},j$={};Ul=k({name:"BadgeAPI",description:"API to add badges to users",authors:[w.Megu,w.Ven,w.TheSun],required:!0,patches:[{find:"#{intl::PROFILE_USER_BADGES}",replacement:[{match:/alt:" ","aria-hidden":!0,src:.{0,50}(\i).iconSrc/,replace:"...$1.props,$&"},{match:/(?<=forceOpen:.{0,40}?\i\((\i)\.id\).{0,100}?)children:/,replace:"children:$1.component?$self.renderBadgeComponent({...$1}) :"},{match:/href:(\i)\.link/,replace:"...$self.getBadgeMouseEventHandlers($1),$&"}]},{find:"getLegacyUsername(){",replacement:{match:/getBadges\(\)\{.{0,100}?return\[/,replace:"$&...$self.getBadges(this),"}}],get DonorBadges(){return q$},get EquicordDonorBadges(){return j$},toolboxActions:{async"Refetch Badges"(){await z$(!0),D.show({id:D.genId(),message:"Successfully refetched badges!",type:D.Type.SUCCESS})}},userProfileBadges:[HUe,zUe,GUe],async start(){await z$(),clearInterval(G$),G$=setInterval(z$,1e3*60*30)},async stop(){clearInterval(G$)},getBadges(e){if(!e)return[];try{return fU(e)}catch(t){return new ke("BadgeAPI#getBadges").error(t),[]}},renderBadgeComponent:ee.wrap(e=>{let t=e.component;return r(t,{...e})},{noop:!0}),getBadgeMouseEventHandlers(e){let t={};if(!e)return t;let{onClick:o,onContextMenu:n}=e;return o&&(t.onClick=i=>o(i,e)),n&&(t.onContextMenu=i=>n(i,e)),t},getDonorBadges(e){return q$[e]?.map(t=>({iconSrc:t.badge,description:t.tooltip,position:0,props:{style:{borderRadius:"50%",transform:"scale(0.9)"}},onContextMenu(o,n){Dt.openContextMenu(o,()=>r(lA,{badge:n}))},onClick(){return Sse()}}))},getEquicordDonorBadges(e){return j$[e]?.map(t=>({iconSrc:t.badge,description:t.tooltip,position:0,props:{style:{borderRadius:"50%",transform:"scale(0.9)"}},onContextMenu(o,n){Dt.openContextMenu(o,()=>r(lA,{badge:n}))},onClick(){return wse()}}))}})});var VA,Ase=x(()=>{"use strict";d();H();$();VA=k({name:"ChatInputButtonAPI",description:"API to add buttons to the chat input",authors:[w.Ven],patches:[{find:'"sticker")',replacement:{match:/0===(\i)\.length(?=.{0,25}?\(0,\i\.jsxs?\)\(.{0,75}?children:\1)/,replace:"(Vencord.Api.ChatButtons._injectButtons($1,arguments[0]),$&)"}}]})});var e9,Cse=x(()=>{"use strict";d();H();$();e9=k({name:"CommandsAPI",authors:[w.Arjix],description:"Api required by anything that uses commands",patches:[{find:',"tenor"',replacement:[{match:/(?<=\w=)(\w)(\.filter\(.{0,60}tenor)/,replace:"Vencord.Api.Commands._init($1)$2"}]},{find:"Unexpected value for option",replacement:{match:/,(\i)\.execute\((\i),(\i)\)/,replace:(e,t,o,n)=>`,Vencord.Api.Commands._handleCommand(${t}, ${o}, ${n})`}},{find:"#{intl::COMMANDS_OPTIONAL_COUNT}",replacement:[{match:/children:(?=\i\?\?\i\?\.name)(?<=command:(\i),.+?)/,replace:"children:$1.plugin??"}]}]})});var t9,Tse=x(()=>{"use strict";d();H();$();t9=k({name:"ContextMenuAPI",description:"API for adding/removing items to/from context menus.",authors:[w.Nuckyz,w.Ven,w.Kyuuhachi],required:!0,patches:[{find:"\u266B (\u3064\uFF61\u25D5\u203F\u203F\u25D5\uFF61)\u3064 \u266A",replacement:{match:/(?=let{navId:)(?<=function \i\((\i)\).+?)/,replace:"$1=Vencord.Api.ContextMenu._usePatchContextMenu($1);"}},{find:"navId:",all:!0,noWarn:!0,replacement:[{match:/navId:(?=.+?([,}].*?\)))/g,replace:(e,t)=>t.match(/}=.+/)==null?`contextMenuAPIArguments:typeof arguments!=='undefined'?arguments:[],${e}`:e}]}]})});var o9,Ise=x(()=>{"use strict";d();H();$();o9=k({name:"DynamicImageModalAPI",authors:[w.sadan,w.Nuckyz],description:"Allows you to omit either width or height when opening an image modal",patches:[{find:".renderLinkComponent",replacement:{match:/(?<=\i=)(null!=\i&&0!==\i)&&(null!=\i&&0!==\i)/,replace:"($1)||($2)"}}]})});var Dse,Mse=x(()=>{d();(window.VencordStyles??=new Map).set("src/plugins/_api/memberListDecorators/style.css",{name:"src/plugins/_api/memberListDecorators/style.css",source:`.vc-member-list-decorators-wrapper {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.25em;
}

.vc-member-list-decorators-wrapper:not(:empty) {
    /* Margin to match default Discord decorators */
    margin-left: 0.25em;
}
`,classNames:{},dom:null});Dse="src/plugins/_api/memberListDecorators/style.css"});var n9,Nse=x(()=>{"use strict";d();H();$();Mse();n9=k({name:"MemberListDecoratorsAPI",description:"API to add decorators to member list (both in servers and DMs)",authors:[w.TheSun,w.Ven],managedStyle:Dse,patches:[{find:"#{intl::GUILD_OWNER}),children:",replacement:[{match:/children:\[(?=.{0,300},lostPermissionTooltipText:)/,replace:"children:[Vencord.Api.MemberListDecorators.__getDecorators(arguments[0],'guild'),"}]},{find:"PrivateChannel.renderAvatar",replacement:{match:/decorators:(\i\.isSystemDM\(\)\?.{0,100}:null)/,replace:"decorators:[Vencord.Api.MemberListDecorators.__getDecorators(arguments[0],'dm'),$1]"}}]})});var Bse,r9,Pse=x(()=>{"use strict";d();H();ad();$();Bse={radio:"MenuRadioItem",separator:"MenuSeparator",checkbox:"MenuCheckboxItem",groupstart:"MenuGroup",control:"MenuControlItem",compositecontrol:"MenuControlItem",item:"MenuItem",customitem:"MenuItem"},r9=k({name:"MenuItemDemanglerAPI",description:"Demangles Discord's Menu Item module",authors:[w.Ven],required:!0,patches:[{find:"Menu API only allows Items",replacement:{match:/function.{0,80}type===(\i\.\i)\).{0,50}navigable:.+?Menu API/s,replace:(e,t)=>{let o=[],n=Ti(/\(\i\.type===(\i\.\i)\)/g),i=/type:"(\w+)"/g,s;for(;(s=n.exec(e))!==null;){let a=s[1];i.lastIndex=n.lastIndex;let l=i.exec(e)?.[1];if(l&&l in Bse){let c=Bse[l];o.push(`Object.defineProperty(${a},"name",{value:"${c}"})`)}}return o.length<6&&console.warn("[MenuItemDemanglerAPI] Expected to at least remap 6 items, only remapped",o.length),`${o.join(";")};${e}`}}}]})});var i9,_se=x(()=>{"use strict";d();H();$();i9=k({name:"MessageAccessoriesAPI",description:"API to add message accessories.",authors:[w.Cyn],patches:[{find:"#{intl::REMOVE_ATTACHMENT_BODY}",replacement:{match:/children:(\[[^\]]{0,100}?this.renderSuppressConfirmModal[^\]]{0,100}?\])/,replace:"children:Vencord.Api.MessageAccessories._modifyAccessories($1,this.props)"}}]})});var Rse,Lse=x(()=>{d();(window.VencordStyles??=new Map).set("src/plugins/_api/messageDecorations/style.css",{name:"src/plugins/_api/messageDecorations/style.css",source:`.vc-message-decorations-wrapper {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.25em;
}

.vc-message-decorations-wrapper:not(:empty) {
    /* Margin to match default Discord decorators */
    margin-left: 0.25em;

    /* Align vertically */
    position: relative;
    vertical-align: top;
    top: 0.1rem;
    height: calc(1rem + 4px);
    max-height: calc(1rem + 4px)
}
`,classNames:{},dom:null});Rse="src/plugins/_api/messageDecorations/style.css"});var s9,Ose=x(()=>{"use strict";d();H();$();Lse();s9=k({name:"MessageDecorationsAPI",description:"API to add decorations to messages",authors:[w.TheSun],managedStyle:Rse,patches:[{find:'"Message Username"',replacement:{match:/#{intl::GUILD_COMMUNICATION_DISABLED_BOTTOM_SHEET_TITLE}.+?renderPopout:.+?(?=\])/,replace:"$&,Vencord.Api.MessageDecorations.__addDecorationsToMessage(arguments[0])"}}]})});var a9,Fse=x(()=>{"use strict";d();H();$();a9=k({name:"MessageEventsAPI",description:"Api required by anything using message events.",authors:[w.Arjix,w.hunt,w.Ven],patches:[{find:"#{intl::EDIT_TEXTAREA_HELP}",replacement:{match:/(?<=,channel:\i\}\)\.then\().+?(?=\i\.content!==this\.props\.message\.content&&\i\((.+?)\)\})/,replace:(e,t)=>`async ${e}if(await Vencord.Api.MessageEvents._handlePreEdit(${t}))return Promise.resolve({shouldClear:false,shouldRefocus:true});`}},{find:".handleSendMessage,onResize:",replacement:{match:/let (\i)=\i\.\i\.parse\((\i),.+?\.getSendMessageOptions\(\{.+?\}\)?;(?=.+?(\i)\.flags=)(?<=\)\(({.+?})\)\.then.+?)/,replace:(e,t,o,n,i)=>e+`if(await Vencord.Api.MessageEvents._handlePreSend(${o}.id,${t},${i},${n}))return{shouldClear:false,shouldRefocus:true};`}},{find:'("interactionUsernameProfile',replacement:{match:/let\{id:\i}=(\i),{id:\i}=(\i);return \i\.useCallback\((\i)=>\{/,replace:(e,t,o,n)=>`const vcMsg=${t},vcChan=${o};${e}Vencord.Api.MessageEvents._handleClick(vcMsg,vcChan,${n});`}}]})});var l9,Use=x(()=>{"use strict";d();H();$();l9=k({name:"MessagePopoverAPI",description:"API to add buttons to message popovers.",authors:[w.KingFish,w.Ven,w.Nuckyz],patches:[{find:"#{intl::MESSAGE_UTILITIES_A11Y_LABEL}",replacement:{match:/(?<=\]\}\)),(.{0,40}togglePopout:.+?\}\))\]\}\):null,(?<=\((\i\.\i),\{label:.+?:null,(\i)\?\(0,\i\.jsxs?\)\(\i\.Fragment.+?message:(\i).+?)/,replace:(e,t,o,n,i)=>`]}):null,Vencord.Api.MessagePopover._buildPopoverElements(${o},${i}),${n}?${t}:null,`}}]})});var c9,$se=x(()=>{"use strict";d();H();$();c9=k({name:"MessageUpdaterAPI",description:"API for updating and re-rendering messages.",authors:[w.Nuckyz],patches:[{find:"}renderStickersAccessories(",replacement:{match:/(?<=this.props,\i,\[)"message",/,replace:""}}]})});var u9,Hse=x(()=>{"use strict";d();H();$();u9=k({name:"NicknameIconsAPI",description:"API to add icons to the nickname, in profiles",authors:[w.Nuckyz],patches:[{find:"#{intl::USER_PROFILE_PRONOUNS}",replacement:{match:/(?<=isVerifiedBot\(\)}\).{0,60})children:(\i)/,replace:"children:[...Vencord.Api.NicknameIcons._renderIcons({userId:arguments[0].user?.id}),$1]"}}]})});var d9,zse=x(()=>{"use strict";d();H();$();d9=k({name:"NoticesAPI",description:"Fixes notices being automatically dismissed",authors:[w.Ven],required:!0,patches:[{find:'"NoticeStore"',replacement:[{match:/(?<=!1;)\i=null;(?=.{0,80}getPremiumSubscription\(\))/g,replace:"if(Vencord.Api.Notices.currentNotice)return false;$&"},{match:/(?<=,NOTICE_DISMISS:function\(\i\){)return null!=(\i)/,replace:(e,t)=>`if(${t}?.id=="EquicordNotice")return(${t}=null,Vencord.Api.Notices.nextNotice(),true);${e}`},{match:/(?<=function (\i)\(\i\){)return null!=(\i)(?=.+?NOTICE_DISMISS:\1)/,replace:(e,t,o)=>`if(${o}?.id=="EquicordNotice")return(${o}=null,Vencord.Api.Notices.nextNotice(),true);${e}`,noWarn:!0}]}]})});var p9,Gse=x(()=>{"use strict";d();H();$();p9=k({name:"ServerListAPI",authors:[w.kemo],description:"Api required for plugins that modify the server list",patches:[{find:"#{intl::DISCODO_DISABLED}",replacement:{match:/(?<=#{intl::DISCODO_DISABLED}.+?return)(\(.{0,150}?tutorialId:"friends-list".+?}\))(?=}function)/,replace:"[$1].concat(Vencord.Api.ServerList.renderAll(Vencord.Api.ServerList.ServerListRenderPosition.Above))"}},{find:".setGuildsTree(",replacement:[{match:/(?<=#{intl::SERVERS}\),gap:"xs",children:)\i\.map\(.{0,50}\.length\)/,replace:"Vencord.Api.ServerList.renderAll(Vencord.Api.ServerList.ServerListRenderPosition.In).concat($&)"},{match:/lastTargetNode.{0,25}\?null:\i,/,replace:"$&...Vencord.Api.ServerList.renderAll(Vencord.Api.ServerList.ServerListRenderPosition.Below),"}]}]})});var m9,qse=x(()=>{"use strict";d();H();$();m9=k({name:"UserSettingsAPI",description:"Patches Discord's UserSettings to expose their group and name.",authors:[w.Nuckyz],patches:[{find:",updateSetting:",replacement:[{match:/\.updateAsync\(.+?(?=,useSetting:)/,replace:"$&,userSettingsAPIGroup:arguments[0],userSettingsAPIName:arguments[1]"},{match:/updateSetting:.{0,100}SELECTIVELY_SYNCED_USER_SETTINGS_UPDATE/,replace:"userSettingsAPIGroup:arguments[0].userSettingsAPIGroup,userSettingsAPIName:arguments[0].userSettingsAPIName,$&"},{match:/updateSetting:.{0,60}USER_SETTINGS_OVERRIDE_CLEAR/,replace:"userSettingsAPIGroup:arguments[0].userSettingsAPIGroup,userSettingsAPIName:arguments[0].userSettingsAPIName,$&"}]}]})});var jse,f9,Wse=x(()=>{"use strict";d();Q();H();At();$();jse=R({disableAnalytics:{type:3,description:"Disable Discord's tracking (analytics/'science')",default:!0,restartNeeded:!0}}),f9=k({name:"NoTrack",description:"Disable Discord's tracking (analytics/'science'), metrics and Sentry crash reporting",authors:[w.Cyn,w.Ven,w.Nuckyz,w.Arrow],required:!0,settings:jse,patches:[{find:"AnalyticsActionHandlers.handle",predicate:()=>jse.store.disableAnalytics,replacement:{match:/^.+$/,replace:"()=>{}"}},{find:".METRICS_V2",replacement:[{match:/this\._intervalId=/,replace:"this._intervalId=void 0&&"},{match:/(?:increment|distribution)\(\i(?:,\i)?\){/g,replace:"$&return;"}]},{find:".BetterDiscord||null!=",replacement:{match:/(?=let \i=window;)/,replace:"return false;"}}],flux:{TRACK(e){e?.resolve?.()}},startAt:"Init",start(){Object.defineProperty(Function.prototype,"g",{configurable:!0,set(e){Object.defineProperty(this,"g",{value:e,configurable:!0,enumerable:!0,writable:!0});let{stack:t}=new Error;if(this.c!=null||!t?.includes("http")||!String(this).includes("exports:{}"))return;let o=t.match(/http.+?(?=:\d+?:\d+?$)/m)?.[0];if(!o)return;let n=new XMLHttpRequest;if(n.open("GET",o,!1),n.send(),!!n.responseText.includes(".DiscordSentry="))throw new ke("NoTrack","#8caaee").info("Disabling Sentry by erroring its WebpackInstance"),Reflect.deleteProperty(Function.prototype,"g"),Reflect.deleteProperty(window,"DiscordSentry"),new Error("Sentry successfully disabled")}}),Object.defineProperty(window,"DiscordSentry",{configurable:!0,set(){new ke("NoTrack","#8caaee").error("Failed to disable Sentry. Falling back to deleting window.DiscordSentry"),Reflect.deleteProperty(Function.prototype,"g"),Reflect.deleteProperty(window,"DiscordSentry")}})}})});var W$,K$,hs,vi,Xm=x(()=>{"use strict";d();Q();ao();fa();Zh();H();mt();Km();$();fe();W$=He("SECTION","SIDEBAR_ITEM","PANEL"),K$=R({settingsLocation:{type:4,description:"Where to put the Equicord settings section",options:[{label:"At the very top",value:"top"},{label:"Above the Nitro section",value:"aboveNitro",default:!0},{label:"Below the Nitro section",value:"belowNitro"},{label:"Above Activity Settings",value:"aboveActivity"},{label:"Below Activity Settings",value:"belowActivity"},{label:"At the very bottom",value:"bottom"}]}}),hs=[["EquicordSettings","equicord_main_panel"],["EquicordPlugins","equicord_plugins_panel"],["EquicordThemes","equicord_themes_panel"],["EquicordUpdater","equicord_updater_panel"],["EquicordChangelog","equicord_changelog_panel"],["EquicordCloud","equicord_cloud_panel"],["EquicordBackupAndRestore","equicord_backup_restore_panel"],["EquicordPatchHelper","equicord_patch_helper_panel"],["EquibopSettings","equicord_equibop_settings_panel"]],vi=k({name:"Settings",description:"Adds Settings UI and debug info",authors:[w.Ven,w.Megu],required:!0,settings:K$,patches:[{find:"#{intl::COPY_VERSION}",replacement:[{match:/\.RELEASE_CHANNEL/,replace:"$&.replace(/^./, c => c.toUpperCase())"},{match:/"text-xxs\/normal".{0,300}?(?=null!=(\i)&&(.{0,20}\i\.Text.{0,200}?,children:).{0,15}?("span"),({className:\i\.\i,children:\["Build Override: ",\1\.id\]\})\)\}\))/,replace:(e,t,o,n,i)=>(i=i.replace(/children:\[.+\]/,""),`${e},$self.makeInfoElements(${n},${i}).map(e=>${o}e})),`)},{match:/"text-xs\/normal".{0,300}?\[\(0,\i\.jsxs?\)\((.{1,10}),(\{[^{}}]+\{.{0,20}className:\i.\i,.+?\})\)," "/,replace:(e,t,o)=>(o=o.replace(/children:\[.+\]/,""),`${e},$self.makeInfoElements(${t},${o})`)},{match:/copyValue:\i\.join\(" "\)/g,replace:"$& + $self.getInfoString()"}]},{find:".SEARCH_NO_RESULTS&&0===",replacement:[{match:/(?<=section:(.{0,50})\.DIVIDER\}\))([,;])(?=.{0,200}(\i)\.push.{0,100}label:(\i)\.header)/,replace:(e,t,o,n,i)=>`${o} $self.addSettings(${n}, ${i}, ${t}) ${o}`},{match:/({(?=.+?function (\i).{0,160}(\i)=\i\.useMemo.{0,140}return \i\.useMemo\(\(\)=>\i\(\3).+?\(\)=>)\2/,replace:(e,t,o)=>`${t}$self.wrapSettingsHook(${o})`}]},{find:"#{intl::USER_SETTINGS_ACTIONS_MENU_LABEL}",replacement:{match:/null!=\(\i=Object.values\(\i\.\i\).{0,50}?&&(?=\(0,\i\.openUserSettings\)\(\i,\{section:\i)/,replace:""}},{find:".buildLayout().map",replacement:{match:/(\i)\.buildLayout\(\)(?=\.map)/,replace:"$self.buildLayout($1)"}},{find:"getWebUserSettingFromSection",replacement:{match:/new Map\(\[(?=\[.{0,10}\.ACCOUNT,.{0,10}\.ACCOUNT_PANEL)/,replace:"new Map([...$self.getSettingsSectionMappings(),"}}],buildEntry(e){let{key:t,title:o,panelTitle:n=o,Component:i,Icon:s}=e,a={key:t+"_panel",type:W$.PANEL,useTitle:()=>n,buildLayout:()=>[],StronglyDiscouragedCustomComponent:()=>r(i,null),render:()=>r(i,null)};return{key:t,type:W$.SIDEBAR_ITEM,legacySearchKey:o.toUpperCase(),getLegacySearchKey:()=>o.toUpperCase(),useTitle:()=>o,icon:()=>r(s,{width:20,height:20}),buildLayout:()=>[a]}},getSettingsSectionMappings(){return hs},buildLayout(e){let t=e.buildLayout();if(e.key!=="$Root"||!Array.isArray(t)||t.some(u=>u?.key==="equicord_section"))return t;let{buildEntry:o}=this,n=[o({key:"equicord_main",title:"Equicord",panelTitle:"Equicord Settings",Component:n8,Icon:XL}),o({key:"equicord_plugins",title:"Plugins",Component:L0,Icon:JL}),o({key:"equicord_themes",title:"Themes",Component:E0,Icon:Cm}),!1,o({key:"equicord_changelog",title:"Changelog",Component:Gw,Icon:$S}),o({key:"equicord_cloud",title:"Cloud",panelTitle:"Equicord Cloud",Component:o8,Icon:VL}),o({key:"equicord_backup_restore",title:"Backup & Restore",Component:Yw,Icon:eO}),!1,...this.customEntries.map(o)].filter(R0),i={key:"equicord_section",type:W$.SECTION,useTitle:()=>"Equicord Settings",buildLayout:()=>n},{settingsLocation:s}=K$.store,a={top:"user_section",aboveNitro:"billing_section",belowNitro:"billing_section",aboveActivity:"activity_section",belowActivity:"activity_section",bottom:"logout_section"},l=a[s]??a.top,c=t.findIndex(u=>typeof u?.key=="string"&&u.key===l);return c===-1?c=2:s.startsWith("below")&&(c+=1),t.splice(c,0,i),t},customSections:[],customEntries:[],makeSettingsCategories(e){return[{section:e.HEADER,label:"Equicord",className:"vc-settings-header"},{section:"EquicordSettings",label:"Equicord",element:n8,className:"vc-settings"},{section:"EquicordPlugins",label:"Plugins",searchableTitles:["Plugins"],element:L0,className:"vc-plugins"},{section:"EquicordThemes",label:"Themes",searchableTitles:["Themes"],element:E0,className:"vc-themes"},!1,{section:"EquicordChangelog",label:"Changelog",searchableTitles:["Changelog"],element:Gw,className:"vc-changelog"},{section:"EquicordCloud",label:"Cloud",searchableTitles:["Cloud"],element:o8,className:"vc-cloud"},{section:"EquicordBackupAndRestore",label:"Backup & Restore",searchableTitles:["Backup & Restore"],element:Yw,className:"vc-backup-restore"},!1,...this.customSections.map(t=>t(e)),{section:e.DIVIDER}].filter(Boolean)},isRightSpot({header:e,settings:t}){let o=t?.[0];if(o==="LOGOUT"||o==="SOCIAL_LINKS")return!0;let{settingsLocation:n}=K$.store;if(n==="bottom")return o==="LOGOUT";if(n==="belowActivity")return o==="CHANGELOG";if(e)try{let i={top:St("USER_SETTINGS"),aboveNitro:St("BILLING_SETTINGS"),belowNitro:St("APP_SETTINGS"),aboveActivity:St("ACTIVITY_SETTINGS")};return!i[n]||i[n].endsWith("_SETTINGS")?o==="PREMIUM":e===i[n]}catch{return o==="PREMIUM"}},patchedSettings:new WeakSet,addSettings(e,t,o){this.patchedSettings.has(e)||!this.isRightSpot(t)||(this.patchedSettings.add(e),e.push(...this.makeSettingsCategories(o)))},wrapSettingsHook(e){return(...t)=>{let o=e(...t);return this.patchedSettings.has(o)||o.unshift(...this.makeSettingsCategories({HEADER:"HEADER",DIVIDER:"DIVIDER",CUSTOM:"CUSTOM"})),o}},get electronVersion(){return VencordNative.native.getVersions().electron??window.legcord?.electron??null},get chromiumVersion(){try{return VencordNative.native.getVersions().chrome??navigator.userAgentData?.brands?.find(e=>e.brand==="Chromium"||e.brand==="Google Chrome")?.version??null}catch{return null}},getVersionInfo(e=!0){let t="";return t="Web",t="Standalone",e&&t?` (${t})`:t},getInfoRows(){let{electronVersion:e,chromiumVersion:t,getVersionInfo:o}=this,n=[`Equicord ${P0}${o()}`];return e&&n.push(`Electron ${e}`),t&&n.push(`Chromium ${t}`),n},getInfoString(){return`
`+this.getInfoRows().join(`
`)},makeInfoElements(e,t){return this.getInfoRows().map((o,n)=>r(e,{key:n,...t},o))}})});function qUe(e){D.show({message:e,type:D.Type.FAILURE,id:D.genId(),options:{position:D.Position.BOTTOM}})}function jUe(){return new Promise(e=>{go.show({title:"Restart Required",body:r(f,null,r("p",{style:{textAlign:"center"}},"Some plugins require a restart to fully disable."),r("p",{style:{textAlign:"center"}},"Would you like to restart now?")),confirmText:"Restart Now",cancelText:"Later",onConfirm:()=>e(!0),onCancel:()=>e(!1)})})}async function r8(e){let t=!1;function o(){t=!0}async function n(u,p){return t?await jUe()?(u.enabled=!p,location.reload(),!0):!1:!0}let i=pt[e],s=Ge.plugins[i.name],l=s.enabled??!1;if(!l){let{restartNeeded:u,failures:p}=N1(i);if(p.length)return console.error(`Failed to start dependencies for ${i.name}: ${p.join(", ")}`),ku("Failed to start dependencies: "+p.join(", "),"Close",()=>null),!1;if(u)return s.enabled=!0,o(),await n(s,l)}if(i.patches?.length)return o(),await n(s,l);if(l&&!i.started)return s.enabled=!l,await n(s,l);if(!(l?qm(i):Gm(i))){s.enabled=!1;let u=`Error while ${l?"stopping":"starting"} plugin ${i.name}`;return console.error(u),qUe(u),!1}return s.enabled=!l,await n(s,l)}function WUe(e){let t=parseInt(e.split(".")[2]);return t>=22e3?"Windows 11":t>=10240?"Windows 10":t>=9200?"Windows 8.1":t>=7600?"Windows 7":`Windows (${e})`}function KUe(e){let t=parseInt(e.split(".")[0]);return t===25?"MacOS 26 (Tahoe)":t===24?"MacOS 15 (Sequoia)":t===23?"MacOS 14 (Sonoma)":t===22?"MacOS 13 (Ventura)":t===21?"MacOS 12 (Monterey)":t===20?"MacOS 11 (Big Sur)":t===19?"MacOS 10.15 (Catalina)":`MacOS (${e})`}function Y$(){return typeof DiscordNative>"u"?navigator.platform:DiscordNative.process.platform==="win32"?`${WUe(DiscordNative.os.release)}`:DiscordNative.process.platform==="darwin"?`${KUe(DiscordNative.os.release)} (${DiscordNative.process.arch==="arm64"?"Apple Silicon":"Intel Silicon"})`:DiscordNative.process.platform==="linux"?`${navigator.platform} (${DiscordNative.os.release})`:DiscordNative.process.platform}var g9=x(()=>{"use strict";d();T0();Wo();Q();B()});var Q$,F0,Z$=x(()=>{"use strict";d();T0();Q();H();$();B();Q$=R({idleTimeout:{description:"Minutes before Discord goes idle (0 to disable auto-idle)",type:5,markers:uo(0,60,5),default:10,stickToMarkers:!1,restartNeeded:!0},remainInIdle:{description:"When you come back to Discord, remain idle until you confirm you want to go online",type:3,default:!0}}),F0=k({name:"CustomIdle",description:"Allows you to set the time before Discord goes idle (or disable auto-idle)",authors:[w.newwares],settings:Q$,patches:[{find:'type:"IDLE",idle:',replacement:[{match:/(?<=Date\.now\(\)-\i>)\i\.\i\|\|/,replace:"$self.getIdleTimeout()||"},{match:/Math\.min\((\i\*\i\.\i\.\i\.SECOND),\i\.\i\)/,replace:"$1"},{match:/\i\.\i\.dispatch\({type:"IDLE",idle:!1}\)/,replace:"$self.handleOnline()"}]}],handleOnline(){if(!Q$.store.remainInIdle){V.dispatch({type:"IDLE",idle:!1});return}let e="Welcome back! Click the button to go online. Click the X to stay idle until reload.";Qh?.[1]===e||Rw.some(([,t])=>t===e)||ku(e,"Exit idle",()=>{C0(),V.dispatch({type:"IDLE",idle:!1})})},getIdleTimeout(){let{idleTimeout:e}=Q$.store;return e===0?1/0:e*6e4}})});async function VUe(){let e=await vd();return e&&(await F1(),xd()),e}function X$(){return"legcord"in window?{name:"LegCord",version:window.legcord.version}:"goofcord"in window?{name:"GoofCord",version:window.goofcord.version}:{name:typeof unsafeWindow<"u"?"UserScript":"Web",info:navigator.userAgent}}async function Kse(){let{RELEASE_CHANNEL:e}=window.GLOBAL_ENV,t=X$(),o=`${t.name}`;o+=`${t.version?` v${t.version}`:""}`,o+=`${t.info?` \u2022 ${t.info}`:""}`,o+=`${t.shortHash?` \u2022 [${t.shortHash}](<https://github.com/Equicord/Equibop/commit/${t.hash}>)`:""}`;let n=null,i=n?.spoofed?`${Y$()} (spoofed from ${n.originalPlatform})`:Y$(),s={Equicord:`v1.14.2.0 \u2022 [${P0}](<https://github.com/Equicord/Equicord/commit/${dl}>)${vi.getVersionInfo()} - ${Intl.DateTimeFormat("en-US",{dateStyle:"medium"}).format(1771622638204)}`,Client:`${e} ~ ${o}`,Platform:i},a=(["NoRPC","NoProfileThemes","NoMosaic","NoRoleHeaders","NoSystemBadge","AlwaysAnimate","ClientTheme","SoundTroll","Ingtoninator","NeverPausePreviews","IdleAutoRestart"].filter(yt)??[]).sort();yt(F0.name)&&F0.settings.store.idleTimeout===0&&a.push(F0.name);let c={"Activity Sharing Disabled":RE(()=>!XUe.getSetting(),!1),"Link Embeds Disabled":RE(()=>!JUe.getSetting(),!1),"Equicord DevBuild":!1,"Equibop DevBuild":!1,"Platform Spoofed":n?.spoofed??!1,"Has UserPlugins":Object.values(Kr).some(p=>p.userPlugin),">2 Weeks Outdated":1771622638204<Date.now()-12096e5,[`Potentially Problematic Plugins: ${a.join(", ")}
-# Note: These plugins might not be the cause of your problem. They are simply plugins that cause common issues.`]:a.length},u=`>>> ${Object.entries(s).map(([p,m])=>`**${p}**: ${m}`).join(`
`)}`;return u+=`
`+Object.entries(c).filter(([,p])=>p).map(([p])=>`\u26A0\uFE0F ${p}`).join(`
`),u.trim()}function Yse(){let e=a=>a.endsWith("API")||pt[a].required,t=Object.keys(pt).filter(a=>yt(a)&&!e(a)),o=t.filter(a=>!Kr[a].userPlugin).sort(),n=t.filter(a=>Kr[a].userPlugin).sort(),i=`**Enabled Plugins (${o.length}):**
${Bm(o.join(", "))}`;n.length&&(i+=`**Enabled UserPlugins (${n.length}):**
${Bm(n.join(", "))}`);let s=z.getCurrentUser();return t.length>100&&!lu(s.id)?(go.show({title:"You are attempting to get support!",body:r("div",null,r("div",{style:{display:"flex",justifyContent:"center",marginBottom:"1rem"}},r("img",{src:"https://media.tenor.com/QtGqjwBpRzwAAAAi/wumpus-dancing.gif"})),r(W,null,"Before you ask for help,"),r(W,null,"We do not handle support for users who use 100+ plugins"),r(W,null,"issue could be plugin confliction"),r(W,null,"try removing some plugins and see if it fixes!"))}),`${s.username} has more than 100 plugins enabled, please reduce the number of enabled plugins to get support.`):i}var YUe,QUe,ZUe,XUe,JUe,IPt,e$e,h9,J$=x(()=>{"use strict";d();yi();Wo();Q();Ra();Et();fs();tt();eo();ts();wt();fa();g9();Z$();Zh();H();mt();At();co();xt();yd();M1();Da();$();wu();B();Ps();Xm();YUe=/```snippet\n(.+?)```/s,QUe=[BE,CL,s1,wL,xh,DE,ME,NE],ZUe=async function(){}.constructor,XUe=nr("status","showCurrentGame"),JUe=nr("textAndImages","renderEmbeds");IPt=$m(vd),e$e=R({}).withPrivateSettings(),h9=k({name:"SupportHelper",required:!0,description:"Helps us provide support to you",authors:[w.Ven],dependencies:["UserSettingsAPI"],settings:e$e,patches:[{find:"#{intl::BEGINNING_DM}",replacement:{match:/#{intl::BEGINNING_DM},{.+?}\),(?=.{0,300}(\i)\.isMultiUserDM)/,replace:"$& $self.renderContributorDmWarningCard({ channel: $1 }),"}}],commands:[{name:"equicord-debug",description:"Send Equicord debug info",predicate:e=>lu(z.getCurrentUser()?.id)||l0(e?.guild?.id,!0),execute:async()=>({content:await Kse()})},{name:"equicord-plugins",description:"Send Equicord plugin list",predicate:e=>lu(z.getCurrentUser()?.id)||l0(e?.guild?.id,!0),execute:()=>{let e=Yse();return{content:typeof e=="string"?e:"Unable to generate plugin list."}}}],flux:{async CHANNEL_SELECT({channelId:e}){if(!LS.includes(e))return;let o=z.getCurrentUser()?.id;if(!o||lu(o))return;let n=Lt.getSelfMember(yh)?.roles||Lt.getSelfMember(au)?.roles;!n||QUe.some(i=>n.includes(i))}},renderMessageAccessory(e){let t=[],o=bh(e.message.author.id);if(!1&&t.push(r(U,{key:"vc-update",color:U.Colors.GREEN,onClick:async()=>{try{await VUe()?Re("Success! Restarting...",D.Type.SUCCESS):Re("Already up to date!",D.Type.MESSAGE)}catch(i){new ke(this.name).error("Error while updating:",i),Re("Failed to update :(",D.Type.FAILURE)}}},"Update Now")),LL(e.channel.id)&&Kt.can(Nt.SEND_MESSAGES,e.channel)&&o&&((e.message.content.includes("/equicord-debug")||e.message.content.includes("/equicord-plugins"))&&t.push(r(U,{key:"vc-dbg",color:U.Colors.PRIMARY,onClick:async()=>Na(e.channel.id,{content:await Kse()})},"Run /equicord-debug"),r(U,{key:"vc-plg-list",color:U.Colors.PRIMARY,onClick:async()=>{let i=Yse();typeof i=="string"&&Na(e.channel.id,{content:i})}},"Run /equicord-plugins")),o)){let i=YUe.exec(e.message.content||e.message.embeds[0]?.rawDescription||"");i&&t.push(r(U,{key:"vc-run-snippet",onClick:async()=>{try{let s=await ZUe(i[1])(),a=String(s);a&&await Vt(st.getChannelId(),{content:a}),Re("Success!",D.Type.SUCCESS)}catch(s){new ke(this.name).error("Error while running snippet:",s),Re("Failed to run snippet :(",D.Type.FAILURE)}}},"Run Snippet"))}return t.length?r(Be,null,t):null},renderContributorDmWarningCard:ee.wrap(({channel:e})=>{let t=e.getRecipientId();return!lu(t)||Tt.isFriend(t)||lu(z.getCurrentUser()?.id)?null:r(cn,{variant:"warning",className:Z.top8,defaultPadding:!0},"Please do not private message Equicord & Vencord plugin developers for support!",r("br",null),"Instead, use the support channel: ",Jt.parse("https://discord.com/channels/1173279886065029291/1297590739911573585"),!ne.getChannel(ip)&&" (Click the link to join)")},{noop:!0})})});var nx,V$=x(()=>{"use strict";d();H();mt();$();nx=k({name:"AlwaysExpandProfiles",description:"Always expands profile popouts to the full modal",authors:[w.thororen],patches:[{find:'"view-profile"',replacement:{match:/("PRESS_VIEW_PROFILE".{0,200})return(?<=userId:(\i\.id).*?)/,replace:"$1return $self.openUserModal($2);"},all:!0}],openUserModal(e){or(e)}})});var Qse,x9,eH,t$e,i8,y9,Zse=x(()=>{"use strict";d();Wo();Q();tt();V$();H();mt();$();fe();B();Qse=De(".POPOUT,user"),x9=!1,eH={current:null},t$e=ee.wrap(()=>{let{prioritizeServerProfile:e}=i8.use(["prioritizeServerProfile"]);return r(M.Menu,{navId:"vc-ap-server-profile",onClose:Dt.closeContextMenu},r(M.MenuItem,{id:"vc-ap-view-alternate-popout",label:e?"View Account Profile":"View Server Profile",disabled:Cn()?.getGuildId()==null,action:async t=>{if(yt(nx.name)){let o=await dp(z.getCurrentUser().id,{guild_id:Cn()?.getGuildId()},!1);return nx.openUserModal(o.userId)}x9=!0,eH.current?.click()}}),r(M.MenuCheckboxItem,{id:"vc-ap-prioritize-server-profile",label:"Prioritize Server Profile",checked:e,action:()=>i8.store.prioritizeServerProfile=!e}))},{noop:!0}),i8=R({prioritizeServerProfile:{type:3,description:"Prioritize Server Profile when left clicking your account panel",default:!1}}),y9=k({name:"AccountPanelServerProfile",description:"Right click your account panel in the bottom left to view your profile in the current server",authors:[w.Nuckyz,w.relitrix],settings:i8,patches:[{find:"#{intl::ACCOUNT_SPEAKING_WHILE_MUTED}",group:!0,replacement:[{match:/(\.AVATAR,children:.+?renderPopout:\((\i),\i\)=>){(.+?)}(?=,position)(?<=currentUser:(\i).+?)/,replace:(e,t,o,n,i)=>`${t}$self.UserProfile({popoutProps:${o},currentUser:${i},originalRenderPopout:()=>{${n}}})`},{match:/\.AVATAR,children:.+?onRequestClose:\(\)=>\{/,replace:"$&$self.onPopoutClose();"},{match:/(?:#{intl::5fWB8U::raw}|#{intl::SET_STATUS})\)(?<=ref:(\i),style:.+?)/,replace:"$&,onContextMenu:($self.grabRef($1),$self.openAccountPanelContextMenu)"}]}],get accountPanelRef(){return eH},grabRef(e){return eH=e,e},openAccountPanelContextMenu(e){Dt.openContextMenu(e,t$e)},onPopoutClose(){x9=!1},UserProfile:ee.wrap(({popoutProps:e,currentUser:t,originalRenderPopout:o})=>{if(i8.store.prioritizeServerProfile&&x9||!i8.store.prioritizeServerProfile&&!x9)return o();let n=Cn();return n?.getGuildId()==null||!Qse.$$vencordGetWrappedComponent()?o():r(Qse,{...e,user:t,currentUser:t,guildId:n.getGuildId(),channelId:n.id})},{noop:!0})})});var J1,b9,Xse=x(()=>{"use strict";d();Q();H();$();J1=R({icons:{type:3,description:"Always animate server icons, avatars, decor and more",default:!0},statusEmojis:{type:3,description:"Always animate status emojis",default:!0},serverBanners:{type:3,description:"Always animate server banners",default:!0},nameplates:{type:3,description:"Always animate nameplates",default:!0},roleGradients:{type:3,description:"Always animate role gradients",default:!0}}),b9=k({name:"AlwaysAnimate",description:"Animates anything that can be animated",authors:[w.FieryFlames],settings:J1,patches:[{find:"canAnimate:",predicate:()=>J1.store.icons,all:!0,noWarn:!0,replacement:{match:/canAnimate:.+?([,}].*?\))/g,replace:(e,t)=>t.match(/}=.+/)==null?`canAnimate:!0${t}`:e}},{find:"#{intl::GUILD_OWNER}),children:",predicate:()=>J1.store.statusEmojis,replacement:{match:/(\.CUSTOM_STATUS.+?animateEmoji:)\i/,replace:"$1!0"}},{find:"#{intl::DISCOVERABLE_GUILD_HEADER_PUBLIC_INFO}",predicate:()=>J1.store.serverBanners,replacement:{match:/(guildBanner:\i,animate:)\i(?=}\):null)/,replace:"$1!0"}},{find:".MINI_PREVIEW,[",predicate:()=>J1.store.nameplates,replacement:{match:/animate:\i,loop:.{0,15}===\i/,replace:"animate:true,loop:true"}},{find:"animateGradient:",predicate:()=>J1.store.roleGradients,all:!0,noWarn:!0,replacement:{match:/animateGradient:.+?([,}].*?\))/g,replace:(e,t)=>t.match(/}=.+/)==null?`animateGradient:!0${t}`:e}}]})});var Jse,v9,Vse=x(()=>{"use strict";d();Q();H();$();Jse=R({hideArrow:{type:3,default:!1,description:"Hide Arrow",restartNeeded:!0}});jn("AlwaysExpandRoles","ShowAllRoles");v9=k({name:"AlwaysExpandRoles",description:"Always expands the role list in profile popouts",authors:[w.surgedevs],isModified:!0,settings:Jse,patches:[{find:"hasDeveloperContextMenu:",replacement:[{match:/(?<=\?\i\.current\[\i\].{0,100}?)useState\(!1\)/,replace:"useState(!0)"},{match:/(?<=useLayoutEffect\(\(\)=>\{if\()\i/,replace:"false"},{match:/\(\)=>\i\.length<\i\.length/,replace:"()=>false",predicate:()=>Jse.store.hideArrow}]}]})});function eae(e){let t=ct.getGuild(e);t&&o$e(e,t.name)}var o$e,s8,S9,tae=x(()=>{"use strict";d();Q();H();$();fe();B();o$e=He("deleteGuild","sendTransferOwnershipPincode").deleteGuild;s8=R({domain:{type:3,default:!0,description:"Remove the untrusted domain popup when opening links",restartNeeded:!0},file:{type:3,default:!0,description:"Remove the 'Potentially Dangerous Download' popup when opening links",restartNeeded:!0},noDeleteSafety:{type:3,default:!0,description:"Removes the enter server name requirement when deleting a server",restartNeeded:!0},confirmModal:{type:3,description:'Should a "are you sure you want to delete" modal be shown?',default:!0}}),S9=k({name:"AlwaysTrust",description:"Removes the annoying untrusted domain and suspicious file popup",authors:[w.zt,w.Trwy],isModified:!0,settings:s8,patches:[{find:'="MaskedLinkStore",',replacement:{match:/(?<=isTrustedDomain\(\i\){)return \i\(\i\)/,replace:"return true"},predicate:()=>s8.store.domain},{find:"bitbucket.org",replacement:{match:/function \i\(\i\){(?=.{0,30}pathname:\i)/,replace:"$&return null;"},predicate:()=>s8.store.file},{find:".DELETE,onClick(){let",replacement:{match:/let\{name:\i\}=(\i)\.guild/,replace:"$self.HandleGuildDeleteModal($1);$&"},predicate:()=>s8.store.noDeleteSafety}],async HandleGuildDeleteModal(e){return s8.store.confirmModal?go.show({title:"Delete server?",body:r("p",null,"It's permanent, if that wasn't obvious."),confirmColor:U.Colors.RED,confirmText:"Delete",onConfirm:()=>eae(e.id),cancelText:"Cancel"}):eae(e.id)}})});var n$e,tH,w9,oH=x(()=>{"use strict";d();Wo();rH();H();$();n$e={ogg:[".ogv",".oga",".ogx",".ogm",".spx",".aac",".wma"],jpg:[".jpe",".jif",".jfi",".pjpeg",".pjp",".bmp",".tiff",".tif"],svg:[".svgz",".ai",".eps"],mp4:[".m4v",".m4r",".m4p",".avi",".mkv",".wmv",".flv",".3gp"],m4a:[".m4b",".aiff"],mov:[".movie",".qt",".asf",".rm",".rmvb"],png:[".ico",".cur"]},tH=Object.entries(n$e).reduce((e,[t,o])=>(o.forEach(n=>e[n]=`.${t}`),e),{}),w9=k({name:"FixFileExtensions",authors:[w.thororen],description:"Fixes file extensions by renaming them to a compatible supported format if possible",reporterTestable:2,patches:[{find:"async uploadFiles(",replacement:[{match:/async uploadFiles\((\i)\){/,replace:"$&$1.forEach($self.fixExt);"}],predicate:()=>!yt(V1.name)}],fixExt(e){let t=e.filename,n=nH.exec(t)?.index??t.lastIndexOf("."),i=n!==-1?t.substring(0,n):"",s=n!==-1?t.slice(n):"",a=tH[s]||s;e.filename=i+a}})});var r$e,iH,nH,Cu,V1,rH=x(()=>{"use strict";d();yi();Q();tt();oH();H();$();fe();B();r$e=vt("Children.map","isValidElement","dangerous:"),iH=Symbol("vcAnonymise"),nH=/\.tar\.\w+$/,Cu=R({anonymiseByDefault:{description:"Whether to anonymise file names by default",type:3,default:!0},spoilerMessages:{description:"Spoiler messages",type:3,default:!1},method:{description:"Anonymising method",type:4,options:[{label:"Random Characters",value:0,default:!0},{label:"Consistent",value:1},{label:"Timestamp",value:2}]},randomisedLength:{description:"Random characters length",type:1,default:7,disabled:()=>Cu.store.method!==0},consistent:{description:"Consistent filename",type:0,default:"image",disabled:()=>Cu.store.method!==1}}),V1=k({name:"AnonymiseFileNames",authors:[w.fawn],description:"Anonymise uploaded file names",isModified:!0,settings:Cu,patches:[{find:"async uploadFiles(",replacement:[{match:/async uploadFiles\((\i)\){/,replace:"$&$1.forEach($self.anonymise);"}]},{find:"#{intl::ATTACHMENT_UTILITIES_SPOILER}",replacement:{match:/(?<=children:\[)(?=.{10,80}tooltip:.{0,100}#{intl::ATTACHMENT_UTILITIES_SPOILER})/,replace:"arguments[0].canEdit!==false?$self.AnonymiseUploadButton(arguments[0]):null,"}}],AnonymiseUploadButton:ee.wrap(({upload:e})=>{let[t,o]=L(e[iH]??Cu.store.anonymiseByDefault);function n(){e[iH]=!t,o(!t)}return r(r$e,{tooltip:t?"Using anonymous file name":"Using normal file name",onClick:n},t?r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},r("path",{fill:"currentColor",d:"M17.06 13C15.2 13 13.64 14.33 13.24 16.1C12.29 15.69 11.42 15.8 10.76 16.09C10.35 14.31 8.79 13 6.94 13C4.77 13 3 14.79 3 17C3 19.21 4.77 21 6.94 21C9 21 10.68 19.38 10.84 17.32C11.18 17.08 12.07 16.63 13.16 17.34C13.34 19.39 15 21 17.06 21C19.23 21 21 19.21 21 17C21 14.79 19.23 13 17.06 13M6.94 19.86C5.38 19.86 4.13 18.58 4.13 17S5.39 14.14 6.94 14.14C8.5 14.14 9.75 15.42 9.75 17S8.5 19.86 6.94 19.86M17.06 19.86C15.5 19.86 14.25 18.58 14.25 17S15.5 14.14 17.06 14.14C18.62 14.14 19.88 15.42 19.88 17S18.61 19.86 17.06 19.86M22 10.5H2V12H22V10.5M15.53 2.63C15.31 2.14 14.75 1.88 14.22 2.05L12 2.79L9.77 2.05L9.72 2.04C9.19 1.89 8.63 2.17 8.43 2.68L6 9H18L15.56 2.68L15.53 2.63Z"})):r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",style:{transform:"scale(-1,1)"}},r("path",{fill:"currentColor",d:"M22.11 21.46L2.39 1.73L1.11 3L6.31 8.2L6 9H7.11L8.61 10.5H2V12H10.11L13.5 15.37C13.38 15.61 13.3 15.85 13.24 16.1C12.29 15.69 11.41 15.8 10.76 16.09C10.35 14.31 8.79 13 6.94 13C4.77 13 3 14.79 3 17C3 19.21 4.77 21 6.94 21C9 21 10.68 19.38 10.84 17.32C11.18 17.08 12.07 16.63 13.16 17.34C13.34 19.39 15 21 17.06 21C17.66 21 18.22 20.86 18.72 20.61L20.84 22.73L22.11 21.46M6.94 19.86C5.38 19.86 4.13 18.58 4.13 17C4.13 15.42 5.39 14.14 6.94 14.14C8.5 14.14 9.75 15.42 9.75 17C9.75 18.58 8.5 19.86 6.94 19.86M17.06 19.86C15.5 19.86 14.25 18.58 14.25 17C14.25 16.74 14.29 16.5 14.36 16.25L17.84 19.73C17.59 19.81 17.34 19.86 17.06 19.86M22 12H15.2L13.7 10.5H22V12M17.06 13C19.23 13 21 14.79 21 17C21 17.25 20.97 17.5 20.93 17.73L19.84 16.64C19.68 15.34 18.66 14.32 17.38 14.17L16.29 13.09C16.54 13.03 16.8 13 17.06 13M12.2 9L7.72 4.5L8.43 2.68C8.63 2.17 9.19 1.89 9.72 2.04L9.77 2.05L12 2.79L14.22 2.05C14.75 1.88 15.32 2.14 15.54 2.63L15.56 2.68L18 9H12.2Z"})))},{noop:!0}),anonymise(e){let t=e.filename,n=nH.exec(t)?.index??t.lastIndexOf("."),i=n!==-1?t.slice(n):"",s=l=>Cu.store.spoilerMessages?"SPOILER_"+l:l;if(Ge.plugins.FixFileExtensions.enabled&&(i=tH[i]||i),(e[iH]??Cu.store.anonymiseByDefault)===!1)return s(t+i);let a=(()=>{switch(Cu.store.method){case 0:let l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",c=Array.from({length:Cu.store.randomisedLength},()=>l[Math.floor(Math.random()*l.length)]).join("")+i;return s(c);case 1:return s(Cu.store.consistent+i);case 2:return s(Date.now().toString()+i)}})();e.filename=a},commands:[{name:"Spoiler",description:"Toggle your spoiler",inputType:0,options:[{name:"value",description:"Toggle your Spoiler (default is toggle)",required:!1,type:5}],execute:async(e,t)=>{Cu.store.spoilerMessages=!!Pt(e,"value",!Cu.store.spoilerMessages),Vt(t.channel.id,{content:Cu.store.spoilerMessages?"Spoiler enabled!":"Spoiler disabled!"})}}]})});async function oae(e,t){return(await zi.fetchAssetIds(e,[t]))[0]}async function i$e(e){let t={};return await jO(t,e),t.application}var nae,eb,k9,rae=x(()=>{"use strict";d();T0();Q();ut();ts();wt();H();$();B();nae={};jn("WebRichPresence","WebRichPresence (arRPC)");k9=k({name:"WebRichPresence",description:"Client plugin for arRPC to enable RPC on Discord Web (experimental)",authors:[w.Ducko],reporterTestable:2,hidden:!("legcord"in window),settingsAboutComponent:()=>r(f,null,r(so,null,"How to use arRPC"),r(W,null,r(Go,{href:"https://github.com/OpenAsar/arrpc/tree/main#server"},"Follow the instructions in the GitHub repo")," to get the server running, and then enable the plugin.")),async handleEvent(e){let t=JSON.parse(e.data),{activity:o}=t,n=o?.assets;if(n?.large_image&&(n.large_image=await oae(o.application_id,n.large_image)),n?.small_image&&(n.small_image=await oae(o.application_id,n.small_image)),o){let i=o.application_id;nae[i]||=await i$e(i);let s=nae[i];o.name||=s.name}V.dispatch({type:"LOCAL_ACTIVITY_UPDATE",...t})},async start(){if(eb&&eb.close(),eb=new WebSocket("ws://127.0.0.1:1337"),eb.onmessage=this.handleEvent,!await new Promise(t=>setTimeout(()=>t(eb.readyState===WebSocket.OPEN),5e3))){ku("Failed to connect to arRPC, is it running?","Retry",()=>{C0(),this.start()});return}D.show({message:"Connected to arRPC",type:D.Type.SUCCESS,id:D.genId(),options:{duration:1e3,position:D.Position.BOTTOM}})},stop(){V.dispatch({type:"LOCAL_ACTIVITY_UPDATE",activity:null}),eb?.close()}})});var ml,l8=x(()=>{"use strict";d();ml="BD Compatibility Layer"});function iae(e){let[t,o]=L(null),n=i=>{let s="#"+i.toString(16).padStart(6,"0");e.onChange(s)};return r(ci,{name:e.id,description:e.option.description,error:t},r(si,{color:parseInt((e.option.color||"#000000").replace("#",""),16),onChange:n,showEyeDropper:!1,suggestedColors:e.option.colorPresets}))}var sae=x(()=>{"use strict";d();xp();B()});function a$e(e){let t=e.instance.getSettingsPanel(),o=t;(t instanceof Node||typeof t=="string")&&(o=class extends X.Component{elementRef;element;constructor(i){super(i),this.elementRef=X.createRef(),this.element=t,this.state={hasError:!1}}componentDidCatch(){this.setState({hasError:!0})}componentDidMount(){this.element instanceof Node&&this.elementRef.current?.appendChild(this.element)}render(){if(this.state.hasError)return null;let i={className:"bd-addon-settings-wrap",ref:this.elementRef};return typeof this.element=="string"&&(i.dangerouslySetInnerHTML={__html:this.element}),X.createElement("div",i)}}),typeof o=="function"&&(o=X.createElement(o)),Ee(n=>s$e(n,e.name,o))}async function ix(e,t,o=!1,n=""){let i={};i.started=!1,i.sourcePath=n,i.filename=t,i.authors=[{id:0n}],i.name="",i.format="jsdoc",i.internals={},i.description="",i.id="",i.start=()=>{},i.stop=()=>{},i.options={openSettings:{type:6,description:"Open settings",component:()=>X.createElement(U,{onClick:()=>a$e(i),disabled:typeof i.instance.getSettingsPanel!="function"},"Open settings")}};let s=e.substring(0,64).includes("//META")?l$e(e,t):c$e(e,t),{metaEndLine:a}=s;Object.assign(i,s.pluginMeta),i.myProxy=new Proxy(i,{get(b,v){return b[v]}}),window.BdCompatLayer.queuedPlugins.push(i.myProxy),i.internals=d$e(e,t,i.name);let{exports:l}=i.internals.module;typeof l=="object"&&(l=l[i.name]??l.default),typeof l>"u"&&(l=i.internals.module.workingTmp);try{i.instance=l.prototype?new l(i):l(i)}catch(b){throw oo.error("Something snapped during instatiation of exports for file:",t,"The error was:",b),b}typeof i.instance.load=="function"&&i.instance.load(),i.instance.getName&&(i.name=i.instance.getName()),i.instance.getVersion&&(i.version=i.instance.getVersion()||"6.6.6"),console.log(i.instance),i.instance.getDescription&&(i.description=i.instance.getDescription()),i.originalName=i.name,o&&Vencord.Plugins.plugins[i.name]&&!Vencord.Plugins.plugins[i.name].instance&&(i.name+="-BD");let u=["name","version","description"].filter(b=>!i||!i[b]);if(u.length>0){let b=u.join(", "),v=document.createElement("div");throw v.innerHTML=`The BD Plugin ${i.name||i.id} is missing the following metadata below<br><br>
        <strong>${b.toUpperCase()}</strong><br><br>
        The plugin could not be started, Please fix.`,Hn().showNotice(v,{timeout:0,buttons:[{label:"Didn't ask ;-)",onClick:()=>{console.log("Didn't have to be so mean about it .\xB7\xB4\xAF`(>\u2582<)\xB4\xAF`\xB7 \nI'll go away")}}]}),new Error("Incomplete plugin, "+v.innerHTML)}let p={};p.versionLabel={type:6,component:()=>u8("Version",i.version)},rx(p,"inviteLabel","Author's Server",i.invite?`https://discord.gg/${i.invite}`:void 0,!0),rx(p,"sourceLabel","Plugin Source",i.source,!0),rx(p,"websiteLabel","Plugin's Website",i.website,!0),rx(p,"authorLabel","Author's Website",i.authorLink,!0),rx(p,"donateLabel","Author's Donation",i.donate,!0),rx(p,"patreonLabel","Author's Patreon",i.patreon,!0),rx(p,"authorsLabel","Author",i.authors[0]?.name),i.options={...p,...i.options};for(let b in p)Object.prototype.hasOwnProperty.call(p,b)&&(p[b]=null);Object.assign(p,{});let m=function(){let b=Vencord.Settings.plugins[ml];b.pluginsStatus[this.name]=!0,this.instance.start()},g=function(){let b=Vencord.Settings.plugins[ml];b.pluginsStatus[this.name]=!1,this.instance.stop()};i.start=m.bind(i),i.stop=g.bind(i);var y=window.BdCompatLayer.queuedPlugins.findIndex(b=>b.filename===i.filename);return y!==-1&&window.BdCompatLayer.queuedPlugins.splice(y,1),delete i.myProxy,console.log(i),i}function l$e(e,t){let o=e.split("*//")[0].split("//META")[1],n={};try{Object.assign(n,JSON.parse(o))}catch(i){throw oo.error("Something snapped during parsing of meta for file:",t,"The error was:",i),i}return{pluginMeta:n,metaEndLine:1}}function c$e(e,t){let o=0,n=0,i={name:"",id:"",description:"",authors:[],version:""},s=[],a=[];try{let l=e.split("/**")[1].split("*/")[0].replace(/\r/g,"").replaceAll(`
`,"").split("*").filter(c=>c!==""&&c!==" ");n=l.length+3;for(let c=0;c<l.length;c++){let u=l[c].trim();oo.debug(`[Meta Parser] Executing for filename: ${t}. Element: ${u}
`+tb(u,"@name")+`
`+tb(u,"@description")+`
`+tb(u,"@authorLink")+`
`+tb(u,"@authorId")+`
`+tb(u,"@author")+`
`+tb(u,"@version")+`
`),u.startsWith("@name")?(i.name=u.split("@name")[1].trim(),i.id=i.name||window.require("path").basename(t)):u.startsWith("@description")?i.description=u.split("@description ")[1]:u.startsWith("@authorLink")||(u.startsWith("@authorId")?s=u.split("@authorId ")[1].split(",").map(p=>BigInt(p.trim())):u.startsWith("@author")?a=u.split("@author ")[1].split(",").map(p=>p.trim()):u!==""&&u.length>2&&(i[u.split("@")[1].split(" ")[0]]=u.substring(u.split("@")[1].split(" ")[0].length+2))),o=c+1}}catch(l){let c=e.split(`
`),u=Math.max(0,o-2),p=Math.min(c.length,o+3),m=c.slice(u,p).map((g,y)=>{let b=u+y+1;return b===o+2?`>>> HERE >>> ${b}: ${g}`:`     ${b}: ${g}`}).join(`
`);throw oo.error(`Something snapped during parsing of meta for file: ${t}
The error got triggered after ${o+1}-nth line of meta
Plugin code around the error:
${m}
The error was:`,l),l}if(a.length>0)for(let l=0;l<a.length;l++){let c=a[l];i.authors.push({name:c,id:s[l]??0n})}return{pluginMeta:i,metaEndLine:n}}function d$e(e,t,o){let n=e;n+=`
if (typeof module.exports !== "function" && !("default" in module.exports)) { module.workingTmp = eval("${o}"); }`;let i=`
try{`+n+"}catch(e){console.error(e);debugger;}";return n="(()=>{"+["const module = { exports: {} };","const exports = module.exports;","const global = window;","const __filename=BdApi.Plugins.folder+`/"+t+"`;","const __dirname=BdApi.Plugins.folder;","const DiscordNative={get clipboard() { return window.BdCompatLayer.fakeClipboard; }};","var process=require('process');"].join("")+(u$e?i:n)+`
return module;})();
`,n+=`
//# sourceURL=betterDiscord://plugins/`+t,{module:eval.call(window,n)}}async function ob(e){let{GeneratedPlugins:t}=window,o=e;Kr[o.name]={userPlugin:!0,folderName:`${o.name}/${o.filename}`},Vencord.Plugins.plugins[o.name]=o,Vencord.Settings.plugins[o.name].enabled=!1;let n=Vencord.PlainSettings.plugins[ml];if(e.name in n.pluginsStatus){let i=n.pluginsStatus[e.name];Vencord.Settings.plugins[o.name].enabled=i,i===!0&&Vencord.Plugins.startPlugin(Vencord.Plugins.plugins[o.name])}t.push(Vencord.Plugins.plugins[o.name])}async function E9(){let{GeneratedPlugins:e}=window,t=aae(e),o=n=>{let i=n;if(Vencord.Settings.plugins[i.name].enabled=!1,i.started===!0){let s=Vencord.Settings.plugins[ml].pluginsStatus[i.name];Vencord.Plugins.stopPlugin(i),s===!0&&(Vencord.Settings.plugins[ml].pluginsStatus[i.name]=s)}delete Kr[i.name],delete Vencord.Plugins.plugins[i.name],delete t[e.indexOf(i)]};for(let n=0;n<e.length;n++){let i=e[n];o(i)}window.BDFDB_Global&&delete window.BDFDB_Global,e.length=0}var s$e,rx,c8,tb,u$e,A9=x(()=>{"use strict";d();tt();at();$();B();Ps();l8();d8();sx();s$e=(e,t,o)=>X.createElement(ee,{},X.createElement(Pe,Object.assign({size:"medium",className:"bd-addon-modal"},e),X.createElement(je,{separator:!1,className:"bd-addon-modal-header"},X.createElement(Zs,{variant:"text-lg/bold"},`${t} Settings`)),X.createElement($e,{className:"bd-addon-modal-settings"},X.createElement(ee,{},o)),X.createElement(ht,{className:"bd-addon-modal-footer"},X.createElement(U,{onClick:e.onClose,className:"bd-button"},"Close"))));rx=(e,t,o,n,i=!1)=>{n&&typeof n=="string"&&Object.defineProperty(e,t,{value:{type:6,component:()=>u8(o,n,i)},enumerable:!0,writable:!0})};c8=e=>e?"yes":"no",tb=(e,t)=>{let o=e.startsWith(t);if(!o)return`startsWith ${t}? ${c8(o)}
`;let n=e.split(t+" ")[1],i=(n?.length??0)>0,s=(n?.split(",").length??0)>1,a=[n!==void 0,i,s].filter(Boolean).length,l=`source has target? ${c8(n!==void 0)}
match longer than 0? ${c8(i)}
match has separators? ${c8(s)}`;return`startsWith ${t}? ${c8(o)}
valid? ${a} / 3
analysis: 
${l.split(`
`).map(c=>"	"+c).join(`
`)}`};u$e=!0});function C9(){let e,t,o=new Promise((n,i)=>{e=n,t=i});return{resolve:e,reject:t,promise:o}}function lae(e,t){return new Function(["contextAsScope","js"],"return (function() { with(this) { return eval(js); } }).call(contextAsScope)")(t,e)}function T9(){let e=(t,...o)=>{console[t]("[BV Compat Layer Plugin Ivoked Log]:",...o)};return{warn:function(...t){e("warn",...t)},info:function(...t){e("log",...t)},err:function(...t){e("error",...t)},stacktrace:function(...t){e("error",...t)},error:function(...t){e("error",...t)},log:function(...t){e("log",...t)}}}function cae(e,t){var o=new XMLHttpRequest;if(o.open("GET",e,!1),t)for(let n in t)o.setRequestHeader(n,t[n]);return o.send(),o}function u8(e,t,o=!1,n=t){return X.createElement("div",{},X.createElement(er.FormTitle,{tag:"h3"},[e,X.createElement(er.FormText,{},o?X.createElement(Go,{href:t},n):t)]))}function uae(e="*",t=!1){return new Promise((o,n)=>{let i=document.createElement("input");i.type="file",i.multiple=t,i.accept=e;let s=setTimeout(()=>{n()},1800*1e3);i.addEventListener("change",()=>{i.files&&i.files.length>0?(clearTimeout(s),o(t?Array.from(i.files):i.files[0])):(clearTimeout(s),n("No file selected."))}),i.click()})}async function I9(){oo.warn("Removing plugins..."),await E9(),await new Promise((n,i)=>setTimeout(n,500));let e=window.require("fs"),o=e.readdirSync(Hn().Plugins.folder).sort().filter(n=>n.endsWith(".plugin.js"));for(let n=0;n<o.length;n++){let i=o[n],s=e.readFileSync(Hn().Plugins.folder+"/"+i,"utf8"),a=ix(s,i,!0,Hn().Plugins.folder);a.then(l=>{ob(l)}),a.catch(l=>{oo.error("Error during conversion of",i,"what was:",l)})}}function Cc(e,t={},o=[],n={}){let i=document.createElement(e);for(let[s,a]of Object.entries(t))i[s]=a;for(let s of o)s instanceof Node&&i.appendChild(s);for(let[s,a]of Object.entries(n))i.setAttribute(s,a);return i}async function p$e(e){let t=[],o=new lse;o.register(ase),o.onfile=s=>{t.push(s)};let n=e.stream().getReader(),i=async()=>{await n.read().then(async s=>{s.done?o.push(new Uint8Array(0),!0):(o.push(s.value,s.done),await i())})};return await i(),t}function aae(e){return e.reduce((o,n,i)=>(o[i]=n,o),{})}var oo,zl,p8,sH,sx=x(()=>{"use strict";d();ts();At();B();e8();d8();A9();oo=new ke("BD Compat Layer","#a6d189");zl={readDirectory(e,t=!1){let o=window.require("fs"),n=window.require("path"),i=o.readdirSync(e),s={};for(let a=0;a<i.length;a++){let l=i[a],c=n.join(e,l),u=o.statSync(c);u.isDirectory()?s[l]=this.readDirectory(c,t):u.isFile()&&(s[l]=t?o.readFileSync(c):new ReadableStream({start(p){p.enqueue(o.readFileSync(c)),p.close()}}))}return s},createPathFromTree(e,t=""){let o={};for(let n in e)if(e.hasOwnProperty(n)){let i=t?t+"/"+n:n;if(typeof e[n]=="object"&&e[n]!==null&&!(e[n]instanceof ReadableStream)){let s=this.createPathFromTree(e[n],i);o=Object.assign({},o,s)}else o[i]=e[n]}return o},completeFileSystem(){return this.createPathFromTree(this.readDirectory("/"))},removeDirectoryRecursive(e){let t=window.require("fs"),o=window.require("path"),n=t.readdirSync(e);for(let i=0;i<n.length;i++){let s=n[i],a=o.join(e,s);t.lstatSync(a).isDirectory()?this.removeDirectoryRecursive(a):t.unlinkSync(a)}e!=="/"&&t.rmdirSync(e)},formatFs(){let e=this.createPathFromTree(this.readDirectory("/")),t=window.require("fs");for(let o in e)Object.hasOwnProperty.call(e,o)&&t.unlinkSync("/"+o);this.removeDirectoryRecursive("/")},mkdirSyncRecursive(e,t=void 0){if(e==="")return;let o=window.require("fs");if(o.existsSync(e))return;let i=window.require("path").dirname(e);o.existsSync(i)||this.mkdirSyncRecursive(i,t),o.mkdirSync(e,t)},toBuffer(e,t=0,o=e.byteLength-t){return new Uint8Array(e,t,o)},async importFile(e,t=!1,o=!1,n=void 0){let i=await uae(n,o),s=Array.isArray(i)?i:[i],a=window.require("fs"),l=window.require("path");for(let c of s){let u=e;oo.log("[Importer] Importing file",u),t&&(e.endsWith("/")||(u+="/"),u+=c.name),oo.log("[Importer] Resolved path:",u),a.writeFile(u,zl.toBuffer(await c.arrayBuffer()),p=>{p&&oo.error("[Importer] Error during import",p),oo.log("[Importer] Success")})}},exportFile(e){return new Promise((t,o)=>{let n=window.require("fs"),i=window.require("path");n.readFile(e,(s,a)=>{if(s){o(s);return}let l=new Blob([a]),c=URL.createObjectURL(l),u=document.createElement("a");u.href=c,u.download=i.parse(e).base,u.click(),u.remove(),URL.revokeObjectURL(c)})})},getDirectorySize(e){let t=window.require("fs"),o=window.require("path"),n=0;function i(s){t.readdirSync(s).forEach(l=>{let c=o.join(s,l),u=t.statSync(c);u.isDirectory()?i(c):n+=u.size})}return i(e),n}};p8={async exportZip(){let e=zl.readDirectory("/",!0),t=ox(e);return new Blob([t],{type:"application/zip"})},async importZip(){let e=window.require("fs"),t=window.require("path"),o=await uae(),n=await p$e(o);zl.formatFs();for(let i=0;i<n.length;i++){let s=n[i];oo.log("[Importer] Now: "+s.name);let a=new Promise((u,p)=>{let m=[];s.ondata=(g,y,b)=>{if(g){oo.error("[Importer] Failed at",s.name,g);return}m.push(y),b===!0&&u(m)}});s.start();let l=await a,c=s.name.endsWith("/")&&l[0].length===0;zl.mkdirSyncRecursive("/"+(c?s.name:t.dirname(s.name))),!c&&(oo.log("[Importer] Writing",l),e.writeFile("/"+s.name,window.Buffer.concat(l),()=>{}))}return oo.log("[Importer] ZIP import finished")},async downloadZip(){let e=await this.exportZip(),t=URL.createObjectURL(e),o=document.createElement("a");o.href=t,o.download="filesystem-dump.zip",o.click(),o.remove(),URL.revokeObjectURL(t)}},sH={customizer(e,t,o,n,i){if(t===n)return e;if(Array.isArray(t))return hu.cloneDeep(t)},skip(e){return!!(typeof e!="object"||e===null||Array.isArray(e))},perform(e,...t){return t.reduce((o,n)=>this.skip(n)?o:hu.mergeWith(o,n,this.customizer),e)}}});function pae(e,t,o){let{before:n,after:i,instead:s,once:a=!1,callerId:l="BdApi"}=o,c=n?"before":i?"after":s?"instead":"";if(!c)return nb.err("BdApi","Must provide one of: after, before, instead");let p={originalMethod:e[t],callOriginalMethod:()=>p.originalMethod.apply(p.thisObject,p.methodArguments)};return p.cancelPatch=ha[c](l,e,t,(m,g,y)=>{p.thisObject=m,p.methodArguments=g,p.returnValue=y;try{let b=Reflect.apply(o[c],null,[p]);return a&&p.cancelPatch(),b}catch(b){nb.stacktrace(`${l}:monkeyPatch`,`Error in the ${c} of ${t}`,b)}}),p.cancelPatch}function lH(e,t={}){let{first:o=!0,defaultExport:n=!0,searchExports:i=!1}=t,s=aH(e),a=Vencord.Webpack.cache,l=[],c=Object.keys(a);for(let u=0;u<c.length;u++){let p=c[u];if(!a.hasOwnProperty(p))continue;let m=null;try{m=a[p]}catch{continue}let{exports:g}=m;if(!(!g||g===window||g===document.documentElement||g[Symbol.toStringTag]==="DOMTokenList"))if(typeof g=="object"&&i&&!g.TypedArray)for(let y in g){let b=null,v=null;try{v=g[y]}catch{continue}if(v&&(s(v,m,p)&&(b=v),!!b)){if(o)return b;l.push(b)}}else{let y=null;if(g.A&&s(g.A,m,p)&&(y=n?g.A:g),g.Ay&&s(g.Ay,m,p)&&(y=n?g.Ay:g),g.__esModule&&g.default&&s(g.default,m,p)&&(y=n?g.default:g),s(g,m,p)&&(y=g),!y)continue;if(o)return y;l.push(y)}}return o||l.length==0?void 0:l}var nb,ha,dae,aH,m8,D9=x(()=>{"use strict";d();sx();nb=T9();ha=class{static setup(t){this.DiscordModules=t}static get patches(){return this._patches||(this._patches=[])}static getPatchesByCaller(t){if(!t)return[];let o=[];for(let n of this.patches)for(let i of n.children)i.caller===t&&o.push(i);return o}static unpatchAll(t){typeof t=="string"&&(t=this.getPatchesByCaller(t));for(let o of t)o.unpatch()}static resolveModule(t){return!t||typeof t=="function"||typeof t=="object"&&!Array.isArray(t)?t:typeof t=="string"?this.DiscordModules[t]:Array.isArray(t)?BdApi.Webpack.findByUniqueProperties(t):null}static makeOverride(t){return function(){let o;if(!t.children||!t.children.length)return t.originalFunction.apply(this,arguments);for(let i of t.children.filter(s=>s.type==="before"))try{i.callback(this,arguments)}catch(s){nb.err("Patcher",`Could not fire before callback of ${t.functionName} for ${i.caller}`,s)}let n=t.children.filter(i=>i.type==="instead");if(!n.length)o=t.originalFunction.apply(this,arguments);else for(let i of n)try{let s=i.callback(this,arguments,t.originalFunction.bind(this));typeof s<"u"&&(o=s)}catch(s){nb.err("Patcher",`Could not fire instead callback of ${t.functionName} for ${i.caller}`,s)}for(let i of t.children.filter(s=>s.type==="after"))try{let s=i.callback(this,arguments,o);typeof s<"u"&&(o=s)}catch(s){nb.err("Patcher",`Could not fire after callback of ${t.functionName} for ${i.caller}`,s)}return o}}static rePatch(t){t.proxyFunction=t.module[t.functionName]=this.makeOverride(t)}static makePatch(t,o,n){let i={name:n,module:t,functionName:o,originalFunction:t[o],proxyFunction:null,revert:()=>{i.module[i.functionName]=i.originalFunction,i.proxyFunction=null,i.children=[]},counter:0,children:[]};return i.proxyFunction=t[o]=this.makeOverride(i),Object.assign(t[o],i.originalFunction),t[o].__originalFunction=i.originalFunction,t[o].toString=()=>i.originalFunction.toString(),this.patches.push(i),i}static before(t,o,n,i,s={}){return this.pushChildPatch(t,o,n,i,Object.assign(s,{type:"before"}))}static after(t,o,n,i,s={}){return this.pushChildPatch(t,o,n,i,Object.assign(s,{type:"after"}))}static instead(t,o,n,i,s={}){return this.pushChildPatch(t,o,n,i,Object.assign(s,{type:"instead"}))}static pushChildPatch(t,o,n,i,s={}){let{type:a="after",forcePatch:l=!0}=s,c=this.resolveModule(o);if(!c||(!c[n]&&l&&(c[n]=function(){}),!(c[n]instanceof Function)))return null;typeof o=="string"&&(s.displayName=o);let p=`${s.displayName||c.displayName||c.name||c.constructor.displayName||c.constructor.name}.${n}`,m=this.patches.find(y=>y.module==c&&y.functionName==n)||this.makePatch(c,n,p);m.proxyFunction||this.rePatch(m);let g={caller:t,type:a,id:m.counter,callback:i,unpatch:()=>{if(m.children.splice(m.children.findIndex(y=>y.id===g.id&&y.type===a),1),m.children.length<=0){let y=this.patches.findIndex(b=>b.module==c&&b.functionName==n);if(y<0)return;this.patches[y].revert(),this.patches.splice(y,1)}}};return m.children.push(g),m.counter++,g.unpatch}},dae=new WeakSet,aH=e=>(t,o,n)=>{try{return t?.default?.remove&&t?.default?.set&&t?.default?.clear&&t?.default?.get&&!t?.default?.sort||t.remove&&t.set&&t.clear&&t.get&&!t.sort||t?.default?.getToken||t?.default?.getEmail||t?.default?.showToken||t.getToken||t.getEmail||t.showToken?!1:e(t,o,n)}catch(i){return dae.has(e)||nb.warn("WebpackModules~getModule","Module filter threw an exception.",e,i),dae.add(e),!1}};m8={DiscordModules:{},setup(e){this.DiscordModules=e},wrapElement(e){let{DiscordModules:t}=this;return class extends t.React.Component{constructor(n){super(n),this.ref=t.React.createRef(),this.element=e,this.state={hasError:!1}}componentDidCatch(){this.setState({hasError:!0})}componentDidMount(){this.ref.current.appendChild(this.element)}render(){return this.state.hasError?null:t.React.createElement("div",{className:"react-wrapper",ref:this.ref})}}}}});function g$e(e){let t=e;t=t.replace(/^\s*import\s+[^\n;]+;\s*/mg,""),t=t.replace(/export\s+default\s+ContextMenu\s*;/g,"return ContextMenu;"),t=t.replace(/\s+as\s+[A-Za-z0-9_$\.]+\b/g,""),t=t.replace(/([A-Za-z0-9_$\)\]\}])!(?=[\s;,\)\]\}])/g,"$1"),t=t.replace(/\bmenuItemsId!/g,"menuItemsId"),t=t.replace(/(\.\.\.\s*[A-Za-z0-9_$]+)\s*:\s*any\[\]\s*/g,"$1"),t=t.replace(/:\s*any\[\]/g,""),t=t.replace(/:\s*any\b/g,""),t=t.replace(/:\s*(any|object|string|boolean|number|Error|unknown|JSX\.Element)\b/g,""),t=t.replace(/([A-Za-z0-9_$\.\[\]'"]+)\s*\?\?=\s*([^;]+);/g,"if ($1 == null) $1 = $2;"),t=t.replace(/res\.props\.\s*children\?\.\s*props\.\s*navId/g,"res.props && res.props.children && res.props.children.props && res.props.children.props.navId"),t=t.replace(/res\?\.\s*props\.\s*children\?\.\s*props\.\s*navId/g,"res.props && res.props.children && res.props.children.props && res.props.children.props.navId"),t=t.replace(/typeof\s+res\?\.\s*type\s*===\s*("function"|'function')/g,"res && typeof res.type === $1"),t=t.replace(/res\?\.\s*props\.navId/g,"res && res.props && res.props.navId"),t=t.replace(/res\?\.\s*type/g,"res && res.type"),t=t.replace(/typeof\s+res\s*&&\s*res\.type\s*===\s*("function"|'function')/g,"res && typeof res.type === $1"),t=t.replace(/\/\/ eslint-disable-next-line react-hooks\/rules-of-hooks\s*/g,""),t=t.replace(/startupComplete\s*&&=\s*([^;]+);/g,"startupComplete = startupComplete && ($1);"),t=t.replace(/:\s*[A-Za-z0-9_$]+\[\]/g,""),t=t.trim()+`
`;let o=`(function(Filters, getByKeys, getMangled, getModule, webpackRequire, Patcher, Logger, React) {
"use strict";
${t}
})`;return new Function("Filters","getByKeys","getMangled","getModule","webpackRequire","Patcher","Logger","React",`return ${o}`)}async function ax(e,t={},o){let n=Date.now().toString(36)+Math.random().toString(36).slice(2,6);try{oo.debug(`[${n}] Requesting ${e}...`,t);let i=await fetch(e,t);return oo.debug(`[${n}] Success.`),i}catch(i){if(t.method===void 0||t.method==="get"){oo.debug(`[${n}] Failed, trying with proxy.`);try{let s=await fetch(`${o}${e}`,t);return oo.debug(`[${n}] (Proxy) Success.`),s}catch(s){throw oo.debug(`[${n}] (Proxy) Failed completely.`),s}}throw oo.debug(`[${n}] Failed completely.`),i}}var m$e,f$e,mae,fae,gae,cH=x(()=>{"use strict";d();fe();sx();D9();m$e="df5c2887eb5eddb8d9f3e470b51cdfa5cec814db",f$e="c10d0b67c0fd53fee582cf5b8bc4779e80006983",mae=class{callbacks;constructor(){this.callbacks={}}on(e,t){this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t)}off(e,t){let o=this.callbacks[e];o&&(this.callbacks[e]=o.filter(n=>n!==t))}emit(e,t){let o=this.callbacks[e];o&&o.forEach(n=>n(t))}},fae=async e=>{let t={get WebpackModules(){return window.BdApi.Webpack}},i="("+(await(await ax(`https://github.com/BetterDiscord/BetterDiscord/raw/${m$e}/renderer/src/modules/discordmodules.js`,void 0,e)).text()).replaceAll("\r","").split("const DiscordModules = Utilities.memoizeObject(")[1].split(/;\s*export default DiscordModules;/)[0];return{output:lae(i+`
//# sourceURL=betterDiscord://internal/DiscordModules.js`,t),sourceBlobUrl:void 0}};gae=async(e,t)=>{let n=(await(await ax(`https://github.com/BetterDiscord/BetterDiscord/raw/${f$e}/src/betterdiscord/api/contextmenu.ts`,void 0,t)).text()).replaceAll("\r",""),i=g$e(n+`
//# sourceURL=betterDiscord://internal/ContextMenu.js`)();return{output:new(i(window.BdApi.Webpack.Filters,window.BdApi.Webpack.getByKeys,window.BdApi.Webpack.getMangled,window.BdApi.Webpack.getModule,Bo,window.BdApi.Patcher,window.BdApi.Logger,window.BdApi.React)),sourceBlobUrl:void 0}}});function f8(e,t){let o={},n=Object.keys(e),i=Object.keys(t);for(let s=0;s<n.length;s++){let a=n[s];if(Object.prototype.hasOwnProperty.call(e,a))for(let l=0;l<i.length;l++){let c=i[l];Object.prototype.hasOwnProperty.call(t,c)&&(Object.prototype.hasOwnProperty.call(o,c)||t[c](e[a])&&Object.defineProperty(o,c,{get(){return e[a]},set(u){let p=Object.getOwnPropertyDescriptor(e,a);p&&p.get&&!p.set&&p.configurable?Object.defineProperty(e,a,{value:u,writable:!0,configurable:!0,enumerable:p.enumerable}):e[a]=u},enumerable:!0,configurable:!1}))}}for(let s=0;s<i.length;s++){let a=i[s];Object.prototype.hasOwnProperty.call(o,a)||Object.defineProperty(o,a,{value:void 0,enumerable:!0,configurable:!1})}return Object.defineProperty(o,Symbol("betterdiscord.getMangled"),{value:e,configurable:!1}),o}var hae=x(()=>{"use strict";d()});function h$e(e){if(e.exports){if(e.exports.__esModule&&e.exports.default)return"default";if(e.exports.A)return"A";if(e.exports.Ay)return"Ay"}}function v$e(){let e=new h8,t=bae.reduce((o,n)=>(o[n]={get:()=>e[n],set:b$e.includes(n)?i=>e[n]=i:void 0,configurable:!0},o),{});Object.defineProperties(h8,t)}function gH(){let e=Hn();bae.forEach(t=>delete e[t])}function vae(){return v$e(),h8}function Hn(){return window.BdApi}var yae,dH,ib,rb,Gl,pH,mH,uH,x$e,y$e,xae,g8,Tu,fH,M9,h8,bae,b$e,d8=x(()=>{"use strict";d();Q();u$();at();$();B();sae();l8();cH();D9();sx();fe();hae();yae=HA;dH=class{#e;constructor(t){this.#e=t}get before(){return(...t)=>ha.before(this.#e,...t)}get instead(){return(...t)=>ha.instead(this.#e,...t)}get after(){return(...t)=>ha.after(this.#e,...t)}get getPatchesByCaller(){return()=>ha.getPatchesByCaller(this.#e)}get unpatchAll(){return()=>ha.unpatchAll(this.#e)}},ib={getAll:()=>{let e=window.BdCompatLayer.queuedPlugins;return[...window.GeneratedPlugins,...e]},isEnabled:e=>Vencord.Plugins.isPluginEnabled(e),get:function(e){return ib.getAll().filter(t=>t.name==e)[0]??ib.getAll().filter(t=>t.originalName==e)[0]},reload:e=>{Vencord.Plugins.stopPlugin(Vencord.Plugins.plugins[e]),Vencord.Plugins.startPlugin(Vencord.Plugins.plugins[e])},rootFolder:"/BD",get folder(){return this.rootFolder+"/plugins"}},rb=(e,t={})=>{let o=e[e.length-1];return typeof o=="object"&&o!==null&&!Array.isArray(o)&&Object.assign(t,e.pop()),t},Gl={Filters:{byDisplayName:e=>t=>t&&t.displayName===e,get byKeys(){return this.byProps.bind(Gl.Filters)},byProps:(...e)=>t=>{if(e.flat().at(-1)===!0)return Vencord.Webpack.filters.byProps(...e.flat().slice(0,-1))(t);try{if(Vencord.Webpack.filters.byClassNames(...e.flat().filter(n=>typeof n=="string"))(t))return!0}catch{}return Vencord.Webpack.filters.byProps(...e)(t)},byStoreName(e){return t=>t?._dispatchToken&&t?.getName?.()===e},get byStrings(){return Vencord.Webpack.filters.byCode},bySource(...e){let t=Vencord.Webpack.wreq.m;return(o,n)=>{if(!n?.id)return!1;let i;try{i=String(t[n.id])}catch{return!1}return e.every(s=>typeof s=="string"?i.includes(s):s.test(i))}},byPrototypeKeys(...e){return t=>t.prototype&&[...e.flat()].every(o=>o in t.prototype)},byRegex(e){let t=new RegExp(e);return Gl.Filters.bySource(t)},combine(...e){return(t,o,n)=>e.every(i=>i(t,o,n))}},getModule(...e){if(e[1]&&e[1].raw===!0){let t=e[0],o={id:0,exports:null};return lH((n,i,s)=>{let a=t(n,i,s);return a&&(o.exports=i.exports,o.id=parseInt(s,10)),a},e[1]),o.exports===null?void 0:o}return lH(...e)},waitForModule(e){return new Promise((t,o)=>{Vencord.Webpack.waitFor(e,n=>{t(n)})})},getModuleWithKey(e){let t,o,n;this.getModule((i,s,a)=>e(i,s,a)&&(t=s)&&(o=a)&&!0,{searchExports:!0});for(let i in t.exports)if(e(t.exports[i],t,o)){n=i;break}return[t.exports,n]},getByDisplayName(e){return this.getModule(this.Filters.byDisplayName(e))},getAllByProps(...e){let t=rb(e,{first:!1});return this.getModule(this.Filters.byProps(...e),t)},get getAllByKeys(){return this.getAllByProps},getAllByStrings(...e){let t=rb(e,{first:!1});return this.getModule(this.Filters.byStrings(...e),t)},getByProps(...e){let t=rb(e,{first:!0});return this.getModule(this.Filters.byProps(...e),t)},get getByKeys(){return Gl.getByProps.bind(Gl)},getModules(...e){let[t,...o]=e;return this.getModule(t,{...Object.assign({},...o),first:!1})},getByPrototypes(...e){let t=rb(e);return Gl.getModule(Gl.Filters.byPrototypeKeys(e),t)},get getByPrototypeKeys(){return this.getByPrototypes},getByStringsOptimal(...e){return t=>{if(!t?.toString||typeof t?.toString!="function")return;let o="";try{o=t?.toString([])}catch{o=t?.toString()}if(!o)return!1;for(let n of e)if(!o.includes(n))return!1;return!0}},getByStrings(...e){let t=rb(e);return Gl.getModule(Gl.Filters.byStrings(...e.flat()),t)},getBySource(...e){let t=rb(e);return this.getModule(this.Filters.bySource(...e),t)},findByUniqueProperties(e,t=!0){return t?this.getByProps(...e):this.getAllByProps(...e)},getStore(e){return Gl.getModule(Gl.Filters.byStoreName(e))},get require(){return Vencord.Webpack.wreq},get modules(){return Vencord.Webpack.wreq.m},getMangled(e,t,o={}){let{raw:n=!1,...i}=o;(typeof e=="string"||e instanceof RegExp)&&(e=Gl.Filters.bySource(e));let s=typeof e=="number"?Vencord.Webpack.wreq.c[e]:Gl.getModule(e,{raw:n,...i});return s?(n&&(s=s.exports),f8(s,t)):{}},getWithKey(e,t={}){let{target:o=null,...n}=t,i={target:o,key:void 0},s=0,a=["0","1","length"];return new Proxy([],{get(l,c){if(typeof c=="symbol")return c===Symbol.iterator?function*(){yield this.get(l,"0",void 0),yield this.get(l,"1",void 0)}.bind(this):c===Symbol.toStringTag?"Array":Reflect.get(Array.prototype,c,l);if(c==="next")return()=>s===0?(s++,{value:this.get(l,"0",void 0),done:!1}):s===1?(s++,{value:this.get(l,"1",void 0),done:!1}):{value:void 0,done:!0};switch(c){case"0":return i.target===null&&(i.target=Gl.getModule(u=>Object.values(u).some(e),n)),i.target;case"1":return i.target===null&&this.get(l,"0",void 0),i.key===void 0&&i.target!==null&&(i.key=i.target?Object.keys(i.target).find(u=>e(i.target[u])):void 0),i.key;case"length":return 2;default:return}},has(l,c){return a.includes(c.toString())},getOwnPropertyDescriptor(l,c){if(a.includes(c.toString()))return{value:this.get(l,c,void 0),enumerable:c.toString()!=="length",configurable:!0,writable:!1}},ownKeys(){return a}})},getBulk(...e){let t=Array(e.length),o=e.every(s=>!s.all),n=()=>o&&e.every((s,a)=>!s.all&&a in t);if(e.length===0)return t;let i=Object.values(Vencord.Webpack.wreq.c);e:for(let s=0;s<i.length;s++){let a=i[s];t:for(let l=0;l<e.length;l++){let{filter:c,all:u=!1,defaultExport:p=!0,searchExports:m=!1,searchDefault:g=!0,raw:y=!1,map:b,fatal:v}=e[l],E=aH(c);if(!u&&l in t)continue;if(E(a.exports,a,a.id)){let I=y?a:a.exports;if(b&&(I=f8(y?a.exports:I,b)),!u){if(t[l]=I,n())break e;continue}t[l]||(t[l]=[]),t[l].push(I)}let A,C=[];m?C.push(...Object.keys(a.exports)):g&&(A=h$e(a))&&C.push(A);for(let I of C){let N=a.exports[I];if(E(N,a,a.id)){let _;if(!p&&A===I?(_=y?a:a.exports,b&&(_=f8(a.exports,b))):(_=y&&b?a:N,b&&(_=f8(y?a.exports:N,b))),!u){if(t[l]=_,n())break e;continue t}t[l]||(t[l]=[]),t[l].push(_)}}}}for(let s=0;s<e.length;s++){let a=e[s],l=s in t;if(a.fatal&&!l){if(a.all&&(!Array.isArray(t[s])||t[s].length===0))throw new Error(`Failed to find modules for query ${s}`);if(!l)throw new Error(`Failed to find module for query ${s}`)}l||(t[s]={})}return t},Stores:new Proxy({},{get(e,t,o){return pu.get(t.toString())}})},pH={pluginData:{},latestDataCheck(e){if(!(typeof this.pluginData[e]<"u")){if(!window.require("fs").existsSync(ib.folder+"/"+e+".config.json")){this.pluginData[e]={};return}this.pluginData[e]=JSON.parse(window.require("fs").readFileSync(ib.folder+"/"+e+".config.json"))}},load(e,t){if(!(!t||!e))return this.latestDataCheck(e),this.pluginData[e][t]},save(e,t,o){!t||!e||!o||(this.latestDataCheck(e),this.pluginData[e][t]=o,window.require("fs").writeFileSync(ib.folder+"/"+e+".config.json",JSON.stringify(this.pluginData[e],null,4)))}},mH=class{#e;constructor(t){this.#e=t}get load(){return t=>pH.load(this.#e,t)}get save(){return(t,o)=>pH.save(this.#e,t,o)}},uH={},x$e=An(e=>e.ConfirmModal).ConfirmModal,y$e=U,xae=e=>Object.values(D.Type)[e],g8={alert(e,t){return this.showConfirmationModal(e,t,{cancelText:null})},helper(){oo.error(new Error("Not implemented."))},showToast(e,t=1){D.show(D.create(e||"Success !",[0,1,2,3,4,5].includes(t)?xae(t):xae(1)))},showConfirmationModal(e,t,o={}){let{confirmText:n=o.confirmText||"Confirm",cancelText:i=o.cancelText||"Cancel",onConfirm:s=o.onConfirm||(()=>{}),onCancel:a=o.onCancel||(()=>{}),extraReact:l=o.extraReact||[]}=o,c=[...l];c.unshift(X.createElement(er.FormText,{},t)),Nh.openModal(u=>X.createElement(x$e,Object.assign({header:e,confirmButtonColor:y$e.Colors.BRAND,confirmText:n,cancelText:i,onConfirm:s,onCancel:a,children:c,...u})))},showNotice_(e,t,o={}){let n=document.createElement("div");n.className="custom-notification-container";let i=()=>{let y=n.querySelector(".custom-notification");y&&(y.classList.add("close"),setTimeout(()=>{document.body.removeChild(n)},1e3))},{timeout:s=0,type:a="default"}=o,c=[{label:"Close",onClick:y=>{y()}},...o.buttons||[]].map((y,b)=>Cc("button",{className:"confirm-button",onclick:()=>{y.onClick(i)}},[typeof y.label=="string"?Cc("span",{innerText:y.label}):y.label])),u=Cc("button",{onclick:i,className:"button-with-svg"},[Cc("svg",{className:"xxx"},[Cc("path",void 0,void 0,{stroke:"white",strokeWidth:"2",fill:"none",d:"M18.4 4L12 10.4L5.6 4L4 5.6L10.4 12L4 18.4L5.6 20L12 13.6L18.4 20L20 18.4L13.6 12L20 5.6L18.4 4Z"})],{style:"width: 24px; height: 24px;"})]),p=Cc("span",{className:"notification-title"},[typeof e=="string"?Cc("span",{innerText:e}):e]),m=Cc("div",{className:"content"},[typeof t=="string"?Cc("span",{innerText:t}):t]),g=Cc("div",{className:`custom-notification ${a}`},[Cc("div",{className:"top-box"},[p]),m,Cc("div",{className:"bottom-box"},c)]);return n.appendChild(g),document.body.appendChild(n),s>0&&setTimeout(i,s),i},showNotice(e,t){return this.showNotice_("Notice",e,t)},createTooltip(e,t,o){return{label:"",show(){return oo.warn("Remind davil to implement tooltip grrr!"),null},hide(){return this.show()}}},showChangelogModal(){oo.warn("Remind davil to implement changelog modal grrr!")},buildSettingsPanel(e){let t=[],{React:o}=Hn(),n="null",i={enabled:!0,[n]:{enabled:!0}};for(let l=0;l<e.settings.length;l++){let c=e.settings[l];if(c.type==="category"&&c.settings){i[c.id]={enabled:!0};for(let u=0;u<c.settings.length;u++){let p=c.settings[u];Object.defineProperty(i[c.id],p.id,{get(){return typeof p.value=="function"?p.value():p.value},set(m){e.onChange(c.id,p.id,m)}})}}else Object.defineProperty(i[n],c.id,{get(){return typeof c.value=="function"?c.value():c.value},set(u){e.onChange(null,c.id,u)}})}let s=(l,c)=>{let u=[];for(let p=0;p<l.length;p++){let m=l[p],g={description:"",type:0};switch(m.type){case"number":{g.type=1,g.description=m.note;break}case"switch":{g.type=3,g.description=m.note;break}case"text":{g.type=0,g.description=m.note;break}case"dropdown":{g.type=4,g.description=m.note;let v=g;v.options=m.options;break}case"slider":{g.type=5,g.description=m.note;let v=g,E=m;if(E.markers)typeof E.markers[0]=="object"?v.markers=E.markers.map(A=>A.value):v.markers=E.markers,v.stickToMarkers=Reflect.get(E,"stickToMarkers");else if(typeof E.min<"u"&&typeof E.max<"u"){let A=E.min,C=E.max;v.markers=[A,C],v.stickToMarkers=!1,v.componentProps={onValueRender:I=>{let N=parseFloat(I.toFixed(2));return N%1===0?String(Math.round(N)):String(N)}}}break}case"color":{g.type=6,g.description=m.note;let v=g,E=g;E.color=m.value||"#000000",E.colorPresets=[],v.component=A=>o.createElement(iae,{onChange:A.setValue,option:E,pluginSettings:i[c],id:m.id});break}default:{g.type=6,g.component=()=>o.createElement(o.Fragment,{},`Remind Davilarek to add setting of type: ${m.type}!
This is a placeholder.`);break}}let y=yae[g.type],b=m.type==="category"?o.createElement("div",{style:{marginBottom:8}},[o.createElement(er.FormDivider),o.createElement(Zs,{variant:"heading-lg/semibold"},m.name)]):o.createElement("div",{className:"bd-compat-setting",style:{marginBottom:8}},[o.createElement(Zs,{variant:"heading-md/semibold"},m.name),o.createElement(y,{id:m.id,key:m.id,option:g,onChange(v){i[c][m.id]=v},pluginSettings:i[c]})]);t.push(b),m.type==="category"&&s(m.settings,m.id)}};return s(e.settings,n),o.createElement("div",{},t)}},Tu={addStyle(e,t){e=e.replace(/^[^a-z]+|[^\w-]+/gi,"-");let o=document.querySelector("bd-styles")?.querySelector(`#${e}`)||this.createElement("style",{id:e});o.textContent=t,document.querySelector("bd-styles")?.append(o)},removeStyle(e){e=e.replace(/^[^a-z]+|[^\w-]+/gi,"-");let t=document.querySelector("bd-styles")?.querySelector(`#${e}`);t&&t.remove()},createElement(e,t={},o=null){let{className:n,id:i,target:s}=t,a=document.createElement(e);return n&&(a.className=n),i&&(a.id=i),o&&a.append(o),s&&document.querySelector(s).append(a),a},injectScript(e,t){return e=e.replace(/^[^a-z]+|[^\w-]+/gi,"-"),new Promise((o,n)=>{let i=document.querySelector("bd-scripts")?.querySelector(`#${e}`)||this.createElement("script",{id:e});i.src=t,i.onload=o,i.onerror=n,document.querySelector("bd-scripts")?.append(i)})},removeScript(e){e=e.replace(/^[^a-z]+|[^\w-]+/gi,"-");let t=document.querySelector("bd-scripts")?.querySelector(`#${e}`);t?.remove()},parseHTML(e,t=!1){let o=document.createElement("template");if(o.innerHTML=e.trim(),t)return o.content.cloneNode(!0);let{childNodes:n}=o.content;return n.length===1?n[0]:n}},fH=class{#e;constructor(t){this.#e=t}addStyle(t,o){return arguments.length===2?(t=arguments[0],o=arguments[1]):(o=t,t=this.#e),Tu.addStyle(t,o)}removeStyle(t){return arguments.length===1?t=arguments[0]:t=this.#e,Tu.removeStyle(t)}get createElement(){return Tu.createElement}},M9={Spinner_holder:null,get Spinner(){return M9.Spinner_holder===null&&(M9.Spinner_holder=Vencord.Webpack.findByCode(".SPINNER_LOADING_LABEL")),M9.Spinner_holder}},h8=class{#e;#t;#o;#n;ContextMenu={};labelsOfInstancedAPI;constructor(t){if(t){if(Hn().labelsOfInstancedAPI[t])return this.labelsOfInstancedAPI=void 0,this.#t=void 0,this.#o=void 0,this.#n=void 0,Hn().labelsOfInstancedAPI[t];this.#e=t,this.#t=new dH(t),this.#o=new mH(t),this.#n=new fH(t),this.labelsOfInstancedAPI=void 0,Hn().labelsOfInstancedAPI[t]=this,Object.defineProperty(this,"ContextMenu",{get(){return Hn().ContextMenu}})}else return this.#t=ha,this.#o=pH,this.#n=Tu,this.labelsOfInstancedAPI={},Hn()}get Patcher(){return this.#t}get Plugins(){return ib}Components={get Tooltip(){return Hn().Webpack.getModule(t=>t&&t.prototype&&t.prototype.renderTooltip,{searchExports:!0})},get Text(){return Vencord.Webpack.Common.Text},get Button(){return Vencord.Webpack.Common.Button},get Spinner(){return M9.Spinner},SwitchInput(t){return Hn().UI.buildSettingsPanel({settings:[{id:t.id,name:"",type:"switch",value:t.value}],onChange(o,n,i){t.onChange(i)}})},SettingGroup(t){return Vencord.Webpack.Common.React.createElement("span",{},[Hn().UI.buildSettingsPanel({settings:[{id:t.id,name:t.name,type:"category",settings:[]}],onChange(o,n,i){}})],t.children)},SettingItem(t){let o=6,n=yae[o];return Vencord.Webpack.Common.React.createElement("div",void 0,[Vencord.Webpack.Common.React.createElement(n,{id:`bd_compat-item-${t.id}`,key:`bd_compat-item-${t.id}`,option:{type:o,component:()=>u8(t.name,t.note,!1)},onChange(i){},pluginSettings:{enabled:!0}}),t.children])},RadioInput(t){return Hn().UI.buildSettingsPanel({settings:[{id:`bd_compat-radio-${t.name}`,name:t.name,type:"dropdown",value:t.value,options:t.options.map(o=>({label:o.name,value:o.value}))}],onChange(o,n,i){t.onChange(i)}})}};get React(){return Vencord.Webpack.Common.React}get Webpack(){return Gl}isSettingEnabled(t,o,n){return!1}enableSetting(t,o,n){}disableSetting(t,o,n){}get ReactDOM(){return uH.createRoot===void 0&&Object.assign(uH,{...Vencord.Webpack.Common.ReactDOM,createRoot:Vencord.Webpack.Common.createRoot}),uH}get ReactUtils(){return{get wrapElement(){return m8.wrapElement.bind(m8)},getInternalInstance(t){return t.__reactFiber$||t[Object.keys(t).find(o=>o.startsWith("__reactInternalInstance")||o.startsWith("__reactFiber"))]||null},isMatch(t,o,n){let i=t?.type,s=i?.displayName||i?.name;return s?o===n.includes(s):!1},getOwnerInstance(t,o={include:void 0,exclude:["Popout","Tooltip","Scroller","BackgroundFlash"],filter:n=>!0}){let n=o.include??o.exclude,i=!!o.include,s=Hn().ReactUtils.getInternalInstance(t);for(;s?.return;){s=s.return;let a=s.stateNode;if(a&&typeof a!="function"&&typeof a!="string"&&Hn().ReactUtils.isMatch(s,i,n)&&o.filter(a))return a}return null}}}findModuleByProps(...t){return this.findModule(o=>t.every(n=>typeof o[n]<"u"))}findModule(t){return this.Webpack.getModule(t)}findAllModules(t){return this.Webpack.getModule(t,{first:!1})}suppressErrors(t,o=""){return(...n)=>{try{return t(...n)}catch(i){oo.error(i,`Error occured in ${o}`)}}}get monkeyPatch(){return pae}get Data(){return this.#o}get loadData(){return this.Data.load.bind(this.Data)}get saveData(){return this.Data.save.bind(this.Data)}get setData(){return this.Data.save.bind(this.Data)}get getData(){return this.Data.load.bind(this.Data)}Utils={findInTree(t,o,n={}){let i=Hn().Utils,{walkable:s=null,ignore:a=[]}=n;function l(c){for(let u in c){if(a.includes(u))continue;let p=c[u];if(o(p))return p;if(typeof p=="object"&&p!==null){let m=l(p);if(m!==void 0)return m}}}if(typeof o=="string")return t?.[o];if(o(t))return t;if(Array.isArray(t))for(let c of t){let u=i.findInTree(c,o,{walkable:s,ignore:a});if(u!==void 0)return u}else if(typeof t=="object"&&t!==null){let c=s||Object.keys(t);for(let u of c){if(t[u]===void 0)continue;let p=i.findInTree(t[u],o,{walkable:s,ignore:a});if(p!==void 0)return p}}},getNestedValue(t,o){let n=o.split("."),i=t;for(let s of n){if(i==null)return;i=i[s]}return i},semverCompare(t,o){let n=t.split(".").map(s=>Number(s)),i=o.split(".").map(s=>Number(s));for(let s=0;s<3;s++){let a=n[s]??0,l=i[s]??0;if(a<l)return-1;if(a>l)return 1}return 0},extend:sH.perform.bind(sH),debounce:hu.debounce,className:(...t)=>t.flatMap(o=>typeof o=="object"&&!Array.isArray(o)?Object.keys(o).filter(n=>o[n]):o).filter(Boolean).join(" ")};get UI(){return g8}get Net(){return{fetch:(t,o)=>ax(t,o,Ge.plugins[ml].corsProxyUrl)}}alert(t,o){g8.showConfirmationModal(t,o,{cancelText:null})}showToast(t,o=1){g8.showToast(t,o)}showNotice(t,o={}){g8.showNotice(t,o)}showConfirmationModal(t,o,n={}){g8.showConfirmationModal(t,o,n)}get injectCSS(){return Tu.addStyle.bind(Tu)}get clearCSS(){return Tu.removeStyle.bind(Tu)}get DOM(){return this.#n}get Logger(){return T9()}get linkJS(){return Tu.injectScript.bind(Tu)}get unlinkJS(){return Tu.removeScript.bind(Tu)}},bae=["Components","ContextMenu","DOM","Data","Patcher","Plugins","React","ReactDOM","ReactUtils","UI","Net","Utils","Webpack","labelsOfInstancedAPI","alert","disableSetting","enableSetting","findModule","findModuleByProps","findAllModules","getData","isSettingEnabled","loadData","monkeyPatch","saveData","setData","showConfirmationModal","showNotice","showToast","suppressErrors","injectCSS","Logger","linkJS","unlinkJS","clearCSS"],b$e=["ContextMenu"]});function Sae({items:e,onToggleExpand:t,onSelect:o,renderIcon:n,className:i="",loadingPaths:s=new Set,headerComponent:a}){let c=n||(p=>p.isDirectory?r(uu,{width:16,height:16}):r("img",{src:"/assets/94660b205108a49f.svg",width:16,height:16})),u=(p,m=0)=>{let g=!!p.expanded,y=s.has(p.id),b=p.children&&p.children.length>0;return r(X.Fragment,{key:p.id},r("div",{className:`${Tc("tree-item")} ${p.isDirectory?Tc("directory"):""} ${p.selected?Tc("active"):""}`,style:{paddingLeft:`${m*16+8}px`}},p.isDirectory?r("div",{className:Tc("folder-row"),onClick:v=>{v.stopPropagation(),t?.(p)}},r("span",{className:Tc("folder-toggle")},r(S$e,{size:"sm"},y?"Loading":g?"\\/":b||p.children!==void 0?">":"_")),c(p),r("span",{className:Tc("item-name"),onClick:v=>{v.stopPropagation(),o?.(p)}},r(Y,null,p.label))):r("div",{className:Tc("file-row"),onClick:()=>o?.(p)},r("span",{className:Tc("file-icon")},c(p)),r("span",{className:Tc("item-name")},r(Y,null,p.label)))),p.isDirectory&&g&&p.children&&r("div",{className:Tc("children-container")},p.children.map(v=>u(v,m+1))))};return r("div",{className:`${Tc("tree-view")} ${i}`},r("div",{className:Tc("tree-header")},a),r("div",{className:Tc("tree-content")},e.map(p=>u(p))))}var S$e,Tc,wae=x(()=>{"use strict";d();ps();Et();ao();B();S$e=({children:e,...t})=>r(Y,{...t,style:{color:"var(--text-muted)"}},e),Tc=$h("vc-bdcompat-fs-")});function k$e(e,t,o,n){let i=window.require("path"),s=l=>{let c=o.includes(l.path),u=n===l.path;return{id:l.path,label:l.name,isDirectory:l.isDirectory,expanded:l.isDirectory?c:void 0,selected:u,metadata:l,children:l.isDirectory&&c?w$e(l.path,e).map(s):l.isDirectory?[]:void 0}};return e.filter(l=>{let c=i.dirname(l.path);return c===t||t==="/"&&c===""||c==="\\"}).map(s)}function E$e(){let[e,t]=L({history:["/"],currentIndex:0,currentPath:"/"}),{history:o,currentIndex:n,currentPath:i}=e,[s,a]=L(!1),[l,c]=L([]),[u,p]=L([]),[m,g]=L(!1),[y,b]=L("name"),[v,E]=L("asc"),[A,C]=L(null),[I,N]=L(["/"]),[_,O]=L(new Set),F=async ge=>{let ae=ge.metadata;if(!ae.isDirectory)return;if(I.includes(ae.path))N(Fe=>Fe.filter(Xe=>Xe!==ae.path));else if(N(Fe=>[...Fe,ae.path]),!u.some(Fe=>ye.dirname(Fe.path)===ae.path)){O(Fe=>{let Xe=new Set(Fe);return Xe.add(ae.path),Xe});try{let Fe=await Eae(ae.path);p(Xe=>[...Xe.filter(Ve=>!Ve.path.startsWith(ae.path+ye.sep)),...Fe])}catch(Fe){oo.error(`Failed to load directory ${ae.path}:`,Fe)}finally{O(Fe=>{let Xe=new Set(Fe);return Xe.delete(ae.path),Xe})}}},J=ge=>{let ae=ge.metadata;C(ae.path),ae.isDirectory&&te(ae.path)},G=async ge=>{g(!0);try{let Ne=[...await Eae(ge)];switch(y){case"name":Ne.sort((Fe,Xe)=>Fe.name.localeCompare(Xe.name));break;case"type":Ne.sort((Fe,Xe)=>(Fe.type||"").localeCompare(Xe.type||""));break;case"size":Ne.sort((Fe,Xe)=>(Fe.size||0)-(Xe.size||0));break;case"date":Ne.sort((Fe,Xe)=>(Xe.modified?.getTime()||0)-(Fe.modified?.getTime()||0));break}v==="desc"&&Ne.reverse(),c(Ne),p(Ne)}catch(ae){oo.error(`Failed to load directory ${ge}:`,ae)}finally{g(!1)}};X.useEffect(()=>{G(i)},[i,y,v]);let te=ge=>{i!==ge&&t(ae=>ae.currentIndex<ae.history.length-1?{history:[...ae.history.slice(0,ae.currentIndex+1),ge],currentIndex:ae.currentIndex+1,currentPath:ge}:ae.history[ae.history.length-1]===ge?{...ae,currentPath:ge}:{history:[...ae.history,ge],currentIndex:ae.history.length,currentPath:ge})};X.useEffect(()=>{te("/")},[]);let K=()=>{let ae=window.require("path").dirname(i);ae!==i&&te(ae)},oe=()=>{if(n>0){let ge=n-1,ae=o[ge];t(Ne=>({...Ne,currentIndex:ge,currentPath:ae}))}},le=()=>{if(n<o.length-1){let ge=n+1,ae=o[ge];t(Ne=>({...Ne,currentIndex:ge,currentPath:ae}))}},he=ge=>{y===ge?E(ae=>ae==="asc"?"desc":"asc"):(b(ge),E("asc"))},Ae=ge=>{C(ge.path),ge.isDirectory&&te(ge.path)},Ce=(ge,ae)=>{ge.preventDefault(),ae&&C(ae.path);let Ne=ae?.path||i,Fe=ae?.isDirectory??!0,Xe=!Fe&&Ne.endsWith(".plugin.js"),It=[];It.push({label:Ne,disabled:!0}),Fe?It.push({label:"Import File Here",action:async()=>{try{await zl.importFile(Ne,!0),G(i)}catch(Ve){oo.error("File import failed:",Ve)}}}):It.push({label:"Export File",action:async()=>{try{await zl.exportFile(Ne)}catch(Ve){oo.error("File export failed:",Ve)}}}),It.push({type:"separator"}),Fe?It.push({label:"Delete Folder",danger:!0,action:()=>{Hn().UI.showConfirmationModal("Delete Folder",`Are you sure you want to delete "${ae?.name}" and all its contents? This cannot be undone.`,{confirmText:"Delete",cancelText:"Cancel",onConfirm:()=>{try{zl.removeDirectoryRecursive(Ne);let Ve=window.require("path").dirname(Ne);te(Ve)}catch(Ve){oo.error("Folder deletion failed:",Ve)}}})}}):It.push({label:"Delete File",danger:!0,action:()=>{Hn().UI.showConfirmationModal("Delete File",`Are you sure you want to permanently delete "${ae?.name}"?`,{confirmText:"Delete",cancelText:"Cancel",onConfirm:()=>{try{window.require("fs").unlinkSync(Ne),G(i)}catch(Ve){oo.error("File deletion failed:",Ve)}}})}}),Xe&&(It.push({type:"separator"}),It.push({label:"Reload Plugin",action:async()=>{try{let Ve=window.require("path").parse(Ne);Ve.dir=Ve.dir.startsWith("//")?Ve.dir.slice(1):Ve.dir;let _t=Hn().Plugins.getAll().find(Wt=>Wt.sourcePath===Ve.dir&&Wt.filename===Ve.base);if(_t){if(Vencord.Settings.plugins[_t.name].enabled=!1,_t.started){let no=Vencord.Settings.plugins[ml].pluginsStatus[_t.name];await Vencord.Plugins.stopPlugin(_t),no===!0&&(Vencord.Settings.plugins[ml].pluginsStatus[_t.name]=no)}delete Vencord.Plugins.plugins[_t.name],window.GeneratedPlugins.splice(window.GeneratedPlugins.indexOf(_t),1),await new Promise(no=>setTimeout(no,300));let Wt=window.require("fs").readFileSync(Ne,"utf8"),po=await ix(Wt,Ve.base,!0,Ve.dir);ob(po),Hn().UI.showToast(`Plugin "${_t.name}" reloaded`,1)}}catch(Ve){oo.error("Plugin reload failed:",Ve)}}})),Hn().ContextMenu.open(ge,Hn().ContextMenu.buildMenu(It.filter(Boolean)),{})},ye=window.require("path"),ce=i.split(ye.sep).filter(Boolean),xe=l.reduce((ge,ae)=>ae.isDirectory?ge:ge+(ae.size||0),0),Ze=l.length;return r("div",{className:Kn("explorer-container")},r("div",{className:Kn("toolbar")},r("div",{className:Kn("nav-buttons")},r(Me,{size:"small",variant:"secondary",disabled:n===0,onClick:oe},r(vp,null,"<")),r(Me,{size:"small",variant:"none",disabled:n===o.length-1,onClick:le},r(vp,null,">")),r(Me,{size:"small",variant:"none",onClick:K},r(vp,null,"/\\"))),r("div",{className:Kn("address-bar")},r("span",{className:Kn("address-label")},r(Y,null,"Address:")),r("span",{className:Kn("breadcrumb"),onClick:()=>te("/")},r(Y,{style:{color:"var(--text-link)"}},"/")),ce.map((ge,ae)=>{let Ne="/"+ce.slice(0,ae+1).join("/");return r(X.Fragment,{key:Ne},r("span",{className:Kn("breadcrumb-separator")},r(vp,null,">")),r("span",{className:Kn("breadcrumb"),onClick:()=>te(Ne)},r(Y,{style:{color:"var(--text-link)"}},ge)))}))),r("div",{className:Kn("content-container")},r("div",{style:{display:"none"},className:`${Kn("sidebar")} ${s?Kn("sidebar-collapsed"):""}`},r(Me,{size:"small",variant:"none",onClick:()=>a(!s)},r(vp,null,s?">":"<")),!s&&r("div",{className:Kn("tree-container")},r(Sae,{items:k$e(u,i,I,A),onToggleExpand:F,onSelect:J,loadingPaths:_,headerComponent:r(Y,null,"Navigation")}))),r("div",{className:Kn("main-content")},r("div",{className:Kn("sort-controls")},r("span",null,r(Y,null,"Sort:")),r(Me,{size:"small",variant:"none",className:`${Kn("sort-button")} ${y==="name"?Kn("active"):""}`,onClick:()=>he("name")},r(Y,null,"Name ",y==="name"&&(v==="asc"?"\u2191":"\u2193"))),r(Me,{size:"small",variant:"none",className:`${Kn("sort-button")} ${y==="type"?Kn("active"):""}`,onClick:()=>he("type")},r(Y,null,"Type ",y==="type"&&(v==="asc"?"\u2191":"\u2193"))),r(Me,{size:"small",variant:"none",className:`${Kn("sort-button")} ${y==="size"?Kn("active"):""}`,onClick:()=>he("size")},r(Y,null,"Size ",y==="size"&&(v==="asc"?"\u2191":"\u2193"))),r(Me,{size:"small",variant:"none",className:`${Kn("sort-button")} ${y==="date"?Kn("active"):""}`,onClick:()=>he("date")},r(Y,null,"Date Modified ",y==="date"&&(v==="asc"?"\u2191":"\u2193")))),r("div",{className:Kn("file-list")},m?r("div",{className:Kn("loading")},"Loading files..."):l.length===0?r("div",{className:Kn("empty-state")},r(uu,{width:48,height:48}),r(W,null,"This folder is empty")):r("table",{className:Kn("file-table")},r("colgroup",null,r("col",{style:{width:"55%"}}),r("col",{style:{width:"18%"}}),r("col",{style:{width:"12%"}}),r("col",{style:{width:"15%"}})),r("thead",null,r("tr",null,r("th",null,r(vp,null,"Name")),r("th",null,r(vp,null,"Type")),r("th",null,r(vp,null,"Size")),r("th",null,r(vp,null,"Date Modified")))),r("tbody",{onContextMenu:ge=>Ce(ge)},l.map(ge=>r("tr",{key:ge.path,className:`${Kn("file-row")} ${A===ge.path?Kn("selected"):""}`,onClick:()=>Ae(ge),onContextMenu:ae=>Ce(ae,ge)},r("td",null,r("div",{className:Kn("file-name")},ge.isDirectory?r(uu,{width:16,height:16}):r("img",{src:"/assets/94660b205108a49f.svg",width:16,height:16}),r("span",null,r(Y,null,ge.name)))),r("td",null,r(Y,null,ge.type)),r("td",null,r(Y,null,ge.isDirectory?"":Aae(ge.size))),r("td",null,r(Y,null,ge.modified?.toLocaleDateString()))))))))),r("div",{className:Kn("status-bar")},r("span",null,r(vp,{size:"sm"},Ze," item",Ze!==1?"s":""," - ",Aae(xe)," used"))))}function A$e(){return r(bi,null,r("section",null,r(Wh,null,r(Pa,{text:"Export Filesystem as ZIP",action:()=>p8.downloadZip(),Icon:uu}),r(Pa,{text:"Import Filesystem From ZIP",action:()=>p8.importZip(),Icon:uu}),r(Pa,{text:"Reload BD Plugins",action:()=>I9(),Icon:HS}),r(Pa,{text:"Import BD Plugin",action:async()=>await zl.importFile("//BD/plugins",!0,!1,".js"),Icon:Am}),r(Pa,{text:"Import Bulk Plugins",action:async()=>await zl.importFile("//BD/plugins",!0,!0,".js"),Icon:uu}))),r(cn,{className:Kn("explorer-card")},r(E$e,null)))}function Cae(){return{title:kae,Component:Bi(A$e,kae),key:`${typeof Vencord.Util.isEquicordGuild>"u"?"vencord":"equicord"}_bv_fs_view`,Icon:uu}}function Tae(){let e=Vencord.Plugins.plugins.Settings,{customSections:t,customEntries:o}=e;o&&o.push(Cae())}function hH(){let e=Vencord.Plugins.plugins.Settings,{customSections:t,customEntries:o}=e;o&&o.splice(o.findIndex(n=>n.key===Cae().key),1)}var kae,Kn,vp,w$e,Eae,Aae,Iae=x(()=>{"use strict";d();ps();ao();Co();Et();fs();wt();TA();Nw();B();l8();d8();A9();sx();wae();kae="Virtual Filesystem",Kn=$h("vc-bdcompat-fs-"),vp=({children:e,...t})=>r(Y,{...t,style:{color:"var(--text-muted)"}},e),w$e=(e,t)=>{let o=window.require("path");return t.filter(n=>{let i=e==="/"?"":e;return o.dirname(n.path)===i&&n.path!==e})};Eae=async e=>{let t=window.require("fs"),o=window.require("path");try{let n=await t.readdirSync(e);return Promise.all(n.map(async i=>{let s=o.join(e,i),a=t.statSync(s);return{name:i,path:s,isDirectory:a.isDirectory(),size:a.isFile()?a.size:void 0,modified:a.mtime,type:a.isDirectory()?"Folder":(i.split(".").pop()||"").toUpperCase()}}))}catch(n){return oo.error(`Failed to read directory ${e}:`,n),[]}},Aae=e=>e===void 0?"":e<1024?`${e} B`:e<1024*1024?`${(e/1024).toFixed(1)} KB`:e<1024*1024*1024?`${(e/(1024*1024)).toFixed(1)} MB`:`${(e/(1024*1024*1024)).toFixed(1)} GB`});var Mae=Ro((pLt,xH)=>{"use strict";d();var C$e=Object.prototype.hasOwnProperty,fl="~";function x8(){}Object.create&&(x8.prototype=Object.create(null),new x8().__proto__||(fl=!1));function T$e(e,t,o){this.fn=e,this.context=t,this.once=o||!1}function Dae(e,t,o,n,i){if(typeof o!="function")throw new TypeError("The listener must be a function");var s=new T$e(o,n||e,i),a=fl?fl+t:t;return e._events[a]?e._events[a].fn?e._events[a]=[e._events[a],s]:e._events[a].push(s):(e._events[a]=s,e._eventsCount++),e}function N9(e,t){--e._eventsCount===0?e._events=new x8:delete e._events[t]}function La(){this._events=new x8,this._eventsCount=0}La.prototype.eventNames=function(){var t=[],o,n;if(this._eventsCount===0)return t;for(n in o=this._events)C$e.call(o,n)&&t.push(fl?n.slice(1):n);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(o)):t};La.prototype.listeners=function(t){var o=fl?fl+t:t,n=this._events[o];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,s=n.length,a=new Array(s);i<s;i++)a[i]=n[i].fn;return a};La.prototype.listenerCount=function(t){var o=fl?fl+t:t,n=this._events[o];return n?n.fn?1:n.length:0};La.prototype.emit=function(t,o,n,i,s,a){var l=fl?fl+t:t;if(!this._events[l])return!1;var c=this._events[l],u=arguments.length,p,m;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),u){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,o),!0;case 3:return c.fn.call(c.context,o,n),!0;case 4:return c.fn.call(c.context,o,n,i),!0;case 5:return c.fn.call(c.context,o,n,i,s),!0;case 6:return c.fn.call(c.context,o,n,i,s,a),!0}for(m=1,p=new Array(u-1);m<u;m++)p[m-1]=arguments[m];c.fn.apply(c.context,p)}else{var g=c.length,y;for(m=0;m<g;m++)switch(c[m].once&&this.removeListener(t,c[m].fn,void 0,!0),u){case 1:c[m].fn.call(c[m].context);break;case 2:c[m].fn.call(c[m].context,o);break;case 3:c[m].fn.call(c[m].context,o,n);break;case 4:c[m].fn.call(c[m].context,o,n,i);break;default:if(!p)for(y=1,p=new Array(u-1);y<u;y++)p[y-1]=arguments[y];c[m].fn.apply(c[m].context,p)}}return!0};La.prototype.on=function(t,o,n){return Dae(this,t,o,n,!1)};La.prototype.once=function(t,o,n){return Dae(this,t,o,n,!0)};La.prototype.removeListener=function(t,o,n,i){var s=fl?fl+t:t;if(!this._events[s])return this;if(!o)return N9(this,s),this;var a=this._events[s];if(a.fn)a.fn===o&&(!i||a.once)&&(!n||a.context===n)&&N9(this,s);else{for(var l=0,c=[],u=a.length;l<u;l++)(a[l].fn!==o||i&&!a[l].once||n&&a[l].context!==n)&&c.push(a[l]);c.length?this._events[s]=c.length===1?c[0]:c:N9(this,s)}return this};La.prototype.removeAllListeners=function(t){var o;return t?(o=fl?fl+t:t,this._events[o]&&N9(this,o)):(this._events=new x8,this._eventsCount=0),this};La.prototype.off=La.prototype.removeListener;La.prototype.addListener=La.prototype.on;La.prefixed=fl;La.EventEmitter=La;typeof xH<"u"&&(xH.exports=La)});var U0,y8=x(()=>{d();U0=Ml(Mae(),1)});var B9,Nae=x(()=>{d();y8();B9=class extends U0.default{[Symbol.toStringTag]="List";constructor(t){super(),t&&this.push(...t)}data=new Set;toSet(){return new Set(this.data)}toArray(){return Array.from(this.data)}toJSON(){return Array.from(this.data)}toString(){return this.join(",")}_set(t,o,n=!1){if(Math.abs(t)>this.data.size)throw new ReferenceError("Can not set an element outside the bounds of the list");let i=Array.from(this.data);i.splice(t,+n,o),this.data=new Set(i),this.emit("update")}set(t,o){this._set(t,o,!0)}deleteAt(t){if(Math.abs(t)>this.data.size)throw new ReferenceError("Can not delete an element outside the bounds of the list");this.delete(Array.from(this.data).at(t))}insert(t,o=this.data.size){this._set(o,t,!1)}at(t){if(Math.abs(t)>this.data.size)throw new ReferenceError("Can not access an element outside the bounds of the list");return Array.from(this.data).at(t)}pop(){let t=Array.from(this.data).pop();return t!==void 0&&this.delete(t),t}push(...t){for(let o of t)this.add(o);return this.data.size}join(t){return Array.from(this.data).join(t)}splice(t,o,...n){if(Math.abs(t)>this.data.size)throw new ReferenceError("Can not splice elements outside the bounds of the list");let i=Array.from(this.data),s=i.splice(t,o,...n);return this.data=new Set(i),this.emit("update"),s}add(t){return this.data.add(t),this.emit("update"),this.emit("add",t),this}clear(){this.data.clear(),this.emit("update")}delete(t){let o=this.data.delete(t);return this.emit("update"),o}has(t){return this.data.has(t)}get size(){return this.data.size}entries(){return this.toArray().entries()}keys(){return this.toArray().keys()}values(){return this.data.values()}[Symbol.iterator](){return this.data[Symbol.iterator]()}}});function I$e(e,t){let o=Object.entries(e);return Object.fromEntries(o.filter(([n,i])=>t(n,i)))}function b8(e,...t){let o={};for(let n of t.flat())o[n]=e[n];return o}function yH(e,...t){return I$e(e,o=>!t.flat().includes(o))}function P9(e){try{return JSON.parse(e),!0}catch{return!1}}function Bae(e){let t=[];for(let o=e;o&&!["Function","Object"].includes(o.constructor.name);o=Object.getPrototypeOf(o))t.push(o.constructor.name);return t}var bH=x(()=>{d()});function _9(e=new Error){let t=setTimeout(()=>{throw e},5e3);return()=>clearTimeout(t)}function Ko(e){throw e&&typeof e=="object"&&Bae(e).includes("Error")&&Error?.captureStackTrace(e,Ko),e}var vH=x(()=>{d();bH()});var Pae,ELt,_ae=x(()=>{d();Pae=Intl.NumberFormat("en",{notation:"compact"}),ELt=Pae.format.bind(Pae)});function Rae(e=0,t=1){return Math.round(Math.random()*(t-e)+e)}var Lae=x(()=>{d()});function SH(e){return e.at(0).toUpperCase()+e.slice(1)}function gl(e){return D$e.encode(e)}function Sp(e){if(!e)return"";if(e.buffer instanceof ArrayBuffer&&!e.buffer.resizable)return Oae.decode(e);let t=new Uint8Array(e.byteLength);return t.set(e),Oae.decode(t)}function R9(e){let t=new Uint8Array(e.length);for(let o=0;o<e.length;o++)t[o]=e.charCodeAt(o);return t}function L9(e){let t="";for(let o=0;o<e.length;o++)t+=String.fromCharCode(e[o]);return t}function Fae(e){let t=e.replace(/-/g,""),o=new Uint8Array(16);for(let n=0;n<16;n++)o[n]=parseInt(t.slice(n*2,n*2+2),16);return o}var D$e,Oae,v8=x(()=>{d();D$e=new TextEncoder;Oae=new TextDecoder});var Uae=x(()=>{d()});var $ae=x(()=>{d()});var Hae=x(()=>{d();v8()});var Pi=x(()=>{d();Nae();vH();_ae();bH();Lae();v8();Uae();$ae();Hae()});function ui(e){let t=`${e.code}: ${wH[e.errno]}, ${e.syscall}`;return e.path&&(t+=` '${e.path}'`),e.dest&&(t+=` -> '${e.dest}'`),e.message&&!e.message.startsWith(wH[e.errno])&&(t+=` (${e.message})`),e.message=t,e}function ve(e,t,o,n){typeof t=="string"&&(t={syscall:t,path:o,dest:n});let i=new zn(Ie[e],!1,t??{});return Error.captureStackTrace?.(i,ve),i}function Se(e,t){let o=new zn(Ie[e],t??wH[Ie[e]]);return Error.captureStackTrace?.(o,Se),o}function Ic(e,t,o){let n=typeof e=="string"?{syscall:e}:e;return t&&(n.path=t),o&&(n.dest=o),function(i){throw Object.assign(i,n),ui(i),i}}var Ie,wH,zn,zae=x(()=>{d();Pi();(function(e){e[e.EPERM=1]="EPERM",e[e.ENOENT=2]="ENOENT",e[e.ESRCH=3]="ESRCH",e[e.EINTR=4]="EINTR",e[e.EIO=5]="EIO",e[e.ENXIO=6]="ENXIO",e[e.E2BIG=7]="E2BIG",e[e.ENOEXEC=8]="ENOEXEC",e[e.EBADF=9]="EBADF",e[e.ECHILD=10]="ECHILD",e[e.EAGAIN=11]="EAGAIN",e[e.ENOMEM=12]="ENOMEM",e[e.EACCES=13]="EACCES",e[e.EFAULT=14]="EFAULT",e[e.ENOTBLK=15]="ENOTBLK",e[e.EBUSY=16]="EBUSY",e[e.EEXIST=17]="EEXIST",e[e.EXDEV=18]="EXDEV",e[e.ENODEV=19]="ENODEV",e[e.ENOTDIR=20]="ENOTDIR",e[e.EISDIR=21]="EISDIR",e[e.EINVAL=22]="EINVAL",e[e.ENFILE=23]="ENFILE",e[e.EMFILE=24]="EMFILE",e[e.ETXTBSY=26]="ETXTBSY",e[e.EFBIG=27]="EFBIG",e[e.ENOSPC=28]="ENOSPC",e[e.ESPIPE=29]="ESPIPE",e[e.EROFS=30]="EROFS",e[e.EMLINK=31]="EMLINK",e[e.EPIPE=32]="EPIPE",e[e.EDOM=33]="EDOM",e[e.ERANGE=34]="ERANGE",e[e.EDEADLK=35]="EDEADLK",e[e.ENAMETOOLONG=36]="ENAMETOOLONG",e[e.ENOLCK=37]="ENOLCK",e[e.ENOSYS=38]="ENOSYS",e[e.ENOTEMPTY=39]="ENOTEMPTY",e[e.ELOOP=40]="ELOOP",e[e.ENOMSG=42]="ENOMSG",e[e.EIDRM=43]="EIDRM",e[e.ECHRNG=44]="ECHRNG",e[e.EL2NSYNC=45]="EL2NSYNC",e[e.EL3HLT=46]="EL3HLT",e[e.EL3RST=47]="EL3RST",e[e.ENRNG=48]="ENRNG",e[e.EUNATCH=49]="EUNATCH",e[e.ECSI=50]="ECSI",e[e.EL2HLT=51]="EL2HLT",e[e.EBADE=52]="EBADE",e[e.EBADR=53]="EBADR",e[e.EXFULL=54]="EXFULL",e[e.ENOANO=55]="ENOANO",e[e.EBADRQC=56]="EBADRQC",e[e.EBADSLT=57]="EBADSLT",e[e.EBFONT=59]="EBFONT",e[e.ENOSTR=60]="ENOSTR",e[e.ENODATA=61]="ENODATA",e[e.ETIME=62]="ETIME",e[e.ENOSR=63]="ENOSR",e[e.ENONET=64]="ENONET",e[e.ENOPKG=65]="ENOPKG",e[e.EREMOTE=66]="EREMOTE",e[e.ENOLINK=67]="ENOLINK",e[e.EADV=68]="EADV",e[e.ESRMNT=69]="ESRMNT",e[e.ECOMM=70]="ECOMM",e[e.EPROTO=71]="EPROTO",e[e.EMULTIHOP=72]="EMULTIHOP",e[e.EDOTDOT=73]="EDOTDOT",e[e.EBADMSG=74]="EBADMSG",e[e.EOVERFLOW=75]="EOVERFLOW",e[e.ENOTUNIQ=76]="ENOTUNIQ",e[e.EBADFD=77]="EBADFD",e[e.EREMCHG=78]="EREMCHG",e[e.ELIBACC=79]="ELIBACC",e[e.ELIBBAD=80]="ELIBBAD",e[e.ELIBSCN=81]="ELIBSCN",e[e.ELIBMAX=82]="ELIBMAX",e[e.ELIBEXEC=83]="ELIBEXEC",e[e.EILSEQ=84]="EILSEQ",e[e.ERESTART=85]="ERESTART",e[e.ESTRPIPE=86]="ESTRPIPE",e[e.EUSERS=87]="EUSERS",e[e.ENOTSOCK=88]="ENOTSOCK",e[e.EDESTADDRREQ=89]="EDESTADDRREQ",e[e.EMSGSIZE=90]="EMSGSIZE",e[e.EPROTOTYPE=91]="EPROTOTYPE",e[e.ENOPROTOOPT=92]="ENOPROTOOPT",e[e.EPROTONOSUPPORT=93]="EPROTONOSUPPORT",e[e.ESOCKTNOSUPPORT=94]="ESOCKTNOSUPPORT",e[e.ENOTSUP=95]="ENOTSUP",e[e.EPFNOSUPPORT=96]="EPFNOSUPPORT",e[e.EAFNOSUPPORT=97]="EAFNOSUPPORT",e[e.EADDRINUSE=98]="EADDRINUSE",e[e.EADDRNOTAVAIL=99]="EADDRNOTAVAIL",e[e.ENETDOWN=100]="ENETDOWN",e[e.ENETUNREACH=101]="ENETUNREACH",e[e.ENETRESET=102]="ENETRESET",e[e.ECONNABORTED=103]="ECONNABORTED",e[e.ECONNRESET=104]="ECONNRESET",e[e.ENOBUFS=105]="ENOBUFS",e[e.EISCONN=106]="EISCONN",e[e.ENOTCONN=107]="ENOTCONN",e[e.ESHUTDOWN=108]="ESHUTDOWN",e[e.ETOOMANYREFS=109]="ETOOMANYREFS",e[e.ETIMEDOUT=110]="ETIMEDOUT",e[e.ECONNREFUSED=111]="ECONNREFUSED",e[e.EHOSTDOWN=112]="EHOSTDOWN",e[e.EHOSTUNREACH=113]="EHOSTUNREACH",e[e.EALREADY=114]="EALREADY",e[e.EINPROGRESS=115]="EINPROGRESS",e[e.ESTALE=116]="ESTALE",e[e.EEUCLEAN=117]="EEUCLEAN",e[e.ENOTNAM=118]="ENOTNAM",e[e.ENAVAIL=119]="ENAVAIL",e[e.EISNAM=120]="EISNAM",e[e.EREMOTEIO=121]="EREMOTEIO",e[e.EDQUOT=122]="EDQUOT",e[e.ENOMEDIUM=123]="ENOMEDIUM",e[e.EMEDIUMTYPE=124]="EMEDIUMTYPE",e[e.ECANCELED=125]="ECANCELED",e[e.ENOKEY=126]="ENOKEY",e[e.EKEYEXPIRED=127]="EKEYEXPIRED",e[e.EKEYREVOKED=128]="EKEYREVOKED",e[e.EKEYREJECTED=129]="EKEYREJECTED",e[e.EOWNERDEAD=130]="EOWNERDEAD",e[e.ENOTRECOVERABLE=131]="ENOTRECOVERABLE",e[e.ERFKILL=132]="ERFKILL",e[e.EHWPOISON=133]="EHWPOISON"})(Ie||(Ie={}));wH={[Ie.EPERM]:"Operation not permitted",[Ie.ENOENT]:"No such file or directory",[Ie.ESRCH]:"No such process",[Ie.EINTR]:"Interrupted system call",[Ie.EIO]:"Input/output error",[Ie.ENXIO]:"No such device or address",[Ie.E2BIG]:"Argument list too long",[Ie.ENOEXEC]:"Exec format error",[Ie.EBADF]:"Bad file descriptor",[Ie.ECHILD]:"No child processes",[Ie.EAGAIN]:"Resource temporarily unavailable",[Ie.ENOMEM]:"Out of memory",[Ie.EACCES]:"Permission denied",[Ie.EFAULT]:"Bad address",[Ie.ENOTBLK]:"Block device required",[Ie.EBUSY]:"Resource busy or locked",[Ie.EEXIST]:"File exists",[Ie.EXDEV]:"Invalid cross-device link",[Ie.ENODEV]:"No such device",[Ie.ENOTDIR]:"File is not a directory",[Ie.EISDIR]:"File is a directory",[Ie.EINVAL]:"Invalid argument",[Ie.ENFILE]:"Too many open files in system",[Ie.EMFILE]:"Too many open files",[Ie.ETXTBSY]:"Text file busy",[Ie.EFBIG]:"File is too big",[Ie.ENOSPC]:"No space left on disk",[Ie.ESPIPE]:"Illegal seek",[Ie.EROFS]:"Cannot modify a read-only file system",[Ie.EMLINK]:"Too many links",[Ie.EPIPE]:"Broken pipe",[Ie.EDOM]:"Numerical argument out of domain",[Ie.ERANGE]:"Numerical result out of range",[Ie.EDEADLK]:"Resource deadlock would occur",[Ie.ENAMETOOLONG]:"File name too long",[Ie.ENOLCK]:"No locks available",[Ie.ENOSYS]:"Function not implemented",[Ie.ENOTEMPTY]:"Directory is not empty",[Ie.ELOOP]:"Too many levels of symbolic links",[Ie.ENOMSG]:"No message of desired type",[Ie.EIDRM]:"Identifier removed",[Ie.ECHRNG]:"Channel number out of range",[Ie.EL2NSYNC]:"Level 2 not synchronized",[Ie.EL3HLT]:"Level 3 halted",[Ie.EL3RST]:"Level 3 reset",[Ie.ENRNG]:"Link number out of range",[Ie.EUNATCH]:"Protocol driver not attached",[Ie.ECSI]:"No CSI structure available",[Ie.EL2HLT]:"Level 2 halted",[Ie.EBADE]:"Invalid exchange",[Ie.EBADR]:"Invalid request descriptor",[Ie.EXFULL]:"Exchange full",[Ie.ENOANO]:"No anode",[Ie.EBADRQC]:"Invalid request code",[Ie.EBADSLT]:"Invalid slot",[Ie.EBFONT]:"Bad font file format",[Ie.ENOSTR]:"Device not a stream",[Ie.ENODATA]:"No data available",[Ie.ETIME]:"Timer expired",[Ie.ENOSR]:"Out of streams resources",[Ie.ENONET]:"Machine is not on the network",[Ie.ENOPKG]:"Package not installed",[Ie.EREMOTE]:"Object is remote",[Ie.ENOLINK]:"Link has been severed",[Ie.EADV]:"Advertise error",[Ie.ESRMNT]:"Srmount error",[Ie.ECOMM]:"Communication error on send",[Ie.EPROTO]:"Protocol error",[Ie.EMULTIHOP]:"Multihop attempted",[Ie.EDOTDOT]:"RFS specific error",[Ie.EBADMSG]:"Bad message",[Ie.EOVERFLOW]:"Value too large for defined data type",[Ie.ENOTUNIQ]:"Name not unique on network",[Ie.EBADFD]:"File descriptor in bad state",[Ie.EREMCHG]:"Remote address changed",[Ie.ELIBACC]:"Can not access a needed shared library",[Ie.ELIBBAD]:"Accessing a corrupted shared library",[Ie.ELIBSCN]:".lib section in a.out corrupted",[Ie.ELIBMAX]:"Attempting to link in too many shared libraries",[Ie.ELIBEXEC]:"Cannot exec a shared library directly",[Ie.EILSEQ]:"Invalid or incomplete multibyte or wide character",[Ie.ERESTART]:"Interrupted system call should be restarted",[Ie.ESTRPIPE]:"Streams pipe error",[Ie.EUSERS]:"Too many users",[Ie.ENOTSOCK]:"Socket operation on non-socket",[Ie.EDESTADDRREQ]:"Destination address required",[Ie.EMSGSIZE]:"Message too long",[Ie.EPROTOTYPE]:"Protocol wrong type for socket",[Ie.ENOPROTOOPT]:"Protocol not available",[Ie.EPROTONOSUPPORT]:"Protocol not supported",[Ie.ESOCKTNOSUPPORT]:"Socket type not supported",[Ie.ENOTSUP]:"Operation is not supported",[Ie.EPFNOSUPPORT]:"Protocol family not supported",[Ie.EAFNOSUPPORT]:"Address family not supported by protocol",[Ie.EADDRINUSE]:"Address already in use",[Ie.EADDRNOTAVAIL]:"Cannot assign requested address",[Ie.ENETDOWN]:"Network is down",[Ie.ENETUNREACH]:"Network is unreachable",[Ie.ENETRESET]:"Network dropped connection on reset",[Ie.ECONNABORTED]:"Software caused connection abort",[Ie.ECONNRESET]:"Connection reset by peer",[Ie.ENOBUFS]:"No buffer space available",[Ie.EISCONN]:"Transport endpoint is already connected",[Ie.ENOTCONN]:"Transport endpoint is not connected",[Ie.ESHUTDOWN]:"Cannot send after transport endpoint shutdown",[Ie.ETOOMANYREFS]:"Too many references: cannot splice",[Ie.ETIMEDOUT]:"Connection timed out",[Ie.ECONNREFUSED]:"Connection refused",[Ie.EHOSTDOWN]:"Host is down",[Ie.EHOSTUNREACH]:"No route to host",[Ie.EALREADY]:"Operation already in progress",[Ie.EINPROGRESS]:"Operation now in progress",[Ie.ESTALE]:"Stale file handle",[Ie.EEUCLEAN]:"Structure needs cleaning",[Ie.ENOTNAM]:"Not a XENIX named type file",[Ie.ENAVAIL]:"No XENIX semaphores available",[Ie.EISNAM]:"Is a named type file",[Ie.EREMOTEIO]:"Remote I/O error",[Ie.EDQUOT]:"Disk quota exceeded",[Ie.ENOMEDIUM]:"No medium found",[Ie.EMEDIUMTYPE]:"Wrong medium type",[Ie.ECANCELED]:"Operation canceled",[Ie.ENOKEY]:"Required key not available",[Ie.EKEYEXPIRED]:"Key has expired",[Ie.EKEYREVOKED]:"Key has been revoked",[Ie.EKEYREJECTED]:"Key was rejected by service",[Ie.EOWNERDEAD]:"Owner died",[Ie.ENOTRECOVERABLE]:"State not recoverable",[Ie.ERFKILL]:"Operation not possible due to RF-kill",[Ie.EHWPOISON]:"Memory page has hardware error"};zn=class e extends Error{errno;code;path;dest;syscall;constructor(t,o,n={}){let i=Ie[t];super(o||""),this.errno=t,this.code=i,Object.assign(this,yH(n,"message")),o||ui(this),Error.captureStackTrace?.(this,this.constructor)}toString(){return this.message}toJSON(){let t={errno:this.errno,code:this.code,stack:this.stack,message:this.message};return this.path&&(t.path=this.path),this.dest&&(t.dest=this.dest),this.syscall&&(t.syscall=this.syscall),t}static fromJSON(t){let o=t.syscall?new e(t.errno,!1,t):new e(t.errno,t.message);return o.stack=t.stack,o}}});var hl={};Ao(hl,{Level:()=>_o,alert:()=>sb,configure:()=>_$e,crit:()=>Vs,debug:()=>ea,deprecated:()=>B$e,emerg:()=>N$e,entries:()=>IH,err:()=>pr,fancy:()=>P$e,format:()=>Kae,info:()=>lx,isEnabled:()=>F9,levelOf:()=>Wae,levels:()=>O9,log:()=>DH,notice:()=>ab,warn:()=>Xo});function Wae(e){return O9.indexOf(e)}function DH(e,t){if(!F9)return;let o={level:e,message:t,timestamp:new Date,elapsedMs:performance.now()};IH.add(o),Yae(o)}function $0(e){return function(t){return DH(e,t.toString()),t}}function B$e(e){DH(_o.WARN,e+" is deprecated and should not be used.")}function kH(e,t){return`\x1B[${t}m${e}\x1B[0m`}function EH(e){return"["+(e.elapsedMs/1e3).toFixed(3).padStart(10)+"] "}function P$e({style:e,colorize:t}){return function*(o){e=="css"&&(yield t=="level"?"%c%s %c%s":"%c%s %c%s%s %c%s"),yield*e=="ansi"?[kH(EH(o),"2;37")]:["opacity: 0.8; color: white;",EH(o)];let n=e=="ansi"?[kH(O9[o.level].toUpperCase(),Gae.ansi[o.level])]:[Gae.css[o.level],O9[o.level].toUpperCase()];if(t=="level"){yield*n,yield o.message;return}o.level<_o.CRIT&&(yield*n),e=="ansi"?yield kH(o.message,qae.ansi[o.level]):yield*[qae.css[o.level],o.message]}}function Kae(e){let t=AH(e);return typeof t=="string"?[t]:Array.from(t)}function Yae(e){e.level>TH||CH(...Kae(e))}function _$e(e){if(AH=e.format??AH,CH=e.output??CH,TH=typeof e.level=="string"?Wae(e.level):e.level??TH,F9=e.enabled??F9,jae=e.stack??jae,!!e.dumpBacklog)for(let t of IH)Yae(t)}var _o,O9,IH,N$e,sb,Vs,pr,Xo,ab,lx,ea,Gae,qae,AH,CH,TH,jae,F9,Wi=x(()=>{d();Pi();(function(e){e[e.EMERG=0]="EMERG",e[e.ALERT=1]="ALERT",e[e.CRIT=2]="CRIT",e[e.ERR=3]="ERR",e[e.WARN=4]="WARN",e[e.NOTICE=5]="NOTICE",e[e.INFO=6]="INFO",e[e.DEBUG=7]="DEBUG"})(_o||(_o={}));O9=["emergency","alert","critical","error","warning","notice","info","debug"];IH=new B9;N$e=$0(_o.EMERG),sb=$0(_o.ALERT),Vs=$0(_o.CRIT),pr=$0(_o.ERR),Xo=$0(_o.WARN),ab=$0(_o.NOTICE),lx=$0(_o.INFO),ea=$0(_o.DEBUG);Gae={ansi:{[_o.EMERG]:"1;4;37;41",[_o.ALERT]:"1;37;41",[_o.CRIT]:"1;35",[_o.ERR]:"1;31",[_o.WARN]:"1;33",[_o.NOTICE]:"1;36",[_o.INFO]:"1;37",[_o.DEBUG]:"0;2;37"},css:{[_o.EMERG]:"font-weight: bold; text-decoration: underline; color: white; background-color: red;",[_o.ALERT]:"font-weight: bold; color: white; background-color: red;",[_o.CRIT]:"font-weight: bold; color: magenta;",[_o.ERR]:"font-weight: bold; color: red;",[_o.WARN]:"font-weight: bold; color: yellow;",[_o.NOTICE]:"font-weight: bold; color: cyan;",[_o.INFO]:"font-weight: bold; color: white;",[_o.DEBUG]:"opacity: 0.8; color: white;"}},qae={ansi:{[_o.EMERG]:"1;31",[_o.ALERT]:"1;31",[_o.CRIT]:"1;31",[_o.ERR]:"31",[_o.WARN]:"33",[_o.NOTICE]:"1;37",[_o.INFO]:"37",[_o.DEBUG]:"2;37"},css:{[_o.EMERG]:"font-weight: bold; color: red;",[_o.ALERT]:"font-weight: bold; color: red;",[_o.CRIT]:"font-weight: bold; color: red;",[_o.ERR]:"color: red;",[_o.WARN]:"color: yellow;",[_o.NOTICE]:"font-weight: bold; color: white;",[_o.INFO]:"color: white;",[_o.DEBUG]:"opacity: 0.8; color: white;"}};AH=e=>[EH(e),e.message];CH=console.error;TH=_o.ALERT,jae=!1,F9=!0});var Ho=x(()=>{d();zae();Wi()});function U9(e){return e!=null&&typeof e=="object"&&"create"in e&&typeof e.create=="function"}function R$e(e){return!(e&&e.constructor===Function)||e.prototype===void 0?!1:Function.prototype!==Object.getPrototypeOf(e)?!0:Object.getOwnPropertyNames(e.prototype).length>1}function Qae(e,t){if(typeof t!="object"||t===null)throw pr(Se("EINVAL","Invalid options"));for(let[o,n]of Object.entries(e.options)){let i=t?.[o];if(i==null){if(!n.required){ea("Using default for option: "+o);continue}throw pr(Se("EINVAL","Missing required option: "+o))}let s=(u,p=i)=>typeof u=="function"?R$e(u)?i instanceof u:u(i):typeof i===u||i?.constructor?.name===u;if(Array.isArray(n.type)?n.type.some(u=>s(u)):s(n.type))continue;let a=typeof i=="object"&&"constructor"in i?i.constructor.name:typeof i,l=u=>typeof u=="function"?u.name!="type"?u.name:u.toString():u,c=Array.isArray(n.type)?`one of ${n.type.map(l).join(", ")}`:l(n.type);throw pr(Se("EINVAL",`Incorrect type for "${o}": ${a} (expected ${c})`))}}function Zae(e){return e!=null&&typeof e=="object"&&"backend"in e&&U9(e.backend)}var MH=x(()=>{d();Ho();Wi()});function NH(e){return{suid:e.uid,sgid:e.gid,euid:e.uid,egid:e.gid,groups:[],...e}}function Xae(e){return e?!e.uid||!e.gid||!e.euid||!e.egid||e.groups.some(t=>!t):!1}var S8=x(()=>{d()});function Ki(e){return typeof e=="object"&&e!==null&&Jae in e?e:Vae}var Jae,Vae,Cd=x(()=>{d();S8();Jae=Symbol("ZenFSContext"),Vae={[Jae]:!0,id:0,root:"/",pwd:"/",credentials:NH({uid:0,gid:0}),descriptors:new Map,parent:null,children:[]}});var rr={};Ao(rr,{COPYFILE_EXCL:()=>k8,COPYFILE_FICLONE:()=>L$e,COPYFILE_FICLONE_FORCE:()=>O$e,F_OK:()=>lb,O_APPEND:()=>wp,O_CREAT:()=>cx,O_DIRECT:()=>q$e,O_DIRECTORY:()=>U$e,O_DSYNC:()=>z$e,O_EXCL:()=>ux,O_NOATIME:()=>$$e,O_NOCTTY:()=>F$e,O_NOFOLLOW:()=>H$e,O_NONBLOCK:()=>j$e,O_RDONLY:()=>BH,O_RDWR:()=>Dc,O_SYMLINK:()=>G$e,O_SYNC:()=>E8,O_TRUNC:()=>dx,O_WRONLY:()=>xs,R_OK:()=>Yn,S_IFBLK:()=>Td,S_IFCHR:()=>Iu,S_IFDIR:()=>an,S_IFIFO:()=>Ep,S_IFLNK:()=>Mc,S_IFMT:()=>un,S_IFREG:()=>ys,S_IFSOCK:()=>kp,S_IRGRP:()=>LH,S_IROTH:()=>UH,S_IRUSR:()=>PH,S_IRWXG:()=>Y$e,S_IRWXO:()=>Q$e,S_IRWXU:()=>K$e,S_ISGID:()=>Vm,S_ISUID:()=>Jm,S_ISVTX:()=>W$e,S_IWGRP:()=>OH,S_IWOTH:()=>$H,S_IWUSR:()=>_H,S_IXGRP:()=>FH,S_IXOTH:()=>HH,S_IXUSR:()=>RH,UV_FS_O_FILEMAP:()=>Z$e,W_OK:()=>mr,X_OK:()=>w8,size_max:()=>Ls});var lb,Yn,mr,w8,k8,L$e,O$e,BH,xs,Dc,cx,ux,F$e,dx,wp,U$e,$$e,H$e,E8,z$e,G$e,q$e,j$e,un,kp,Mc,ys,Td,an,Iu,Ep,Jm,Vm,W$e,K$e,PH,_H,RH,Y$e,LH,OH,FH,Q$e,UH,$H,HH,Z$e,Ls,bs=x(()=>{d();lb=0,Yn=4,mr=2,w8=1,k8=1,L$e=2,O$e=4,BH=0,xs=1,Dc=2,cx=64,ux=128,F$e=256,dx=512,wp=1024,U$e=65536,$$e=262144,H$e=131072,E8=1052672,z$e=4096,G$e=32768,q$e=16384,j$e=2048,un=61440,kp=49152,Mc=40960,ys=32768,Td=24576,an=16384,Iu=8192,Ep=4096,Jm=2048,Vm=1024,W$e=512,K$e=448,PH=256,_H=128,RH=64,Y$e=56,LH=32,OH=16,FH=8,Q$e=7,UH=4,$H=2,HH=1,Z$e=0,Ls=4294967295});function ele(e){class t extends DataView{length;type=e;*[Symbol.iterator](){for(let n=0;n<this.length;n++)yield this[n]}constructor(n,i,s){let a=typeof n=="object"?n:new ArrayBuffer((n??0)*e.size);return super(a,i,s),this.length=typeof n=="number"?n:Math.floor(this.byteLength/e.size),new Proxy(this,{get(l,c){if(c in l)return l[c];let u=parseInt(c.toString());if(!Number.isSafeInteger(u))throw Se("EINVAL","Invalid index: "+c.toString());return e.get(l.buffer,l.byteOffset+u*e.size)},set(l,c,u){let p=parseInt(c.toString());if(!Number.isSafeInteger(p))throw Se("EINVAL","Invalid index: "+c.toString());return e.set(l.buffer,l.byteOffset+p*e.size,u),!0}})}}for(let o of Object.getOwnPropertyNames(DataView.prototype))!o.startsWith("get")&&!o.startsWith("set")||Object.defineProperty(t.prototype,o,{enumerable:!1,configurable:!1,writable:!1,value:void 0});return t}var Id,cb=x(()=>{d();Ho();Id=class{type;length;name;size;__arrayType;constructor(t,o){this.type=t,this.length=o,this.name=`${t.name}[${o}]`,this.size=t.size*o,this.array=ele(this),this.__arrayType=t.array?t.array:ele(t)}get=(t,o)=>new this.__arrayType(t,o,this.size);set=(t,o,n)=>{for(let i=0;i<this.length;i++)this.type.set(t,o+i*this.type.size,n[i])};array}});var tle=x(()=>{d()});function Ap(e){return typeof e!="object"&&typeof e!="function"||e===null||e===void 0?!1:e instanceof Id?Ap(e.type):"name"in e&&"size"in e&&"get"in e&&"set"in e&&typeof e.name=="string"&&typeof e.size=="number"&&typeof e.get=="function"&&typeof e.set=="function"&&$9.has(e.name)&&$9.get(e.name)?.name===e.name}function ub(e){if($9.has(e.name))throw new ReferenceError(`Type is already registered: ${e.name}`);$9.set(e.name,e)}var $9,H0=x(()=>{d();cb();$9=new Map});function ole(e){return Ap(e)?{type:e}:e instanceof db?e.toInit():e}function nle(e,t=0){return new db(new Id(e,t),{})}var db,H9=x(()=>{d();cb();H0();db=class e{type;init;constructor(t,o){this.type=t,this.init=o;let n=(i=>new e(new Id(t,i),o));return Object.setPrototypeOf(n,new.target.prototype),Object.assign(n,{type:t,init:o}),n}align(t){return new e(this.type,{...this.init,align:t})}countedBy(t){return new e(this.type,{...this.init,countedBy:t})}bigEndian(){return new e(this.type,{...this.init,bigEndian:!0})}toInit(){return{type:this.type,...this.init}}$type(){return new e(this.type,this.init)}}});function z9(e,t,o={}){if(!e)throw Se("EINVAL","Invalid name for struct field");typeof e=="symbol"&&console.warn("Symbol used for struct field name will be coerced to string: "+e.toString());let n=e.toString(),i=Object.assign(ole(t),o);if(!Ap(i.type))throw Se("EINVAL",`Invalid type for struct field "${n}"`);return{name:n,offset:0,type:i.type,countedBy:i.countedBy,alignment:i.align??i.type.size,decl:i.type instanceof Id?`${i.typeName??i.type.type.name} ${n}[${i.type.length}]${i.countedBy?` counted_by(${i.countedBy})`:""}`:`${i.typeName??i.type.name} ${n}`,littleEndian:!i.bigEndian}}function rle(e){throw e.message!=="offset is outside the bounds of the DataView"?e:Se("EFAULT","Segmentation fault")}function A8(e,t,o,n){try{typeof o=="string"&&(o=o.charCodeAt(0));let i=e.byteOffset+t.offset+(n??0)*t.type.size;t.type.set(e.buffer,i,o);return}catch(i){rle(i)}}function C8(e,t){try{return t.type.get(e.buffer,e.byteOffset+t.offset)}catch(o){rle(o)}}var zH=x(()=>{d();Ho();cb();H9();H0()});function vs(e){return e[ile]??=new DataView(e),e[ile]}function aHe(e){return qH.includes(e.toString())}function ale(e){if(!aHe(e))throw Se("EINVAL","Not a valid primitive type: "+e)}function G9(e){return e=="char"?"uint8":e.toLowerCase()}var ile,X$e,sle,J$e,V$e,eHe,tHe,oHe,nHe,rHe,iHe,z0,sHe,GH,qH,T8=x(()=>{d();Ho();v8();H0();ile=Symbol("DataView");X$e={name:"int8",size:1,array:Int8Array,get:(e,t)=>vs(e).getInt8(t),set:(e,t,o)=>vs(e).setInt8(t,o)},sle={name:"uint8",size:1,array:Uint8Array,get:(e,t)=>vs(e).getUint8(t),set:(e,t,o)=>vs(e).setUint8(t,o)},J$e={name:"int16",size:2,array:Int16Array,get:(e,t)=>vs(e).getInt16(t,!0),set:(e,t,o)=>vs(e).setInt16(t,o,!0)},V$e={name:"uint16",size:2,array:Uint16Array,get:(e,t)=>vs(e).getUint16(t,!0),set:(e,t,o)=>vs(e).setUint16(t,o,!0)},eHe={name:"int32",size:4,array:Int32Array,get:(e,t)=>vs(e).getInt32(t,!0),set:(e,t,o)=>vs(e).setInt32(t,o,!0)},tHe={name:"uint32",size:4,array:Uint32Array,get:(e,t)=>vs(e).getUint32(t,!0),set:(e,t,o)=>vs(e).setUint32(t,o,!0)},oHe={name:"int64",size:8,array:BigInt64Array,get:(e,t)=>vs(e).getBigInt64(t,!0),set:(e,t,o)=>vs(e).setBigInt64(t,o,!0)},nHe={name:"uint64",size:8,array:BigUint64Array,get:(e,t)=>vs(e).getBigUint64(t,!0),set:(e,t,o)=>vs(e).setBigUint64(t,o,!0)},rHe={name:"float32",size:4,array:Float32Array,get:(e,t)=>vs(e).getFloat32(t,!0),set:(e,t,o)=>vs(e).setFloat32(t,o,!0)},iHe={name:"float64",size:8,array:Float64Array,get:(e,t)=>vs(e).getFloat64(t,!0),set:(e,t,o)=>vs(e).setFloat64(t,o,!0)},z0={int8:X$e,uint8:sle,int16:J$e,uint16:V$e,int32:eHe,uint32:tHe,int64:oHe,uint64:nHe,float32:rHe,float64:iHe},sHe=Object.keys(z0);for(let e of Object.values(z0))ub(e);GH={...z0,...Object.fromEntries(sHe.map(e=>[SH(e),z0[e]])),char:sle},qH=Object.keys(GH)});function lle(e){e.metadata??={};let t=e.metadata.structInit??{};return e.metadata.structInit={fields:[...t.fields??[]]},e.metadata.structInit}function ql(e,...t){let o=t.reduce((n,i)=>({...n,...i}),{});return typeof this=="object"&&Object.assign(o,this),function(i,s){let a=lle(s),l=1,c={},u=0,p=y=>{u=Math.ceil(u/y)*y};for(let y of a.fields)o.isPacked||p(y.alignment),o.isUnion?u=Math.max(u,y.type.size):(y.offset=u,u+=y.type.size),c[y.name]=y,l=Math.max(l,y.alignment);o.alignment??=l,o.isPacked||p(o.alignment),s.metadata.struct={fields:c,size:u,alignment:o.isPacked?1:o.alignment,isUnion:o.isUnion??!1};class m extends i{constructor(...b){b.length||(b=[new ArrayBuffer(u),0,u]),super(...b);for(let v of Object.values(c))Object.defineProperty(this,v.name,{enumerable:!0,configurable:!0,get(){return C8(this,v)},set(E){A8(this,v,E)}})}}let g=y=>({writable:!1,enumerable:!1,configurable:!1,value:y});return Object.defineProperties(m,{name:g(e),size:g(u),alignment:g(o.alignment),isUnion:g(!!o.isUnion),fields:g(c),get:g((y,b)=>new m(y,b)),set:g((y,b,v)=>{let E=new Uint8Array(v.buffer,v.byteOffset,u),A=new Uint8Array(y,b,u);if(!(v.buffer===y&&v.byteOffset===b))for(let C=0;C<u;C++)A[C]=E[C]}),[Symbol.toStringTag]:g(`[struct ${e}]`)}),ub(m),m}}function pb(e,t={}){return function(n,i){if(i.kind!="accessor")throw Se("EINVAL","Field must be an accessor");let s=lle(i),a=z9(i.name,e,t);return s.fields.push(a),{get(){return C8(this,a)},set(l){A8(this,a,l)}}}}function lHe(e){let t=z0[G9(e)];function o(n,i){return typeof n=="number"?pb(new Id(t,n),{typeName:e,...i}):pb(t,{typeName:e})(n,i&&"name"in i?i:Ko(Se("EINVAL","Invalid decorator context object")))}return o}function px(e){return e}var xo,I8=x(()=>{d();Ho();vH();cb();zH();T8();H0();Symbol.metadata??=Symbol.for("Symbol.metadata");ql.packed=ql.bind({isPacked:!0});ql.align=function(e){return ql.bind({alignment:e})};xo=Object.fromEntries(qH.map(e=>[e,lHe(e)]));px.typed=function(e){return e}});function jH(e){return typeof e=="function"&&"prototype"in e&&"fields"in e&&typeof e.fields=="object"&&Ap(e)}function mb(e,t,...o){let n=o.reduce((m,g)=>({...m,...g}),{});typeof this=="object"&&Object.assign(n,this);let i=1,s=0,a=m=>{s=Math.ceil(s/m)*m},l=Object.create(null);for(let[m,g]of Object.entries(t)){if(typeof m=="number")throw new TypeError("Field names can not be numbers");let y=z9(m,g);n.isPacked||a(y.alignment),n.isUnion?s=Math.max(s,y.type.size):(y.offset=s,s+=y.type.size),l[y.name]=y,i=Math.max(i,y.alignment)}n.alignment??=i,n.isPacked||a(n.alignment);class c extends DataView{static name=e;constructor(g=new ArrayBuffer(s),y,b){super(g,y,b??s);for(let v of Object.values(l))Object.defineProperty(this,v.name,{enumerable:!0,configurable:!0,get(){return C8(this,v)},set(E){A8(this,v,E)}})}}for(let m of Object.getOwnPropertyNames(DataView.prototype))!m.startsWith("get")&&!m.startsWith("set")||Object.defineProperty(c.prototype,m,{enumerable:!1,configurable:!1,writable:!1,value:void 0});let u=c,p=m=>({writable:!1,enumerable:!1,configurable:!1,value:m});return Object.defineProperties(u,{size:p(s),alignment:p(n.alignment),isUnion:p(!!n.isUnion),fields:p(l),get:p((m,g)=>new u(m,g)),set:p((m,g,y)=>{let b=new Uint8Array(y.buffer,y.byteOffset,s),v=new Uint8Array(m,g,s);if(!(y.buffer===m&&y.byteOffset===g))for(let E=0;E<s;E++)v[E]=b[E]}),[Symbol.toStringTag]:p(`[struct ${e}]`)}),ub(u),u}var $Ot,WH=x(()=>{d();zH();H9();T8();H0();mb.extend=function(e,t,o,...n){return mb(t,{...e.fields,...o},...n)};mb.packed=mb.bind({isPacked:!0});mb.align=function(e){return mb.bind({alignment:e})};$Ot=Object.fromEntries(Object.entries(GH).map(([e,t])=>[e,new db(t,{typeName:e})]))});function Qn(e){if(Ap(e))return e.size;if(e==null)return 0;if(typeof e=="object"&&Ap(e.constructor))return e.constructor.size;if(Array.isArray(e)){let t=0;for(let o=0;o<e.length;o++)t+=Qn(e[o]);return t}if(typeof e=="string")return ale(e),z0[G9(e)].size;throw new TypeError(`Unable to resolve size of \`${e.toString()}\``)}function cle(e,t){let o;if(jH(e))o=e;else if(jH(e.constructor))o=e.constructor;else throw Se("EINVAL","Type is not a struct or struct constructor");let{fields:n}=o;if(!(t in n))throw Se("EINVAL","Struct does not have field: "+t);return n[t].offset}var ule=x(()=>{d();Ho();T8();WH();H0()});var fb=x(()=>{d();cb();tle();I8();H9();ule();T8();WH();H0()});function mx(e,t){if(e.byteLength>=t)return e;if(ArrayBuffer.isView(e)){let n=mx(e.buffer,t);return new e.constructor(n,e.byteOffset,t)}let o=typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer;if(e.maxByteLength>t)return o?e.grow(t):e.resize(t),e;if(o){let n=new SharedArrayBuffer(t);return new Uint8Array(n).set(new Uint8Array(e)),n}try{return e.transfer(t)}catch{let n=new ArrayBuffer(t);return new Uint8Array(n).set(new Uint8Array(e)),n}}var Cp,gb=x(()=>{d();Cp=class extends DataView{constructor(t,o,n){let{buffer:i,byteOffset:s,byteLength:a}=new Uint8Array(t,o,n);super(i,s,a)}};for(let e of Object.getOwnPropertyNames(DataView.prototype))!e.startsWith("get")&&!e.startsWith("set")||Object.defineProperty(Cp.prototype,e,{value:()=>{throw new ReferenceError("Do not use DataView methods on a BufferView.")},writable:!1,enumerable:!1,configurable:!1})});function Os(e){return JSON.parse(Sp(e),(t,o)=>t==""?o:typeof o=="string"?BigInt(o).toString(16).slice(0,Math.min(o.length,8)):o)}function Nc(e){return gl(JSON.stringify(e))}function jl(e,t){if(typeof e=="number")return e;if(typeof e=="string"){let o=parseInt(e,8);if(!isNaN(o))return o}if(typeof t=="number")return t;throw Se("EINVAL","Invalid mode: "+e?.toString())}function Tp(e){if(e instanceof Date)return e.getTime();try{return Number(e)}catch{throw Se("EINVAL","Invalid time.")}}function Mt(e,t=!1){if(e instanceof URL){if(e.protocol!="file:")throw Se("EINVAL","URLs must use the file: protocol");e=e.pathname}if(e=e.toString(),e.startsWith("file://")&&(e=e.slice(7)),e.includes("\0"))throw Se("EINVAL","Path can not contain null character");if(e.length==0)throw Se("EINVAL","Path can not be empty");return e=e.replaceAll(/[/\\]+/g,"/"),t?e:xa.call(this,e)}function Dd(e,t="utf8",o,n=0){return typeof e!="object"||e===null?{encoding:typeof e=="string"?e:t??null,flag:o,mode:n}:{encoding:typeof e?.encoding=="string"?e.encoding:t??null,flag:typeof e?.flag=="string"?e.flag:o,mode:jl("mode"in e?e?.mode:null,n)}}function hb(e){return e=e.replace(/([.?+^$(){}|[\]/])/g,"$1").replace(/\*\*/g,".*").replace(/\*/g,"[^/]*").replace(/\?/g,"."),new RegExp(`^${e}$`)}function xb(e){return`/tmp/${Mt(e,!0)}${Date.now()}-${Math.random().toString(36).slice(2)}`}var Wl=x(()=>{d();Ho();Pi();Ss()});var W9={};Ao(W9,{basename:()=>Yi,dirname:()=>yo,extname:()=>pHe,format:()=>mHe,formatExt:()=>dle,isAbsolute:()=>dHe,join:()=>So,matchesGlob:()=>D8,normalize:()=>ple,normalizeString:()=>KH,parse:()=>_i,relative:()=>fx,resolve:()=>xa,sep:()=>j9});function uHe(e,t){if(typeof e!="object")throw new TypeError(`"${t}" is not an object`)}function KH(e,t){let o="",n=0,i=-1,s=0,a="\0";for(let l=0;l<=e.length;++l){if(l<e.length)a=e[l];else{if(a=="/")break;a="/"}if(a=="/"){if(!(i===l-1||s===1))if(s===2){if(o.length<2||n!==2||o.at(-1)!=="."||o.at(-2)!=="."){if(o.length>2){let c=o.lastIndexOf("/");c===-1?(o="",n=0):(o=o.slice(0,c),n=o.length-1-o.lastIndexOf("/")),i=l,s=0;continue}else if(o.length!==0){o="",n=0,i=l,s=0;continue}}t&&(o+=o.length>0?"/..":"..",n=2)}else o.length>0?o+="/"+e.slice(i+1,l):o=e.slice(i+1,l),n=l-i-1;i=l,s=0}else a==="."&&s!==-1?++s:s=-1}return o}function dle(e){return e?`${e[0]==="."?"":"."}${e}`:""}function xa(...e){let t="";for(let n of[...e.reverse(),Ki(this).pwd])if(n?.length&&(t=`${n}/${t}`,n.startsWith("/")))break;let o=t.startsWith("/");return t=KH(t,!o),o?`/${t}`:t.length?t:"/"}function ple(e){if(!e.length)return".";let t=e[0]==="/",o=e.at(-1)==="/";return e=KH(e,!t),e.length?(o&&(e+="/"),t?`/${e}`:e):t?"/":o?"./":"."}function dHe(e){return e.startsWith("/")}function So(...e){if(!e.length)return".";let t=e.filter(o=>o).join("/");return t?.length?ple(t):"."}function fx(e,t){if(e===t||(e=xa.call(this,e),t=xa.call(this,t),e===t))return"";let o=1,n=e.length,i=n-o,s=1,a=t.length-s,l=i<a?i:a,c=-1,u=0;for(;u<l;u++){let m=e[o+u];if(m!==t[s+u])break;m==="/"&&(c=u)}if(u===l)if(a>l){if(t[s+u]==="/")return t.slice(s+u+1);if(u===0)return t.slice(s+u)}else i>l&&(e[o+u]==="/"?c=u:u===0&&(c=0));let p="";for(u=o+c+1;u<=n;++u)(u===n||e[u]==="/")&&(p+=p.length===0?"..":"/..");return`${p}${t.slice(s+c)}`}function yo(e){if(e.length===0)return".";let t=e[0]==="/",o=-1,n=!0;for(let i=e.length-1;i>=1;--i)if(e[i]==="/"){if(!n){o=i;break}}else n=!1;return o===-1?t?"/":".":t&&o===1?"//":e.slice(0,o)}function Yi(e,t){let o=0,n=-1,i=!0;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t===e)return"";let s=t.length-1,a=-1;for(let l=e.length-1;l>=0;--l)if(e[l]==="/"){if(!i){o=l+1;break}}else a===-1&&(i=!1,a=l+1),s>=0&&(e[l]===t[s]?--s===-1&&(n=l):(s=-1,n=a));return o===n?n=a:n===-1&&(n=e.length),e.slice(o,n)}for(let s=e.length-1;s>=0;--s)if(e[s]==="/"){if(!i){o=s+1;break}}else n===-1&&(i=!1,n=s+1);return n===-1?"":e.slice(o,n)}function pHe(e){let t=-1,o=0,n=-1,i=!0,s=0;for(let a=e.length-1;a>=0;--a){if(e[a]==="/"){if(!i){o=a+1;break}continue}n===-1&&(i=!1,n=a+1),e[a]==="."?t===-1?t=a:s!==1&&(s=1):t!==-1&&(s=-1)}return t===-1||n===-1||s===0||s===1&&t===n-1&&t===o+1?"":e.slice(t,n)}function mHe(e){uHe(e,"pathObject");let t=e.dir||e.root,o=e.base||`${e.name||""}${dle(e.ext)}`;return t?t===e.root?`${t}${o}`:`${t}/${o}`:o}function _i(e){let t=e[0]==="/",o={root:t?"/":"",dir:"",base:"",ext:"",name:""};if(e.length===0)return o;let n=t?1:0,i=-1,s=0,a=-1,l=!0,c=e.length-1,u=0;for(;c>=n;--c){if(e[c]==="/"){if(!l){s=c+1;break}continue}a===-1&&(l=!1,a=c+1),e[c]==="."?i===-1?i=c:u!==1&&(u=1):i!==-1&&(u=-1)}if(a!==-1){let p=s===0&&t?1:s;i===-1||u===0||u===1&&i===a-1&&i===s+1?o.base=o.name=e.slice(p,a):(o.name=e.slice(p,i),o.base=e.slice(p,a),o.ext=e.slice(i,a))}return s>0?o.dir=e.slice(0,s-1):t&&(o.dir="/"),o}function D8(e,t){return hb(e).test(t)}var j9,Ss=x(()=>{d();Cd();Wl();j9="/"});function mle(e,t){return e.size==t.size&&+e.atime==+t.atime&&+e.mtime==+t.mtime&&+e.ctime==+t.ctime&&e.mode==t.mode}var K9,Y9,xl,Du,Q9,Z9,gx=x(()=>{d();Pi();ws();bs();K9=BigInt(1e3),Y9=class{_convert(t){return this._isBigint?BigInt(t):Number(t)}get blocks(){return this._convert(Math.ceil(Number(this.size)/512))}set blocks(t){}mode;dev=this._convert(0);ino=this._convert(0);rdev=this._convert(0);nlink=this._convert(1);blksize=this._convert(4096);uid=this._convert(0);gid=this._convert(0);atimeMs;get atime(){return new Date(Number(this.atimeMs))}set atime(t){this.atimeMs=this._convert(t.getTime())}mtimeMs;get mtime(){return new Date(Number(this.mtimeMs))}set mtime(t){this.mtimeMs=this._convert(t.getTime())}ctimeMs;get ctime(){return new Date(Number(this.ctimeMs))}set ctime(t){this.ctimeMs=this._convert(t.getTime())}birthtimeMs;get birthtime(){return new Date(Number(this.birthtimeMs))}set birthtime(t){this.birthtimeMs=this._convert(t.getTime())}size;data;flags;version;constructor({atimeMs:t,mtimeMs:o,ctimeMs:n,birthtimeMs:i,uid:s,gid:a,size:l,mode:c,ino:u,...p}={}){let m=Date.now();this.atimeMs=this._convert(t??m),this.mtimeMs=this._convert(o??m),this.ctimeMs=this._convert(n??m),this.birthtimeMs=this._convert(i??m),this.uid=this._convert(s??0),this.gid=this._convert(a??0),this.size=this._convert(l??0),this.ino=this._convert(u??0),this.mode=this._convert(c??0),(this.mode&61440)==0&&(this.mode=this.mode|this._convert(32768)),Object.assign(this,p)}isFile(){return(this.mode&61440)===32768}isDirectory(){return(this.mode&61440)===16384}isSymbolicLink(){return(this.mode&61440)===40960}isSocket(){return(this.mode&61440)===49152}isBlockDevice(){return(this.mode&61440)===24576}isCharacterDevice(){return(this.mode&61440)===8192}isFIFO(){return(this.mode&61440)===4096}toJSON(){return b8(this,G0)}hasAccess(t,o){return Fo(o,this._isBigint?new xl(this):this,t)}get atimeNs(){return BigInt(this.atimeMs)*K9}get mtimeNs(){return BigInt(this.mtimeMs)*K9}get ctimeNs(){return BigInt(this.ctimeMs)*K9}get birthtimeNs(){return BigInt(this.birthtimeMs)*K9}},xl=class extends Y9{_isBigint=!1},Du=class extends Y9{_isBigint=!0};Q9=class{type=525687744115;bsize=4096;blocks=0;bfree=0;bavail=0;files=4294967295;ffree=4294967295},Z9=class{type=BigInt("0x7a656e6673");bsize=BigInt(4096);blocks=BigInt(0);bfree=BigInt(0);bavail=BigInt(0);files=BigInt(4294967295);ffree=BigInt(4294967295)}});function ZH(e){return(e.mode&61440)===32768}function Dr(e){return(e.mode&61440)===16384}function tf(e){return(e.mode&61440)===40960}function M8(e){return(e.mode&61440)===24576}function N8(e){return(e.mode&61440)===8192}function Fo(e,t,o){let{credentials:n}=Ki(e);if(tf(t)||n.euid===0||n.egid===0)return!0;let i=0;return n.uid===t.uid&&(t.mode&256&&(i|=4),t.mode&128&&(i|=2),t.mode&64&&(i|=1)),(n.gid===t.gid||n.groups.includes(Number(t.gid)))&&(t.mode&32&&(i|=4),t.mode&16&&(i|=2),t.mode&8&&(i|=1)),t.mode&4&&(i|=4),t.mode&2&&(i|=2),t.mode&1&&(i|=1),(i&o)===o}function XH(e,t,o){let n=!0;return!isNaN(t)&&t>=0&&t<4294967295?e.uid=t:n=!1,!isNaN(o)&&o>=0&&o<4294967295?e.gid=o:n=!1,n}var Yr,Io,Qi,YH,ef,q0,G0,QH,ta,Zt,ws=x(()=>{d();Ho();Wi();fb();I8();Pi();gb();bs();gx();Cd();Yr=function(e,t,o,n,i,s){function a(A){if(A!==void 0&&typeof A!="function")throw new TypeError("Function expected");return A}for(var l=n.kind,c=l==="getter"?"get":l==="setter"?"set":"value",u=!t&&e?n.static?e:e.prototype:null,p=t||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),m,g=!1,y=o.length-1;y>=0;y--){var b={};for(var v in n)b[v]=v==="access"?{}:n[v];for(var v in n.access)b.access[v]=n.access[v];b.addInitializer=function(A){if(g)throw new TypeError("Cannot add initializers after decoration has completed");s.push(a(A||null))};var E=(0,o[y])(l==="accessor"?{get:p.get,set:p.set}:p[c],b);if(l==="accessor"){if(E===void 0)continue;if(E===null||typeof E!="object")throw new TypeError("Object expected");(m=a(E.get))&&(p.get=m),(m=a(E.set))&&(p.set=m),(m=a(E.init))&&i.unshift(m)}else(m=a(E))&&(l==="field"?i.unshift(m):p[c]=m)}u&&Object.defineProperty(u,n.name,p),g=!0},Io=function(e,t,o){for(var n=arguments.length>2,i=0;i<t.length;i++)o=n?t[i].call(e,o):t[i].call(e);return n?o:void 0},Qi=0,YH=3968,ef=(()=>{var e,t;let o=[ql.packed("Attribute")],n,i=[],s,a=px.typed(Uint8Array),l,c=[],u=[],p,m=[],g=[];var y=class extends a{static{s=this}static{let b=typeof Symbol=="function"&&Symbol.metadata?Object.create(a[Symbol.metadata]??null):void 0;l=[(e=xo).uint32.bind(e)],p=[(t=xo).uint32.bind(t)],Yr(this,null,l,{kind:"accessor",name:"keySize",static:!1,private:!1,access:{has:v=>"keySize"in v,get:v=>v.keySize,set:(v,E)=>{v.keySize=E}},metadata:b},c,u),Yr(this,null,p,{kind:"accessor",name:"valueSize",static:!1,private:!1,access:{has:v=>"valueSize"in v,get:v=>v.valueSize,set:(v,E)=>{v.valueSize=E}},metadata:b},m,g),Yr(null,n={value:s},o,{kind:"class",name:s.name,metadata:b},null,i),y=s=n.value,b&&Object.defineProperty(s,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:b}),Io(s,i)}#e=Io(this,c,void 0);get keySize(){return this.#e}set keySize(b){this.#e=b}#t=(Io(this,u),Io(this,m,void 0));get valueSize(){return this.#t}set valueSize(b){this.#t=b}get name(){return Sp(this.subarray(8,8+this.keySize))}set name(b){let v=gl(b);if(8+v.length+this.valueSize>YH)throw Se("EOVERFLOW");this.set(v,8),this.keySize=v.length}get value(){return this.subarray(8+this.keySize,this.size)}set value(b){if(8+this.keySize+b.length>YH)throw Se("EOVERFLOW");this.valueSize=b.length,this.set(b,8+this.keySize)}get size(){return 8+this.keySize+this.valueSize}constructor(){super(...arguments),Io(this,g)}};return y=s})(),q0=(()=>{var e;let t=[ql.packed("Attributes")],o,n=[],i,s=Cp,a,l=[],c=[];var u=class extends s{static{i=this}static{let p=typeof Symbol=="function"&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;a=[(e=xo).uint32.bind(e)],Yr(this,null,a,{kind:"accessor",name:"size",static:!1,private:!1,access:{has:m=>"size"in m,get:m=>m.size,set:(m,g)=>{m.size=g}},metadata:p},l,c),Yr(null,o={value:i},t,{kind:"class",name:i.name,metadata:p},null,n),u=i=o.value,p&&Object.defineProperty(i,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:p}),Io(i,n)}#e=Io(this,l,void 0);get size(){return this.#e}set size(p){this.#e=p}get byteSize(){let p=this.byteOffset+Qn(this);for(let m=0;m<this.size;m++){let g=new ef(this.buffer,p);p+=g.size}return p}has(p){let m=this.byteOffset+Qn(this);for(let g=0;g<this.size;g++){let y=new ef(this.buffer,m);if(y.name==p)return!0;m+=y.size}return!1}get(p){let m=this.byteOffset+Qn(this);for(let g=0;g<this.size;g++){let y=new ef(this.buffer,m);if(y.name==p)return y.value;m+=y.size}}set(p,m){let g=this.byteOffset+Qn(this),y;for(let E=0;E<this.size;E++){let A=new ef(this.buffer,g);A.name==p&&(y=[g,A.size]),g+=A.size}let b=new Uint8Array(this.buffer);if(y){let[E,A]=y;g-=A,b.copyWithin(E,E+A,g+A),b.fill(0,g,g+A),this.size--}let v=new ef(this.buffer,g);v.name=p,v.value=m,this.size++}remove(p){let m=this.byteOffset+Qn(this),g;for(let E=0;E<this.size;E++){let A=new ef(this.buffer,m);A.name==p&&(g=[m,A.size]),m+=A.size}if(!g)return!1;let[y,b]=g,v=new Uint8Array(this.buffer);return v.copyWithin(y,y+b,m),v.fill(0,m-b,m),this.size--,!0}copyFrom(p){let{byteSize:m}=p;new Uint8Array(this.buffer,this.byteOffset,m).set(new Uint8Array(p.buffer,p.byteOffset,m))}*keys(){let p=this.byteOffset+Qn(this);for(let m=0;m<this.size;m++){let g=new ef(this.buffer,p);yield g.name,p+=g.size}}*values(){let p=this.byteOffset+Qn(this);for(let m=0;m<this.size;m++){let g=new ef(this.buffer,p);yield g.value,p+=g.size}}*entries(){let p=this.byteOffset+Qn(this);for(let m=0;m<this.size;m++){let g=new ef(this.buffer,p);yield[g.name,g.value],p+=g.size}}constructor(){super(...arguments),Io(this,c)}};return u=i})(),G0=["ino","data","size","mode","flags","nlink","uid","gid","atimeMs","birthtimeMs","mtimeMs","ctimeMs","version"],QH=5;(function(e){e[e.Sync=1]="Sync",e[e.NoAtime=2]="NoAtime",e[e.Append=4]="Append",e[e.Immutable=8]="Immutable",e[e.Dead=16]="Dead",e[e.NoQuota=32]="NoQuota",e[e.Dirsync=64]="Dirsync",e[e.NoCMtime=128]="NoCMtime",e[e.SwapFile=256]="SwapFile",e[e.Private=512]="Private",e[e.IMA=1024]="IMA",e[e.AutoMount=2048]="AutoMount",e[e.NoSec=4096]="NoSec",e[e.DAX=8192]="DAX",e[e.Encrypted=16384]="Encrypted",e[e.CaseFold=32768]="CaseFold",e[e.Verity=65536]="Verity",e[e.KernelFile=131072]="KernelFile"})(ta||(ta={}));Zt=(()=>{var e,t,o,n,i,s,a,l,c,u,p,m,g,y,b,v;let E=[ql.packed("Inode")],A,C=[],I,N=Cp,_,O=[],F=[],J,G=[],te=[],K,oe=[],le=[],he,Ae=[],Ce=[],ye,ce=[],pe=[],xe,Ze=[],ge=[],ae,Ne=[],Fe=[],Xe,It=[],Ve=[],_t,Wt=[],po=[],no,mo=[],Sn=[],Br,be=[],Qe=[],lt,we=[],Te=[],ft,Qo=[],ro=[],Bn,kr=[],hi=[],lr,Eo=[],t0=[],Ca,gm=[],uh=[],op,eu=[],Xa=[],dh,Ja=[],ph=[],Vu,tu=[],hm=[];var ou=class extends N{static{I=this}static{let Le=typeof Symbol=="function"&&Symbol.metadata?Object.create(N[Symbol.metadata]??null):void 0;_=[(e=xo).uint32.bind(e)],J=[(t=xo).uint32.bind(t)],K=[(o=xo).uint32.bind(o)],he=[(n=xo).uint16.bind(n)],ye=[(i=xo).uint32.bind(i)],xe=[(s=xo).uint32.bind(s)],ae=[(a=xo).uint32.bind(a)],Xe=[(l=xo).float64.bind(l)],_t=[(c=xo).float64.bind(c)],no=[(u=xo).float64.bind(u)],Br=[(p=xo).float64.bind(p)],lt=[(m=xo).uint32.bind(m)],ft=[(g=xo).uint32.bind(g)],Bn=[(y=xo).uint32.bind(y)],lr=[(b=xo).uint16.bind(b)],Ca=[(v=xo).uint32.bind(v)],op=[xo.uint8(48)],dh=[pb(q0)],Vu=[xo.uint8(YH)],Yr(this,null,_,{kind:"accessor",name:"data",static:!1,private:!1,access:{has:Ye=>"data"in Ye,get:Ye=>Ye.data,set:(Ye,fo)=>{Ye.data=fo}},metadata:Le},O,F),Yr(this,null,J,{kind:"accessor",name:"__data_old",static:!1,private:!1,access:{has:Ye=>"__data_old"in Ye,get:Ye=>Ye.__data_old,set:(Ye,fo)=>{Ye.__data_old=fo}},metadata:Le},G,te),Yr(this,null,K,{kind:"accessor",name:"size",static:!1,private:!1,access:{has:Ye=>"size"in Ye,get:Ye=>Ye.size,set:(Ye,fo)=>{Ye.size=fo}},metadata:Le},oe,le),Yr(this,null,he,{kind:"accessor",name:"mode",static:!1,private:!1,access:{has:Ye=>"mode"in Ye,get:Ye=>Ye.mode,set:(Ye,fo)=>{Ye.mode=fo}},metadata:Le},Ae,Ce),Yr(this,null,ye,{kind:"accessor",name:"nlink",static:!1,private:!1,access:{has:Ye=>"nlink"in Ye,get:Ye=>Ye.nlink,set:(Ye,fo)=>{Ye.nlink=fo}},metadata:Le},ce,pe),Yr(this,null,xe,{kind:"accessor",name:"uid",static:!1,private:!1,access:{has:Ye=>"uid"in Ye,get:Ye=>Ye.uid,set:(Ye,fo)=>{Ye.uid=fo}},metadata:Le},Ze,ge),Yr(this,null,ae,{kind:"accessor",name:"gid",static:!1,private:!1,access:{has:Ye=>"gid"in Ye,get:Ye=>Ye.gid,set:(Ye,fo)=>{Ye.gid=fo}},metadata:Le},Ne,Fe),Yr(this,null,Xe,{kind:"accessor",name:"atimeMs",static:!1,private:!1,access:{has:Ye=>"atimeMs"in Ye,get:Ye=>Ye.atimeMs,set:(Ye,fo)=>{Ye.atimeMs=fo}},metadata:Le},It,Ve),Yr(this,null,_t,{kind:"accessor",name:"birthtimeMs",static:!1,private:!1,access:{has:Ye=>"birthtimeMs"in Ye,get:Ye=>Ye.birthtimeMs,set:(Ye,fo)=>{Ye.birthtimeMs=fo}},metadata:Le},Wt,po),Yr(this,null,no,{kind:"accessor",name:"mtimeMs",static:!1,private:!1,access:{has:Ye=>"mtimeMs"in Ye,get:Ye=>Ye.mtimeMs,set:(Ye,fo)=>{Ye.mtimeMs=fo}},metadata:Le},mo,Sn),Yr(this,null,Br,{kind:"accessor",name:"ctimeMs",static:!1,private:!1,access:{has:Ye=>"ctimeMs"in Ye,get:Ye=>Ye.ctimeMs,set:(Ye,fo)=>{Ye.ctimeMs=fo}},metadata:Le},be,Qe),Yr(this,null,lt,{kind:"accessor",name:"ino",static:!1,private:!1,access:{has:Ye=>"ino"in Ye,get:Ye=>Ye.ino,set:(Ye,fo)=>{Ye.ino=fo}},metadata:Le},we,Te),Yr(this,null,ft,{kind:"accessor",name:"__ino_old",static:!1,private:!1,access:{has:Ye=>"__ino_old"in Ye,get:Ye=>Ye.__ino_old,set:(Ye,fo)=>{Ye.__ino_old=fo}},metadata:Le},Qo,ro),Yr(this,null,Bn,{kind:"accessor",name:"flags",static:!1,private:!1,access:{has:Ye=>"flags"in Ye,get:Ye=>Ye.flags,set:(Ye,fo)=>{Ye.flags=fo}},metadata:Le},kr,hi),Yr(this,null,lr,{kind:"accessor",name:"__after_flags",static:!1,private:!1,access:{has:Ye=>"__after_flags"in Ye,get:Ye=>Ye.__after_flags,set:(Ye,fo)=>{Ye.__after_flags=fo}},metadata:Le},Eo,t0),Yr(this,null,Ca,{kind:"accessor",name:"version",static:!1,private:!1,access:{has:Ye=>"version"in Ye,get:Ye=>Ye.version,set:(Ye,fo)=>{Ye.version=fo}},metadata:Le},gm,uh),Yr(this,null,op,{kind:"accessor",name:"__padding",static:!1,private:!1,access:{has:Ye=>"__padding"in Ye,get:Ye=>Ye.__padding,set:(Ye,fo)=>{Ye.__padding=fo}},metadata:Le},eu,Xa),Yr(this,null,dh,{kind:"accessor",name:"attributes",static:!1,private:!1,access:{has:Ye=>"attributes"in Ye,get:Ye=>Ye.attributes,set:(Ye,fo)=>{Ye.attributes=fo}},metadata:Le},Ja,ph),Yr(this,null,Vu,{kind:"accessor",name:"__data",static:!1,private:!1,access:{has:Ye=>"__data"in Ye,get:Ye=>Ye.__data,set:(Ye,fo)=>{Ye.__data=fo}},metadata:Le},tu,hm),Yr(null,A={value:I},E,{kind:"class",name:I.name,metadata:Le},null,C),ou=I=A.value,Le&&Object.defineProperty(I,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:Le}),Io(I,C)}constructor(...Le){let Ye={};if(typeof Le[0]=="object"&&Le[0]!==null&&!ArrayBuffer.isView(Le[0])&&(Ye=Le[0],Le=[Qn(ou)]),super(...Le),Io(this,hm),this.byteLength<Qn(ou))throw Vs(Se("EIO",`Buffer is too small to create an inode (${this.byteLength} bytes)`));Object.assign(this,Ye),this.atimeMs||=Date.now(),this.mtimeMs||=Date.now(),this.ctimeMs||=Date.now(),this.birthtimeMs||=Date.now(),this.ino&&!this.nlink&&Xo(`Inode ${this.ino} has an nlink of 0`)}#e=Io(this,O,void 0);get data(){return this.#e}set data(Le){this.#e=Le}#t=(Io(this,F),Io(this,G,void 0));get __data_old(){return this.#t}set __data_old(Le){this.#t=Le}#o=(Io(this,te),Io(this,oe,void 0));get size(){return this.#o}set size(Le){this.#o=Le}#n=(Io(this,le),Io(this,Ae,void 0));get mode(){return this.#n}set mode(Le){this.#n=Le}#r=(Io(this,Ce),Io(this,ce,void 0));get nlink(){return this.#r}set nlink(Le){this.#r=Le}#a=(Io(this,pe),Io(this,Ze,void 0));get uid(){return this.#a}set uid(Le){this.#a=Le}#i=(Io(this,ge),Io(this,Ne,void 0));get gid(){return this.#i}set gid(Le){this.#i=Le}#s=(Io(this,Fe),Io(this,It,void 0));get atimeMs(){return this.#s}set atimeMs(Le){this.#s=Le}#l=(Io(this,Ve),Io(this,Wt,void 0));get birthtimeMs(){return this.#l}set birthtimeMs(Le){this.#l=Le}#c=(Io(this,po),Io(this,mo,void 0));get mtimeMs(){return this.#c}set mtimeMs(Le){this.#c=Le}#u=(Io(this,Sn),Io(this,be,void 0));get ctimeMs(){return this.#u}set ctimeMs(Le){this.#u=Le}#d=(Io(this,Qe),Io(this,we,void 0));get ino(){return this.#d}set ino(Le){this.#d=Le}#p=(Io(this,Te),Io(this,Qo,void 0));get __ino_old(){return this.#p}set __ino_old(Le){this.#p=Le}#m=(Io(this,ro),Io(this,kr,void 0));get flags(){return this.#m}set flags(Le){this.#m=Le}#f=(Io(this,hi),Io(this,Eo,void 0));get __after_flags(){return this.#f}set __after_flags(Le){this.#f=Le}#g=(Io(this,t0),Io(this,gm,void 0));get version(){return this.#g}set version(Le){this.#g=Le}#h=(Io(this,uh),Io(this,eu,void 0));get __padding(){return this.#h}set __padding(Le){this.#h=Le}#x=(Io(this,Xa),Io(this,Ja,void 0));get attributes(){return this.#x}set attributes(Le){this.#x=Le}#y=(Io(this,ph),Io(this,tu,void 0));get __data(){return this.#y}set __data(Le){this.#y=Le}toString(){return`<Inode ${this.ino}>`}toJSON(){return{...b8(this,G0),attributes:this.attributes}}toStats(){return new xl(this)}update(Le){if(!Le)return!1;let Ye=!1;for(let fo of G0)Le[fo]!==void 0&&(fo=="ino"||fo=="data"||this[fo]!==Le[fo]&&(fo=="atimeMs"&&this.flags&ta.NoAtime||(this[fo]=Le[fo],Ye=!0)));return Le.attributes&&(this.attributes.copyFrom(Le.attributes),Ye=!0),Ye&&(this.ctimeMs=Date.now()),Ye}};return ou=I})()});var fle,j0,B8=x(()=>{d();Ho();fb();Pi();Ss();bs();ws();fle=1,j0=class e extends Map{maxSize=4294967295;toJSON(){return{version:fle,maxSize:this.maxSize,entries:Object.fromEntries([...this].map(([t,o])=>[t,o.toJSON()]))}}toString(){return JSON.stringify(this.toJSON())}get byteSize(){let t=this.size*Qn(Zt);for(let o of this.values())t+=o.size;return t}usage(){return{totalSpace:this.maxSize,freeSpace:this.maxSize-this.byteSize}}pathOf(t){for(let[o,n]of this)if(n.ino==t||n.data==t)return o}getByID(t){return this.entryByID(t)?.inode}entryByID(t){for(let[o,n]of this)if(n.ino==t||n.data==t)return{path:o,inode:n}}directoryEntries(t){let o=this.get(t);if(!o)throw Se("ENOENT");if((o.mode&61440)!=16384)throw Se("ENOTDIR");let n={};for(let i of this.keys())yo(i)==t&&i!=t&&(n[Yi(i)]=this.get(i).ino);return n}_alloc(){return Math.max(...[...this.values()].flatMap(t=>[t.ino,t.data]))+1}directories(){let t=new Map;for(let[o,n]of this){if((n.mode&61440)!=16384)continue;let i={};for(let s of this.keys())yo(s)==o&&s!=o&&(i[Yi(s)]=this.get(s).ino);t.set(o,i)}return t}fromJSON(t){if(t.version!=fle)throw Se("EINVAL","Index version mismatch");this.clear();for(let[o,n]of Object.entries(t.entries))n.data??=Rae(1,4294967295),o=="/"&&(n.ino=0),this.set(o,new Zt(n));return this}static parse(t){if(!P9(t))throw Se("EINVAL","Invalid JSON");let o=JSON.parse(t),n=new e;return n.fromJSON(o),n}}});var JH,ya,W0=x(()=>{d();Ho();JH=4096,ya=class e{type;name;label;_mountPoint;_uuid=crypto.randomUUID();get uuid(){return this._uuid}attributes=new Map;constructor(t,o){this.type=t,this.name=o,this.streamRead===e.prototype.streamRead&&this.attributes.set("default_stream_read"),this.streamWrite===e.prototype.streamWrite&&this.attributes.set("default_stream_write")}toString(){return`${this.name} ${this.label?JSON.stringify(this.label):""} (${this._mountPoint?"mounted on "+this._mountPoint:"unmounted"})`}usage(){return{totalSpace:0,freeSpace:0}}async ready(){}readySync(){if(this.ready!==e.prototype.ready)throw Se("EAGAIN")}async exists(t){try{return await this.stat(t),!0}catch(o){return o.code!="ENOENT"}}existsSync(t){try{return this.statSync(t),!0}catch(o){return o.code!="ENOENT"}}streamRead(t,o){return new ReadableStream({start:async n=>{let{size:i}=await this.stat(t),{start:s=0,end:a=i}=o;for(let l=s;l<a;l+=JH){let c=l+JH>a?a-l:JH,u=new Uint8Array(c);await this.read(t,u,l,l+c).catch(n.error.bind(n)),n.enqueue(u)}n.close()},type:"bytes"})}streamWrite(t,o){let n=o.start??0;return new WritableStream({write:async(i,s)=>{let a=!1,l=u=>{a=!0,s.error(u)},{size:c}=await this.stat(t);await this.write(t,i,n).catch(l),!a&&(n+=i.byteLength,await this.touch(t,{mtimeMs:Date.now(),size:Math.max(c,n)}).catch(l))}})}}});var P8,VH=x(()=>{d();gb();P8=class{id;_size;options;regions=[];get size(){return this._size}set size(t){if(t>=this._size){this._size=t;return}this._size=t;for(let o=this.regions.length-1;o>=0;o--){let n=this.regions[o];if(n.offset>=t){this.regions.splice(o,1);continue}let i=t-n.offset;n.data.byteLength>i&&(n.data=n.data.subarray(0,i)),n.ranges=n.ranges.filter(s=>s.start<t).map(s=>s.end>t?{start:s.start,end:t}:s)}}constructor(t,o,n,i){this.id=t,this._size=o,this.options=n,n.sparse??=!0,n.sparse||this.regions.push({offset:0,data:new Uint8Array(o),ranges:[]}),i?.set(t,this)}collect(){if(!this.options.sparse)return;let{regionGapThreshold:t=4095}=this.options;for(let o=0;o<this.regions.length-1;){let n=this.regions[o],i=this.regions[o+1];if(i.offset-(n.offset+n.data.byteLength)>t){o++;continue}n.ranges.push(...i.ranges),n.ranges.sort((s,a)=>s.start-a.start),n.ranges=n.ranges.reduce((s,a)=>(!s.length||s.at(-1).end<a.start?s.push(a):s.at(-1).end=Math.max(s.at(-1).end,a.end),s),[]),n.data=mx(n.data,i.offset+i.data.byteLength),n.data.set(i.data,i.offset-n.offset),this.regions.splice(o+1,1)}}missing(t,o){let n=[];for(let i of this.regions){if(i.offset>=o)break;for(let s of i.ranges)if(!(s.end<=t)&&(s.start>=o||(s.start>t&&n.push({start:t,end:Math.min(s.start,o)}),s.end>t&&(t=Math.max(t,s.end)),t>=o)))break;if(t>=o)break}return t<o&&n.push({start:t,end:o}),n}cached(t,o){let n=[];for(let s of this.regions){if(s.offset>=o)break;for(let a of s.ranges)if(!(a.end<=t)){if(a.start>=o)break;n.push({start:Math.max(t,a.start),end:Math.min(o,a.end)})}}n.sort((s,a)=>s.start-a.start);let i=[];for(let s of n){let a=i.at(-1);a&&s.start<=a.end?a.end=Math.max(a.end,s.end):i.push(s)}return i}regionAt(t){if(this.regions.length)for(let o of this.regions){if(o.offset>t)break;if(t>=o.offset&&t<o.offset+o.data.byteLength)return o}}add(t,o){let n=o+t.byteLength,i=this.regionAt(o);if(i)return i.data=mx(i.data,n),i.data.set(t,o),i.ranges.push({start:o,end:n}),i.ranges.sort((l,c)=>l.start-c.start),this.collect(),this;let s={data:t,offset:o,ranges:[{start:o,end:n}]},a=this.regions.findIndex(l=>l.offset>o);return a==-1?this.regions.push(s):this.regions.splice(a,0,s),this.collect(),this}}});var hx=x(()=>{d();Wi();Promise.withResolvers??=(Xo("Using a polyfill of Promise.withResolvers"),function(){let e,t;return{promise:new Promise((n,i)=>{e=n,t=i}),resolve:e,reject:t}});Symbol.dispose??=(Xo("Using a polyfill of Symbol.dispose"),Symbol("Symbol.dispose"));Symbol.asyncDispose??=(Xo("Using a polyfill of Symbol.asyncDispose"),Symbol("Symbol.asyncDispose"));globalThis.crypto.randomUUID??=(Xo("Using a polyfill of crypto.randomUUID"),function(){let t=crypto.getRandomValues(new Uint8Array(16));t[6]=t[6]&15|64,t[8]=t[8]&63|128;let o=[...t].map(n=>n.toString(16).padStart(2,"0")).join("");return`${o.slice(0,8)}-${o.slice(8,12)}-${o.slice(12,16)}-${o.slice(16,20)}-${o.slice(20)}`});Uint8Array.prototype.toBase64??=(Xo("Using a polyfill of Uint8Array.prototype.toBase64"),function(){return btoa(String.fromCharCode(...this))});Uint8Array.fromBase64??=(Xo("Using a polyfill of Uint8Array.fromBase64"),function(t){let o=atob(t),n=new Uint8Array(o.length);for(let i=0;i<o.length;i++)n[i]=o.charCodeAt(i);return n});Uint8Array.prototype.toHex??=(Xo("Using a polyfill of Uint8Array.prototype.toHex"),function(){return[...this].map(t=>t.toString(16).padStart(2,"0")).join("")});Uint8Array.fromHex??=(Xo("Using a polyfill of Uint8Array.fromHex"),function(t){let o=new Uint8Array(t.length/2);for(let n=0;n<t.length;n+=2)o[n/2]=parseInt(t.slice(n,n+2),16);return o})});var yb,X9,_8,J9,V9=x(()=>{d();Ho();Wi();VH();hx();yb=class{store;constructor(t){this.store=t}},X9=class extends yb{async get(t,o,n){return this.getSync(t,o,n)}async set(t,o,n){return this.setSync(t,o,n)}async remove(t){return this.removeSync(t)}},_8=class extends yb{asyncDone=Promise.resolve();async(t){this.asyncDone=this.asyncDone.then(()=>t)}_cached(t,o){this.store.cache??=new Map;let n=this.store.cache.get(t);return n?(o&&(n.size=o.size),n):o?new P8(t,o.size,{},this.store.cache):void 0}getSync(t,o,n){let i=this._cached(t);if(!i)return;n??=i.size;let s=i.missing(o,n);for(let{start:l,end:c}of s)this.async(this.get(t,l,c));if(s.length)throw Se("EAGAIN");let a=i.regionAt(o);if(!a){Xo("Missing cache region for "+t);return}return a.data.subarray(o-a.offset,n-a.offset)}setSync(t,o,n){this.async(this.set(t,o,n))}removeSync(t){this.async(this.remove(t)),this.store.cache?.delete(t)}},J9=class{raw;fs;done=!1;flag(t){return this.raw.store.flags?.includes(t)??!1}constructor(t,o){this.raw=t,this.fs=o}originalData=new Map;modifiedKeys=new Set;keys(){return this.raw.keys()}async get(t,o=0,n){let i=await this.raw.get(t,o,n);return this.stash(t),i}getSync(t,o=0,n){let i=this.raw.getSync(t,o,n);return this.stash(t),i}async set(t,o,n=0){await this.markModified(t,n,o.byteLength);let i=o instanceof Uint8Array?o:new Uint8Array(o.buffer,o.byteOffset,o.byteLength);await this.raw.set(t,i,n)}setSync(t,o,n=0){this.markModifiedSync(t,n,o.byteLength);let i=o instanceof Uint8Array?o:new Uint8Array(o.buffer,o.byteOffset,o.byteLength);this.raw.setSync(t,i,n)}async remove(t){await this.markModified(t,0,void 0),await this.raw.remove(t)}removeSync(t){this.markModifiedSync(t,0,void 0),this.raw.removeSync(t)}commit(){return this.done=!0,Promise.resolve()}commitSync(){this.done=!0}async abort(){if(!this.done){for(let[t,o]of this.originalData)if(this.modifiedKeys.has(t)){if(o.some(n=>!n.data)){await this.raw.remove(t),this.fs._remove(t);continue}for(let n of o.reverse())await this.raw.set(t,n.data,n.offset)}this.done=!0}}abortSync(){if(!this.done){for(let[t,o]of this.originalData)if(this.modifiedKeys.has(t)){if(o.some(n=>!n.data)){this.raw.removeSync(t),this.fs._remove(t);continue}for(let n of o.reverse())this.raw.setSync(t,n.data,n.offset)}this.done=!0}}async[Symbol.asyncDispose](){this.done||await this.abort()}[Symbol.dispose](){this.done||this.abortSync()}stash(t,o,n=0){this.originalData.has(t)||this.originalData.set(t,[]),this.originalData.get(t).push({data:o,offset:n})}async markModified(t,o,n){this.modifiedKeys.add(t);let i=n?o+n:void 0;try{this.stash(t,await this.raw.get(t,o,i),o)}catch(s){if(!(this.raw instanceof _8))throw s;let l=this.raw._cached(t);if(!l)throw s;for(let c of l.cached(o,i??o))this.stash(t,await this.raw.get(t,c.start,c.end),c.start)}}markModifiedSync(t,o,n){this.modifiedKeys.add(t);let i=n?o+n:void 0;try{this.stash(t,this.raw.getSync(t,o,i),o)}catch(s){if(!(this.raw instanceof _8))throw s;let l=this.raw._cached(t);if(!l)throw s;for(let c of l.cached(o,i??o))this.stash(t,this.raw.getSync(t,c.start,c.end),c.start)}}}});var $r,Hr,Bc,bb=x(()=>{d();Ho();Wi();fb();Pi();gb();B8();W0();ws();Ss();Wl();bs();V9();$r=function(e,t,o){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n,i;if(o){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],o&&(i=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(s){return Promise.reject(s)}}),e.stack.push({value:t,dispose:n,async:o})}else o&&e.stack.push({async:!0});return t},Hr=(function(e){return function(t){function o(a){t.error=t.hasError?new e(a,t.error,"An error was suppressed during disposal."):a,t.hasError=!0}var n,i=0;function s(){for(;n=t.stack.pop();)try{if(!n.async&&i===1)return i=0,t.stack.push(n),Promise.resolve().then(s);if(n.dispose){var a=n.dispose.call(n.value);if(n.async)return i|=2,Promise.resolve(a).then(s,function(l){return o(l),s()})}else i|=1}catch(l){o(l)}if(i===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return s()}})(typeof SuppressedError=="function"?SuppressedError:function(e,t,o){var n=new Error(o);return n.name="SuppressedError",n.error=e,n.suppressed=t,n}),Bc=class extends ya{store;_ids=new Map([["/",0]]);_paths=new Map([[0,new Set("/")]]);_path(t){let[o]=this._paths.get(t)??[];return o}_add(t,o){this._paths.has(t)||this._paths.set(t,new Set),this._paths.get(t).add(o),this._ids.set(o,t)}_remove(t){for(let o of this._paths.get(t)??[])this._ids.delete(o);this._paths.delete(t)}_move(t,o){let n=[];for(let[i,s]of this._ids){let a=fx(t,i);if(a.startsWith(".."))continue;let l=So(o,a);l.endsWith("/")&&(l=l.slice(0,-1)),n.push({oldKey:i,newKey:l,ino:s})}for(let{oldKey:i,newKey:s,ino:a}of n){this._ids.delete(i),this._ids.set(s,a);let l=this._paths.get(a);if(!l){Xo("Missing paths in table for ino "+a);continue}l.delete(i),l.add(s)}}_initialized=!1;async ready(){this._initialized||(this.attributes.has("no_async_preload")||this.checkRootSync(),await this.checkRoot(),await this._populate(),this._initialized=!0)}readySync(){this._initialized||(this.attributes.has("no_async_preload")||this.checkRootSync(),this.checkRootSync(),this._populateSync(),this._initialized=!0)}constructor(t){super(t.type??1802921587,t.name),this.store=t,t.fs=this,this._uuid=t.uuid??this.uuid,this.label=t.label,ea(this.name+": supports features: "+this.store.flags?.join(", "))}usage(){return this.store.usage?.()||{totalSpace:0,freeSpace:0}}async loadIndex(t){let o={stack:[],error:void 0,hasError:!1};try{let n=$r(o,this.transaction(),!0),i=t.directories();for(let[s,a]of t)this._add(a.ino,s),await n.set(a.ino,a),i.has(s)&&await n.set(a.data,Nc(i.get(s)));await n.commit()}catch(n){o.error=n,o.hasError=!0}finally{let n=Hr(o);n&&await n}}loadIndexSync(t){let o={stack:[],error:void 0,hasError:!1};try{let n=$r(o,this.transaction(),!1),i=t.directories();for(let[s,a]of t)this._add(a.ino,s),n.setSync(a.ino,a),i.has(s)&&n.setSync(a.data,Nc(i.get(s)));n.commitSync()}catch(n){o.error=n,o.hasError=!0}finally{Hr(o)}}async createIndex(){let t={stack:[],error:void 0,hasError:!1};try{let o=new j0,n=$r(t,this.transaction(),!0),i=[["/",0]],s=_9(Se("EDEADLK"));for(;i.length;){let[a,l]=i.shift(),c=new Zt(await n.get(l));if(o.set(a,c),c.mode&16384){let u=Os(await n.get(c.data)??Ko(Se("ENODATA")));for(let[p,m]of Object.entries(u))i.push([So(a,p),m])}}return s(),o}catch(o){t.error=o,t.hasError=!0}finally{let o=Hr(t);o&&await o}}createIndexSync(){let t={stack:[],error:void 0,hasError:!1};try{let o=new j0,n=$r(t,this.transaction(),!1),i=[["/",0]],s=_9(Se("EDEADLK"));for(;i.length;){let[a,l]=i.shift(),c=new Zt(n.getSync(l));if(o.set(a,c),c.mode&16384){let u=Os(n.getSync(c.data)??Ko(Se("ENODATA")));for(let[p,m]of Object.entries(u))i.push([So(a,p),m])}}return s(),o}catch(o){t.error=o,t.hasError=!0}finally{Hr(t)}}async rename(t,o){let n={stack:[],error:void 0,hasError:!1};try{let i=$r(n,this.transaction(),!0),s=_i(t),a=_i(o),l=await this.findInode(i,s.dir),c=Os(await i.get(l.data)??Ko(Se("ENODATA")));if(!c[s.base])throw Se("ENOENT");let u=c[s.base];if(u!=this._ids.get(t)&&pr(`Ino mismatch while renaming ${t} to ${o}`),delete c[s.base],(a.dir+"/").startsWith(t+"/"))throw Se("EBUSY");let p=a.dir==s.dir,m=p?l:await this.findInode(i,a.dir),g=p?c:Os(await i.get(m.data)??Ko(Se("ENODATA")));if(g[a.base]){let y=new Zt(await i.get(g[a.base])??Ko(Se("ENOENT")));if(!ZH(y))throw Se("EISDIR");await i.remove(y.data),await i.remove(g[a.base])}g[a.base]=u,await i.set(l.data,Nc(c)),await i.set(m.data,Nc(g)),await i.commit(),this._move(t,o)}catch(i){n.error=i,n.hasError=!0}finally{let i=Hr(n);i&&await i}}renameSync(t,o){let n={stack:[],error:void 0,hasError:!1};try{let i=$r(n,this.transaction(),!1),s=_i(t),a=_i(o),l=this.findInodeSync(i,s.dir),c=Os(i.getSync(l.data)??Ko(Se("ENODATA")));if(!c[s.base])throw Se("ENOENT");let u=c[s.base];if(u!=this._ids.get(t)&&pr(`Ino mismatch while renaming ${t} to ${o}`),delete c[s.base],(a.dir+"/").startsWith(t+"/"))throw Se("EBUSY");let p=a.dir===s.dir,m=p?l:this.findInodeSync(i,a.dir),g=p?c:Os(i.getSync(m.data)??Ko(Se("ENODATA")));if(g[a.base]){let y=new Zt(i.getSync(g[a.base])??Ko(Se("ENOENT")));if(!ZH(y))throw Se("EISDIR");i.removeSync(y.data),i.removeSync(g[a.base])}g[a.base]=u,i.setSync(l.data,Nc(c)),i.setSync(m.data,Nc(g)),i.commitSync(),this._move(t,o)}catch(i){n.error=i,n.hasError=!0}finally{Hr(n)}}async stat(t){let o={stack:[],error:void 0,hasError:!1};try{let n=$r(o,this.transaction(),!0);return await this.findInode(n,t)}catch(n){o.error=n,o.hasError=!0}finally{let n=Hr(o);n&&await n}}statSync(t){let o={stack:[],error:void 0,hasError:!1};try{let n=$r(o,this.transaction(),!1);return this.findInodeSync(n,t)}catch(n){o.error=n,o.hasError=!0}finally{Hr(o)}}async touch(t,o){let n={stack:[],error:void 0,hasError:!1};try{let i=$r(n,this.transaction(),!0),s=await this.findInode(i,t);s.update(o)&&(this._add(s.ino,t),i.setSync(s.ino,s)),await i.commit()}catch(i){n.error=i,n.hasError=!0}finally{let i=Hr(n);i&&await i}}touchSync(t,o){let n={stack:[],error:void 0,hasError:!1};try{let i=$r(n,this.transaction(),!1),s=this.findInodeSync(i,t);s.update(o)&&(this._add(s.ino,t),i.setSync(s.ino,s)),i.commitSync()}catch(i){n.error=i,n.hasError=!0}finally{Hr(n)}}async createFile(t,o){return o.mode|=32768,await this.commitNew(t,o,new Uint8Array)}createFileSync(t,o){return o.mode|=32768,this.commitNewSync(t,o,new Uint8Array)}async unlink(t){return this.remove(t,!1)}unlinkSync(t){this.removeSync(t,!1)}async rmdir(t){if((await this.readdir(t)).length)throw Se("ENOTEMPTY");await this.remove(t,!0)}rmdirSync(t){if(this.readdirSync(t).length)throw Se("ENOTEMPTY");this.removeSync(t,!0)}async mkdir(t,o){return o.mode|=16384,await this.commitNew(t,o,gl("{}"))}mkdirSync(t,o){return o.mode|=16384,this.commitNewSync(t,o,gl("{}"))}async readdir(t){let o={stack:[],error:void 0,hasError:!1};try{let n=$r(o,this.transaction(),!0),i=await this.findInode(n,t);return Object.keys(Os(await n.get(i.data)??Ko(Se("ENOENT"))))}catch(n){o.error=n,o.hasError=!0}finally{let n=Hr(o);n&&await n}}readdirSync(t){let o={stack:[],error:void 0,hasError:!1};try{let n=$r(o,this.transaction(),!1),i=this.findInodeSync(n,t);return Object.keys(Os(n.getSync(i.data)??Ko(Se("ENOENT"))))}catch(n){o.error=n,o.hasError=!0}finally{Hr(o)}}async sync(){}syncSync(){}async link(t,o){let n={stack:[],error:void 0,hasError:!1};try{let i=$r(n,this.transaction(),!0),s=yo(o),a=await this.findInode(i,s),l=Os(await i.get(a.data)??Ko(Se("ENOENT"))),c=await this.findInode(i,t);c.nlink++,l[Yi(o)]=c.ino,this._add(c.ino,o),await i.set(c.ino,c),await i.set(a.data,Nc(l)),await i.commit()}catch(i){n.error=i,n.hasError=!0}finally{let i=Hr(n);i&&await i}}linkSync(t,o){let n={stack:[],error:void 0,hasError:!1};try{let i=$r(n,this.transaction(),!1),s=yo(o),a=this.findInodeSync(i,s),l=Os(i.getSync(a.data)??Ko(Se("ENOENT"))),c=this.findInodeSync(i,t);c.nlink++,l[Yi(o)]=c.ino,this._add(c.ino,o),i.setSync(c.ino,c),i.setSync(a.data,Nc(l)),i.commitSync()}catch(i){n.error=i,n.hasError=!0}finally{Hr(n)}}async read(t,o,n,i){let s={stack:[],error:void 0,hasError:!1};try{let a=$r(s,this.transaction(),!0),l=await this.findInode(a,t);if(l.size==0)return;let c=await a.get(l.data,n,i)??Ko(Se("ENODATA")),u=a.flag("partial")?c:c.subarray(n,i);u.byteLength>o.byteLength&&pr(`Trying to place ${u.byteLength} bytes into a ${o.byteLength} byte buffer on read`),o.set(u)}catch(a){s.error=a,s.hasError=!0}finally{let a=Hr(s);a&&await a}}readSync(t,o,n,i){let s={stack:[],error:void 0,hasError:!1};try{let a=$r(s,this.transaction(),!1),l=this.findInodeSync(a,t);if(l.size==0)return;let c=a.getSync(l.data,n,i)??Ko(Se("ENODATA")),u=a.flag("partial")?c:c.subarray(n,i);u.byteLength>o.byteLength&&pr(`Trying to place ${u.byteLength} bytes into a ${o.byteLength} byte buffer on read`),o.set(u)}catch(a){s.error=a,s.hasError=!0}finally{Hr(s)}}async write(t,o,n){let i={stack:[],error:void 0,hasError:!1};try{let s=$r(i,this.transaction(),!0),a=await this.findInode(s,t),l=o;s.flag("partial")||(l=mx(await s.get(a.data)??new Uint8Array,n+o.byteLength),l.set(o,n),n=0),await s.set(a.data,l,n),this._add(a.ino,t),await s.commit()}catch(s){i.error=s,i.hasError=!0}finally{let s=Hr(i);s&&await s}}writeSync(t,o,n){let i={stack:[],error:void 0,hasError:!1};try{let s=$r(i,this.transaction(),!1),a=this.findInodeSync(s,t),l=o;s.flag("partial")||(l=mx(s.getSync(a.data)??new Uint8Array,n+o.byteLength),l.set(o,n),n=0),s.setSync(a.data,l,n),this._add(a.ino,t),s.commitSync()}catch(s){i.error=s,i.hasError=!0}finally{Hr(i)}}transaction(){return new J9(this.store.transaction(),this)}async checkRoot(){let t={stack:[],error:void 0,hasError:!1};try{let o=$r(t,this.transaction(),!0);if(await o.get(Qi))return;let n=new Zt({ino:Qi,data:1,mode:16895});await o.set(n.data,gl("{}")),this._add(Qi,"/"),await o.set(Qi,n),await o.commit()}catch(o){t.error=o,t.hasError=!0}finally{let o=Hr(t);o&&await o}}checkRootSync(){let t={stack:[],error:void 0,hasError:!1};try{let o=$r(t,this.transaction(),!1);if(o.getSync(Qi))return;let n=new Zt({ino:Qi,data:1,mode:16895});o.setSync(n.data,gl("{}")),this._add(Qi,"/"),o.setSync(Qi,n),o.commitSync()}catch(o){t.error=o,t.hasError=!0}finally{Hr(t)}}async _populate(){let t={stack:[],error:void 0,hasError:!1};try{if(this._initialized){Xo("Attempted to populate tables after initialization");return}ea("Populating tables with existing store metadata");let o=$r(t,this.transaction(),!0),n=await o.get(Qi);if(!n){ab("Store does not have a root inode");let l=new Zt({ino:Qi,data:1,mode:16895});await o.set(l.data,gl("{}")),this._add(Qi,"/"),await o.set(Qi,l),await o.commit();return}if(n.length<Qn(Zt)){Vs("Store contains an invalid root inode. Refusing to populate tables");return}let i=new Set,s=0,a=[["/",Qi]];for(;a.length>0;){s++;let[l,c]=a.shift();this._add(c,l);let u=await o.get(c);if(!u){Xo("Store is missing data for inode: "+c);continue}if(u.length<Qn(Zt)){Xo(`Invalid inode size for ino ${c}: ${u.length}`);continue}let p=new Zt(u);if((p.mode&16384)!=16384||i.has(c))continue;i.add(c);let m=await o.get(p.data);if(!m){Xo("Store is missing directory data: "+p.data);continue}let g=Os(m);for(let[y,b]of Object.entries(g))a.push([So(l,y),b])}ea(`Added ${s} existing inode(s) from store`)}catch(o){t.error=o,t.hasError=!0}finally{let o=Hr(t);o&&await o}}_populateSync(){let t={stack:[],error:void 0,hasError:!1};try{if(this._initialized){Xo("Attempted to populate tables after initialization");return}ea("Populating tables with existing store metadata");let o=$r(t,this.transaction(),!1),n=o.getSync(Qi);if(!n){ab("Store does not have a root inode");let l=new Zt({ino:Qi,data:1,mode:16895});o.setSync(l.data,gl("{}")),this._add(Qi,"/"),o.setSync(Qi,l),o.commitSync();return}if(n.length<Qn(Zt)){Vs("Store contains an invalid root inode. Refusing to populate tables");return}let i=new Set,s=0,a=[["/",Qi]];for(;a.length>0;){s++;let[l,c]=a.shift();this._add(c,l);let u=o.getSync(c);if(!u){Xo("Store is missing data for inode: "+c);continue}if(u.length<Qn(Zt)){Xo(`Invalid inode size for ino ${c}: ${u.length}`);continue}let p=new Zt(u);if((p.mode&16384)!=16384||i.has(c))continue;i.add(c);let m=o.getSync(p.data);if(!m){Xo("Store is missing directory data: "+p.data);continue}let g=Os(m);for(let[y,b]of Object.entries(g))a.push([So(l,y),b])}ea(`Added ${s} existing inode(s) from store`)}catch(o){t.error=o,t.hasError=!0}finally{Hr(t)}}async _findInode(t,o,n=new Set){if(n.has(o))throw Vs(Se("EIO","Infinite loop detected while finding inode"));if(n.add(o),o=="/")return new Zt(await t.get(Qi)??Ko(Se("ENODATA")));let{dir:i,base:s}=_i(o),a=await this._findInode(t,i,n),l=Os(await t.get(a.data)??Ko(Se("ENODATA")));if(!(s in l))throw Se("ENOENT");return new Zt(await t.get(l[s])??Ko(Se("ENODATA")))}_findInodeSync(t,o,n=new Set){if(n.has(o))throw Vs(Se("EIO","Infinite loop detected while finding inode"));if(n.add(o),o=="/")return new Zt(t.getSync(Qi)??Ko(Se("ENOENT")));let{dir:i,base:s}=_i(o),a=this._findInodeSync(t,i,n),l=Os(t.getSync(a.data)??Ko(Se("ENODATA")));if(!(s in l))throw Se("ENOENT");return new Zt(t.getSync(l[s])??Ko(Se("ENODATA")))}async findInode(t,o){if(this.attributes.has("no_id_tables"))return await this._findInode(t,o);let n=this._ids.get(o);if(n===void 0)throw Se("ENOENT");return new Zt(await t.get(n)??Ko(Se("ENOENT")))}findInodeSync(t,o){if(this.attributes.has("no_id_tables"))return this._findInodeSync(t,o);let n=this._ids.get(o);if(n===void 0)throw Se("ENOENT");return new Zt(t.getSync(n)??Ko(Se("ENOENT")))}_lastID;allocNew(t){this._lastID??=Math.max(...this._paths.keys()),this._lastID+=2;let o=this._lastID;if(o>4294967295)throw pr(Se("ENOSPC","No IDs available"));return this._add(o,t),o}async commitNew(t,o,n){let i={stack:[],error:void 0,hasError:!1};try{if(t=="/")throw Se("EEXIST");let s=$r(i,this.transaction(),!0),{dir:a,base:l}=_i(t),c=await this.findInode(s,a),u=Os(await s.get(c.data)??Ko(Se("ENOENT")));if(u[l])throw Se("EEXIST");let p=this.allocNew(t),m=new Zt({...o,ino:p,data:p+1,size:n.byteLength,nlink:1});return await s.set(m.ino,m),await s.set(m.data,n),u[l]=m.ino,await s.set(c.data,Nc(u)),await s.commit(),m}catch(s){i.error=s,i.hasError=!0}finally{let s=Hr(i);s&&await s}}commitNewSync(t,o,n){let i={stack:[],error:void 0,hasError:!1};try{if(t=="/")throw Se("EEXIST");let s=$r(i,this.transaction(),!1),{dir:a,base:l}=_i(t),c=this.findInodeSync(s,a),u=Os(s.getSync(c.data)??Ko(Se("ENOENT")));if(u[l])throw Se("EEXIST");let p=this.allocNew(t),m=new Zt({...o,ino:p,data:p+1,size:n.byteLength,nlink:1});return s.setSync(m.ino,m),s.setSync(m.data,n),u[l]=m.ino,s.setSync(c.data,Nc(u)),s.commitSync(),m}catch(s){i.error=s,i.hasError=!0}finally{Hr(i)}}async remove(t,o){let n={stack:[],error:void 0,hasError:!1};try{let i=$r(n,this.transaction(),!0),{dir:s,base:a}=_i(t),l=await this.findInode(i,s),c=Os(await i.get(l.data)??Ko(Se("ENOENT")));if(!c[a])throw Se("ENOENT");let u=c[a],p=new Zt(await i.get(u)??Ko(Se("ENOENT")));if(delete c[a],!o&&Dr(p))throw Se("EISDIR");await i.set(l.data,Nc(c)),p.nlink>1?(p.update({nlink:p.nlink-1}),await i.set(p.ino,p)):(await i.remove(p.data),await i.remove(u),this._remove(u)),await i.commit()}catch(i){n.error=i,n.hasError=!0}finally{let i=Hr(n);i&&await i}}removeSync(t,o){let n={stack:[],error:void 0,hasError:!1};try{let i=$r(n,this.transaction(),!1),{dir:s,base:a}=_i(t),l=this.findInodeSync(i,s),c=Os(i.getSync(l.data)??Ko(Se("ENOENT"))),u=c[a];if(!u)throw Se("ENOENT");let p=new Zt(i.getSync(u)??Ko(Se("ENOENT")));if(delete c[a],!o&&Dr(p))throw Se("EISDIR");i.setSync(l.data,Nc(c)),p.nlink>1?(p.update({nlink:p.nlink-1}),i.setSync(p.ino,p)):(i.removeSync(p.data),i.removeSync(u),this._remove(u)),i.commitSync()}catch(i){n.error=i,n.hasError=!0}finally{Hr(n)}}}});var xx,e6=x(()=>{d();V9();xx=class extends X9{async keys(){return this.store.keys()}async get(t){return await(this.store.getAsync?.(t)??this.store.get(t))}getSync(t){return this.store.get(t)}setSync(t,o){this.store.set(t,o)}removeSync(t){this.store.delete(t)}}});var t6,gHe,K0,R8=x(()=>{d();bs();bb();e6();t6=class extends Map{maxSize;label;flags=[];name="tmpfs";constructor(t=4294967295,o){super(),this.maxSize=t,this.label=o}async sync(){}transaction(){return new xx(this)}get bytes(){let t=this.size*4;for(let o of this.values())t+=o.byteLength;return t}usage(){return{totalSpace:this.maxSize,freeSpace:this.maxSize-this.bytes}}},gHe={name:"InMemory",options:{maxSize:{type:"number",required:!1},label:{type:"string",required:!1}},create({maxSize:e,label:t}){let o=new Bc(new t6(e,t));return o.checkRootSync(),o}},K0=gHe});var CUt,ez=x(()=>{d();Ho();Wi();Pi();R8();bb();Ss();bs();ws();CUt=new Uint8Array});var xle=Ro(o6=>{"use strict";d();o6.byteLength=xHe;o6.toByteArray=bHe;o6.fromByteArray=wHe;var Ip=[],Mu=[],hHe=typeof Uint8Array<"u"?Uint8Array:Array,tz="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(yx=0,gle=tz.length;yx<gle;++yx)Ip[yx]=tz[yx],Mu[tz.charCodeAt(yx)]=yx;var yx,gle;Mu[45]=62;Mu[95]=63;function hle(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var o=e.indexOf("=");o===-1&&(o=t);var n=o===t?0:4-o%4;return[o,n]}function xHe(e){var t=hle(e),o=t[0],n=t[1];return(o+n)*3/4-n}function yHe(e,t,o){return(t+o)*3/4-o}function bHe(e){var t,o=hle(e),n=o[0],i=o[1],s=new hHe(yHe(e,n,i)),a=0,l=i>0?n-4:n,c;for(c=0;c<l;c+=4)t=Mu[e.charCodeAt(c)]<<18|Mu[e.charCodeAt(c+1)]<<12|Mu[e.charCodeAt(c+2)]<<6|Mu[e.charCodeAt(c+3)],s[a++]=t>>16&255,s[a++]=t>>8&255,s[a++]=t&255;return i===2&&(t=Mu[e.charCodeAt(c)]<<2|Mu[e.charCodeAt(c+1)]>>4,s[a++]=t&255),i===1&&(t=Mu[e.charCodeAt(c)]<<10|Mu[e.charCodeAt(c+1)]<<4|Mu[e.charCodeAt(c+2)]>>2,s[a++]=t>>8&255,s[a++]=t&255),s}function vHe(e){return Ip[e>>18&63]+Ip[e>>12&63]+Ip[e>>6&63]+Ip[e&63]}function SHe(e,t,o){for(var n,i=[],s=t;s<o;s+=3)n=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(e[s+2]&255),i.push(vHe(n));return i.join("")}function wHe(e){for(var t,o=e.length,n=o%3,i=[],s=16383,a=0,l=o-n;a<l;a+=s)i.push(SHe(e,a,a+s>l?l:a+s));return n===1?(t=e[o-1],i.push(Ip[t>>2]+Ip[t<<4&63]+"==")):n===2&&(t=(e[o-2]<<8)+e[o-1],i.push(Ip[t>>10]+Ip[t>>4&63]+Ip[t<<2&63]+"=")),i.join("")}});var yle=Ro(oz=>{d();oz.read=function(e,t,o,n,i){var s,a,l=i*8-n-1,c=(1<<l)-1,u=c>>1,p=-7,m=o?i-1:0,g=o?-1:1,y=e[t+m];for(m+=g,s=y&(1<<-p)-1,y>>=-p,p+=l;p>0;s=s*256+e[t+m],m+=g,p-=8);for(a=s&(1<<-p)-1,s>>=-p,p+=n;p>0;a=a*256+e[t+m],m+=g,p-=8);if(s===0)s=1-u;else{if(s===c)return a?NaN:(y?-1:1)*(1/0);a=a+Math.pow(2,n),s=s-u}return(y?-1:1)*a*Math.pow(2,s-n)};oz.write=function(e,t,o,n,i,s){var a,l,c,u=s*8-i-1,p=(1<<u)-1,m=p>>1,g=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=n?0:s-1,b=n?1:-1,v=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(l=isNaN(t)?1:0,a=p):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),a+m>=1?t+=g/c:t+=g*Math.pow(2,1-m),t*c>=2&&(a++,c/=2),a+m>=p?(l=0,a=p):a+m>=1?(l=(t*c-1)*Math.pow(2,i),a=a+m):(l=t*Math.pow(2,m-1)*Math.pow(2,i),a=0));i>=8;e[o+y]=l&255,y+=b,l/=256,i-=8);for(a=a<<i|l,u+=i;u>0;e[o+y]=a&255,y+=b,a/=256,u-=8);e[o+y-b]|=v*128}});var Yl=Ro(kb=>{"use strict";d();var nz=xle(),Sb=yle(),ble=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;kb.Buffer=We;kb.SlowBuffer=IHe;kb.INSPECT_MAX_BYTES=50;var n6=2147483647;kb.kMaxLength=n6;We.TYPED_ARRAY_SUPPORT=kHe();!We.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function kHe(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),e.foo()===42}catch{return!1}}Object.defineProperty(We.prototype,"parent",{enumerable:!0,get:function(){if(We.isBuffer(this))return this.buffer}});Object.defineProperty(We.prototype,"offset",{enumerable:!0,get:function(){if(We.isBuffer(this))return this.byteOffset}});function of(e){if(e>n6)throw new RangeError('The value "'+e+'" is invalid for option "size"');let t=new Uint8Array(e);return Object.setPrototypeOf(t,We.prototype),t}function We(e,t,o){if(typeof e=="number"){if(typeof t=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return az(e)}return kle(e,t,o)}We.poolSize=8192;function kle(e,t,o){if(typeof e=="string")return AHe(e,t);if(ArrayBuffer.isView(e))return CHe(e);if(e==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Dp(e,ArrayBuffer)||e&&Dp(e.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Dp(e,SharedArrayBuffer)||e&&Dp(e.buffer,SharedArrayBuffer)))return iz(e,t,o);if(typeof e=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=e.valueOf&&e.valueOf();if(n!=null&&n!==e)return We.from(n,t,o);let i=THe(e);if(i)return i;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]=="function")return We.from(e[Symbol.toPrimitive]("string"),t,o);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}We.from=function(e,t,o){return kle(e,t,o)};Object.setPrototypeOf(We.prototype,Uint8Array.prototype);Object.setPrototypeOf(We,Uint8Array);function Ele(e){if(typeof e!="number")throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function EHe(e,t,o){return Ele(e),e<=0?of(e):t!==void 0?typeof o=="string"?of(e).fill(t,o):of(e).fill(t):of(e)}We.alloc=function(e,t,o){return EHe(e,t,o)};function az(e){return Ele(e),of(e<0?0:lz(e)|0)}We.allocUnsafe=function(e){return az(e)};We.allocUnsafeSlow=function(e){return az(e)};function AHe(e,t){if((typeof t!="string"||t==="")&&(t="utf8"),!We.isEncoding(t))throw new TypeError("Unknown encoding: "+t);let o=Ale(e,t)|0,n=of(o),i=n.write(e,t);return i!==o&&(n=n.slice(0,i)),n}function rz(e){let t=e.length<0?0:lz(e.length)|0,o=of(t);for(let n=0;n<t;n+=1)o[n]=e[n]&255;return o}function CHe(e){if(Dp(e,Uint8Array)){let t=new Uint8Array(e);return iz(t.buffer,t.byteOffset,t.byteLength)}return rz(e)}function iz(e,t,o){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(o||0))throw new RangeError('"length" is outside of buffer bounds');let n;return t===void 0&&o===void 0?n=new Uint8Array(e):o===void 0?n=new Uint8Array(e,t):n=new Uint8Array(e,t,o),Object.setPrototypeOf(n,We.prototype),n}function THe(e){if(We.isBuffer(e)){let t=lz(e.length)|0,o=of(t);return o.length===0||e.copy(o,0,0,t),o}if(e.length!==void 0)return typeof e.length!="number"||uz(e.length)?of(0):rz(e);if(e.type==="Buffer"&&Array.isArray(e.data))return rz(e.data)}function lz(e){if(e>=n6)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n6.toString(16)+" bytes");return e|0}function IHe(e){return+e!=e&&(e=0),We.alloc(+e)}We.isBuffer=function(t){return t!=null&&t._isBuffer===!0&&t!==We.prototype};We.compare=function(t,o){if(Dp(t,Uint8Array)&&(t=We.from(t,t.offset,t.byteLength)),Dp(o,Uint8Array)&&(o=We.from(o,o.offset,o.byteLength)),!We.isBuffer(t)||!We.isBuffer(o))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===o)return 0;let n=t.length,i=o.length;for(let s=0,a=Math.min(n,i);s<a;++s)if(t[s]!==o[s]){n=t[s],i=o[s];break}return n<i?-1:i<n?1:0};We.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};We.concat=function(t,o){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return We.alloc(0);let n;if(o===void 0)for(o=0,n=0;n<t.length;++n)o+=t[n].length;let i=We.allocUnsafe(o),s=0;for(n=0;n<t.length;++n){let a=t[n];if(Dp(a,Uint8Array))s+a.length>i.length?(We.isBuffer(a)||(a=We.from(a)),a.copy(i,s)):Uint8Array.prototype.set.call(i,a,s);else if(We.isBuffer(a))a.copy(i,s);else throw new TypeError('"list" argument must be an Array of Buffers');s+=a.length}return i};function Ale(e,t){if(We.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Dp(e,ArrayBuffer))return e.byteLength;if(typeof e!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let o=e.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&o===0)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return o;case"utf8":case"utf-8":return sz(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return o*2;case"hex":return o>>>1;case"base64":return _le(e).length;default:if(i)return n?-1:sz(e).length;t=(""+t).toLowerCase(),i=!0}}We.byteLength=Ale;function DHe(e,t,o){let n=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((o===void 0||o>this.length)&&(o=this.length),o<=0)||(o>>>=0,t>>>=0,o<=t))return"";for(e||(e="utf8");;)switch(e){case"hex":return UHe(this,t,o);case"utf8":case"utf-8":return Tle(this,t,o);case"ascii":return OHe(this,t,o);case"latin1":case"binary":return FHe(this,t,o);case"base64":return RHe(this,t,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $He(this,t,o);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}We.prototype._isBuffer=!0;function bx(e,t,o){let n=e[t];e[t]=e[o],e[o]=n}We.prototype.swap16=function(){let t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let o=0;o<t;o+=2)bx(this,o,o+1);return this};We.prototype.swap32=function(){let t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let o=0;o<t;o+=4)bx(this,o,o+3),bx(this,o+1,o+2);return this};We.prototype.swap64=function(){let t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let o=0;o<t;o+=8)bx(this,o,o+7),bx(this,o+1,o+6),bx(this,o+2,o+5),bx(this,o+3,o+4);return this};We.prototype.toString=function(){let t=this.length;return t===0?"":arguments.length===0?Tle(this,0,t):DHe.apply(this,arguments)};We.prototype.toLocaleString=We.prototype.toString;We.prototype.equals=function(t){if(!We.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:We.compare(this,t)===0};We.prototype.inspect=function(){let t="",o=kb.INSPECT_MAX_BYTES;return t=this.toString("hex",0,o).replace(/(.{2})/g,"$1 ").trim(),this.length>o&&(t+=" ... "),"<Buffer "+t+">"};ble&&(We.prototype[ble]=We.prototype.inspect);We.prototype.compare=function(t,o,n,i,s){if(Dp(t,Uint8Array)&&(t=We.from(t,t.offset,t.byteLength)),!We.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(o===void 0&&(o=0),n===void 0&&(n=t?t.length:0),i===void 0&&(i=0),s===void 0&&(s=this.length),o<0||n>t.length||i<0||s>this.length)throw new RangeError("out of range index");if(i>=s&&o>=n)return 0;if(i>=s)return-1;if(o>=n)return 1;if(o>>>=0,n>>>=0,i>>>=0,s>>>=0,this===t)return 0;let a=s-i,l=n-o,c=Math.min(a,l),u=this.slice(i,s),p=t.slice(o,n);for(let m=0;m<c;++m)if(u[m]!==p[m]){a=u[m],l=p[m];break}return a<l?-1:l<a?1:0};function Cle(e,t,o,n,i){if(e.length===0)return-1;if(typeof o=="string"?(n=o,o=0):o>2147483647?o=2147483647:o<-2147483648&&(o=-2147483648),o=+o,uz(o)&&(o=i?0:e.length-1),o<0&&(o=e.length+o),o>=e.length){if(i)return-1;o=e.length-1}else if(o<0)if(i)o=0;else return-1;if(typeof t=="string"&&(t=We.from(t,n)),We.isBuffer(t))return t.length===0?-1:vle(e,t,o,n,i);if(typeof t=="number")return t=t&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(e,t,o):Uint8Array.prototype.lastIndexOf.call(e,t,o):vle(e,[t],o,n,i);throw new TypeError("val must be string, number or Buffer")}function vle(e,t,o,n,i){let s=1,a=e.length,l=t.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(e.length<2||t.length<2)return-1;s=2,a/=2,l/=2,o/=2}function c(p,m){return s===1?p[m]:p.readUInt16BE(m*s)}let u;if(i){let p=-1;for(u=o;u<a;u++)if(c(e,u)===c(t,p===-1?0:u-p)){if(p===-1&&(p=u),u-p+1===l)return p*s}else p!==-1&&(u-=u-p),p=-1}else for(o+l>a&&(o=a-l),u=o;u>=0;u--){let p=!0;for(let m=0;m<l;m++)if(c(e,u+m)!==c(t,m)){p=!1;break}if(p)return u}return-1}We.prototype.includes=function(t,o,n){return this.indexOf(t,o,n)!==-1};We.prototype.indexOf=function(t,o,n){return Cle(this,t,o,n,!0)};We.prototype.lastIndexOf=function(t,o,n){return Cle(this,t,o,n,!1)};function MHe(e,t,o,n){o=Number(o)||0;let i=e.length-o;n?(n=Number(n),n>i&&(n=i)):n=i;let s=t.length;n>s/2&&(n=s/2);let a;for(a=0;a<n;++a){let l=parseInt(t.substr(a*2,2),16);if(uz(l))return a;e[o+a]=l}return a}function NHe(e,t,o,n){return r6(sz(t,e.length-o),e,o,n)}function BHe(e,t,o,n){return r6(qHe(t),e,o,n)}function PHe(e,t,o,n){return r6(_le(t),e,o,n)}function _He(e,t,o,n){return r6(jHe(t,e.length-o),e,o,n)}We.prototype.write=function(t,o,n,i){if(o===void 0)i="utf8",n=this.length,o=0;else if(n===void 0&&typeof o=="string")i=o,n=this.length,o=0;else if(isFinite(o))o=o>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let s=this.length-o;if((n===void 0||n>s)&&(n=s),t.length>0&&(n<0||o<0)||o>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let a=!1;for(;;)switch(i){case"hex":return MHe(this,t,o,n);case"utf8":case"utf-8":return NHe(this,t,o,n);case"ascii":case"latin1":case"binary":return BHe(this,t,o,n);case"base64":return PHe(this,t,o,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _He(this,t,o,n);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),a=!0}};We.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function RHe(e,t,o){return t===0&&o===e.length?nz.fromByteArray(e):nz.fromByteArray(e.slice(t,o))}function Tle(e,t,o){o=Math.min(e.length,o);let n=[],i=t;for(;i<o;){let s=e[i],a=null,l=s>239?4:s>223?3:s>191?2:1;if(i+l<=o){let c,u,p,m;switch(l){case 1:s<128&&(a=s);break;case 2:c=e[i+1],(c&192)===128&&(m=(s&31)<<6|c&63,m>127&&(a=m));break;case 3:c=e[i+1],u=e[i+2],(c&192)===128&&(u&192)===128&&(m=(s&15)<<12|(c&63)<<6|u&63,m>2047&&(m<55296||m>57343)&&(a=m));break;case 4:c=e[i+1],u=e[i+2],p=e[i+3],(c&192)===128&&(u&192)===128&&(p&192)===128&&(m=(s&15)<<18|(c&63)<<12|(u&63)<<6|p&63,m>65535&&m<1114112&&(a=m))}}a===null?(a=65533,l=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|a&1023),n.push(a),i+=l}return LHe(n)}var Sle=4096;function LHe(e){let t=e.length;if(t<=Sle)return String.fromCharCode.apply(String,e);let o="",n=0;for(;n<t;)o+=String.fromCharCode.apply(String,e.slice(n,n+=Sle));return o}function OHe(e,t,o){let n="";o=Math.min(e.length,o);for(let i=t;i<o;++i)n+=String.fromCharCode(e[i]&127);return n}function FHe(e,t,o){let n="";o=Math.min(e.length,o);for(let i=t;i<o;++i)n+=String.fromCharCode(e[i]);return n}function UHe(e,t,o){let n=e.length;(!t||t<0)&&(t=0),(!o||o<0||o>n)&&(o=n);let i="";for(let s=t;s<o;++s)i+=WHe[e[s]];return i}function $He(e,t,o){let n=e.slice(t,o),i="";for(let s=0;s<n.length-1;s+=2)i+=String.fromCharCode(n[s]+n[s+1]*256);return i}We.prototype.slice=function(t,o){let n=this.length;t=~~t,o=o===void 0?n:~~o,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),o<0?(o+=n,o<0&&(o=0)):o>n&&(o=n),o<t&&(o=t);let i=this.subarray(t,o);return Object.setPrototypeOf(i,We.prototype),i};function oa(e,t,o){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>o)throw new RangeError("Trying to access beyond buffer length")}We.prototype.readUintLE=We.prototype.readUIntLE=function(t,o,n){t=t>>>0,o=o>>>0,n||oa(t,o,this.length);let i=this[t],s=1,a=0;for(;++a<o&&(s*=256);)i+=this[t+a]*s;return i};We.prototype.readUintBE=We.prototype.readUIntBE=function(t,o,n){t=t>>>0,o=o>>>0,n||oa(t,o,this.length);let i=this[t+--o],s=1;for(;o>0&&(s*=256);)i+=this[t+--o]*s;return i};We.prototype.readUint8=We.prototype.readUInt8=function(t,o){return t=t>>>0,o||oa(t,1,this.length),this[t]};We.prototype.readUint16LE=We.prototype.readUInt16LE=function(t,o){return t=t>>>0,o||oa(t,2,this.length),this[t]|this[t+1]<<8};We.prototype.readUint16BE=We.prototype.readUInt16BE=function(t,o){return t=t>>>0,o||oa(t,2,this.length),this[t]<<8|this[t+1]};We.prototype.readUint32LE=We.prototype.readUInt32LE=function(t,o){return t=t>>>0,o||oa(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};We.prototype.readUint32BE=We.prototype.readUInt32BE=function(t,o){return t=t>>>0,o||oa(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};We.prototype.readBigUInt64LE=Y0(function(t){t=t>>>0,wb(t,"offset");let o=this[t],n=this[t+7];(o===void 0||n===void 0)&&L8(t,this.length-8);let i=o+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24,s=this[++t]+this[++t]*2**8+this[++t]*2**16+n*2**24;return BigInt(i)+(BigInt(s)<<BigInt(32))});We.prototype.readBigUInt64BE=Y0(function(t){t=t>>>0,wb(t,"offset");let o=this[t],n=this[t+7];(o===void 0||n===void 0)&&L8(t,this.length-8);let i=o*2**24+this[++t]*2**16+this[++t]*2**8+this[++t],s=this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+n;return(BigInt(i)<<BigInt(32))+BigInt(s)});We.prototype.readIntLE=function(t,o,n){t=t>>>0,o=o>>>0,n||oa(t,o,this.length);let i=this[t],s=1,a=0;for(;++a<o&&(s*=256);)i+=this[t+a]*s;return s*=128,i>=s&&(i-=Math.pow(2,8*o)),i};We.prototype.readIntBE=function(t,o,n){t=t>>>0,o=o>>>0,n||oa(t,o,this.length);let i=o,s=1,a=this[t+--i];for(;i>0&&(s*=256);)a+=this[t+--i]*s;return s*=128,a>=s&&(a-=Math.pow(2,8*o)),a};We.prototype.readInt8=function(t,o){return t=t>>>0,o||oa(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]};We.prototype.readInt16LE=function(t,o){t=t>>>0,o||oa(t,2,this.length);let n=this[t]|this[t+1]<<8;return n&32768?n|4294901760:n};We.prototype.readInt16BE=function(t,o){t=t>>>0,o||oa(t,2,this.length);let n=this[t+1]|this[t]<<8;return n&32768?n|4294901760:n};We.prototype.readInt32LE=function(t,o){return t=t>>>0,o||oa(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};We.prototype.readInt32BE=function(t,o){return t=t>>>0,o||oa(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};We.prototype.readBigInt64LE=Y0(function(t){t=t>>>0,wb(t,"offset");let o=this[t],n=this[t+7];(o===void 0||n===void 0)&&L8(t,this.length-8);let i=this[t+4]+this[t+5]*2**8+this[t+6]*2**16+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(o+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24)});We.prototype.readBigInt64BE=Y0(function(t){t=t>>>0,wb(t,"offset");let o=this[t],n=this[t+7];(o===void 0||n===void 0)&&L8(t,this.length-8);let i=(o<<24)+this[++t]*2**16+this[++t]*2**8+this[++t];return(BigInt(i)<<BigInt(32))+BigInt(this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+n)});We.prototype.readFloatLE=function(t,o){return t=t>>>0,o||oa(t,4,this.length),Sb.read(this,t,!0,23,4)};We.prototype.readFloatBE=function(t,o){return t=t>>>0,o||oa(t,4,this.length),Sb.read(this,t,!1,23,4)};We.prototype.readDoubleLE=function(t,o){return t=t>>>0,o||oa(t,8,this.length),Sb.read(this,t,!0,52,8)};We.prototype.readDoubleBE=function(t,o){return t=t>>>0,o||oa(t,8,this.length),Sb.read(this,t,!1,52,8)};function Kl(e,t,o,n,i,s){if(!We.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw new RangeError('"value" argument is out of bounds');if(o+n>e.length)throw new RangeError("Index out of range")}We.prototype.writeUintLE=We.prototype.writeUIntLE=function(t,o,n,i){if(t=+t,o=o>>>0,n=n>>>0,!i){let l=Math.pow(2,8*n)-1;Kl(this,t,o,n,l,0)}let s=1,a=0;for(this[o]=t&255;++a<n&&(s*=256);)this[o+a]=t/s&255;return o+n};We.prototype.writeUintBE=We.prototype.writeUIntBE=function(t,o,n,i){if(t=+t,o=o>>>0,n=n>>>0,!i){let l=Math.pow(2,8*n)-1;Kl(this,t,o,n,l,0)}let s=n-1,a=1;for(this[o+s]=t&255;--s>=0&&(a*=256);)this[o+s]=t/a&255;return o+n};We.prototype.writeUint8=We.prototype.writeUInt8=function(t,o,n){return t=+t,o=o>>>0,n||Kl(this,t,o,1,255,0),this[o]=t&255,o+1};We.prototype.writeUint16LE=We.prototype.writeUInt16LE=function(t,o,n){return t=+t,o=o>>>0,n||Kl(this,t,o,2,65535,0),this[o]=t&255,this[o+1]=t>>>8,o+2};We.prototype.writeUint16BE=We.prototype.writeUInt16BE=function(t,o,n){return t=+t,o=o>>>0,n||Kl(this,t,o,2,65535,0),this[o]=t>>>8,this[o+1]=t&255,o+2};We.prototype.writeUint32LE=We.prototype.writeUInt32LE=function(t,o,n){return t=+t,o=o>>>0,n||Kl(this,t,o,4,4294967295,0),this[o+3]=t>>>24,this[o+2]=t>>>16,this[o+1]=t>>>8,this[o]=t&255,o+4};We.prototype.writeUint32BE=We.prototype.writeUInt32BE=function(t,o,n){return t=+t,o=o>>>0,n||Kl(this,t,o,4,4294967295,0),this[o]=t>>>24,this[o+1]=t>>>16,this[o+2]=t>>>8,this[o+3]=t&255,o+4};function Ile(e,t,o,n,i){Ple(t,n,i,e,o,7);let s=Number(t&BigInt(4294967295));e[o++]=s,s=s>>8,e[o++]=s,s=s>>8,e[o++]=s,s=s>>8,e[o++]=s;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[o++]=a,a=a>>8,e[o++]=a,a=a>>8,e[o++]=a,a=a>>8,e[o++]=a,o}function Dle(e,t,o,n,i){Ple(t,n,i,e,o,7);let s=Number(t&BigInt(4294967295));e[o+7]=s,s=s>>8,e[o+6]=s,s=s>>8,e[o+5]=s,s=s>>8,e[o+4]=s;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[o+3]=a,a=a>>8,e[o+2]=a,a=a>>8,e[o+1]=a,a=a>>8,e[o]=a,o+8}We.prototype.writeBigUInt64LE=Y0(function(t,o=0){return Ile(this,t,o,BigInt(0),BigInt("0xffffffffffffffff"))});We.prototype.writeBigUInt64BE=Y0(function(t,o=0){return Dle(this,t,o,BigInt(0),BigInt("0xffffffffffffffff"))});We.prototype.writeIntLE=function(t,o,n,i){if(t=+t,o=o>>>0,!i){let c=Math.pow(2,8*n-1);Kl(this,t,o,n,c-1,-c)}let s=0,a=1,l=0;for(this[o]=t&255;++s<n&&(a*=256);)t<0&&l===0&&this[o+s-1]!==0&&(l=1),this[o+s]=(t/a>>0)-l&255;return o+n};We.prototype.writeIntBE=function(t,o,n,i){if(t=+t,o=o>>>0,!i){let c=Math.pow(2,8*n-1);Kl(this,t,o,n,c-1,-c)}let s=n-1,a=1,l=0;for(this[o+s]=t&255;--s>=0&&(a*=256);)t<0&&l===0&&this[o+s+1]!==0&&(l=1),this[o+s]=(t/a>>0)-l&255;return o+n};We.prototype.writeInt8=function(t,o,n){return t=+t,o=o>>>0,n||Kl(this,t,o,1,127,-128),t<0&&(t=255+t+1),this[o]=t&255,o+1};We.prototype.writeInt16LE=function(t,o,n){return t=+t,o=o>>>0,n||Kl(this,t,o,2,32767,-32768),this[o]=t&255,this[o+1]=t>>>8,o+2};We.prototype.writeInt16BE=function(t,o,n){return t=+t,o=o>>>0,n||Kl(this,t,o,2,32767,-32768),this[o]=t>>>8,this[o+1]=t&255,o+2};We.prototype.writeInt32LE=function(t,o,n){return t=+t,o=o>>>0,n||Kl(this,t,o,4,2147483647,-2147483648),this[o]=t&255,this[o+1]=t>>>8,this[o+2]=t>>>16,this[o+3]=t>>>24,o+4};We.prototype.writeInt32BE=function(t,o,n){return t=+t,o=o>>>0,n||Kl(this,t,o,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[o]=t>>>24,this[o+1]=t>>>16,this[o+2]=t>>>8,this[o+3]=t&255,o+4};We.prototype.writeBigInt64LE=Y0(function(t,o=0){return Ile(this,t,o,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});We.prototype.writeBigInt64BE=Y0(function(t,o=0){return Dle(this,t,o,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Mle(e,t,o,n,i,s){if(o+n>e.length)throw new RangeError("Index out of range");if(o<0)throw new RangeError("Index out of range")}function Nle(e,t,o,n,i){return t=+t,o=o>>>0,i||Mle(e,t,o,4,34028234663852886e22,-34028234663852886e22),Sb.write(e,t,o,n,23,4),o+4}We.prototype.writeFloatLE=function(t,o,n){return Nle(this,t,o,!0,n)};We.prototype.writeFloatBE=function(t,o,n){return Nle(this,t,o,!1,n)};function Ble(e,t,o,n,i){return t=+t,o=o>>>0,i||Mle(e,t,o,8,17976931348623157e292,-17976931348623157e292),Sb.write(e,t,o,n,52,8),o+8}We.prototype.writeDoubleLE=function(t,o,n){return Ble(this,t,o,!0,n)};We.prototype.writeDoubleBE=function(t,o,n){return Ble(this,t,o,!1,n)};We.prototype.copy=function(t,o,n,i){if(!We.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),o>=t.length&&(o=t.length),o||(o=0),i>0&&i<n&&(i=n),i===n||t.length===0||this.length===0)return 0;if(o<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-o<i-n&&(i=t.length-o+n);let s=i-n;return this===t&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(o,n,i):Uint8Array.prototype.set.call(t,this.subarray(n,i),o),s};We.prototype.fill=function(t,o,n,i){if(typeof t=="string"){if(typeof o=="string"?(i=o,o=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!We.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(t.length===1){let a=t.charCodeAt(0);(i==="utf8"&&a<128||i==="latin1")&&(t=a)}}else typeof t=="number"?t=t&255:typeof t=="boolean"&&(t=Number(t));if(o<0||this.length<o||this.length<n)throw new RangeError("Out of range index");if(n<=o)return this;o=o>>>0,n=n===void 0?this.length:n>>>0,t||(t=0);let s;if(typeof t=="number")for(s=o;s<n;++s)this[s]=t;else{let a=We.isBuffer(t)?t:We.from(t,i),l=a.length;if(l===0)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(s=0;s<n-o;++s)this[s+o]=a[s%l]}return this};var vb={};function cz(e,t,o){vb[e]=class extends o{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}cz("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);cz("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError);cz("ERR_OUT_OF_RANGE",function(e,t,o){let n=`The value of "${e}" is out of range.`,i=o;return Number.isInteger(o)&&Math.abs(o)>2**32?i=wle(String(o)):typeof o=="bigint"&&(i=String(o),(o>BigInt(2)**BigInt(32)||o<-(BigInt(2)**BigInt(32)))&&(i=wle(i)),i+="n"),n+=` It must be ${t}. Received ${i}`,n},RangeError);function wle(e){let t="",o=e.length,n=e[0]==="-"?1:0;for(;o>=n+4;o-=3)t=`_${e.slice(o-3,o)}${t}`;return`${e.slice(0,o)}${t}`}function HHe(e,t,o){wb(t,"offset"),(e[t]===void 0||e[t+o]===void 0)&&L8(t,e.length-(o+1))}function Ple(e,t,o,n,i,s){if(e>o||e<t){let a=typeof t=="bigint"?"n":"",l;throw s>3?t===0||t===BigInt(0)?l=`>= 0${a} and < 2${a} ** ${(s+1)*8}${a}`:l=`>= -(2${a} ** ${(s+1)*8-1}${a}) and < 2 ** ${(s+1)*8-1}${a}`:l=`>= ${t}${a} and <= ${o}${a}`,new vb.ERR_OUT_OF_RANGE("value",l,e)}HHe(n,i,s)}function wb(e,t){if(typeof e!="number")throw new vb.ERR_INVALID_ARG_TYPE(t,"number",e)}function L8(e,t,o){throw Math.floor(e)!==e?(wb(e,o),new vb.ERR_OUT_OF_RANGE(o||"offset","an integer",e)):t<0?new vb.ERR_BUFFER_OUT_OF_BOUNDS:new vb.ERR_OUT_OF_RANGE(o||"offset",`>= ${o?1:0} and <= ${t}`,e)}var zHe=/[^+/0-9A-Za-z-_]/g;function GHe(e){if(e=e.split("=")[0],e=e.trim().replace(zHe,""),e.length<2)return"";for(;e.length%4!==0;)e=e+"=";return e}function sz(e,t){t=t||1/0;let o,n=e.length,i=null,s=[];for(let a=0;a<n;++a){if(o=e.charCodeAt(a),o>55295&&o<57344){if(!i){if(o>56319){(t-=3)>-1&&s.push(239,191,189);continue}else if(a+1===n){(t-=3)>-1&&s.push(239,191,189);continue}i=o;continue}if(o<56320){(t-=3)>-1&&s.push(239,191,189),i=o;continue}o=(i-55296<<10|o-56320)+65536}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,o<128){if((t-=1)<0)break;s.push(o)}else if(o<2048){if((t-=2)<0)break;s.push(o>>6|192,o&63|128)}else if(o<65536){if((t-=3)<0)break;s.push(o>>12|224,o>>6&63|128,o&63|128)}else if(o<1114112){if((t-=4)<0)break;s.push(o>>18|240,o>>12&63|128,o>>6&63|128,o&63|128)}else throw new Error("Invalid code point")}return s}function qHe(e){let t=[];for(let o=0;o<e.length;++o)t.push(e.charCodeAt(o)&255);return t}function jHe(e,t){let o,n,i,s=[];for(let a=0;a<e.length&&!((t-=2)<0);++a)o=e.charCodeAt(a),n=o>>8,i=o%256,s.push(i),s.push(n);return s}function _le(e){return nz.toByteArray(GHe(e))}function r6(e,t,o,n){let i;for(i=0;i<n&&!(i+o>=t.length||i>=e.length);++i)t[i+o]=e[i];return i}function Dp(e,t){return e instanceof t||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===t.name}function uz(e){return e!==e}var WHe=(function(){let e="0123456789abcdef",t=new Array(256);for(let o=0;o<16;++o){let n=o*16;for(let i=0;i<16;++i)t[n+i]=e[o]+e[i]}return t})();function Y0(e){return typeof BigInt>"u"?KHe:e}function KHe(){throw new Error("BigInt not supported")}});var dn,vx=x(()=>{d();dn=!0});function i6(e){return(e&61440)>>12}var Mp,Eb,O8=x(()=>{d();(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.FIFO=1]="FIFO",e[e.CHR=2]="CHR",e[e.DIR=4]="DIR",e[e.BLK=6]="BLK",e[e.REG=8]="REG",e[e.LNK=10]="LNK",e[e.SOCK=12]="SOCK",e[e.WHT=14]="WHT"})(Mp||(Mp={}));Eb=class{ino;type;path;name}});function F8(e){let t=Ki(e.context).descriptors,o=Math.max(t.size?Math.max(...t.keys())+1:0,4);return t.set(o,e),o}function na(e,t){let n=Ki(e).descriptors.get(t);if(!n)throw Se("EBADF");return n}function s6(e,t){return Ki(e).descriptors.delete(t)}var Q0,Ab=x(()=>{d();Ho();bs();Cd();ws();hx();Q0=class{context;path;fs;internalPath;flag;inode;_buffer;_position=0;get position(){return this.flag&1024?this.inode.size:this._position}set position(t){this._position=t}dirty=!1;closed=!1;get isClosed(){return this.closed}constructor(t,o,n,i,s,a){this.context=t,this.path=o,this.fs=n,this.internalPath=i,this.flag=s,this.inode=a}get _isSync(){return!!(this.flag&1052672||this.inode.flags&ta.Sync||this.fs.attributes.has("sync"))}[Symbol.dispose](){this.closeSync()}syncSync(){if(this.closed)throw ve("EBADF","sync",this.path);this.dirty&&(this.fs.attributes.has("no_write")||this.fs.touchSync(this.internalPath,this.inode),this.dirty=!1)}datasyncSync(){return this.syncSync()}closeSync(){if(this.closed)throw ve("EBADF","close",this.path);this.syncSync(),this.disposeSync()}disposeSync(t){if(this.closed)throw ve("EBADF","close",this.path);if(this.dirty&&!t)throw ve("EBUSY","close",this.path);this.closed=!0}truncateSync(t){if(t<0)throw ve("EINVAL","truncate",this.path);if(this.closed)throw ve("EBADF","truncate",this.path);if(!(this.flag&1||this.flag&2))throw ve("EBADF","truncate",this.path);if(this.fs.attributes.has("readonly"))throw ve("EROFS","truncate",this.path);if(this.inode.flags&ta.Immutable)throw ve("EPERM","truncate",this.path);this.dirty=!0,this.inode.mtimeMs=Date.now(),this.inode.size=t,this.inode.ctimeMs=Date.now(),this._isSync&&this.syncSync()}writeSync(t,o=0,n=t.byteLength-o,i=this.position){if(this.closed)throw ve("EBADF","write",this.path);if(!(this.flag&1||this.flag&2))throw ve("EBADF","write",this.path);if(this.fs.attributes.has("readonly"))throw ve("EROFS","write",this.path);if(this.inode.flags&ta.Immutable)throw ve("EPERM","write",this.path);this.dirty=!0;let s=i+n,a=t.subarray(o,o+n);return!N8(this.inode)&&!M8(this.inode)&&s>this.inode.size&&(this.inode.size=s),this.inode.mtimeMs=Date.now(),this.inode.ctimeMs=Date.now(),this._position=i+a.byteLength,this.fs.writeSync(this.internalPath,a,i),this._isSync&&this.syncSync(),a.byteLength}readSync(t,o=0,n=t.byteLength-o,i=this.position){if(this.closed)throw ve("EBADF","read",this.path);if(this.flag&1)throw ve("EBADF","read",this.path);!(this.inode.flags&ta.NoAtime)&&!this.fs.attributes.has("no_atime")&&(this.dirty=!0,this.inode.atimeMs=Date.now());let s=i+n;!N8(this.inode)&&!M8(this.inode)&&s>this.inode.size&&(s=i+Math.max(this.inode.size-i,0)),this._position=s;let a=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return this.fs.readSync(this.internalPath,a.subarray(o,o+n),i,s),this._isSync&&this.syncSync(),s-i}chmodSync(t){if(this.closed)throw ve("EBADF","chmod",this.path);this.dirty=!0,this.inode.mode=this.inode.mode&(t>61440?-61441:61440)|t,(this._isSync||t>61440)&&this.syncSync()}chownSync(t,o){if(this.closed)throw ve("EBADF","chmod",this.path);this.dirty=!0,XH(this.inode,t,o),this._isSync&&this.syncSync()}utimesSync(t,o){if(this.closed)throw ve("EBADF","utimes",this.path);this.dirty=!0,this.inode.atimeMs=t,this.inode.mtimeMs=o,this._isSync&&this.syncSync()}async[Symbol.asyncDispose](){await this.close()}async sync(){if(this.closed)throw ve("EBADF","sync",this.path);this.dirty&&(this.fs.attributes.has("no_write")||await this.fs.touch(this.internalPath,this.inode),this.dirty=!1)}datasync(){return this.sync()}async close(){if(this.closed)throw ve("EBADF","close",this.path);await this.sync(),this.dispose()}dispose(t){if(this.closed)throw ve("EBADF","close",this.path);if(this.dirty&&!t)throw ve("EBUSY","close",this.path);this.closed=!0}stat(){if(this.closed)throw ve("EBADF","stat",this.path);return this.inode}async truncate(t){if(t<0)throw ve("EINVAL","truncate",this.path);if(this.closed)throw ve("EBADF","truncate",this.path);if(!(this.flag&1||this.flag&2))throw ve("EBADF","truncate",this.path);if(this.fs.attributes.has("readonly"))throw ve("EROFS","truncate",this.path);if(this.inode.flags&ta.Immutable)throw ve("EPERM","truncate",this.path);this.dirty=!0,this.inode.mtimeMs=Date.now(),this.inode.size=t,this.inode.ctimeMs=Date.now(),this._isSync&&await this.sync()}async write(t,o=0,n=t.byteLength-o,i=this.position){if(this.closed)throw ve("EBADF","write",this.path);if(!(this.flag&1||this.flag&2))throw ve("EBADF","write",this.path);if(this.fs.attributes.has("readonly"))throw ve("EROFS","write",this.path);if(this.inode.flags&ta.Immutable)throw ve("EPERM","write",this.path);this.dirty=!0;let s=i+n,a=t.subarray(o,o+n);return!N8(this.inode)&&!M8(this.inode)&&s>this.inode.size&&(this.inode.size=s),this.inode.mtimeMs=Date.now(),this.inode.ctimeMs=Date.now(),this._position=i+a.byteLength,await this.fs.write(this.internalPath,a,i),this._isSync&&await this.sync(),a.byteLength}async read(t,o=0,n=t.byteLength-o,i=this.position){if(this.closed)throw ve("EBADF","read",this.path);if(this.flag&1)throw ve("EBADF","read",this.path);!(this.inode.flags&ta.NoAtime)&&!this.fs.attributes.has("no_atime")&&(this.dirty=!0,this.inode.atimeMs=Date.now());let s=i+n;!N8(this.inode)&&!M8(this.inode)&&s>this.inode.size&&(s=i+Math.max(this.inode.size-i,0)),this._position=s;let a=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return await this.fs.read(this.internalPath,a.subarray(o,o+n),i,s),this._isSync&&await this.sync(),s-i}async chmod(t){if(this.closed)throw ve("EBADF","chmod",this.path);this.dirty=!0,this.inode.mode=this.inode.mode&(t>61440?-61441:61440)|t,(this._isSync||t>61440)&&await this.sync()}async chown(t,o){if(this.closed)throw ve("EBADF","chown",this.path);this.dirty=!0,XH(this.inode,t,o),this._isSync&&await this.sync()}async utimes(t,o){if(this.closed)throw ve("EBADF","utimes",this.path);this.dirty=!0,this.inode.atimeMs=t,this.inode.mtimeMs=o,this._isSync&&await this.sync()}streamRead(t){if(this.closed)throw ve("EBADF","streamRead",this.path);return this.fs.streamRead(this.internalPath,t)}streamWrite(t){if(this.closed)throw ve("EBADF","write",this.path);if(this.inode.flags&ta.Immutable)throw ve("EPERM","write",this.path);if(this.fs.attributes.has("readonly"))throw ve("EROFS","write",this.path);return this.fs.streamWrite(this.internalPath,t)}}});function Pc(e){if(typeof e=="number")return e;if(!YHe.test(e))throw Se("EINVAL","Invalid flag string: "+e);return QHe(e)}function QHe(e){if(!e.includes("r")&&!e.includes("w")&&!e.includes("a"))throw Se("EINVAL","Invalid flag string: "+e);let t=e.includes("r")?0:64;return e.includes("w")&&(t|=512),e.includes("a")&&(t|=1024),e.includes("+")?t|=2:e.includes("r")||(t|=1),e.includes("s")&&(t|=1052672),e.includes("x")&&(t|=128),t}function a6(e){let t=0;return e&1||(t|=4),(e&1||e&2)&&(t|=2),t}var YHe,U8=x(()=>{d();Ho();bs();YHe=/[rwasx]{1,2}\+?/});function c6(e,t,o,n){let i=typeof o=="string"?{path:o,dest:n,syscall:t.endsWith("Sync")?t.slice(0,-4):t}:o,s=e[t];if(typeof s!="function")throw new TypeError(`${t} is not a function`);return function(...a){try{return s.call(e,...a)}catch(l){throw ui(Object.assign(l,i))}}}function Rle(e,t){return new Proxy(e,{get(o,n){let i=Reflect.get(o,n);return typeof i!="function"?i:function s(...a){try{let l=i.apply(o,a);return l instanceof Promise?l.catch(c=>{if("code"in c)throw ui(Object.assign(c,t));if(c in Ie){let u=ve(c,t);Error.captureStackTrace(u,s)}throw c}):l}catch(l){throw ui(Object.assign(l,t))}}}})}var u6=x(()=>{d();Ho()});function Cb(e,t){if(e[0]!="/"&&(e="/"+e),e=xa.call(this,e),Sx.has(e))throw pr(Se("EINVAL","Mount point is already in use: "+e));t._mountPoint=e,Sx.set(e,t),lx(`Mounted ${t.name} on ${e}`),ea(`${t.name} attributes: ${[...t.attributes].map(([o,n])=>n!=null?o+"="+n:o).join(", ")}`)}function $8(e){if(e[0]!="/"&&(e="/"+e),e=xa.call(this,e),!Sx.has(e)){Xo(e+" is already unmounted");return}Sx.delete(e),ab("Unmounted "+e)}function In(e,t,o){let{root:n}=Ki(t),i={path:e,...o};e=Mt(So(n,e),!0),e=xa.call(t,e);let s=[...Sx].sort((a,l)=>a[0].length>l[0].length?-1:1);for(let[a,l]of s){if(!ZHe(a,e))continue;e=e.slice(a.length>1?a.length:0),e===""&&(e="/");let c=l.attributes.get("case_fold");return c==="lower"&&(e=e.toLowerCase()),c==="upper"&&(e=e.toUpperCase()),{fs:Rle(l,i),path:e,mountPoint:a,root:n}}throw sb(new zn(Ie.EIO,"No file system for "+e))}function d6(e,t){let o=e.usage(),n=o.blockSize||4096;return{type:(t?BigInt:Number)(e.type),bsize:(t?BigInt:Number)(n),ffree:(t?BigInt:Number)(o.freeNodes||4294967295),files:(t?BigInt:Number)(o.totalNodes||4294967295),bavail:(t?BigInt:Number)(o.freeSpace/n),bfree:(t?BigInt:Number)(o.freeSpace/n),blocks:(t?BigInt:Number)(o.totalSpace/n)}}function dz(e){let t=Ki(this);if(!Xae(t.credentials))throw Se("EPERM","Can not chroot() as non-root user");t.root??="/";let o=So(t.root,e);for(let n of t.descriptors?.values()??[]){if(!n.path.startsWith(t.root))throw ve("EBUSY","chroot",n.path);n.path=n.path.slice(t.root.length)}if(o.length>t.root.length)throw Se("EPERM","Can not chroot() outside of current root");t.root=o}function ZHe(e,t){return e==="/"||e===t?!0:(e.endsWith("/")||(e+="/"),t.startsWith(e))}var Sx,Md=x(()=>{d();Ho();Wi();R8();bs();Cd();S8();u6();Ss();Wl();Sx=new Map;Cb("/",K0.create({label:"root"}))});function Ql(e,t,o,n){t=xa.call(e,t);try{let m=In(t,e),g=m.fs.statSync(m.path);if(!tf(g)||o)return{...m,fullPath:t,stats:g};let y=xa.call(e,yo(t),p6.call(e,t));return Ql(e,y,o,n)}catch(m){if(ui(Object.assign(m,{syscall:"stat",path:t})),o)throw m}let{base:i,dir:s}=_i(t),a=s=="/"?"/":Ql(e,s,!1,n).fullPath,l=So(a,i),c=In(l,e),u;try{u=c.fs.statSync(c.path)}catch(m){if(m.code==="ENOENT")return{...c,fullPath:t};throw ui(Object.assign(m,{syscall:"stat",path:l}))}if(!tf(u))return{...c,fullPath:l,stats:u};let p=xa.call(e,a,p6.call(e,l));return Ql(e,p,!1,n)}function nf(e,t){e=Mt(e);let o=jl(t.mode,420),n=Pc(t.flag);e=t.preserveSymlinks?e:Ql(this,e).fullPath;let{fs:i,path:s}=In(e,this),a;try{a=i.statSync(s)}catch{}if(!a){if(!(n&64))throw ve("ENOENT","open",e);let c=i.statSync(yo(s));if(dn&&!Fo(this,c,2))throw ve("EACCES","open",e);if(!Dr(c))throw ve("ENOTDIR","open",e);if(!t.allowDirectory&&o&16384)throw ve("EISDIR","open",e);if(dn&&!Fo(this,c,2))throw ve("EACCES","open",e);let{euid:u,egid:p}=Ki(this).credentials,m=i.createFileSync(s,{mode:o,uid:c.mode&2048?c.uid:u,gid:c.mode&1024?c.gid:p});return new Q0(this,e,i,s,n,m)}if(dn&&(!Fo(this,a,o)||!Fo(this,a,a6(n))))throw ve("EACCES","open",e);if(n&128)throw ve("EEXIST","open",e);let l=new Q0(this,e,i,s,n,a);if(!t.allowDirectory&&a.mode&16384)throw ve("EISDIR","open",e);return n&512&&l.truncateSync(0),l}function p6(e){e=Mt(e);let{fs:t,stats:o,path:n}=Ql(this,e,!0);if(!o)throw ve("ENOENT","readlink",e);if(dn&&!Fo(this,o,4))throw ve("EACCES","readlink",e);if(!tf(o))throw ve("EINVAL","readlink",e);let i=o.size,s=new Uint8Array(i);return t.readSync(n,s,0,i),Sp(s)}function Lle(e,t={}){e=Mt(e);let{fs:o,path:n}=Ql(this,e),{euid:i,egid:s}=Ki(this).credentials,{mode:a=511,recursive:l}=t,c=(m,g,y)=>{if(dn&&!Fo(this,y,2))throw ve("EACCES","mkdir",yo(m));let b=o.mkdirSync(g,{mode:a,uid:y.mode&2048?y.uid:i,gid:y.mode&1024?y.gid:s});return Fs(this,"rename",m),b};if(!l){c(e,n,o.statSync(yo(n)));return}let u=[];for(let m=n,g=e;!o.existsSync(m);m=yo(m),g=yo(g))u.unshift({resolved:m,original:g});if(!u.length)return;let p=[o.statSync(yo(u[0].resolved))];for(let[m,g]of u.entries())p.push(c(g.original,g.resolved,p[m]));return u[0].original}function Ole(e,t={}){e=Mt(e);let{fs:o,path:n}=Ql(this,e),i=o.statSync(n);if(dn&&!Fo(this,i,4))throw ve("EACCES","readdir",e);if(!Dr(i))throw ve("ENOTDIR","readdir",e);let s=o.readdirSync(n),a=[],l=c=>{let u;try{u=o.statSync(So(n,c))}catch(g){if(g.code=="ENOENT")return;throw g}let p=new Eb;if(p.ino=u.ino,p.type=i6(u.mode),p.path=c,p.name=Yi(c),a.push(p),!Dr(u)||!t?.recursive)return;let m=o.readdirSync(So(n,c));for(let g of m)l(So(c,g))};for(let c of s)l(c);return a}function Fle(e,t){e=Mt(e),t=Mt(t);let o={syscall:"rename",path:e,dest:t},n=Ql(this,e,!0,o),i=In(t,this,o);if(n.fs.uuid!==i.fs.uuid)throw ve("EXDEV",o);if(i.path.startsWith(n.path+"/"))throw ve("EBUSY",o);if(!n.stats)throw ve("ENOENT",o);let s=n.fs,a=s.statSync(yo(n.path)),l=s.statSync(yo(i.path)),c;try{c=s.statSync(i.path)}catch(u){if(u.code!="ENOENT")throw u}if(dn&&(!Fo(this,a,4)||!Fo(this,l,2)))throw ve("EACCES",o);if(c&&!Dr(n.stats)&&Dr(c))throw ve("EISDIR",o);if(c&&Dr(n.stats)&&!Dr(c))throw ve("ENOTDIR",o);n.fs.renameSync(n.path,i.path),Fs(this,"rename",e),Fs(this,"change",t)}function Ule(e,t){e=Mt(e),t=Mt(t);let o={syscall:"link",path:t,dest:e},{fs:n,path:i}=In(e,this,o),s=In(t,this,o);if(n.uuid!==s.fs.uuid)throw ve("EXDEV",o);let a=n.statSync(i);if(dn){if(!Fo(this,a,4))throw ve("EACCES",o);let l=n.statSync(yo(i));if(!Fo(this,l,4))throw ve("EACCES",o);let c=n.statSync(yo(s.path));if(!Fo(this,c,2))throw ve("EACCES",o)}return n.linkSync(i,s.path)}var pz=x(()=>{d();Ho();Pi();bs();Cd();ws();Ss();Wl();vx();O8();Ab();U8();Md();Tb()});var Hle,wx,kx,m6=x(()=>{d();Hle=Ml(Yl(),1);Ho();Wi();Ss();O8();z8();H8();wx=class e{ino;type;_name;get name(){let t=Hle.Buffer.from(this._name);return this._encoding=="buffer"?t:t.toString(this._encoding)}_encoding;_parentPath;get parentPath(){return this._parentPath}get path(){return Xo("Dirent.path was removed in Node v24, use parentPath instead"),this._parentPath}static from(t,o){let n=new e,{base:i,dir:s}=_i(t.path);return n._parentPath=s||".",n._name=i,n.ino=t.ino,n.type=t.type,n._encoding=o,n}isFile(){return this.type===Mp.REG}isDirectory(){return this.type===Mp.DIR}isBlockDevice(){return this.type===Mp.BLK}isCharacterDevice(){return this.type===Mp.CHR}isSymbolicLink(){return this.type===Mp.LNK}isFIFO(){return this.type===Mp.FIFO}isSocket(){return this.type===Mp.SOCK}},kx=class{path;context;closed=!1;checkClosed(){if(this.closed)throw Se("EBADF","Can not use closed Dir")}_entries;constructor(t,o){this.path=t,this.context=o}close(t){if(this.closed=!0,!t)return Promise.resolve();t(null)}closeSync(){this.closed=!0}async _read(){return this.checkClosed(),this._entries??=await Z0.call(this.context,this.path,{withFileTypes:!0}),this._entries.length?this._entries.shift()??null:null}read(t){if(!t)return this._read();this._read().then(o=>t(null,o))}readSync(){return this.checkClosed(),this._entries??=Ib.call(this.context,this.path,{withFileTypes:!0}),this._entries.length?this._entries.shift()??null:null}async next(){let t=await this._read();return t?{done:!1,value:t}:(await this.close(),{done:!0,value:void 0})}[Symbol.asyncIterator](){return this}[Symbol.dispose](){this.closed||this.closeSync()}async[Symbol.asyncDispose](){this.closed||await this.close()}}});function XHe(e,t){return Fle.call(this,e,t)}function f6(e){e=Mt(e);try{let{fs:t,path:o}=Ql(this,e);return t.existsSync(o)}catch(t){if(t.errno==Ie.ENOENT)return!1;throw t}}function X0(e,t){e=Mt(e);let{fs:o,path:n}=Ql(this,e),i;try{i=o.statSync(n)}catch(s){throw ui(Object.assign(s,{path:e}))}if(dn&&!Fo(this,i,4))throw ve("EACCES",{syscall:"stat",path:e});return t?.bigint?new Du(i):new xl(i)}function mz(e,t){e=Mt(e);let{base:o,dir:n}=_i(e),{fs:i,path:s}=Ql(this,n),a=c6(i,"statSync",e)(o?So(s,o):s);if(dn&&!Fo(this,a,4))throw ve("EACCES",{syscall:"lstat",path:e});return t?.bigint?new Du(a):new xl(a)}function JHe(e,t=0){let o={stack:[],error:void 0,hasError:!1};try{let n=G8(o,nf.call(this,e,{flag:"r+"}),!1);if(t||=0,t<0)throw ve("EINVAL","truncate",e.toString());n.truncateSync(t)}catch(n){o.error=n,o.hasError=!0}finally{q8(o)}}function zle(e){e=Mt(e);let{fs:t,path:o}=In(e,this);try{if(dn&&!Fo(this,t.statSync(o),2))throw ve("EACCES","unlink");t.unlinkSync(o)}catch(n){throw ui(Object.assign(n,{path:e}))}Fs(this,"rename",e.toString())}function fz(e,t,o=0){return F8(nf.call(this,e,{flag:t,mode:o}))}function g6(e,t,o){return F8(nf.call(this,e,{flag:t,mode:o,preserveSymlinks:!0}))}function Gle(e,t={}){let o={stack:[],error:void 0,hasError:!1};try{let n=Dd(t,null,"r",420);if(Pc(n.flag)&1)throw ve("EBADF","read",e.toString());let s=G8(o,typeof e=="number"?na(this,e):nf.call(this,e.toString(),{flag:n.flag,mode:420,preserveSymlinks:!1}),!1),{size:a}=s.stat(),l=rf.Buffer.alloc(a);return s.readSync(l,0,a,0),n.encoding?l.toString(n.encoding):l}catch(n){o.error=n,o.hasError=!0}finally{q8(o)}}function qle(e,t,o={}){let n={stack:[],error:void 0,hasError:!1};try{let i=Dd(o,"utf8","w+",420),s=Pc(i.flag);if(!(s&1||s&2))throw new zn(Ie.EINVAL,"Flag passed to writeFile must allow for writing");if(typeof t!="string"&&!i.encoding)throw new zn(Ie.EINVAL,"Encoding not specified");let a=typeof t=="string"?rf.Buffer.from(t,i.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);if(!a)throw new zn(Ie.EINVAL,"Data not specified");G8(n,typeof e=="number"?na(this,e):nf.call(this,e.toString(),{flag:s,mode:i.mode,preserveSymlinks:!0}),!1).writeSync(a,0,a.byteLength,0),Fs(this,"change",e.toString())}catch(i){n.error=i,n.hasError=!0}finally{q8(n)}}function VHe(e,t,o={}){let n=Dd(o,"utf8","a+",420),i=Pc(n.flag);if(!(i&1024))throw new zn(Ie.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!n.encoding)throw new zn(Ie.EINVAL,"Encoding not specified");let s=typeof t=="string"?rf.Buffer.from(t,n.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength),a=typeof e=="number"?na(this,e):nf.call(this,Mt(e),{flag:i,mode:n.mode,preserveSymlinks:!0});a.writeSync(s,0,s.byteLength),typeof a!="number"&&a.closeSync()}function eze(e,t){let o=na(this,e).stat();return t?.bigint?new Du(o):new xl(o)}function Db(e){na(this,e).closeSync(),s6(this,e)}function tze(e,t=0){if(t||=0,t<0)throw new zn(Ie.EINVAL);na(this,e).truncateSync(t)}function oze(e){na(this,e).syncSync()}function nze(e){na(this,e).datasyncSync()}function rze(e,t,o,n,i){let s,a,l,c;if(typeof t=="string"){c=typeof o=="number"?o:null;let m=typeof n=="string"?n:"utf8";a=0,s=rf.Buffer.from(t,m),l=s.byteLength}else s=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),a=o,l=n,c=typeof i=="number"?i:null;let u=na(this,e);c??=u.position;let p=u.writeSync(s,a,l,c);return Fs(this,"change",u.path),p}function ize(e,t,o,n,i){let s=na(this,e),a=typeof o=="object"?o.offset:o;if(typeof o=="object"&&(n=o.length,i=o.position),i&&i>Number.MAX_SAFE_INTEGER)throw ve("EINVAL");return typeof i=="bigint"&&(i=Number(i)),i=Number.isSafeInteger(i)?i:s.position,s.readSync(t,a,n,i)}function jle(e,t,o){na(this,e).chownSync(t,o)}function gz(e,t){let o=jl(t,-1);if(o<0)throw new zn(Ie.EINVAL,"Invalid mode.");na(this,e).chmodSync(o)}function hz(e,t,o){na(this,e).utimesSync(Tp(t),Tp(o))}function Wle(e){e=Mt(e);let{fs:t,path:o}=Ql(this,e),n=c6(t,"statSync",e)(o);if(!Dr(n))throw ve("ENOTDIR","rmdir",e);if(dn&&!Fo(this,n,2))throw ve("EACCES","rmdir",e);c6(t,"rmdirSync",e)(o),Fs(this,"rename",e.toString())}function j8(e,t){t=typeof t=="object"?t:{mode:t};let o=jl(t?.mode,511);return Lle.call(this,e,{...t,mode:o})}function Ib(e,t){t=typeof t=="object"?t:{encoding:t},e=Mt(e);let o=[],n=Ole.call(this,e,t??void 0);for(let i of n)t?.withFileTypes?o.push(wx.from(i,t.encoding)):t?.encoding=="buffer"?o.push(rf.Buffer.from(i.path)):o.push(i.path);return o}function sze(e,t){return Ule.call(this,e,t)}function aze(e,t,o="file"){let n={stack:[],error:void 0,hasError:!1};try{if(!["file","dir","junction"].includes(o))throw new TypeError("Invalid symlink type: "+o);t=Mt(t);let i=G8(n,nf.call(this,t,{flag:"wx",mode:420}),!1);i.writeSync(gl(Mt(e,!0))),i.chmodSync(40960)}catch(i){n.error=i,n.hasError=!0}finally{q8(n)}}function lze(e,t){let o=rf.Buffer.from(p6.call(this,e)),n=typeof t=="object"?t?.encoding:t;return n=="buffer"?o:o.toString(n??"utf-8")}function cze(e,t,o){let n={stack:[],error:void 0,hasError:!1};try{G8(n,nf.call(this,e,{flag:"r+",mode:0}),!1).chownSync(t,o)}catch(i){n.error=i,n.hasError=!0}finally{q8(n)}}function uze(e,t,o){let n=g6.call(this,e,"r+");jle.call(this,n,t,o),Db.call(this,n)}function dze(e,t){let o=fz.call(this,e,"r+");gz.call(this,o,t),Db.call(this,o)}function pze(e,t){let o=g6.call(this,e,"r+");gz.call(this,o,t),Db.call(this,o)}function Kle(e,t,o){let n=fz.call(this,e,"r+");hz.call(this,n,t,o),Db.call(this,n)}function mze(e,t,o){let n=g6.call(this,e,"r+");hz.call(this,n,t,o),Db.call(this,n)}function fze(e,t){let o=typeof t=="string"?t:t?.encoding??"utf8";e=Mt(e,!0);let{fullPath:n}=Ql(this,e);if(o=="utf8"||o=="utf-8")return n;let i=rf.Buffer.from(n,"utf-8");return o=="buffer"?i:i.toString(o)}function gze(e,t=384){if(dn&&!Fo(this,X0.call(this,e),t))throw new zn(Ie.EACCES)}function xz(e,t){e=Mt(e);let o;try{o=mz.bind(this)(e)}catch(n){if(n.code!="ENOENT"||!t?.force)throw n}if(o)switch(o.mode&61440){case 16384:if(t?.recursive)for(let n of Ib.call(this,e))xz.call(this,So(e,n),t);Wle.call(this,e);break;case 32768:case 40960:case 24576:case 8192:zle.call(this,e);break;case 4096:case 49152:default:throw ve("ENOSYS","rm",e)}}function hze(e,t){let o=typeof t=="object"?t?.encoding:t||"utf8",n=xb(e);return j8.call(this,n),o=="buffer"?rf.Buffer.from(n):n}function xze(e,t){let o=xb(e);j8.call(this,o);let n=()=>xz(o,{recursive:!0,force:!0});return{path:o,remove:n,[Symbol.dispose]:n}}function Yle(e,t,o){if(e=Mt(e),t=Mt(t),o&&o&1&&f6(t))throw ve("EEXIST","copyFile",t);qle.call(this,t,Gle(e)),Fs(this,"rename",t.toString())}function yze(e,t,o){let n=na(this,e),i=0;for(let s of t)i+=n.readSync(s,0,s.byteLength,o+i);return i}function bze(e,t,o){let n=na(this,e),i=0;for(let s of t)i+=n.writeSync(new Uint8Array(s.buffer),0,s.byteLength,o+i);return i}function vze(e,t){return e=Mt(e),new kx(e,this)}function Qle(e,t,o){e=Mt(e),t=Mt(t);let n=mz.call(this,e);if(o?.errorOnExist&&f6.call(this,t))throw ve("EEXIST","cp",t);switch(n.mode&61440){case 16384:if(!o?.recursive)throw ve("EISDIR","cp",e);j8.call(this,t,{recursive:!0});for(let i of Ib.call(this,e,{withFileTypes:!0}))o.filter&&!o.filter(So(e,i.name),So(t,i.name))||Qle.call(this,So(e,i.name),So(t,i.name),o);break;case 32768:case 40960:Yle.call(this,e,t);break;case 24576:case 8192:case 4096:case 49152:default:throw ve("ENOSYS","cp",e)}o?.preserveTimestamps&&Kle.call(this,t,n.atime,n.mtime)}function Sze(e,t){e=Mt(e);let{fs:o}=In(e,this);return d6(o,t?.bigint)}function wze(e,t={}){e=Array.isArray(e)?e:[e];let{cwd:o="/",withFileTypes:n=!1,exclude:i=()=>!1}=t,s=e.map(hb),a=[];function l(c){let u=Ib(c,{withFileTypes:n,encoding:"utf8"});for(let p of u){let m=n?So(p.parentPath,p.name):c+"/"+p;(typeof i!="function"?i.some(g=>D8(g,m)):i(n?p:m))||(X0(m).isDirectory()&&s.some(g=>g.source.includes(".*"))&&l(m),s.some(g=>g.test(m.replace(/^\/+/g,"")))&&a.push(n?p:m.replace(/^\/+/g,"")))}}return l(o),a}var rf,G8,q8,H8=x(()=>{d();rf=Ml(Yl(),1);Ho();Pi();bs();u6();ws();Ss();Wl();vx();Ab();U8();Md();pz();Tb();m6();gx();G8=function(e,t,o){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n,i;if(o){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],o&&(i=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(s){return Promise.reject(s)}}),e.stack.push({value:t,dispose:n,async:o})}else o&&e.stack.push({async:!0});return t},q8=(function(e){return function(t){function o(a){t.error=t.hasError?new e(a,t.error,"An error was suppressed during disposal."):a,t.hasError=!0}var n,i=0;function s(){for(;n=t.stack.pop();)try{if(!n.async&&i===1)return i=0,t.stack.push(n),Promise.resolve().then(s);if(n.dispose){var a=n.dispose.call(n.value);if(n.async)return i|=2,Promise.resolve(a).then(s,function(l){return o(l),s()})}else i|=1}catch(l){o(l)}if(i===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return s()}})(typeof SuppressedError=="function"?SuppressedError:function(e,t,o){var n=new Error(o);return n.name="SuppressedError",n.error=e,n.suppressed=t,n})});function kze(e,t){let o=Mt(e);J0.has(o)||J0.set(o,new Set),J0.get(o).add(t)}function Eze(e,t){let o=Mt(e);J0.has(o)&&(J0.get(o).delete(t),J0.get(o).size===0&&J0.delete(o))}function Fs(e,t,o){let n=Ki(e);n&&(o=So(n.root??"/",o)),o=Mt(o);for(let i=o;i!="/";i=yo(i)){let s=J0.get(i);if(s)for(let a of s)a.emit("change",t,fx.call(a._context,i,o)||Yi(o))}}var h6,Mb,x6,J0,Tb=x(()=>{d();y8();Ho();Cd();gx();H8();Ss();Wl();h6=class extends U0.default{_context;path;off(t,o,n,i){return super.off(t,o,n,i)}removeListener(t,o,n,i){return super.removeListener(t,o,n,i)}constructor(t,o){super(),this._context=t,this.path=o}setMaxListeners(){throw ve("ENOSYS","Watcher.setMaxListeners")}getMaxListeners(){throw ve("ENOSYS","Watcher.getMaxListeners")}prependListener(){throw ve("ENOSYS","Watcher.prependListener")}prependOnceListener(){throw ve("ENOSYS","Watcher.prependOnceListener")}rawListeners(){throw ve("ENOSYS","Watcher.rawListeners")}ref(){return this}unref(){return this}},Mb=class extends h6{options;realpath;constructor(t,o,n){let i=Ki(t);super(i,o),this.options=n,this.realpath=So(i.root,o),kze(this.realpath,this)}close(){super.emit("close"),Eze(this.realpath,this)}[Symbol.dispose](){this.close()}},x6=class extends h6{options;intervalId;previous;constructor(t,o,n){super(t,o),this.options=n,this.start()}onInterval(){try{let t=X0(this.path);mle(this.previous,t)||(this.emit("change",t,this.previous),this.previous=t)}catch(t){this.emit("error",t)}}start(){let t=this.options.interval||5e3;try{this.previous=X0(this.path)}catch(o){this.emit("error",o);return}this.intervalId=setInterval(this.onInterval.bind(this),t),!this.options.persistent&&typeof this.intervalId=="object"&&this.intervalId.unref()}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=void 0),this.removeAllListeners()}},J0=new Map});async function _c(e,t,o,n){if(t=xa.call(e,t),o){let m=In(t,e,n),g=await m.fs.stat(m.path).catch(()=>{});return{...m,fullPath:t,stats:g}}try{let m=In(t,e),g=await m.fs.stat(m.path);if(!tf(g))return{...m,fullPath:t,stats:g};let y=xa.call(e,yo(t),await y6.call(e,t));return await _c(e,y,o,n)}catch{}let{base:i,dir:s}=_i(t),a=s=="/"?"/":(await _c(e,s,!1,n)).fullPath,l=So(a,i),c=In(l,e),u=await c.fs.stat(c.path).catch(m=>{if(m.code!="ENOENT")throw ui(Object.assign(m,{syscall:"stat",path:l}))});if(!u)return{...c,fullPath:t};if(!tf(u))return{...c,fullPath:l,stats:u};let p=xa.call(e,a,await y6.call(e,l));return await _c(e,p,!1,n)}async function Ex(e,t,o){t=Mt(t);let n=jl(o.mode,420),i=Pc(o.flag),s={syscall:"open",path:t},{fs:a,path:l,stats:c}=await _c(e,t,o.preserveSymlinks,s);if(!c){if(!(i&64))throw ve("ENOENT",s);let p=await a.stat(yo(l));if(dn&&!Fo(e,p,2))throw ve("EACCES","open",yo(t));if(!Dr(p))throw ve("ENOTDIR","open",yo(t));if(!o.allowDirectory&&n&16384)throw ve("EISDIR","open",t);let{euid:m,egid:g}=Ki(e).credentials,y=await a.createFile(l,{mode:n,uid:p.mode&2048?p.uid:m,gid:p.mode&1024?p.gid:g});return new Q0(e,t,a,l,i,y)}if(dn&&!Fo(e,c,a6(i)))throw ve("EACCES",s);if(i&128)throw ve("EEXIST",s);let u=new Q0(e,t,a,l,i,c);if(!o.allowDirectory&&n&16384)throw ve("EISDIR","open",t);return i&512&&await u.truncate(0),u}async function y6(e){e=Mt(e);let t={syscall:"readlink",path:e},{fs:o,stats:n,path:i}=await _c(this,e,!0,t);if(!n)throw ve("ENOENT",t);if(dn&&!Fo(this,n,4))throw ve("EACCES",t);if(!tf(n))throw ve("EINVAL",t);let s=n.size,a=new Uint8Array(s);return await o.read(i,a,0,s),Sp(a)}async function Zle(e,t={}){e=Mt(e);let{euid:o,egid:n}=Ki(this).credentials,{mode:i=511,recursive:s}=t,{fs:a,path:l}=In(e,this,{syscall:"mkdir"}),c=async(g,y,b)=>{if(dn&&!Fo(this,b,2))throw ve("EACCES","mkdir",g);let v=await a.mkdir(y,{mode:i,uid:b.mode&2048?b.uid:o,gid:b.mode&1024?b.gid:n});return Fs(this,"rename",g),v};if(!s){await c(e,l,await a.stat(yo(l)));return}let u=[],p=e;for(let g=l;!await a.exists(g);g=yo(g),p=yo(p))u.unshift([p,g]);if(!u.length)return;let m=[await a.stat(yo(u[0][1]))];for(let[g,[y,b]]of u.entries())m.push(await c(y,b,m[g]));return u[0][0]}async function Xle(e,t={}){e=Mt(e);let o={syscall:"readdir",path:e},{fs:n,path:i,stats:s}=await _c(this,e,!1,o);if(!s)throw ve("ENOENT",o);if(dn&&!Fo(this,s,4))throw ve("EACCES",o);if(!Dr(s))throw ve("ENOTDIR",o);let a=await n.readdir(i),l=[],c=async u=>{let p=await n.stat(So(i,u)).catch(y=>{if(y.code!="ENOENT")throw y});if(!p)return;let m=new Eb;if(m.ino=p.ino,m.type=i6(p.mode),m.path=u,m.name=Yi(u),l.push(m),!t.recursive||!Dr(p))return;let g=await n.readdir(So(i,u));for(let y of g)await c(So(u,y))};return await Promise.all(a.map(c)),l}async function Jle(e,t){e=Mt(e),t=Mt(t);let o={syscall:"rename",path:e,dest:t},n=await _c(this,e,!0,o),i=In(t,this,o);if(n.fs.uuid!==i.fs.uuid)throw ve("EXDEV",o);if(i.path.startsWith(n.path+"/"))throw ve("EBUSY",o);if(!n.stats)throw ve("ENOENT",o);let s=n.fs,a=await s.stat(yo(n.path)),l=await s.stat(yo(i.path)),c=await s.stat(i.path).catch(u=>{if(u.code=="ENOENT")return null;throw u});if(dn&&(!Fo(this,a,4)||!Fo(this,l,2)))throw ve("EACCES",o);if(c&&!Dr(n.stats)&&Dr(c))throw ve("EISDIR",o);if(c&&Dr(n.stats)&&!Dr(c))throw ve("ENOTDIR",o);await n.fs.rename(n.path,i.path),Fs(this,"rename",e),Fs(this,"change",t)}async function Vle(e,t){e=Mt(e),t=Mt(t);let o={syscall:"link",path:t,dest:e},{fs:n,path:i}=In(e,this,o),s=In(t,this,o);if(n.uuid!=s.fs.uuid)throw ve("EXDEV",o);let a=await n.stat(i);if(dn){if(!Fo(this,a,4))throw ve("EACCES",o);let l=await n.stat(yo(i));if(!Fo(this,l,4))throw ve("EACCES",o);let c=await n.stat(yo(s.path));if(!Fo(this,c,2))throw ve("EACCES",o)}return await n.link(i,s.path)}var yz=x(()=>{d();Ho();Pi();bs();Cd();ws();Ss();Wl();vx();O8();Ab();U8();Md();Tb()});function ece(e,t,o,n){return"input"in e?new v6(e.input,e.output,e.completer,e.terminal):new v6(e,t,o,n)}function b6(e,t){return e.write(t>=0?"\r\x1B[K":"\x1B[K"),!0}function Nu(e,t,o){if(!e.write)return!1;let n="";return t<0?n+=`\x1B[${-t}D`:t>0&&(n+=`\x1B[${t}C`),o<0?n+=`\x1B[${-o}A`:o>0&&(n+=`\x1B[${o}B`),n&&e.write(n),!0}var v6,tce=x(()=>{d();y8();Wi();v6=class extends U0.default{input;output;terminal;line="";_cursor=0;get cursor(){return this._cursor}_buffer="";_closed=!1;_paused=!1;_prompt="";_history=[];_historyIndex=-1;_currentLine="";constructor(t,o,n,i=!1){super(),this.input=t,this.output=o,this.terminal=i,this.input.on("data",this._onData),this.input.on("end",this.close.bind(this)),this.input.on("close",this.close.bind(this))}_onData=t=>{if(!(this._paused||this._closed)){this._buffer+=typeof t=="string"?t:t.toString("utf8");for(let o=this._buffer.indexOf(`
`);o>=0;o=this._buffer.indexOf(`
`)){let n=this._buffer.substring(0,o);n.endsWith("\r")&&(n=n.substring(0,n.length-1)),this._buffer=this._buffer.substring(o+1),this.line=n,n.trim()&&!n.trim().match(/^\s*$/)&&this._history.at(-1)!=n&&(this._history.push(n),this._historyIndex=this._history.length,this.emit("history",this._history)),this.emit("line",n)}}};close(){if(!this._closed){if(this._closed=!0,this.input?.removeAllListeners?.(),this._buffer.length){let t=this._buffer;this._buffer="",this.line=t,this.emit("line",t)}this.emit("history",this._history),this.emit("close"),this.removeAllListeners()}}pause(){return this._paused?this:(this._paused=!0,"pause"in this.input&&this.input.pause(),this.emit("pause"),this)}resume(){return this._paused?(this._paused=!1,"resume"in this.input&&this.input.resume(),this.emit("resume"),this):this}setPrompt(t){this._prompt=t}getPrompt(){return this._prompt}prompt(t){if(!this.output)return;if(!t){this.output.write(this._prompt);return}let{cols:o}=this.getCursorPos();this.output.write(this._prompt),this._cursor=o}write(t,o){if(!this._closed){if(t){let n=typeof t=="string"?t:t.toString("utf8");this._onData(n)}if(!(!o||!this.terminal))switch((o.ctrl?"^":"")+o.name){case"^c":this.emit("SIGINT");break;case"^z":this.emit("SIGTSTP");break;case"^q":this.emit("SIGCONT");break;case"home":case"^a":if(!this.output)return;Nu(this.output,-this._cursor,0),this._cursor=0,this._cursor=0;break;case"^e":case"end":{if(!this.output)return;let n=this.line.length-this._cursor;if(!n)return;Nu(this.output,n,0),this._cursor=this.line.length,this._cursor=this.line.length;break}case"^k":{if(!this.output||this._cursor>=this.line.length)return;let n=this.line.slice(0,this._cursor);b6(this.output,1),this.line=n;break}case"^u":{if(!this.output||!this._cursor)return;let n=this.line.slice(this._cursor);b6(this.output,0),Nu(this.output,0,0),this.output.write(this._prompt+n),this.line=n,this._cursor=0,this._cursor=0;break}case"^w":{if(!this.output||!this._cursor)return;let n=this._cursor-1;for(;n>=0&&this.line[n]===" ";)n--;for(;n>=0&&this.line[n]!==" ";)n--;let i=this.line.slice(0,n+1)+this.line.slice(this._cursor),s=n+1;this._renderLine(i),this._cursor=s,this._cursor=s,Nu(this.output,-i.length,0),Nu(this.output,s,0);break}case"^return":case"^enter":this._onData(`
`);break;case"return":case"enter":this._onData((t?typeof t=="string"?t:t.toString("utf8"):"")+`
`);break;case"up":case"down":{if(!this.output||!this._history.length)return;if(this._historyIndex===this._history.length&&(this._currentLine=this.line||""),o.name=="up"&&this._historyIndex>0)this._historyIndex--;else if(o.name=="down"&&this._historyIndex<this._history.length-1)this._historyIndex++;else if(o.name=="down"&&this._historyIndex==this._history.length-1){this._historyIndex=this._history.length,this._renderLine(this._currentLine);return}else return;let n=this._history[this._historyIndex];this._renderLine(n);break}case"left":case"right":{let n=o.name=="left"?-1:1;if(!this.output)return;let i=Math.max(0,Math.min(this.line.length,this._cursor+n));if(i==this._cursor)return;Nu(this.output,n,0),this._cursor=i,this._cursor=i;break}case"backspace":{if(!this.output||!this._cursor)return;let n=this.line.slice(0,this._cursor-1)+this.line.slice(this._cursor);this._renderLine(n),this._cursor=--this._cursor,this._cursor>0&&(Nu(this.output,-this._cursor,0),Nu(this.output,this._cursor,0));break}case"delete":{if(!this.output||this._cursor>=this.line.length)return;let n=this.line.slice(0,this._cursor)+this.line.slice(this._cursor+1);b6(this.output,0),Nu(this.output,0,0),this.output.write(this._prompt+n),this.line=n,Nu(this.output,-n.length,0),Nu(this.output,this._cursor,0);break}}}}_renderLine(t){this.output&&(b6(this.output,0),Nu(this.output,0,0),this.output.write(this._prompt+t),this.line=t,this._cursor=t.length,this._cursor=t.length)}question(t,o,n){let i=typeof o=="function"?o:n;if(this._closed||!this.output){i("");return}this.output.write(t),this.once("line",i)}getCursorPos(){return{rows:0,cols:this.cursor}}prependListener(t,o){let n=this.listeners(t);return this.removeAllListeners(t),this.on(t,o),n.forEach(this.on.bind(this,t)),this}prependOnceListener(t,o){let n=this.listeners(t);return this.removeAllListeners(t),this.once(t,o),n.forEach(this.on.bind(this,t)),this}setMaxListeners(){return Xo("Interface.prototype.setMaxListeners is not supported"),this}getMaxListeners(){return Xo("Interface.prototype.getMaxListeners is not supported"),10}[Symbol.asyncIterator](){let t=!1;return{next:async()=>{if(t)return{done:t,value:void 0};let{resolve:o,promise:n}=Promise.withResolvers();return this.once("line",i=>o({value:i,done:!1})),this.once("close",()=>{t=!0,o({value:void 0,done:t})}),n},return:async o=>t?{done:t,value:o}:(t=!0,this.close(),{done:t,value:o}),throw:async o=>{throw t||(t=!0,this.close()),o},[Symbol.asyncIterator](){return this},[Symbol.asyncDispose]:async()=>{t||(t=!0,this.close())}}}[Symbol.dispose](){this.close()}async[Symbol.asyncDispose](){if(this._closed)return;let{resolve:t,promise:o}=Promise.withResolvers();this.once("close",()=>t()),this.close(),await o}rawListeners(t){return this.listeners(t)}}});var di=Ro((mHt,oce)=>{"use strict";d();var bz=class extends Error{constructor(t){if(!Array.isArray(t))throw new TypeError(`Expected input to be an Array, got ${typeof t}`);let o="";for(let n=0;n<t.length;n++)o+=`    ${t[n].stack}
`;super(o),this.name="AggregateError",this.errors=t}};oce.exports={AggregateError:bz,ArrayIsArray(e){return Array.isArray(e)},ArrayPrototypeIncludes(e,t){return e.includes(t)},ArrayPrototypeIndexOf(e,t){return e.indexOf(t)},ArrayPrototypeJoin(e,t){return e.join(t)},ArrayPrototypeMap(e,t){return e.map(t)},ArrayPrototypePop(e,t){return e.pop(t)},ArrayPrototypePush(e,t){return e.push(t)},ArrayPrototypeSlice(e,t,o){return e.slice(t,o)},Error,FunctionPrototypeCall(e,t,...o){return e.call(t,...o)},FunctionPrototypeSymbolHasInstance(e,t){return Function.prototype[Symbol.hasInstance].call(e,t)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(e,t){return Object.defineProperties(e,t)},ObjectDefineProperty(e,t,o){return Object.defineProperty(e,t,o)},ObjectGetOwnPropertyDescriptor(e,t){return Object.getOwnPropertyDescriptor(e,t)},ObjectKeys(e){return Object.keys(e)},ObjectSetPrototypeOf(e,t){return Object.setPrototypeOf(e,t)},Promise,PromisePrototypeCatch(e,t){return e.catch(t)},PromisePrototypeThen(e,t,o){return e.then(t,o)},PromiseReject(e){return Promise.reject(e)},PromiseResolve(e){return Promise.resolve(e)},ReflectApply:Reflect.apply,RegExpPrototypeTest(e,t){return e.test(t)},SafeSet:Set,String,StringPrototypeSlice(e,t,o){return e.slice(t,o)},StringPrototypeToLowerCase(e){return e.toLowerCase()},StringPrototypeToUpperCase(e){return e.toUpperCase()},StringPrototypeTrim(e){return e.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(e,t,o){return e.set(t,o)},Boolean,Uint8Array}});var vz=Ro((gHt,nce)=>{"use strict";d();nce.exports={format(e,...t){return e.replace(/%([sdifj])/g,function(...[o,n]){let i=t.shift();return n==="f"?i.toFixed(6):n==="j"?JSON.stringify(i):n==="s"&&typeof i=="object"?`${i.constructor!==Object?i.constructor.name:""} {}`.trim():i.toString()})},inspect(e){switch(typeof e){case"string":if(e.includes("'"))if(e.includes('"')){if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}else return`"${e}"`;return`'${e}'`;case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}}}});var Oa=Ro((xHt,sce)=>{"use strict";d();var{format:Cze,inspect:S6}=vz(),{AggregateError:Tze}=di(),Ize=globalThis.AggregateError||Tze,Dze=Symbol("kIsNodeError"),Mze=["string","function","number","object","Function","Object","boolean","bigint","symbol"],Nze=/^([A-Z][a-z0-9]*)+$/,Bze="__node_internal_",w6={};function Ax(e,t){if(!e)throw new w6.ERR_INTERNAL_ASSERTION(t)}function rce(e){let t="",o=e.length,n=e[0]==="-"?1:0;for(;o>=n+4;o-=3)t=`_${e.slice(o-3,o)}${t}`;return`${e.slice(0,o)}${t}`}function Pze(e,t,o){if(typeof t=="function")return Ax(t.length<=o.length,`Code: ${e}; The provided arguments length (${o.length}) does not match the required ones (${t.length}).`),t(...o);let n=(t.match(/%[dfijoOs]/g)||[]).length;return Ax(n===o.length,`Code: ${e}; The provided arguments length (${o.length}) does not match the required ones (${n}).`),o.length===0?t:Cze(t,...o)}function ba(e,t,o){o||(o=Error);class n extends o{constructor(...s){super(Pze(e,t,s))}toString(){return`${this.name} [${e}]: ${this.message}`}}Object.defineProperties(n.prototype,{name:{value:o.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${e}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),n.prototype.code=e,n.prototype[Dze]=!0,w6[e]=n}function ice(e){let t=Bze+e.name;return Object.defineProperty(e,"name",{value:t}),e}function _ze(e,t){if(e&&t&&e!==t){if(Array.isArray(t.errors))return t.errors.push(e),t;let o=new Ize([t,e],t.message);return o.code=t.code,o}return e||t}var Sz=class extends Error{constructor(t="The operation was aborted",o=void 0){if(o!==void 0&&typeof o!="object")throw new w6.ERR_INVALID_ARG_TYPE("options","Object",o);super(t,o),this.code="ABORT_ERR",this.name="AbortError"}};ba("ERR_ASSERTION","%s",Error);ba("ERR_INVALID_ARG_TYPE",(e,t,o)=>{Ax(typeof e=="string","'name' must be a string"),Array.isArray(t)||(t=[t]);let n="The ";e.endsWith(" argument")?n+=`${e} `:n+=`"${e}" ${e.includes(".")?"property":"argument"} `,n+="must be ";let i=[],s=[],a=[];for(let c of t)Ax(typeof c=="string","All expected entries have to be of type string"),Mze.includes(c)?i.push(c.toLowerCase()):Nze.test(c)?s.push(c):(Ax(c!=="object",'The value "object" should be written as "Object"'),a.push(c));if(s.length>0){let c=i.indexOf("object");c!==-1&&(i.splice(i,c,1),s.push("Object"))}if(i.length>0){switch(i.length){case 1:n+=`of type ${i[0]}`;break;case 2:n+=`one of type ${i[0]} or ${i[1]}`;break;default:{let c=i.pop();n+=`one of type ${i.join(", ")}, or ${c}`}}(s.length>0||a.length>0)&&(n+=" or ")}if(s.length>0){switch(s.length){case 1:n+=`an instance of ${s[0]}`;break;case 2:n+=`an instance of ${s[0]} or ${s[1]}`;break;default:{let c=s.pop();n+=`an instance of ${s.join(", ")}, or ${c}`}}a.length>0&&(n+=" or ")}switch(a.length){case 0:break;case 1:a[0].toLowerCase()!==a[0]&&(n+="an "),n+=`${a[0]}`;break;case 2:n+=`one of ${a[0]} or ${a[1]}`;break;default:{let c=a.pop();n+=`one of ${a.join(", ")}, or ${c}`}}if(o==null)n+=`. Received ${o}`;else if(typeof o=="function"&&o.name)n+=`. Received function ${o.name}`;else if(typeof o=="object"){var l;if((l=o.constructor)!==null&&l!==void 0&&l.name)n+=`. Received an instance of ${o.constructor.name}`;else{let c=S6(o,{depth:-1});n+=`. Received ${c}`}}else{let c=S6(o,{colors:!1});c.length>25&&(c=`${c.slice(0,25)}...`),n+=`. Received type ${typeof o} (${c})`}return n},TypeError);ba("ERR_INVALID_ARG_VALUE",(e,t,o="is invalid")=>{let n=S6(t);return n.length>128&&(n=n.slice(0,128)+"..."),`The ${e.includes(".")?"property":"argument"} '${e}' ${o}. Received ${n}`},TypeError);ba("ERR_INVALID_RETURN_VALUE",(e,t,o)=>{var n;let i=o!=null&&(n=o.constructor)!==null&&n!==void 0&&n.name?`instance of ${o.constructor.name}`:`type ${typeof o}`;return`Expected ${e} to be returned from the "${t}" function but got ${i}.`},TypeError);ba("ERR_MISSING_ARGS",(...e)=>{Ax(e.length>0,"At least one arg needs to be specified");let t,o=e.length;switch(e=(Array.isArray(e)?e:[e]).map(n=>`"${n}"`).join(" or "),o){case 1:t+=`The ${e[0]} argument`;break;case 2:t+=`The ${e[0]} and ${e[1]} arguments`;break;default:{let n=e.pop();t+=`The ${e.join(", ")}, and ${n} arguments`}break}return`${t} must be specified`},TypeError);ba("ERR_OUT_OF_RANGE",(e,t,o)=>{Ax(t,'Missing "range" argument');let n;if(Number.isInteger(o)&&Math.abs(o)>2**32)n=rce(String(o));else if(typeof o=="bigint"){n=String(o);let i=BigInt(2)**BigInt(32);(o>i||o<-i)&&(n=rce(n)),n+="n"}else n=S6(o);return`The value of "${e}" is out of range. It must be ${t}. Received ${n}`},RangeError);ba("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);ba("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);ba("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);ba("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);ba("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);ba("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);ba("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);ba("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);ba("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);ba("ERR_STREAM_WRITE_AFTER_END","write after end",Error);ba("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);sce.exports={AbortError:Sz,aggregateTwoErrors:ice(_ze),hideStackFrames:ice,codes:w6}});var Nb=Ro((bHt,k6)=>{"use strict";d();var{AbortController:ace,AbortSignal:Rze}=typeof self<"u"?self:typeof window<"u"?window:void 0;k6.exports=ace;k6.exports.AbortSignal=Rze;k6.exports.default=ace});var W8=Ro((SHt,wz)=>{"use strict";d();var Bb=typeof Reflect=="object"?Reflect:null,lce=Bb&&typeof Bb.apply=="function"?Bb.apply:function(t,o,n){return Function.prototype.apply.call(t,o,n)},E6;Bb&&typeof Bb.ownKeys=="function"?E6=Bb.ownKeys:Object.getOwnPropertySymbols?E6=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:E6=function(t){return Object.getOwnPropertyNames(t)};function Lze(e){console&&console.warn&&console.warn(e)}var uce=Number.isNaN||function(t){return t!==t};function xr(){xr.init.call(this)}wz.exports=xr;wz.exports.once=$ze;xr.EventEmitter=xr;xr.prototype._events=void 0;xr.prototype._eventsCount=0;xr.prototype._maxListeners=void 0;var cce=10;function A6(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(xr,"defaultMaxListeners",{enumerable:!0,get:function(){return cce},set:function(e){if(typeof e!="number"||e<0||uce(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");cce=e}});xr.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};xr.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||uce(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function dce(e){return e._maxListeners===void 0?xr.defaultMaxListeners:e._maxListeners}xr.prototype.getMaxListeners=function(){return dce(this)};xr.prototype.emit=function(t){for(var o=[],n=1;n<arguments.length;n++)o.push(arguments[n]);var i=t==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var a;if(o.length>0&&(a=o[0]),a instanceof Error)throw a;var l=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw l.context=a,l}var c=s[t];if(c===void 0)return!1;if(typeof c=="function")lce(c,this,o);else for(var u=c.length,p=hce(c,u),n=0;n<u;++n)lce(p[n],this,o);return!0};function pce(e,t,o,n){var i,s,a;if(A6(o),s=e._events,s===void 0?(s=e._events=Object.create(null),e._eventsCount=0):(s.newListener!==void 0&&(e.emit("newListener",t,o.listener?o.listener:o),s=e._events),a=s[t]),a===void 0)a=s[t]=o,++e._eventsCount;else if(typeof a=="function"?a=s[t]=n?[o,a]:[a,o]:n?a.unshift(o):a.push(o),i=dce(e),i>0&&a.length>i&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=a.length,Lze(l)}return e}xr.prototype.addListener=function(t,o){return pce(this,t,o,!1)};xr.prototype.on=xr.prototype.addListener;xr.prototype.prependListener=function(t,o){return pce(this,t,o,!0)};function Oze(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function mce(e,t,o){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:o},i=Oze.bind(n);return i.listener=o,n.wrapFn=i,i}xr.prototype.once=function(t,o){return A6(o),this.on(t,mce(this,t,o)),this};xr.prototype.prependOnceListener=function(t,o){return A6(o),this.prependListener(t,mce(this,t,o)),this};xr.prototype.removeListener=function(t,o){var n,i,s,a,l;if(A6(o),i=this._events,i===void 0)return this;if(n=i[t],n===void 0)return this;if(n===o||n.listener===o)--this._eventsCount===0?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||o));else if(typeof n!="function"){for(s=-1,a=n.length-1;a>=0;a--)if(n[a]===o||n[a].listener===o){l=n[a].listener,s=a;break}if(s<0)return this;s===0?n.shift():Fze(n,s),n.length===1&&(i[t]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",t,l||o)}return this};xr.prototype.off=xr.prototype.removeListener;xr.prototype.removeAllListeners=function(t){var o,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[t]),this;if(arguments.length===0){var s=Object.keys(n),a;for(i=0;i<s.length;++i)a=s[i],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(o=n[t],typeof o=="function")this.removeListener(t,o);else if(o!==void 0)for(i=o.length-1;i>=0;i--)this.removeListener(t,o[i]);return this};function fce(e,t,o){var n=e._events;if(n===void 0)return[];var i=n[t];return i===void 0?[]:typeof i=="function"?o?[i.listener||i]:[i]:o?Uze(i):hce(i,i.length)}xr.prototype.listeners=function(t){return fce(this,t,!0)};xr.prototype.rawListeners=function(t){return fce(this,t,!1)};xr.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):gce.call(e,t)};xr.prototype.listenerCount=gce;function gce(e){var t=this._events;if(t!==void 0){var o=t[e];if(typeof o=="function")return 1;if(o!==void 0)return o.length}return 0}xr.prototype.eventNames=function(){return this._eventsCount>0?E6(this._events):[]};function hce(e,t){for(var o=new Array(t),n=0;n<t;++n)o[n]=e[n];return o}function Fze(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function Uze(e){for(var t=new Array(e.length),o=0;o<t.length;++o)t[o]=e[o].listener||e[o];return t}function $ze(e,t){return new Promise(function(o,n){function i(a){e.removeListener(t,s),n(a)}function s(){typeof e.removeListener=="function"&&e.removeListener("error",i),o([].slice.call(arguments))}xce(e,t,s,{once:!0}),t!=="error"&&Hze(e,i,{once:!0})})}function Hze(e,t,o){typeof e.on=="function"&&xce(e,"error",t,o)}function xce(e,t,o,n){if(typeof e.on=="function")n.once?e.once(t,o):e.on(t,o);else if(typeof e.addEventListener=="function")e.addEventListener(t,function i(s){n.once&&e.removeEventListener(t,i),o(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}});var yl=Ro((kHt,Ez)=>{"use strict";d();var zze=Yl(),{format:Gze,inspect:qze}=vz(),{codes:{ERR_INVALID_ARG_TYPE:kz}}=Oa(),{kResistStopPropagation:jze,AggregateError:Wze,SymbolDispose:Kze}=di(),Yze=globalThis.AbortSignal||Nb().AbortSignal,Qze=globalThis.AbortController||Nb().AbortController,Zze=Object.getPrototypeOf(async function(){}).constructor,yce=globalThis.Blob||zze.Blob,Xze=typeof yce<"u"?function(t){return t instanceof yce}:function(t){return!1},bce=(e,t)=>{if(e!==void 0&&(e===null||typeof e!="object"||!("aborted"in e)))throw new kz(t,"AbortSignal",e)},Jze=(e,t)=>{if(typeof e!="function")throw new kz(t,"Function",e)};Ez.exports={AggregateError:Wze,kEmptyObject:Object.freeze({}),once(e){let t=!1;return function(...o){t||(t=!0,e.apply(this,o))}},createDeferredPromise:function(){let e,t;return{promise:new Promise((n,i)=>{e=n,t=i}),resolve:e,reject:t}},promisify(e){return new Promise((t,o)=>{e((n,...i)=>n?o(n):t(...i))})},debuglog(){return function(){}},format:Gze,inspect:qze,types:{isAsyncFunction(e){return e instanceof Zze},isArrayBufferView(e){return ArrayBuffer.isView(e)}},isBlob:Xze,deprecate(e,t){return e},addAbortListener:W8().addAbortListener||function(t,o){if(t===void 0)throw new kz("signal","AbortSignal",t);bce(t,"signal"),Jze(o,"listener");let n;return t.aborted?queueMicrotask(()=>o()):(t.addEventListener("abort",o,{__proto__:null,once:!0,[jze]:!0}),n=()=>{t.removeEventListener("abort",o)}),{__proto__:null,[Kze](){var i;(i=n)===null||i===void 0||i()}}},AbortSignalAny:Yze.any||function(t){if(t.length===1)return t[0];let o=new Qze,n=()=>o.abort();return t.forEach(i=>{bce(i,"signals"),i.addEventListener("abort",n,{once:!0})}),o.signal.addEventListener("abort",()=>{t.forEach(i=>i.removeEventListener("abort",n))},{once:!0}),o.signal}};Ez.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")});var _b=Ro((AHt,Dce)=>{"use strict";d();var{ArrayIsArray:Cz,ArrayPrototypeIncludes:kce,ArrayPrototypeJoin:Ece,ArrayPrototypeMap:Vze,NumberIsInteger:Tz,NumberIsNaN:eGe,NumberMAX_SAFE_INTEGER:tGe,NumberMIN_SAFE_INTEGER:oGe,NumberParseInt:nGe,ObjectPrototypeHasOwnProperty:rGe,RegExpPrototypeExec:Ace,String:iGe,StringPrototypeToUpperCase:sGe,StringPrototypeTrim:aGe}=di(),{hideStackFrames:Bu,codes:{ERR_SOCKET_BAD_PORT:lGe,ERR_INVALID_ARG_TYPE:Fa,ERR_INVALID_ARG_VALUE:Pb,ERR_OUT_OF_RANGE:Cx,ERR_UNKNOWN_SIGNAL:vce}}=Oa(),{normalizeEncoding:cGe}=yl(),{isAsyncFunction:uGe,isArrayBufferView:dGe}=yl().types,Sce={};function pGe(e){return e===(e|0)}function mGe(e){return e===e>>>0}var fGe=/^[0-7]+$/,gGe="must be a 32-bit unsigned integer or an octal string";function hGe(e,t,o){if(typeof e>"u"&&(e=o),typeof e=="string"){if(Ace(fGe,e)===null)throw new Pb(t,e,gGe);e=nGe(e,8)}return Cce(e,t),e}var xGe=Bu((e,t,o=oGe,n=tGe)=>{if(typeof e!="number")throw new Fa(t,"number",e);if(!Tz(e))throw new Cx(t,"an integer",e);if(e<o||e>n)throw new Cx(t,`>= ${o} && <= ${n}`,e)}),yGe=Bu((e,t,o=-2147483648,n=2147483647)=>{if(typeof e!="number")throw new Fa(t,"number",e);if(!Tz(e))throw new Cx(t,"an integer",e);if(e<o||e>n)throw new Cx(t,`>= ${o} && <= ${n}`,e)}),Cce=Bu((e,t,o=!1)=>{if(typeof e!="number")throw new Fa(t,"number",e);if(!Tz(e))throw new Cx(t,"an integer",e);let n=o?1:0,i=4294967295;if(e<n||e>i)throw new Cx(t,`>= ${n} && <= ${i}`,e)});function Iz(e,t){if(typeof e!="string")throw new Fa(t,"string",e)}function bGe(e,t,o=void 0,n){if(typeof e!="number")throw new Fa(t,"number",e);if(o!=null&&e<o||n!=null&&e>n||(o!=null||n!=null)&&eGe(e))throw new Cx(t,`${o!=null?`>= ${o}`:""}${o!=null&&n!=null?" && ":""}${n!=null?`<= ${n}`:""}`,e)}var vGe=Bu((e,t,o)=>{if(!kce(o,e)){let i="must be one of: "+Ece(Vze(o,s=>typeof s=="string"?`'${s}'`:iGe(s)),", ");throw new Pb(t,e,i)}});function Tce(e,t){if(typeof e!="boolean")throw new Fa(t,"boolean",e)}function Az(e,t,o){return e==null||!rGe(e,t)?o:e[t]}var SGe=Bu((e,t,o=null)=>{let n=Az(o,"allowArray",!1),i=Az(o,"allowFunction",!1);if(!Az(o,"nullable",!1)&&e===null||!n&&Cz(e)||typeof e!="object"&&(!i||typeof e!="function"))throw new Fa(t,"Object",e)}),wGe=Bu((e,t)=>{if(e!=null&&typeof e!="object"&&typeof e!="function")throw new Fa(t,"a dictionary",e)}),C6=Bu((e,t,o=0)=>{if(!Cz(e))throw new Fa(t,"Array",e);if(e.length<o){let n=`must be longer than ${o}`;throw new Pb(t,e,n)}});function kGe(e,t){C6(e,t);for(let o=0;o<e.length;o++)Iz(e[o],`${t}[${o}]`)}function EGe(e,t){C6(e,t);for(let o=0;o<e.length;o++)Tce(e[o],`${t}[${o}]`)}function AGe(e,t){C6(e,t);for(let o=0;o<e.length;o++){let n=e[o],i=`${t}[${o}]`;if(n==null)throw new Fa(i,"AbortSignal",n);Ice(n,i)}}function CGe(e,t="signal"){if(Iz(e,t),Sce[e]===void 0)throw Sce[sGe(e)]!==void 0?new vce(e+" (signals must use all capital letters)"):new vce(e)}var TGe=Bu((e,t="buffer")=>{if(!dGe(e))throw new Fa(t,["Buffer","TypedArray","DataView"],e)});function IGe(e,t){let o=cGe(t),n=e.length;if(o==="hex"&&n%2!==0)throw new Pb("encoding",t,`is invalid for data of length ${n}`)}function DGe(e,t="Port",o=!0){if(typeof e!="number"&&typeof e!="string"||typeof e=="string"&&aGe(e).length===0||+e!==+e>>>0||e>65535||e===0&&!o)throw new lGe(t,e,o);return e|0}var Ice=Bu((e,t)=>{if(e!==void 0&&(e===null||typeof e!="object"||!("aborted"in e)))throw new Fa(t,"AbortSignal",e)}),MGe=Bu((e,t)=>{if(typeof e!="function")throw new Fa(t,"Function",e)}),NGe=Bu((e,t)=>{if(typeof e!="function"||uGe(e))throw new Fa(t,"Function",e)}),BGe=Bu((e,t)=>{if(e!==void 0)throw new Fa(t,"undefined",e)});function PGe(e,t,o){if(!kce(o,e))throw new Fa(t,`('${Ece(o,"|")}')`,e)}var _Ge=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function wce(e,t){if(typeof e>"u"||!Ace(_Ge,e))throw new Pb(t,e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function RGe(e){if(typeof e=="string")return wce(e,"hints"),e;if(Cz(e)){let t=e.length,o="";if(t===0)return o;for(let n=0;n<t;n++){let i=e[n];wce(i,"hints"),o+=i,n!==t-1&&(o+=", ")}return o}throw new Pb("hints",e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}Dce.exports={isInt32:pGe,isUint32:mGe,parseFileMode:hGe,validateArray:C6,validateStringArray:kGe,validateBooleanArray:EGe,validateAbortSignalArray:AGe,validateBoolean:Tce,validateBuffer:TGe,validateDictionary:wGe,validateEncoding:IGe,validateFunction:MGe,validateInt32:yGe,validateInteger:xGe,validateNumber:bGe,validateObject:SGe,validateOneOf:vGe,validatePlainFunction:NGe,validatePort:DGe,validateSignalName:CGe,validateString:Iz,validateUint32:Cce,validateUndefined:BGe,validateUnion:PGe,validateAbortSignal:Ice,validateLinkHeaderValue:RGe}});var V0=Ro((THt,Pce)=>{d();var Zi=Pce.exports={},Np,Bp;function Dz(){throw new Error("setTimeout has not been defined")}function Mz(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Np=setTimeout:Np=Dz}catch{Np=Dz}try{typeof clearTimeout=="function"?Bp=clearTimeout:Bp=Mz}catch{Bp=Mz}})();function Mce(e){if(Np===setTimeout)return setTimeout(e,0);if((Np===Dz||!Np)&&setTimeout)return Np=setTimeout,setTimeout(e,0);try{return Np(e,0)}catch{try{return Np.call(null,e,0)}catch{return Np.call(this,e,0)}}}function LGe(e){if(Bp===clearTimeout)return clearTimeout(e);if((Bp===Mz||!Bp)&&clearTimeout)return Bp=clearTimeout,clearTimeout(e);try{return Bp(e)}catch{try{return Bp.call(null,e)}catch{return Bp.call(this,e)}}}var sf=[],Rb=!1,Tx,T6=-1;function OGe(){!Rb||!Tx||(Rb=!1,Tx.length?sf=Tx.concat(sf):T6=-1,sf.length&&Nce())}function Nce(){if(!Rb){var e=Mce(OGe);Rb=!0;for(var t=sf.length;t;){for(Tx=sf,sf=[];++T6<t;)Tx&&Tx[T6].run();T6=-1,t=sf.length}Tx=null,Rb=!1,LGe(e)}}Zi.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)t[o-1]=arguments[o];sf.push(new Bce(e,t)),sf.length===1&&!Rb&&Mce(Nce)};function Bce(e,t){this.fun=e,this.array=t}Bce.prototype.run=function(){this.fun.apply(null,this.array)};Zi.title="browser";Zi.browser=!0;Zi.env={};Zi.argv=[];Zi.version="";Zi.versions={};function af(){}Zi.on=af;Zi.addListener=af;Zi.once=af;Zi.off=af;Zi.removeListener=af;Zi.removeAllListeners=af;Zi.emit=af;Zi.prependListener=af;Zi.prependOnceListener=af;Zi.listeners=function(e){return[]};Zi.binding=function(e){throw new Error("process.binding is not supported")};Zi.cwd=function(){return"/"};Zi.chdir=function(e){throw new Error("process.chdir is not supported")};Zi.umask=function(){return 0}});var _p=Ro((DHt,Yce)=>{"use strict";d();var{SymbolAsyncIterator:_ce,SymbolIterator:Rce,SymbolFor:Ix}=di(),Lce=Ix("nodejs.stream.destroyed"),Oce=Ix("nodejs.stream.errored"),Nz=Ix("nodejs.stream.readable"),Bz=Ix("nodejs.stream.writable"),Fce=Ix("nodejs.stream.disturbed"),FGe=Ix("nodejs.webstream.isClosedPromise"),UGe=Ix("nodejs.webstream.controllerErrorFunction");function I6(e,t=!1){var o;return!!(e&&typeof e.pipe=="function"&&typeof e.on=="function"&&(!t||typeof e.pause=="function"&&typeof e.resume=="function")&&(!e._writableState||((o=e._readableState)===null||o===void 0?void 0:o.readable)!==!1)&&(!e._writableState||e._readableState))}function D6(e){var t;return!!(e&&typeof e.write=="function"&&typeof e.on=="function"&&(!e._readableState||((t=e._writableState)===null||t===void 0?void 0:t.writable)!==!1))}function $Ge(e){return!!(e&&typeof e.pipe=="function"&&e._readableState&&typeof e.on=="function"&&typeof e.write=="function")}function Pp(e){return e&&(e._readableState||e._writableState||typeof e.write=="function"&&typeof e.on=="function"||typeof e.pipe=="function"&&typeof e.on=="function")}function Uce(e){return!!(e&&!Pp(e)&&typeof e.pipeThrough=="function"&&typeof e.getReader=="function"&&typeof e.cancel=="function")}function $ce(e){return!!(e&&!Pp(e)&&typeof e.getWriter=="function"&&typeof e.abort=="function")}function Hce(e){return!!(e&&!Pp(e)&&typeof e.readable=="object"&&typeof e.writable=="object")}function HGe(e){return Uce(e)||$ce(e)||Hce(e)}function zGe(e,t){return e==null?!1:t===!0?typeof e[_ce]=="function":t===!1?typeof e[Rce]=="function":typeof e[_ce]=="function"||typeof e[Rce]=="function"}function M6(e){if(!Pp(e))return null;let t=e._writableState,o=e._readableState,n=t||o;return!!(e.destroyed||e[Lce]||n!=null&&n.destroyed)}function zce(e){if(!D6(e))return null;if(e.writableEnded===!0)return!0;let t=e._writableState;return t!=null&&t.errored?!1:typeof t?.ended!="boolean"?null:t.ended}function GGe(e,t){if(!D6(e))return null;if(e.writableFinished===!0)return!0;let o=e._writableState;return o!=null&&o.errored?!1:typeof o?.finished!="boolean"?null:!!(o.finished||t===!1&&o.ended===!0&&o.length===0)}function qGe(e){if(!I6(e))return null;if(e.readableEnded===!0)return!0;let t=e._readableState;return!t||t.errored?!1:typeof t?.ended!="boolean"?null:t.ended}function Gce(e,t){if(!I6(e))return null;let o=e._readableState;return o!=null&&o.errored?!1:typeof o?.endEmitted!="boolean"?null:!!(o.endEmitted||t===!1&&o.ended===!0&&o.length===0)}function qce(e){return e&&e[Nz]!=null?e[Nz]:typeof e?.readable!="boolean"?null:M6(e)?!1:I6(e)&&e.readable&&!Gce(e)}function jce(e){return e&&e[Bz]!=null?e[Bz]:typeof e?.writable!="boolean"?null:M6(e)?!1:D6(e)&&e.writable&&!zce(e)}function jGe(e,t){return Pp(e)?M6(e)?!0:!(t?.readable!==!1&&qce(e)||t?.writable!==!1&&jce(e)):null}function WGe(e){var t,o;return Pp(e)?e.writableErrored?e.writableErrored:(t=(o=e._writableState)===null||o===void 0?void 0:o.errored)!==null&&t!==void 0?t:null:null}function KGe(e){var t,o;return Pp(e)?e.readableErrored?e.readableErrored:(t=(o=e._readableState)===null||o===void 0?void 0:o.errored)!==null&&t!==void 0?t:null:null}function YGe(e){if(!Pp(e))return null;if(typeof e.closed=="boolean")return e.closed;let t=e._writableState,o=e._readableState;return typeof t?.closed=="boolean"||typeof o?.closed=="boolean"?t?.closed||o?.closed:typeof e._closed=="boolean"&&Wce(e)?e._closed:null}function Wce(e){return typeof e._closed=="boolean"&&typeof e._defaultKeepAlive=="boolean"&&typeof e._removedConnection=="boolean"&&typeof e._removedContLen=="boolean"}function Kce(e){return typeof e._sent100=="boolean"&&Wce(e)}function QGe(e){var t;return typeof e._consuming=="boolean"&&typeof e._dumped=="boolean"&&((t=e.req)===null||t===void 0?void 0:t.upgradeOrConnect)===void 0}function ZGe(e){if(!Pp(e))return null;let t=e._writableState,o=e._readableState,n=t||o;return!n&&Kce(e)||!!(n&&n.autoDestroy&&n.emitClose&&n.closed===!1)}function XGe(e){var t;return!!(e&&((t=e[Fce])!==null&&t!==void 0?t:e.readableDidRead||e.readableAborted))}function JGe(e){var t,o,n,i,s,a,l,c,u,p;return!!(e&&((t=(o=(n=(i=(s=(a=e[Oce])!==null&&a!==void 0?a:e.readableErrored)!==null&&s!==void 0?s:e.writableErrored)!==null&&i!==void 0?i:(l=e._readableState)===null||l===void 0?void 0:l.errorEmitted)!==null&&n!==void 0?n:(c=e._writableState)===null||c===void 0?void 0:c.errorEmitted)!==null&&o!==void 0?o:(u=e._readableState)===null||u===void 0?void 0:u.errored)!==null&&t!==void 0?t:!((p=e._writableState)===null||p===void 0)&&p.errored))}Yce.exports={isDestroyed:M6,kIsDestroyed:Lce,isDisturbed:XGe,kIsDisturbed:Fce,isErrored:JGe,kIsErrored:Oce,isReadable:qce,kIsReadable:Nz,kIsClosedPromise:FGe,kControllerErrorFunction:UGe,kIsWritable:Bz,isClosed:YGe,isDuplexNodeStream:$Ge,isFinished:jGe,isIterable:zGe,isReadableNodeStream:I6,isReadableStream:Uce,isReadableEnded:qGe,isReadableFinished:Gce,isReadableErrored:KGe,isNodeStream:Pp,isWebStream:HGe,isWritable:jce,isWritableNodeStream:D6,isWritableStream:$ce,isWritableEnded:zce,isWritableFinished:GGe,isWritableErrored:WGe,isServerRequest:QGe,isServerResponse:Kce,willEmitClose:ZGe,isTransformStream:Hce}});var lf=Ro((NHt,Oz)=>{"use strict";d();var eg=V0(),{AbortError:nue,codes:VGe}=Oa(),{ERR_INVALID_ARG_TYPE:eqe,ERR_STREAM_PREMATURE_CLOSE:Qce}=VGe,{kEmptyObject:_z,once:Rz}=yl(),{validateAbortSignal:tqe,validateFunction:oqe,validateObject:nqe,validateBoolean:rqe}=_b(),{Promise:iqe,PromisePrototypeThen:sqe,SymbolDispose:rue}=di(),{isClosed:aqe,isReadable:Zce,isReadableNodeStream:Pz,isReadableStream:lqe,isReadableFinished:Xce,isReadableErrored:Jce,isWritable:Vce,isWritableNodeStream:eue,isWritableStream:cqe,isWritableFinished:tue,isWritableErrored:oue,isNodeStream:uqe,willEmitClose:dqe,kIsClosedPromise:pqe}=_p(),Lb;function mqe(e){return e.setHeader&&typeof e.abort=="function"}var Lz=()=>{};function iue(e,t,o){var n,i;if(arguments.length===2?(o=t,t=_z):t==null?t=_z:nqe(t,"options"),oqe(o,"callback"),tqe(t.signal,"options.signal"),o=Rz(o),lqe(e)||cqe(e))return fqe(e,t,o);if(!uqe(e))throw new eqe("stream",["ReadableStream","WritableStream","Stream"],e);let s=(n=t.readable)!==null&&n!==void 0?n:Pz(e),a=(i=t.writable)!==null&&i!==void 0?i:eue(e),l=e._writableState,c=e._readableState,u=()=>{e.writable||g()},p=dqe(e)&&Pz(e)===s&&eue(e)===a,m=tue(e,!1),g=()=>{m=!0,e.destroyed&&(p=!1),!(p&&(!e.readable||s))&&(!s||y)&&o.call(e)},y=Xce(e,!1),b=()=>{y=!0,e.destroyed&&(p=!1),!(p&&(!e.writable||a))&&(!a||m)&&o.call(e)},v=_=>{o.call(e,_)},E=aqe(e),A=()=>{E=!0;let _=oue(e)||Jce(e);if(_&&typeof _!="boolean")return o.call(e,_);if(s&&!y&&Pz(e,!0)&&!Xce(e,!1))return o.call(e,new Qce);if(a&&!m&&!tue(e,!1))return o.call(e,new Qce);o.call(e)},C=()=>{E=!0;let _=oue(e)||Jce(e);if(_&&typeof _!="boolean")return o.call(e,_);o.call(e)},I=()=>{e.req.on("finish",g)};mqe(e)?(e.on("complete",g),p||e.on("abort",A),e.req?I():e.on("request",I)):a&&!l&&(e.on("end",u),e.on("close",u)),!p&&typeof e.aborted=="boolean"&&e.on("aborted",A),e.on("end",b),e.on("finish",g),t.error!==!1&&e.on("error",v),e.on("close",A),E?eg.nextTick(A):l!=null&&l.errorEmitted||c!=null&&c.errorEmitted?p||eg.nextTick(C):(!s&&(!p||Zce(e))&&(m||Vce(e)===!1)||!a&&(!p||Vce(e))&&(y||Zce(e)===!1)||c&&e.req&&e.aborted)&&eg.nextTick(C);let N=()=>{o=Lz,e.removeListener("aborted",A),e.removeListener("complete",g),e.removeListener("abort",A),e.removeListener("request",I),e.req&&e.req.removeListener("finish",g),e.removeListener("end",u),e.removeListener("close",u),e.removeListener("finish",g),e.removeListener("end",b),e.removeListener("error",v),e.removeListener("close",A)};if(t.signal&&!E){let _=()=>{let O=o;N(),O.call(e,new nue(void 0,{cause:t.signal.reason}))};if(t.signal.aborted)eg.nextTick(_);else{Lb=Lb||yl().addAbortListener;let O=Lb(t.signal,_),F=o;o=Rz((...J)=>{O[rue](),F.apply(e,J)})}}return N}function fqe(e,t,o){let n=!1,i=Lz;if(t.signal)if(i=()=>{n=!0,o.call(e,new nue(void 0,{cause:t.signal.reason}))},t.signal.aborted)eg.nextTick(i);else{Lb=Lb||yl().addAbortListener;let a=Lb(t.signal,i),l=o;o=Rz((...c)=>{a[rue](),l.apply(e,c)})}let s=(...a)=>{n||eg.nextTick(()=>o.apply(e,a))};return sqe(e[pqe].promise,s,s),Lz}function gqe(e,t){var o;let n=!1;return t===null&&(t=_z),(o=t)!==null&&o!==void 0&&o.cleanup&&(rqe(t.cleanup,"cleanup"),n=t.cleanup),new iqe((i,s)=>{let a=iue(e,t,l=>{n&&a(),l?s(l):i()})})}Oz.exports=iue;Oz.exports.finished=gqe});var Dx=Ro((PHt,mue)=>{"use strict";d();var Rp=V0(),{aggregateTwoErrors:hqe,codes:{ERR_MULTIPLE_CALLBACK:xqe},AbortError:yqe}=Oa(),{Symbol:lue}=di(),{kIsDestroyed:bqe,isDestroyed:vqe,isFinished:Sqe,isServerRequest:wqe}=_p(),cue=lue("kDestroy"),Fz=lue("kConstruct");function uue(e,t,o){e&&(e.stack,t&&!t.errored&&(t.errored=e),o&&!o.errored&&(o.errored=e))}function kqe(e,t){let o=this._readableState,n=this._writableState,i=n||o;return n!=null&&n.destroyed||o!=null&&o.destroyed?(typeof t=="function"&&t(),this):(uue(e,n,o),n&&(n.destroyed=!0),o&&(o.destroyed=!0),i.constructed?sue(this,e,t):this.once(cue,function(s){sue(this,hqe(s,e),t)}),this)}function sue(e,t,o){let n=!1;function i(s){if(n)return;n=!0;let a=e._readableState,l=e._writableState;uue(s,l,a),l&&(l.closed=!0),a&&(a.closed=!0),typeof o=="function"&&o(s),s?Rp.nextTick(Eqe,e,s):Rp.nextTick(due,e)}try{e._destroy(t||null,i)}catch(s){i(s)}}function Eqe(e,t){Uz(e,t),due(e)}function due(e){let t=e._readableState,o=e._writableState;o&&(o.closeEmitted=!0),t&&(t.closeEmitted=!0),(o!=null&&o.emitClose||t!=null&&t.emitClose)&&e.emit("close")}function Uz(e,t){let o=e._readableState,n=e._writableState;n!=null&&n.errorEmitted||o!=null&&o.errorEmitted||(n&&(n.errorEmitted=!0),o&&(o.errorEmitted=!0),e.emit("error",t))}function Aqe(){let e=this._readableState,t=this._writableState;e&&(e.constructed=!0,e.closed=!1,e.closeEmitted=!1,e.destroyed=!1,e.errored=null,e.errorEmitted=!1,e.reading=!1,e.ended=e.readable===!1,e.endEmitted=e.readable===!1),t&&(t.constructed=!0,t.destroyed=!1,t.closed=!1,t.closeEmitted=!1,t.errored=null,t.errorEmitted=!1,t.finalCalled=!1,t.prefinished=!1,t.ended=t.writable===!1,t.ending=t.writable===!1,t.finished=t.writable===!1)}function $z(e,t,o){let n=e._readableState,i=e._writableState;if(i!=null&&i.destroyed||n!=null&&n.destroyed)return this;n!=null&&n.autoDestroy||i!=null&&i.autoDestroy?e.destroy(t):t&&(t.stack,i&&!i.errored&&(i.errored=t),n&&!n.errored&&(n.errored=t),o?Rp.nextTick(Uz,e,t):Uz(e,t))}function Cqe(e,t){if(typeof e._construct!="function")return;let o=e._readableState,n=e._writableState;o&&(o.constructed=!1),n&&(n.constructed=!1),e.once(Fz,t),!(e.listenerCount(Fz)>1)&&Rp.nextTick(Tqe,e)}function Tqe(e){let t=!1;function o(n){if(t){$z(e,n??new xqe);return}t=!0;let i=e._readableState,s=e._writableState,a=s||i;i&&(i.constructed=!0),s&&(s.constructed=!0),a.destroyed?e.emit(cue,n):n?$z(e,n,!0):Rp.nextTick(Iqe,e)}try{e._construct(n=>{Rp.nextTick(o,n)})}catch(n){Rp.nextTick(o,n)}}function Iqe(e){e.emit(Fz)}function aue(e){return e?.setHeader&&typeof e.abort=="function"}function pue(e){e.emit("close")}function Dqe(e,t){e.emit("error",t),Rp.nextTick(pue,e)}function Mqe(e,t){!e||vqe(e)||(!t&&!Sqe(e)&&(t=new yqe),wqe(e)?(e.socket=null,e.destroy(t)):aue(e)?e.abort():aue(e.req)?e.req.abort():typeof e.destroy=="function"?e.destroy(t):typeof e.close=="function"?e.close():t?Rp.nextTick(Dqe,e,t):Rp.nextTick(pue,e),e.destroyed||(e[bqe]=!0))}mue.exports={construct:Cqe,destroyer:Mqe,destroy:kqe,undestroy:Aqe,errorOrDestroy:$z}});var P6=Ro((RHt,gue)=>{"use strict";d();var{ArrayIsArray:Nqe,ObjectSetPrototypeOf:fue}=di(),{EventEmitter:N6}=W8();function B6(e){N6.call(this,e)}fue(B6.prototype,N6.prototype);fue(B6,N6);B6.prototype.pipe=function(e,t){let o=this;function n(p){e.writable&&e.write(p)===!1&&o.pause&&o.pause()}o.on("data",n);function i(){o.readable&&o.resume&&o.resume()}e.on("drain",i),!e._isStdio&&(!t||t.end!==!1)&&(o.on("end",a),o.on("close",l));let s=!1;function a(){s||(s=!0,e.end())}function l(){s||(s=!0,typeof e.destroy=="function"&&e.destroy())}function c(p){u(),N6.listenerCount(this,"error")===0&&this.emit("error",p)}Hz(o,"error",c),Hz(e,"error",c);function u(){o.removeListener("data",n),e.removeListener("drain",i),o.removeListener("end",a),o.removeListener("close",l),o.removeListener("error",c),e.removeListener("error",c),o.removeListener("end",u),o.removeListener("close",u),e.removeListener("close",u)}return o.on("end",u),o.on("close",u),e.on("close",u),e.emit("pipe",o),e};function Hz(e,t,o){if(typeof e.prependListener=="function")return e.prependListener(t,o);!e._events||!e._events[t]?e.on(t,o):Nqe(e._events[t])?e._events[t].unshift(o):e._events[t]=[o,e._events[t]]}gue.exports={Stream:B6,prependListener:Hz}});var K8=Ro((OHt,_6)=>{"use strict";d();var{SymbolDispose:Bqe}=di(),{AbortError:hue,codes:Pqe}=Oa(),{isNodeStream:xue,isWebStream:_qe,kControllerErrorFunction:Rqe}=_p(),Lqe=lf(),{ERR_INVALID_ARG_TYPE:yue}=Pqe,zz,Oqe=(e,t)=>{if(typeof e!="object"||!("aborted"in e))throw new yue(t,"AbortSignal",e)};_6.exports.addAbortSignal=function(t,o){if(Oqe(t,"signal"),!xue(o)&&!_qe(o))throw new yue("stream",["ReadableStream","WritableStream","Stream"],o);return _6.exports.addAbortSignalNoValidate(t,o)};_6.exports.addAbortSignalNoValidate=function(e,t){if(typeof e!="object"||!("aborted"in e))return t;let o=xue(t)?()=>{t.destroy(new hue(void 0,{cause:e.reason}))}:()=>{t[Rqe](new hue(void 0,{cause:e.reason}))};if(e.aborted)o();else{zz=zz||yl().addAbortListener;let n=zz(e,o);Lqe(t,n[Bqe])}return t}});var Sue=Ro(($Ht,vue)=>{"use strict";d();var{StringPrototypeSlice:bue,SymbolIterator:Fqe,TypedArrayPrototypeSet:R6,Uint8Array:Uqe}=di(),{Buffer:Gz}=Yl(),{inspect:$qe}=yl();vue.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(t){let o={data:t,next:null};this.length>0?this.tail.next=o:this.head=o,this.tail=o,++this.length}unshift(t){let o={data:t,next:this.head};this.length===0&&(this.tail=o),this.head=o,++this.length}shift(){if(this.length===0)return;let t=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,t}clear(){this.head=this.tail=null,this.length=0}join(t){if(this.length===0)return"";let o=this.head,n=""+o.data;for(;(o=o.next)!==null;)n+=t+o.data;return n}concat(t){if(this.length===0)return Gz.alloc(0);let o=Gz.allocUnsafe(t>>>0),n=this.head,i=0;for(;n;)R6(o,n.data,i),i+=n.data.length,n=n.next;return o}consume(t,o){let n=this.head.data;if(t<n.length){let i=n.slice(0,t);return this.head.data=n.slice(t),i}return t===n.length?this.shift():o?this._getString(t):this._getBuffer(t)}first(){return this.head.data}*[Fqe](){for(let t=this.head;t;t=t.next)yield t.data}_getString(t){let o="",n=this.head,i=0;do{let s=n.data;if(t>s.length)o+=s,t-=s.length;else{t===s.length?(o+=s,++i,n.next?this.head=n.next:this.head=this.tail=null):(o+=bue(s,0,t),this.head=n,n.data=bue(s,t));break}++i}while((n=n.next)!==null);return this.length-=i,o}_getBuffer(t){let o=Gz.allocUnsafe(t),n=t,i=this.head,s=0;do{let a=i.data;if(t>a.length)R6(o,a,n-t),t-=a.length;else{t===a.length?(R6(o,a,n-t),++s,i.next?this.head=i.next:this.head=this.tail=null):(R6(o,new Uqe(a.buffer,a.byteOffset,t),n-t),this.head=i,i.data=a.slice(t));break}++s}while((i=i.next)!==null);return this.length-=s,o}[Symbol.for("nodejs.util.inspect.custom")](t,o){return $qe(this,{...o,depth:0,customInspect:!1})}}});var Y8=Ro((zHt,Aue)=>{"use strict";d();var{MathFloor:Hqe,NumberIsInteger:zqe}=di(),{validateInteger:Gqe}=_b(),{ERR_INVALID_ARG_VALUE:qqe}=Oa().codes,wue=16*1024,kue=16;function jqe(e,t,o){return e.highWaterMark!=null?e.highWaterMark:t?e[o]:null}function Eue(e){return e?kue:wue}function Wqe(e,t){Gqe(t,"value",0),e?kue=t:wue=t}function Kqe(e,t,o,n){let i=jqe(t,n,o);if(i!=null){if(!zqe(i)||i<0){let s=n?`options.${o}`:"options.highWaterMark";throw new qqe(s,i)}return Hqe(i)}return Eue(e.objectMode)}Aue.exports={getHighWaterMark:Kqe,getDefaultHighWaterMark:Eue,setDefaultHighWaterMark:Wqe}});var Iue=Ro((qz,Tue)=>{d();var L6=Yl(),Lp=L6.Buffer;function Cue(e,t){for(var o in e)t[o]=e[o]}Lp.from&&Lp.alloc&&Lp.allocUnsafe&&Lp.allocUnsafeSlow?Tue.exports=L6:(Cue(L6,qz),qz.Buffer=Mx);function Mx(e,t,o){return Lp(e,t,o)}Mx.prototype=Object.create(Lp.prototype);Cue(Lp,Mx);Mx.from=function(e,t,o){if(typeof e=="number")throw new TypeError("Argument must not be a number");return Lp(e,t,o)};Mx.alloc=function(e,t,o){if(typeof e!="number")throw new TypeError("Argument must be a number");var n=Lp(e);return t!==void 0?typeof o=="string"?n.fill(t,o):n.fill(t):n.fill(0),n};Mx.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return Lp(e)};Mx.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return L6.SlowBuffer(e)}});var Nue=Ro(Mue=>{"use strict";d();var Wz=Iue().Buffer,Due=Wz.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Yqe(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function Qqe(e){var t=Yqe(e);if(typeof t!="string"&&(Wz.isEncoding===Due||!Due(e)))throw new Error("Unknown encoding: "+e);return t||e}Mue.StringDecoder=Q8;function Q8(e){this.encoding=Qqe(e);var t;switch(this.encoding){case"utf16le":this.text=tje,this.end=oje,t=4;break;case"utf8":this.fillLast=Jqe,t=4;break;case"base64":this.text=nje,this.end=rje,t=3;break;default:this.write=ije,this.end=sje;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Wz.allocUnsafe(t)}Q8.prototype.write=function(e){if(e.length===0)return"";var t,o;if(this.lastNeed){if(t=this.fillLast(e),t===void 0)return"";o=this.lastNeed,this.lastNeed=0}else o=0;return o<e.length?t?t+this.text(e,o):this.text(e,o):t||""};Q8.prototype.end=eje;Q8.prototype.text=Vqe;Q8.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};function jz(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function Zqe(e,t,o){var n=t.length-1;if(n<o)return 0;var i=jz(t[n]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--n<o||i===-2?0:(i=jz(t[n]),i>=0?(i>0&&(e.lastNeed=i-2),i):--n<o||i===-2?0:(i=jz(t[n]),i>=0?(i>0&&(i===2?i=0:e.lastNeed=i-3),i):0))}function Xqe(e,t,o){if((t[0]&192)!==128)return e.lastNeed=0,"\uFFFD";if(e.lastNeed>1&&t.length>1){if((t[1]&192)!==128)return e.lastNeed=1,"\uFFFD";if(e.lastNeed>2&&t.length>2&&(t[2]&192)!==128)return e.lastNeed=2,"\uFFFD"}}function Jqe(e){var t=this.lastTotal-this.lastNeed,o=Xqe(this,e,t);if(o!==void 0)return o;if(this.lastNeed<=e.length)return e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length}function Vqe(e,t){var o=Zqe(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=o;var n=e.length-(o-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)}function eje(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\uFFFD":t}function tje(e,t){if((e.length-t)%2===0){var o=e.toString("utf16le",t);if(o){var n=o.charCodeAt(o.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],o.slice(0,-1)}return o}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function oje(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var o=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,o)}return t}function nje(e,t){var o=(e.length-t)%3;return o===0?e.toString("base64",t):(this.lastNeed=3-o,this.lastTotal=3,o===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-o))}function rje(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function ije(e){return e.toString(this.encoding)}function sje(e){return e&&e.length?this.write(e):""}});var Kz=Ro((KHt,Rue)=>{"use strict";d();var Bue=V0(),{PromisePrototypeThen:aje,SymbolAsyncIterator:Pue,SymbolIterator:_ue}=di(),{Buffer:lje}=Yl(),{ERR_INVALID_ARG_TYPE:cje,ERR_STREAM_NULL_VALUES:uje}=Oa().codes;function dje(e,t,o){let n;if(typeof t=="string"||t instanceof lje)return new e({objectMode:!0,...o,read(){this.push(t),this.push(null)}});let i;if(t&&t[Pue])i=!0,n=t[Pue]();else if(t&&t[_ue])i=!1,n=t[_ue]();else throw new cje("iterable",["Iterable"],t);let s=new e({objectMode:!0,highWaterMark:1,...o}),a=!1;s._read=function(){a||(a=!0,c())},s._destroy=function(u,p){aje(l(u),()=>Bue.nextTick(p,u),m=>Bue.nextTick(p,m||u))};async function l(u){let p=u!=null,m=typeof n.throw=="function";if(p&&m){let{value:g,done:y}=await n.throw(u);if(await g,y)return}if(typeof n.return=="function"){let{value:g}=await n.return();await g}}async function c(){for(;;){try{let{value:u,done:p}=i?await n.next():n.next();if(p)s.push(null);else{let m=u&&typeof u.then=="function"?await u:u;if(m===null)throw a=!1,new uje;if(s.push(m))continue;a=!1}}catch(u){s.destroy(u)}break}}return s}Rue.exports=dje});var X8=Ro((QHt,Vue)=>{"use strict";d();var Nd=V0(),{ArrayPrototypeIndexOf:pje,NumberIsInteger:mje,NumberIsNaN:fje,NumberParseInt:gje,ObjectDefineProperties:tG,ObjectKeys:hje,ObjectSetPrototypeOf:Fue,Promise:Uue,SafeSet:xje,SymbolAsyncDispose:yje,SymbolAsyncIterator:bje,Symbol:vje}=di();Vue.exports=on;on.ReadableState=$6;var{EventEmitter:Sje}=W8(),{Stream:tg,prependListener:wje}=P6(),{Buffer:Yz}=Yl(),{addAbortSignal:kje}=K8(),$ue=lf(),xn=yl().debuglog("stream",e=>{xn=e}),Eje=Sue(),Ub=Dx(),{getHighWaterMark:Aje,getDefaultHighWaterMark:Cje}=Y8(),{aggregateTwoErrors:Lue,codes:{ERR_INVALID_ARG_TYPE:Tje,ERR_METHOD_NOT_IMPLEMENTED:Ije,ERR_OUT_OF_RANGE:Dje,ERR_STREAM_PUSH_AFTER_EOF:Mje,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:Nje},AbortError:Bje}=Oa(),{validateObject:Pje}=_b(),Nx=vje("kPaused"),{StringDecoder:Hue}=Nue(),_je=Kz();Fue(on.prototype,tg.prototype);Fue(on,tg);var Qz=()=>{},{errorOrDestroy:Ob}=Ub,Fb=1,Rje=2,zue=4,Z8=8,Gue=16,O6=32,F6=64,que=128,Lje=256,Oje=512,Fje=1024,Vz=2048,eG=4096,Uje=8192,$je=16384,Hje=32768,jue=65536,zje=1<<17,Gje=1<<18;function Us(e){return{enumerable:!1,get(){return(this.state&e)!==0},set(t){t?this.state|=e:this.state&=~e}}}tG($6.prototype,{objectMode:Us(Fb),ended:Us(Rje),endEmitted:Us(zue),reading:Us(Z8),constructed:Us(Gue),sync:Us(O6),needReadable:Us(F6),emittedReadable:Us(que),readableListening:Us(Lje),resumeScheduled:Us(Oje),errorEmitted:Us(Fje),emitClose:Us(Vz),autoDestroy:Us(eG),destroyed:Us(Uje),closed:Us($je),closeEmitted:Us(Hje),multiAwaitDrain:Us(jue),readingMore:Us(zje),dataEmitted:Us(Gje)});function $6(e,t,o){typeof o!="boolean"&&(o=t instanceof Op()),this.state=Vz|eG|Gue|O6,e&&e.objectMode&&(this.state|=Fb),o&&e&&e.readableObjectMode&&(this.state|=Fb),this.highWaterMark=e?Aje(this,e,"readableHighWaterMark",o):Cje(!1),this.buffer=new Eje,this.length=0,this.pipes=[],this.flowing=null,this[Nx]=null,e&&e.emitClose===!1&&(this.state&=~Vz),e&&e.autoDestroy===!1&&(this.state&=~eG),this.errored=null,this.defaultEncoding=e&&e.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,e&&e.encoding&&(this.decoder=new Hue(e.encoding),this.encoding=e.encoding)}function on(e){if(!(this instanceof on))return new on(e);let t=this instanceof Op();this._readableState=new $6(e,this,t),e&&(typeof e.read=="function"&&(this._read=e.read),typeof e.destroy=="function"&&(this._destroy=e.destroy),typeof e.construct=="function"&&(this._construct=e.construct),e.signal&&!t&&kje(e.signal,this)),tg.call(this,e),Ub.construct(this,()=>{this._readableState.needReadable&&U6(this,this._readableState)})}on.prototype.destroy=Ub.destroy;on.prototype._undestroy=Ub.undestroy;on.prototype._destroy=function(e,t){t(e)};on.prototype[Sje.captureRejectionSymbol]=function(e){this.destroy(e)};on.prototype[yje]=function(){let e;return this.destroyed||(e=this.readableEnded?null:new Bje,this.destroy(e)),new Uue((t,o)=>$ue(this,n=>n&&n!==e?o(n):t(null)))};on.prototype.push=function(e,t){return Wue(this,e,t,!1)};on.prototype.unshift=function(e,t){return Wue(this,e,t,!0)};function Wue(e,t,o,n){xn("readableAddChunk",t);let i=e._readableState,s;if((i.state&Fb)===0&&(typeof t=="string"?(o=o||i.defaultEncoding,i.encoding!==o&&(n&&i.encoding?t=Yz.from(t,o).toString(i.encoding):(t=Yz.from(t,o),o=""))):t instanceof Yz?o="":tg._isUint8Array(t)?(t=tg._uint8ArrayToBuffer(t),o=""):t!=null&&(s=new Tje("chunk",["string","Buffer","Uint8Array"],t))),s)Ob(e,s);else if(t===null)i.state&=~Z8,Wje(e,i);else if((i.state&Fb)!==0||t&&t.length>0)if(n)if((i.state&zue)!==0)Ob(e,new Nje);else{if(i.destroyed||i.errored)return!1;Zz(e,i,t,!0)}else if(i.ended)Ob(e,new Mje);else{if(i.destroyed||i.errored)return!1;i.state&=~Z8,i.decoder&&!o?(t=i.decoder.write(t),i.objectMode||t.length!==0?Zz(e,i,t,!1):U6(e,i)):Zz(e,i,t,!1)}else n||(i.state&=~Z8,U6(e,i));return!i.ended&&(i.length<i.highWaterMark||i.length===0)}function Zz(e,t,o,n){t.flowing&&t.length===0&&!t.sync&&e.listenerCount("data")>0?((t.state&jue)!==0?t.awaitDrainWriters.clear():t.awaitDrainWriters=null,t.dataEmitted=!0,e.emit("data",o)):(t.length+=t.objectMode?1:o.length,n?t.buffer.unshift(o):t.buffer.push(o),(t.state&F6)!==0&&H6(e)),U6(e,t)}on.prototype.isPaused=function(){let e=this._readableState;return e[Nx]===!0||e.flowing===!1};on.prototype.setEncoding=function(e){let t=new Hue(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;let o=this._readableState.buffer,n="";for(let i of o)n+=t.write(i);return o.clear(),n!==""&&o.push(n),this._readableState.length=n.length,this};var qje=1073741824;function jje(e){if(e>qje)throw new Dje("size","<= 1GiB",e);return e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++,e}function Oue(e,t){return e<=0||t.length===0&&t.ended?0:(t.state&Fb)!==0?1:fje(e)?t.flowing&&t.length?t.buffer.first().length:t.length:e<=t.length?e:t.ended?t.length:0}on.prototype.read=function(e){xn("read",e),e===void 0?e=NaN:mje(e)||(e=gje(e,10));let t=this._readableState,o=e;if(e>t.highWaterMark&&(t.highWaterMark=jje(e)),e!==0&&(t.state&=~que),e===0&&t.needReadable&&((t.highWaterMark!==0?t.length>=t.highWaterMark:t.length>0)||t.ended))return xn("read: emitReadable",t.length,t.ended),t.length===0&&t.ended?Xz(this):H6(this),null;if(e=Oue(e,t),e===0&&t.ended)return t.length===0&&Xz(this),null;let n=(t.state&F6)!==0;if(xn("need readable",n),(t.length===0||t.length-e<t.highWaterMark)&&(n=!0,xn("length less than watermark",n)),t.ended||t.reading||t.destroyed||t.errored||!t.constructed)n=!1,xn("reading, ended or constructing",n);else if(n){xn("do read"),t.state|=Z8|O6,t.length===0&&(t.state|=F6);try{this._read(t.highWaterMark)}catch(s){Ob(this,s)}t.state&=~O6,t.reading||(e=Oue(o,t))}let i;return e>0?i=Xue(e,t):i=null,i===null?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.multiAwaitDrain?t.awaitDrainWriters.clear():t.awaitDrainWriters=null),t.length===0&&(t.ended||(t.needReadable=!0),o!==e&&t.ended&&Xz(this)),i!==null&&!t.errorEmitted&&!t.closeEmitted&&(t.dataEmitted=!0,this.emit("data",i)),i};function Wje(e,t){if(xn("onEofChunk"),!t.ended){if(t.decoder){let o=t.decoder.end();o&&o.length&&(t.buffer.push(o),t.length+=t.objectMode?1:o.length)}t.ended=!0,t.sync?H6(e):(t.needReadable=!1,t.emittedReadable=!0,Kue(e))}}function H6(e){let t=e._readableState;xn("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(xn("emitReadable",t.flowing),t.emittedReadable=!0,Nd.nextTick(Kue,e))}function Kue(e){let t=e._readableState;xn("emitReadable_",t.destroyed,t.length,t.ended),!t.destroyed&&!t.errored&&(t.length||t.ended)&&(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,Que(e)}function U6(e,t){!t.readingMore&&t.constructed&&(t.readingMore=!0,Nd.nextTick(Kje,e,t))}function Kje(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&t.length===0);){let o=t.length;if(xn("maybeReadMore read 0"),e.read(0),o===t.length)break}t.readingMore=!1}on.prototype._read=function(e){throw new Ije("_read()")};on.prototype.pipe=function(e,t){let o=this,n=this._readableState;n.pipes.length===1&&(n.multiAwaitDrain||(n.multiAwaitDrain=!0,n.awaitDrainWriters=new xje(n.awaitDrainWriters?[n.awaitDrainWriters]:[]))),n.pipes.push(e),xn("pipe count=%d opts=%j",n.pipes.length,t);let s=(!t||t.end!==!1)&&e!==Nd.stdout&&e!==Nd.stderr?l:E;n.endEmitted?Nd.nextTick(s):o.once("end",s),e.on("unpipe",a);function a(A,C){xn("onunpipe"),A===o&&C&&C.hasUnpiped===!1&&(C.hasUnpiped=!0,p())}function l(){xn("onend"),e.end()}let c,u=!1;function p(){xn("cleanup"),e.removeListener("close",b),e.removeListener("finish",v),c&&e.removeListener("drain",c),e.removeListener("error",y),e.removeListener("unpipe",a),o.removeListener("end",l),o.removeListener("end",E),o.removeListener("data",g),u=!0,c&&n.awaitDrainWriters&&(!e._writableState||e._writableState.needDrain)&&c()}function m(){u||(n.pipes.length===1&&n.pipes[0]===e?(xn("false write response, pause",0),n.awaitDrainWriters=e,n.multiAwaitDrain=!1):n.pipes.length>1&&n.pipes.includes(e)&&(xn("false write response, pause",n.awaitDrainWriters.size),n.awaitDrainWriters.add(e)),o.pause()),c||(c=Yje(o,e),e.on("drain",c))}o.on("data",g);function g(A){xn("ondata");let C=e.write(A);xn("dest.write",C),C===!1&&m()}function y(A){if(xn("onerror",A),E(),e.removeListener("error",y),e.listenerCount("error")===0){let C=e._writableState||e._readableState;C&&!C.errorEmitted?Ob(e,A):e.emit("error",A)}}wje(e,"error",y);function b(){e.removeListener("finish",v),E()}e.once("close",b);function v(){xn("onfinish"),e.removeListener("close",b),E()}e.once("finish",v);function E(){xn("unpipe"),o.unpipe(e)}return e.emit("pipe",o),e.writableNeedDrain===!0?m():n.flowing||(xn("pipe resume"),o.resume()),e};function Yje(e,t){return function(){let n=e._readableState;n.awaitDrainWriters===t?(xn("pipeOnDrain",1),n.awaitDrainWriters=null):n.multiAwaitDrain&&(xn("pipeOnDrain",n.awaitDrainWriters.size),n.awaitDrainWriters.delete(t)),(!n.awaitDrainWriters||n.awaitDrainWriters.size===0)&&e.listenerCount("data")&&e.resume()}}on.prototype.unpipe=function(e){let t=this._readableState,o={hasUnpiped:!1};if(t.pipes.length===0)return this;if(!e){let i=t.pipes;t.pipes=[],this.pause();for(let s=0;s<i.length;s++)i[s].emit("unpipe",this,{hasUnpiped:!1});return this}let n=pje(t.pipes,e);return n===-1?this:(t.pipes.splice(n,1),t.pipes.length===0&&this.pause(),e.emit("unpipe",this,o),this)};on.prototype.on=function(e,t){let o=tg.prototype.on.call(this,e,t),n=this._readableState;return e==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):e==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,xn("on readable",n.length,n.reading),n.length?H6(this):n.reading||Nd.nextTick(Qje,this)),o};on.prototype.addListener=on.prototype.on;on.prototype.removeListener=function(e,t){let o=tg.prototype.removeListener.call(this,e,t);return e==="readable"&&Nd.nextTick(Yue,this),o};on.prototype.off=on.prototype.removeListener;on.prototype.removeAllListeners=function(e){let t=tg.prototype.removeAllListeners.apply(this,arguments);return(e==="readable"||e===void 0)&&Nd.nextTick(Yue,this),t};function Yue(e){let t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&t[Nx]===!1?t.flowing=!0:e.listenerCount("data")>0?e.resume():t.readableListening||(t.flowing=null)}function Qje(e){xn("readable nexttick read 0"),e.read(0)}on.prototype.resume=function(){let e=this._readableState;return e.flowing||(xn("resume"),e.flowing=!e.readableListening,Zje(this,e)),e[Nx]=!1,this};function Zje(e,t){t.resumeScheduled||(t.resumeScheduled=!0,Nd.nextTick(Xje,e,t))}function Xje(e,t){xn("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),Que(e),t.flowing&&!t.reading&&e.read(0)}on.prototype.pause=function(){return xn("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(xn("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[Nx]=!0,this};function Que(e){let t=e._readableState;for(xn("flow",t.flowing);t.flowing&&e.read()!==null;);}on.prototype.wrap=function(e){let t=!1;e.on("data",n=>{!this.push(n)&&e.pause&&(t=!0,e.pause())}),e.on("end",()=>{this.push(null)}),e.on("error",n=>{Ob(this,n)}),e.on("close",()=>{this.destroy()}),e.on("destroy",()=>{this.destroy()}),this._read=()=>{t&&e.resume&&(t=!1,e.resume())};let o=hje(e);for(let n=1;n<o.length;n++){let i=o[n];this[i]===void 0&&typeof e[i]=="function"&&(this[i]=e[i].bind(e))}return this};on.prototype[bje]=function(){return Zue(this)};on.prototype.iterator=function(e){return e!==void 0&&Pje(e,"options"),Zue(this,e)};function Zue(e,t){typeof e.read!="function"&&(e=on.wrap(e,{objectMode:!0}));let o=Jje(e,t);return o.stream=e,o}async function*Jje(e,t){let o=Qz;function n(a){this===e?(o(),o=Qz):o=a}e.on("readable",n);let i,s=$ue(e,{writable:!1},a=>{i=a?Lue(i,a):null,o(),o=Qz});try{for(;;){let a=e.destroyed?null:e.read();if(a!==null)yield a;else{if(i)throw i;if(i===null)return;await new Uue(n)}}}catch(a){throw i=Lue(i,a),i}finally{(i||t?.destroyOnReturn!==!1)&&(i===void 0||e._readableState.autoDestroy)?Ub.destroyer(e,null):(e.off("readable",n),s())}}tG(on.prototype,{readable:{__proto__:null,get(){let e=this._readableState;return!!e&&e.readable!==!1&&!e.destroyed&&!e.errorEmitted&&!e.endEmitted},set(e){this._readableState&&(this._readableState.readable=!!e)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(e){this._readableState&&(this._readableState.destroyed=e)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}});tG($6.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[Nx]!==!1},set(e){this[Nx]=!!e}}});on._fromList=Xue;function Xue(e,t){if(t.length===0)return null;let o;return t.objectMode?o=t.buffer.shift():!e||e>=t.length?(t.decoder?o=t.buffer.join(""):t.buffer.length===1?o=t.buffer.first():o=t.buffer.concat(t.length),t.buffer.clear()):o=t.buffer.consume(e,t.decoder),o}function Xz(e){let t=e._readableState;xn("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,Nd.nextTick(Vje,t,e))}function Vje(e,t){if(xn("endReadableNT",e.endEmitted,e.length),!e.errored&&!e.closeEmitted&&!e.endEmitted&&e.length===0){if(e.endEmitted=!0,t.emit("end"),t.writable&&t.allowHalfOpen===!1)Nd.nextTick(eWe,t);else if(e.autoDestroy){let o=t._writableState;(!o||o.autoDestroy&&(o.finished||o.writable===!1))&&t.destroy()}}}function eWe(e){e.writable&&!e.writableEnded&&!e.destroyed&&e.end()}on.from=function(e,t){return _je(on,e,t)};var Jz;function Jue(){return Jz===void 0&&(Jz={}),Jz}on.fromWeb=function(e,t){return Jue().newStreamReadableFromReadableStream(e,t)};on.toWeb=function(e,t){return Jue().newReadableStreamFromStreamReadable(e,t)};on.wrap=function(e,t){var o,n;return new on({objectMode:(o=(n=e.readableObjectMode)!==null&&n!==void 0?n:e.objectMode)!==null&&o!==void 0?o:!0,...t,destroy(i,s){Ub.destroyer(e,i),s(i)}}).wrap(e)}});var W6=Ro((XHt,dde)=>{"use strict";d();var Bx=V0(),{ArrayPrototypeSlice:ode,Error:tWe,FunctionPrototypeSymbolHasInstance:nde,ObjectDefineProperty:rde,ObjectDefineProperties:oWe,ObjectSetPrototypeOf:ide,StringPrototypeToLowerCase:nWe,Symbol:rWe,SymbolHasInstance:iWe}=di();dde.exports=Si;Si.WritableState=e5;var{EventEmitter:sWe}=W8(),J8=P6().Stream,{Buffer:z6}=Yl(),j6=Dx(),{addAbortSignal:aWe}=K8(),{getHighWaterMark:lWe,getDefaultHighWaterMark:cWe}=Y8(),{ERR_INVALID_ARG_TYPE:uWe,ERR_METHOD_NOT_IMPLEMENTED:dWe,ERR_MULTIPLE_CALLBACK:sde,ERR_STREAM_CANNOT_PIPE:pWe,ERR_STREAM_DESTROYED:V8,ERR_STREAM_ALREADY_FINISHED:mWe,ERR_STREAM_NULL_VALUES:fWe,ERR_STREAM_WRITE_AFTER_END:gWe,ERR_UNKNOWN_ENCODING:ade}=Oa().codes,{errorOrDestroy:$b}=j6;ide(Si.prototype,J8.prototype);ide(Si,J8);function rG(){}var Hb=rWe("kOnFinished");function e5(e,t,o){typeof o!="boolean"&&(o=t instanceof Op()),this.objectMode=!!(e&&e.objectMode),o&&(this.objectMode=this.objectMode||!!(e&&e.writableObjectMode)),this.highWaterMark=e?lWe(this,e,"writableHighWaterMark",o):cWe(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let n=!!(e&&e.decodeStrings===!1);this.decodeStrings=!n,this.defaultEncoding=e&&e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=xWe.bind(void 0,t),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,q6(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!e||e.emitClose!==!1,this.autoDestroy=!e||e.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[Hb]=[]}function q6(e){e.buffered=[],e.bufferedIndex=0,e.allBuffers=!0,e.allNoop=!0}e5.prototype.getBuffer=function(){return ode(this.buffered,this.bufferedIndex)};rde(e5.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function Si(e){let t=this instanceof Op();if(!t&&!nde(Si,this))return new Si(e);this._writableState=new e5(e,this,t),e&&(typeof e.write=="function"&&(this._write=e.write),typeof e.writev=="function"&&(this._writev=e.writev),typeof e.destroy=="function"&&(this._destroy=e.destroy),typeof e.final=="function"&&(this._final=e.final),typeof e.construct=="function"&&(this._construct=e.construct),e.signal&&aWe(e.signal,this)),J8.call(this,e),j6.construct(this,()=>{let o=this._writableState;o.writing||sG(this,o),aG(this,o)})}rde(Si,iWe,{__proto__:null,value:function(e){return nde(this,e)?!0:this!==Si?!1:e&&e._writableState instanceof e5}});Si.prototype.pipe=function(){$b(this,new pWe)};function lde(e,t,o,n){let i=e._writableState;if(typeof o=="function")n=o,o=i.defaultEncoding;else{if(!o)o=i.defaultEncoding;else if(o!=="buffer"&&!z6.isEncoding(o))throw new ade(o);typeof n!="function"&&(n=rG)}if(t===null)throw new fWe;if(!i.objectMode)if(typeof t=="string")i.decodeStrings!==!1&&(t=z6.from(t,o),o="buffer");else if(t instanceof z6)o="buffer";else if(J8._isUint8Array(t))t=J8._uint8ArrayToBuffer(t),o="buffer";else throw new uWe("chunk",["string","Buffer","Uint8Array"],t);let s;return i.ending?s=new gWe:i.destroyed&&(s=new V8("write")),s?(Bx.nextTick(n,s),$b(e,s,!0),s):(i.pendingcb++,hWe(e,i,t,o,n))}Si.prototype.write=function(e,t,o){return lde(this,e,t,o)===!0};Si.prototype.cork=function(){this._writableState.corked++};Si.prototype.uncork=function(){let e=this._writableState;e.corked&&(e.corked--,e.writing||sG(this,e))};Si.prototype.setDefaultEncoding=function(t){if(typeof t=="string"&&(t=nWe(t)),!z6.isEncoding(t))throw new ade(t);return this._writableState.defaultEncoding=t,this};function hWe(e,t,o,n,i){let s=t.objectMode?1:o.length;t.length+=s;let a=t.length<t.highWaterMark;return a||(t.needDrain=!0),t.writing||t.corked||t.errored||!t.constructed?(t.buffered.push({chunk:o,encoding:n,callback:i}),t.allBuffers&&n!=="buffer"&&(t.allBuffers=!1),t.allNoop&&i!==rG&&(t.allNoop=!1)):(t.writelen=s,t.writecb=i,t.writing=!0,t.sync=!0,e._write(o,n,t.onwrite),t.sync=!1),a&&!t.errored&&!t.destroyed}function ede(e,t,o,n,i,s,a){t.writelen=n,t.writecb=a,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new V8("write")):o?e._writev(i,t.onwrite):e._write(i,s,t.onwrite),t.sync=!1}function tde(e,t,o,n){--t.pendingcb,n(o),iG(t),$b(e,o)}function xWe(e,t){let o=e._writableState,n=o.sync,i=o.writecb;if(typeof i!="function"){$b(e,new sde);return}o.writing=!1,o.writecb=null,o.length-=o.writelen,o.writelen=0,t?(t.stack,o.errored||(o.errored=t),e._readableState&&!e._readableState.errored&&(e._readableState.errored=t),n?Bx.nextTick(tde,e,o,t,i):tde(e,o,t,i)):(o.buffered.length>o.bufferedIndex&&sG(e,o),n?o.afterWriteTickInfo!==null&&o.afterWriteTickInfo.cb===i?o.afterWriteTickInfo.count++:(o.afterWriteTickInfo={count:1,cb:i,stream:e,state:o},Bx.nextTick(yWe,o.afterWriteTickInfo)):cde(e,o,1,i))}function yWe({stream:e,state:t,count:o,cb:n}){return t.afterWriteTickInfo=null,cde(e,t,o,n)}function cde(e,t,o,n){for(!t.ending&&!e.destroyed&&t.length===0&&t.needDrain&&(t.needDrain=!1,e.emit("drain"));o-- >0;)t.pendingcb--,n();t.destroyed&&iG(t),aG(e,t)}function iG(e){if(e.writing)return;for(let i=e.bufferedIndex;i<e.buffered.length;++i){var t;let{chunk:s,callback:a}=e.buffered[i],l=e.objectMode?1:s.length;e.length-=l,a((t=e.errored)!==null&&t!==void 0?t:new V8("write"))}let o=e[Hb].splice(0);for(let i=0;i<o.length;i++){var n;o[i]((n=e.errored)!==null&&n!==void 0?n:new V8("end"))}q6(e)}function sG(e,t){if(t.corked||t.bufferProcessing||t.destroyed||!t.constructed)return;let{buffered:o,bufferedIndex:n,objectMode:i}=t,s=o.length-n;if(!s)return;let a=n;if(t.bufferProcessing=!0,s>1&&e._writev){t.pendingcb-=s-1;let l=t.allNoop?rG:u=>{for(let p=a;p<o.length;++p)o[p].callback(u)},c=t.allNoop&&a===0?o:ode(o,a);c.allBuffers=t.allBuffers,ede(e,t,!0,t.length,c,"",l),q6(t)}else{do{let{chunk:l,encoding:c,callback:u}=o[a];o[a++]=null;let p=i?1:l.length;ede(e,t,!1,p,l,c,u)}while(a<o.length&&!t.writing);a===o.length?q6(t):a>256?(o.splice(0,a),t.bufferedIndex=0):t.bufferedIndex=a}t.bufferProcessing=!1}Si.prototype._write=function(e,t,o){if(this._writev)this._writev([{chunk:e,encoding:t}],o);else throw new dWe("_write()")};Si.prototype._writev=null;Si.prototype.end=function(e,t,o){let n=this._writableState;typeof e=="function"?(o=e,e=null,t=null):typeof t=="function"&&(o=t,t=null);let i;if(e!=null){let s=lde(this,e,t);s instanceof tWe&&(i=s)}return n.corked&&(n.corked=1,this.uncork()),i||(!n.errored&&!n.ending?(n.ending=!0,aG(this,n,!0),n.ended=!0):n.finished?i=new mWe("end"):n.destroyed&&(i=new V8("end"))),typeof o=="function"&&(i||n.finished?Bx.nextTick(o,i):n[Hb].push(o)),this};function G6(e){return e.ending&&!e.destroyed&&e.constructed&&e.length===0&&!e.errored&&e.buffered.length===0&&!e.finished&&!e.writing&&!e.errorEmitted&&!e.closeEmitted}function bWe(e,t){let o=!1;function n(i){if(o){$b(e,i??sde());return}if(o=!0,t.pendingcb--,i){let s=t[Hb].splice(0);for(let a=0;a<s.length;a++)s[a](i);$b(e,i,t.sync)}else G6(t)&&(t.prefinished=!0,e.emit("prefinish"),t.pendingcb++,Bx.nextTick(nG,e,t))}t.sync=!0,t.pendingcb++;try{e._final(n)}catch(i){n(i)}t.sync=!1}function vWe(e,t){!t.prefinished&&!t.finalCalled&&(typeof e._final=="function"&&!t.destroyed?(t.finalCalled=!0,bWe(e,t)):(t.prefinished=!0,e.emit("prefinish")))}function aG(e,t,o){G6(t)&&(vWe(e,t),t.pendingcb===0&&(o?(t.pendingcb++,Bx.nextTick((n,i)=>{G6(i)?nG(n,i):i.pendingcb--},e,t)):G6(t)&&(t.pendingcb++,nG(e,t))))}function nG(e,t){t.pendingcb--,t.finished=!0;let o=t[Hb].splice(0);for(let n=0;n<o.length;n++)o[n]();if(e.emit("finish"),t.autoDestroy){let n=e._readableState;(!n||n.autoDestroy&&(n.endEmitted||n.readable===!1))&&e.destroy()}}oWe(Si.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(e){this._writableState&&(this._writableState.destroyed=e)}},writable:{__proto__:null,get(){let e=this._writableState;return!!e&&e.writable!==!1&&!e.destroyed&&!e.errored&&!e.ending&&!e.ended},set(e){this._writableState&&(this._writableState.writable=!!e)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let e=this._writableState;return e?!e.destroyed&&!e.ending&&e.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var SWe=j6.destroy;Si.prototype.destroy=function(e,t){let o=this._writableState;return!o.destroyed&&(o.bufferedIndex<o.buffered.length||o[Hb].length)&&Bx.nextTick(iG,o),SWe.call(this,e,t),this};Si.prototype._undestroy=j6.undestroy;Si.prototype._destroy=function(e,t){t(e)};Si.prototype[sWe.captureRejectionSymbol]=function(e){this.destroy(e)};var oG;function ude(){return oG===void 0&&(oG={}),oG}Si.fromWeb=function(e,t){return ude().newStreamWritableFromWritableStream(e,t)};Si.toWeb=function(e){return ude().newWritableStreamFromStreamWritable(e)}});var Cde=Ro((VHt,Ade)=>{d();var lG=V0(),wWe=Yl(),{isReadable:kWe,isWritable:EWe,isIterable:pde,isNodeStream:AWe,isReadableNodeStream:mde,isWritableNodeStream:fde,isDuplexNodeStream:CWe,isReadableStream:gde,isWritableStream:hde}=_p(),xde=lf(),{AbortError:kde,codes:{ERR_INVALID_ARG_TYPE:TWe,ERR_INVALID_RETURN_VALUE:yde}}=Oa(),{destroyer:Gb}=Dx(),IWe=Op(),Ede=X8(),DWe=W6(),{createDeferredPromise:bde}=yl(),vde=Kz(),Sde=globalThis.Blob||wWe.Blob,MWe=typeof Sde<"u"?function(t){return t instanceof Sde}:function(t){return!1},NWe=globalThis.AbortController||Nb().AbortController,{FunctionPrototypeCall:wde}=di(),og=class extends IWe{constructor(t){super(t),t?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),t?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};Ade.exports=function e(t,o){if(CWe(t))return t;if(mde(t))return zb({readable:t});if(fde(t))return zb({writable:t});if(AWe(t))return zb({writable:!1,readable:!1});if(gde(t))return zb({readable:Ede.fromWeb(t)});if(hde(t))return zb({writable:DWe.fromWeb(t)});if(typeof t=="function"){let{value:i,write:s,final:a,destroy:l}=BWe(t);if(pde(i))return vde(og,i,{objectMode:!0,write:s,final:a,destroy:l});let c=i?.then;if(typeof c=="function"){let u,p=wde(c,i,m=>{if(m!=null)throw new yde("nully","body",m)},m=>{Gb(u,m)});return u=new og({objectMode:!0,readable:!1,write:s,final(m){a(async()=>{try{await p,lG.nextTick(m,null)}catch(g){lG.nextTick(m,g)}})},destroy:l})}throw new yde("Iterable, AsyncIterable or AsyncFunction",o,i)}if(MWe(t))return e(t.arrayBuffer());if(pde(t))return vde(og,t,{objectMode:!0,writable:!1});if(gde(t?.readable)&&hde(t?.writable))return og.fromWeb(t);if(typeof t?.writable=="object"||typeof t?.readable=="object"){let i=t!=null&&t.readable?mde(t?.readable)?t?.readable:e(t.readable):void 0,s=t!=null&&t.writable?fde(t?.writable)?t?.writable:e(t.writable):void 0;return zb({readable:i,writable:s})}let n=t?.then;if(typeof n=="function"){let i;return wde(n,t,s=>{s!=null&&i.push(s),i.push(null)},s=>{Gb(i,s)}),i=new og({objectMode:!0,writable:!1,read(){}})}throw new TWe(o,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],t)};function BWe(e){let{promise:t,resolve:o}=bde(),n=new NWe,i=n.signal;return{value:e((async function*(){for(;;){let a=t;t=null;let{chunk:l,done:c,cb:u}=await a;if(lG.nextTick(u),c)return;if(i.aborted)throw new kde(void 0,{cause:i.reason});({promise:t,resolve:o}=bde()),yield l}})(),{signal:i}),write(a,l,c){let u=o;o=null,u({chunk:a,done:!1,cb:c})},final(a){let l=o;o=null,l({done:!0,cb:a})},destroy(a,l){n.abort(),l(a)}}}function zb(e){let t=e.readable&&typeof e.readable.read!="function"?Ede.wrap(e.readable):e.readable,o=e.writable,n=!!kWe(t),i=!!EWe(o),s,a,l,c,u;function p(m){let g=c;c=null,g?g(m):m&&u.destroy(m)}return u=new og({readableObjectMode:!!(t!=null&&t.readableObjectMode),writableObjectMode:!!(o!=null&&o.writableObjectMode),readable:n,writable:i}),i&&(xde(o,m=>{i=!1,m&&Gb(t,m),p(m)}),u._write=function(m,g,y){o.write(m,g)?y():s=y},u._final=function(m){o.end(),a=m},o.on("drain",function(){if(s){let m=s;s=null,m()}}),o.on("finish",function(){if(a){let m=a;a=null,m()}})),n&&(xde(t,m=>{n=!1,m&&Gb(t,m),p(m)}),t.on("readable",function(){if(l){let m=l;l=null,m()}}),t.on("end",function(){u.push(null)}),u._read=function(){for(;;){let m=t.read();if(m===null){l=u._read;return}if(!u.push(m))return}}),u._destroy=function(m,g){!m&&c!==null&&(m=new kde),l=null,s=null,a=null,c===null?g(m):(c=g,Gb(o,m),Gb(t,m))},u}});var Op=Ro((tzt,Dde)=>{"use strict";d();var{ObjectDefineProperties:PWe,ObjectGetOwnPropertyDescriptor:cf,ObjectKeys:_We,ObjectSetPrototypeOf:Tde}=di();Dde.exports=Bd;var dG=X8(),Pu=W6();Tde(Bd.prototype,dG.prototype);Tde(Bd,dG);{let e=_We(Pu.prototype);for(let t=0;t<e.length;t++){let o=e[t];Bd.prototype[o]||(Bd.prototype[o]=Pu.prototype[o])}}function Bd(e){if(!(this instanceof Bd))return new Bd(e);dG.call(this,e),Pu.call(this,e),e?(this.allowHalfOpen=e.allowHalfOpen!==!1,e.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),e.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}PWe(Bd.prototype,{writable:{__proto__:null,...cf(Pu.prototype,"writable")},writableHighWaterMark:{__proto__:null,...cf(Pu.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...cf(Pu.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...cf(Pu.prototype,"writableBuffer")},writableLength:{__proto__:null,...cf(Pu.prototype,"writableLength")},writableFinished:{__proto__:null,...cf(Pu.prototype,"writableFinished")},writableCorked:{__proto__:null,...cf(Pu.prototype,"writableCorked")},writableEnded:{__proto__:null,...cf(Pu.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...cf(Pu.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(e){this._readableState&&this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}});var cG;function Ide(){return cG===void 0&&(cG={}),cG}Bd.fromWeb=function(e,t){return Ide().newStreamDuplexFromReadableWritablePair(e,t)};Bd.toWeb=function(e){return Ide().newReadableWritablePairFromDuplex(e)};var uG;Bd.from=function(e){return uG||(uG=Cde()),uG(e,"body")}});var fG=Ro((nzt,Nde)=>{"use strict";d();var{ObjectSetPrototypeOf:Mde,Symbol:RWe}=di();Nde.exports=uf;var{ERR_METHOD_NOT_IMPLEMENTED:LWe}=Oa().codes,mG=Op(),{getHighWaterMark:OWe}=Y8();Mde(uf.prototype,mG.prototype);Mde(uf,mG);var t5=RWe("kCallback");function uf(e){if(!(this instanceof uf))return new uf(e);let t=e?OWe(this,e,"readableHighWaterMark",!0):null;t===0&&(e={...e,highWaterMark:null,readableHighWaterMark:t,writableHighWaterMark:e.writableHighWaterMark||0}),mG.call(this,e),this._readableState.sync=!1,this[t5]=null,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",FWe)}function pG(e){typeof this._flush=="function"&&!this.destroyed?this._flush((t,o)=>{if(t){e?e(t):this.destroy(t);return}o!=null&&this.push(o),this.push(null),e&&e()}):(this.push(null),e&&e())}function FWe(){this._final!==pG&&pG.call(this)}uf.prototype._final=pG;uf.prototype._transform=function(e,t,o){throw new LWe("_transform()")};uf.prototype._write=function(e,t,o){let n=this._readableState,i=this._writableState,s=n.length;this._transform(e,t,(a,l)=>{if(a){o(a);return}l!=null&&this.push(l),i.ended||s===n.length||n.length<n.highWaterMark?o():this[t5]=o})};uf.prototype._read=function(){if(this[t5]){let e=this[t5];this[t5]=null,e()}}});var hG=Ro((izt,Pde)=>{"use strict";d();var{ObjectSetPrototypeOf:Bde}=di();Pde.exports=qb;var gG=fG();Bde(qb.prototype,gG.prototype);Bde(qb,gG);function qb(e){if(!(this instanceof qb))return new qb(e);gG.call(this,e)}qb.prototype._transform=function(e,t,o){o(null,e)}});var Z6=Ro((azt,Fde)=>{d();var o5=V0(),{ArrayIsArray:UWe,Promise:$We,SymbolAsyncIterator:HWe,SymbolDispose:zWe}=di(),Q6=lf(),{once:GWe}=yl(),qWe=Dx(),_de=Op(),{aggregateTwoErrors:jWe,codes:{ERR_INVALID_ARG_TYPE:AG,ERR_INVALID_RETURN_VALUE:xG,ERR_MISSING_ARGS:WWe,ERR_STREAM_DESTROYED:KWe,ERR_STREAM_PREMATURE_CLOSE:YWe},AbortError:QWe}=Oa(),{validateFunction:ZWe,validateAbortSignal:XWe}=_b(),{isIterable:Px,isReadable:yG,isReadableNodeStream:Y6,isNodeStream:Rde,isTransformStream:jb,isWebStream:JWe,isReadableStream:bG,isReadableFinished:VWe}=_p(),eKe=globalThis.AbortController||Nb().AbortController,vG,SG,wG;function Lde(e,t,o){let n=!1;e.on("close",()=>{n=!0});let i=Q6(e,{readable:t,writable:o},s=>{n=!s});return{destroy:s=>{n||(n=!0,qWe.destroyer(e,s||new KWe("pipe")))},cleanup:i}}function tKe(e){return ZWe(e[e.length-1],"streams[stream.length - 1]"),e.pop()}function kG(e){if(Px(e))return e;if(Y6(e))return oKe(e);throw new AG("val",["Readable","Iterable","AsyncIterable"],e)}async function*oKe(e){SG||(SG=X8()),yield*SG.prototype[HWe].call(e)}async function K6(e,t,o,{end:n}){let i,s=null,a=u=>{if(u&&(i=u),s){let p=s;s=null,p()}},l=()=>new $We((u,p)=>{i?p(i):s=()=>{i?p(i):u()}});t.on("drain",a);let c=Q6(t,{readable:!1},a);try{t.writableNeedDrain&&await l();for await(let u of e)t.write(u)||await l();n&&(t.end(),await l()),o()}catch(u){o(i!==u?jWe(i,u):u)}finally{c(),t.off("drain",a)}}async function EG(e,t,o,{end:n}){jb(t)&&(t=t.writable);let i=t.getWriter();try{for await(let s of e)await i.ready,i.write(s).catch(()=>{});await i.ready,n&&await i.close(),o()}catch(s){try{await i.abort(s),o(s)}catch(a){o(a)}}}function nKe(...e){return Ode(e,GWe(tKe(e)))}function Ode(e,t,o){if(e.length===1&&UWe(e[0])&&(e=e[0]),e.length<2)throw new WWe("streams");let n=new eKe,i=n.signal,s=o?.signal,a=[];XWe(s,"options.signal");function l(){b(new QWe)}wG=wG||yl().addAbortListener;let c;s&&(c=wG(s,l));let u,p,m=[],g=0;function y(I){b(I,--g===0)}function b(I,N){var _;if(I&&(!u||u.code==="ERR_STREAM_PREMATURE_CLOSE")&&(u=I),!(!u&&!N)){for(;m.length;)m.shift()(u);(_=c)===null||_===void 0||_[zWe](),n.abort(),N&&(u||a.forEach(O=>O()),o5.nextTick(t,u,p))}}let v;for(let I=0;I<e.length;I++){let N=e[I],_=I<e.length-1,O=I>0,F=_||o?.end!==!1,J=I===e.length-1;if(Rde(N)){let G=function(te){te&&te.name!=="AbortError"&&te.code!=="ERR_STREAM_PREMATURE_CLOSE"&&y(te)};var C=G;if(F){let{destroy:te,cleanup:K}=Lde(N,_,O);m.push(te),yG(N)&&J&&a.push(K)}N.on("error",G),yG(N)&&J&&a.push(()=>{N.removeListener("error",G)})}if(I===0)if(typeof N=="function"){if(v=N({signal:i}),!Px(v))throw new xG("Iterable, AsyncIterable or Stream","source",v)}else Px(N)||Y6(N)||jb(N)?v=N:v=_de.from(N);else if(typeof N=="function"){if(jb(v)){var E;v=kG((E=v)===null||E===void 0?void 0:E.readable)}else v=kG(v);if(v=N(v,{signal:i}),_){if(!Px(v,!0))throw new xG("AsyncIterable",`transform[${I-1}]`,v)}else{var A;vG||(vG=hG());let G=new vG({objectMode:!0}),te=(A=v)===null||A===void 0?void 0:A.then;if(typeof te=="function")g++,te.call(v,le=>{p=le,le!=null&&G.write(le),F&&G.end(),o5.nextTick(y)},le=>{G.destroy(le),o5.nextTick(y,le)});else if(Px(v,!0))g++,K6(v,G,y,{end:F});else if(bG(v)||jb(v)){let le=v.readable||v;g++,K6(le,G,y,{end:F})}else throw new xG("AsyncIterable or Promise","destination",v);v=G;let{destroy:K,cleanup:oe}=Lde(v,!1,!0);m.push(K),J&&a.push(oe)}}else if(Rde(N)){if(Y6(v)){g+=2;let G=rKe(v,N,y,{end:F});yG(N)&&J&&a.push(G)}else if(jb(v)||bG(v)){let G=v.readable||v;g++,K6(G,N,y,{end:F})}else if(Px(v))g++,K6(v,N,y,{end:F});else throw new AG("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],v);v=N}else if(JWe(N)){if(Y6(v))g++,EG(kG(v),N,y,{end:F});else if(bG(v)||Px(v))g++,EG(v,N,y,{end:F});else if(jb(v))g++,EG(v.readable,N,y,{end:F});else throw new AG("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],v);v=N}else v=_de.from(N)}return(i!=null&&i.aborted||s!=null&&s.aborted)&&o5.nextTick(l),v}function rKe(e,t,o,{end:n}){let i=!1;if(t.on("close",()=>{i||o(new YWe)}),e.pipe(t,{end:!1}),n){let a=function(){i=!0,t.end()};var s=a;VWe(e)?o5.nextTick(a):e.once("end",a)}else o();return Q6(e,{readable:!0,writable:!1},a=>{let l=e._readableState;a&&a.code==="ERR_STREAM_PREMATURE_CLOSE"&&l&&l.ended&&!l.errored&&!l.errorEmitted?e.once("end",o).once("error",o):o(a)}),Q6(t,{readable:!1,writable:!0},o)}Fde.exports={pipelineImpl:Ode,pipeline:nKe}});var TG=Ro((czt,qde)=>{"use strict";d();var{pipeline:iKe}=Z6(),X6=Op(),{destroyer:sKe}=Dx(),{isNodeStream:J6,isReadable:Ude,isWritable:$de,isWebStream:CG,isTransformStream:_x,isWritableStream:Hde,isReadableStream:zde}=_p(),{AbortError:aKe,codes:{ERR_INVALID_ARG_VALUE:Gde,ERR_MISSING_ARGS:lKe}}=Oa(),cKe=lf();qde.exports=function(...t){if(t.length===0)throw new lKe("streams");if(t.length===1)return X6.from(t[0]);let o=[...t];if(typeof t[0]=="function"&&(t[0]=X6.from(t[0])),typeof t[t.length-1]=="function"){let y=t.length-1;t[y]=X6.from(t[y])}for(let y=0;y<t.length;++y)if(!(!J6(t[y])&&!CG(t[y]))){if(y<t.length-1&&!(Ude(t[y])||zde(t[y])||_x(t[y])))throw new Gde(`streams[${y}]`,o[y],"must be readable");if(y>0&&!($de(t[y])||Hde(t[y])||_x(t[y])))throw new Gde(`streams[${y}]`,o[y],"must be writable")}let n,i,s,a,l;function c(y){let b=a;a=null,b?b(y):y?l.destroy(y):!g&&!m&&l.destroy()}let u=t[0],p=iKe(t,c),m=!!($de(u)||Hde(u)||_x(u)),g=!!(Ude(p)||zde(p)||_x(p));if(l=new X6({writableObjectMode:!!(u!=null&&u.writableObjectMode),readableObjectMode:!!(p!=null&&p.readableObjectMode),writable:m,readable:g}),m){if(J6(u))l._write=function(b,v,E){u.write(b,v)?E():n=E},l._final=function(b){u.end(),i=b},u.on("drain",function(){if(n){let b=n;n=null,b()}});else if(CG(u)){let v=(_x(u)?u.writable:u).getWriter();l._write=async function(E,A,C){try{await v.ready,v.write(E).catch(()=>{}),C()}catch(I){C(I)}},l._final=async function(E){try{await v.ready,v.close().catch(()=>{}),i=E}catch(A){E(A)}}}let y=_x(p)?p.readable:p;cKe(y,()=>{if(i){let b=i;i=null,b()}})}if(g){if(J6(p))p.on("readable",function(){if(s){let y=s;s=null,y()}}),p.on("end",function(){l.push(null)}),l._read=function(){for(;;){let y=p.read();if(y===null){s=l._read;return}if(!l.push(y))return}};else if(CG(p)){let b=(_x(p)?p.readable:p).getReader();l._read=async function(){for(;;)try{let{value:v,done:E}=await b.read();if(!l.push(v))return;if(E){l.push(null);return}}catch{return}}}}return l._destroy=function(y,b){!y&&a!==null&&(y=new aKe),s=null,n=null,i=null,a===null?b(y):(a=b,J6(p)&&sKe(p,y))},l}});var epe=Ro((dzt,MG)=>{"use strict";d();var uKe=globalThis.AbortController||Nb().AbortController,{codes:{ERR_INVALID_ARG_VALUE:dKe,ERR_INVALID_ARG_TYPE:n5,ERR_MISSING_ARGS:pKe,ERR_OUT_OF_RANGE:mKe},AbortError:Fp}=Oa(),{validateAbortSignal:Rx,validateInteger:jde,validateObject:Lx}=_b(),fKe=di().Symbol("kWeak"),gKe=di().Symbol("kResistStopPropagation"),{finished:hKe}=lf(),xKe=TG(),{addAbortSignalNoValidate:yKe}=K8(),{isWritable:bKe,isNodeStream:vKe}=_p(),{deprecate:SKe}=yl(),{ArrayPrototypePush:wKe,Boolean:kKe,MathFloor:Wde,Number:EKe,NumberIsNaN:AKe,Promise:Kde,PromiseReject:Yde,PromiseResolve:CKe,PromisePrototypeThen:Qde,Symbol:Xde}=di(),V6=Xde("kEmpty"),Zde=Xde("kEof");function TKe(e,t){if(t!=null&&Lx(t,"options"),t?.signal!=null&&Rx(t.signal,"options.signal"),vKe(e)&&!bKe(e))throw new dKe("stream",e,"must be writable");let o=xKe(this,e);return t!=null&&t.signal&&yKe(t.signal,o),o}function eC(e,t){if(typeof e!="function")throw new n5("fn",["Function","AsyncFunction"],e);t!=null&&Lx(t,"options"),t?.signal!=null&&Rx(t.signal,"options.signal");let o=1;t?.concurrency!=null&&(o=Wde(t.concurrency));let n=o-1;return t?.highWaterMark!=null&&(n=Wde(t.highWaterMark)),jde(o,"options.concurrency",1),jde(n,"options.highWaterMark",0),n+=o,async function*(){let s=yl().AbortSignalAny([t?.signal].filter(kKe)),a=this,l=[],c={signal:s},u,p,m=!1,g=0;function y(){m=!0,b()}function b(){g-=1,v()}function v(){p&&!m&&g<o&&l.length<n&&(p(),p=null)}async function E(){try{for await(let A of a){if(m)return;if(s.aborted)throw new Fp;try{if(A=e(A,c),A===V6)continue;A=CKe(A)}catch(C){A=Yde(C)}g+=1,Qde(A,b,y),l.push(A),u&&(u(),u=null),!m&&(l.length>=n||g>=o)&&await new Kde(C=>{p=C})}l.push(Zde)}catch(A){let C=Yde(A);Qde(C,b,y),l.push(C)}finally{m=!0,u&&(u(),u=null)}}E();try{for(;;){for(;l.length>0;){let A=await l[0];if(A===Zde)return;if(s.aborted)throw new Fp;A!==V6&&(yield A),l.shift(),v()}await new Kde(A=>{u=A})}}finally{m=!0,p&&(p(),p=null)}}.call(this)}function IKe(e=void 0){return e!=null&&Lx(e,"options"),e?.signal!=null&&Rx(e.signal,"options.signal"),async function*(){let o=0;for await(let i of this){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new Fp({cause:e.signal.reason});yield[o++,i]}}.call(this)}async function Jde(e,t=void 0){for await(let o of DG.call(this,e,t))return!0;return!1}async function DKe(e,t=void 0){if(typeof e!="function")throw new n5("fn",["Function","AsyncFunction"],e);return!await Jde.call(this,async(...o)=>!await e(...o),t)}async function MKe(e,t){for await(let o of DG.call(this,e,t))return o}async function NKe(e,t){if(typeof e!="function")throw new n5("fn",["Function","AsyncFunction"],e);async function o(n,i){return await e(n,i),V6}for await(let n of eC.call(this,o,t));}function DG(e,t){if(typeof e!="function")throw new n5("fn",["Function","AsyncFunction"],e);async function o(n,i){return await e(n,i)?n:V6}return eC.call(this,o,t)}var IG=class extends pKe{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function BKe(e,t,o){var n;if(typeof e!="function")throw new n5("reducer",["Function","AsyncFunction"],e);o!=null&&Lx(o,"options"),o?.signal!=null&&Rx(o.signal,"options.signal");let i=arguments.length>1;if(o!=null&&(n=o.signal)!==null&&n!==void 0&&n.aborted){let u=new Fp(void 0,{cause:o.signal.reason});throw this.once("error",()=>{}),await hKe(this.destroy(u)),u}let s=new uKe,a=s.signal;if(o!=null&&o.signal){let u={once:!0,[fKe]:this,[gKe]:!0};o.signal.addEventListener("abort",()=>s.abort(),u)}let l=!1;try{for await(let u of this){var c;if(l=!0,o!=null&&(c=o.signal)!==null&&c!==void 0&&c.aborted)throw new Fp;i?t=await e(t,u,{signal:a}):(t=u,i=!0)}if(!l&&!i)throw new IG}finally{s.abort()}return t}async function PKe(e){e!=null&&Lx(e,"options"),e?.signal!=null&&Rx(e.signal,"options.signal");let t=[];for await(let n of this){var o;if(e!=null&&(o=e.signal)!==null&&o!==void 0&&o.aborted)throw new Fp(void 0,{cause:e.signal.reason});wKe(t,n)}return t}function _Ke(e,t){let o=eC.call(this,e,t);return async function*(){for await(let i of o)yield*i}.call(this)}function Vde(e){if(e=EKe(e),AKe(e))return 0;if(e<0)throw new mKe("number",">= 0",e);return e}function RKe(e,t=void 0){return t!=null&&Lx(t,"options"),t?.signal!=null&&Rx(t.signal,"options.signal"),e=Vde(e),async function*(){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new Fp;for await(let s of this){var i;if(t!=null&&(i=t.signal)!==null&&i!==void 0&&i.aborted)throw new Fp;e--<=0&&(yield s)}}.call(this)}function LKe(e,t=void 0){return t!=null&&Lx(t,"options"),t?.signal!=null&&Rx(t.signal,"options.signal"),e=Vde(e),async function*(){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new Fp;for await(let s of this){var i;if(t!=null&&(i=t.signal)!==null&&i!==void 0&&i.aborted)throw new Fp;if(e-- >0&&(yield s),e<=0)return}}.call(this)}MG.exports.streamReturningOperators={asIndexedPairs:SKe(IKe,"readable.asIndexedPairs will be removed in a future version."),drop:RKe,filter:DG,flatMap:_Ke,map:eC,take:LKe,compose:TKe};MG.exports.promiseReturningOperators={every:DKe,forEach:NKe,reduce:BKe,toArray:PKe,some:Jde,find:MKe}});var NG=Ro((mzt,tpe)=>{"use strict";d();var{ArrayPrototypePop:OKe,Promise:FKe}=di(),{isIterable:UKe,isNodeStream:$Ke,isWebStream:HKe}=_p(),{pipelineImpl:zKe}=Z6(),{finished:GKe}=lf();BG();function qKe(...e){return new FKe((t,o)=>{let n,i,s=e[e.length-1];if(s&&typeof s=="object"&&!$Ke(s)&&!UKe(s)&&!HKe(s)){let a=OKe(e);n=a.signal,i=a.end}zKe(e,(a,l)=>{a?o(a):t(l)},{signal:n,end:i})})}tpe.exports={finished:GKe,pipeline:qKe}});var BG=Ro((gzt,upe)=>{"use strict";d();var{Buffer:jKe}=Yl(),{ObjectDefineProperty:df,ObjectKeys:rpe,ReflectApply:ipe}=di(),{promisify:{custom:spe}}=yl(),{streamReturningOperators:ope,promiseReturningOperators:npe}=epe(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:ape}}=Oa(),WKe=TG(),{setDefaultHighWaterMark:KKe,getDefaultHighWaterMark:YKe}=Y8(),{pipeline:lpe}=Z6(),{destroyer:QKe}=Dx(),cpe=lf(),PG=NG(),r5=_p(),Qr=upe.exports=P6().Stream;Qr.isDestroyed=r5.isDestroyed;Qr.isDisturbed=r5.isDisturbed;Qr.isErrored=r5.isErrored;Qr.isReadable=r5.isReadable;Qr.isWritable=r5.isWritable;Qr.Readable=X8();for(let e of rpe(ope)){let o=function(...n){if(new.target)throw ape();return Qr.Readable.from(ipe(t,this,n))},t=ope[e];df(o,"name",{__proto__:null,value:t.name}),df(o,"length",{__proto__:null,value:t.length}),df(Qr.Readable.prototype,e,{__proto__:null,value:o,enumerable:!1,configurable:!0,writable:!0})}for(let e of rpe(npe)){let o=function(...n){if(new.target)throw ape();return ipe(t,this,n)},t=npe[e];df(o,"name",{__proto__:null,value:t.name}),df(o,"length",{__proto__:null,value:t.length}),df(Qr.Readable.prototype,e,{__proto__:null,value:o,enumerable:!1,configurable:!0,writable:!0})}Qr.Writable=W6();Qr.Duplex=Op();Qr.Transform=fG();Qr.PassThrough=hG();Qr.pipeline=lpe;var{addAbortSignal:ZKe}=K8();Qr.addAbortSignal=ZKe;Qr.finished=cpe;Qr.destroy=QKe;Qr.compose=WKe;Qr.setDefaultHighWaterMark=KKe;Qr.getDefaultHighWaterMark=YKe;df(Qr,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return PG}});df(lpe,spe,{__proto__:null,enumerable:!0,get(){return PG.pipeline}});df(cpe,spe,{__proto__:null,enumerable:!0,get(){return PG.finished}});Qr.Stream=Qr;Qr._isUint8Array=function(t){return t instanceof Uint8Array};Qr._uint8ArrayToBuffer=function(t){return jKe.from(t.buffer,t.byteOffset,t.byteLength)}});var dpe=Ro((xzt,Xi)=>{"use strict";d();var $s=BG(),XKe=NG(),JKe=$s.Readable.destroy;Xi.exports=$s.Readable;Xi.exports._uint8ArrayToBuffer=$s._uint8ArrayToBuffer;Xi.exports._isUint8Array=$s._isUint8Array;Xi.exports.isDisturbed=$s.isDisturbed;Xi.exports.isErrored=$s.isErrored;Xi.exports.isReadable=$s.isReadable;Xi.exports.Readable=$s.Readable;Xi.exports.Writable=$s.Writable;Xi.exports.Duplex=$s.Duplex;Xi.exports.Transform=$s.Transform;Xi.exports.PassThrough=$s.PassThrough;Xi.exports.addAbortSignal=$s.addAbortSignal;Xi.exports.finished=$s.finished;Xi.exports.destroy=$s.destroy;Xi.exports.destroy=JKe;Xi.exports.pipeline=$s.pipeline;Xi.exports.compose=$s.compose;Object.defineProperty($s,"promises",{configurable:!0,enumerable:!0,get(){return XKe}});Xi.exports.Stream=$s.Stream;Xi.exports.default=Xi.exports});var tC,Ox,Fx,oC=x(()=>{d();Ho();Wi();tC=Ml(dpe(),1),Ox=class extends tC.Readable{pending=!0;_path="<unknown>";_bytesRead=0;reader;ready;constructor(t={},o){super({...t,encoding:t.encoding??void 0}),this.ready=Promise.resolve(o).then(n=>{this._path=n.vfs.path;let i=n.readableWebStream({start:t.start,end:t.end});this.reader=i.getReader(),this.pending=!1}).catch(n=>{this.destroy(n)})}async _read(){try{if(await this.ready,!this.reader)return;let{done:t,value:o}=await this.reader.read();if(t){this.push(null);return}this._bytesRead+=o.byteLength,this.push(o)}catch(t){this.destroy(new zn(Ie.EIO,t.toString()))}}close(t=()=>null){try{this.destroy(),this.emit("close"),t(null)}catch(o){t(new zn(Ie.EIO,o.toString()))}}get path(){return this._path}get bytesRead(){return this._bytesRead}wrap(t){return super.wrap(t),this}},Fx=class extends tC.Writable{pending=!0;_path="<unknown>";_bytesWritten=0;writer;ready;constructor(t={},o){super(t),this.ready=Promise.resolve(o).then(n=>{this._path=n.vfs.path;let i=n.writableWebStream({start:t.start});this.writer=i.getWriter(),this.pending=!1}).catch(n=>this.destroy(n))}async _write(t,o,n){if(await this.ready,!this.writer)return n(Xo(ve("EAGAIN","write",this._path)));if(o!="buffer")return n(Xo(ve("ENOTSUP","write",this._path)));let i=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);try{await this.writer.write(i),this._bytesWritten+=t.byteLength,n()}catch(s){n(new zn(Ie.EIO,s.toString()))}}async _final(t){if(await this.ready,!this.writer)return t();try{await this.writer.close(),t()}catch(o){t(new zn(Ie.EIO,o.toString()))}}close(t=()=>null){try{this.destroy(),this.emit("close"),t(null)}catch(o){t(new zn(Ie.EIO,o.toString()))}}get path(){return this._path}get bytesWritten(){return this._bytesWritten}}});var a5={};Ao(a5,{FileHandle:()=>Hs,access:()=>WG,appendFile:()=>LG,chmod:()=>zG,chown:()=>$G,constants:()=>rr,copyFile:()=>lC,cp:()=>cC,exists:()=>Ux,glob:()=>ZG,lchmod:()=>GG,lchown:()=>HG,link:()=>OG,lstat:()=>i5,lutimes:()=>qG,mkdir:()=>$x,mkdtemp:()=>KG,mkdtempDisposable:()=>eYe,open:()=>_u,opendir:()=>YG,readFile:()=>rC,readdir:()=>Z0,readlink:()=>UG,realpath:()=>jG,rename:()=>_G,rm:()=>s5,rmdir:()=>sC,stat:()=>Wb,statfs:()=>QG,symlink:()=>FG,truncate:()=>RG,unlink:()=>nC,utimes:()=>aC,watch:()=>VKe,writeFile:()=>iC});async function _G(e,t){await Jle.call(this,e,t)}async function Ux(e){e=Mt(e);try{let{fs:t,path:o}=await _c(this,e);return await t.exists(o)}catch(t){if(t instanceof zn&&t.code=="ENOENT")return!1;throw t}}async function Wb(e,t){e=Mt(e);let{fs:o,path:n}=await _c(this,e),i={syscall:"stat",path:e},s=await o.stat(n).catch(Ic(i));if(dn&&!Fo(this,s,4))throw ve("EACCES",i);return t?.bigint?new Du(s):new xl(s)}async function i5(e,t){e=Mt(e);let o={syscall:"lstat",path:e},{base:n,dir:i}=_i(e),{fs:s,path:a}=await _c(this,i),l=await s.stat(n?So(a,n):a).catch(Ic(o));if(dn&&!Fo(this,l,4))throw ve("EACCES",o);return t?.bigint?new Du(l):new xl(l)}async function RG(e,t=0){let o={stack:[],error:void 0,hasError:!1};try{await Pd(o,await _u.call(this,e,"r+"),!0).truncate(t)}catch(n){o.error=n,o.hasError=!0}finally{let n=_d(o);n&&await n}}async function nC(e){e=Mt(e);let{fs:t,path:o}=In(e,this),n={syscall:"unlink",path:e},i=await t.stat(o).catch(Ic(n));if(dn&&!Fo(this,i,2))throw ve("EACCES",n);await t.unlink(o).catch(Ic(n)),Fs(this,"rename",e.toString())}async function _u(e,t="r",o=420){let n=await Ex(this,e,{flag:t,mode:o});return new Hs(this,F8(n))}async function rC(e,t){let o={stack:[],error:void 0,hasError:!1};try{let n=Dd(t,null,"r",292);return await Pd(o,typeof e=="object"&&"fd"in e?e:await _u.call(this,e,n.flag,n.mode),!0).readFile(n)}catch(n){o.error=n,o.hasError=!0}finally{let n=_d(o);n&&await n}}async function iC(e,t,o){let n={stack:[],error:void 0,hasError:!1};try{let i=Dd(o,"utf8","w+",420),s=Pd(n,e instanceof Hs?e:await _u.call(this,e.toString(),i.flag,i.mode),!0),a=typeof t=="string"?t:t instanceof DataView?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t;if(typeof a!="string"&&!(a instanceof Uint8Array))throw new TypeError('The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView. Received '+typeof t);await s.writeFile(a,i)}catch(i){n.error=i,n.hasError=!0}finally{let i=_d(n);i&&await i}}async function LG(e,t,o){let n={stack:[],error:void 0,hasError:!1};try{let i=Dd(o,"utf8","a",420),s=Pc(i.flag),a={syscall:"write",path:e instanceof Hs?e.vfs.path:e.toString()};if(!(s&1024))throw ve("EBADF",a);let l=typeof t=="string"?Up.Buffer.from(t,i.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);await Pd(n,typeof e=="object"&&"fd"in e?e:await _u.call(this,e,i.flag,i.mode),!0).appendFile(l,i)}catch(i){n.error=i,n.hasError=!0}finally{let i=_d(n);i&&await i}}async function sC(e){e=Mt(e);let{fs:t,path:o}=await _c(this,e),n={syscall:"rmdir",path:e},i=await t.stat(o).catch(Ic(n));if(!i)throw ve("ENOENT",n);if(!Dr(i))throw ve("ENOTDIR",n);if(dn&&!Fo(this,i,2))throw ve("EACCES",n);await t.rmdir(o).catch(Ic(n)),Fs(this,"rename",e.toString())}async function $x(e,t){t=typeof t=="object"?t:{mode:t};let o=jl(t?.mode,511);return await Zle.call(this,e,{...t,mode:o})}async function Z0(e,t){e=Mt(e);let o=typeof t=="object"&&t!=null?t:{encoding:t,withFileTypes:!1,recursive:!1},n=await Xle.call(this,e,o),i=[];for(let s of n)o.withFileTypes?i.push(wx.from(s,o.encoding)):o.encoding=="buffer"?i.push(Up.Buffer.from(s.path)):i.push(s.path);return i}async function OG(e,t){return await Vle.call(this,e,t)}async function FG(e,t,o="file"){let n={stack:[],error:void 0,hasError:!1};try{if(!["file","dir","junction"].includes(o))throw new TypeError("Invalid symlink type: "+o);if(t=Mt(t),await Ux.call(this,t))throw ve("EEXIST","symlink",t);let i=Pd(n,await Ex(this,t,{flag:"w+",mode:420,preserveSymlinks:!0}),!0),s=gl(Mt(e,!0));await i.write(s,0,s.length,0),await i.chmod(40960)}catch(i){n.error=i,n.hasError=!0}finally{let i=_d(n);i&&await i}}async function UG(e,t){e=Mt(e);let o=Up.Buffer.from(await y6.call(this,e),"utf-8"),n=typeof t=="object"?t?.encoding:t;return n=="buffer"?o:o.toString(n??"utf-8")}async function $G(e,t,o){let n={stack:[],error:void 0,hasError:!1};try{await Pd(n,await _u.call(this,e,"r+"),!0).chown(t,o)}catch(i){n.error=i,n.hasError=!0}finally{let i=_d(n);i&&await i}}async function HG(e,t,o){let n={stack:[],error:void 0,hasError:!1};try{await Pd(n,await Ex(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).chown(t,o)}catch(i){n.error=i,n.hasError=!0}finally{let i=_d(n);i&&await i}}async function zG(e,t){let o={stack:[],error:void 0,hasError:!1};try{await Pd(o,await _u.call(this,e,"r+"),!0).chmod(t)}catch(n){o.error=n,o.hasError=!0}finally{let n=_d(o);n&&await n}}async function GG(e,t){let o={stack:[],error:void 0,hasError:!1};try{t=jl(t),await Pd(o,await Ex(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).chmod(t)}catch(n){o.error=n,o.hasError=!0}finally{let n=_d(o);n&&await n}}async function aC(e,t,o){let n={stack:[],error:void 0,hasError:!1};try{await Pd(n,await Ex(this,e,{flag:"r+",allowDirectory:!0}),!0).utimes(Tp(t),Tp(o))}catch(i){n.error=i,n.hasError=!0}finally{let i=_d(n);i&&await i}}async function qG(e,t,o){let n={stack:[],error:void 0,hasError:!1};try{await Pd(n,await Ex(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).utimes(Tp(t),Tp(o))}catch(i){n.error=i,n.hasError=!0}finally{let i=_d(n);i&&await i}}async function jG(e,t){let o=typeof t=="string"?t:t?.encoding??"utf8";e=Mt(e);let{fullPath:n}=await _c(this,e);if(o=="utf8"||o=="utf-8")return n;let i=Up.Buffer.from(n,"utf-8");return o=="buffer"?i:i.toString(o)}function VKe(e,t={}){let o=new Mb(this,e.toString(),typeof t!="string"?t:{encoding:t}),n=[],i=!1;o.on("change",(a,l)=>{n.shift()?.({value:{eventType:a,filename:l},done:!1})});function s(){i=!0,o.close();for(let a of n)a({value:null,done:i});return n.length=0,Promise.resolve({value:void 0,done:!0})}return{async next(){if(i)return Promise.resolve({value:void 0,done:i});let{promise:a,resolve:l}=Promise.withResolvers();return n.push(l),a},return:s,throw:s,async[Symbol.asyncDispose](){await s()},[Symbol.asyncIterator](){return this}}}async function WG(e,t=0){if(!dn)return;if(!(await Wb.call(this,e)).hasAccess(t,this))throw ve("EACCES","access",e.toString())}async function s5(e,t){e=Mt(e);let o=await i5.call(this,e).catch(n=>{if(!(n.code=="ENOENT"&&t?.force))throw n});if(o)switch(o.mode&61440){case 16384:if(t?.recursive)for(let n of await Z0.call(this,e))await s5.call(this,So(e,n),t);await sC.call(this,e);break;case 32768:case 40960:case 24576:case 8192:await nC.call(this,e);break;case 4096:case 49152:default:throw ve("ENOSYS","rm",e)}}async function KG(e,t){let o=typeof t=="object"?t?.encoding:t||"utf8",n=xb(e);return await $x.call(this,n),o=="buffer"?Up.Buffer.from(n):n}async function eYe(e,t){let o=xb(e);await $x.call(this,o);let n=()=>s5(o,{recursive:!0,force:!0});return{path:o,remove:n,[Symbol.asyncDispose]:n}}async function lC(e,t,o){if(e=Mt(e),t=Mt(t),o&&o&1&&await Ux.call(this,t))throw ve("EEXIST","copyFile",t);await iC.call(this,t,await rC.call(this,e)),Fs(this,"rename",t.toString())}function YG(e,t){return e=Mt(e),Promise.resolve(new kx(e,this))}async function cC(e,t,o){e=Mt(e),t=Mt(t);let n=await i5.call(this,e);if(o?.errorOnExist&&await Ux.call(this,t))throw ve("EEXIST","cp",t);switch(n.mode&61440){case 16384:{if(!o?.recursive)throw ve("EISDIR","cp",e);let[i]=await Promise.all([Z0.call(this,e,{withFileTypes:!0}),$x.call(this,t,{recursive:!0})]),s=async a=>{o.filter&&!o.filter(So(e,a.name),So(t,a.name))||await cC.call(this,So(e,a.name),So(t,a.name),o)};await Promise.all(i.map(s));break}case 32768:case 40960:await lC.call(this,e,t);break;case 24576:case 8192:case 4096:case 49152:default:throw ve("ENOSYS","cp",e)}o?.preserveTimestamps&&await aC.call(this,t,n.atime,n.mtime)}async function QG(e,t){e=Mt(e);let{fs:o}=In(e,this);return Promise.resolve(d6(o,t?.bigint))}function ZG(e,t){e=Array.isArray(e)?e:[e];let{cwd:o="/",withFileTypes:n=!1,exclude:i=()=>!1}=t||{},s=e.map(hb);async function*a(l){let c=await Z0(l,{withFileTypes:n,encoding:"utf8"});for(let u of c){let p=n?So(u.parentPath,u.name):l+"/"+u;(typeof i!="function"?i.some(m=>D8(m,p)):i(n?u:p))||((await Wb(p)).isDirectory()&&s.some(m=>m.source.includes(".*"))&&(yield*a(p)),s.some(m=>m.test(p.replace(/^\/+/g,"")))&&(yield n?u:p.replace(/^\/+/g,"")))}}return a(o)}var Up,Pd,_d,Hs,z8=x(()=>{d();Up=Ml(Yl(),1);Ho();Pi();bs();ws();Ss();hx();Wl();yz();vx();Ab();U8();Md();Tb();m6();tce();gx();oC();bs();Pd=function(e,t,o){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n,i;if(o){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],o&&(i=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(s){return Promise.reject(s)}}),e.stack.push({value:t,dispose:n,async:o})}else o&&e.stack.push({async:!0});return t},_d=(function(e){return function(t){function o(a){t.error=t.hasError?new e(a,t.error,"An error was suppressed during disposal."):a,t.hasError=!0}var n,i=0;function s(){for(;n=t.stack.pop();)try{if(!n.async&&i===1)return i=0,t.stack.push(n),Promise.resolve().then(s);if(n.dispose){var a=n.dispose.call(n.value);if(n.async)return i|=2,Promise.resolve(a).then(s,function(l){return o(l),s()})}else i|=1}catch(l){o(l)}if(i===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return s()}})(typeof SuppressedError=="function"?SuppressedError:function(e,t,o){var n=new Error(o);return n.name="SuppressedError",n.error=e,n.suppressed=t,n}),Hs=class{context;fd;vfs;constructor(t,o){this.context=t,this.fd=o,this.vfs=na(t,o)}_emitChange(){Fs(this.context,"change",this.vfs.path)}async chown(t,o){await this.vfs.chown(t,o),this._emitChange()}async chmod(t){let o=jl(t,-1);if(o<0)throw ve("EINVAL","chmod",this.vfs.path);await this.vfs.chmod(o),this._emitChange()}datasync(){return this.sync()}async sync(){await this.vfs.sync()}async truncate(t=0){await this.vfs.truncate(t),this._emitChange()}async utimes(t,o){t=Tp(t),o=Tp(o),await this.vfs.utimes(t,o),this._emitChange()}async appendFile(t,o={}){let n=Dd(o,"utf8","a",420);if(!(Pc(n.flag)&1024))throw ve("EBADF","write",this.vfs.path);let s=typeof t=="string"?Up.Buffer.from(t,n.encoding):t;await this.vfs.write(s,0,s.length),this._emitChange()}async read(t,o,n,i){if(typeof o=="object"&&o!=null&&(i=o.position,n=o.length,o=o.offset),!ArrayBuffer.isView(t)&&typeof t=="object"&&(i=t.position,n=t.length,o=t.offset,t=t.buffer),i&&i>Number.MAX_SAFE_INTEGER)throw ve("EINVAL");return typeof i=="bigint"&&(i=Number(i)),i=Number.isSafeInteger(i)?i:this.vfs.position,t||=new Uint8Array(this.vfs.inode.size),o??=0,{bytesRead:await this.vfs.read(t,o,n??t.byteLength-o,i),buffer:t}}async readFile(t){let o=Dd(t,null,"r",292);if(Pc(o.flag)&1)throw ve("EBADF","read",this.vfs.path);let{size:i}=await this.stat(),s=new Uint8Array(i);await this.vfs.read(s,0,i,0);let a=Up.Buffer.from(s);return o.encoding?a.toString(o.encoding):a}readableWebStream(t={}){if(this.vfs.isClosed)throw ve("EBADF","readableWebStream",this.vfs.path);return this.vfs.fs.streamRead(this.vfs.internalPath,t)}writableWebStream(t={}){if(this.vfs.isClosed)throw ve("EBADF","writableWebStream",this.vfs.path);if(this.vfs.inode.flags&ta.Immutable)throw ve("EPERM","writableWebStream",this.vfs.path);return this.vfs.fs.streamWrite(this.vfs.internalPath,t)}readLines(t){if(this.vfs.isClosed||this.vfs.flag&1)throw ve("EBADF","read",this.vfs.path);return ece({input:this.createReadStream(t),crlfDelay:1/0})}[Symbol.asyncDispose](){return this.close()}async stat(t){if(this.vfs.isClosed)throw ve("EBADF","stat",this.vfs.path);if(dn&&!Fo(this.context,this.vfs.inode,4))throw ve("EACCES","stat",this.vfs.path);return t?.bigint?new Du(this.vfs.inode):new xl(this.vfs.inode)}async write(t,o,n,i){let s,a,l;typeof o=="object"&&o!=null&&(n=o.length,i=o.position,o=o.offset),typeof t=="string"?(i=typeof o=="number"?o:null,a=0,s=Up.Buffer.from(t,typeof n=="string"?n:"utf8"),l=s.length):(s=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),a=o??0,l=typeof n=="number"?n:s.byteLength,i=typeof i=="number"?i:null),i??=this.vfs.position;let c=await this.vfs.write(s,a,l,i);return this._emitChange(),{buffer:t,bytesWritten:c}}async writeFile(t,o={}){let n=Dd(o,"utf8","w",420),i=Pc(n.flag);if(!(i&1||i&2))throw ve("EBADF","writeFile",this.vfs.path);let s=typeof t=="string"?Up.Buffer.from(t,n.encoding):t;await this.vfs.write(s,0,s.length,0),this._emitChange()}async close(){await this.vfs.close(),s6(this.context,this.fd)}async writev(t,o){typeof o=="number"&&(this.vfs.position=o);let n=0;for(let i of t)n+=(await this.write(i)).bytesWritten;return{bytesWritten:n,buffers:t}}async readv(t,o){typeof o=="number"&&(this.vfs.position=o);let n=0;for(let i of t)n+=(await this.read(i)).bytesRead;return{bytesRead:n,buffers:t}}createReadStream(t={}){if(this.vfs.isClosed||this.vfs.flag&1)throw ve("EBADF","createReadStream",this.vfs.path);return new Ox(t,this)}createWriteStream(t={}){if(this.vfs.isClosed)throw ve("EBADF","createWriteStream",this.vfs.path);if(this.vfs.inode.flags&ta.Immutable)throw ve("EPERM","createWriteStream",this.vfs.path);if(this.vfs.fs.attributes.has("readonly"))throw ve("EROFS","createWriteStream",this.vfs.path);return new Fx(t,this)}}});function tYe(e,t){t.disableAsyncCache&&e.attributes.set("no_async_preload"),t.caseFold&&e.attributes.set("case_fold",t.caseFold)}function XG(e){return Zae(e)||U9(e)||e instanceof ya}async function uC(e,t=0){if(typeof e!="object"||e==null)throw hl.err(Se("EINVAL","Invalid options on mount configuration"));if(!XG(e))throw hl.err(Se("EINVAL","Invalid mount configuration"));if(e instanceof ya)return await e.ready(),e;U9(e)&&(e={backend:e});for(let[i,s]of Object.entries(e))if(i!="backend"&&XG(s)){if(hl.info("Resolving nested mount configuration: "+i),t>10)throw hl.err(Se("EINVAL","Invalid configuration, too deep and possibly infinite"));e[i]=await uC(s,++t)}let{backend:o}=e;if(typeof o.isAvailable=="function"&&!await o.isAvailable(e))throw hl.err(Se("EPERM","Backend not available: "+o.name));Qae(o,e);let n=await o.create(e);return tYe(n,e),await n.ready(),n}async function ppe(e){if(!XG(e))throw new TypeError("Invalid single mount point configuration");let t=await uC(e);$8("/"),Cb("/",t)}var dC=x(()=>{d();Ho();MH();Cd();S8();ez();W0();z8();H8();vx();Md()});var oYe,sGt,mpe=x(()=>{d();y8();Ho();Wi();Pi();dC();W0();ws();Ss();oYe=new Set(["delete"]),sGt=Math.max(...oYe.values().map(e=>e.length))});var fpe=x(()=>{d();VH()});var l5,JG=x(()=>{d();Ho();Pi();Ss();bs();B8();W0();ws();l5=class extends ya{index;constructor(t,o,n=new j0){super(t,o),this.index=n}usage(){return this.index.usage()}pathsForRename(t,o){if(!this.index.has(t))throw Se("ENOENT");if((yo(o)+"/").startsWith(t+"/"))throw Se("EBUSY");let n=[];for(let[i,s]of this.index.entries()){let a=fx(t,i);if(a.startsWith(".."))continue;let l=So(o,a);l.endsWith("/")&&(l=l.slice(0,-1)),n.push({from:i,to:l,inode:s})}return n.sort((i,s)=>s.from.length-i.from.length),n}async rename(t,o){if(t==o)return;let n=this.pathsForRename(t,o),i=new Map;for(let{from:s,to:a,inode:l}of n){let c=new Uint8Array(l.size);await this.read(s,c,0,l.size),i.set(a,c),this.index.delete(s),await this.remove(s),this.index.has(a)&&await this.remove(a)}n.reverse();for(let{to:s,inode:a}of n){let l=i.get(s);this.index.set(s,a),(a.mode&61440)==16384?await this._mkdir?.(s,a):await this.write(s,l,0)}}renameSync(t,o){if(t==o)return;let n=this.pathsForRename(t,o),i=new Map;for(let{from:s,to:a,inode:l}of n){let c=new Uint8Array(l.size);this.readSync(s,c,0,l.size),i.set(a,c),this.index.delete(s),this.removeSync(s),this.index.has(a)&&this.removeSync(a)}n.reverse();for(let{to:s,inode:a}of n){let l=i.get(s);this.index.set(s,a),(a.mode&61440)==16384?this._mkdirSync?.(s,a):this.writeSync(s,l,0)}}async stat(t){let o=this.index.get(t);if(!o)throw Se("ENOENT");return o}statSync(t){let o=this.index.get(t);if(!o)throw Se("ENOENT");return o}async touch(t,o){(this.index.get(t)??Ko(Se("ENOENT"))).update(o)}touchSync(t,o){(this.index.get(t)??Ko(Se("ENOENT"))).update(o)}_remove(t,o){let n=this.index.get(t);if(!n)throw Se("ENOENT");let i=(n.mode&61440)==16384;if(!i&&!o)throw Se("ENOTDIR");if(i&&o)throw Se("EISDIR");i||this.index.delete(t)}async unlink(t){this._remove(t,!0),await this.remove(t)}unlinkSync(t){this._remove(t,!0),this.removeSync(t)}async rmdir(t){if(this._remove(t,!1),(await this.readdir(t)).length)throw Se("ENOTEMPTY");this.index.delete(t),await this.remove(t)}rmdirSync(t){if(this._remove(t,!1),this.readdirSync(t).length)throw Se("ENOTEMPTY");this.index.delete(t),this.removeSync(t)}create(t,o){if(this.index.has(t))throw Se("EEXIST");let n=this.index.get(yo(t));if(!n)throw Se("ENOENT");let i=this.index._alloc(),s=new Zt({ino:i,data:i+1,mode:o.mode,size:0,uid:n.mode&2048?n.uid:o.uid,gid:n.mode&1024?n.gid:o.gid,nlink:1});return this.index.set(t,s),s}async createFile(t,o){return o.mode|=32768,this.create(t,o)}createFileSync(t,o){return o.mode|=32768,this.create(t,o)}async mkdir(t,o){o.mode|=16384;let n=this.create(t,o);return await this._mkdir?.(t,o),n}mkdirSync(t,o){o.mode|=16384;let n=this.create(t,o);return this._mkdirSync?.(t,o),n}link(t,o){throw Se("ENOSYS")}linkSync(t,o){throw Se("ENOSYS")}async readdir(t){return Object.keys(this.index.directoryEntries(t))}readdirSync(t){return Object.keys(this.index.directoryEntries(t))}async sync(){}syncSync(){}}});var gpe=x(()=>{d();Ho();Wi();Pi();fpe();B8();JG();Wl();bs()});var hpe=x(()=>{d();Wi();W0();ws()});function rYe(e){return e!=null&&typeof e=="object"&&"channel"in e&&"send"in e&&"addHandler"in e&&"removeHandler"in e}function iYe(e){let t=new Map;return{channel:e,send:e.postMessage.bind(e),addHandler(o){let n=i=>o(i.data);t.set(o,n),e.addEventListener("message",n)},removeHandler(o){e.removeEventListener("message",t.get(o))}}}function sYe(e){return{channel:e,send:e.postMessage.bind(e),addHandler:e.on.bind(e,"message"),removeHandler:e.off.bind(e,"message")}}function aYe(e){return{channel:e,send(t){e.send(lYe(t))},addHandler(t){e.addEventListener("message",o=>{t(xpe(o.data))})},removeHandler(t){e.removeEventListener("message",o=>{t(xpe(o.data))})}}}function ype(e){if(rYe(e))return e;if(e instanceof WebSocket)return aYe(e);if("on"in e)return sYe(e);if("addEventListener"in e)return iYe(e);throw pr(Se("EINVAL","Invalid port type"))}function lYe(e){return`Z${VG}${JSON.stringify(e,(t,o)=>{if(t!="_zenfs")return o instanceof Uint8Array?"$"+o.toBase64():o})}`}function xpe(e){if(!e.startsWith("Z"))return{};e=e.slice(1);let t=parseInt(e);if(isNaN(t))return Xo("Ignoring encoded message with missing version"),{};if(e=e.slice(t.toString().length),!P9(e))return Xo("Ignoring encoded message with invalid JSON"),{};if(t!=VG)throw pr(Se("EPROTONOSUPPORT",`Version mismatch in RPC message encoding (got ${t}, expected ${VG})`));return{...JSON.parse(e,(o,n)=>typeof n=="string"&&n.startsWith("$")?Uint8Array.fromBase64(n.slice(1)):n),_zenfs:!0}}function cYe(e){return typeof e=="object"&&e!=null&&"_zenfs"in e&&!!e._zenfs}function eq(e){let t=c5.get(e);t&&(t.timeout&&(clearTimeout(t.timeout),typeof t.timeout=="object"&&t.timeout.unref()),c5.delete(e))}function bpe(e,{port:t,timeout:o=1e3,fs:n}){let i=`
`+new Error().stack.slice(6);if(!t)throw pr(Se("EINVAL","Can not make an RPC request without a port"));let{resolve:s,reject:a,promise:l}=Promise.withResolvers(),c=Math.random().toString(16).slice(5),u=setTimeout(()=>{let m=pr(Se("ETIMEDOUT","RPC request timed out"));m.stack+=i,eq(c),a(m)},o),p={resolve:s,reject:a,promise:l,fs:n,timeout:u};return c5.set(c,p),t.send({...e,_zenfs:!0,id:c,stack:i}),l}function uYe(e,...t){return t.includes(e.method)}function vpe(e){if(!cYe(e))return;if(!c5.has(e.id)){let n=pr(Se("EIO","Invalid RPC id: "+e.id));throw n.stack+=e.stack,n}let{resolve:t,reject:o}=c5.get(e.id);if(e.error){let n=zn.fromJSON({code:"EIO",errno:Ie.EIO,...e.error});n.stack+=e.stack,eq(e.id),o(n);return}eq(e.id),t(uYe(e,"stat","createFile","mkdir")?new Zt(e.value):e.value)}function Spe(e,t){if(!e)throw pr(Se("EINVAL","Cannot attach to non-existent port"));lx("Attached handler to port: "+t.name),e.addHandler(t)}var VG,c5,wpe=x(()=>{d();Ho();Wi();Pi();ws();hx();VG=1;c5=new Map});var kpe,tq=x(()=>{d();kpe=["rename","stat","touch","createFile","unlink","rmdir","mkdir","readdir","exists","link","sync","read","write"]});function Kb(e){class t extends e{async done(){return this.sync()}queueDone(){return this.sync()}_promise=Promise.resolve();_async(n){this._promise=this._promise.finally(()=>n())}_isInitialized=!1;_skippedCacheUpdates=0;constructor(...n){super(...n),this._patchAsync()}async ready(){if(await super.ready(),!(this._isInitialized||this.attributes.has("no_async_preload"))){if(await this._promise,this.checkSync(),await this._sync.ready(),this._sync instanceof Bc&&this instanceof Bc){let n=this._sync.transaction(),i=this.transaction(),s=[];for(let a of await i.keys())s.push(i.get(a).then(l=>n.setSync(a,l)));await Promise.all(s),this._isInitialized=!0;return}try{await this.crossCopy("/"),ea(`Skipped ${this._skippedCacheUpdates} updates to the sync cache during initialization`),this._isInitialized=!0}catch(n){throw this._isInitialized=!1,Vs(n)}}}checkSync(){if(this.attributes.has("no_async_preload"))throw Se("ENOTSUP","Sync preloading has been disabled for this async file system");if(!this._sync)throw Vs(Se("ENOTSUP","No sync cache is attached to this async file system"))}renameSync(n,i){this.checkSync(),this._sync.renameSync(n,i),this._async(()=>this.rename(n,i))}statSync(n){return this.checkSync(),this._sync.statSync(n)}touchSync(n,i){this.checkSync(),this._sync.touchSync(n,i),this._async(()=>this.touch(n,i))}createFileSync(n,i){this.checkSync();let s=this._sync.createFileSync(n,i);return this._async(()=>this.createFile(n,i)),s}unlinkSync(n){this.checkSync(),this._sync.unlinkSync(n),this._async(()=>this.unlink(n))}rmdirSync(n){this.checkSync(),this._sync.rmdirSync(n),this._async(()=>this.rmdir(n))}mkdirSync(n,i){this.checkSync();let s=this._sync.mkdirSync(n,i);return this._async(()=>this.mkdir(n,i)),s}readdirSync(n){return this.checkSync(),this._sync.readdirSync(n)}linkSync(n,i){this.checkSync(),this._sync.linkSync(n,i),this._async(()=>this.link(n,i))}async sync(){!this.attributes.has("no_async_preload")&&this._sync&&this._sync.syncSync(),await this._promise.catch(()=>{})}syncSync(){this.checkSync(),this._sync.syncSync()}existsSync(n){return this.checkSync(),this._sync.existsSync(n)}readSync(n,i,s,a){this.checkSync(),this._sync.readSync(n,i,s,a)}writeSync(n,i,s){this.checkSync(),this._sync.writeSync(n,i,s),this._async(()=>this.write(n,i,s))}streamWrite(n,i){this.checkSync();let s=this._sync.streamWrite(n,i).getWriter(),a=super.streamWrite(n,i).getWriter();return new WritableStream({async write(l,c){await Promise.all([s.write(l),a.write(l)]).catch(c.error.bind(c))},async close(){await Promise.all([s.close(),a.close()])},async abort(l){await Promise.all([s.abort(l),a.abort(l)])}})}async crossCopy(n){this.checkSync();let i=await this.stat(n);if(!Dr(i)){this._sync.createFileSync(n,i);let a=new Uint8Array(i.size);await this.read(n,a,0,i.size),this._sync.writeSync(n,a,0),this._sync.touchSync(n,i);return}n!=="/"&&(this._sync.mkdirSync(n,i),this._sync.touchSync(n,i));let s=[];for(let a of await this.readdir(n))s.push(this.crossCopy(So(n,a)));await Promise.all(s)}_patchAsync(){let n=["read","readdir","stat","exists"],i=kpe.filter(s=>!n.includes(s));for(let s of i){let l=function(c,u){if(u||(u=new Error,Error.captureStackTrace(u,l)),!u.stack)return!1;let p=u.stack.split(`
`).slice(c).join(`
`);return p.includes(`at <computed> [as ${s}]`)||p.includes(`at async <computed> [as ${s}]`)||p.includes(`${s}Sync `)},a=this[s].bind(this);this[s]=async(...c)=>{let u=await a(...c);if(l(2))return u;if(!this._isInitialized)return this._skippedCacheUpdates++,u;try{this._sync?.[`${s}Sync`]?.(...c)}catch(p){if(l(3,p))return u;throw p.message+=" (Out of sync!)",pr(p)}return u}}ea(`Async: patched ${i.length} methods`)}}return t}var oq=x(()=>{d();tq();Ho();Wi();bb();ws();Ss()});var Epe,Ape=x(()=>{d();Wi();dC();W0();ws();wpe();oq();hx();R8();Epe=class extends Kb(ya){channel;timeout;port;_sync=K0.create({label:"tmpfs:port"});constructor(t,o=250){super(1886351988,"portfs"),this.channel=t,this.timeout=o,this.port=ype(t),Spe(this.port,vpe)}rpc(t,...o){return bpe({method:t,args:o},{port:this.port,timeout:this.timeout,fs:this})}async ready(){await this.rpc("ready"),await super.ready()}rename(t,o){return this.rpc("rename",t,o)}async stat(t){let o=await this.rpc("stat",t);return o instanceof Zt?o:new Zt(o)}async touch(t,o){let n=o instanceof Zt?o:new Zt(o);await this.rpc("touch",t,new Uint8Array(n.buffer,n.byteOffset,n.byteLength))}async sync(){await super.sync(),await this.rpc("sync")}async createFile(t,o){o instanceof Zt&&(o=o.toJSON());let n=await this.rpc("createFile",t,o);return n instanceof Zt?n:new Zt(n)}unlink(t){return this.rpc("unlink",t)}rmdir(t){return this.rpc("rmdir",t)}async mkdir(t,o){o instanceof Zt&&(o=o.toJSON());let n=await this.rpc("mkdir",t,o);return n instanceof Zt?n:new Zt(n)}readdir(t){return this.rpc("readdir",t)}exists(t){return this.rpc("exists",t)}link(t,o){return this.rpc("link",t,o)}async read(t,o,n,i){o.set(await this.rpc("read",t,o,n,i))}write(t,o,n){return this.rpc("write",t,o,n)}}});function Tpe(e){let t=4294967295;for(let o=0;o<e.length;o++)t=t>>>8^Cpe[(t^e[o])&255];return(t^4294967295)>>>0}var Cpe,Ipe=x(()=>{d();Cpe=new Uint32Array(256);for(let e=0;e<256;e++){let t=e;for(let o=0;o<8;o++)t=t&1?2197175160^t>>>1:t>>>1;Cpe[e]=t}});function mC(e){let t=Qn(e)-4;return e instanceof $p&&(t-=Int32Array.BYTES_PER_ELEMENT),Tpe(new Uint8Array(e.buffer,e.byteOffset+4,t))}function pC(e){e instanceof $p&&(e.timestamp=BigInt(Date.now())),e.checksum=mC(e)}var Zr,Do,Zl,pYe,mYe,fYe,Dpe,$p,Mpe,Npe,Eqt,Bpe=x(()=>{d();Ho();Wi();fb();I8();gb();Ipe();v8();ws();bb();e6();Zr=function(e,t,o,n,i,s){function a(A){if(A!==void 0&&typeof A!="function")throw new TypeError("Function expected");return A}for(var l=n.kind,c=l==="getter"?"get":l==="setter"?"set":"value",u=!t&&e?n.static?e:e.prototype:null,p=t||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),m,g=!1,y=o.length-1;y>=0;y--){var b={};for(var v in n)b[v]=v==="access"?{}:n[v];for(var v in n.access)b.access[v]=n.access[v];b.addInitializer=function(A){if(g)throw new TypeError("Cannot add initializers after decoration has completed");s.push(a(A||null))};var E=(0,o[y])(l==="accessor"?{get:p.get,set:p.set}:p[c],b);if(l==="accessor"){if(E===void 0)continue;if(E===null||typeof E!="object")throw new TypeError("Object expected");(m=a(E.get))&&(p.get=m),(m=a(E.set))&&(p.set=m),(m=a(E.init))&&i.unshift(m)}else(m=a(E))&&(l==="field"?i.unshift(m):p[c]=m)}u&&Object.defineProperty(u,n.name,p),g=!0},Do=function(e,t,o){for(var n=arguments.length>2,i=0;i<t.length;i++)o=n?t[i].call(e,o):t[i].call(e);return n?o:void 0},Zl=e=>"0x"+e.toString(16).padStart(8,"0"),{format:pYe}=new Intl.NumberFormat("en-US",{notation:"compact",maximumFractionDigits:2,unit:"byte",unitDisplay:"narrow"}),mYe=(()=>{var e,t,o,n;let i=[ql.packed("MetadataEntry")],s,a=[],l,c=Cp,u,p=[],m=[],g,y=[],b=[],v,E=[],A=[],C,I=[],N=[];var _=class extends c{static{l=this}static{let O=typeof Symbol=="function"&&Symbol.metadata?Object.create(c[Symbol.metadata]??null):void 0;u=[(e=xo).uint32.bind(e)],g=[(t=xo).uint32.bind(t)],v=[(o=xo).uint32.bind(o)],C=[(n=xo).uint32.bind(n)],Zr(this,null,u,{kind:"accessor",name:"id",static:!1,private:!1,access:{has:F=>"id"in F,get:F=>F.id,set:(F,J)=>{F.id=J}},metadata:O},p,m),Zr(this,null,g,{kind:"accessor",name:"offset_",static:!1,private:!1,access:{has:F=>"offset_"in F,get:F=>F.offset_,set:(F,J)=>{F.offset_=J}},metadata:O},y,b),Zr(this,null,v,{kind:"accessor",name:"offset",static:!1,private:!1,access:{has:F=>"offset"in F,get:F=>F.offset,set:(F,J)=>{F.offset=J}},metadata:O},E,A),Zr(this,null,C,{kind:"accessor",name:"size",static:!1,private:!1,access:{has:F=>"size"in F,get:F=>F.size,set:(F,J)=>{F.size=J}},metadata:O},I,N),Zr(null,s={value:l},i,{kind:"class",name:l.name,metadata:O},null,a),_=l=s.value,O&&Object.defineProperty(l,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:O}),Do(l,a)}#e=Do(this,p,void 0);get id(){return this.#e}set id(O){this.#e=O}#t=(Do(this,m),Do(this,y,void 0));get offset_(){return this.#t}set offset_(O){this.#t=O}#o=(Do(this,b),Do(this,E,void 0));get offset(){return this.#o}set offset(O){this.#o=O}#n=(Do(this,A),Do(this,I,void 0));get size(){return this.#n}set size(O){this.#n=O}toString(){return`<MetadataEntry @ ${Zl(this.byteOffset)}>`}constructor(){super(...arguments),Do(this,N)}};return _=l})(),fYe=255,Dpe=5,$p=(()=>{var e,t,o,n;let i=[ql.packed("MetadataBlock")],s,a=[],l,c=px.typed(Int32Array),u,p=[],m=[],g,y=[],b=[],v,E=[],A=[],C,I=[],N=[],_,O=[],F=[];var J=class extends c{static{l=this}static{let G=typeof Symbol=="function"&&Symbol.metadata?Object.create(c[Symbol.metadata]??null):void 0;u=[(e=xo).uint32.bind(e)],g=[(t=xo).uint64.bind(t)],v=[(o=xo).uint32.bind(o)],C=[pb(nle(mYe,fYe))],_=[(n=xo).int32.bind(n)],Zr(this,null,u,{kind:"accessor",name:"checksum",static:!1,private:!1,access:{has:te=>"checksum"in te,get:te=>te.checksum,set:(te,K)=>{te.checksum=K}},metadata:G},p,m),Zr(this,null,g,{kind:"accessor",name:"timestamp",static:!1,private:!1,access:{has:te=>"timestamp"in te,get:te=>te.timestamp,set:(te,K)=>{te.timestamp=K}},metadata:G},y,b),Zr(this,null,v,{kind:"accessor",name:"previous_offset",static:!1,private:!1,access:{has:te=>"previous_offset"in te,get:te=>te.previous_offset,set:(te,K)=>{te.previous_offset=K}},metadata:G},E,A),Zr(this,null,C,{kind:"accessor",name:"items",static:!1,private:!1,access:{has:te=>"items"in te,get:te=>te.items,set:(te,K)=>{te.items=K}},metadata:G},I,N),Zr(this,null,_,{kind:"accessor",name:"locked",static:!1,private:!1,access:{has:te=>"locked"in te,get:te=>te.locked,set:(te,K)=>{te.locked=K}},metadata:G},O,F),Zr(null,s={value:l},i,{kind:"class",name:l.name,metadata:G},null,a),J=l=s.value,G&&Object.defineProperty(l,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:G})}static lockIndex=cle(J,"locked")/Int32Array.BYTES_PER_ELEMENT;#e=Do(this,p,void 0);get checksum(){return this.#e}set checksum(G){this.#e=G}#t=(Do(this,m),Do(this,y,BigInt(Date.now())));get timestamp(){return this.#t}set timestamp(G){this.#t=G}#o=(Do(this,b),Do(this,E,void 0));get previous_offset(){return this.#o}set previous_offset(G){this.#o=G}_previous=Do(this,A);get previous(){if(this.previous_offset)return this._previous??=new J(this.buffer,this.previous_offset),this._previous}#n=Do(this,I,void 0);get items(){return this.#n}set items(G){this.#n=G}toString(G=!1){if(!G)return`<MetadataBlock @ ${Zl(this.byteOffset)}>`;let te=[`---- Metadata block at ${Zl(this.byteOffset)} ----`,`Checksum: ${Zl(this.checksum)}`,`Last updated: ${new Date(Number(this.timestamp)).toLocaleString()}`,`Previous block: ${Zl(this.previous_offset)}`,"Entries:"].join(`
`);for(let K of this.items)K.offset&&(te+=`
	${Zl(K.id)}: ${pYe(K.size).padStart(5)} at ${Zl(K.offset)}`);return te}#r=(Do(this,N),Do(this,O,void 0));get locked(){return this.#r}set locked(G){this.#r=G}waitUnlocked(G=0){if(G>Dpe)throw Vs(Se("EBUSY",`sbfs: exceeded max attempts waiting for metadata block at ${Zl(this.byteOffset)} to be unlocked`));if(Atomics.load(this,J.lockIndex))switch(Atomics.wait(this,J.lockIndex,1)){case"ok":break;case"not-equal":return G++,pr(`sbfs: waiting for metadata block at ${Zl(this.byteOffset)} to be unlocked (${G}/${Dpe})`),this.waitUnlocked(G);case"timed-out":throw Vs(Se("EBUSY",`sbfs: timed out waiting for metadata block at ${Zl(this.byteOffset)} to be unlocked`))}}lock(){this.waitUnlocked(),Atomics.store(this,J.lockIndex,1);let G=()=>{Atomics.store(this,J.lockIndex,0),Atomics.notify(this,J.lockIndex,1)};return G[Symbol.dispose]=G,G}constructor(){super(...arguments),Do(this,F)}static{Do(l,a)}};return J=l})(),Mpe=1651715706,Npe=2,Eqt=(()=>{var e,t,o,n,i,s,a,l,c,u;let p=[ql.packed("Superblock")],m,g=[],y,b=px.typed(BigUint64Array),v,E=[],A=[],C,I=[],N=[],_,O=[],F=[],J,G=[],te=[],K,oe=[],le=[],he,Ae=[],Ce=[],ye,ce=[],pe=[],xe,Ze=[],ge=[],ae,Ne=[],Fe=[],Xe,It=[],Ve=[],_t,Wt=[],po=[],no,mo=[],Sn=[],Br,be=[],Qe=[];var lt=class extends b{static{y=this}static{let we=typeof Symbol=="function"&&Symbol.metadata?Object.create(b[Symbol.metadata]??null):void 0;v=[(e=xo).uint32.bind(e)],C=[(t=xo).uint32.bind(t)],_=[(o=xo).uint16.bind(o)],J=[(n=xo).uint16.bind(n)],K=[(i=xo).uint32.bind(i)],he=[(s=xo).uint64.bind(s)],ye=[(a=xo).uint64.bind(a)],xe=[xo.uint8(16)],ae=[(l=xo).uint32.bind(l)],Xe=[(c=xo).uint32.bind(c)],_t=[(u=xo).uint32.bind(u)],no=[xo.char(64)],Br=[xo.char(132)],Zr(this,null,v,{kind:"accessor",name:"checksum",static:!1,private:!1,access:{has:Te=>"checksum"in Te,get:Te=>Te.checksum,set:(Te,ft)=>{Te.checksum=ft}},metadata:we},E,A),Zr(this,null,C,{kind:"accessor",name:"magic",static:!1,private:!1,access:{has:Te=>"magic"in Te,get:Te=>Te.magic,set:(Te,ft)=>{Te.magic=ft}},metadata:we},I,N),Zr(this,null,_,{kind:"accessor",name:"version",static:!1,private:!1,access:{has:Te=>"version"in Te,get:Te=>Te.version,set:(Te,ft)=>{Te.version=ft}},metadata:we},O,F),Zr(this,null,J,{kind:"accessor",name:"inode_format",static:!1,private:!1,access:{has:Te=>"inode_format"in Te,get:Te=>Te.inode_format,set:(Te,ft)=>{Te.inode_format=ft}},metadata:we},G,te),Zr(this,null,K,{kind:"accessor",name:"flags",static:!1,private:!1,access:{has:Te=>"flags"in Te,get:Te=>Te.flags,set:(Te,ft)=>{Te.flags=ft}},metadata:we},oe,le),Zr(this,null,he,{kind:"accessor",name:"used_bytes",static:!1,private:!1,access:{has:Te=>"used_bytes"in Te,get:Te=>Te.used_bytes,set:(Te,ft)=>{Te.used_bytes=ft}},metadata:we},Ae,Ce),Zr(this,null,ye,{kind:"accessor",name:"total_bytes",static:!1,private:!1,access:{has:Te=>"total_bytes"in Te,get:Te=>Te.total_bytes,set:(Te,ft)=>{Te.total_bytes=ft}},metadata:we},ce,pe),Zr(this,null,xe,{kind:"accessor",name:"uuid",static:!1,private:!1,access:{has:Te=>"uuid"in Te,get:Te=>Te.uuid,set:(Te,ft)=>{Te.uuid=ft}},metadata:we},Ze,ge),Zr(this,null,ae,{kind:"accessor",name:"metadata_block_size",static:!1,private:!1,access:{has:Te=>"metadata_block_size"in Te,get:Te=>Te.metadata_block_size,set:(Te,ft)=>{Te.metadata_block_size=ft}},metadata:we},Ne,Fe),Zr(this,null,Xe,{kind:"accessor",name:"metadata_offset_",static:!1,private:!1,access:{has:Te=>"metadata_offset_"in Te,get:Te=>Te.metadata_offset_,set:(Te,ft)=>{Te.metadata_offset_=ft}},metadata:we},It,Ve),Zr(this,null,_t,{kind:"accessor",name:"metadata_offset",static:!1,private:!1,access:{has:Te=>"metadata_offset"in Te,get:Te=>Te.metadata_offset,set:(Te,ft)=>{Te.metadata_offset=ft}},metadata:we},Wt,po),Zr(this,null,no,{kind:"accessor",name:"label",static:!1,private:!1,access:{has:Te=>"label"in Te,get:Te=>Te.label,set:(Te,ft)=>{Te.label=ft}},metadata:we},mo,Sn),Zr(this,null,Br,{kind:"accessor",name:"_padding",static:!1,private:!1,access:{has:Te=>"_padding"in Te,get:Te=>Te._padding,set:(Te,ft)=>{Te._padding=ft}},metadata:we},be,Qe),Zr(null,m={value:y},p,{kind:"class",name:y.name,metadata:we},null,g),lt=y=m.value,we&&Object.defineProperty(y,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:we}),Do(y,g)}constructor(...we){if(super(...we),Do(this,Qe),this.magic!=Mpe){Xo("sbfs: Invalid magic value, assuming this is a fresh super block");let Te=new $p(this.buffer,Qn(lt));Object.assign(this,{metadata:Te,metadata_offset:Te.byteOffset,used_bytes:BigInt(Qn(lt)+Qn($p)),total_bytes:BigInt(this.buffer.byteLength),magic:Mpe,version:1,inode_format:QH,metadata_block_size:Qn($p),uuid:Fae(crypto.randomUUID())}),pC(this),pC(Te);return}if(this.checksum!==mC(this))throw Vs(Se("EIO","sbfs: checksum mismatch for super block"));if(this.metadata=new $p(this.buffer,this.metadata_offset),this.metadata.checksum!==mC(this.metadata))throw Vs(Se("EIO",`sbfs: checksum mismatch for metadata block (saved ${Zl(this.metadata.checksum)}, computed ${Zl(mC(this.metadata))})`));if(this.inode_format!=QH)throw Vs(Se("EIO","sbfs: inode format mismatch"));if(this.metadata_block_size!=Qn($p))throw Vs(Se("EIO","sbfs: metadata block size mismatch"))}#e=Do(this,E,void 0);get checksum(){return this.#e}set checksum(we){this.#e=we}#t=(Do(this,A),Do(this,I,void 0));get magic(){return this.#t}set magic(we){this.#t=we}#o=(Do(this,N),Do(this,O,void 0));get version(){return this.#o}set version(we){this.#o=we}#n=(Do(this,F),Do(this,G,void 0));get inode_format(){return this.#n}set inode_format(we){this.#n=we}#r=(Do(this,te),Do(this,oe,void 0));get flags(){return this.#r}set flags(we){this.#r=we}#a=(Do(this,le),Do(this,Ae,void 0));get used_bytes(){return this.#a}set used_bytes(we){this.#a=we}#i=(Do(this,Ce),Do(this,ce,void 0));get total_bytes(){return this.#i}set total_bytes(we){this.#i=we}#s=(Do(this,pe),Do(this,Ze,void 0));get uuid(){return this.#s}set uuid(we){this.#s=we}#l=(Do(this,ge),Do(this,Ne,void 0));get metadata_block_size(){return this.#l}set metadata_block_size(we){this.#l=we}#c=(Do(this,Fe),Do(this,It,void 0));get metadata_offset_(){return this.#c}set metadata_offset_(we){this.#c=we}#u=(Do(this,Ve),Do(this,Wt,void 0));get metadata_offset(){return this.#u}set metadata_offset(we){this.#u=we}metadata=Do(this,po);#d=Do(this,mo,void 0);get label(){return this.#d}set label(we){this.#d=we}#p=(Do(this,Sn),Do(this,be,void 0));get _padding(){return this.#p}set _padding(we){this.#p=we}rotateMetadata(){let we=this.used_bytes%BigInt(4);Atomics.add(this,Npe,we);let Te=Number(Atomics.add(this,Npe,BigInt(Qn($p)))),ft=new $p(this.buffer,Te);return ft.previous_offset=this.metadata_offset,this.metadata=ft,this.metadata_offset=ft.byteOffset,pC(ft),pC(this),ea(`sbfs: rotated metadata block at ${Zl(ft.previous_offset)} with new block at ${Zl(Te)}`),ft}isUnused(we,Te){if(!Te)return!0;if(we+Te>this.total_bytes||we<Qn(lt))return!1;for(let ft=this.metadata;ft;ft=ft.previous){if(we<ft.byteOffset+Qn($p)&&we+Te>ft.byteOffset)return!1;for(let Qo of ft.items)if(Qo.offset&&(we>=Qo.offset&&we<Qo.offset+Qo.size||we+Te>Qo.offset&&we+Te<=Qo.offset+Qo.size||we<=Qo.offset&&we+Te>=Qo.offset+Qo.size))return!1}return!0}};return lt=y})()});var Ppe=x(()=>{d();MH();mpe();gpe();R8();hpe();Ape();Bpe();bb();e6();V9()});async function gYe(e){let t=[];for await(let o of e)t.push(o);return t}function hYe(e,t,o=Uo){_G.call(this,e,t).then(()=>o(null)).catch(o)}function xYe(e,t=Uo){Ux.call(this,e).then(t).catch(()=>t(!1))}function yYe(e,t,o=Uo){o=typeof t=="function"?t:o,Wb.call(this,e,typeof t!="function"?t:{}).then(n=>o(null,n)).catch(o)}function bYe(e,t,o=Uo){o=typeof t=="function"?t:o,i5.call(this,e,typeof t!="function"?t:{}).then(n=>o(null,n)).catch(o)}function vYe(e,t=0,o=Uo){o=typeof t=="function"?t:o;let n=typeof t=="number"?t:0;RG.call(this,e,n).then(()=>o(null)).catch(o)}function SYe(e,t=Uo){nC.call(this,e).then(()=>t(null)).catch(t)}function wYe(e,t,o,n=Uo){let i=jl(o,420);n=typeof o=="function"?o:n,_u.call(this,e,t,i).then(s=>n(null,s.fd)).catch(n)}function kYe(e,t,o=Uo){o=typeof t=="function"?t:o,rC.call(this,e,typeof t=="function"?null:t).then(n=>o(null,n)).catch(o)}function EYe(e,t,o,n=Uo){n=typeof o=="function"?o:n,iC.call(this,e,t,typeof o!="function"?o:null).then(()=>n(null)).catch(n)}function AYe(e,t,o,n=Uo){let i=typeof o!="function"?o:void 0;n=typeof o=="function"?o:n,LG.call(this,e,t,i).then(()=>n(null)).catch(n)}function CYe(e,t,o=Uo){o=typeof t=="function"?t:o,new Hs(this,e).stat().then(n=>o(null,typeof t=="object"&&t?.bigint?new Du(n):n)).catch(o)}function TYe(e,t=Uo){new Hs(this,e).close().then(()=>t(null)).catch(t)}function IYe(e,t,o=Uo){let n=typeof t=="number"?t:0;o=typeof t=="function"?t:o;let i=new Hs(this,e);if(n<0)throw Se("EINVAL");i.truncate(n).then(()=>o(null)).catch(o)}function DYe(e,t=Uo){new Hs(this,e).sync().then(()=>t(null)).catch(t)}function MYe(e,t=Uo){new Hs(this,e).datasync().then(()=>t(null)).catch(t)}function NYe(e,t,o,n,i,s=Uo){let a,l,c,u,p,m=new Hs(this,e);if(typeof t=="string"){switch(p="utf8",typeof o){case"function":s=o;break;case"number":u=o,p=typeof n=="string"?n:"utf8",s=typeof i=="function"?i:s;break;default:s=typeof n=="function"?n:typeof i=="function"?i:s,s(Se("EINVAL"));return}a=nq.Buffer.from(t),l=0,c=a.length;let g=s;m.write(a,l,c,u).then(({bytesWritten:y})=>g(null,y,a.toString(p))).catch(g)}else{a=nq.Buffer.from(t.buffer),l=o,c=n,u=typeof i=="number"?i:null;let g=typeof i=="function"?i:s;m.write(a,l,c,u).then(({bytesWritten:y})=>g(null,y,a)).catch(g)}}function BYe(e,t,o,n,i,s=Uo){new Hs(this,e).read(t,o,n,i).then(({bytesRead:a,buffer:l})=>s(null,a,l)).catch(s)}function PYe(e,t,o,n=Uo){new Hs(this,e).chown(t,o).then(()=>n(null)).catch(n)}function _Ye(e,t,o){new Hs(this,e).chmod(t).then(()=>o(null)).catch(o)}function RYe(e,t,o,n=Uo){new Hs(this,e).utimes(t,o).then(()=>n(null)).catch(n)}function LYe(e,t=Uo){sC.call(this,e).then(()=>t(null)).catch(t)}function OYe(e,t,o=Uo){$x.call(this,e,t).then(()=>o(null)).catch(o)}function FYe(e,t,o=Uo){o=typeof t=="function"?t:o;let n=typeof t!="function"?t:{};Z0.call(this,e,n).then(i=>o(null,i)).catch(o)}function UYe(e,t,o=Uo){OG.call(this,e,t).then(()=>o(null)).catch(o)}function $Ye(e,t,o,n=Uo){let i=typeof o=="string"?o:"file";n=typeof o=="function"?o:n,FG.call(this,e,t,i).then(()=>n(null)).catch(n)}function HYe(e,t,o=Uo){o=typeof t=="function"?t:o,UG.call(this,e).then(n=>o(null,n)).catch(o)}function zYe(e,t,o,n=Uo){$G.call(this,e,t,o).then(()=>n(null)).catch(n)}function GYe(e,t,o,n=Uo){HG.call(this,e,t,o).then(()=>n(null)).catch(n)}function qYe(e,t,o=Uo){zG.call(this,e,t).then(()=>o(null)).catch(o)}function jYe(e,t,o=Uo){GG.call(this,e,t).then(()=>o(null)).catch(o)}function WYe(e,t,o,n=Uo){aC.call(this,e,t,o).then(()=>n(null)).catch(n)}function KYe(e,t,o,n=Uo){qG.call(this,e,t,o).then(()=>n(null)).catch(n)}function YYe(e,t,o=Uo){o=typeof t=="function"?t:o,jG.call(this,e,typeof t=="function"?null:t).then(n=>o(null,n)).catch(o)}function QYe(e,t,o=Uo){let n=typeof t=="number"?t:4;o=typeof t=="function"?t:o,WG.call(this,e,n).then(()=>o(null)).catch(o)}function ZYe(e,t,o){let n=Mt(e),i=typeof t!="function"?t:{};if(typeof t=="function"&&(o=t),!o)throw ve("EINVAL","watch",e.toString());if(Yb.has(n)){let a=Yb.get(n);a&&a.listeners.add(o);return}let s=new x6(this,n,i);s.on("change",(a,l)=>{let c=Yb.get(n);if(c)for(let u of c.listeners)u(a,l)}),Yb.set(n,{watcher:s,listeners:new Set})}function XYe(e,t=Uo){let o=Mt(e),n=Yb.get(o);n&&(t&&t!==Uo?n.listeners.delete(t):n.listeners.clear(),n.listeners.size===0&&(n.watcher.stop(),Yb.delete(o)))}function JYe(e,t,o){let n=new Mb(this,Mt(e),typeof t=="object"?t:{});return o=typeof t=="function"?t:o,n.on("change",o||Uo),n}function VYe(e,t){t=typeof t=="object"?t:{encoding:t};let o=_u.call(this,e,"r",t?.mode);return new Ox({...t,autoClose:!0},o)}function eQe(e,t){t=typeof t=="object"?t:{encoding:t};let o=_u.call(this,e,"w",t?.mode);return new Fx(t,o)}function tQe(e,t,o=Uo){o=typeof t=="function"?t:o,s5.call(this,e,typeof t=="function"?void 0:t).then(()=>o(null)).catch(o)}function oQe(e,t,o=Uo){o=typeof t=="function"?t:o,KG.call(this,e,typeof t!="function"?t:null).then(n=>o(null,n)).catch(o)}function nQe(e,t,o,n=Uo){n=typeof o=="function"?o:n,lC.call(this,e,t,typeof o=="function"?void 0:o).then(()=>n(null)).catch(n)}function rQe(e,t,o,n=Uo){n=typeof o=="function"?o:n,new Hs(this,e).readv(t,typeof o=="function"?void 0:o).then(({buffers:i,bytesRead:s})=>n(null,s,i)).catch(n)}function iQe(e,t,o,n=Uo){n=typeof o=="function"?o:n,new Hs(this,e).writev(t,typeof o=="function"?void 0:o).then(({buffers:i,bytesWritten:s})=>n(null,s,i)).catch(n)}function sQe(e,t,o=Uo){o=typeof t=="function"?t:o,YG.call(this,e,typeof t=="function"?void 0:t).then(n=>o(null,n)).catch(o)}function aQe(e,t,o,n=Uo){n=typeof o=="function"?o:n,cC.call(this,e,t,typeof o=="function"?void 0:o).then(()=>n(null)).catch(n)}function lQe(e,t,o=Uo){o=typeof t=="function"?t:o,QG.call(this,e,typeof t=="function"?void 0:t).then(n=>o(null,n)).catch(o)}async function cQe(e,t){let o=await _u.call(this,e.toString(),"r"),n=await o.readFile();return await o.close(),new Blob([n],t)}function uQe(e,t,o=Uo){o=typeof t=="function"?t:o;let n=ZG.call(this,e,typeof t=="function"?void 0:t);gYe(n).then(i=>o(null,i??[])).catch(i=>o(i))}var nq,Uo,Yb,_pe=x(()=>{d();nq=Ml(Yl(),1);Ho();bs();Wl();Tb();z8();gx();oC();Uo=()=>{};Yb=new Map});var rq=x(()=>{d();bs();_pe();m6();z8();gx();oC();H8()});var d5={};Ao(d5,{get:()=>mQe,getSync:()=>fQe,list:()=>bQe,listSync:()=>vQe,remove:()=>xQe,removeSync:()=>yQe,set:()=>gQe,setSync:()=>hQe});function Qb(e,t,o,n){if(!t.startsWith("user.")&&!pQe.includes(t))throw ve("ENOTSUP",n,o)}async function mQe(e,t,o={}){e=Mt(e);let{fs:n,path:i}=In(e,this);Qb(this,t,e,"xattr.get");let s=await n.stat(i).catch(Ic("xattr.get",e));if(dn&&!Fo(this,s,4))throw ve("EACCES","xattr.get",e);s.attributes??=new q0;let a=s.attributes.get(t);if(!a)throw ve("ENODATA","xattr.get",e);let l=u5.Buffer.from(a);return o.encoding=="buffer"||!o.encoding?l:l.toString(o.encoding)}function fQe(e,t,o={}){e=Mt(e),Qb(this,t,e,"xattr.get");let{fs:n,path:i}=In(e,this),s;try{s=n.statSync(i)}catch(c){throw ui(Object.assign(c,{path:e}))}if(dn&&!Fo(this,s,4))throw ve("EACCES","xattr.get",e);s.attributes??=new q0;let a=s.attributes.get(t);if(!a)throw ve("ENODATA","xattr.get",e);let l=u5.Buffer.from(a);return o.encoding=="buffer"||!o.encoding?l:l.toString(o.encoding)}async function gQe(e,t,o,n={}){e=Mt(e);let{fs:i,path:s}=In(e,this);Qb(this,t,e,"xattr.set");let a=await i.stat(s).catch(Ic("xattr.set",e));if(dn&&!Fo(this,a,2))throw ve("EACCES","xattr.set",e);a.attributes??=new q0;let l=a.attributes.get(t);if(n.create&&l)throw ve("EEXIST","xattr.set",e);if(n.replace&&!l)throw ve("ENODATA","xattr.set",e);a.attributes.set(t,u5.Buffer.from(o)),await i.touch(s,a).catch(Ic("xattr.set",e))}function hQe(e,t,o,n={}){e=Mt(e);let{fs:i,path:s}=In(e,this);Qb(this,t,e,"xattr.set");let a;try{a=i.statSync(s)}catch(c){throw ui(Object.assign(c,{path:e}))}if(dn&&!Fo(this,a,2))throw ve("EACCES","xattr.set",e);a.attributes??=new q0;let l=a.attributes.get(t);if(n.create&&l)throw ve("EEXIST","xattr.set",e);if(n.replace&&!l)throw ve("ENODATA","xattr.set",e);a.attributes.set(t,u5.Buffer.from(o));try{i.touchSync(s,a)}catch(c){throw ui(Object.assign(c,{path:e}))}}async function xQe(e,t){e=Mt(e);let{fs:o,path:n}=In(e,this);Qb(this,t,e,"xattr.remove");let i=await o.stat(n).catch(Ic("xattr.remove",e));if(dn&&!Fo(this,i,2))throw ve("EACCES","xattr.remove",e);if(i.attributes??=new q0,!i.attributes.get(t))throw ve("ENODATA","xattr.remove",e);i.attributes.remove(t),await o.touch(n,i)}function yQe(e,t){e=Mt(e);let{fs:o,path:n}=In(e,this);Qb(this,t,e,"xattr.remove");let i;try{i=o.statSync(n)}catch(a){throw ui(Object.assign(a,{path:e}))}if(dn&&!Fo(this,i,2))throw ve("EACCES","xattr.remove",e);if(i.attributes??=new q0,!i.attributes.get(t))throw ve("ENODATA","xattr.remove",e);i.attributes.remove(t);try{o.touchSync(n,i)}catch(a){throw ui(Object.assign(a,{path:e}))}}async function bQe(e){e=Mt(e);let{fs:t,path:o}=In(e,this),n=await t.stat(o).catch(Ic("xattr.list",e));return n.attributes?n.attributes.keys().toArray():[]}function vQe(e){e=Mt(e);let{fs:t,path:o}=In(e,this),n;try{n=t.statSync(o)}catch(i){throw ui(Object.assign(i,{path:e}))}return n.attributes?n.attributes.keys().toArray():[]}var u5,pQe,fC=x(()=>{d();u5=Ml(Yl(),1);Ho();ws();Wl();vx();bs();Md();pQe=[]});var Rpe=x(()=>{d();Ho();Pi();Cd();rq();Ss();fC()});var Lpe=x(()=>{d();Ho();Cd();S8();ez();u6();B8();W0();JG();ws()});var Ope=x(()=>{d();Ho();Wi();hx()});var Fpe=x(()=>{d();Ho()});function Upe(e){class t extends e{async exists(n){return this.existsSync(n)}async rename(n,i){return this.renameSync(n,i)}async stat(n){return this.statSync(n)}async touch(n,i){return this.touchSync(n,i)}async createFile(n,i){return this.createFileSync(n,i)}async unlink(n){return this.unlinkSync(n)}async rmdir(n){return this.rmdirSync(n)}async mkdir(n,i){return this.mkdirSync(n,i)}async readdir(n){return this.readdirSync(n)}async link(n,i){return this.linkSync(n,i)}async sync(){return this.syncSync()}async read(n,i,s,a){return this.readSync(n,i,s,a)}async write(n,i,s){return this.writeSync(n,i,s)}}return t}var $pe=x(()=>{d()});var Hpe=x(()=>{d();oq();Ope();Fpe();tq();$pe()});async function SQe(e,t,...o){e=Mt(e);let{fs:n,path:i}=In(e,this);try{let s=new Zt(await n.stat(i));switch(t){case Xr.GetFlags:case Rd.GetFlags:return s.flags;case Xr.SetFlags:case Rd.SetFlags:s.flags=o[0],await n.touch(i,s);return;case Xr.GetVersion:case Rd.GetVersion:return s.version;case Xr.SetVersion:case Rd.SetVersion:s.version=o[0],await n.touch(i,s);return;case Xr.Fiemap:break;case Xr.GetXattr:return new Gpe(s);case Xr.SetXattr:break;case Xr.GetLabel:return n.label;case Xr.SetLabel:n.label=o[0];return;case Xr.GetUUID:return n.uuid;case Xr.GetSysfsPath:return`/sys/fs/${n.name}/${n.uuid}`}}catch(s){throw ui(Object.assign(s,{syscall:"ioctl",path:e}))}throw ve("ENOTSUP","ioctl",e)}function wQe(e,t,...o){e=Mt(e);let{fs:n,path:i}=In(e,this);try{let s=new Zt(n.statSync(i));switch(t){case Xr.GetFlags:case Rd.GetFlags:return s.flags;case Xr.SetFlags:case Rd.SetFlags:s.flags=o[0],n.touchSync(i,s);return;case Xr.GetVersion:case Rd.GetVersion:return s.version;case Xr.SetVersion:case Rd.SetVersion:s.version=o[0],n.touchSync(i,s);return;case Xr.Fiemap:break;case Xr.GetXattr:return new Gpe(s);case Xr.SetXattr:break;case Xr.GetLabel:return n.label;case Xr.SetLabel:n.label=o[0];return;case Xr.GetUUID:return n.uuid;case Xr.GetSysfsPath:return`/sys/fs/${n.name}/${n.uuid}`}}catch(s){throw ui(Object.assign(s,{syscall:"ioctl",path:e}))}throw ve("ENOTSUP","ioctl",e)}var Hx,Rc,gC,Gpe,zpe,Xr,Rd,iq=x(()=>{d();Ho();fb();I8();Pi();gb();ws();Wl();Md();Hx=function(e,t,o,n,i,s){function a(A){if(A!==void 0&&typeof A!="function")throw new TypeError("Function expected");return A}for(var l=n.kind,c=l==="getter"?"get":l==="setter"?"set":"value",u=!t&&e?n.static?e:e.prototype:null,p=t||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),m,g=!1,y=o.length-1;y>=0;y--){var b={};for(var v in n)b[v]=v==="access"?{}:n[v];for(var v in n.access)b.access[v]=n.access[v];b.addInitializer=function(A){if(g)throw new TypeError("Cannot add initializers after decoration has completed");s.push(a(A||null))};var E=(0,o[y])(l==="accessor"?{get:p.get,set:p.set}:p[c],b);if(l==="accessor"){if(E===void 0)continue;if(E===null||typeof E!="object")throw new TypeError("Object expected");(m=a(E.get))&&(p.get=m),(m=a(E.set))&&(p.set=m),(m=a(E.init))&&i.unshift(m)}else(m=a(E))&&(l==="field"?i.unshift(m):p[c]=m)}u&&Object.defineProperty(u,n.name,p),g=!0},Rc=function(e,t,o){for(var n=arguments.length>2,i=0;i<t.length;i++)o=n?t[i].call(e,o):t[i].call(e);return n?o:void 0};(function(e){e[e.RealTime=1]="RealTime",e[e.PreAlloc=2]="PreAlloc",e[e.Immutable=8]="Immutable",e[e.Append=16]="Append",e[e.Sync=32]="Sync",e[e.NoAtime=64]="NoAtime",e[e.NoDump=128]="NoDump",e[e.RtInherit=256]="RtInherit",e[e.ProjInherit=512]="ProjInherit",e[e.NoSymlinks=1024]="NoSymlinks",e[e.ExtSize=2048]="ExtSize",e[e.ExtSzInherit=4096]="ExtSzInherit",e[e.NoDefrag=8192]="NoDefrag",e[e.FileStream=16384]="FileStream",e[e.Dax=32768]="Dax",e[e.CowExtSize=65536]="CowExtSize",e[e.HasAttr=2147483648]="HasAttr"})(gC||(gC={}));Gpe=(()=>{var e,t,o,n,i;let s=[ql("fsxattr")],a,l=[],c,u=Cp,p,m=[],g=[],y,b=[],v=[],E,A=[],C=[],I,N=[],_=[],O,F=[],J=[],G,te=[],K=[];var oe=class extends u{static{c=this}static{let le=typeof Symbol=="function"&&Symbol.metadata?Object.create(u[Symbol.metadata]??null):void 0;p=[(e=xo).uint32.bind(e)],y=[(t=xo).uint32.bind(t)],E=[(o=xo).uint32.bind(o)],I=[(n=xo).uint32.bind(n)],O=[(i=xo).uint32.bind(i)],G=[xo.char(8)],Hx(this,null,p,{kind:"accessor",name:"xflags",static:!1,private:!1,access:{has:he=>"xflags"in he,get:he=>he.xflags,set:(he,Ae)=>{he.xflags=Ae}},metadata:le},m,g),Hx(this,null,y,{kind:"accessor",name:"extsize",static:!1,private:!1,access:{has:he=>"extsize"in he,get:he=>he.extsize,set:(he,Ae)=>{he.extsize=Ae}},metadata:le},b,v),Hx(this,null,E,{kind:"accessor",name:"nextents",static:!1,private:!1,access:{has:he=>"nextents"in he,get:he=>he.nextents,set:(he,Ae)=>{he.nextents=Ae}},metadata:le},A,C),Hx(this,null,I,{kind:"accessor",name:"projid",static:!1,private:!1,access:{has:he=>"projid"in he,get:he=>he.projid,set:(he,Ae)=>{he.projid=Ae}},metadata:le},N,_),Hx(this,null,O,{kind:"accessor",name:"cowextsize",static:!1,private:!1,access:{has:he=>"cowextsize"in he,get:he=>he.cowextsize,set:(he,Ae)=>{he.cowextsize=Ae}},metadata:le},F,J),Hx(this,null,G,{kind:"accessor",name:"pad",static:!1,private:!1,access:{has:he=>"pad"in he,get:he=>he.pad,set:(he,Ae)=>{he.pad=Ae}},metadata:le},te,K),Hx(null,a={value:c},s,{kind:"class",name:c.name,metadata:le},null,l),oe=c=a.value,le&&Object.defineProperty(c,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:le}),Rc(c,l)}#e=Rc(this,m,void 0);get xflags(){return this.#e}set xflags(le){this.#e=le}#t=(Rc(this,g),Rc(this,b,void 0));get extsize(){return this.#t}set extsize(le){this.#t=le}#o=(Rc(this,v),Rc(this,A,void 0));get nextents(){return this.#o}set nextents(le){this.#o=le}#n=(Rc(this,C),Rc(this,N,void 0));get projid(){return this.#n}set projid(le){this.#n=le}#r=(Rc(this,_),Rc(this,F,void 0));get cowextsize(){return this.#r}set cowextsize(le){this.#r=le}#a=(Rc(this,J),Rc(this,te,[]));get pad(){return this.#a}set pad(le){this.#a=le}constructor(le=Ko(new zn(Ie.EINVAL,"fsxattr must be initialized with an inode"))){super(new ArrayBuffer(Qn(oe))),Rc(this,K),this.extsize=le.size,this.nextents=1,this.projid=le.uid,this.cowextsize=le.size;for(let he of Object.keys(ta))le.flags&ta[he]&&he in gC&&(this.xflags|=gC[he])}};return oe=c})();(function(e){e[e.SecureRm=1]="SecureRm",e[e.Undelete=2]="Undelete",e[e.Compress=4]="Compress",e[e.Sync=8]="Sync",e[e.Immutable=16]="Immutable",e[e.Append=32]="Append",e[e.NoDump=64]="NoDump",e[e.NoAtime=128]="NoAtime",e[e.Dirty=256]="Dirty",e[e.CompressBlk=512]="CompressBlk",e[e.NoCompress=1024]="NoCompress",e[e.Encrypt=2048]="Encrypt",e[e.Btree=4096]="Btree",e[e.Index=4096]="Index",e[e.IMagic=8192]="IMagic",e[e.JournalData=16384]="JournalData",e[e.NoTail=32768]="NoTail",e[e.DirSync=65536]="DirSync",e[e.TopDir=131072]="TopDir",e[e.HugeFile=262144]="HugeFile",e[e.Extent=524288]="Extent",e[e.Verity=1048576]="Verity",e[e.EaInode=2097152]="EaInode",e[e.EofBlocks=4194304]="EofBlocks",e[e.NoCow=8388608]="NoCow",e[e.Dax=33554432]="Dax",e[e.InlineData=268435456]="InlineData",e[e.ProjInherit=536870912]="ProjInherit",e[e.CaseFold=1073741824]="CaseFold",e[e.Reserved=2147483648]="Reserved"})(zpe||(zpe={}));(function(e){e[e.GetFlags=2148034049]="GetFlags",e[e.SetFlags=1074292226]="SetFlags",e[e.GetVersion=2148038145]="GetVersion",e[e.SetVersion=1074296322]="SetVersion",e[e.Fiemap=3223348747]="Fiemap",e[e.GetXattr=2149341215]="GetXattr",e[e.SetXattr=1075599392]="SetXattr",e[e.GetLabel=2164298801]="GetLabel",e[e.SetLabel=1090556978]="SetLabel",e[e.GetUUID=2148603136]="GetUUID",e[e.GetSysfsPath=2155943169]="GetSysfsPath"})(Xr||(Xr={}));(function(e){e[e.GetFlags=2147771905]="GetFlags",e[e.SetFlags=1074030082]="SetFlags",e[e.GetVersion=2147776001]="GetVersion",e[e.SetVersion=1074034178]="SetVersion"})(Rd||(Rd={}))});var p5={};Ao(p5,{BigIntStatsFs:()=>Z9,Dir:()=>kx,Dirent:()=>wx,IOC:()=>Xr,IOC32:()=>Rd,ReadStream:()=>Ox,Stats:()=>xl,StatsFs:()=>Q9,WriteStream:()=>Fx,access:()=>QYe,accessSync:()=>gze,appendFile:()=>AYe,appendFileSync:()=>VHe,chmod:()=>qYe,chmodSync:()=>dze,chown:()=>zYe,chownSync:()=>cze,chroot:()=>dz,close:()=>TYe,closeSync:()=>Db,constants:()=>rr,copyFile:()=>nQe,copyFileSync:()=>Yle,cp:()=>aQe,cpSync:()=>Qle,createReadStream:()=>VYe,createWriteStream:()=>eQe,exists:()=>xYe,existsSync:()=>f6,fchmod:()=>_Ye,fchmodSync:()=>gz,fchown:()=>PYe,fchownSync:()=>jle,fdatasync:()=>MYe,fdatasyncSync:()=>nze,fstat:()=>CYe,fstatSync:()=>eze,fsync:()=>DYe,fsyncSync:()=>oze,ftruncate:()=>IYe,ftruncateSync:()=>tze,futimes:()=>RYe,futimesSync:()=>hz,glob:()=>uQe,globSync:()=>wze,ioctl:()=>SQe,ioctlSync:()=>wQe,lchmod:()=>jYe,lchmodSync:()=>pze,lchown:()=>GYe,lchownSync:()=>uze,link:()=>UYe,linkSync:()=>sze,lopenSync:()=>g6,lstat:()=>bYe,lstatSync:()=>mz,lutimes:()=>KYe,lutimesSync:()=>mze,mkdir:()=>OYe,mkdirSync:()=>j8,mkdtemp:()=>oQe,mkdtempDisposableSync:()=>xze,mkdtempSync:()=>hze,mount:()=>Cb,open:()=>wYe,openAsBlob:()=>cQe,openSync:()=>fz,opendir:()=>sQe,opendirSync:()=>vze,promises:()=>a5,read:()=>BYe,readFile:()=>kYe,readFileSync:()=>Gle,readSync:()=>ize,readdir:()=>FYe,readdirSync:()=>Ib,readlink:()=>HYe,readlinkSync:()=>lze,readv:()=>rQe,readvSync:()=>yze,realpath:()=>YYe,realpathSync:()=>fze,rename:()=>hYe,renameSync:()=>XHe,rm:()=>tQe,rmSync:()=>xz,rmdir:()=>LYe,rmdirSync:()=>Wle,stat:()=>yYe,statSync:()=>X0,statfs:()=>lQe,statfsSync:()=>Sze,symlink:()=>$Ye,symlinkSync:()=>aze,truncate:()=>vYe,truncateSync:()=>JHe,umount:()=>$8,unlink:()=>SYe,unlinkSync:()=>zle,unwatchFile:()=>XYe,utimes:()=>WYe,utimesSync:()=>Kle,watch:()=>JYe,watchFile:()=>ZYe,write:()=>NYe,writeFile:()=>EYe,writeFileSync:()=>qle,writeSync:()=>rze,writev:()=>iQe,writevSync:()=>bze,xattr:()=>d5});var sq=x(()=>{d();iq();Md();fC();rq()});var qpe=x(()=>{d();yz();O8();Ab();iq();Md();pz();fC()});var Wpe,jpe=x(()=>{Wpe={name:"@zenfs/core",version:"2.5.0",description:"A filesystem, anywhere",funding:{type:"individual",url:"https://github.com/sponsors/james-pre"},main:"dist/index.js",types:"dist/index.d.ts",keywords:["filesystem","node","storage"],bin:{"make-index":"scripts/make-index.js","zenfs-test":"scripts/test.js",zci:"scripts/ci-cli.js"},files:["dist","tests","types","license.md","eslint.shared.js"],type:"module",homepage:"https://zenfs.dev/core",author:"James Prevett <jp@jamespre.dev> (https://jamespre.dev)",contributors:["John Vilk <jvilk@cs.umass.edu>"],license:"LGPL-3.0-or-later",repository:{type:"git",url:"git+https://github.com/zen-fs/core.git"},bugs:{url:"https://github.com/zen-fs/core/issues"},engines:{node:">= 18"},exports:{".":"./dist/index.js","./*":"./dist/*","./emulation/*":"./dist/node/*","./promises":"./dist/node/promises.js","./readline":"./dist/node/readline.js","./constants":"./dist/constants.js","./path":"./dist/path.js","./eslint":"./eslint.shared.js","./tests/*":"./tests/*","./types/*":"./types/*"},publishConfig:{access:"public",provenance:!0},scripts:{format:"prettier --write .","format:check":"prettier --check .","spdx:check":"npx lice -a src tests/*.ts tests/**/*.test.ts","spdx:fix":"npx lice -aw src tests/*.ts tests/**/*.test.ts",lint:"eslint src tests",test:"npx zenfs-test --clean; npx zenfs-test -abcp; tests/fetch/run.sh; npx zenfs-test --report",build:"tsc -p tsconfig.json","build:docs":"typedoc",dev:"tsc -p tsconfig.json --watch",prepublishOnly:"npm run build"},dependencies:{"@types/node":"^24.1.0",buffer:"^6.0.3",eventemitter3:"^5.0.1",kerium:"^1.3.4",memium:"^0.3.10","readable-stream":"^4.5.2",utilium:"^2.5.0"},devDependencies:{"@eslint/js":"^9.8.0","@octokit/action":"^7.0.0","@types/eslint__js":"^8.42.3",c8:"^10.1.2",eslint:"^9.15.0",globals:"^16.0.0",prettier:"^3.2.5",tsx:"^4.19.1",typedoc:"^0.28.0",typescript:"^5.7.2","typescript-eslint":"^8.16.0"}}});var zx=x(()=>{d();Ppe();dC();Rpe();Lpe();Hpe();Wl();Md();sq();sq();qpe();jpe();globalThis.__zenfs__=Object.assign(Object.create(p5),{_version:Wpe.version})});function hC(){return()=>[Xl.concat_whole]}var Xl,m5,Gx,Kpe,aq=x(()=>{d();Xl={whole:1,consume_n_bytes:2,concat_whole:3},m5={make(e,t,o,n="be"){return{name:e,byteLength:t,performOper:o,endianness:n}}},Gx=class{buffer;offset;constructor(t){t instanceof ArrayBuffer?this.buffer=new Uint8Array(t):Array.isArray(t)?this.buffer=new Uint8Array(t):t instanceof Uint8Array?this.buffer=t:this.buffer=new Uint8Array(0),this.offset=0}read(t){if(this.offset+t>this.buffer.length)throw new Error(`Not enough bytes in buffer. Requested: ${t}, Available: ${this.buffer.length-this.offset}`);let o=this.buffer.slice(this.offset,this.offset+t);return this.offset+=t,o}throwOpError(t,o){let n=Object.keys(Xl).find(i=>Xl[i]===t);throw new Error(`Cannot use ${n} operation: ${o}`)}readFromSpecType(t){let o=Kpe.find(i=>i.name===t);if(!o)throw new Error(`Unknown type: ${t}`);let n=o.performOper(this);if(Array.isArray(n)){let[i,...s]=n;switch(i){case Xl.whole:return o.byteLength===null&&this.throwOpError(Xl.whole,"variable-length types are not allowed."),this.read(o.byteLength);case Xl.consume_n_bytes:{let a=s[0];if(typeof a=="number")return this.read(a);throw new Error(`Invalid parameter for consume_n_bytes operation: ${a}`)}case Xl.concat_whole:{o.byteLength===null&&this.throwOpError(Xl.concat_whole,"variable-length types are not allowed.");let a=this.read(o.byteLength),l=0;if(o.endianness==="be")for(let c=0;c<a.length;c++)l=l<<8|a[c];else for(let c=0;c<a.length;c++)l|=a[c]<<c*8;return l}default:throw new Error(`Unsupported read operation: ${i}`)}}else throw new Error(`Invalid read operation for type ${t}`)}writeFromSpecType(t,o){let n=Kpe.find(l=>l.name===t);if(!n)throw new Error(`Unknown type: ${t}`);let i=this,s;o instanceof Uint8Array&&(s=o);let a=n.performOper({readFromSpecType(l){if(!s)throw new Error(`Cannot determine length for type '${t}' on a non-Uint8Array value.`);let c=s.length;return i.writeFromSpecType(l,c),c}});if(Array.isArray(a)){let[l,...c]=a;switch(l){case Xl.whole:{if(n.byteLength===null&&this.throwOpError(Xl.whole,"variable-length types are not allowed."),o instanceof Uint8Array)this.ensureCapacity(this.offset+n.byteLength),this.buffer.set(o.subarray(0,n.byteLength),this.offset),this.offset+=n.byteLength;else throw new Error(`Expected Uint8Array for type ${t} with 'whole' operation`);break}case Xl.consume_n_bytes:{let u=c[0];if(typeof u!="number")throw new Error(`Invalid parameter for consume_n_bytes operation: ${c[0]}`);if(!s)throw new Error(`Expected string or Uint8Array for 'consume_n_bytes' operation, but got ${typeof o}`);this.ensureCapacity(this.offset+u),this.buffer.set(s.subarray(0,u),this.offset),this.offset+=u;break}case Xl.concat_whole:{if(n.byteLength===null&&this.throwOpError(Xl.concat_whole,"variable-length types are not allowed."),typeof o=="number"){if(this.ensureCapacity(this.offset+n.byteLength),n.endianness==="be")for(let u=n.byteLength-1;u>=0;u--)this.buffer[this.offset+u]=o&255,o=o>>8;else for(let u=0;u<n.byteLength;u++)this.buffer[this.offset+u]=o&255,o=o>>8;this.offset+=n.byteLength}else throw new Error(`Expected number for type ${t} with 'concat_whole' operation`);break}default:throw new Error(`Unsupported write operation: ${l}`)}}else throw new Error(`Invalid write operation for type ${t}`)}ensureCapacity(t){if(this.buffer.length<t){let o=new Uint8Array(Math.max(t*2,this.buffer.length*2));o.set(this.buffer,0),this.buffer=o}}getBuffer(){return this.buffer}getOffset(){return this.offset}hasRemaining(){return this.offset<this.buffer.length}remaining(){return this.buffer.length-this.offset}reset(){this.offset=0}setOffset(t){if(t<0||t>this.buffer.length)throw new Error(`Invalid offset: ${t}. Buffer length: ${this.buffer.length}`);this.offset=t}emplaceIntoBuffer(t){this.ensureCapacity(this.offset+t.byteLength),this.buffer.set(t,this.offset),this.offset+=t.byteLength}setExactSize(t){let o=new Uint8Array(t);o.set(this.buffer,0),this.buffer=o}appendToBuffer(t){let o=this.buffer.length;this.setExactSize(o+t.byteLength),this.buffer.set(t,o)}};Kpe=[m5.make("uint8",1,hC()),m5.make("uint16",2,hC()),m5.make("uint32",4,hC()),m5.make("uint64",8,hC()),m5.make("string",null,e=>[Xl.consume_n_bytes,e.readFromSpecType("uint32")])]});function pf(e,t){e.writeFromSpecType("uint32",Number(t&0xffffffffn)>>>0),e.writeFromSpecType("uint32",Number(t>>32n&0xffffffffn)>>>0)}var lq,mf,Ype,cq,Qpe,Zpe=x(()=>{d();lq={ls:1,stat:2,read:3,write:4,unlink:5,new:6,touch:7,rmdir:8,move:9};mf=e=>{let t=e.readFromSpecType("uint32")>>>0,o=e.readFromSpecType("uint32")>>>0;return BigInt(o)<<32n|BigInt(t)},Ype={ls:{write(e,t){e.writeFromSpecType("uint16",t.length);for(let o of t)e.writeFromSpecType("string",new TextEncoder().encode(o))},read(e){let t=e.readFromSpecType("uint16"),o=[];for(let n=0;n<t;++n)o.push(new TextDecoder().decode(e.readFromSpecType("string")));return{entries:o,count:t}}},stat:{write(e,t){e.writeFromSpecType("uint32",t.size),e.writeFromSpecType("uint32",t.mode),pf(e,BigInt(t.mtime)),pf(e,BigInt(t.ctime)),pf(e,BigInt(t.atime))},read(e){return{stat:{size:Number(e.readFromSpecType("uint32"))>>>0,mode:Number(e.readFromSpecType("uint32"))>>>0,mtime:mf(e),ctime:mf(e),atime:mf(e)}}}},read:{write(e,t){e.writeFromSpecType("uint32",t.byteLength),e.emplaceIntoBuffer(t)},read(e){let t=Number(e.readFromSpecType("uint32"));return{data:e.read(t)}}},touch:{write(e,t){e.writeFromSpecType("uint8",t?1:0)},read(e){return{success:!!e.readFromSpecType("uint8")}}},write:{write(e,t){e.writeFromSpecType("uint8",t?1:0)},read(e){return{success:!!e.readFromSpecType("uint8")}}},new:{write(e,t){e.writeFromSpecType("uint32",t.size),e.writeFromSpecType("uint32",t.mode),pf(e,BigInt(t.mtime)),pf(e,BigInt(t.ctime)),pf(e,BigInt(t.atime))},read(e){return{result:{size:Number(e.readFromSpecType("uint32"))>>>0,mode:Number(e.readFromSpecType("uint32"))>>>0,mtime:mf(e),ctime:mf(e),atime:mf(e)}}}},unlink:{write(e,t){e.writeFromSpecType("uint8",t?1:0)},read(e){return{success:!!e.readFromSpecType("uint8")}}},rmdir:{write(e,t){e.writeFromSpecType("uint8",t?1:0)},read(e){return{success:!!e.readFromSpecType("uint8")}}},move:{write(e,t){e.writeFromSpecType("uint8",t?1:0)},read(e){return{success:!!e.readFromSpecType("uint8")}}}},cq={read(e){let t=e.read(1)[0];return{op_name:Object.keys(lq).find(n=>lq[n]===t),id:e.readFromSpecType("uint32")>>>0}},write(e,t,o){e.writeFromSpecType("uint8",lq[t]),e.writeFromSpecType("uint32",o)}},Qpe={ls:{read(e){return{path:new TextDecoder().decode(e.readFromSpecType("string"))}},write(e,t){e.writeFromSpecType("string",new TextEncoder().encode(t))}},stat:{read(e){return{path:new TextDecoder().decode(e.readFromSpecType("string"))}},write(e,t){e.writeFromSpecType("string",new TextEncoder().encode(t))}},new:{read(e){return{path:new TextDecoder().decode(e.readFromSpecType("string")),opt:{mode:Number(e.readFromSpecType("uint32"))>>>0}}},write(e,t,o){e.writeFromSpecType("string",new TextEncoder().encode(t)),e.writeFromSpecType("uint32",o.mode)}},unlink:{read(e){return{path:new TextDecoder().decode(e.readFromSpecType("string"))}},write(e,t){e.writeFromSpecType("string",new TextEncoder().encode(t))}},read:{read(e){return{path:new TextDecoder().decode(e.readFromSpecType("string")),start:Number(e.readFromSpecType("uint32"))>>>0,end:Number(e.readFromSpecType("uint32"))>>>0}},write(e,t,o,n){e.writeFromSpecType("string",new TextEncoder().encode(t)),e.writeFromSpecType("uint32",o),e.writeFromSpecType("uint32",n)}},touch:{read(e){return{path:new TextDecoder().decode(e.readFromSpecType("string")),stat:{size:Number(e.readFromSpecType("uint32"))>>>0,mode:Number(e.readFromSpecType("uint32"))>>>0,mtime:mf(e),ctime:mf(e),atime:mf(e)}}},write(e,t,o){e.writeFromSpecType("string",new TextEncoder().encode(t)),e.writeFromSpecType("uint32",o.size),e.writeFromSpecType("uint32",o.mode),pf(e,BigInt(o.mtime)),pf(e,BigInt(o.ctime)),pf(e,BigInt(o.atime))}},write:{read(e){return{path:new TextDecoder().decode(e.readFromSpecType("string")),data:e.read(Number(e.readFromSpecType("uint32"))>>>0),offset:Number(e.readFromSpecType("uint32"))>>>0}},write(e,t,o,n){e.writeFromSpecType("string",new TextEncoder().encode(t)),e.writeFromSpecType("uint32",o.byteLength),e.emplaceIntoBuffer(o),e.writeFromSpecType("uint32",n)}},rmdir:{read(e){return{path:new TextDecoder().decode(e.readFromSpecType("string"))}},write(e,t){e.writeFromSpecType("string",new TextEncoder().encode(t))}},move:{read(e){return{src_path:new TextDecoder().decode(e.readFromSpecType("string")),dst_path:new TextDecoder().decode(e.readFromSpecType("string"))}},write(e,t,o){e.writeFromSpecType("string",new TextEncoder().encode(t)),e.writeFromSpecType("string",new TextEncoder().encode(o))}}}});function xC(e){let t=e.readFromSpecType("uint32")>>>0,o=e.readFromSpecType("uint32")>>>0;return BigInt(o)<<32n|BigInt(t)}var uq,AQe,Hp,yC,dq=x(()=>{d();aq();uq=new TextEncoder().encode("SNAPSHOT"),AQe="0.2";Hp={HAD_READ_MAGIC:1,HAD_READ_VERSION:2,HAD_READ_TOTAL_BYTES:4,HAD_READ_ENTRIES_COUNT:8,HAD_READ_ALL_ENTRIES:16,HAD_READ_PATH_BLOB:32},yC=class{constructor(t,o,n,i,s,a,l){this.targetDir=t;this.stage=0,this.flags=0,this.entries_read=0,this.entries_count=-1,this.entries=[],this.pathBlobProcessed=!1,this.currentFileIndex=0,this.path_join_impl=o,this.createWriteStream_impl=n,this.path_sep=i,this.path_dirname_impl=s,this.fs_mkdir_impl=a,this.fs_utimes_impl=l}stage;flags;entries_read;entries_count;entries;pathBlobProcessed;currentFileIndex;dataWriteStream=null;bytesWrittenForCurrentFile=0;totalBytesForCurrentFile=0;pathBlobEndOffset=0;leftoverDataQueue=[];path_join_impl;createWriteStream_impl;path_sep;path_dirname_impl;fs_mkdir_impl;fs_utimes_impl;async restoreFromStream(t){let o=t.getReader(),n=new Gx;try{let i;for(;(i=await o.read())&&!i.done;){if(console.log(`Chunk received, size=${i.value.length}`),this.stage===2){await this.handleDataChunk(i.value);continue}n.appendToBuffer(i.value),console.log(`Remaining after append: ${n.remaining()}`),this.stage===0&&await this.parseHeader(n),this.stage===1&&await this.parsePathBlob(n)}this.dataWriteStream&&(this.dataWriteStream.end(),await new Promise((s,a)=>{this.dataWriteStream.on("finish",s).on("error",a)}))}finally{o.releaseLock(),this.dataWriteStream&&this.dataWriteStream.close()}}async parseHeader(t){if(!(this.flags&Hp.HAD_READ_MAGIC)&&t.remaining()>=uq.byteLength){if(!t.read(uq.byteLength).every((n,i)=>n===uq[i]))throw new Error("Invalid snapshot format");this.flags|=Hp.HAD_READ_MAGIC}if(!(this.flags&Hp.HAD_READ_VERSION)&&t.remaining()>=4){let o=t.readFromSpecType("string"),n=new TextDecoder().decode(o);if(n!==AQe)throw new Error(`Unsupported snapshot version: ${n}`);console.log(`Restoring snapshot with version ${n}`),this.flags|=Hp.HAD_READ_VERSION}if(!(this.flags&Hp.HAD_READ_ENTRIES_COUNT)&&t.remaining()>=4){let o=t.readFromSpecType("uint32");console.log(`Found ${o} entries in the snapshot`),this.flags|=Hp.HAD_READ_ENTRIES_COUNT,this.entries_count=o;for(let n=0;n<o;n++)this.entries.push({path:"",pathOffset:0,type:0,mode:0,mtime:0n,size:0,dataOffset:0})}if(!(this.flags&Hp.HAD_READ_TOTAL_BYTES)&&t.remaining()>=8){let o=xC(t);console.log(`Total bytes in the snapshot: ${o}`),this.flags|=Hp.HAD_READ_TOTAL_BYTES}if(!(this.flags&Hp.HAD_READ_ALL_ENTRIES)){if(this.entries_read<this.entries_count)for(console.log(`Parsing entry registry, from ${this.entries_read} to ${this.entries_count}`);this.entries_read<this.entries_count;){if(t.remaining()<40){console.log(`Not enough data to read next entry (need 40, have ${t.remaining()})`);break}let o=this.entries_read;this.entries[o].pathOffset=t.readFromSpecType("uint32"),this.entries[o].type=t.readFromSpecType("uint32"),this.entries[o].mode=t.readFromSpecType("uint32"),this.entries[o].mtime=xC(t),this.entries[o].size=Number(xC(t)),this.entries[o].dataOffset=Number(xC(t)),this.entries_read++}if(this.entries_read===this.entries_count){this.flags|=Hp.HAD_READ_ALL_ENTRIES,this.stage=1;let o=t.readFromSpecType("uint32");this.entries_count>0?this.pathBlobEndOffset=this.entries[0].pathOffset+o:this.pathBlobEndOffset=0,console.log(`Finished reading all ${this.entries_count} entries, moving to path blob, which promises to be exactly ${o} bytes long at pos ${this.pathBlobEndOffset}`)}}}async parsePathBlob(t){if(this.pathBlobProcessed)return;let o=t.getBuffer();if(o.length<this.pathBlobEndOffset){console.log(`Waiting for more data: have ${o.length}, need ${this.pathBlobEndOffset}`);return}for(let s=0;s<this.entries.length;s++){let a=this.entries[s],l=this.entries[s+1]?this.entries[s+1].pathOffset-a.pathOffset:this.pathBlobEndOffset-a.pathOffset,c=o.subarray(a.pathOffset,a.pathOffset+l);a.path=new TextDecoder().decode(c),console.log(`Read path for entry ${s}: "${a.path}"`)}this.pathBlobProcessed=!0;let n=this.pathBlobEndOffset,i=new Uint8Array(0);o.length>n&&(i=o.subarray(n),console.log(`Leftover bytes after path blob: ${i.length}`)),this.stage=2,await this.startDataRestoration(i)}async startDataRestoration(t){let o=[];for(let n of this.entries)if(n.type===1){let i=this.path_join_impl(this.targetDir,n.path);o.push(i)}o.sort((n,i)=>n.split(this.path_sep).length-i.split(this.path_sep).length);for(let n of o)await this.fs_mkdir_impl(n),console.log(`Created directory: ${n}`);await this.advanceToNextFile(),t.length>0&&await this.handleDataChunk(t)}async advanceToNextFile(){for(;this.currentFileIndex<this.entries.length;){let t=this.entries[this.currentFileIndex];if(t.type===1){this.currentFileIndex++;continue}let o=this.path_join_impl(this.targetDir,t.path),n=this.path_dirname_impl(o);await this.fs_mkdir_impl(n),this.dataWriteStream=this.createWriteStream_impl(o,{flags:"w"}),this.bytesWrittenForCurrentFile=0,this.totalBytesForCurrentFile=t.size,console.log(`Starting to write file: ${o} (${t.size} bytes)`);return}console.log("All files restored."),this.dataWriteStream&&(this.dataWriteStream.end(),this.dataWriteStream=null)}async handleDataChunk(t){for(this.leftoverDataQueue.push(t);this.currentFileIndex<this.entries.length&&this.dataWriteStream;){let o=this.entries[this.currentFileIndex];if(o.type===1){this.currentFileIndex++;continue}let n=this.totalBytesForCurrentFile-this.bytesWrittenForCurrentFile;if(n<=0){this.dataWriteStream.end(),await new Promise((l,c)=>{this.dataWriteStream.on("finish",l).on("error",c)});let a=this.path_join_impl(this.targetDir,o.path);await this.fs_utimes_impl(a,new Date,new Date(Number(o.mtime))),console.log(`Finished writing file: ${a}`),this.dataWriteStream=null,this.currentFileIndex++,await this.advanceToNextFile();continue}if(this.leftoverDataQueue.length===0)break;let i=this.leftoverDataQueue[0],s=i.subarray(0,Math.min(n,i.length));this.dataWriteStream.write(s),this.bytesWrittenForCurrentFile+=s.length,s.length===i.length?this.leftoverDataQueue.shift():this.leftoverDataQueue[0]=i.subarray(s.length)}}async restoreFromUrl(t){let o=await fetch(t,{headers:{accept:"application/octet-stream"}});if(!o.ok||!o.body)throw new Error(`Failed to fetch snapshot: ${o.status} ${o.statusText}`);await this.restoreFromStream(o.body)}}});function CQe(e,t,...o){Qpe[e].write(t,...o)}function IQe(e){if(!e||typeof e!="object")return e;let t=new Error(e.message);t.name=e.name||"Error",t.stack=e.stack;for(let o of Object.keys(e))["name","message","stack"].includes(o)||(t[o]=e[o]);return t}var pq,Xpe,TQe,f5,DQe,MQe,NQe,mq,BQe,Jpe,Vpe=x(()=>{d();aq();Zpe();zx();dq();Ss();pq=16384,Xpe=32768;TQe=new TextEncoder().encode("ERR:");f5=class{socket;pendingRequests=new Map;ready;nextId;constructor(t){this.socket=new WebSocket(`ws://${t}`),this.socket.binaryType="arraybuffer",this.socket.onmessage=async o=>{let n=o.data instanceof Blob?new Uint8Array(await o.data.arrayBuffer()):o.data,i=new Gx(n),s=cq.read(i);console.log("Received head",s);let a=this.pendingRequests.get(s.id);if(!a)throw new Error("Orphaned request");this.pendingRequests.delete(s.id),a(i)},this.ready=new Promise(o=>{this.socket.onopen=()=>o()}),this.nextId=1}send_request(t,...o){let n=new Gx,i=this.nextId++;return cq.write(n,t,i),CQe(t,n,...o),new Promise((s,a)=>{this.pendingRequests.set(i,l=>{try{console.log("Got response for",i);let c=l.getOffset();if(l.read(4).every((m,g)=>m===TQe[g])){let m=new TextDecoder().decode(l.read(l.remaining())),g=JSON.parse(m.split("\0")[0]);throw IQe(g)}l.setOffset(c);let p=Ype[t].read(l);s(p)}catch(c){a(c)}}),this.socket.send(n.getBuffer()),console.log("Sent",t,o,i)})}reattach(){let t=this.socket.url;if(this.socket.readyState!=WebSocket.OPEN){let o=this.socket.onmessage;this.socket.close(),this.socket=new WebSocket(t),this.socket.binaryType="arraybuffer",this.socket.onmessage=o}}getSnapshotPathname(){return this.socket.url.replace(/^ws/,"http").replace("/ws","/snapshot")}teardown(){this.socket.close()}},DQe=(e,t,o)=>{e.existsSync(t)||e.createFileSync(t,{mode:Xpe|511,gid:0,uid:0});let i=e.streamWrite(t,o).getWriter(),s=new Map,a={_closing:!1};return{end(){if(a._closing)return;a._closing=!0,i.close().then(()=>{s.get("finish")?.forEach(c=>c()),s.clear()})},close(){this.end()},on(l,c){return s.has(l)?s.get(l)?.push(c):s.set(l,[c]),this},async write(l){await i.write(l)}}},MQe=(e,t,o={recursive:!1})=>{if(o.recursive===!0){let n=t.split(j9).filter(Boolean);for(let i=1;i<n.length-1;++i){let s=n.slice(0,i+1).join("/");e.existsSync(s)||e.mkdirSync(s,{mode:pq|511,gid:0,uid:0})}}e.existsSync(t)||e.mkdirSync(t,{mode:pq|511,gid:0,uid:0})},NQe=(e,t,o,n,i)=>{e.touchSync(t,{atimeMs:o instanceof Date?o.getTime():o,mtimeMs:n instanceof Date?n.getTime():n}),i&&i(null)},mq=class extends Kb(ya){_sync;client;snapshotRestorer;constructor(t,o){super(1919246700,"realfs"),this.client=t,this._sync=o,this.snapshotRestorer=new yC("/",So,DQe.bind(null,this._sync),j9,yo,MQe.bind(null,this._sync),NQe.bind(null,this._sync))}async crossCopy(t){if(t==="/")return await this.snapshotRestorer.restoreFromUrl(this.client.getSnapshotPathname());throw new Error(`not supposed to be here at ${t}`)}async readdir(t){return(await this.client.send_request("ls",t)).entries}async rename(t,o){t!=o&&await this.client.send_request("move",t,o)}async stat(t){let o=await this.client.send_request("stat",t);return new Zt({atimeMs:Number(o.stat.atime),ctimeMs:Number(o.stat.ctime),mtimeMs:Number(o.stat.mtime),size:o.stat.size,mode:o.stat.mode})}async touch(t,o){await this.client.send_request("touch",t,{atime:BigInt(o.atimeMs??0),ctime:BigInt(o.ctimeMs??0),mtime:BigInt(o.mtimeMs??0),size:o.size??0,mode:o.mode??0})}async createFile(t,o){let n=await this.client.send_request("new",t,{mode:o.mode|Xpe});return new Zt({atimeMs:Number(n.result.atime),ctimeMs:Number(n.result.ctime),mtimeMs:Number(n.result.mtime),size:n.result.size,mode:n.result.mode})}async unlink(t){await this.client.send_request("unlink",t)}async rmdir(t){await this.client.send_request("rmdir",t)}async mkdir(t,o){let n=await this.client.send_request("new",t,{mode:o.mode|pq});return new Zt({atimeMs:Number(n.result.atime),ctimeMs:Number(n.result.ctime),mtimeMs:Number(n.result.mtime),size:n.result.size,mode:n.result.mode})}link(t,o){throw console.log("link",...arguments),new Error("Method not implemented.")}async read(t,o,n,i){let s=await this.client.send_request("read",t,n,i);o.set(s.data,0)}async write(t,o,n){await this.client.send_request("write",t,o,n)}},BQe={name:"RealFS",options:{client:{type:"object",required:!0},sync:{type:"object",required:!0}},isAvailable(){return!0},create(e){return new mq(e.client,e.sync)}},Jpe=BQe});var eme=x(()=>{d();Vpe();dq()});function PQe(e){switch(e.name){case"TypeMismatchError":return"EPERM";case"IndexSizeError":case"HierarchyRequestError":case"InvalidCharacterError":case"InvalidStateError":case"SyntaxError":case"NamespaceError":case"ConstraintError":case"VersionError":case"URLMismatchError":case"InvalidNodeTypeError":return"EINVAL";case"WrongDocumentError":return"EXDEV";case"NoModificationAllowedError":case"InvalidModificationError":case"InvalidAccessError":case"SecurityError":case"NotAllowedError":return"EACCES";case"NotFoundError":return"ENOENT";case"NotSupportedError":return"ENOTSUP";case"InUseAttributeError":return"EBUSY";case"NetworkError":return"ENETDOWN";case"AbortError":return"EINTR";case"QuotaExceededError":return"ENOSPC";case"TimeoutError":return"ETIMEDOUT";case"ReadOnlyError":return"EROFS";case"DataCloneError":case"EncodingError":case"NotReadableError":case"DataError":case"TransactionInactiveError":case"OperationError":case"UnknownError":default:return"EIO"}}function Ru(e,t){if(e instanceof zn)return e;let o=e instanceof DOMException?Ie[PQe(e)]:Ie.EIO,n=new zn(o,e.message);return n.stack=e.stack,Error.captureStackTrace?.(n,Ru),n.cause=e.cause,n}var fq=x(()=>{d();Ho()});function ome(e){return typeof e=="object"&&e!==null&&e.constructor.name=="SharedArrayBuffer"}function _Qe(e){return e instanceof ArrayBuffer?e.resizable:ome(e)?e.growable:!1}function Zb(e,t){return e.kind==t}var tme,nme=x(()=>{d();zx();Ss();Ho();Wi();Pi();fq();tme=class extends Kb(l5){async _loadHandles(t,o){for await(let[n,i]of o.entries()){let s=So(t,n);this._handles.set(s,i),Zb(i,"directory")&&await this._loadHandles(s,i)}}async _loadMetadata(t){if(this._handles.set("/",this.root),await this._loadHandles("/",this.root),t){let i=await(await(await this.get("file",t)).getFile()).text(),s=JSON.parse(i);this.index.fromJSON(s);return}for(let[o,n]of this._handles){if(Zb(n,"file")){let{lastModified:i,size:s}=await n.getFile();this.index.set(o,new Zt({mode:420|rr.S_IFREG,size:s,mtimeMs:i}));continue}if(!Zb(n,"directory"))throw Se("EIO","Invalid handle");this.index.set(o,new Zt({mode:511|rr.S_IFDIR,size:0}))}}constructor(t,o=!1){super(2003133025,"webaccessfs"),this.root=t,this.disableHandleCache=o,this._handles=new Map,this._sync=K0.create({label:"accessfs-cache"}),this.attributes.set("no_buffer_resize",!0),o&&this.attributes.set("no_handle_cache",!0)}async stat(t){try{return await super.stat(t)}catch(o){if(o.code!="ENOENT")throw o;let n=await this.get(null,t),i=new Zt;if(Zb(n,"file")){let s=await n.getFile();i.update({mode:420|rr.S_IFREG,size:s.size,mtimeMs:s.lastModified})}else i.update({mode:rr.S_IFDIR|511,size:0});return this.index.set(t,i),i}}async readdir(t){let o=await this.get("directory",t);return await Array.fromAsync(o.keys())}async remove(t){let o=await this.get("directory",yo(t));for(let n of this._handles.keys())yo(n)==t&&this._handles.delete(n);this._handles.delete(t),await o.removeEntry(Yi(t),{recursive:!0}).catch(n=>Ko(Ru(n,t)))}removeSync(){throw hl.crit(Se("ENOSYS"))}async read(t,o,n,i){if(i<=n)return;let l=await(await(await this.get("file",t)).getFile()).arrayBuffer();if(l.byteLength<i-n)throw sb(Se("EIO",["Unexpected mismatch in file data size. This should not happen.",`tried to read ${i-n} bytes but the file is ${l.byteLength} bytes.`,`path: ${t}`].join(`
`+" ".repeat(24))));o.set(new Uint8Array(l,n,i-n))}async write(t,o,n){if(_Qe(o.buffer)||ome(o.buffer)){let p=new Uint8Array(new ArrayBuffer(o.byteLength),o.byteOffset,o.byteLength);p.set(o),o=p}let i=this.index.get(t);if(!i)throw Se("ENOENT");let s=(i.mode&rr.S_IFMT)==rr.S_IFDIR,a;try{a=await this.get(s?"directory":"file",t)}catch{a=await(await this.get("directory",yo(t)))[s?"getDirectoryHandle":"getFileHandle"](Yi(t),{create:!0}).catch(m=>Ko(Ru(m,t))),this.disableHandleCache||this._handles.set(t,a)}if(s)return;if(Zb(a,"directory")){hl.crit(Se("EIO","Mismatch in entry kind on write"));return}let l=await a.createWritable({keepExistingData:!0});try{n<i.size&&await l.seek(n)}catch{await l.write({type:"seek",position:n})}await l.write(o),await l.close();let{size:c,lastModified:u}=await a.getFile();i.update({size:c,mtimeMs:u}),this.index.set(t,i)}async writeFile(t,o){return this.write(t,o,0)}async _mkdir(t){let n=await(await this.get("directory",yo(t))).getDirectoryHandle(Yi(t),{create:!0}).catch(i=>Ko(Ru(i,t)));this.disableHandleCache||this._handles.set(t,n)}async get(t=null,o){let n=this._handles.get(o);if(!this.disableHandleCache&&n){if(t&&!Zb(n,t))throw Se(t=="directory"?"ENOTDIR":"EISDIR");return n}if(o=="/")return this.root;let i=o.slice(1).split("/"),s=this.root;for(let a=0;a<i.length-1;++a)s=await s.getDirectoryHandle(i[a]).catch(l=>Ko(Ru(l,o)));try{let a=await s[t=="file"?"getFileHandle":"getDirectoryHandle"](i.at(-1));return this.disableHandleCache||this._handles.set(o,a),a}catch(a){if(a.name!="TypeMismatchError")throw Ru(a,o);if(t===null){let l=await s.getFileHandle(i.at(-1)).catch(c=>Ko(Ru(c,o)));return this.disableHandleCache||this._handles.set(o,l),l}else throw Se(t=="file"?"EISDIR":"ENOTDIR")}}}});function Xb(e){return new Promise((t,o)=>{e.onsuccess=()=>t(e.result),e.onerror=n=>{n.preventDefault(),o(Ru(e.error))}})}async function RQe(e,t=globalThis.indexedDB){let o=t.open(e);return o.onupgradeneeded=()=>{let n=o.result;n.objectStoreNames.contains(e)&&(hl.warn("Found unexpected object store: "+e),n.deleteObjectStore(e)),n.createObjectStore(e)},await Xb(o)}async function LQe(e){if(!(e instanceof IDBFactory))return!1;try{let t=e.open("__zenfs_test");return(await Xb(t)).close(),!0}catch{return!1}finally{e?.deleteDatabase("__zenfs_test")}}var hq,xq,gq,OQe,rme,ime=x(()=>{d();zx();Ho();fq();hq=class extends yb{async(t){this.asyncDone=this.asyncDone.then(()=>t)}constructor(t,o){super(o),this.tx=t,this.store=o,this.asyncDone=Promise.resolve(),this._idb=t.objectStore(o.name)}async keys(){return(await Xb(this._idb.getAllKeys())).map(Number)}async get(t){let o=await Xb(this._idb.get(t));return o&&this.store.cache.set(t,new Uint8Array(o)),o}getSync(t,o,n){if(!this.store.cache.has(t))return;let i=new Uint8Array(this.store.cache.get(t));return n??(n=i.byteLength),i.subarray(o,n)}async set(t,o){this.store.cache.set(t,new Uint8Array(o)),await Xb(this._idb.put(o,t))}setSync(t,o){this.async(this.set(t,o))}remove(t){return this.store.cache.delete(t),Xb(this._idb.delete(t))}removeSync(t){this.store.cache.delete(t),this.async(this.remove(t))}async commit(){await this.asyncDone;let{promise:t,resolve:o,reject:n}=Promise.withResolvers();return this.tx.oncomplete=()=>o(),this.tx.onerror=()=>n(Ru(this.tx.error)),this.tx.commit(),t}async abort(){await this.asyncDone;let{promise:t,resolve:o,reject:n}=Promise.withResolvers();return this.tx.onabort=()=>o(),this.tx.onerror=()=>n(Ru(this.tx.error)),this.tx.abort(),t}};xq=class{constructor(t){this.db=t,this.cache=new Map}sync(){return Promise.resolve()}get name(){return this.db.name}transaction(){let t=this.db.transaction(this.name,"readwrite");return new hq(t,this)}},gq=new WeakMap;OQe={name:"IndexedDB",options:{storeName:{type:"string",required:!1},idbFactory:{type:"object",required:!1}},async isAvailable({idbFactory:e=globalThis.indexedDB}){if(gq.has(e))return gq.get(e);let t=LQe(e);return gq.set(e,t),t},async create(e){let t=await RQe(e.storeName||"zenfs",e.idbFactory),o=new xq(t),n=new Bc(o);if(e?.disableAsyncCache)return hl.notice("Async preloading disabled for IndexedDB"),n;let i=o.transaction();for(let s of await i.keys())await i.get(s);return n}},rme=OQe});var yq,FQe,bq,sme=x(()=>{d();Ho();zx();Pi();yq=class{get name(){return bq.name}constructor(t){this.storage=t}clear(){this.storage.clear()}clearSync(){this.storage.clear()}async sync(){}transaction(){return new xx(this)}keys(){return Object.keys(this.storage).map(t=>Number(t))}get(t){let o=this.storage.getItem(t.toString());if(typeof o=="string")return R9(o)}set(t,o){try{this.storage.setItem(t.toString(),L9(o))}catch{throw Se("ENOSPC")}}delete(t){try{this.storage.removeItem(t.toString())}catch(o){throw Se("EIO",`Unable to delete '${t}': ${o}`)}}},FQe={name:"WebStorage",options:{storage:{type:"object",required:!1}},isAvailable(e){return(e?.storage??globalThis.localStorage)instanceof globalThis.Storage},create({storage:e=globalThis.localStorage}){return new Bc(new yq(e))}},bq=FQe});function bC(e){let t={};for(let o of G0){let n=e.getAttribute(o);n!=null&&(t[o]=parseInt(n,16))}return new Zt(t)}function ame(e,t){for(let o of Object.keys(t))!(o in G0)||t[o]===void 0||e.setAttribute(o,t[o].toString(16))}function vq(e,t=!1){let o;try{let n=t?e.textContent:e.getAttribute("paths");o=JSON.parse(n||"[]")}catch{o=[]}return o}var lme,cme=x(()=>{d();Ho();zx();Ss();Pi();lme=class extends Upe(ya){constructor(t=new DOMParser().parseFromString("<fs></fs>","application/xml").documentElement){super(544763244,"xmltmpfs"),this.root=t;try{this.mkdirSync("/",{uid:0,gid:0,mode:511})}catch(o){let n=o;if(n.code!="EEXIST")throw n}}renameSync(t,o){let n=this.get("rename",t);this.remove("rename",n,t),this.add("rename",n,o)}statSync(t){return bC(this.get("stat",t))}createFileSync(t,o){let n=this.statSync(yo(t)),i=new Zt({mode:o.mode|rr.S_IFREG,uid:n.mode&rr.S_ISUID?n.uid:o.uid,gid:n.mode&rr.S_ISGID?n.gid:o.gid});return this.create("createFile",t,i),i}unlinkSync(t){let o=this.get("unlink",t);if(bC(o).mode&rr.S_IFDIR)throw Se("EISDIR");this.remove("unlink",o,t)}rmdirSync(t){let o=this.get("rmdir",t);if(o.textContent?.length)throw Se("ENOTEMPTY");if(!(bC(o).mode&rr.S_IFDIR))throw Se("ENOTDIR");this.remove("rmdir",o,t)}mkdirSync(t,o){let n=this.statSync(yo(t)),i=new Zt({mode:o.mode|rr.S_IFDIR,uid:n.mode&rr.S_ISUID?n.uid:o.uid,gid:n.mode&rr.S_ISGID?n.gid:o.gid});return this.create("mkdir",t,i).textContent="[]",i}readdirSync(t){let o=this.get("readdir",t);if(!(bC(o).mode&rr.S_IFDIR))throw Se("ENOTDIR");try{return JSON.parse(o.textContent)}catch(n){throw Se("EIO","Invalid directory listing: "+n)}}linkSync(t,o){let n=this.get("link",t);this.add("link",n,o)}touchSync(t,o){let n=this.get("touch",t);ame(n,o)}syncSync(){}readSync(t,o,n,i){let s=this.get("read",t),a=R9(s.textContent.slice(n,i));o.set(a)}writeSync(t,o,n){let i=this.get("write",t),s=L9(o),a=i.textContent.slice(n+s.length);i.textContent=i.textContent.slice(0,n)+s+a}toString(){return new XMLSerializer().serializeToString(this.root)}get(t,o){let n=this.root.children;if(!n)throw Se("EIO");for(let i=0;i<n.length;i++)if(vq(n[i]).includes(o))return n[i];throw Se("ENOENT")}create(t,o,n){if(this.existsSync(o))throw Se("EEXIST");let i=document.createElement("file");return this.add(t,i,o),ame(i,new Zt({...n,uid:n.mode})),this.root.append(i),i}add(t,o,n,i=!1){let s=vq(o,i);if(s.push(n),i){o.textContent=JSON.stringify(s);return}if(o.setAttribute("paths",JSON.stringify(s)),o.setAttribute("nlink",s.length.toString(16)),n!="/"){let a=this.get(t,yo(n));this.add(t,a,Yi(n),!0)}}remove(t,o,n,i=!1){let s=vq(o,i),a=s.indexOf(n);if(a!=-1){if(s.splice(a,1),i){o.textContent=JSON.stringify(s);return}if(s.length?(o.setAttribute("paths",JSON.stringify(s)),o.setAttribute("nlink",s.length.toString(16))):o.remove(),n!="/"){let l=this.get(t,yo(n));this.remove(t,l,Yi(n),!0)}}}}});var ume=x(()=>{d();nme();ime();sme();cme()});async function UQe(){return!0}var vC,SC,dme=x(()=>{"use strict";d();Q();cs();$();B();Ps();l8();d8();cH();Iae();A9();D9();sx();zx();eme();ume();Ss();vC={name:ml,description:"Converts BD plugins to run in Vencord",authors:[{id:568109529884000260n,name:"Davilarek"},{id:917630027477159986n,name:"zrodevkaan"}],options:{enableExperimentalRequestPolyfills:{description:"Enables request polyfills that first try to request using normal fetch, then using a cors proxy when the normal one fails",type:3,default:!1,restartNeeded:!1},corsProxyUrl:{description:"CORS proxy used to bypass CORS",type:0,default:"https://cors-get-proxy.sirjosh.workers.dev/?url=",restartNeeded:!0},useIndexedDBInstead:{description:"Uses indexedDB instead of localStorage. It may cause memory usage issues but prevents exceeding localStorage quota. Note, after switching, you have to import your stuff back manually",type:3,default:!1,restartNeeded:!0},useRealFsInstead:{description:"Uses true, real filesystem hosted locally mounted on RealFS server's mount point instead of localStorage. It may cause memory usage issues but prevents exceeding localStorage quota. Note, after switching, you have to import your stuff back manually",type:3,default:!1,restartNeeded:!0},safeMode:{description:"Loads only filesystem",type:3,default:!1,restartNeeded:!0},pluginUrl1:{description:"Plugin url 1",type:0,default:"",restartNeeded:!0},pluginUrl2:{description:"Plugin url 2",type:0,default:"",restartNeeded:!0},pluginUrl3:{description:"Plugin url 3",type:0,default:"",restartNeeded:!0},pluginUrl4:{description:"Plugin url 4",type:0,default:"",restartNeeded:!0},pluginsStatus:{description:"",default:{},type:6,component(){return X.createElement("div")}}},originalBuffer:{},globalWasNotExisting:!1,globalDefineWasNotExisting:!1,start(){Tae();let e=C9(),t=Ge.plugins[this.name].corsProxyUrl??this.options.corsProxyUrl.default;Ge.plugins[this.name].hasOwnProperty("pluginsStatus")||(Ge.plugins[this.name].pluginsStatus=this.options.pluginsStatus.default);let o={browserFSSetting:{},client:null},n={setup:C9()};if(Ge.plugins[this.name].useRealFsInstead===!0)o.client=new f5("127.0.0.1:8000/api/v2/ws"),o.browserFSSetting={backend:Jpe,sync:K0,client:o.client},n.setup.resolve();else if(Ge.plugins[this.name].useIndexedDBInstead===!0){let v="VirtualFS_v2";o.browserFSSetting={backend:rme,storeName:v},n.setup.resolve()}else o.browserFSSetting={backend:bq,storage:Vencord.Util.localStorage},n.setup.resolve();Promise.all([n.setup.promise,ppe(o.browserFSSetting)]).then(async()=>{o.client&&o.client instanceof f5&&await o.client.ready,a.fs=p5,a.path=W9,(Ge.plugins[this.name].safeMode==null||Ge.plugins[this.name].safeMode==!1)&&s.fsReadyPromise.resolve()});let i=null,s={FSUtils:zl,ZIPUtils:p8,reloadCompatLayer:I9,fsReadyPromise:C9(),mainObserver:{},mainRouterListener:()=>window.GeneratedPlugins.forEach(v=>c.Plugins.isEnabled(v.name)&&typeof v.instance.onSwitch=="function"&&v.instance.onSwitch()),get Router(){return i==null&&(i=c.Webpack.getModule(v=>v.listeners&&v.flushRoute)),i},fakeClipboard:void 0,wrapPluginCode:(v,E="RuntimeGenerated.plugin.js")=>ix(v,E,!1),queuedPlugins:[]};window.BdCompatLayer=s,window.GeneratedPlugins=[];let a={fs:{},path:{},https:{get_(v,E,A){let C=new a.events.EventEmitter,I=new a.events.EventEmitter,N=ax(v,{...E,method:"get"},t);return N.then(async _=>{if(I.emit("response",C),_.body){let O=_.body.getReader(),F=await O.read();for(;!F.done;)C.emit("data",F.value),F=await O.read()}C.emit("end",Object.assign({},_,{statusCode:_.status,headers:Object.fromEntries(_.headers.entries())}))}),A(C),N.catch(_=>{I.callbacks.error&&I.emit("error",_)}),I},get get(){if(Ge.plugins[vC.name].enableExperimentalRequestPolyfills===!0)return this.get_}},get request_(){let v=function(E,A=(...I)=>{},C={}){let I={theCallback:A};typeof C=="function"&&(A=C,C=I.theCallback),delete I.theCallback;let N=ax(E,{...C,method:"get"},t);N.then(async _=>{A(void 0,Object.assign({},_,{statusCode:_.status,headers:Object.fromEntries(_.headers.entries())}),await _.text())}),N.catch(_=>{A(_,void 0,void 0)})};return v.get=function(E,A=(...I)=>{},C={}){return this(E,A,{...C,method:"get"})},v},get request(){if(Ge.plugins[vC.name].enableExperimentalRequestPolyfills===!0)return this.request_},get events(){let v=mae,E=class extends v{};return Object.defineProperty(E,"EventEmitter",{value:E}),E},electron:{},process:{env:{_home_secret:"",get HOME(){let v="/home/fake";return zl.mkdirSyncRecursive(v),v},NODE_ENV:"production"}}};e.resolve();let l=v=>a[v],c=vae();if(window.BdApi=c,Kr[ml].userPlugin===!0)throw c.UI.showConfirmationModal("Error","BD Compatibility Layer will not work as a user plugin!",{cancelText:null,onCancel:null}),oo.warn("Removing settings tab..."),hH(),oo.warn("Removing compat layer..."),delete window.BdCompatLayer,oo.warn("Removing BdApi..."),gH(),delete window.BdApi,new Error("BD Compatibility Layer will not work as a user plugin!");window.require=l,this.originalBuffer=window.Buffer,window.Buffer=c.Webpack.getModule(v=>v.INSPECT_MAX_BYTES)?.Buffer,typeof window.global>"u"?(this.globalWasNotExisting=!0,this.globalDefineWasNotExisting=!0):typeof window.global.define>"u"&&(this.globalDefineWasNotExisting=!0),window.global=window.global||globalThis,window.global.define=window.global.define||function(){},s.fakeClipboard=(()=>{let v=c.Webpack.getModule(E=>E.clipboard);return v?v.clipboard:{copy:Oo}})();let u=new Promise((v,E)=>{m8.setup({React:X}),fae(t).then(A=>{let C=A.output,I=ha.makeOverride;ha.makeOverride=function(...O){let F=I.call(this,...O);return Object.defineProperty(F,"name",{value:"BDPatcher"}),F};let N=Object.getOwnPropertyDescriptor(ha,"makePatch").value;Object.defineProperty(ha,"makePatch",{value:function(...O){let[F,J]=O;if(F&&J){let G=Object.getOwnPropertyDescriptor(F,J);if(G&&G.get&&!G.set&&G.configurable){let te=G.get.call(F);Object.defineProperty(F,J,{value:te,writable:!0,configurable:!0,enumerable:G.enumerable}),oo.debug(`Converted ${J} from getter to value for patching`)}else G&&!G.writable&&G.configurable&&!G.get&&Object.defineProperty(F,J,{writable:!0})}return N.call(this,...O)}}),ha.setup(C),gae(C,t).then(_=>{let O=_.output;c.ContextMenu=O,v()},E)},E)}),p=new Promise((v,E)=>{UQe().then(A=>{if(!A){oo.error("CORS Proxy CSP rejected."),E();return}u.then(v,E)})}),m=document.createElement("span");m.style.display="none",m.id="bd-loading-icon",document.body.appendChild(m),setTimeout(()=>{m.remove()},500);let g=document.createElement("bd-head");document.body.appendChild(g);let y=document.createElement("bd-styles");g.appendChild(y);let b=document.createElement("bd-scripts");g.appendChild(b),Promise.all([s.fsReadyPromise.promise,p]).then(()=>{s.Router?.listeners.add(s.mainRouterListener);let v=new MutationObserver(I=>I.forEach(N=>window.GeneratedPlugins.forEach(_=>c.Plugins.isEnabled(_.name)&&_.instance.observer?.(N))));v.observe(document,{childList:!0,subtree:!0}),s.mainObserver=v;let E=window.require("fs");E.existsSync(c.Plugins.folder)||zl.mkdirSyncRecursive(c.Plugins.folder);for(let I in this.options)if(Object.hasOwnProperty.call(this.options,I)&&Ge.plugins[this.name][I]&&I.startsWith("pluginUrl"))try{let N=Ge.plugins[this.name][I],_=cae(t+N),O=_.responseURL.split("/").pop();E.writeFileSync(c.Plugins.folder+"/"+O,_.responseText)}catch(N){oo.error(N,`
While loading: `+Ge.plugins[this.name][I])}let C=E.readdirSync(c.Plugins.folder).sort().filter(I=>I.endsWith(".plugin.js"));for(let I=0;I<C.length;I++){let N=C[I],_=E.readFileSync(c.Plugins.folder+"/"+N,"utf8");ix(_,N,!0,c.Plugins.folder).then(O=>{ob(O)})}}),c.DOM.addStyle("OwOStylesOwO",`
            .custom-notification {
                display: flex;
                flex-direction: column;
                position: absolute;
                bottom: 20px; right: 20px;
                width: 440px; height: 270px;
                overflow: hidden;
                background-color: var(--modal-background);
                color: white;
                border-radius: 5px;
                box-shadow: var(--legacy-elevation-border),var(--legacy-elevation-high);
                animation: 1s slide cubic-bezier(0.39, 0.58, 0.57, 1);
                z-index: 1;
            }
            @keyframes slide {
                0% {
                    right: -440px;
                }
                100% {
                    right: 20px;
                }
            }
            .custom-notification.close {
                animation: 1s gobyebye cubic-bezier(0.39, 0.58, 0.57, 1) forwards;
                right: 20px;
            }

            @keyframes gobyebye {
                0% {
                    right: 20px;
                }
                100% {
                    right: -440px;
                }
            }
            .custom-notification .top-box {padding: 16px;}
            .custom-notification .notification-title {font-size: 20px; font-weight: bold;}
            .custom-notification .content {
                padding: 0 16px 20px;
                flex: 1 1 auto;
                overflow: hidden;
            }
            .custom-notification .bottom-box {
                background-color: var(--modal-footer-background);
                padding: 16px;
                display: flex;
                justify-content: flex-end;
                align-items: center;
            }
            .custom-notification .confirm-button {
                background-color: #007bff;
                color: white;
                border-radius: 5px;
                padding: 5px 10px;
                margin: 0 5px;
            }
            .custom-notification .cancel-button {
                background-color: red;
                color: white;
                border-radius: 5px;
                padding: 5px 10px;
                margin: 0 5px;
            }
            .button-with-svg {
                position: absolute;
                right: 15px;
                margin-top: -0px !important;
                background: transparent;
            }
        `),c.DOM.addStyle("bd-compat-layer-stuff",".bd-compat-setting .vc-plugins-setting-title { display: none; }"),c.DOM.addStyle("bd-compat-layer-fs",`
            .vc-bdcompat-fs-explorer-container {
                display: flex;
                flex-direction: column;
                height: 100%;
                border-radius: 0.5rem;
                overflow: hidden;
            }

            .vc-bdcompat-fs-toolbar {
                display: flex;
                align-items: center;
                padding: 0.5rem 0.75rem;
                gap: 0.75rem;
            }

            .vc-bdcompat-fs-nav-buttons {
                display: flex;
                gap: 0.25rem;
            }

            .vc-bdcompat-fs-address-bar {
                display: flex;
                align-items: center;
                flex: 1;
                padding: 0.25rem 0.5rem;
                border-radius: 0.25rem;
            }

            .vc-bdcompat-fs-address-label {
                margin-right: 0.5rem;
            }

            .vc-bdcompat-fs-breadcrumb {
                cursor: pointer;
            }

            .vc-bdcompat-fs-breadcrumb-separator {
                margin: 0 0.25em;
            }

            .vc-bdcompat-fs-content-container {
                display: flex;
                flex: 1;
                min-height: 0;
                overflow: hidden;
            }

            .vc-bdcompat-fs-sidebar {
                width: 7rem;
                display: flex;
                flex-direction: column;
                transition: width 0.2s ease;
            }

            .vc-bdcompat-fs-sidebar-collapsed {
                width: 2.5rem;
            }

            .vc-bdcompat-fs-tree-container {
                flex: 1;
                padding: 0.75rem;
                overflow-y: auto;
            }

            .vc-bdcompat-fs-main-content {
                flex: 1;
                display: flex;
                flex-direction: column;
                overflow: hidden;
            }

            .vc-bdcompat-fs-sort-controls {
                display: flex;
                align-items: center;
                padding: 0.5rem 1.5rem;
                gap: 0.75rem;
                font-size: 0.875rem;
            }

            .vc-bdcompat-fs-sort-button {
                padding: 0.25rem 0.5rem;
            }

            .vc-bdcompat-fs-file-list {
                flex: 1;
                overflow: auto;
                padding: 0 0.75rem 0.75rem;
            }

            .vc-bdcompat-fs-loading,
            .vc-bdcompat-fs-empty-state {
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                height: 100%;
                padding: 2rem;
                color: var(--text-muted);
                text-align: center;
                gap: 0.75rem;
            }

            .vc-bdcompat-fs-empty-state svg {
                color: var(--text-muted);
                opacity: 0.7;
            }

            .vc-bdcompat-fs-file-table {
                width: 100%;
                border-collapse: collapse;
                table-layout: fixed;
            }

            .vc-bdcompat-fs-file-table th,
            .vc-bdcompat-fs-file-table td {
                text-align: left;
                padding: 0.5rem 0.75rem;
                overflow: hidden;
                text-overflow: ellipsis;
                white-space: nowrap;
                box-sizing: border-box;
            }

            .vc-bdcompat-fs-file-table tr {
                display: table-row;
            }

            .vc-bdcompat-fs-file-table td,
            .vc-bdcompat-fs-file-table th {
                display: table-cell;
            }

            .vc-bdcompat-fs-file-table td {
                vertical-align: middle;
            }

            .vc-bdcompat-fs-file-row {
                cursor: pointer;
                transition: background-color 0.2s ease;
            }

            .vc-bdcompat-fs-file-name {
                display: flex;
                align-items: center;
                gap: 0.5em;
            }

            .vc-bdcompat-fs-file-name svg {
                color: var(--text-muted);
                flex-shrink: 0;
            }

            .vc-bdcompat-fs-status-bar {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 0.25rem 0.75rem;
            }

            .vc-bdcompat-fs-explorer-card {
                margin-top: 1rem;
                overflow: hidden;
            }

            .vc-bdcompat-fs-tree-header {
                padding: 0.5rem 0.75rem;
                margin-bottom: 0.5rem;
            }

            .vc-bdcompat-fs-tree-content {
                overflow-y: auto;
                padding: 0 0.25rem;
            }

            .vc-bdcompat-fs-tree-item {
                padding: 0.125rem 0;
                border-radius: 0.25rem;
            }

            .vc-bdcompat-fs-folder-row,
            .vc-bdcompat-fs-file-row {
                display: flex;
                align-items: center;
                padding: 0.25rem 0.5rem;
                cursor: pointer;
                color: var(--text-muted);
            }

            .vc-bdcompat-fs-folder-toggle {
                width: 1rem;
                margin-right: 0.25rem;
                display: inline-block;
                text-align: center;
                flex-shrink: 0;
            }

            .vc-bdcompat-fs-file-icon {
                margin-right: 0.375rem;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .vc-bdcompat-fs-item-name {
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
                flex: 1;
            }

            .vc-bdcompat-fs-children-container {
                margin-left: 1rem;
            }
        `)},async stop(){oo.warn("Disabling observer..."),window.BdCompatLayer.mainObserver.disconnect(),oo.warn("Removing onSwitch listener..."),window.BdCompatLayer.Router.listeners.delete(window.BdCompatLayer.mainRouterListener),oo.warn("UnPatching context menu..."),Hn().Patcher.unpatchAll("ContextMenuPatcher"),oo.warn("Removing plugins..."),await E9(),oo.warn("Removing added css..."),Hn().DOM.removeStyle("OwOStylesOwO"),Hn().DOM.removeStyle("bd-compat-layer-stuff"),Hn().DOM.removeStyle("bd-compat-layer-fs"),oo.warn("Removing settings tab..."),hH(),this.globalDefineWasNotExisting===!0&&(oo.warn("Removing global.define..."),delete window.global.define),this.globalWasNotExisting===!0&&(oo.warn("Removing global..."),delete window.global),oo.warn("Removing compat layer..."),delete window.BdCompatLayer,oo.warn("Removing BdApi..."),gH(),delete window.BdApi,window.zip&&(oo.warn("Removing ZIP..."),delete window.zip),oo.warn("Removing FileSystem..."),delete window.BrowserFS,oo.warn("Restoring buffer..."),window.Buffer=this.originalBuffer}},SC=k({name:"BD Compatibility Layer",...vC})});var pme=x(()=>{});function HQe(){let e=qx.getExpandedFolders(),t=wC.getGuildFolders(),o=new Set;for(let n of t)e.has(n.folderId)&&n.guildIds?.length&&o.add(n.folderId);return o}var $Qe,mme,fme=x(()=>{"use strict";d();tt();fe();B();Sq();$Qe=De('("guildsnav")');mme=ee.wrap(e=>{let t=Je([qx,wC],()=>HQe()),o=Je([h0],()=>h0.isFullscreenInContext()),n=r($Qe,{...e,isBetterFolders:!0,betterFoldersExpandedIds:t}),i=!!t.size,s=document.querySelector(e.className.split(" ").map(l=>`.${l}`).join("")),a={display:o?"none":"flex"};return!s||!Ri.store.sidebarAnim?i?r("div",{className:"vc-betterFolders-sidebar",style:a},n):null:r(QE.Transition,{items:i,from:{width:0},enter:{width:s.getBoundingClientRect().width},leave:{width:0},config:{duration:200}},(l,c)=>c&&r(QE.animated.div,{className:"vc-betterFolders-sidebar",style:{...l,...a}},n))},{noop:!0})});function zQe(e){return wC.getGuildFolders().find(t=>t.guildIds.includes(e))}function kq(){for(let e of qx.getExpandedFolders())kC.toggleGuildFolderExpand(e)}function Eq(e,t){if(e==null)return!1;if(!Array.isArray(e))return t(e)?!0:Eq(e.props?.children,t);let o=!1;for(let n=0;n<e.length;n++){if(Eq(e[n],t)){o=!0;continue}e.splice(n--,1)}return o}var qx,wC,kC,gme,wq,Ri,hme,GQe,qQe,EC,Sq=x(()=>{"use strict";d();pme();Q();H();mt();At();$();fe();B();fme();qx=Ft("ExpandedGuildFolderStore"),wC=Ft("SortedGuildStore"),kC=He("move","toggleGuildFolderExpand"),gme=null,wq=!1;Ri=R({sidebar:{type:3,description:"Display servers from folder on dedicated sidebar",restartNeeded:!0,default:!0},sidebarAnim:{type:3,description:"Animate opening the folder sidebar",default:!0},closeAllFolders:{type:3,description:"Close all folders when selecting a server not in a folder",default:!1},closeAllHomeButton:{type:3,description:"Close all folders when clicking on the home button",restartNeeded:!0,default:!1},closeOthers:{type:3,description:"Close other folders when opening a folder",default:!1},closeServerFolder:{type:3,description:"Close folder when selecting a server in that folder",default:!1},forceOpen:{type:3,description:"Force a folder to open when switching to a server of that folder",default:!1},keepIcons:{type:3,description:"Keep showing guild icons in the primary guild bar folder when it's open in the BetterFolders sidebar",restartNeeded:!0,default:!1},showFolderIcon:{type:4,description:"Show the folder icon above the folder guilds in the BetterFolders sidebar",options:[{label:"Never",value:0},{label:"Always",value:1,default:!0},{label:"When more than one folder is expanded",value:2}],restartNeeded:!0}}),hme="typeof isBetterFolders!=='undefined'?isBetterFolders:arguments[0]?.isBetterFolders",GQe="typeof betterFoldersExpandedIds!=='undefined'?betterFoldersExpandedIds:arguments[0]?.betterFoldersExpandedIds",qQe="vc-betterFolders-sidebar-grid",EC=k({name:"BetterFolders",description:"Shows server folders on dedicated sidebar and adds folder related improvements",authors:[w.juby,w.AutumnVN,w.Nuckyz],isModified:!0,settings:Ri,patches:[{find:'("guildsnav")',predicate:()=>Ri.store.sidebar,replacement:[{match:/let{disableAppDownload:\i=\i\.isPlatformEmbedded,isOverlay:.+?(?=}=\i,)/,replace:"$&,isBetterFolders,betterFoldersExpandedIds"},{match:/,{guildDiscoveryButton:\i,/g,replace:"$&isBetterFolders:arguments[0]?.isBetterFolders,betterFoldersExpandedIds:arguments[0]?.betterFoldersExpandedIds,"},{match:/switch\((\i)\.type\){.+?default:return null}/,replace:`return $self.wrapGuildNodeComponent($1,()=>{$&},${hme},${GQe});`},{match:/switch\(\i\.type\){case \i\.\i\.FOLDER:.+?folderNode:\i,/,replace:`$&isBetterFolders:${hme},`},{match:/switch\(\i\.type\).+?,\i,\i\.setNodeRef/,replace:"$&,arguments[0]?.isBetterFolders,arguments[0]?.betterFoldersExpandedIds"},{match:/lastTargetNode:\i\[\i\.length-1\].+?}\)(?::null)?\](?=}\))/,replace:"$&.filter($self.makeGuildsBarGuildListFilter(!!arguments[0]?.isBetterFolders))"},{match:/reverse:!0,.{0,150}?barClassName:.+?\}\)\]/,replace:"$&.filter($self.makeGuildsBarSidebarFilter(!!arguments[0]?.isBetterFolders))"}]},{find:".toggleGuildFolderExpand(",predicate:()=>Ri.store.sidebar&&Ri.store.showFolderIcon!==1,replacement:[{match:/(\],\(\)=>)(\i\.\i)\.isFolderExpanded\(\i\)\)/,replace:(e,t,o)=>`${t}${o}.getExpandedFolders())`},{match:/(?<=folderNode:(\i),expanded:)\i(?=,)/,replace:(e,t)=>`typeof ${e}==="boolean"?${e}:${e}.has(${t}.id),betterFoldersExpandedIds:${e} instanceof Set?${e}:void 0`}]},{find:".FOLDER_ITEM_ANIMATION_DURATION),",predicate:()=>Ri.store.sidebar,replacement:[{predicate:()=>Ri.store.keepIcons,match:/(?<=let ?(?:\i,)*?{folderNode:\i,setNodeRef:\i,.+?expanded:(\i),.+?;)(?=let)/,replace:(e,t)=>`${t}=!!arguments[0]?.isBetterFolders&&${t};`},{predicate:()=>!Ri.store.keepIcons,match:/(?=,\{from:\{height)/,replace:"&&$self.shouldShowTransition(arguments[0])"},{predicate:()=>!Ri.store.keepIcons,match:/"--custom-folder-color".+?(?=\i\(\(\i,\i,\i\)=>{let{key:.{0,70}"ul")(?<=selected:\i,expanded:(\i),.+?)/,replace:(e,t)=>`${e}$self.shouldRenderContents(arguments[0],${t})?null:`},{predicate:()=>Ri.store.showFolderIcon!==1,match:/"--custom-folder-color".{0,110}?children:\[/,replace:"$&$self.shouldShowFolderIconAndBackground(!!arguments[0]?.isBetterFolders,arguments[0]?.betterFoldersExpandedIds)&&"},{predicate:()=>Ri.store.showFolderIcon!==1,match:/"--custom-folder-color".+?className:\i\.\i}\),(?=\i,)/,replace:"$&!$self.shouldShowFolderIconAndBackground(!!arguments[0]?.isBetterFolders,arguments[0]?.betterFoldersExpandedIds)?null:"}]},{find:"APPLICATION_LIBRARY,render:",predicate:()=>Ri.store.sidebar,group:!0,replacement:[{match:/(?<=[[,])((?:!?\i&&)+)\(.{0,50}({className:\i\.\i,themeOverride:\i})\)/g,replace:(e,t,o)=>`${e},${t}$self.FolderSideBar(${o})`},{match:/(?<=className:)\i\.\i(?=,"data-fullscreen")/,replace:`"${qQe} "+$&`}]},{find:"#{intl::DISCODO_DISABLED}",predicate:()=>Ri.store.closeAllHomeButton,replacement:{match:/(?<=onClick:\(\)=>{)(?=.{0,300}"discodo")/,replace:"$self.closeFolders();"}}],flux:{CHANNEL_SELECT(e){if(!(!Ri.store.closeAllFolders&&!Ri.store.forceOpen&&!Ri.store.closeServerFolder)&&gme!==e.guildId){gme=e.guildId;let t=zQe(e.guildId);t?.folderId?(Ri.store.forceOpen&&!qx.isFolderExpanded(t.folderId)&&kC.toggleGuildFolderExpand(t.folderId),Ri.store.closeServerFolder&&qx.isFolderExpanded(t.folderId)&&kC.toggleGuildFolderExpand(t.folderId)):Ri.store.closeAllFolders&&kq()}},TOGGLE_GUILD_FOLDER_EXPAND(e){Ri.store.closeOthers&&!wq&&(wq=!0,V.wait(()=>{let t=qx.getExpandedFolders();if(t.size>1)for(let o of t)o!==e.folderId&&kC.toggleGuildFolderExpand(o);wq=!1}))},LOGOUT(){kq()}},FolderSideBar:mme,closeFolders:kq,wrapGuildNodeComponent(e,t,o,n){return!o||e.type==="folder"&&n?.has(e.id)||e.type==="guild"&&n?.has(e.parentId)?t():r("div",{style:{display:"none"}},t())},makeGuildsBarGuildListFilter(e){return t=>{if(!e)return!0;try{let o=St("SERVERS");return o?t?.props?.["aria-label"]===o:(new ke("BetterFolders").error("Failed to get SERVERS intl message"),!0)}catch(o){return console.error(o),!0}}},makeGuildsBarSidebarFilter(e){return t=>{if(!e)return!0;try{return Eq(t,o=>o?.props?.renderTreeNode!=null)}catch(o){return console.error(o),!0}}},shouldShowFolderIconAndBackground(e,t){if(!e)return!0;switch(Ri.store.showFolderIcon){case 0:return!1;case 1:return!0;case 2:return(t?.size??0)>1;default:return!0}},shouldShowTransition(e){return e?.folderNode?.id===1?!0:!!e?.isBetterFolders},shouldRenderContents(e,t){return e?.folderNode?.id===1?!1:!e?.isBetterFolders&&t}})});var AC,xme=x(()=>{"use strict";d();H();$();AC=k({name:"BetterGifAltText",authors:[w.Ven],description:"Change GIF alt text from simply being 'GIF' to containing the gif tags / filename",patches:[{find:".modalContext})};",replacement:{match:/(return.{0,10}\.jsx.{0,50}isWindowFocused)/,replace:"$self.altify(e);$1"}},{find:"#{intl::GIF}",replacement:{match:/alt:(\i)=(\i\.\i\.string\(\i\.\i#{intl::GIF}\))(?=,[^}]*\}=(\i))/,replace:"alt_$$:$1=$self.altify($3)||$2"}}],altify(e){if(e.alt??="GIF",e.alt!=="GIF")return e.alt;let t=e.original||e.src;try{t=decodeURI(t)}catch{}let o=t.slice(t.lastIndexOf("/")+1).replace(/\d/g,"").replace(/.gif$/,"").split(/[,\-_ ]+/g).slice(0,20).join(" ");return o.length>300&&(o=o.slice(0,300)+"..."),o&&(e.alt+=` - ${o}`),e.alt}})});var CC,g5,jx,Aq=x(()=>{"use strict";d();Q();H();$();CC=0,g5=R({keepOpen:{description:"Keeps the gif picker open after selecting a gif",type:3,default:!1}}),jx=k({name:"BetterGifPicker",description:"Makes the gif picker open the favourite category by default",authors:[w.Samwich,j.justjxke],isModified:!0,settings:g5,patches:[{find:"renderHeaderContent(){",replacement:[{match:/(?<=state={resultType:)null/,replace:'"Favorites"'}]},{find:"#{intl::NO_GIF_FAVORITES_HOW_TO_FAVORITE}",predicate:()=>g5.store.keepOpen,replacement:[{match:/null!=\i&&\i\(\i\),/,replace:"$self.onGifSelect(),$&"},{match:/\i\.scrollIntoViewRect\(\{/,replace:"$self.shouldSuppressGifFocusScroll()||$&"},{match:/this.renderGIF\(\).{0,50}\]/,replace:"$&,onMouseDown:e=>{$self.shouldSuppressGifFocusScroll()&&e.preventDefault()}"}]},{find:"expression-picker-last-active-view",replacement:{match:/\i\.setState\(\{activeView:null/,replace:"$self.consumeCloseSuppress()||$&"}}],onGifSelect(){g5.store.keepOpen&&(CC=2)},consumeCloseSuppress(){return g5.store.keepOpen?CC<=0?!1:(CC--,!0):(CC=0,!1)},shouldSuppressGifFocusScroll(){return g5.store.keepOpen}})});var Cq,TC,yme=x(()=>{"use strict";d();Q();H();ad();$();Cq=R({hide:{type:3,description:"Hide notes",default:!1,restartNeeded:!0},noSpellCheck:{type:3,description:"Disable spellcheck in notes",disabled:()=>Ge.plugins.BetterNotesBox.hide,default:!1}}),TC=k({name:"BetterNotesBox",description:"Hide notes or disable spellcheck (Configure in settings!!)",authors:[w.Ven],settings:Cq,patches:[{find:"hideNote:",all:!0,noWarn:!0,predicate:()=>Cq.store.hide,replacement:{match:/hideNote:.+?(?=([,}].*?\)))/g,replace:(e,t)=>{if(t.match(/}=.+/)){let n=e.match(Ti(/hideNote:(\i)=!?\d/));return n?`hideNote:${n[1]}=!0`:e}return"hideNote:!0"}}},{find:"#{intl::NOTE_PLACEHOLDER}",replacement:{match:/#{intl::NOTE_PLACEHOLDER}\),/,replace:"$&spellCheck:!$self.noSpellCheck,"}}],get noSpellCheck(){return Cq.store.noSpellCheck}})});function WQe(){return r("svg",{role:"img",width:"18",height:"18",fill:"none",viewBox:"0 0 24 24"},r("path",{fill:"currentColor",d:"m13.96 5.46 4.58 4.58a1 1 0 0 0 1.42 0l1.38-1.38a2 2 0 0 0 0-2.82l-3.18-3.18a2 2 0 0 0-2.82 0l-1.38 1.38a1 1 0 0 0 0 1.42ZM2.11 20.16l.73-4.22a3 3 0 0 1 .83-1.61l7.87-7.87a1 1 0 0 1 1.42 0l4.58 4.58a1 1 0 0 1 0 1.42l-7.87 7.87a3 3 0 0 1-1.6.83l-4.23.73a1.5 1.5 0 0 1-1.73-1.73Z"}))}function KQe(){return r("svg",{width:"18",height:"18",viewBox:"0 0 24 24"},r("path",{fill:"currentColor",d:"M 12,0 C 5.3733333,0 0,5.3733333 0,12 c 0,6.626667 5.3733333,12 12,12 1.106667,0 2,-0.893333 2,-2 0,-0.52 -0.2,-0.986667 -0.52,-1.346667 -0.306667,-0.346666 -0.506667,-0.813333 -0.506667,-1.32 0,-1.106666 0.893334,-2 2,-2 h 2.36 C 21.013333,17.333333 24,14.346667 24,10.666667 24,4.7733333 18.626667,0 12,0 Z M 4.6666667,12 c -1.1066667,0 -2,-0.893333 -2,-2 0,-1.1066667 0.8933333,-2 2,-2 1.1066666,0 2,0.8933333 2,2 0,1.106667 -0.8933334,2 -2,2 z M 8.666667,6.6666667 c -1.106667,0 -2.0000003,-0.8933334 -2.0000003,-2 0,-1.1066667 0.8933333,-2 2.0000003,-2 1.106666,0 2,0.8933333 2,2 0,1.1066666 -0.893334,2 -2,2 z m 6.666666,0 c -1.106666,0 -2,-0.8933334 -2,-2 0,-1.1066667 0.893334,-2 2,-2 1.106667,0 2,0.8933333 2,2 0,1.1066666 -0.893333,2 -2,2 z m 4,5.3333333 c -1.106666,0 -2,-0.893333 -2,-2 0,-1.1066667 0.893334,-2 2,-2 1.106667,0 2,0.8933333 2,2 0,1.106667 -0.893333,2 -2,2 z"}))}var bme,jQe,vme,IC,Sme=x(()=>{"use strict";d();Q();Ra();ao();cs();H();mt();$();fe();B();bme=He("open","selectRole","updateGuild"),jQe=nr("appearance","developerMode");vme=R({roleIconFileFormat:{type:4,description:"File format to use when viewing role icons",options:[{label:"png",value:"png",default:!0},{label:"webp",value:"webp"},{label:"jpg",value:"jpg"}]}}),IC=k({name:"BetterRoleContext",description:"Adds options to copy role color / edit role / view role icon when right clicking roles in the user profile",authors:[w.Ven,w.goodbee],dependencies:["UserSettingsAPI"],settings:vme,start(){jQe.updateSetting(!0)},contextMenus:{"dev-context"(e,{id:t}){let o=bc();if(!o)return;let n=tr.getRole(o.id,t);n&&(n.colorString&&e.unshift(r(M.MenuItem,{id:"vc-copy-role-color",label:"Copy Role Color",action:()=>Oo(n.colorString),icon:KQe})),Kt.getGuildPermissionProps(o).canManageRoles&&e.unshift(r(M.MenuItem,{id:"vc-edit-role",label:"Edit Role",action:async()=>{await bme.open(o.id,"ROLES"),bme.selectRole(t)},icon:WQe})),n.icon&&e.push(r(M.MenuItem,{id:"vc-view-role-icon",label:"View Role Icon",action:()=>{us({url:`${location.protocol}//${window.GLOBAL_ENV.CDN_HOST}/role-icons/${n.id}/${n.icon}.${vme.store.roleIconFileFormat}`,height:128,width:128})},icon:nl})))}}})});var Jb,DC,wme=x(()=>{"use strict";d();Q();H();mt();$();Jb=R({bothStyles:{type:3,description:"Show both role dot and coloured names",restartNeeded:!0,default:!1},copyRoleColorInProfilePopout:{type:3,description:"Allow click on role dot in profile popout to copy role color",restartNeeded:!0,default:!1}}),DC=k({name:"BetterRoleDot",authors:[w.Ven,w.AutumnVN],description:"Copy role colour on RoleDot (accessibility setting) click. Also allows using both RoleDot and coloured names simultaneously",settings:Jb,patches:[{find:"M0 4C0 1.79086 1.79086 0 4 0H16C18.2091 0 20 1.79086 20 4V16C20 18.2091 18.2091 20 16 20H4C1.79086 20 0 18.2091 0 16V4Z",replacement:{match:/,viewBox:"0 0 20 20"/,replace:"$&,onClick:()=>$self.copyToClipBoard(arguments[0].color),style:{cursor:'pointer'}"}},{find:'"dot"===',all:!0,noWarn:!0,predicate:()=>Jb.store.bothStyles,replacement:{match:/"(?:username|dot)"===\i(?!\.\i)/g,replace:"true"}},{find:"#{intl::ADD_ROLE_A11Y_LABEL}",all:!0,predicate:()=>Jb.store.copyRoleColorInProfilePopout&&!Jb.store.bothStyles,noWarn:!0,replacement:{match:/"dot"===\i/,replace:"true"}},{find:".roleVerifiedIcon",all:!0,predicate:()=>Jb.store.copyRoleColorInProfilePopout&&!Jb.store.bothStyles,noWarn:!0,replacement:{match:/"dot"===\i/,replace:"true"}}],copyToClipBoard(e){$t(e)}})});var kme=x(()=>{});var Eme,Ame,Cme,Tme,Ime,Dme,Mme,Nme,Bme,Pme=x(()=>{"use strict";d();qo();fe();Eme=e=>r("svg",{...e,fill:"currentColor",viewBox:"0 0 16 16"},r("path",{d:"M13.545 2.907a13.227 13.227 0 0 0-3.257-1.011.05.05 0 0 0-.052.025c-.141.25-.297.577-.406.833a12.19 12.19 0 0 0-3.658 0 8.258 8.258 0 0 0-.412-.833.051.051 0 0 0-.052-.025c-1.125.194-2.22.534-3.257 1.011a.041.041 0 0 0-.021.018C.356 6.024-.213 9.047.066 12.032c.001.014.01.028.021.037a13.276 13.276 0 0 0 3.995 2.02.05.05 0 0 0 .056-.019c.308-.42.582-.863.818-1.329a.05.05 0 0 0-.01-.059.051.051 0 0 0-.018-.011 8.875 8.875 0 0 1-1.248-.595.05.05 0 0 1-.02-.066.051.051 0 0 1 .015-.019c.084-.063.168-.129.248-.195a.05.05 0 0 1 .051-.007c2.619 1.196 5.454 1.196 8.041 0a.052.052 0 0 1 .053.007c.08.066.164.132.248.195a.051.051 0 0 1-.004.085 8.254 8.254 0 0 1-1.249.594.05.05 0 0 0-.03.03.052.052 0 0 0 .003.041c.24.465.515.909.817 1.329a.05.05 0 0 0 .056.019 13.235 13.235 0 0 0 4.001-2.02.049.049 0 0 0 .021-.037c.334-3.451-.559-6.449-2.366-9.106a.034.034 0 0 0-.02-.019Zm-8.198 7.307c-.789 0-1.438-.724-1.438-1.612 0-.889.637-1.613 1.438-1.613.807 0 1.45.73 1.438 1.613 0 .888-.637 1.612-1.438 1.612Zm5.316 0c-.788 0-1.438-.724-1.438-1.612 0-.889.637-1.613 1.438-1.613.807 0 1.451.73 1.438 1.613 0 .888-.631 1.612-1.438 1.612Z"})),Ame=e=>r("svg",{...e,fill:"currentColor",viewBox:"0 0 512 512"},r("path",{d:"M188.8,255.93A67.2,67.2,0,1,0,256,188.75,67.38,67.38,0,0,0,188.8,255.93Z"}),r("path",{d:"M476.75,217.79s0,0,0,.05a206.63,206.63,0,0,0-7-28.84h-.11a202.16,202.16,0,0,1,7.07,29h0a203.5,203.5,0,0,0-7.07-29H314.24c19.05,17,31.36,40.17,31.36,67.05a86.55,86.55,0,0,1-12.31,44.73L231,478.45a2.44,2.44,0,0,1,0,.27V479h0v-.26A224,224,0,0,0,256,480c6.84,0,13.61-.39,20.3-1a222.91,222.91,0,0,0,29.78-4.74C405.68,451.52,480,362.4,480,255.94A225.25,225.25,0,0,0,476.75,217.79Z"}),r("path",{d:"M256,345.5c-33.6,0-61.6-17.91-77.29-44.79L76,123.05l-.14-.24A224,224,0,0,0,207.4,474.55l0-.05,77.69-134.6A84.13,84.13,0,0,1,256,345.5Z"}),r("path",{d:"M91.29,104.57l77.35,133.25A89.19,89.19,0,0,1,256,166H461.17a246.51,246.51,0,0,0-25.78-43.94l.12.08A245.26,245.26,0,0,1,461.17,166h.17a245.91,245.91,0,0,0-25.66-44,2.63,2.63,0,0,1-.35-.26A223.93,223.93,0,0,0,91.14,104.34l.14.24Z"})),Cme=e=>r("svg",{...e,fill:"currentColor",viewBox:"0 0 24 24"},r("path",{d:"M21.86 17.86q.14 0 .25.12.1.13.1.25t-.11.33l-.32.46-.43.53-.44.5q-.21.25-.38.42l-.22.23q-.58.53-1.34 1.04-.76.51-1.6.91-.86.4-1.74.64t-1.67.24q-.9 0-1.69-.28-.8-.28-1.48-.78-.68-.5-1.22-1.17-.53-.66-.92-1.44-.38-.77-.58-1.6-.2-.83-.2-1.67 0-1 .32-1.96.33-.97.87-1.8.14.95.55 1.77.41.82 1.02 1.5.6.68 1.38 1.21.78.54 1.64.9.86.36 1.77.56.92.2 1.8.2 1.12 0 2.18-.24 1.06-.23 2.06-.72l.2-.1.2-.05zm-15.5-1.27q0 1.1.27 2.15.27 1.06.78 2.03.51.96 1.24 1.77.74.82 1.66 1.4-1.47-.2-2.8-.74-1.33-.55-2.48-1.37-1.15-.83-2.08-1.9-.92-1.07-1.58-2.33T.36 14.94Q0 13.54 0 12.06q0-.81.32-1.49.31-.68.83-1.23.53-.55 1.2-.96.66-.4 1.35-.66.74-.27 1.5-.39.78-.12 1.55-.12.7 0 1.42.1.72.12 1.4.35.68.23 1.32.57.63.35 1.16.83-.35 0-.7.07-.33.07-.65.23v-.02q-.63.28-1.2.74-.57.46-1.05 1.04-.48.58-.87 1.26-.38.67-.65 1.39-.27.71-.42 1.44-.15.72-.15 1.38zM11.96.06q1.7 0 3.33.39 1.63.38 3.07 1.15 1.43.77 2.62 1.93 1.18 1.16 1.98 2.7.49.94.76 1.96.28 1 .28 2.08 0 .89-.23 1.7-.24.8-.69 1.48-.45.68-1.1 1.22-.64.53-1.45.88-.54.24-1.11.36-.58.13-1.16.13-.42 0-.97-.03-.54-.03-1.1-.12-.55-.1-1.05-.28-.5-.19-.84-.5-.12-.09-.23-.24-.1-.16-.1-.33 0-.15.16-.35.16-.2.35-.5.2-.28.36-.68.16-.4.16-.95 0-1.06-.4-1.96-.4-.91-1.06-1.64-.66-.74-1.52-1.28-.86-.55-1.79-.89-.84-.3-1.72-.44-.87-.14-1.76-.14-1.55 0-3.06.45T.94 7.55q.71-1.74 1.81-3.13 1.1-1.38 2.52-2.35Q6.68 1.1 8.37.58q1.7-.52 3.58-.52Z"})),Tme=e=>r("svg",{...e,fill:"currentColor",viewBox:"0 0 512 512"},r("path",{d:"M130.22 127.548C130.38 127.558 130.3 127.558 130.22 127.548V127.548ZM481.64 172.898C471.03 147.398 449.56 119.898 432.7 111.168C446.42 138.058 454.37 165.048 457.4 185.168C457.405 185.306 457.422 185.443 457.45 185.578C429.87 116.828 383.098 89.1089 344.9 28.7479C329.908 5.05792 333.976 3.51792 331.82 4.08792L331.7 4.15792C284.99 30.1109 256.365 82.5289 249.12 126.898C232.503 127.771 216.219 131.895 201.19 139.035C199.838 139.649 198.736 140.706 198.066 142.031C197.396 143.356 197.199 144.87 197.506 146.323C197.7 147.162 198.068 147.951 198.586 148.639C199.103 149.327 199.76 149.899 200.512 150.318C201.264 150.737 202.096 150.993 202.954 151.071C203.811 151.148 204.676 151.045 205.491 150.768L206.011 150.558C221.511 143.255 238.408 139.393 255.541 139.238C318.369 138.669 352.698 183.262 363.161 201.528C350.161 192.378 326.811 183.338 304.341 187.248C392.081 231.108 368.541 381.784 246.951 376.448C187.487 373.838 149.881 325.467 146.421 285.648C146.421 285.648 157.671 243.698 227.041 243.698C234.541 243.698 255.971 222.778 256.371 216.698C256.281 214.698 213.836 197.822 197.281 181.518C188.434 172.805 184.229 168.611 180.511 165.458C178.499 163.75 176.392 162.158 174.201 160.688C168.638 141.231 168.399 120.638 173.51 101.058C148.45 112.468 128.96 130.508 114.8 146.428H114.68C105.01 134.178 105.68 93.7779 106.25 85.3479C106.13 84.8179 99.022 89.0159 98.1 89.6579C89.5342 95.7103 81.5528 102.55 74.26 110.088C57.969 126.688 30.128 160.242 18.76 211.318C14.224 231.701 12 255.739 12 263.618C12 398.318 121.21 507.508 255.92 507.508C376.56 507.508 478.939 420.281 496.35 304.888C507.922 228.192 481.64 173.82 481.64 172.898Z"})),Ime=e=>r("svg",{...e,fill:"currentColor",viewBox:"0 0 512 512"},r("path",{d:"M483.049 159.706c10.855-24.575 21.424-60.438 21.424-87.871 0-72.722-79.641-98.371-209.673-38.577-107.632-7.181-211.221 73.67-237.098 186.457 30.852-34.862 78.271-82.298 121.977-101.158C125.404 166.85 79.128 228.002 43.992 291.725 23.246 329.651 0 390.94 0 436.747c0 98.575 92.854 86.5 180.251 42.006 31.423 15.43 66.559 15.573 101.695 15.573 97.124 0 184.249-54.294 216.814-146.022H377.927c-52.509 88.593-196.819 52.996-196.819-47.436H509.9c6.407-43.581-1.655-95.715-26.851-141.162zM64.559 346.877c17.711 51.15 53.703 95.871 100.266 123.304-88.741 48.94-173.267 29.096-100.266-123.304zm115.977-108.873c2-55.151 50.276-94.871 103.98-94.871 53.418 0 101.981 39.72 103.981 94.871H180.536zm184.536-187.6c21.425-10.287 48.563-22.003 72.558-22.003 31.422 0 54.274 21.717 54.274 53.722 0 20.003-7.427 49.007-14.569 67.867-26.28-42.292-65.986-81.584-112.263-99.586z"})),Dme=e=>r("svg",{...e,fill:"currentColor",viewBox:"0 0 496 512"},r("path",{d:"M313.9 32.7c-170.2 0-252.6 223.8-147.5 355.1 36.5 45.4 88.6 75.6 147.5 75.6 36.3 0 70.3-11.1 99.4-30.4-43.8 39.2-101.9 63-165.3 63-3.9 0-8 0-11.9-.3C104.6 489.6 0 381.1 0 248 0 111 111 0 248 0h.8c63.1.3 120.7 24.1 164.4 63.1-29-19.4-63.1-30.4-99.3-30.4zm101.8 397.7c-40.9 24.7-90.7 23.6-132-5.8 56.2-20.5 97.7-91.6 97.7-176.6 0-84.7-41.2-155.8-97.4-176.6 41.8-29.2 91.2-30.3 132.9-5 105.9 98.7 105.5 265.7-1.2 364z"})),Mme=e=>r("svg",{...e,fill:"currentColor",viewBox:"0 0 512 512"},r("path",{d:"M274.69,274.69l-37.38-37.38L166,346ZM256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8ZM411.85,182.79l14.78-6.13A8,8,0,0,1,437.08,181h0a8,8,0,0,1-4.33,10.46L418,197.57a8,8,0,0,1-10.45-4.33h0A8,8,0,0,1,411.85,182.79ZM314.43,94l6.12-14.78A8,8,0,0,1,331,74.92h0a8,8,0,0,1,4.33,10.45l-6.13,14.78a8,8,0,0,1-10.45,4.33h0A8,8,0,0,1,314.43,94ZM256,60h0a8,8,0,0,1,8,8V84a8,8,0,0,1-8,8h0a8,8,0,0,1-8-8V68A8,8,0,0,1,256,60ZM181,74.92a8,8,0,0,1,10.46,4.33L197.57,94a8,8,0,1,1-14.78,6.12l-6.13-14.78A8,8,0,0,1,181,74.92Zm-63.58,42.49h0a8,8,0,0,1,11.31,0L140,128.72A8,8,0,0,1,140,140h0a8,8,0,0,1-11.31,0l-11.31-11.31A8,8,0,0,1,117.41,117.41ZM60,256h0a8,8,0,0,1,8-8H84a8,8,0,0,1,8,8h0a8,8,0,0,1-8,8H68A8,8,0,0,1,60,256Zm40.15,73.21-14.78,6.13A8,8,0,0,1,74.92,331h0a8,8,0,0,1,4.33-10.46L94,314.43a8,8,0,0,1,10.45,4.33h0A8,8,0,0,1,100.15,329.21Zm4.33-136h0A8,8,0,0,1,94,197.57l-14.78-6.12A8,8,0,0,1,74.92,181h0a8,8,0,0,1,10.45-4.33l14.78,6.13A8,8,0,0,1,104.48,193.24ZM197.57,418l-6.12,14.78a8,8,0,0,1-14.79-6.12l6.13-14.78A8,8,0,1,1,197.57,418ZM264,444a8,8,0,0,1-8,8h0a8,8,0,0,1-8-8V428a8,8,0,0,1,8-8h0a8,8,0,0,1,8,8Zm67-6.92h0a8,8,0,0,1-10.46-4.33L314.43,418a8,8,0,0,1,4.33-10.45h0a8,8,0,0,1,10.45,4.33l6.13,14.78A8,8,0,0,1,331,437.08Zm63.58-42.49h0a8,8,0,0,1-11.31,0L372,383.28A8,8,0,0,1,372,372h0a8,8,0,0,1,11.31,0l11.31,11.31A8,8,0,0,1,394.59,394.59ZM286.25,286.25,110.34,401.66,225.75,225.75,401.66,110.34ZM437.08,331h0a8,8,0,0,1-10.45,4.33l-14.78-6.13a8,8,0,0,1-4.33-10.45h0A8,8,0,0,1,418,314.43l14.78,6.12A8,8,0,0,1,437.08,331ZM444,264H428a8,8,0,0,1-8-8h0a8,8,0,0,1,8-8h16a8,8,0,0,1,8,8h0A8,8,0,0,1,444,264Z"})),Nme=e=>r("svg",{...e,fill:"currentColor",viewBox:"0 0 16 16"},r("path",{fillRule:"evenodd",d:"M4.475 5.458c-.284 0-.514-.237-.47-.517C4.28 3.24 5.576 2 7.825 2c2.25 0 3.767 1.36 3.767 3.215 0 1.344-.665 2.288-1.79 2.973-1.1.659-1.414 1.118-1.414 2.01v.03a.5.5 0 0 1-.5.5h-.77a.5.5 0 0 1-.5-.495l-.003-.2c-.043-1.221.477-2.001 1.645-2.712 1.03-.632 1.397-1.135 1.397-2.028 0-.979-.758-1.698-1.926-1.698-1.009 0-1.71.529-1.938 1.402-.066.254-.278.461-.54.461h-.777ZM7.496 14c.622 0 1.095-.474 1.095-1.09 0-.618-.473-1.092-1.095-1.092-.606 0-1.087.474-1.087 1.091S6.89 14 7.496 14Z"})),Bme=Rn(()=>ap("M15.5 1h-8C6.12 1 5 2.12 5 3.5v17C5 21.88 6.12 23 7.5 23h8c1.38"))});function h5(e){return`${e.os} \xB7 ${e.platform}`}function x5(){return Gt(_me(),Jl)}async function Rme(){(await zt(_me())||new Map).forEach((t,o)=>{Jl.set(o,t)})}function Lme(e){switch(e){case"Windows Mobile":case"Windows":return"#55a6ef";case"Linux":return"#cdcd31";case"Android":return"#7bc958";case"Mac OS X":case"iOS":return"";default:return"#f3799a"}}function Ome(e){switch(e){case"Discord Android":case"Discord iOS":case"Discord Client":return Eme;case"Android Chrome":case"Chrome iOS":case"Chrome":return Ame;case"Edge":return Cme;case"Firefox":return Tme;case"Internet Explorer":return Ime;case"Opera Mini":case"Opera":return Dme;case"Mobile Safari":case"Safari":return Mme;case"BlackBerry":case"Facebook Mobile":case"Android Mobile":return Bme;default:return Nme}}var _me,Jl,Tq=x(()=>{"use strict";d();vn();B();Pme();_me=()=>`BetterSessions_savedSessions_${z.getCurrentUser().id}`,Jl=new Map});function Fme({props:e,session:t,state:o}){let[n,i]=o,[s,a]=X.useState(Jl.get(t.id_hash)?.name??"");function l(){Jl.set(t.id_hash,{name:s,isNew:!1}),i(s!==""?`${s}*`:h5(t.client_info)),x5(),e.onClose()}return r(Pe,{...e},r(je,null,r(Vn,null,"Rename")),r($e,null,r(re,{style:{marginTop:"10px"}},"New device name"),r(qe,{style:{marginBottom:"10px"},placeholder:h5(t.client_info),value:s,onChange:a,onKeyDown:c=>{c.key==="Enter"&&l()}}),r(U,{style:{marginBottom:"20px",paddingLeft:"1px",paddingRight:"1px",opacity:.6},look:U.Looks.LINK,color:U.Colors.LINK,size:U.Sizes.NONE,onClick:()=>a("")},"Reset Name")),r(ht,null,r("div",{className:"vc-betterSessions-footer-buttons"},r(U,{color:U.Colors.PRIMARY,onClick:()=>e.onClose()},"Cancel"),r(U,{color:U.Colors.BRAND,onClick:l},"Save"))))}var Ume=x(()=>{"use strict";d();ut();Tq();at();B()});function $me({session:e,state:t}){return r(Me,{variant:"secondary",size:"xs",className:"vc-betterSessions-rename-btn",onClick:()=>Ee(o=>r(Fme,{props:o,session:e,state:t}))},"Rename")}var Hme=x(()=>{"use strict";d();Co();at();Ume()});var YQe,QQe,ZQe,XQe,Iq,MC,zme=x(()=>{"use strict";d();kme();_a();Q();tt();H();$();fe();B();Hme();Tq();YQe=Ft("AuthSessionsStore"),QQe=et("timestamp","blockquoteContainer"),ZQe=et("sessionIcon"),XQe=De("!1,lowerBadgeSize:"),Iq=R({backgroundCheck:{type:3,description:"Check for new sessions in the background, and display notifications when they are detected",default:!1,restartNeeded:!0},checkInterval:{description:"How often to check for new sessions in the background (if enabled), in minutes",type:1,default:20,restartNeeded:!0}}),MC=k({name:"BetterSessions",description:"Enhances the sessions (devices) menu. Allows you to view exact timestamps, give each session a custom name, and receive notifications about new sessions.",authors:[w.amia],settings:Iq,patches:[{find:"#{intl::AUTH_SESSIONS_SESSION_LOG_OUT}",replacement:[{match:/({variant:"eyebrow",className:\i\.\i,children:).{70,110}{children:"\\xb7"}\),\(0,\i\.\i\)\("span",{children:\i\[\d+\]}\)\]}\)\]/,replace:"$1$self.renderName(arguments[0])"},{match:/({variant:"text-sm\/medium",className:\i\.\i,children:.{70,110}{children:"\\xb7"}\),\(0,\i\.\i\)\("span",{children:)(\i\[\d+\])}/,replace:"$1$self.renderTimestamp({...arguments[0],timeLabel:$2})}"},{match:/children:\[(?=.{0,125}?width:"32")(?<=,icon:(\i)\}.+?)/,replace:"children:[$self.renderIcon({...arguments[0],DeviceIcon:$1}),false&&"}]}],renderName:ee.wrap(({session:e})=>{let t=Jl.get(e.id_hash),o=X.useState(t?.name?`${t.name}*`:h5(e.client_info)),[n,i]=o;return r(f,null,r("span",null,n),(t==null||t.isNew)&&r("div",{className:"vc-addon-badge",style:{backgroundColor:"#ED4245",marginLeft:"2px"}},"NEW"),r($me,{session:e,state:o}))},{noop:!0}),renderTimestamp:ee.wrap(({session:e,timeLabel:t})=>r(Ue,{text:e.approx_last_used_time.toLocaleString()},o=>r("span",{...o,className:QQe.timestamp},t)),{noop:!0}),renderIcon:ee.wrap(({session:e,DeviceIcon:t})=>{let o=Ome(e.client_info.platform);return r(XQe,{isFolder:!0,style:{cursor:"unset"},selected:!1,lowerBadge:r("div",{style:{width:"20px",height:"20px",display:"flex",justifyContent:"center",alignItems:"center",overflow:"hidden",borderRadius:"50%",backgroundColor:"var(--interactive-icon-default)",color:"var(--background-base-lower)"}},r(o,{width:14,height:14})),lowerBadgeSize:{width:20,height:20}},r("div",{className:ZQe.sessionIcon,style:{backgroundColor:Lme(e.client_info.os)}},r(t,{size:"md",color:"currentColor"})))},{noop:!0}),async checkNewSessions(){let e=await Ht.get({url:jo.Endpoints.AUTH_SESSIONS});for(let t of e.body.user_sessions)Jl.has(t.id_hash)||(Jl.set(t.id_hash,{name:"",isNew:!0}),qt({title:"BetterSessions",body:`New session:
${t.client_info.os} \xB7 ${t.client_info.platform} \xB7 ${t.client_info.location}`,permanent:!0,onClick:()=>Lm.openUserSettings("sessions_panel")}));x5()},flux:{USER_SETTINGS_ACCOUNT_RESET_AND_CLOSE_FORM(){let e=YQe.getSessions().map(t=>t.id_hash);e.forEach(t=>{Jl.has(t)||Jl.set(t,{name:"",isNew:!1})}),e.length>0&&Jl.forEach((t,o)=>{e.includes(o)||Jl.delete(o)}),Jl.forEach(t=>{t.isNew=!1}),x5()}},async start(){await Rme(),this.checkNewSessions(),Iq.store.backgroundCheck&&(this.checkInterval=setInterval(this.checkNewSessions,Iq.store.checkInterval*60*1e3))},stop(){clearInterval(this.checkInterval)}})});var Gme=x(()=>{});function qme(e){return r("svg",{viewBox:"0 0 443 443",width:20,height:20,...e},r("path",{fill:"currentColor",d:"M221.5.6C99.2.6,0,99.7,0,222.1s99.2,221.5,221.5,221.5,221.5-99.2,221.5-221.5S343.8.6,221.5.6ZM221.5,363.3c-78.3,0-141.8-63.5-141.8-141.8s63.5-141.8,141.8-141.8,141.8,63.5,141.8,141.8-63.5,141.8-141.8,141.8Z"}),r("path",{fill:"currentColor",d:"M438.3,175C421,90.1,354.7,23.1,269.9,5.1,145-21.3,33.1,57.6,6.2,169.5c-3.4,14.1,4.6,28.5,18.4,33.1l2.7.9c24.7,8.2,51.8-4.7,60.4-29.3,19.4-55.6,72.5-95.4,134.9-95,44.3.3,84.1,21.2,109.9,53.7l-63.3,29.5c-7.9-7-17.5-12.5-28.5-15.7-35.6-10.3-73.8,7.7-88.5,41.7-17.2,39.8,3.3,85.4,43.9,99.4,37.9,13,79.7-6.9,93.5-44.5,2.6-7.2,4.1-14.5,4.4-21.8l66-30.8c1.8,8.2,2.9,16.6,3.2,25.2,1.2,34-9.6,65.5-28.5,90.5-17.8,23.6-10.5,57.4,15.7,71.1l1.3.7c10.4,5.5,23.3,3.4,31.4-5.2,46.8-49.9,70.8-121.4,55.2-198Z"}),r("path",{fill:"currentColor",transform:"translate(319.7 -16.5) rotate(65)",d:"M172.8,152.7h0c17.7,0,32,14.3,32,32v148h-64v-148c0-17.7,14.3-32,32-32Z"}))}function JQe(){let e=kt(null),[t,o]=L(!1);return r(g1,{position:"bottom",align:"center",spacing:0,animation:g1.Animation.NONE,shouldShow:t,onRequestClose:()=>o(!1),targetElementRef:e,renderPopout:()=>jme(()=>o(!1))},(n,{isShown:i})=>r(ul,{ref:e,className:"vc-toolbox-btn",onClick:()=>o(s=>!s),tooltip:i?null:"Equicord Toolbox",icon:qme,selected:i}))}var Dq,Lu,Vb=x(()=>{"use strict";d();Gme();Hm();Q();H();$();B();Mq();Dq=R({showPluginMenu:{type:3,default:!0,description:"Show the plugins menu in the toolbox"}});jn("EquicordToolbox","VencordToolbox");Lu=k({name:"EquicordToolbox",description:"Adds a button next to the inbox button in the channel header that houses Equicord quick actions",authors:[w.Ven,w.AutumnVN],dependencies:["HeaderBarAPI"],settings:Dq,headerBarButton:{icon:qme,render:JQe,priority:1337}})});function VQe(){let{showPluginMenu:e}=Dq.use(["showPluginMenu"]),t=Nq();return e?r(M.MenuItem,{id:"plugins",label:"Plugins",action:()=>$1(L0)},t):null}function Nq(e=!1){let t=tn().plugins,[o,n]=L(""),i=o.toLowerCase(),s=rt(()=>Object.values(pt).sort((l,c)=>l.name.localeCompare(c.name)),[]),a=rt(()=>s.filter(l=>!yt(l.name)||l.name.endsWith("API")?!1:l.name.toLowerCase().includes(i)),[i]);return r(f,null,r(M.MenuControlItem,{id:"plugins-search",control:(l,c)=>r(M.MenuSearchControl,{...l,query:o,onChange:n,ref:c})}),r(M.MenuSeparator,null),a.map(l=>{let c=[],u=!1;if(l.options)for(let[g,y]of Object.entries(l.options)){if("hidden"in y&&y.hidden)continue;u=!0;let b=t[l.name],v={id:`${l.name}-${g}`,key:g,label:Nm(YS(g)),disabled:"disabled"in y?y.disabled?.call(l.settings):!1};switch(y.type){case 3:c.push(r(M.MenuCheckboxItem,{...v,checked:b[g],action:()=>{b[g]=!b[g],y.restartNeeded&&Re("Restart to apply the change")}}));break;case 4:c.push(r(M.MenuItem,{...v},y.options.map(E=>r(M.MenuRadioItem,{group:`${l.name}-${g}`,id:`${l.name}-${g}-${E.value}`,key:E.label,label:E.label,checked:b[g]===E.value,action:()=>{b[g]=E.value,y.restartNeeded&&Re("Restart to apply the change")}}))));break;case 5:if(y.stickToMarkers||y.componentProps)continue;c.push(r(M.MenuControlItem,{...v,control:(E,A)=>r(M.MenuSliderControl,{ref:A,...E,minValue:y.markers[0],maxValue:y.markers.at(-1),value:b[g],onChange:C=>b[g]=C})}));break}}let p=c.length>0;return!p&&!(e&&u)?null:r(M.MenuItem,{id:`${l.name}-menu`,key:l.name,label:l.name,action:()=>Rs(l)},p&&r(f,null,r(M.MenuGroup,{label:l.name},c),r(M.MenuSeparator,null),r(M.MenuItem,{id:`${l.name}-open`,label:"Open Settings",action:()=>Rs(l)})))}))}function eZe(){return r(M.MenuItem,{id:"themes",label:"Themes",action:()=>$1(E0)},Bq())}function Bq(){let{useQuickCss:e,enabledThemes:t}=tn(["useQuickCss","enabledThemes"]),[o]=Cr(VencordNative.themes.getThemesList);return r(f,null,r(M.MenuCheckboxItem,{id:"toggle-quickcss",checked:e,label:"Enable QuickCSS",action:()=>{Ge.useQuickCss=!e}}),r(M.MenuItem,{id:"edit-quickcss",label:"Edit QuickCSS",action:()=>VencordNative.quickCss.openEditor()}),r(M.MenuItem,{id:"manage-themes",label:"Manage Themes",action:()=>$1(E0)}),!!o?.length&&r(M.MenuGroup,null,o.map(n=>r(M.MenuCheckboxItem,{id:`theme-${n.fileName}`,key:n.fileName,label:n.fileName,checked:t.includes(n.fileName),action:()=>{t.includes(n.fileName)?Ge.enabledThemes=t.filter(i=>i!==n.fileName):Ge.enabledThemes=[...t,n.fileName]}}))))}function tZe(){let e=[];for(let o of Object.values(pt))if(o.toolboxActions&&yt(o.name)){let n=typeof o.toolboxActions=="function"?o.toolboxActions():Object.entries(o.toolboxActions).map(([i,s])=>{let a=`${o.name}-${i}`;return r(M.MenuItem,{id:a,key:a,label:i,action:s})});if(!n||Array.isArray(n)&&n.length===0)continue;e.push({plugin:o,node:r(M.MenuGroup,{label:o.name,key:`${o.name}-group`},n)})}if(e.length<=5)return e.map(o=>o.node);let t=e.map(({node:o,plugin:n})=>r(M.MenuItem,{id:`${n.name}-menu`,key:`${n.name}-menu`,label:n.name,action:()=>Rs(n)},o));return r(M.MenuGroup,null,t)}function jme(e){return r(M.Menu,{navId:"vc-toolbox",onClose:e},r(M.MenuItem,{id:"notifications",label:"Open Notification Log",action:D0}),eZe(),VQe(),tZe())}var Mq=x(()=>{"use strict";d();Lw();Wo();Q();fa();qo();Da();$();B();Vb()});var Pq,Wme=x(()=>{d();(window.VencordStyles??=new Map).set("src/plugins/betterSettings/fullHeightContext.css",{name:"src/plugins/betterSettings/fullHeightContext.css",source:`/*
 * Discord has dumb max height logic for their context menus.
 * If a context menu is at the bottom of the screen, its submenus are capped to its max height and can't even grow upwards
 * We unset the variable they use to cap height. This allows submenus to grow as tall as they want
 */

#user-settings-cog,
[aria-activedescendant^="user-settings-cog"] {
    --reference-position-layer-max-height: initial !important;
}`,classNames:{},dom:null});Pq="src/plugins/betterSettings/fullHeightContext.css"});function nZe({mode:e,baseLayer:t=!1,...o}){let n=e==="HIDDEN",i=kt(null);se(()=>()=>{Bs.dispatch("LAYER_POP_START"),Bs.dispatch("LAYER_POP_COMPLETE")},[]);let s=r("div",{ref:i,"aria-hidden":n,className:oZe({[_q.layer]:!0,[_q.baseLayer]:t,"stop-animations":n}),style:{opacity:n?0:void 0},...o});return t?s:r(YE,{containerRef:i},s)}var oZe,_q,Wx,NC,Kme=x(()=>{"use strict";d();Q();ps();Mq();H();nt();At();$();fe();B();Wme();oZe=de(""),_q=et("animating","baseLayer","bg","layer","layers"),Wx=R({disableFade:{description:"Disable the crossfade animation",type:3,default:!0,restartNeeded:!0},organizeMenu:{description:"Organizes the settings cog context menu into categories",type:3,default:!0,restartNeeded:!0},eagerLoad:{description:"Removes the loading delay when opening the menu for the first time",type:3,default:!0,restartNeeded:!0}});NC=k({name:"BetterSettings",description:"Enhances your settings-menu-opening experience",authors:[w.Kyuuhachi],settings:Wx,start(){Wx.store.organizeMenu&&Or(Pq)},stop(){Fr(Pq)},patches:[{find:"this.renderArtisanalHack()",replacement:[{match:/class (\i)(?= extends \i\.PureComponent.+?static contextType=.+?jsx\)\(\1,\{mode:)/,replace:"var $1=$self.Layer;class VencordPatchedOldFadeLayer",predicate:()=>Wx.store.disableFade},{match:/createPromise:\(\)=>([^:}]*?),webpackId:"?\d+"?,name:(?!="CollectiblesShop")"[^"]+"/g,replace:"$&,_:$1",predicate:()=>Wx.store.eagerLoad}]},{find:'minimal:"contentColumnMinimal"',replacement:[{match:/(?=\(0,\i\.\i\)\((\i),\{from:\{position:"absolute")/,replace:"(_cb=>_cb(void 0,$1))||"},{match:/\i\.animated\.div/,replace:'"div"'}],predicate:()=>Wx.store.disableFade},{find:"#{intl::USER_SETTINGS_WITH_BUILD_OVERRIDE}",replacement:{match:/(?=handleOpenSettingsContextMenu=.{0,100}?null!=\i&&.{0,100}?(await [^};]*?\)\)))/,replace:"_vencordBetterSettingsEagerLoad=(async ()=>$1)();"},predicate:()=>Wx.store.eagerLoad},{find:"#{intl::USER_SETTINGS_ACTIONS_MENU_LABEL}",replacement:[{match:/=\[\];(\i)(?=\.forEach.{0,200}?"logout"===\i.{0,100}?(\i)\.get\(\i\))/,replace:"=$self.wrapMap([]);$self.transformSettingsEntries($1,$2)",predicate:()=>Wx.store.organizeMenu},{match:/case \i\.\i\.DEVELOPER_OPTIONS:return \i;/,replace:"$&case 'EquicordPlugins':return $self.buildPluginMenuEntries(true);$&case 'EquicordThemes':return $self.buildThemeMenuEntries();"}]}],buildPluginMenuEntries:Nq,buildThemeMenuEntries:Bq,Layer(e){try{[YE.$$vencordGetWrappedComponent(),Bs,_q.layer].forEach(t=>t.test)}catch{return new ke("BetterSettings").error("Failed to find some components"),e.children}return r(nZe,{...e})},transformSettingsEntries(e,t){let o=[];for(let n of e)n.section==="HEADER"?(t.set(n.label,n.label),o.push({section:n.label,items:[]})):n.section!=="DIVIDER"&&t.has(n.section)&&o.at(-1)?.items.push(n);return o},wrapMap(e){return e.map=function(t){return this.filter(o=>o.items.length>0).map(({section:o,items:n})=>{let i=n.map(t);return o?r(M.MenuItem,{key:o,id:o.replace(/\W/,"_"),label:o},i):i})},e}})});var BC,Yme=x(()=>{"use strict";d();H();$();BC=k({name:"BetterUploadButton",authors:[w.fawn,w.Ven],description:"Upload with a single click, open menu with right click",patches:[{find:".CHAT_INPUT_BUTTON_NOTIFICATION,",replacement:[{match:/onClick:(\i\?void 0:\i)(?=,onDoubleClick:(\i\?void 0:\i),)/,replace:"$&,...$self.getOverrides(arguments[0],$1,$2)"}]}],getOverrides(e,t,o){return e?.className?.includes("attachButton")?{onClick:o,onContextMenu:t}:{}}})});var Qme,Zme,Xme=x(()=>{"use strict";d();fe();Qme=Ft("ApplicationStreamPreviewStore"),Zme=Ft("ApplicationStreamingStore")});var rZe,Jme,iZe,sZe,PC,Vme=x(()=>{"use strict";d();ao();H();mt();$();B();Xme();rZe=async({guildId:e,channelId:t,ownerId:o})=>{let n=await Qme.getPreviewURL(e,t,o);n&&us({url:n,height:720,width:1280})},Jme=(e,{userId:t})=>{let o=Zme.getAnyStreamForUser(t);if(!o)return;let n=r(M.MenuItem,{label:"View Stream Preview",id:"view-stream-preview",icon:HL,action:()=>o&&rZe(o),disabled:!o});e.push(r(M.MenuSeparator,null),n)},iZe=(e,{stream:t})=>Jme(e,{userId:t.ownerId}),sZe=(e,{user:t})=>{if(t)return Jme(e,{userId:t.id})},PC=k({name:"BiggerStreamPreview",description:"This plugin allows you to enlarge stream previews",authors:[w.phil],contextMenus:{"user-context":sZe,"stream-context":iZe}})});function efe(){Rq.textContent=`
        .vc-nsfw-img [class*=imageContainer],
        .vc-nsfw-img [class*=wrapperPaused] {
            filter: blur(${tfe.store.blurAmount}px);
            transition: filter 0.2s;

            &:hover {
                filter: blur(0);
            }
        }
        `}var Rq,tfe,_C,ofe=x(()=>{"use strict";d();Q();ps();H();nt();$();tfe=R({blurAmount:{type:1,description:"Blur Amount (in pixels)",default:10,onChange:efe},blurAllChannels:{type:3,description:"Blur attachments in all channels (not just NSFW)",default:!1}}),_C=k({name:"BlurNSFW",description:"Blur attachments in NSFW channels until hovered",authors:[w.Ven],isModified:!0,settings:tfe,patches:[{find:"}renderStickersAccessories(",replacement:[{match:/(\.renderReactions\(\i\).+?className:)/,replace:'$&(this.props?.channel?.nsfw || $self.settings.store.blurAllChannels ? "vc-nsfw-img ": "")+'}]}],start(){Rq=gc("VcBlurNsfw",Hh),efe()},stop(){Rq?.remove()}})});var nfe,rfe=x(()=>{d();(window.VencordStyles??=new Map).set("src/plugins/callTimer/alignedChatInputFix.css",{name:"src/plugins/callTimer/alignedChatInputFix.css",source:`[class*="panels"] [class*="inner"],
[class*="rtcConnectionStatus"] {
    height: fit-content !important;
}
`,classNames:{},dom:null});nfe="src/plugins/callTimer/alignedChatInputFix.css"});function ife({height:e=16,width:t=16,className:o}){return r("svg",{viewBox:"0 0 455 455",height:e,width:t,className:o,style:{color:"var(--channels-default)"}},r("path",{fill:"currentColor",d:`M332.229,90.04l14.238-27.159l-26.57-13.93L305.67,76.087c-19.618-8.465-40.875-13.849-63.17-15.523V30h48.269V0H164.231v30
        H212.5v30.563c-22.295,1.674-43.553,7.059-63.171,15.523L135.103,48.95l-26.57,13.93l14.239,27.16
        C67.055,124.958,30,186.897,30,257.5C30,366.576,118.424,455,227.5,455S425,366.576,425,257.5
        C425,186.896,387.944,124.958,332.229,90.04z M355,272.5H212.5V130h30v112.5H355V272.5z`}))}var sfe=x(()=>{"use strict";d()});function afe({text:e,className:t}){return r("div",{className:`timeCounter ${t}`,style:{marginTop:-6,fontWeight:"bold",fontFamily:"monospace",fontSize:11,position:"relative"}},e)}var lfe=x(()=>{"use strict";d()});function cfe({time:e}){let t=bO({initialTime:e}),o=ZS(t,Vl.store.format==="human",Vl.store.showSeconds),n=Vl.store.showRoleColor?"":"usernameFont__71dd5 username__73ce9";return Vl.store.showWithoutHover?r(afe,{text:o,className:n}):r(Ue,{text:o},({onMouseEnter:i,onMouseLeave:s})=>r("div",{onMouseEnter:i,onMouseLeave:s,role:"tooltip"},r(ife,null)))}var ufe=x(()=>{"use strict";d();qo();Da();B();Lq();sfe();lfe()});function Oq(e,t,o){ev.set(e,{channelId:t,time:Date.now(),guildId:o})}function dfe(e){ev.delete(e)}var Vl,ev,Fq,pfe,RC,Lq=x(()=>{"use strict";d();Q();tt();H();qo();Da();$();B();rfe();ufe();Vl=R({format:{type:4,description:"Compact or human readable format:",options:[{label:"30:23:00:42",value:"stopwatch",default:!0},{label:"30d 23h 00m 42s",value:"human"}]},allCallTimers:{type:3,description:"Add call timer to all users in a server voice channel",restartNeeded:!0,default:!1},showWithoutHover:{type:3,description:"Always show the timer without needing to hover",restartNeeded:!0,default:!1},showRoleColor:{type:3,description:"Show the user's role color (if this plugin in enabled)",restartNeeded:!1,default:!1},trackSelf:{type:3,description:"Also track yourself",restartNeeded:!1,default:!1},showSeconds:{type:3,description:"Show seconds in the timer",restartNeeded:!1,default:!1},watchLargeGuilds:{type:3,description:"Track users in large guilds. This may cause lag if you're in a lot of large guilds with active voice users. Tested with up to 2000 active voice users with no issues.",restartNeeded:!0,default:!1}}),ev=new Map;pfe=!0;Bh(!1,"CallTimer","AllCallTimers","allCallTimers");eF("CallTimer","AllCallTimers","showWithoutHover","showRoleColor","trackSelf","showSeconds","watchLargeGuilds");RC=k({name:"CallTimer",description:"Add call timers for all users in voice channels and in the connection status.",authors:[w.Ven,j.MaxHerbold,w.D3SOX],managedStyle:nfe,settings:Vl,isModified:!0,startTime:0,interval:void 0,patches:[{find:"VOICE_PANEL}}",predicate:()=>Vl.store.allCallTimers,replacement:[{match:/user:(\i).*?\.EMBEDDED.{0,25};(?=return 0!==(\i)\.length)/,replace:"$&$2.push($self.renderTimer($1.id));",predicate:()=>!Vl.store.showWithoutHover},{match:/#{intl::GUEST_NAME_SUFFIX}\)\]\}\):""(?=.*?userId:(\i\.\i))/,replace:"$&,$self.renderTimer($1)",predicate:()=>Vl.store.showWithoutHover}]},{find:"renderConnectionStatus(){",replacement:{match:/(lineClamp:1,children:)(\i)(?=,|}\))/,replace:"$1[$2,$self.renderConnectionTimer(this.props.channel.id)]"}}],flux:{VOICE_STATE_UPDATES({voiceStates:e}){let t=z.getCurrentUser().id;for(let o of e){let{userId:n,channelId:i,guildId:s}=o,a=n===t;if(!s||!("oldChannelId"in o)&&!pfe&&!Vl.store.watchLargeGuilds)continue;let{oldChannelId:l}=o;a&&i!==Fq&&(l=Fq,Fq=i??void 0),i!==l&&(i?Oq(n,i,s):l&&dfe(n))}pfe=!1},PASSIVE_UPDATE_V1(e){if(Vl.store.watchLargeGuilds)return;let{voiceStates:t}=e;if(!t)return;let{guildId:o}=e;for(let[n,i]of ev)i.guildId===o&&(t.find(a=>a.userId===n)||dfe(n));for(let n of t){let{userId:i,channelId:s}=n;s&&(ev.has(i)?s!==ev.get(i)?.channelId&&Oq(i,s,o):Oq(i,s,o))}}},subscribeToAllGuilds(){let t=Object.values(ct.getGuilds()).map(o=>o.id).reduce((o,n)=>({...o,[n]:{typing:!0}}),{});V.dispatch({type:"GUILD_SUBSCRIPTIONS_FLUSH",subscriptions:t})},start(){Vl.store.watchLargeGuilds&&this.subscribeToAllGuilds()},renderTimer(e){let t=ev.get(e);if(t?.time&&!(e===z.getCurrentUser().id&&!Vl.store.trackSelf))return r(ee,null,r(cfe,{time:t.time}))},renderConnectionTimer(e){return r(ee,{noop:!0},r(this.ConnectionTimer,{channelId:e}))},ConnectionTimer({channelId:e}){let t=iw({deps:[e]});return r("p",{style:{margin:0,fontFamily:"var(--font-code)"}},ZS(t,Vl.store.format==="human"))}})});var aZe,LC,mfe=x(()=>{"use strict";d();H();$();aZe="https://raw.githubusercontent.com/ClearURLs/Rules/master/data.min.json",LC=k({name:"ClearURLs",description:"Automatically removes tracking elements from URLs you send",authors:[w.adryd,w.thororen],rules:[],async start(){await this.createRules()},stop(){this.rules=[]},onBeforeMessageSend(e,t){return this.cleanMessage(t)},onBeforeMessageEdit(e,t,o){return this.cleanMessage(o)},async createRules(){let e=await fetch(aZe).then(t=>t.json());this.rules=[];for(let[t,o]of Object.entries(e.providers)){let n=new RegExp(o.urlPattern,"i"),i=o.rules?.map(l=>new RegExp(l,"i")),s=o.rawRules?.map(l=>new RegExp(l,"i")),a=o.exceptions?.map(l=>new RegExp(l,"i"));this.rules.push({name:t,urlPattern:n,rules:i,rawRules:s,exceptions:a})}},replacer(e){try{var t=new URL(e)}catch{return e}return t.searchParams.entries().next().done?e:(this.rules.forEach(({urlPattern:o,exceptions:n,rawRules:i,rules:s})=>{if(!o.test(t.href)||n?.some(c=>c.test(t.href)))return;let a=[];s&&t.searchParams.forEach((c,u)=>{s.some(p=>p.test(u))&&a.push(u)}),a.forEach(c=>t.searchParams.delete(c));let l=t.href;i?.forEach(c=>{l=l.replace(c,"")}),t=new URL(l)}),t.toString())},cleanMessage(e){/http(s)?:\/\//.test(e.content)&&(e.content=e.content.replace(/(https?:\/\/[^\s<]+[^<.,:;"'>)|\]\s])/g,t=>this.replacer(t)))}})});var ffe=x(()=>{});function gfe(e){let t=parseInt(e.substring(0,2),16)/255,o=parseInt(e.substring(2,4),16)/255,n=parseInt(e.substring(4,6),16)/255,i=Math.max(t,o,n),s=Math.min(t,o,n),a=i-s,l,c,u;return u=(i+s)/2,a===0?(l=0,c=0):(c=a/(1-Math.abs(2*u-1)),i===t?l=(o-n)/a%6:i===o?l=(n-t)/a+2:l=(t-o)/a+4,l*=60,l<0&&(l+=360)),c*=100,u*=100,{hue:l,saturation:c,lightness:u}}function hfe(e){let t=s=>s<=.03928?s/12.92:((s+.055)/1.055)**2.4,o=t(parseInt(e.substring(0,2),16)/255),n=t(parseInt(e.substring(2,4),16)/255),i=t(parseInt(e.substring(4,6),16)/255);return o*.2126+n*.7152+i*.0722}var Uq=x(()=>{"use strict";d()});function zq(e){let{hue:t,saturation:o,lightness:n}=gfe(e);vfe($q,`:root {
        --theme-h: ${t};
        --theme-s: ${o}%;
        --theme-l: ${n}%;
    }`)}async function yfe(e){zq(e),dZe(await cZe())}function bfe(){Kx[$q]?.remove(),Kx[Hq]?.remove(),Kx[$q]=null,Kx[Hq]=null}function lZe(e){return Kx[e]||(Kx[e]=gc(e,Hh)),Kx[e]}function vfe(e,t){let o=lZe(e);o.textContent=t}async function cZe(){let e=document.querySelectorAll('link[rel="stylesheet"]');return(await Promise.all(Array.from(e,async o=>o.href?fetch(o.href).then(n=>n.text()):null))).filter(Boolean).join(`
`)}function dZe(e){let t={};for(let[,i,s]of e.matchAll(uZe))t[i]=parseFloat(s);let o=t["--neutral-2-hsl"],n=t["--neutral-69-hsl"];vfe(Hq,[`.theme-light {
 ${xfe(t,o)} 
}`,`.theme-dark {
 ${xfe(t,n)} 
}`].join(`

`))}function xfe(e,t){return Object.entries(e).map(([o,n])=>{let i=n-t,s=i>=0?"+":"-";return`${o}: var(--theme-h) var(--theme-s) calc(var(--theme-l) ${s} ${Math.abs(i).toFixed(2)}%);`}).join(`
`)}var $q,Hq,Kx,uZe,Gq=x(()=>{"use strict";d();ps();nt();Uq();$q="vc-clientTheme-vars",Hq="vc-clientTheme-overrides",Kx={};uZe=/(--neutral-\d{1,3}?-hsl):.+?([\d.]+?)%;/g});function kfe(e){let t=e.toString(16).padStart(6,"0");tv.store.color=t,zq(t)}function wfe(e){pZe({theme:e})}function Efe(){let e=Je([x1],()=>x1.theme),t=e==="light",o=t?"Dark":"Light",n=Je([Sfe],()=>Sfe.gradientPreset!=null),i=hfe(tv.store.color),s=!1,a=!0;return(t&&i<.26||!t&&i>.12)&&(s=!0),i<.26&&i>.12&&(a=!1),t&&i>.65&&(s=!0,a=!1),r("div",{className:OC("settings")},r("div",{className:OC("container")},r("div",{className:OC("settings-labels")},r(so,null,"Theme Color"),r(W,null,"Add a color to your Discord client theme")),r(si,{color:parseInt(tv.store.color,16),onChange:kfe,showEyeDropper:!1,suggestedColors:mZe})),(s||n)&&r(f,null,r(Mi,{className:Z.top8},r(Jo,null,"Your theme won't look good!"),s&&r(W,null,">"," Selected color won't contrast well with text"),n&&r(W,null,">"," Nitro themes aren't supported"),r("div",{className:OC("buttons-container")},s&&a&&r(U,{onClick:()=>wfe(o),color:U.Colors.RED},"Switch to ",o," mode"),n&&r(U,{onClick:()=>wfe(e),color:U.Colors.RED},"Disable Nitro Theme")))))}function Afe(){return r(U,{onClick:()=>kfe(3224376)},"Reset Theme Color")}var pZe,Sfe,OC,mZe,Cfe=x(()=>{"use strict";d();vc();ut();wt();Uq();Gq();nt();co();fe();B();qq();pZe=vt('type:"UNSYNCED_USER_SETTINGS_UPDATE','"system"==='),Sfe=Ft("ClientThemesBackgroundStore"),OC=de("vc-clientTheme-"),mZe=["#1E1514","#172019","#13171B","#1C1C28","#402D2D","#3A483D","#344242","#313D4B","#2D2F47","#322B42","#3C2E42","#422938","#b6908f","#bfa088","#d3c77d","#86ac86","#88aab3","#8693b5","#8a89ba","#ad94bb"]});var tv,FC,qq=x(()=>{"use strict";d();ffe();Q();H();$();Cfe();Gq();tv=R({color:{type:6,default:"313338",component:Efe},resetColor:{type:6,component:Afe}}),FC=k({name:"ClientTheme",authors:[w.Nuckyz],description:"Recreation of the old client theme experiment. Add a color to your Discord client theme",settings:tv,startAt:"DOMContentLoaded",start:()=>yfe(tv.store.color),stop:bfe})});var UC,Tfe=x(()=>{"use strict";d();H();$();UC=k({name:"ColorSighted",description:"Removes the colorblind-friendly icons from statuses, just like 2015-2017 Discord",authors:[w.lewisakura],patches:[{find:"Masks.STATUS_ONLINE",replacement:{match:/Masks\.STATUS_(?:IDLE|DND|STREAMING|OFFLINE)/g,replace:"Masks.STATUS_ONLINE"}},{find:".AVATAR_STATUS_MOBILE_16;",replacement:{match:/(fromIsMobile:\i=!0,.+?)status:(\i)/,replace:'$1status_$:$2="online"'}}]})});function gZe({settingKey:e}){let{allowLevel:t}=Qx.use(["allowLevel"]),o=t[e];return r(SO,{value:o,onChange:(n,i)=>Qx.store.allowLevel[e]=i,size:20},r(Y,{size:"sm"},e[0].toUpperCase()+e.slice(1)))}var Ld,fZe,Yx,hZe,Qx,$C,Ife=x(()=>{"use strict";d();Q();Et();tt();xp();H();$();B();Ld=()=>{},fZe={logDangerously:Ld,log:Ld,verboseDangerously:Ld,verbose:Ld,info:Ld,warn:Ld,error:Ld,trace:Ld,time:Ld,fileOnly:Ld},Yx=new Set;hZe=ee.wrap(()=>r(ci,{name:"Filter List",description:"Always allow loggers of these types"},r("div",{style:{display:"flex",flexDirection:"row"}},Object.keys(Qx.store.allowLevel).map(e=>r(gZe,{key:e,settingKey:e}))))),Qx=R({disableLoggers:{type:3,description:"Disables Discords loggers",default:!1,restartNeeded:!0},disableSpotifyLogger:{type:3,description:"Disable the Spotify logger, which leaks account information and access token",default:!0,restartNeeded:!0},whitelistedLoggers:{type:0,description:"Semicolon (;) separated list of loggers to allow even if others are hidden",default:"GatewaySocket; Routing/Utils",multiline:!0,onChange(e){Yx.clear(),e.split(";").map(t=>t.trim()).forEach(Yx.add.bind(Yx))}},allowLevel:{type:6,component:hZe,default:{error:!0,warn:!1,trace:!1,log:!1,info:!1,debug:!1}}}),$C=k({name:"ConsoleJanitor",description:"Disables annoying console messages/errors",authors:[w.Nuckyz,w.sadan],settings:Qx,startAt:"Init",start(){Yx.clear(),this.settings.store.whitelistedLoggers?.split(";").map(e=>e.trim()).forEach(Yx.add.bind(Yx))},Noop:Ld,NoopLogger:()=>fZe,shouldLog(e,t){return Yx.has(e)||Qx.store.allowLevel[t]===!0},patches:[{find:"https://github.com/highlightjs/highlight.js/issues/2277",replacement:{match:/\(console.log\(`Deprecated.+?`\),/,replace:"("}},{find:'The "interpolate" function is deprecated in v10 (use "to" instead)',replacement:{match:/,console.warn\(\i\+'The "interpolate" function is deprecated in v10 \(use "to" instead\)'\)/,replace:""}},{find:'console.warn("Window state not initialized"',replacement:{match:/console\.warn\("Window state not initialized",\i\),/,replace:""}},{find:"is not a valid locale.",replacement:[{match:/\i\.error(?=\(`\$\{\i\} is not a valid locale.`)/,replace:"$self.Noop"}]},{find:'"AppCrashedFatalReport: getLastCrash not supported."',replacement:{match:/console\.log(?=\("AppCrashedFatalReport: getLastCrash not supported\."\))/,replace:"$self.Noop"}},{find:"RPCServer:WSS",replacement:{match:/\i\.error\(`Error: \$\{(\i)\.message\}/,replace:'!$1.message.includes("EADDRINUSE")&&$&'}},{find:"Tried getting Dispatch instance before instantiated",replacement:{match:/null==\i&&\i\.warn\("Tried getting Dispatch instance before instantiated"\),/,replace:""}},{find:"Unable to determine render window for element",replacement:{match:/console\.warn\("Unable to determine render window for element",\i\),/,replace:""}},{find:"failed to send analytics events",replacement:[{match:/console\.error\(`\[analytics\] failed to send analytics events query: \$\{\i\}`\)/,replace:""}]},{find:"Slow dispatch on",replacement:[{match:/\i\.totalTime>\i&&\i\.verbose\([`"]Slow dispatch on.{0,55}\);/,replace:""}]},{find:'"file-only"!==',predicate:()=>Qx.store.disableLoggers,replacement:{match:/(?<=&&)(?=console)/,replace:"$self.shouldLog(arguments[0],arguments[1])&&"}},{find:'("Spotify")',predicate:()=>Qx.store.disableSpotifyLogger,replacement:{match:/new \i\.\i\("Spotify"\)/,replace:"$self.NoopLogger()"}}]})});function xZe(){let e=Symbol(),t=null;return Object.defineProperty(Object.prototype,e,{get(){return t=this,""},configurable:!0}),Bo.u(e),delete Object.prototype[e],t}async function Dfe(){let e=new ke("LazyChunkLoader");try{let g=function(E){let A=!1;m(String(E)).then(()=>A=!0).catch(()=>A=!0),l.push(()=>A)};var t=g;e.log("Loading all chunks...");let o=new Set,n=new Set,i=new Set,{promise:s,resolve:a}=Promise.withResolvers(),l=[],c=Ti(/(?:(?:Promise\.all\(\[)?((?:\i\.e\("?[^)]+?"?\),?)+?)(?:\]\))?)\.then\(\i(?:\.\i)?\.bind\(\i,"?([^)]+?)"?(?:,[^)]+?)?\)\)/g),u=Ti(/(?:(?:Promise\.all\(\[)?((?:\i\.e\("?[^)]+?"?\),?)+?)(?:\]\))?)\.then\(\i\.bind\(\i,"?([^)]+?)"?\)\)/g),p=!1;async function m(E){let A=p?!1:p=E.includes(".cssDebuggingEnabled&&"),C=E.matchAll(A?c:u),I=new Set,N=!1;await Promise.all(Array.from(C).map(async([,_,O])=>{let F=_?Array.from(_.matchAll(ow)).map(G=>{let te=Number(G[1]);return Number.isNaN(te)?G[1]:te}):[];if(F.length===0)return;let J=!1;for(let G of F){if(A){if(F.length>1)throw new Error("Found multiple chunks in factory that loads the CSS debugging chunk");n.add(G),J=!0;break}if(Bo.u(G)==null||Bo.u(G)==="undefined.js")continue;if(await fetch(Bo.p+Bo.u(G)).then(K=>K.text()).then(K=>/importScripts\(|self\.postMessage/.test(K))){n.add(G),J=!0;continue}o.add(G)}if(!J){let G=Number(O);I.add([F,Number.isNaN(G)?O:G])}})),await Promise.all(Array.from(I).map(([_])=>Promise.all(_.map(O=>Bo.e(O)))));for(let[,_]of I)try{if(N){i.add(_);continue}Bo.m[_]&&Bo(_)}catch(O){console.error(O)}setTimeout(()=>{let _=!0;for(let O=0;O<l.length;O++)l[O]()?l.splice(O--,1):_=!1;_&&a()},0)}Ah.add(g);for(let E in Bo.m)g(Bo.m[E]);await s,Ah.delete(g);for(let E of i)Bo(E);let y=xZe();if(!y)throw new Error("Failed to get chunk map");let b=Object.keys(y).map(E=>Number.isNaN(Number(E))?E:Number(E));if(b.length===0)throw new Error("Failed to get all chunks");let v=b.filter(E=>!(o.has(E)||n.has(E)));await Promise.all(v.map(async E=>{await fetch(Bo.p+Bo.u(E)).then(C=>C.text()).then(C=>/importScripts\(|self\.postMessage/.test(C))||await Bo.e(E)})),e.log("Finished loading all chunks!")}catch(o){e.log("A fatal error occurred:",o)}}var Mfe=x(()=>{"use strict";d();At();ad();fe();fe()});function jq(){function e(s,a=!1){let l=new Map;return function(...c){let u=String(c);if(l.has(u))return l.get(u);let p=m0(s(...c),{topLevelOnly:a}),m=(()=>{switch(p.length){case 0:return null;case 1:return p[0];default:let g=[...new Set(p)];return g.length>1&&console.warn(`Warning: This filter matches ${g.length} exports. Make it more specific!
`,g),p[0]}})();return m&&u&&l.set(u,m),m}}function t(s){let a=new Map;return function(l){let c=String(l);if(a.has(c))return a.get(c);let u;try{u=s(l)}catch{}return u&&a.set(c,u),u}}let o,n=e(s=>s),i=e(ot.byProps);return{...Object.fromEntries(Object.keys(d0).map(s=>[s,{getter:()=>d0[s]}])),wp:WE,wpc:{getter:()=>mu},wreq:{getter:()=>Bo},wpPatcher:{getter:()=>Vencord.WebpackPatcher},wpInstances:{getter:()=>Vencord.WebpackPatcher.allWebpackInstances},wpsearch:f1,wpex:nw,wpexs:s=>nw(sp(s)),loadLazyChunks:Dfe,find:n,findAll:m0,findByProps:i,findAllByProps:(...s)=>m0(ot.byProps(...s)),findByCode:e(ot.byCode),findCssClasses:e(ot.byClassNames,!0),findAllByCode:s=>m0(ot.byCode(s)),findComponentByCode:e(ot.componentByCode),findAllComponentsByCode:(...s)=>m0(ot.componentByCode(...s)),findExportedComponent:(...s)=>i(...s)[s[0]],findStore:t(cd),PluginsApi:{getter:()=>Vencord.Plugins},plugins:{getter:()=>Vencord.Plugins.plugins},Settings:{getter:()=>Vencord.Settings},Api:{getter:()=>Vencord.Api},Util:{getter:()=>Vencord.Util},reload:()=>location.reload(),restart:yZe("restart"),canonicalizeMatch:Ti,canonicalizeReplace:jS,canonicalizeReplacement:WS,runtimeHashMessageKey:kh,fakeRender:(s,a)=>{let l=o?.deref(),c=l?.closed===!1?l:window.open("about:blank","Fake Render","popup,width=500,height=500");o=new WeakRef(c),c.focus();let u=c.document;u.body.style.margin="1em",c.prepared||(c.prepared=!0,[...document.querySelectorAll("style"),...document.querySelectorAll("link[rel=stylesheet]")].forEach(m=>{let g=m.cloneNode(!0);m.parentElement?.tagName==="HEAD"?u.head.append(g):g.id?.startsWith("vencord-")||g.id?.startsWith("vcd-")?u.documentElement.append(g):u.body.append(g)}));let p=Ms(u.body.appendChild(document.createElement("div")));p.render(X.createElement(s,a)),u.addEventListener("close",()=>p.unmount(),{once:!0})},preEnable:s=>(Vencord.Settings.plugins[s]??={enabled:!0}).enabled=!0,channel:{getter:()=>Cn(),preload:!1},channelId:{getter:()=>st.getChannelId(),preload:!1},guild:{getter:()=>bc(),preload:!1},guildId:{getter:()=>hn.getGuildId(),preload:!1},me:{getter:()=>z.getCurrentUser(),preload:!1},meId:{getter:()=>z.getCurrentUser().id,preload:!1},messages:{getter:()=>Rt.getMessages(st.getChannelId()),preload:!1},openModal:{getter:()=>Nh.openModal},openModalLazy:{getter:()=>Nh.openModalLazy},Stores:{getter:()=>Object.fromEntries(pu)},setExperiment:(s,a)=>{V.dispatch({type:"EXPERIMENT_OVERRIDE_BUCKET",experimentId:s,experimentBucket:a})},switchBranch:bZe}}function Nfe(e,t,o){let n=t.getter();if(!n||t.preload===!1)return n;function i(a){if(a[id])o?n[id]():n[Dm];else if(a.$$vencordGetWrappedComponent)return o?a.$$vencordGetWrappedComponent():a;return a}let s=i(n);if(typeof s=="object"&&s!==null){let a=Object.getOwnPropertyDescriptors(s);for(let l in a){if(s[l]==null)continue;let c=a[l];if(c.writable===!0||c.set!=null){let u=s[l],p=i(u);p!=null&&u!==p&&(s[l]=p)}}}return s!=null&&(HC(window.shortcutList,e,{value:s}),HC(window,e,{value:s})),s}var yZe,bZe,HC,vZe,zC,Bfe=x(()=>{"use strict";d();H();mt();qS();Is();xt();at();yd();ad();$();fe();fe();B();Mfe();yZe=e=>()=>{throw new Error(`'${e}' is Discord Desktop only.`)},bZe=e=>()=>{throw new Error("This function only works on vesktop and equibop.")},HC=(e,t,o)=>(Object.hasOwn(o,"value")&&(o.writable=!0),Object.defineProperty(e,t,{configurable:!0,enumerable:!0,...o}));vZe=p0.then(()=>tl(1e3)),zC=k({name:"ConsoleShortcuts",description:"Adds shorter Aliases for many things on the window. Run `shortcutList` for a list.",authors:[w.Ven],startAt:"Init",patches:[{find:"&&this.initializeIfNeeded()",replacement:[{match:/\i&&this\.initializeIfNeeded\(\)/,replace:"$&,Reflect.defineProperty(this,Symbol.toStringTag,{value:this.getName(),configurable:!0,writable:!0,enumerable:!1})"}]}],start(){let e=jq();window.shortcutList={};for(let[t,o]of Object.entries(e))"getter"in o?(HC(window.shortcutList,t,{get:()=>Nfe(t,o,!0)}),HC(window,t,{get:()=>window.shortcutList[t]})):(window.shortcutList[t]=o,window[t]=o);this.eagerLoad(!1)},async eagerLoad(e){await vZe;let t=jq();for(let[o,n]of Object.entries(t))if(!(!Object.hasOwn(n,"getter")||n.preload===!1))try{Nfe(o,n,e)}catch{}},stop(){delete window.shortcutList;for(let e in jq())delete window[e]}})});function wZe(e,t){let{id:o,name:n}=e.dataset;if(!o)return t?SZe(n):`:${n}:`;let i=new URL(e.firstChild.src),s=i.searchParams.get("animated")==="true",a=i.pathname.endsWith(".gif");return`<${s||a?"a":""}:${n.replace(/~\d+$/,"")}:${o}>`}var SZe,Pfe,GC,_fe=x(()=>{"use strict";d();Q();H();mt();$();fe();B();({convertNameToSurrogate:SZe}=He("convertNameToSurrogate"));Pfe=R({copyUnicode:{type:3,description:"Copy the raw unicode character instead of :name: for default emojis (\u{1F47D})",default:!0}}),GC=k({name:"CopyEmojiMarkdown",description:"Allows you to copy emojis as formatted string (<:blobcatcozy:1026533070955872337>)",authors:[w.HappyEnderman,w.Vishnya],settings:Pfe,contextMenus:{"expression-picker"(e,{target:t}){t.dataset.type==="emoji"&&e.push(r(M.MenuItem,{id:"vc-copy-emoji-markdown",label:"Copy Emoji Markdown",action:()=>{$t(wZe(t,Pfe.store.copyUnicode),"Success! Copied emoji markdown.")}}))}}})});var Rfe=x(()=>{});var kZe,qC,Lfe=x(()=>{"use strict";d();Rfe();tt();ao();H();mt();$();B();kZe=()=>r("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},r("path",{fill:"currentColor",d:"M21.7 5.3a1 1 0 0 1 0 1.4l-12 12a1 1 0 0 1-1.4 0l-6-6a1 1 0 1 1 1.4-1.4L9 16.58l11.3-11.3a1 1 0 0 1 1.4 0Z"})),qC=k({name:"CopyFileContents",description:"Adds a button to text file attachments to copy their contents",authors:[w.Obsidian,w.Nuckyz],patches:[{find:"#{intl::PREVIEW_BYTES_LEFT}",replacement:{match:/fileName:\i,fileSize:\i}\),(?=.{0,75}?setLanguage:)(?<=fileContents:(\i),bytesLeft:(\i).+?)/g,replace:"$&$self.addCopyButton({fileContents:$1,bytesLeft:$2}),"}}],addCopyButton:ee.wrap(({fileContents:e,bytesLeft:t})=>{let[o,n]=L(!1);return r(Ue,{text:o?"Copied!":t>0?"File too large to copy":"Copy File Contents"},i=>r("div",{...i,className:"vc-cfc-button",role:"button",onClick:()=>{!o&&t<=0&&($t(e),n(!0),setTimeout(()=>n(!1),2e3))}},o?r(kZe,null):t>0?r(US,{color:"var(--channel-icon)"}):r(ol,null)))},{noop:!0})})});function MZe(e){return e.features.has("MORE_STICKERS")&&e.premiumTier===3?120:Ofe[e.premiumTier]??Ofe[0]}function Ffe(e,t){return e.t==="Emoji"?`${location.protocol}//${window.GLOBAL_ENV.CDN_HOST}/emojis/${e.id}.webp?size=${t}&lossless=true&animated=true`:`${window.GLOBAL_ENV.MEDIA_PROXY_ENDPOINT}/stickers/${e.id}.${TZe[e.format_type]}?size=${t}&lossless=true&animated=true`}async function Ufe(e){let t=Xs.getStickerById(e);if(t)return t;let{body:o}=await Ht.get({url:jo.Endpoints.STICKER(e)});return V.dispatch({type:"STICKER_FETCH_SUCCESS",sticker:o}),o}async function NZe(e,t){let o=new FormData;o.append("name",t.name),o.append("tags",t.tags),o.append("description",t.description),o.append("file",await $fe(t));let{body:n}=await Ht.post({url:jo.Endpoints.GUILD_STICKER_PACKS(e),body:o});V.dispatch({type:"GUILD_STICKERS_CREATE_SUCCESS",guildId:e,sticker:{...n,user:z.getCurrentUser()}})}async function BZe(e,t){let o=await $fe(t),n=await new Promise(i=>{let s=new FileReader;s.onload=()=>i(s.result),s.readAsDataURL(o)});return AZe({guildId:e,name:t.name.split("~")[0],image:n})}function PZe(e){let t=z.getCurrentUser().id;return Object.values(ct.getGuilds()).filter(o=>{if(!(o.ownerId===t||(Kt.getGuildPermissions({id:o.id})&Nt.CREATE_GUILD_EXPRESSIONS)===Nt.CREATE_GUILD_EXPRESSIONS))return!1;if(e.t==="Sticker"){let c=MZe(o),u=Xs.getStickersByGuildId(o.id);return!u||u.length<c}let{isAnimated:i}=e,s=CZe(o),a=Hi.getGuildEmoji(o.id),l=0;for(let c of a)c.animated===i&&!c.managed&&l++;return l<s}).sort((o,n)=>o.name.localeCompare(n.name))}async function $fe(e){let t=e.t==="Sticker"?DZe:IZe;for(let o=4096;o>=16;o/=2){let n=Ffe(e,o),i=await fetch(n);if(!i.ok)throw new Error(`Failed to fetch ${n} - ${i.status}`);let s=await i.blob();if(s.size<=t)return s}throw new Error(`Failed to fetch ${e.t} within size limit of ${t/1e3}kB`)}async function _Ze(e,t){try{t.t==="Sticker"?await NZe(e,t):await BZe(e,t),D.show({message:`Successfully cloned ${t.name} to ${ct.getGuild(e)?.name??"your server"}!`,type:D.Type.SUCCESS,id:D.genId()})}catch(o){let n="Something went wrong (check console!)";try{n=JSON.parse(o.text).message}catch{}new ke("ExpressionCloner").error("Failed to clone",t.name,"to",e,o),D.show({message:"Failed to clone: "+n,type:D.Type.FAILURE,id:D.genId()})}}function OZe({data:e}){let[t,o]=X.useState(!1),[n,i]=X.useState(e.name),[s,a]=X.useReducer(c=>c+1,0),l=X.useMemo(()=>PZe(e),[e.id,s]);return r(f,null,r(re,{className:Z.top20},"Custom Name"),r(bp,{value:n,onChange:c=>{e.name=c,i(c)},validate:c=>e.t==="Emoji"&&c.length>2&&c.length<32&&LZe.test(c)||e.t==="Sticker"&&c.length>2&&c.length<30||"Name must be between 2 and 32 characters and only contain alphanumeric characters"}),r("div",{style:{display:"flex",flexWrap:"wrap",gap:"1em",padding:"1em 0.5em",justifyContent:"center",alignItems:"center"}},l.map(c=>r(Ue,{key:c.id,text:c.name},({onMouseLeave:u,onMouseEnter:p})=>r("div",{onMouseLeave:u,onMouseEnter:p,role:"button","aria-label":"Clone to "+c.name,"aria-disabled":t,style:{borderRadius:"50%",backgroundColor:"var(--background-base-lower)",display:"inline-flex",justifyContent:"center",alignItems:"center",width:"4em",height:"4em",cursor:t?"not-allowed":"pointer",filter:t?"brightness(50%)":"none"},onClick:t?void 0:async()=>{o(!0),_Ze(c.id,e).finally(()=>{a(),o(!1)})}},c.icon?r("img",{"aria-hidden":!0,style:{borderRadius:"50%",width:"100%",height:"100%"},src:To.getGuildIconURL({id:c.id,icon:c.icon,canAnimate:!0,size:512}),alt:c.name}):r(W,{style:{fontSize:RZe(Ba(c)),width:"100%",overflow:"hidden",whiteSpace:"nowrap",textAlign:"center",cursor:t?"not-allowed":"pointer"}},Ba(c)))))))}function jC(e,t){return r(M.MenuItem,{id:"emote-cloner",key:"emote-cloner",label:`Clone ${e}`,action:()=>Om(async()=>{let o=await t(),n={t:e,...o},i=Ffe(n,128);return s=>r(Pe,{...s},r(je,null,r("img",{role:"presentation","aria-hidden":!0,src:i,alt:"",height:24,width:24,style:{marginRight:"0.5em"}}),r(W,null,"Clone ",n.name)),r($e,null,r(OZe,{data:n})))})})}function Hfe(e){let t=new URL(e);return t.pathname.endsWith(".gif")||t.searchParams.get("animated")==="true"}var AZe,CZe,TZe,Ofe,IZe,DZe,RZe,LZe,FZe,UZe,ov,Wq=x(()=>{"use strict";d();Un();Q();X1();ut();wt();H();mt();At();co();at();$();hr();fe();B();AZe=vt(".GUILD_EMOJIS(","EMOJI_UPLOAD_START"),CZe=vt(".additionalEmojiSlots"),TZe={1:"png",2:"png",3:"json",4:"gif"},Ofe={0:5,1:15,2:30,3:60},IZe=256*1024,DZe=512*1024;RZe=e=>[20,20,18,18,16,14,12][e.length]??4,LZe=/^\w+$/i;FZe=(e,t)=>{let{favoriteableId:o,itemHref:n,itemSrc:i,favoriteableType:s}=t??{};if(!o)return;let a=(()=>{switch(s){case"emoji":let l=t.message.content.match(RegExp(`<a?:(\\w+)(?:~\\d+)?:${o}>|https://cdn\\.discordapp\\.com/emojis/${o}\\.`)),c=t.message.reactions.find(m=>m.emoji.id===o);if(!l&&!c)return;let u=(l&&l[1])??c?.emoji.name??"FakeNitroEmoji";return jC("Emoji",()=>({id:o,name:u,isAnimated:Hfe(n??i)}));case"sticker":return t.message.stickerItems.find(m=>m.id===o)?.format_type===3?void 0:jC("Sticker",()=>Ufe(o))}})();a&&Qt("copy-link",e)?.push(a)},UZe=(e,t)=>{let{id:o,name:n,type:i}=t?.target?.dataset??{};if(o)if(i==="emoji"&&n){let s=t.target.firstChild;e.push(jC("Emoji",()=>({id:o,name:n,isAnimated:s&&Hfe(s.src)})))}else i==="sticker"&&!t.target.className?.includes("lottieCanvas")&&e.push(jC("Sticker",()=>Ufe(o)))};jn("ExpressionCloner","EmoteCloner");ov=k({name:"ExpressionCloner",description:"Allows you to clone Emotes & Stickers to your own server (right click them)",tags:["StickerCloner","EmoteCloner","EmojiCloner"],authors:[w.Ven,w.Nuckyz],contextMenus:{message:FZe,"expression-picker":UZe}})});function zfe(e){return e.format_type===4?`https:${window.GLOBAL_ENV.MEDIA_PROXY_ENDPOINT}/stickers/${e.id}.gif?size=512&lossless=true`:`https://${window.GLOBAL_ENV.CDN_HOST}/stickers/${e.id}.${$Ze[e.format_type]}?size=512&lossless=true`}function Gfe(e,t){return r(f,null,r(M.MenuGroup,null,r(M.MenuItem,{id:"vc-copy-sticker-link",key:"vc-copy-sticker-link",label:"Copy Link",action:()=>$t(zfe(e),"Link copied!")}),r(M.MenuItem,{id:"vc-open-sticker-link",key:"vc-open-sticker-link",label:"Open Link",action:()=>VencordNative.native.openExternal(zfe(e))})),t&&r(M.MenuSeparator,null))}var $Ze,HZe,zZe,WC,qfe=x(()=>{"use strict";d();Un();Wo();Wq();H();mt();$();B();$Ze=[,"png","png","json","gif"];HZe=(e,{favoriteableId:t,favoriteableType:o,message:n})=>{if(!t||o!=="sticker")return;let i=n.stickerItems.find(a=>a.id===t);if(!i?.format_type)return;let s=e.findIndex(a=>Array.isArray(a)&&Qt("vc-copy-sticker-url",a)!=null);e.splice(s,0,Gfe(i,s!==-1))},zZe=(e,t)=>{let o=t?.target?.dataset?.id;if(!o||t.target.className?.includes("lottieCanvas"))return;let n=Xs.getStickerById(o);n&&e.push(Gfe(n,yt(ov.name)))},WC=k({name:"CopyStickerLinks",description:"Adds the ability to copy & open Sticker links",authors:[w.Ven,w.Byeoon],contextMenus:{message:HZe,"expression-picker":zZe}})});var GZe,KC,jfe=x(()=>{"use strict";d();ao();cs();H();$();B();GZe=(e,{user:t})=>{t&&e.push(r(M.MenuItem,{id:"vc-copy-user-url",label:"Copy User URL",action:()=>Oo(`<https://discord.com/users/${t.id}>`),icon:hc}))},KC=k({name:"CopyUserURLs",authors:[w.castdrian],description:"Adds a 'Copy User URL' option to the user context menu.",contextMenus:{"user-context":GZe}})});var Od,qZe,jZe,Kq,Wfe,Yq,Qq,YC,Kfe=x(()=>{"use strict";d();_a();Q();H();At();at();$();wu();fe();B();Od=new ke("CrashHandler"),{ModalStack:qZe,DraftManager:jZe}=fr(()=>{let[e,t]=jE(ot.byProps("pushLazy","popAll"),ot.byProps("clearDraft","saveDraft"));return{ModalStack:e,DraftManager:t}}),Kq=R({attemptToPreventCrashes:{type:3,description:"Whether to attempt to prevent Discord crashes.",default:!0},attemptToNavigateToHome:{type:3,description:"Whether to attempt to navigate to the home when preventing Discord crashes.",default:!1}}),Wfe=!1,Yq=!1,Qq=!0,YC=k({name:"CrashHandler",description:"Utility plugin for handling and possibly recovering from crashes without a restart",authors:[w.Nuckyz],enabledByDefault:!0,settings:Kq,patches:[{find:"#{intl::ERRORS_UNEXPECTED_CRASH}",replacement:{match:/this\.setState\((.+?)\)/,replace:"$self.handleCrash(this,$1);"}}],handleCrash(e,t){e.setState(t),!Yq&&(Yq=!0,setTimeout(()=>{try{if(!Qq){try{qt({color:"#eed202",title:"Discord has crashed!",body:"Awn :( Discord has crashed two times rapidly, not attempting to recover.",noPersist:!0})}catch{}return}Qq=!1,setTimeout(()=>Qq=!0,1e3)}catch{}try{Wfe||(Wfe=!0,_w("Uh oh, Discord has just crashed... but good news, there is a Equicord update available that might fix this issue! Would you like to update now?",!0))}catch{}try{Kq.store.attemptToPreventCrashes&&this.handlePreventCrash(e)}catch(o){Od.error("Failed to handle crash",o)}},1))},handlePreventCrash(e){try{qt({color:"#eed202",title:"Discord has crashed!",body:"Attempting to recover...",noPersist:!0})}catch{}try{let t=st.getChannelId();for(let o in sn)Number.isNaN(Number(o))&&jZe.clearDraft(t,sn[o])}catch(t){Od.debug("Failed to clear drafts.",t)}try{hw.closeExpressionPicker()}catch(t){Od.debug("Failed to close expression picker.",t)}try{V.dispatch({type:"CONTEXT_MENU_CLOSE"})}catch(t){Od.debug("Failed to close open context menu.",t)}try{qZe.popAll()}catch(t){Od.debug("Failed to close old modals.",t)}try{li()}catch(t){Od.debug("Failed to close all open modals.",t)}try{V.dispatch({type:"USER_PROFILE_MODAL_CLOSE"})}catch(t){Od.debug("Failed to close user popout.",t)}try{V.dispatch({type:"LAYER_POP_ALL"})}catch(t){Od.debug("Failed to pop all layers.",t)}try{V.dispatch({type:"DEV_TOOLS_SETTINGS_UPDATE",settings:{displayTools:!1,lastOpenTabId:"analytics"}})}catch(t){Od.debug("Failed to close DevTools.",t)}if(Kq.store.attemptToNavigateToHome)try{ho.transitionToGuild("@me")}catch(t){Od.debug("Failed to navigate to home",t)}setImmediate(()=>Yq=!1);try{e.setState({error:null,info:null})}catch(t){Od.debug("Failed to update crash handler component.",t)}}})});var QC,Yfe=x(()=>{"use strict";d();Q();H();$();QC=k({name:"CtrlEnterSend",authors:[w.UlyssesZhan],description:"Use Ctrl+Enter to send messages (customizable)",settings:R({submitRule:{description:"The way to send a message",type:4,options:[{label:"Ctrl+Enter (Enter or Shift+Enter for new line) (cmd+enter on macOS)",value:"ctrl+enter"},{label:"Shift+Enter (Enter for new line)",value:"shift+enter"},{label:"Enter (Shift+Enter for new line; Discord default)",value:"enter"}],default:"ctrl+enter"},sendMessageInTheMiddleOfACodeBlock:{description:"Whether to send a message in the middle of a code block",type:3,default:!0}}),patches:[{find:".selectPreviousCommandOption(",replacement:{match:/(?<=(\i)\.which!==\i\.\i.ENTER\|\|).{0,100}(\(0,\i\.\i\)\(\i\)).{0,100}(?=\|\|\(\i\.preventDefault)/,replace:"!$self.shouldSubmit($1,$2)"}},{find:"!this.hasOpenCodeBlock()",replacement:{match:/!(\i).shiftKey&&!(this.hasOpenCodeBlock\(\))&&\(.{0,100}?\)/,replace:"$self.shouldSubmit($1, $2)"}}],shouldSubmit(e,t){let o=!1;switch(this.settings.store.submitRule){case"shift+enter":o=e.shiftKey;break;case"ctrl+enter":o=ri?e.metaKey:e.ctrlKey;break;case"enter":o=!e.shiftKey&&!e.ctrlKey;break}return this.settings.store.sendMessageInTheMiddleOfACodeBlock||(o&&=!t),o}})});var Qfe=x(()=>{});function WZe(e){return/^\d{16,21}$/.test(e)?!0:"Must be a valid Discord ID."}function YZe(){return Fd.store.type!==1}function QZe(e){return!YZe()&&!/https?:\/\/(www\.)?(twitch\.tv|youtube\.com)\/\w+/.test(e)?"Streaming link must be a valid URL.":e&&e.length>512?"Streaming link must be not longer than 512 characters.":!0}function XC(e){return e?parseInt(e,10):0}function JC(e){return isNaN(e)?"Must be a number.":e<0?"Must be a positive number.":!0}function nv(e){return e&&!/^https?:\/\/.+/.test(e)?"Must be a valid URL.":!0}function Zfe(e){return/https?:\/\/(cdn|media)\.discordapp\.(com|net)\//.test(e)?"Don't use a Discord link. Use an Imgur image link instead.":/https?:\/\/(?!i\.)?imgur\.com\//.test(e)?"Imgur link must be a direct link to the image (e.g. https://i.imgur.com/...). Right click the image and click 'Copy image address'":/https?:\/\/(?!media\.)?tenor\.com\//.test(e)?"Tenor link must be a direct link to the image (e.g. https://media.tenor.com/...). Right click the GIF and click 'Copy image address'":!0}function ff(e){let[t,o]=e.data;return r("div",{className:b5("pair")},r(y5,{...t}),r(y5,{...o}))}function y5({settingsKey:e,label:t,disabled:o,isValid:n,transform:i}){let[s,a]=L(Fd.store[e]??""),[l,c]=L(null);function u(p){i&&(p=i(p));let m=n?.(p)??!0;a(p),c(Eu(m)),m===!0&&(Fd.store[e]=p,KZe())}return r("div",{className:b5("single",{disabled:o})},r(re,{tag:"h5"},t),r(qe,{type:"text",placeholder:"Enter a value",value:s,onChange:u,disabled:o}),l&&r(Zs,{className:b5("error"),variant:"text-sm/normal"},l))}function Xfe({settingsKey:e,label:t,options:o,disabled:n}){return r("div",{className:b5("single",{disabled:n})},r(re,{tag:"h5"},t),r(to,{placeholder:"Select an option",options:o,maxVisibleItems:5,closeOnSelect:!0,select:i=>Fd.store[e]=i,isSelected:i=>i===Fd.store[e],serialize:i=>String(i),isDisabled:n}))}function Jfe(){let e=Fd.use();return r("div",{className:b5("root")},r(Xfe,{settingsKey:"type",label:"Activity Type",options:[{label:"Playing",value:0,default:!0},{label:"Streaming",value:1},{label:"Listening",value:2},{label:"Watching",value:3},{label:"Competing",value:5}]}),r(ff,{data:[{settingsKey:"appID",label:"Application ID",isValid:WZe},{settingsKey:"appName",label:"Application Name",isValid:VC(128,!0)}]}),r(ff,{data:[{settingsKey:"details",label:"Detail (line 1)",isValid:ZC},{settingsKey:"detailsURL",label:"Detail URL",isValid:nv}]}),r(ff,{data:[{settingsKey:"state",label:"State (line 2)",isValid:ZC},{settingsKey:"stateURL",label:"State URL",isValid:nv}]}),r(y5,{settingsKey:"streamLink",label:"Stream Link (Twitch or YouTube, only if activity type is Streaming)",disabled:e.type!==1,isValid:QZe}),r(ff,{data:[{settingsKey:"partySize",label:"Party Size",transform:XC,isValid:JC,disabled:e.type!==0},{settingsKey:"partyMaxSize",label:"Maximum Party Size",transform:XC,isValid:JC,disabled:e.type!==0}]}),r(Bt,null),r(ff,{data:[{settingsKey:"imageBig",label:"Large Image URL/Key",isValid:Zfe},{settingsKey:"imageBigTooltip",label:"Large Image Text",isValid:ZC}]}),r(y5,{settingsKey:"imageBigURL",label:"Large Image clickable URL",isValid:nv}),r(ff,{data:[{settingsKey:"imageSmall",label:"Small Image URL/Key",isValid:Zfe},{settingsKey:"imageSmallTooltip",label:"Small Image Text",isValid:ZC}]}),r(y5,{settingsKey:"imageSmallURL",label:"Small Image clickable URL",isValid:nv}),r(Bt,null),r(ff,{data:[{settingsKey:"buttonOneText",label:"Button1 Text",isValid:VC(31)},{settingsKey:"buttonOneURL",label:"Button1 URL",isValid:nv}]}),r(ff,{data:[{settingsKey:"buttonTwoText",label:"Button2 Text",isValid:VC(31)},{settingsKey:"buttonTwoURL",label:"Button2 URL",isValid:nv}]}),r(Bt,null),r(Xfe,{settingsKey:"timestampMode",label:"Timestamp Mode",options:[{label:"None",value:0,default:!0},{label:"Since discord open",value:1},{label:"Same as your current time (not reset after 24h)",value:2},{label:"Custom",value:3}]}),r(ff,{data:[{settingsKey:"startTime",label:"Start Timestamp (in milliseconds)",transform:XC,isValid:JC,disabled:e.timestampMode!==3},{settingsKey:"endTime",label:"End Timestamp (in milliseconds)",transform:XC,isValid:JC,disabled:e.timestampMode!==3}]}))}var b5,VC,ZC,KZe,Vfe=x(()=>{"use strict";d();Qfe();Wo();Ar();ut();xp();la();nt();hr();B();e3();b5=de("vc-customRPC-settings-"),VC=(e,t=!1)=>o=>t&&!o?"This field is required.":o.length>e?`Must be not longer than ${e} characters.`:!0,ZC=VC(128);KZe=rn(()=>{v5(!0),yt(rg.name)&&v5()})});async function t0e(e){return(await zi.fetchAssetIds(Fd.store.appID,[e]))[0]}async function o0e(){let{appID:e,appName:t,details:o,detailsURL:n,state:i,stateURL:s,type:a,streamLink:l,startTime:c,endTime:u,imageBig:p,imageBigURL:m,imageBigTooltip:g,imageSmall:y,imageSmallURL:b,imageSmallTooltip:v,buttonOneText:E,buttonOneURL:A,buttonTwoText:C,buttonTwoURL:I,partyMaxSize:N,partySize:_,timestampMode:O}=Fd.store;if(!t)return;let F={application_id:e||"0",name:t,state:i,details:o,type:a??0,flags:1};switch(a===1&&(F.url=l),O){case 1:F.timestamps={start:Date.now()};break;case 2:F.timestamps={start:Date.now()-(new Date().getHours()*3600+new Date().getMinutes()*60+new Date().getSeconds())*1e3};break;case 3:(c||u)&&(F.timestamps={},c&&(F.timestamps.start=c),u&&(F.timestamps.end=u));break;case 0:default:break}n&&(F.details_url=n),s&&(F.state_url=s),E&&(F.buttons=[E,C].filter(R0),F.metadata={button_urls:[A,I].filter(R0)}),p&&(F.assets={large_image:await t0e(p),large_text:g||void 0,large_url:m||void 0}),y&&(F.assets={...F.assets,small_image:await t0e(y),small_text:v||void 0,small_url:b||void 0}),N&&_&&(F.party={size:[_,N]});for(let J in F){if(J==="type")continue;let G=F[J];(!G||G.length===0)&&delete F[J]}return F}async function v5(e){let t=await o0e();V.dispatch({type:"LOCAL_ACTIVITY_UPDATE",activity:e?null:t,socketId:"CustomRPC"})}var ZZe,XZe,e0e,Fd,rg,e3=x(()=>{"use strict";d();Q();Ra();Ar();vc();eo();ut();ts();wt();H();Km();co();xt();qo();$();hr();fe();B();Vfe();ZZe=vt("profileThemeStyle:","--profile-gradient-primary-color"),XZe=De(".party?(0","USER_PROFILE_ACTIVITY"),e0e=nr("status","showCurrentGame");Fd=R({config:{type:6,component:Jfe}}).withPrivateSettings();rg=k({name:"CustomRPC",description:"Add a fully customisable Rich Presence (Game status) to your Discord profile",authors:[w.captain,w.AutumnVN,w.nin0dev],dependencies:["UserSettingsAPI"],requiresRestart:!1,settings:Fd,start:v5,stop:()=>v5(!0),patches:[{find:".USER_PROFILE_ACTIVITY_BUTTONS),",replacement:{match:/.getId\(\)===\i.id/,replace:"$& && false"}}],settingsAboutComponent:()=>{let[e]=Cr(o0e,{fallbackValue:void 0,deps:Object.values(Fd.store)}),t=e0e.useSetting(),{profileThemeStyle:o}=ZZe({});return r(f,null,!t&&r(Mi,{className:me(Z.top16,Z.bottom16),style:{padding:"1em"}},r(re,null,"Notice"),r(W,null,"Activity Sharing isn't enabled, people won't be able to see your custom rich presence!"),r(U,{color:U.Colors.TRANSPARENT,className:Z.top8,onClick:()=>e0e.updateSetting(!0)},"Enable")),r(Be,{flexDirection:"column",gap:".5em",className:Z.top16},r(W,null,"Go to the ",r(Go,{href:"https://discord.com/developers/applications"},"Discord Developer Portal")," to create an application and get the application ID."),r(W,null,"Upload images in the Rich Presence tab to get the image keys."),r(W,null,"If you want to use an image link, download your image and reupload the image to ",r(Go,{href:"https://imgur.com"},"Imgur"),' and get the image link by right-clicking the image and selecting "Copy image address".'),r(W,null,"You can't see your own buttons on your profile, but everyone else can see it fine."),r(W,null,'Some weird unicode text ("fonts" \u{1D591}\u{1D58E}\u{1D590}\u{1D58A} \u{1D599}\u{1D58D}\u{1D58E}\u{1D598}) may cause the rich presence to not show up, try using normal letters instead.')),r(Bt,{className:Z.top8}),r("div",{style:{width:"284px",...o,marginTop:8,borderRadius:8,background:"var(--background-mod-muted)"}},e&&r(XZe,{activity:e,user:z.getCurrentUser(),currentUser:z.getCurrentUser()})))}})});var n0e=x(()=>{});async function VZe(){try{let{embed:e}=this.props,{replaceElements:t,dearrowByDefault:o}=t3.store;if(!e||e.dearrow||e.provider?.name!=="YouTube"||!e.video?.url)return;let n=JZe.exec(e.video.url)?.[1];if(!n)return;let i=await fetch(`https://sponsor.ajay.app/api/branding?videoID=${n}`);if(!i.ok)return;let{titles:s,thumbnails:a}=await i.json(),l=s[0]?.votes>=0,c=a[0]?.votes>=0;if(!l&&!c)return;if(e.dearrow={enabled:o},l&&t!==2){let u=s[0].title.replace(/(^|\s)>(\S)/g,"$1$2");e.dearrow.oldTitle=o?e.rawTitle:u,o&&(e.rawTitle=u)}if(c&&t!==1){let u=`https://dearrow-thumb.ajay.app/api/v1/getThumbnail?videoID=${n}&time=${a[0].timestamp}`;e.dearrow.oldThumb=o?e.thumbnail.proxyURL:u,o&&(e.thumbnail.proxyURL=u)}this.forceUpdate()}catch(e){new ke("Dearrow").error("Failed to dearrow embed",e)}}function eXe({component:e}){let{embed:t}=e.props;return t?.dearrow?r(Ue,{text:t.dearrow.enabled?"This embed has been dearrowed, click to restore":"Click to dearrow"},({onMouseEnter:o,onMouseLeave:n})=>r("button",{onMouseEnter:o,onMouseLeave:n,className:"vc-dearrow-toggle-"+(t.dearrow.enabled?"on":"off"),onClick:()=>{let{enabled:i,oldThumb:s,oldTitle:a}=t.dearrow;t3.store.dearrowByDefault=!i,t.dearrow.enabled=!i,a&&(t.dearrow.oldTitle=t.rawTitle,t.rawTitle=a),s&&(t.dearrow.oldThumb=t.thumbnail.proxyURL,t.thumbnail.proxyURL=s),e.forceUpdate()}},r("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px",viewBox:"0 0 36 36","aria-label":"Toggle Dearrow",className:"vc-dearrow-icon"},r("path",{fill:"#1213BD",d:"M36 18.302c0 4.981-2.46 9.198-5.655 12.462s-7.323 5.152-12.199 5.152s-9.764-1.112-12.959-4.376S0 23.283 0 18.302s2.574-9.38 5.769-12.644S13.271 0 18.146 0s9.394 2.178 12.589 5.442C33.931 8.706 36 13.322 36 18.302z"}),r("path",{fill:"#88c9f9",d:"m 30.394282,18.410186 c 0,3.468849 -1.143025,6.865475 -3.416513,9.137917 -2.273489,2.272442 -5.670115,2.92874 -9.137918,2.92874 -3.467803,0 -6.373515,-1.147212 -8.6470033,-3.419654 -2.2734888,-2.272442 -3.5871299,-5.178154 -3.5871299,-8.647003 0,-3.46885 0.9420533,-6.746149 3.2144954,-9.0196379 2.2724418,-2.2734888 5.5507878,-3.9513905 9.0196378,-3.9513905 3.46885,0 6.492841,1.9322561 8.76633,4.204698 2.273489,2.2724424 3.788101,5.2974804 3.788101,8.7663304 z"}),r("path",{fill:"#0a62a5",d:"m 23.95823,17.818306 c 0,3.153748 -2.644888,5.808102 -5.798635,5.808102 -3.153748,0 -5.599825,-2.654354 -5.599825,-5.808102 0,-3.153747 2.446077,-5.721714 5.599825,-5.721714 3.153747,0 5.798635,2.567967 5.798635,5.721714 z"})))):null}var JZe,t3,o3,r0e=x(()=>{"use strict";d();n0e();Q();tt();H();At();$();B();JZe=/https:\/\/www\.youtube\.com\/embed\/([a-zA-Z0-9_-]{11})/;t3=R({hideButton:{description:"Hides the Dearrow button from YouTube embeds",type:3,default:!1,restartNeeded:!0},replaceElements:{description:"Choose which elements of the embed will be replaced",type:4,restartNeeded:!0,options:[{label:"Everything (Titles & Thumbnails)",value:0,default:!0},{label:"Titles",value:1},{label:"Thumbnails",value:2}]},dearrowByDefault:{description:"Dearrow videos automatically",type:3,default:!0,restartNeeded:!1}}),o3=k({name:"Dearrow",description:"Makes YouTube embed titles and thumbnails less sensationalist, powered by Dearrow",authors:[w.Ven],settings:t3,embedDidMount:VZe,renderButton(e){return r(ee,{noop:!0},r(eXe,{component:e}))},patches:[{find:"this.renderInlineMediaEmbed",replacement:[{match:/render\(\)\{.{0,30}let\{embed:/,replace:"componentDidMount=$self.embedDidMount;$&"},{match:/children:\[(?=null!=\i\?(\i)\.renderSuppressButton)/,replace:"children:[$self.renderButton($1),",predicate:()=>!t3.store.hideButton}]}]})});var i0e=x(()=>{});async function s0e(e){try{let t=await fetch(`${e}/api/config`).then(o=>o.json());Zq=e,zp=Zq+"/api",Xq=zp+"/authorize",Jq=t.CDN_URL,Vq=t.CLIENT_ID}catch{console.error("failed to fetch decor config")}}var Zq,zp,Xq,Jq,Vq,Zx,S5,rv,w5,ej,ig=x(()=>{"use strict";d();Zq="https://decor.fieryflames.dev",zp=Zq+"/api",Xq=zp+"/authorize",Jq="https://ugc.decor.fieryflames.dev",Vq="1096966363416899624",Zx="100101099111114",S5="11497119",rv="1096357702931841148",w5="dXp2SdxDcP",ej=1e3*60*60*4});var tXe,sg,k5=x(()=>{"use strict";d();vn();ig();Is();At();at();B();tXe={async getItem(e){return zt(e).then(t=>t??null)},async setItem(e,t){await Gt(e,t)},async removeItem(e){await Ta(e)}},sg=_n(()=>Ih(zO((e,t)=>({token:null,tokens:{},init:()=>{e({token:t().tokens[z.getCurrentUser().id]??null})},setToken:o=>e({token:o,tokens:{...t().tokens,[z.getCurrentUser().id]:o}}),remove:o=>{let{tokens:n,init:i}=t(),s={...n};delete s[o],e({tokens:s}),i()},async authorize(){return new Promise((o,n)=>Ee(i=>r(pd,{...i,scopes:["identify"],responseType:"code",redirectUri:Xq,permissions:0n,clientId:Vq,cancelCompletesFlow:!1,callback:async s=>{try{let a=new URL(s.location);a.searchParams.append("client","vencord");let l=await fetch(a);if(l?.ok){let c=await l.text();t().setToken(c)}else throw new Error("Request not OK");o(void 0)}catch(a){a instanceof Error&&(Re(`Failed to authorize: ${a.message}`,D.Type.FAILURE),new ke("Decor").error("Failed to authorize",a),n(a))}}}),{onCloseCallback(){n(new Error("Authorization cancelled"))}}))},isAuthorized:()=>!!t().token}),{name:"decor-auth",storage:tXe,partialize:e=>({tokens:e.tokens}),onRehydrateStorage:()=>e=>e?.init()})))});async function n3(e,t){let o=await fetch(e,{...t,headers:{...t?.headers,Authorization:`Bearer ${sg.getState().token}`}});if(o.ok)return o;throw new Error(await o.text())}var a0e,l0e,c0e,tj,u0e,d0e,r3=x(()=>{"use strict";d();ig();k5();a0e=async e=>{if(e?.length===0)return{};let t=new URL(zp+"/users");return e&&e.length!==0&&t.searchParams.set("ids",JSON.stringify(e)),await fetch(t).then(o=>o.json())},l0e=async(e="@me")=>n3(zp+`/users/${e}/decorations`).then(t=>t.json()),c0e=async(e="@me")=>n3(zp+`/users/${e}/decoration`).then(t=>t.json()),tj=async(e,t="@me")=>{let o=new FormData;return e?"hash"in e?o.append("hash",e.hash):"file"in e&&(o.append("image",e.file),o.append("alt",e.alt??"null")):o.append("hash","null"),n3(zp+`/users/${t}/decoration`,{method:"PUT",body:o}).then(n=>e&&"file"in e?n.json():n.text())},u0e=async e=>{await n3(zp+`/decorations/${e}`,{method:"DELETE"})},d0e=async()=>fetch(zp+"/decorations/presets").then(e=>e.json())});function oj(e){return`${e.animated?"a_":""}${e.hash}`}function i3(e){return{asset:oj(e),skuId:Zx}}var s3=x(()=>{"use strict";d();ig()});function p0e(e){try{let[t,o]=L(e?gf.getState().getAsset(e.id)??null:null);return se(()=>{let n=(()=>{try{return gf.subscribe(i=>{if(!e)return;let s=i.getAsset(e.id);s&&t!==s&&o(s)})}catch{return()=>{}}})();try{if(e){let{fetch:i}=gf.getState();i(e.id)}}catch{}return n},[]),t?{asset:t,skuId:Zx}:null}catch(t){console.error(t)}return null}var gf,nj=x(()=>{"use strict";d();r3();ig();la();Is();B();gf=_n(()=>Ih((e,t)=>({usersDecorations:new Map,fetchQueue:new Set,bulkFetch:rn(async()=>{let{fetchQueue:o,usersDecorations:n}=t();if(o.size===0)return;e({fetchQueue:new Set});let i=[...o],s=await a0e(i),a=new Map(n),l=new Date;for(let c of i){let u=s[c]??null;a.set(c,{asset:u,fetchedAt:l})}e({usersDecorations:a})}),async fetch(o,n=!1){let{usersDecorations:i,fetchQueue:s,bulkFetch:a}=t(),{fetchedAt:l}=i.get(o)??{};l&&!n&&Date.now()-l.getTime()<ej||(e({fetchQueue:new Set(s).add(o)}),a())},async fetchMany(o){if(!o.length)return;let{usersDecorations:n,fetchQueue:i,bulkFetch:s}=t(),a=new Set(i),l=Date.now();for(let c of o){let{fetchedAt:u}=n.get(c)??{};u&&l-u.getTime()<ej||a.add(c)}e({fetchQueue:a}),s()},get(o){return t().usersDecorations.get(o)},getAsset(o){return t().usersDecorations.get(o)?.asset},has(o){return t().usersDecorations.has(o)},set(o,n){let{usersDecorations:i}=t(),s=new Map(i);s.set(o,{asset:n,fetchedAt:new Date}),e({usersDecorations:s})}})))});var Gp,iv=x(()=>{"use strict";d();r3();s3();Is();B();nj();Gp=_n(()=>Ih((e,t)=>({decorations:[],selectedDecoration:null,async fetch(){let o=await l0e(),n=await c0e();e({decorations:o,selectedDecoration:n})},async create(o){let n=await tj(o);e({decorations:[...t().decorations,n]})},async delete(o){let n=typeof o=="object"?o.hash:o;await u0e(n);let{selectedDecoration:i,decorations:s}=t(),a={decorations:s.filter(l=>l.hash!==n),selectedDecoration:i?.hash===n?null:i};e(a)},async select(o){t().selectedDecoration!==o&&(e({selectedDecoration:o}),tj(o),gf.getState().set(z.getCurrentUser().id,o?oj(o):null))},clear:()=>e({decorations:[],selectedDecoration:null})})))});var Dn,sv,av,m0e,ag=x(()=>{"use strict";d();nt();fe();Dn=de("vc-decor-"),sv=et("modalPreview","modalCloseButton","spinner","modal"),av=Ds(["initialSelectedDecoration:",/initialSelectedDecoration:\i,.{0,300}\i\.e\(/]),m0e=Ds([".CREATE_STICKER_MODAL,","isDisplayingIndividualStickers"])});var E5,f0e,a3,rj,g0e,Xx=x(()=>{"use strict";d();fe();f0e=e=>E5=e,a3=De("#{intl::PREMIUM_UPSELL_PROFILE_AVATAR_DECO_INLINE_UPSELL_DESCRIPTION}"),g0e=e=>rj=e});function ij(e){return r(E5,{...e,isSelected:!1},r(Am,null),r(Y,{size:"xs",color:"text-strong"},St("CREATE")))}var h0e=x(()=>{"use strict";d();Et();ao();mt();Xx()});function sj(e){return r(E5,{...e},r(US,null),r(Y,{size:"xs",color:"text-strong"},St("NONE")))}var x0e=x(()=>{"use strict";d();Et();ao();mt();Xx()});function aj({decoration:e}){let{delete:t}=Gp();return r(M.Menu,{navId:Dn("decoration-context-menu"),onClose:Dt.closeContextMenu,"aria-label":"Decoration Options"},r(M.MenuItem,{id:Dn("decoration-context-menu-copy-hash"),label:"Copy Decoration Hash",icon:ol,action:()=>Oo(e.hash)}),e.authorId===z.getCurrentUser().id&&r(M.MenuItem,{id:Dn("decoration-context-menu-delete"),label:"Delete Decoration",color:"danger",icon:$i,action:()=>go.show({title:"Delete Decoration",body:`Are you sure you want to delete ${e.alt}?`,confirmText:"Delete",confirmColor:Dn("danger-btn"),cancelText:"Cancel",onConfirm(){t(e)}})}))}var y0e=x(()=>{"use strict";d();ao();iv();ag();cs();B()});function lj(e){let{decoration:t}=e;return r(rj,{...e,onContextMenu:o=>{Dt.openContextMenu(o,()=>r(aj,{decoration:t}))},avatarDecoration:i3(t)})}var b0e=x(()=>{"use strict";d();s3();B();Xx();y0e()});function cj({renderItem:e,getItemKey:t,itemKeyPrefix:o,items:n}){return r("div",{className:Dn("sectioned-grid-list-grid")},n.map(i=>r(X.Fragment,{key:`${o?`${o}-`:""}${t(i)}`},e(i))))}var v0e=x(()=>{"use strict";d();ag();B()});function uj(e){return r("div",{className:me(Dn("sectioned-grid-list-container"),oXe.thin)},e.sections.map(t=>r("div",{key:e.getSectionKey(t),className:Dn("sectioned-grid-list-section")},e.renderSectionHeader(t),r(cj,{renderItem:e.renderItem,getItemKey:e.getItemKey,itemKeyPrefix:e.getSectionKey(t),items:t.items}))))}var oXe,S0e=x(()=>{"use strict";d();ag();xt();fe();v0e();oXe=et("managedReactiveScroller","thin")});function rXe(e){let[t,o]=L(null);return se(()=>{if(!e)return;let n=URL.createObjectURL(e);return o(n),()=>{URL.revokeObjectURL(n),o(null)}},[e]),t}function iXe(e){let[t,o]=L(""),[n,i]=L(null),[s,a]=L(!1),[l,c]=L(null);se(()=>{l&&c(null)},[n]);let{create:u}=Gp(),p=rXe(n),m=rt(()=>p?{asset:p,skuId:S5}:null,[p]);return r(Pe,{...e,size:"medium",className:sv.modal},r(je,{separator:!1,className:Dn("modal-header")},r(Y,{size:"lg",weight:"semibold",color:"text-strong",tag:"h1",style:{flexGrow:1}},"Create Decoration"),r(Ut,{onClick:e.onClose})),r($e,{className:Dn("create-decoration-modal-content"),scrollbarType:"none"},r(ee,null,r(w0e,{messageType:k0e.WARNING},"Make sure your decoration does not violate ",r(Go,{href:"https://github.com/decor-discord/.github/blob/main/GUIDELINES.md"},"the guidelines")," before submitting it."),r("div",{className:Dn("create-decoration-modal-form-preview-container")},r("div",{className:Dn("create-decoration-modal-form")},l!==null&&r(Y,{size:"xs",color:"text-danger"},l.message),r("section",null,r(re,null,"File"),r(nXe,{filename:n?.name,placeholder:"Choose a file",buttonText:"Browse",filters:[{name:"Decoration file",extensions:["png","apng"]}],onFileSelect:i}),r(W,{className:Z.top8},"File should be APNG or PNG.")),r("section",null,r(re,null,"Name"),r(qe,{placeholder:"Companion Cube",value:t,onChange:o}),r(W,{className:Z.top8},"This name will be used when referring to this decoration."))),r("div",null,r(a3,{avatarDecoration:m,user:z.getCurrentUser()}))),r(w0e,{messageType:k0e.INFO,className:Z.bottom8},"To receive updates on your decoration's review, join ",r(Go,{href:`https://discord.gg/${w5}`,onClick:async g=>{g.preventDefault(),ct.getGuild(rv)?(li(),V.dispatch({type:"LAYER_POP_ALL"}),ho.transitionToGuild(rv)):await Gi(w5)&&(li(),V.dispatch({type:"LAYER_POP_ALL"}))}},"Decor's Discord server")," and allow direct messages."))),r(ht,{className:Dn("modal-footer")},r("div",{className:Dn("modal-footer-btn-container")},r(U,{onClick:e.onClose,color:U.Colors.PRIMARY},"Cancel"),r(U,{onClick:()=>{a(!0),u({alt:t,file:n}).then(e.onClose).catch(g=>{a(!1),c(g)})},disabled:!n||!t||s},"Submit for Review"))))}var nXe,w0e,k0e,l3,dj=x(()=>{"use strict";d();Et();tt();ut();ts();wt();ig();iv();ag();Xx();mt();co();at();fe();B();nXe=De(".currentTarget.files","lineClamp:1"),{HelpMessage:w0e,HelpMessageTypes:k0e}=qn('POSITIVE="positive',{HelpMessageTypes:ot.byProps("POSITIVE","WARNING","INFO"),HelpMessage:ot.byCode("messageType:")});l3=()=>Promise.all([av(),m0e()]).then(()=>Ee(e=>r(iXe,{...e})))});function sXe(e){return r(Pe,{...e,size:"small",className:sv.modal},r(je,{separator:!1,className:Dn("modal-header")},r(Y,{size:"lg",weight:"semibold",color:"text-strong",tag:"h1",style:{flexGrow:1}},"Hold on"),r(Ut,{onClick:e.onClose})),r($e,{scrollbarType:"none"},r(W,null,"By submitting a decoration, you agree to ",r(Go,{href:"https://github.com/decor-discord/.github/blob/main/GUIDELINES.md"},"the guidelines"),". Not reading these guidelines may get your account suspended from creating more decorations in the future.")),r(ht,{className:Dn("modal-footer")},r(Be,{gap:"4px"},r(U,{onClick:()=>{Jx.store.agreedToGuidelines=!0,e.onClose(),l3()}},"Continue"),r(U,{onClick:e.onClose,color:U.Colors.PRIMARY,look:U.Looks.LINK},"Go Back"))))}var E0e,A0e=x(()=>{"use strict";d();Et();eo();ts();wt();c3();ag();at();B();dj();E0e=()=>av().then(()=>Ee(e=>r(sXe,{...e})))});function aXe(){let[e,t]=L([]);return se(()=>{d0e().then(t)},[]),e}function cXe({section:e}){let t=typeof e.subtitle<"u",o=typeof e.authorIds<"u",[n,i]=L([]);return se(()=>{lXe.push(async()=>{if(e.authorIds)for(let s of e.authorIds){let a=z.getUser(s)??await as.getUser(s).catch(()=>null);a!=null&&i(l=>[...l,a])}})},[e.authorIds]),r("div",null,r(Be,null,r(er.FormTitle,{style:{flexGrow:1}},e.title),o&&r(ud,{users:n,guildId:void 0,renderIcon:!1,max:5,showDefaultAvatarsForNullUsers:!0,size:16,showUserPopout:!0,className:Z.bottom8})),t&&r(W,{className:Z.bottom8},e.subtitle))}function uXe(e){let[t,o]=L(void 0),n=typeof t<"u",i=t!=null?i3(t):t,{decorations:s,selectedDecoration:a,fetch:l,select:c}=Gp();se(()=>{l()},[]);let u=n?t:a,p=typeof u?.authorId<"u",m=s.some(C=>C.reviewed===!1),g=aXe(),y=g.flatMap(C=>C.decorations),b=g.find(C=>C.id===u?.presetId),v=typeof b<"u",A=[{title:"Your Decorations",subtitle:"You can delete your own decorations by right clicking on them.",sectionKey:"ownDecorations",items:["none",...s.filter(C=>!y.some(I=>I.hash===C.hash)),"create"]},...g.map(C=>({title:C.name,subtitle:C.description||void 0,sectionKey:`preset-${C.id}`,items:C.decorations,authorIds:C.authorIds}))];return r(Pe,{...e,size:"dynamic",className:sv.modal},r(je,{separator:!1,className:Dn("modal-header")},r(Y,{size:"lg",weight:"semibold",color:"text-strong",tag:"h1",style:{flexGrow:1}},"Change Decoration"),r(Ut,{onClick:e.onClose})),r($e,{className:Dn("change-decoration-modal-content"),scrollbarType:"none"},r(ee,null,r(uj,{renderItem:C=>{if(typeof C=="string")switch(C){case"none":return r(sj,{className:Dn("change-decoration-modal-decoration"),isSelected:u===null,onSelect:()=>o(null)});case"create":return r(Ue,{text:"You already have a decoration pending review",shouldShow:m},I=>r(ij,{className:Dn("change-decoration-modal-decoration"),...I,onSelect:m?()=>{}:Jx.store.agreedToGuidelines?l3:E0e}))}else return r(Ue,{text:"Pending review",shouldShow:C.reviewed===!1},I=>r(lj,{...I,className:Dn("change-decoration-modal-decoration"),onSelect:C.reviewed!==!1?()=>o(C):()=>{},isSelected:u?.hash===C.hash,decoration:C}))},getItemKey:C=>typeof C=="string"?C:C.hash,getSectionKey:C=>C.sectionKey,renderSectionHeader:C=>r(cXe,{section:C}),sections:A}),r("div",{className:Dn("change-decoration-modal-preview")},r(a3,{avatarDecoration:i,user:z.getCurrentUser()}),v&&r(re,{className:""},"Part of the ",b.name," Preset"),typeof u=="object"&&r(Y,{size:"sm",weight:"semibold",color:"text-strong"},u?.alt),p&&r(Y,{key:`createdBy-${u.authorId}`},"Created by ",Jt.parse(`<@${u.authorId}>`)),v&&r(U,{onClick:()=>$t(b.id)},"Copy Preset ID")))),r(ht,{className:Dn("change-decoration-modal-footer","modal-footer")},r("div",{className:Dn("modal-footer-btn-container")},r(U,{onClick:e.onClose,color:U.Colors.PRIMARY},"Cancel"),r(U,{onClick:()=>{c(t).then(e.onClose)},disabled:!n},"Apply")),r("div",{className:Dn("modal-footer-btn-container")},r(Ue,{text:"Join Decor's Discord Server for notifications on your decoration's review, and when new presets are released"},C=>r(Me,{...C,onClick:async()=>{ct.getGuild(rv)?(e.onClose(),V.dispatch({type:"LAYER_POP_ALL"}),ho.transitionToGuild(rv)):await Gi(w5)&&(li(),V.dispatch({type:"LAYER_POP_ALL"}))},variant:"link"},"Discord Server")),r(Me,{onClick:()=>go.show({title:"Log Out",body:"Are you sure you want to log out of Decor?",confirmText:"Log Out",confirmColor:Dn("danger-btn"),cancelText:"Cancel",onConfirm(){sg.getState().remove(z.getCurrentUser().id),e.onClose()}}),variant:"dangerSecondary"},"Log Out"))))}var lXe,pj,C0e=x(()=>{"use strict";d();Et();Co();tt();eo();ut();wt();r3();ig();k5();iv();s3();c3();ag();Xx();h0e();x0e();b0e();S0e();mt();co();at();I0();B();dj();A0e();lXe=new pl;pj=()=>av().then(()=>Ee(e=>r(uXe,{...e})))});function A5({hideTitle:e=!1,hideDivider:t=!1,noMargin:o=!1}){let n=sg(),{selectedDecoration:i,select:s,fetch:a}=Gp();return se(()=>{n.isAuthorized()&&a()},[n.token]),r(dXe,{title:!e&&"Decor",hasBackground:!0,hideDivider:t,className:o&&Dn("section-remove-margin")},r(Be,{gap:"4px"},r(Me,{onClick:()=>{n.isAuthorized()?pj():n.authorize().then(pj).catch(()=>{})},variant:"primary",size:"small"},"Change Decoration"),i&&n.isAuthorized()&&r(Me,{onClick:()=>s(null),variant:"secondary",size:"small"},"Remove Decoration")))}var dXe,mj=x(()=>{"use strict";d();Co();eo();k5();iv();ag();C0e();fe();B();dXe=De(".DESCRIPTION","hasBackground:")});var Jx,c3=x(()=>{"use strict";d();Q();ts();wt();co();xt();at();$();B();fj();mj();Jx=R({changeDecoration:{type:6,component(){return lv.started?r("div",null,r(A5,{hideTitle:!0,hideDivider:!0,noMargin:!0}),r(W,{className:me(Z.top8,Z.bottom8)},"You can also access Decor decorations from the ",r(Go,{href:"/settings/profile-customization",onClick:e=>{e.preventDefault(),li(),V.dispatch({type:"USER_SETTINGS_MODAL_SET_SECTION",section:"Profile Customization"})}},"Profiles")," page.")):r(W,null,"Enable Decor and restart your client to change your avatar decoration.")}},baseUrl:{type:0,hidden:!0,description:"Decor api url",default:"https://decor.fieryflames.dev"},agreedToGuidelines:{type:3,description:"Agreed to guidelines",hidden:!0,default:!1}})});var lv,fj=x(()=>{"use strict";d();i0e();tt();H();$();B();ig();k5();iv();nj();c3();Xx();mj();lv=k({name:"Decor",description:"Create and use your own custom avatar decorations, or pick your favorite from the presets.",authors:[w.FieryFlames],patches:[{find:"getAvatarDecorationURL:",replacement:{match:/(?<=function \i\((\i)\){)(?=let{avatarDecoration)/,replace:"const vcDecorDecoration=$self.getDecorAvatarDecorationURL($1);if(vcDecorDecoration)return vcDecorDecoration;"}},{find:"DefaultCustomizationSections",replacement:{match:/(?<=#{intl::USER_SETTINGS_AVATAR_DECORATION}\)},"decoration"\),)/,replace:"$self.DecorSection(),"}},{find:"80,onlyAnimateOnHoverOrFocus:!",replacement:[{match:/(?<==)\i=>{let{children.{20,200}isSelected:\i=!1.{0,5}\}=\i/,replace:"$self.DecorationGridItem=$&"},{match:/(?<==)\i=>{let{user:\i,avatarDecoration/,replace:"$self.DecorationGridDecoration=$&"},{match:/(?<=\.\i\.PURCHASE)(?=,)(?<=avatarDecoration:(\i).+?)/,replace:"||$1.skuId===$self.SKU_ID"}]},{find:"isAvatarDecorationAnimating:",group:!0,replacement:[{match:/(?<=\.avatarDecoration,guildId:\i\}\)\),)(?<=user:(\i).+?)/,replace:"vcDecorAvatarDecoration=$self.useUserDecorAvatarDecoration($1),"},{match:/(?<={avatarDecoration:).{1,20}?(?=,)(?<=avatarDecorationOverride:(\i).+?)/,replace:"$1??vcDecorAvatarDecoration??($&)"},{match:/(?<=size:\i}\),\[)/,replace:"vcDecorAvatarDecoration,"}]},{find:"#{intl::ACCOUNT_SPEAKING_WHILE_MUTED}",replacement:[{match:/(?<=\i\)\({avatarDecoration:)\i(?=,)(?<=currentUser:(\i).+?)/,replace:"$self.useUserDecorAvatarDecoration($1)??$&"}]},...['"Message Username"',"#{intl::COLLECTIBLES_NAMEPLATE_PREVIEW_A11Y}","#{intl::ayozFl::raw}"].map(e=>({find:e,replacement:[{match:/(?<=userValue:)((\i(?:\.author)?)\?\.avatarDecoration)/,replace:"$self.useUserDecorAvatarDecoration($2)??$1"}]})),{find:"#{intl::PREMIUM_UPSELL_PROFILE_AVATAR_DECO_INLINE_UPSELL_DESCRIPTION}",replacement:{match:/(#{intl::PREMIUM_UPSELL_PROFILE_AVATAR_DECO_INLINE_UPSELL_DESCRIPTION}.+?return null!=(\i)&&\()(null==\i)/,replace:(e,t,o,n)=>`${t}(${o}.skuId!==$self.SKU_ID&&${o}.skuId!==$self.RAW_SKU_ID&&${n})`}}],settings:Jx,flux:{CONNECTION_OPEN:()=>{sg.getState().init(),Gp.getState().clear(),gf.getState().fetch(z.getCurrentUser().id,!0)},USER_PROFILE_MODAL_OPEN:e=>{gf.getState().fetch(e.userId,!0)}},set DecorationGridItem(e){f0e(e)},set DecorationGridDecoration(e){g0e(e)},SKU_ID:Zx,RAW_SKU_ID:S5,useUserDecorAvatarDecoration:p0e,async start(){await s0e(Jx.store.baseUrl),gf.getState().fetch(z.getCurrentUser().id,!0)},getDecorAvatarDecorationURL({avatarDecoration:e,canAnimate:t}){if(e?.skuId===Zx){let o=e.asset.split("_");return e.asset.startsWith("a_")&&!t&&o.shift(),`${Jq}/${o.join("_")}.png`}else if(e?.skuId===S5)return e.asset},DecorSection:ee.wrap(A5,{noop:!0})})});var u3,T0e=x(()=>{"use strict";d();H();$();u3=k({name:"DisableCallIdle",description:"Disables automatically getting kicked from a DM voice call after 3 minutes and being moved to an AFK voice channel.",authors:[w.Nuckyz],patches:[{find:"this.idleTimeout.start(",replacement:{match:/this\.idleTimeout\.(start|stop)/g,replace:"$self.noop"}},{find:"handleIdleUpdate(){",replacement:{match:"handleIdleUpdate(){",replace:"handleIdleUpdate(){return;"}}],noop(){}})});var d3,I0e=x(()=>{"use strict";d();H();$();B();d3=k({name:"DontRoundMyTimestamps",authors:[w.Lexi],description:"Always rounds relative timestamps down, so 7.6y becomes 7y instead of 8y",start(){ll.relativeTimeRounding(Math.floor)},stop(){ll.relativeTimeRounding(Math.round)}})});var gj,D0e=x(()=>{d();(window.VencordStyles??=new Map).set("src/plugins/experiments/hideBugReport.css",{name:"src/plugins/experiments/hideBugReport.css",source:`#staff-help-popout-staff-help-bug-reporter {
    display: none;
}
`,classNames:{},dom:null});gj="src/plugins/experiments/hideBugReport.css"});var p3,pXe,mXe,fXe,M0e,m3,N0e=x(()=>{"use strict";d();Q();ps();Et();tt();vc();ut();wt();H();co();$();fe();B();D0e();p3=He("key","combo"),pXe=An(e=>e?.definition?.name==="2026-01-bug-reporter"),mXe=ri?"cmd":"ctrl",fXe=ri?"opt":"alt",M0e=R({toolbarDevMenu:{type:3,description:"Change the Help (?) toolbar button (top right in chat) to Discord's developer menu",default:!1,restartNeeded:!0}}),m3=k({name:"Experiments",description:"Enable Access to Experiments & other dev-only features in Discord!",authors:[w.Megu,w.Ven,w.Nickyux,w.BanTheNons,w.Nuckyz],isModified:!0,settings:M0e,patches:[{find:"Object.defineProperties(this,{isDeveloper",replacement:{match:/(?<={isDeveloper:\{[^}]+?,get:\(\)=>)\i/,replace:"true"}},{find:'type:"user",revision',replacement:{match:/!(\i)(?=&&"CONNECTION_OPEN")/,replace:"!($1=true)"}},{find:'placeholder:"Search experiments"',replacement:{match:/(?<=children:\[)(?=\(0,\i\.jsx?\)\(\i\.\i,{placeholder:"Search experiments")/,replace:"$self.WarningCard(),"}},{find:'?"BACK_FORWARD_NAVIGATION":',replacement:{match:/hasBugReporterAccess:(\i)/,replace:"_hasBugReporterAccess:$1=true"},predicate:()=>M0e.store.toolbarDevMenu},{find:'navId:"staff-help-popout"',replacement:{match:/(isShown.+?)onClick:\i/,replace:(e,t)=>`${t}onClick:()=>{}`}},{find:"useCanFavoriteChannel",replacement:{match:/\i\.isDM\(\)\|\|\i\.isThread\(\)/,replace:"false"}},{find:"Clear Treatment ",replacement:[{match:/\i\??\.isStaff\(\)/,replace:"true"},{match:/\.isStaffPersonal\(\).+?if\(null==(\i)\|\|null==\i(?=\)return null;)/,replace:"$&||({})[$1]!=null"}]},{find:"}getServerAssignment(",replacement:{match:/}getServerAssignment\((\i),\i,\i\){/,replace:"$&if($1==null)return;"}},{find:"{PlaygroundEmbed:()=>",replacement:{match:/PotionIcon.{0,250}getCurrentUser\(\);return/,replace:"$& true||"}},{find:'"^dev://experiment/',replacement:{match:/(\[0-9\]\+)/,replace:"[a-zA-Z0-9-]+"}},{find:".EXPERIMENT_TREATMENT&&null",replacement:[{match:/(?<=find\(\i=>)((\i).value===\i)/,replace:"{return($1)||($self.matchExperiment(arguments[0].url,$2.label))}"}]}],matchExperiment(e,t){let o=e.split("/"),n=t.replace(/[^a-zA-Z0-9]+/g,"").toLowerCase(),i=o[o.length-1]?.replace(/[^a-zA-Z0-9]+/g,"").toLowerCase();return!!n&&i!==void 0&&n===i},start:()=>!pXe.getConfig().hasBugReporterAccess&&Or(gj),stop:()=>Fr(gj),settingsAboutComponent:()=>r(X.Fragment,null,r(so,null,"More Information"),r(Y,{size:"md"},"You can open Discord's DevTools via "," ",r("div",{className:p3.combo,style:{display:"inline-flex"}},r("kbd",{className:p3.key},mXe)," +"," ",r("kbd",{className:p3.key},fXe)," +"," ",r("kbd",{className:p3.key},"O")," "))),WarningCard:ee.wrap(()=>r(Mi,{id:"vc-experiments-warning-card",className:Z.bottom16},r(Jo,null,"Hold on!!"),r(W,null,"Experiments are unreleased Discord features. They might not work, or even break your client or get your account disabled."),r(W,{className:Z.top8},"Only use experiments if you know what you're doing. Equicord is not responsible for any damage caused by enabling experiments. If you don't know what an experiment does, ignore it. Do not ask us what experiments do either, we probably don't know."),r(W,{className:Z.top8},'No, you cannot use server-side features like checking the "Send to Client" box.')),{noop:!0})})});var f3,B0e=x(()=>{"use strict";d();H();$();f3=k({name:"F8Break",description:"Pause the client when you press F8 with DevTools (+ breakpoints) open.",authors:[w.lewisakura],start(){window.addEventListener("keydown",this.event)},stop(){window.removeEventListener("keydown",this.event)},event(e){if(e.code==="F8")debugger}})});function gXe(e,t=0,o){o=o??e.length-t;let n=-1;for(let i=t,s=t+o;i<s;i++)n=n>>>8^F0e[(n^e[i])&255];return n^-1}function U0e(e){let t=new Uint8Array(e);return new Promise(function(o,n){for(let y=0;y<hj.length;y++)if(hj[y]!=t[y]){n("Not a PNG file (invalid file signature)");return}let i=!1;if(P0e(t,function(y){return y=="acTL"?(i=!0,!1):!0}),!i){n("Not an animated PNG");return}let s=[],a=[],l=null,c=null,u=new xj;if(P0e(t,function(y,b,v,E){switch(y){case"IHDR":l=b.subarray(v+8,v+8+E),u.width=lg(b,v+8),u.height=lg(b,v+12);break;case"acTL":u.numPlays=lg(b,v+8+4);break;case"fcTL":c&&u.frames.push(c),c={},c.width=lg(b,v+8+4),c.height=lg(b,v+8+8),c.left=lg(b,v+8+12),c.top=lg(b,v+8+16);let A=_0e(b,v+8+20),C=_0e(b,v+8+22);C==0&&(C=100),c.delay=1e3*A/C,c.delay<=10&&(c.delay=100),u.playTime+=c.delay,c.disposeOp=R0e(b,v+8+24),c.blendOp=R0e(b,v+8+25),c.dataParts=[];break;case"fdAT":c&&c.dataParts.push(b.subarray(v+8+4,v+8+E));break;case"IDAT":c&&c.dataParts.push(b.subarray(v+8,v+8+E));break;case"IEND":a.push(L0e(b,v,12+E));break;default:s.push(L0e(b,v,12+E))}}),c&&u.frames.push(c),u.frames.length==0){n("Not an animated PNG");return}let p=0,m=new Blob(s),g=new Blob(a);for(let y=0;y<u.frames.length;y++){c=u.frames[y];let b=[];b.push(hj),l.set(g3(c.width),0),l.set(g3(c.height),4),b.push(O0e("IHDR",l)),b.push(m);for(let A=0;A<c.dataParts.length;A++)b.push(O0e("IDAT",c.dataParts[A]));b.push(g);let v=URL.createObjectURL(new Blob(b,{type:"image/png"}));delete c.dataParts;let E=c.img=new Image;E.onload=function(){URL.revokeObjectURL(E.src),p++,p==u.frames.length&&o(u)},E.onerror=function(){n("Image creation error")},E.src=v}})}function P0e(e,t){let o=8,n,i;do{let s=lg(e,o);i=hXe(e,o+4,4),n=t(i,e,o,s),o+=12+s}while(n!==!1&&i!="IEND"&&o<e.length)}function lg(e,t){let o=0;o+=e[0+t]<<24>>>0;for(let n=1;n<4;n++)o+=e[n+t]<<(3-n)*8;return o}function _0e(e,t){let o=0;for(let n=0;n<2;n++)o+=e[n+t]<<(1-n)*8;return o}function R0e(e,t){return e[t]}function L0e(e,t,o){let n=new Uint8Array(o);return n.set(e.subarray(t,t+o)),n}function hXe(e,t,o){let n=Array.prototype.slice.call(e.subarray(t,t+o));return String.fromCharCode.apply(String,n)}function g3(e){return[e>>>24&255,e>>>16&255,e>>>8&255,e&255]}function xXe(e){let t=[];for(let o=0;o<e.length;o++)t.push(e.charCodeAt(o));return t}function O0e(e,t){let o=e.length+t.length,n=new Uint8Array(new ArrayBuffer(o+8));n.set(g3(t.length),0),n.set(xXe(e),4),n.set(t,8);let i=gXe(n,4,o);return n.set(g3(i),o+4),n}var xj,F0e,hj,$0e=x(()=>{"use strict";d();xj=class{width=0;height=0;numPlays=0;playTime=0;frames=[]},F0e=new Uint32Array(256);for(let e=0;e<256;e++){let t=e;for(let o=0;o<8;o++)t=t&1?3988292384^t>>>1:t>>>1;F0e[e]=t}hj=new Uint8Array([137,80,78,71,13,10,26,10])});var T5=Ro(Sj=>{d();var q0e=Object.defineProperty,yXe=e=>q0e(e,"__esModule",{value:!0}),bXe=(e,t)=>{for(var o in t)q0e(e,o,{get:t[o],enumerable:!0})};yXe(Sj);bXe(Sj,{GIFEncoder:()=>X0e,applyPalette:()=>IXe,default:()=>FXe,nearestColor:()=>BXe,nearestColorIndex:()=>Q0e,nearestColorIndexWithDistance:()=>Z0e,prequantize:()=>TXe,quantize:()=>AXe,snapColorsToPalette:()=>NXe});var vXe={signature:"GIF",version:"89a",trailer:59,extensionIntroducer:33,applicationExtensionLabel:255,graphicControlExtensionLabel:249,imageSeparator:44,signatureSize:3,versionSize:3,globalColorTableFlagMask:128,colorResolutionMask:112,sortFlagMask:8,globalColorTableSizeMask:7,applicationIdentifierSize:8,applicationAuthCodeSize:3,disposalMethodMask:28,userInputFlagMask:2,transparentColorFlagMask:1,localColorTableFlagMask:128,interlaceFlagMask:64,idSortFlagMask:32,localColorTableSizeMask:7};function j0e(e=256){let t=0,o=new Uint8Array(e);return{get buffer(){return o.buffer},reset(){t=0},bytesView(){return o.subarray(0,t)},bytes(){return o.slice(0,t)},writeByte(i){n(t+1),o[t]=i,t++},writeBytes(i,s=0,a=i.length){n(t+a);for(let l=0;l<a;l++)o[t++]=i[l+s]},writeBytesView(i,s=0,a=i.byteLength){n(t+a),o.set(i.subarray(s,s+a),t),t+=a}};function n(i){var s=o.length;if(s>=i)return;var a=1024*1024;i=Math.max(i,s*(s<a?2:1.125)>>>0),s!=0&&(i=Math.max(i,256));let l=o;o=new Uint8Array(i),t>0&&o.set(l.subarray(0,t),0)}}var yj=12,H0e=5003,SXe=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];function wXe(e,t,o,n,i=j0e(512),s=new Uint8Array(256),a=new Int32Array(H0e),l=new Int32Array(H0e)){let c=a.length,u=Math.max(2,n);s.fill(0),l.fill(0),a.fill(-1);let p=0,m=0,g=u+1,y=g,b=!1,v=y,E=(1<<v)-1,A=1<<g-1,C=A+1,I=A+2,N=0,_=o[0],O=0;for(let G=c;G<65536;G*=2)++O;O=8-O,i.writeByte(u),J(A);let F=o.length;for(let G=1;G<F;G++)e:{let te=o[G],K=(te<<yj)+_,oe=te<<O^_;if(a[oe]===K){_=l[oe];break e}let le=oe===0?1:c-oe;for(;a[oe]>=0;)if(oe-=le,oe<0&&(oe+=c),a[oe]===K){_=l[oe];break e}J(_),_=te,I<1<<yj?(l[oe]=I++,a[oe]=K):(a.fill(-1),I=A+2,b=!0,J(A))}return J(_),J(C),i.writeByte(0),i.bytesView();function J(G){for(p&=SXe[m],m>0?p|=G<<m:p=G,m+=v;m>=8;)s[N++]=p&255,N>=254&&(i.writeByte(N),i.writeBytesView(s,0,N),N=0),p>>=8,m-=8;if((I>E||b)&&(b?(v=y,E=(1<<v)-1,b=!1):(++v,E=v===yj?1<<v:(1<<v)-1)),G==C){for(;m>0;)s[N++]=p&255,N>=254&&(i.writeByte(N),i.writeBytesView(s,0,N),N=0),p>>=8,m-=8;N>0&&(i.writeByte(N),i.writeBytesView(s,0,N),N=0)}}}var kXe=wXe;function W0e(e,t,o){return e<<8&63488|t<<2&992|o>>3}function K0e(e,t,o,n){return e>>4|t&240|(o&240)<<4|(n&240)<<8}function Y0e(e,t,o){return e>>4<<8|t&240|o>>4}function h3(e,t,o){return e<t?t:e>o?o:e}function C5(e){return e*e}function z0e(e,t,o){var n=0,i=1e100;let s=e[t],a=s.cnt,l=s.ac,c=s.rc,u=s.gc,p=s.bc;for(var m=s.fw;m!=0;m=e[m].fw){let y=e[m],b=y.cnt,v=a*b/(a+b);if(!(v>=i)){var g=0;o&&(g+=v*C5(y.ac-l),g>=i)||(g+=v*C5(y.rc-c),!(g>=i)&&(g+=v*C5(y.gc-u),!(g>=i)&&(g+=v*C5(y.bc-p),!(g>=i)&&(i=g,n=m))))}}s.err=i,s.nn=n}function bj(){return{ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0}}function EXe(e,t){let o=t==="rgb444"?4096:65536,n=new Array(o),i=e.length;if(t==="rgba4444")for(let s=0;s<i;++s){let a=e[s],l=a>>24&255,c=a>>16&255,u=a>>8&255,p=a&255,m=K0e(p,u,c,l),g=m in n?n[m]:n[m]=bj();g.rc+=p,g.gc+=u,g.bc+=c,g.ac+=l,g.cnt++}else if(t==="rgb444")for(let s=0;s<i;++s){let a=e[s],l=a>>16&255,c=a>>8&255,u=a&255,p=Y0e(u,c,l),m=p in n?n[p]:n[p]=bj();m.rc+=u,m.gc+=c,m.bc+=l,m.cnt++}else for(let s=0;s<i;++s){let a=e[s],l=a>>16&255,c=a>>8&255,u=a&255,p=W0e(u,c,l),m=p in n?n[p]:n[p]=bj();m.rc+=u,m.gc+=c,m.bc+=l,m.cnt++}return n}function AXe(e,t,o={}){let{format:n="rgb565",clearAlpha:i=!0,clearAlphaColor:s=0,clearAlphaThreshold:a=0,oneBitAlpha:l=!1}=o;if(!e||!e.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(e instanceof Uint8Array)&&!(e instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");let c=new Uint32Array(e.buffer),u=o.useSqrt!==!1,p=n==="rgba4444",m=EXe(c,n),g=m.length,y=g-1,b=new Uint32Array(g+1);for(var v=0,A=0;A<g;++A){let Ae=m[A];if(Ae!=null){var E=1/Ae.cnt;p&&(Ae.ac*=E),Ae.rc*=E,Ae.gc*=E,Ae.bc*=E,m[v++]=Ae}}C5(t)/v<.022&&(u=!1);for(var A=0;A<v-1;++A)m[A].fw=A+1,m[A+1].bk=A,u&&(m[A].cnt=Math.sqrt(m[A].cnt));u&&(m[A].cnt=Math.sqrt(m[A].cnt));var C,I,N;for(A=0;A<v;++A){z0e(m,A,!1);var _=m[A].err;for(I=++b[0];I>1&&(N=I>>1,!(m[C=b[N]].err<=_));I=N)b[I]=C;b[I]=A}var O=v-t;for(A=0;A<O;){for(var F;;){var J=b[1];if(F=m[J],F.tm>=F.mtm&&m[F.nn].mtm<=F.tm)break;F.mtm==y?J=b[1]=b[b[0]--]:(z0e(m,J,!1),F.tm=A);var _=m[J].err;for(I=1;(N=I+I)<=b[0]&&(N<b[0]&&m[b[N]].err>m[b[N+1]].err&&N++,!(_<=m[C=b[N]].err));I=N)b[I]=C;b[I]=J}var G=m[F.nn],te=F.cnt,K=G.cnt,E=1/(te+K);p&&(F.ac=E*(te*F.ac+K*G.ac)),F.rc=E*(te*F.rc+K*G.rc),F.gc=E*(te*F.gc+K*G.gc),F.bc=E*(te*F.bc+K*G.bc),F.cnt+=G.cnt,F.mtm=++A,m[G.bk].fw=G.fw,m[G.fw].bk=G.bk,G.mtm=y}let oe=[];var le=0;for(A=0;;++le){let he=h3(Math.round(m[A].rc),0,255),Ae=h3(Math.round(m[A].gc),0,255),Ce=h3(Math.round(m[A].bc),0,255),ye=255;p&&(ye=h3(Math.round(m[A].ac),0,255),l&&(ye=ye<=(typeof l=="number"?l:127)?0:255),i&&ye<=a&&(he=Ae=Ce=s,ye=0));let ce=p?[he,Ae,Ce,ye]:[he,Ae,Ce];if(CXe(oe,ce)||oe.push(ce),(A=m[A].fw)==0)break}return oe}function CXe(e,t){for(let o=0;o<e.length;o++){let n=e[o],i=n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2],s=n.length>=4&&t.length>=4?n[3]===t[3]:!0;if(i&&s)return!0}return!1}function y3(e,t){var o=0,n;for(n=0;n<e.length;n++){let i=e[n]-t[n];o+=i*i}return o}function x3(e,t){return t>1?Math.round(e/t)*t:e}function TXe(e,{roundRGB:t=5,roundAlpha:o=10,oneBitAlpha:n=null}={}){let i=new Uint32Array(e.buffer);for(let s=0;s<i.length;s++){let a=i[s],l=a>>24&255,c=a>>16&255,u=a>>8&255,p=a&255;l=x3(l,o),n&&(l=l<=(typeof n=="number"?n:127)?0:255),p=x3(p,t),u=x3(u,t),c=x3(c,t),i[s]=l<<24|c<<16|u<<8|p<<0}}function IXe(e,t,o="rgb565"){if(!e||!e.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(e instanceof Uint8Array)&&!(e instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");if(t.length>256)throw new Error("applyPalette() only works with 256 colors or less");let n=new Uint32Array(e.buffer),i=n.length,s=o==="rgb444"?4096:65536,a=new Uint8Array(i),l=new Array(s),c=o==="rgba4444";if(o==="rgba4444")for(let u=0;u<i;u++){let p=n[u],m=p>>24&255,g=p>>16&255,y=p>>8&255,b=p&255,v=K0e(b,y,g,m),E=v in l?l[v]:l[v]=DXe(b,y,g,m,t);a[u]=E}else{let u=o==="rgb444"?Y0e:W0e;for(let p=0;p<i;p++){let m=n[p],g=m>>16&255,y=m>>8&255,b=m&255,v=u(b,y,g),E=v in l?l[v]:l[v]=MXe(b,y,g,t);a[p]=E}}return a}function DXe(e,t,o,n,i){let s=0,a=1e100;for(let l=0;l<i.length;l++){let c=i[l],u=c[3],p=Vx(u-n);if(p>a)continue;let m=c[0];if(p+=Vx(m-e),p>a)continue;let g=c[1];if(p+=Vx(g-t),p>a)continue;let y=c[2];p+=Vx(y-o),!(p>a)&&(a=p,s=l)}return s}function MXe(e,t,o,n){let i=0,s=1e100;for(let a=0;a<n.length;a++){let l=n[a],c=l[0],u=Vx(c-e);if(u>s)continue;let p=l[1];if(u+=Vx(p-t),u>s)continue;let m=l[2];u+=Vx(m-o),!(u>s)&&(s=u,i=a)}return i}function NXe(e,t,o=5){if(!e.length||!t.length)return;let n=e.map(a=>a.slice(0,3)),i=o*o,s=e[0].length;for(let a=0;a<t.length;a++){let l=t[a];l.length<s?l=[l[0],l[1],l[2],255]:l.length>s?l=l.slice(0,3):l=l.slice();let c=Z0e(n,l.slice(0,3),y3),u=c[0],p=c[1];p>0&&p<=i&&(e[u]=l)}}function Vx(e){return e*e}function Q0e(e,t,o=y3){let n=1/0,i=-1;for(let s=0;s<e.length;s++){let a=e[s],l=o(t,a);l<n&&(n=l,i=s)}return i}function Z0e(e,t,o=y3){let n=1/0,i=-1;for(let s=0;s<e.length;s++){let a=e[s],l=o(t,a);l<n&&(n=l,i=s)}return[i,n]}function BXe(e,t,o=y3){return e[Q0e(e,t,o)]}function X0e(e={}){let{initialCapacity:t=4096,auto:o=!0}=e,n=j0e(t),i=5003,s=new Uint8Array(256),a=new Int32Array(i),l=new Int32Array(i),c=!1;return{reset(){n.reset(),c=!1},finish(){n.writeByte(vXe.trailer)},bytes(){return n.bytes()},bytesView(){return n.bytesView()},get buffer(){return n.buffer},get stream(){return n},writeHeader:u,writeFrame(p,m,g,y={}){let{transparent:b=!1,transparentIndex:v=0,delay:E=0,palette:A=null,repeat:C=0,colorDepth:I=8,dispose:N=-1}=y,_=!1;if(o?c||(_=!0,u(),c=!0):_=!!y.first,m=Math.max(0,Math.floor(m)),g=Math.max(0,Math.floor(g)),_){if(!A)throw new Error("First frame must include a { palette } option");_Xe(n,m,g,A,I),G0e(n,A),C>=0&&RXe(n,C)}let O=Math.round(E/10);PXe(n,N,O,b,v);let F=!!A&&!_;LXe(n,m,g,F?A:null),F&&G0e(n,A),OXe(n,p,m,g,I,s,a,l)}};function u(){J0e(n,"GIF89a")}}function PXe(e,t,o,n,i){e.writeByte(33),e.writeByte(249),e.writeByte(4),i<0&&(i=0,n=!1);var s,a;n?(s=1,a=2):(s=0,a=0),t>=0&&(a=t&7),a<<=2,e.writeByte(0|a|0|s),cg(e,o),e.writeByte(i||0),e.writeByte(0)}function _Xe(e,t,o,n,i=8){let l=vj(n.length)-1,c=128|i-1<<4|0|l,u=0,p=0;cg(e,t),cg(e,o),e.writeBytes([c,u,p])}function RXe(e,t){e.writeByte(33),e.writeByte(255),e.writeByte(11),J0e(e,"NETSCAPE2.0"),e.writeByte(3),e.writeByte(1),cg(e,t),e.writeByte(0)}function G0e(e,t){let o=1<<vj(t.length);for(let n=0;n<o;n++){let i=[0,0,0];n<t.length&&(i=t[n]),e.writeByte(i[0]),e.writeByte(i[1]),e.writeByte(i[2])}}function LXe(e,t,o,n){if(e.writeByte(44),cg(e,0),cg(e,0),cg(e,t),cg(e,o),n){let a=vj(n.length)-1;e.writeByte(128|a)}else e.writeByte(0)}function OXe(e,t,o,n,i=8,s,a,l){kXe(o,n,t,i,e,s,a,l)}function cg(e,t){e.writeByte(t&255),e.writeByte(t>>8&255)}function J0e(e,t){for(var o=0;o<t.length;o++)e.writeByte(t.charCodeAt(o))}function vj(e){return Math.max(Math.ceil(Math.log2(e)),1)}var FXe=X0e});function nge(e,t){let o=t?.fields?.find(i=>i.localName===e);return o?Object.values(o).find(i=>typeof i=="function")?.():void 0}function w3(e,t){let o=ne.getChannel(e);return!o||o.isPrivate()?!0:Kt.can(t,o)}function GXe(){return{find:"canUseCustomStickersEverywhere:",replacement:[{func:"canUseCustomStickersEverywhere",predicate:()=>Zn.store.enableStickerBypass},{func:"canUseHighVideoUploadQuality",predicate:()=>Zn.store.enableStreamQualityBypass},{func:"canStreamQuality",predicate:()=>Zn.store.enableStreamQualityBypass},{func:"canUseClientThemes"},{func:"canUsePremiumAppIcons"}].map(({func:t,predicate:o})=>({match:new RegExp(String.raw`(?<=${t}:)\i`),replace:"() => true",predicate:o}))}}var cv,V0e,S3,ey,ege,UXe,b3,wj,kj,v3,tge,Zn,$Xe,HXe,oge,zXe,k3,rge=x(()=>{"use strict";d();vu();Q();wt();$0e();H();mt();At();$();hr();fe();B();cv=Ml(T5()),V0e=He("readerFactory");S3=fr(()=>al.PreloadedUserSettingsActionCreators),ey=fr(()=>nge("appearance",S3.ProtoClass)),ege=fr(()=>nge("clientThemeSettings",ey)),UXe=vt(".getUserIsAdmin("),b3="[3,4].includes(fakeNitroIntention)",wj=/\/emojis\/(\d+?)\.(png|webp|gif)/,kj=/\/stickers\/(\d+?)\./,v3=/\/attachments\/\d+?\/\d+?\/(\d+?)\.gif/,tge=/\[.+?\]\((https?:\/\/.+?)\)/,Zn=R({enableEmojiBypass:{description:"Allows sending fake emojis (also bypasses missing permission to use custom emojis)",type:3,default:!0,restartNeeded:!0},emojiSize:{description:"Size of the emojis when sending",type:5,default:48,markers:[32,48,56,64,96,128,160,256,512]},transformEmojis:{description:"Whether to transform fake emojis into real ones",type:3,default:!0,restartNeeded:!0},enableStickerBypass:{description:"Allows sending fake stickers (also bypasses missing permission to use stickers)",type:3,default:!0,restartNeeded:!0},stickerSize:{description:"Size of the stickers when sending",type:5,default:160,markers:[32,64,128,160,256,512]},transformStickers:{description:"Whether to transform fake stickers into real ones",type:3,default:!0,restartNeeded:!0},transformCompoundSentence:{description:"Whether to transform fake stickers and emojis in compound sentences (sentences with more content than just the fake emoji or sticker link)",type:3,default:!1},enableStreamQualityBypass:{description:"Allow streaming in nitro quality",type:3,default:!0,restartNeeded:!0},useStickerHyperLinks:{description:"Whether to use hyperlinks when sending fake stickers",type:3,default:!0},useEmojiHyperLinks:{description:"Whether to use hyperlinks when sending fake emojis",type:3,default:!0},hyperLinkText:{description:"What text the hyperlink should use. {{NAME}} will be replaced with the emoji/sticker name.",type:0,default:"{{NAME}}"},disableEmbedPermissionCheck:{description:"Whether to disable the embed permission check when sending fake emojis and stickers",type:3,default:!1}});$Xe=e=>w3(e,Nt.USE_EXTERNAL_EMOJIS),HXe=e=>w3(e,Nt.USE_EXTERNAL_STICKERS),oge=e=>w3(e,Nt.EMBED_LINKS),zXe=e=>w3(e,Nt.ATTACH_FILES);k3=k({name:"FakeNitro",authors:[w.Arjix,w.D3SOX,w.Ven,w.fawn,w.captain,w.Nuckyz,w.AutumnVN,w.sadan],description:"Allows you to send fake emojis/stickers, use nitro themes, and stream in nitro quality",dependencies:["MessageEventsAPI"],settings:Zn,patches:[GXe(),{find:'.getByName("fork_and_knife")',predicate:()=>Zn.store.enableEmojiBypass,replacement:{match:".CHAT",replace:".STATUS"}},{find:".GUILD_SUBSCRIPTION_UNAVAILABLE;",group:!0,predicate:()=>Zn.store.enableEmojiBypass,replacement:[{match:/(?<=\.USE_EXTERNAL_EMOJIS.+?;)(?<=intention:(\i).+?)/,replace:(e,t)=>`const fakeNitroIntention=${t};`},{match:/&&!\i&&!\i(?=\)return \i\.\i\.DISALLOW_EXTERNAL;)/,replace:e=>`${e}&&!${b3}`},{match:/!\i\.available(?=\)return \i\.\i\.GUILD_SUBSCRIPTION_UNAVAILABLE;)/,replace:e=>`${e}&&!${b3}`},{match:/!(\i\.\i\.canUseEmojisEverywhere\(\i\))/,replace:e=>`(${e}&&!${b3})`},{match:/(?<=\|\|)\i\.\i\.canUseAnimatedEmojis\(\i\)/,replace:e=>`(${e}||${b3})`}]},{find:".getUserIsAdmin(",replacement:{match:/(function \i\(\i,\i)\){(.{0,250}.getUserIsAdmin\(.+?return!1})/,replace:(e,t,o)=>`${t},fakeNitroOriginal){if(!fakeNitroOriginal)return false;${o}`}},{find:'"SENDABLE"',predicate:()=>Zn.store.enableStickerBypass,replacement:{match:/\i\.available\?/,replace:"true?"}},{find:"#{intl::STREAM_FPS_OPTION}",predicate:()=>Zn.store.enableStreamQualityBypass,replacement:{match:/guildPremiumTier:\i\.\i\.TIER_\d,?/g,replace:""}},{find:'"UserSettingsProtoStore"',replacement:[{match:/function (\i)\((\i)\){(?=.*CONNECTION_OPEN:\1)/,replace:(e,t,o)=>`${e}$self.handleProtoChange(${o}.userSettingsProto,${o}.user);`},{match:/let{settings:/,replace:"arguments[0].local||$self.handleProtoChange(arguments[0].settings.proto);$&"}]},{find:",updateTheme(",replacement:{match:/(function \i\(\i\){let{backgroundGradientPresetId:(\i).+?)(\i\.\i\.updateAsync.+?theme=(.+?),.+?},\i\))/,replace:(e,t,o,n,i)=>`${t}$self.handleGradientThemeSelect(${o},${i},()=>${n});`}},{find:"customUserThemeSettings:{",all:!0,replacement:{match:/(?<=\i=)\(0,\i\.\i\)\(\i\.\i\.TIER_2\)(?=,|;)/g,replace:"true"}},{find:'["strong","em","u","text","inlineCode","s","spoiler"]',replacement:[{predicate:()=>Zn.store.transformEmojis,match:/1!==(\i)\.length\|\|1!==\i\.length/,replace:(e,t)=>`${e}||$self.shouldKeepEmojiLink(${t}[0])`},{predicate:()=>Zn.store.transformEmojis||Zn.store.transformStickers,match:/(?=return{hasSpoilerEmbeds:\i,hasBailedAst:\i,content:(\i))/,replace:(e,t)=>`${t}=$self.patchFakeNitroEmojisOrRemoveStickersLinks(${t},arguments[2]?.formatInline);`}]},{find:"}renderStickersAccessories(",replacement:[{predicate:()=>Zn.store.transformEmojis||Zn.store.transformStickers,match:/(renderEmbeds\((\i)\){)(.+?embeds\.map\(\((\i),\i\)?=>{)/,replace:(e,t,o,n,i)=>`${t}const fakeNitroMessage=${o};${n}if($self.shouldIgnoreEmbed(${i},fakeNitroMessage))return null;`},{predicate:()=>Zn.store.transformStickers,match:/renderStickersAccessories\((\i)\){let (\i)=\(0,\i\.\i\)\(\i\).+?;/,replace:(e,t,o)=>`${e}${o}=$self.patchFakeNitroStickers(${o},${t});`},{predicate:()=>Zn.store.transformStickers,match:/renderAttachments\(\i\){.+?{attachments:(\i).+?;/,replace:(e,t)=>`${e}${t}=$self.filterAttachments(${t});`}]},{find:"#{intl::STICKER_POPOUT_UNJOINED_PRIVATE_GUILD_DESCRIPTION}",predicate:()=>Zn.store.transformStickers,replacement:[{match:/let{renderableSticker:(\i).{0,270}sticker:\i,channel:\i,/,replace:(e,t)=>`${e}fakeNitroRenderableSticker:${t},`},{match:/(let \i,{sticker:\i,channel:\i,closePopout:\i.+?}=(\i).+?;)(.+?description:)(\i)(?=,sticker:\i)/,replace:(e,t,o,n,i)=>`${t}let{fakeNitroRenderableSticker}=${o};${n}$self.addFakeNotice(0,${i},!!fakeNitroRenderableSticker?.fake)`}]},{find:".EMOJI_UPSELL_POPOUT_MORE_EMOJIS_OPENED,",predicate:()=>Zn.store.transformEmojis,replacement:{match:/isDiscoverable:\i,shouldHideRoleSubscriptionCTA:\i,(?<={node:(\i),.+?)/,replace:(e,t)=>`${e}fakeNitroNode:${t},`}},{find:"#{intl::EMOJI_POPOUT_UNJOINED_DISCOVERABLE_GUILD_DESCRIPTION}",predicate:()=>Zn.store.transformEmojis,replacement:{match:/(?<=emojiDescription:)(\i)(?<=\1=\i\((\i)\).+?)/,replace:(e,t,o)=>`$self.addFakeNotice(1,${t},!!${o}?.fakeNitroNode?.fake)`}},{find:"getCurrentDesktopIcon(),",replacement:{match:/\i\.\i\.isPremium\(\i\.\i\.getCurrentUser\(\)\)/,replace:"true"}},{find:'type:"GUILD_SOUNDBOARD_SOUND_CREATE"',replacement:{match:/(?<=type:"(?:SOUNDBOARD_SOUNDS_RECEIVED|GUILD_SOUNDBOARD_SOUND_CREATE|GUILD_SOUNDBOARD_SOUND_UPDATE|GUILD_SOUNDBOARD_SOUNDS_UPDATE)".+?available:)\i\.available/g,replace:"true"}}],get guildId(){return bc()?.id},get canUseEmotes(){return(Ma.getState().premiumTypeActual??0)>0},get canUseStickers(){return(Ma.getState().premiumTypeActual??0)>1},handleProtoChange(e,t){try{if(e==null||typeof e=="string")return;if((Ma.getState().premiumTypeActual??0)!==2){e.appearance??=ey.create();let n=mw.settings.appearance,i=ey.create({...e.appearance,theme:n?.theme,clientThemeSettings:n?.clientThemeSettings});e.appearance=i}}catch(o){new ke("FakeNitro").error(o)}},handleGradientThemeSelect(e,t,o){if((Ma.getState().premiumTypeActual??0)===2||e==null)return o();if(!S3||!ey||!ege||!V0e)return;let i=S3.getCurrentValue().appearance,s=i!=null?ey.fromBinary(ey.toBinary(i),V0e):ey.create();s.theme=t;let a=ege.create({backgroundGradientPresetId:{value:e}});s.clientThemeSettings??=a,s.clientThemeSettings.backgroundGradientPresetId=a.backgroundGradientPresetId;let l=S3.ProtoClass.create();l.appearance=s,V.dispatch({type:"USER_SETTINGS_PROTO_UPDATE",local:!0,partial:!0,settings:{type:1,proto:l}})},trimContent(e){let t=e[0];typeof t=="string"?(e[0]=t.trimStart(),e[0]||e.shift()):typeof t?.props?.children=="string"&&(t.props.children=t.props.children.trimStart(),t.props.children||e.shift());let o=e.length-1,n=e[o];typeof n=="string"?(e[o]=n.trimEnd(),e[o]||e.pop()):typeof n?.props?.children=="string"&&(n.props.children=n.props.children.trimEnd(),n.props.children||e.pop())},clearEmptyArrayItems(e){return e.filter(t=>t!=null)},ensureChildrenIsArray(e){Array.isArray(e.props.children)||(e.props.children=[e.props.children])},patchFakeNitroEmojisOrRemoveStickersLinks(e,t){if((e.length>1||typeof e[0]?.type=="string")&&!Zn.store.transformCompoundSentence)return e;let o=e.length,n=l=>{if(Zn.store.transformEmojis){let c=l.props.href.match(wj);if(c){let u=null;try{u=new URL(l.props.href)}catch{}let p=Hi.getCustomEmojiById(c[1])?.name??u?.searchParams.get("name")??"FakeNitroEmoji",m=c[2]==="gif"||u?.searchParams.get("animated")==="true";return Jt.defaultRules.customEmoji.react({jumboable:!t&&e.length===1&&typeof e[0].type!="string",animated:m,emojiId:c[1],name:p,fake:!0},void 0,{key:String(o++)})}}if(Zn.store.transformStickers){if(kj.test(l.props.href))return null;let c=l.props.href.match(v3);if(c&&Xs.getStickerById(c[1]))return null}return l},i=l=>l?.props?.trusted!=null?n(l):l?.props?.children!=null?Array.isArray(l.props.children)?(l.props.children=a(l.props.children),l.props.children.length===0?null:l):(l.props.children=s(l.props.children),l):l,s=l=>{let c=i(l);if(c?.type==="ul"||c?.type==="ol"){if(this.ensureChildrenIsArray(c),c.props.children.length===0)return null;let u=!1;for(let[p,m]of c.props.children.entries()){if(m==null){delete c.props.children[p];continue}this.ensureChildrenIsArray(m),m.props.children.length>0?u=!0:delete c.props.children[p]}if(!u)return null;c.props.children=this.clearEmptyArrayItems(c.props.children)}return c},a=l=>{for(let[c,u]of l.entries())l[c]=s(u);return l=this.clearEmptyArrayItems(l),l};try{let l=a(hu.cloneDeep(e));return this.trimContent(l),l}catch(l){return new ke("FakeNitro").error(l),e}},patchFakeNitroStickers(e,t){let o=[],n=t.content.split(/\s/);Zn.store.transformCompoundSentence?o.push(...n):n.length===1&&o.push(n[0]),o.push(...t.attachments.filter(i=>i.content_type==="image/gif").map(i=>i.url));for(let i of o){if(!Zn.store.transformCompoundSentence&&!i.startsWith("http")&&!tge.test(i))continue;let s=i.match(kj);if(s){let l=null;try{l=new URL(i)}catch{}let c=Xs.getStickerById(s[1])?.name??l?.searchParams.get("name")??"FakeNitroSticker";e.push({format_type:1,id:s[1],name:c,fake:!0});continue}let a=i.match(v3);if(a){if(!Xs.getStickerById(a[1]))continue;let l=Xs.getStickerById(a[1])?.name??"FakeNitroSticker";e.push({format_type:2,id:a[1],name:l,fake:!0})}}return e},shouldIgnoreEmbed(e,t){try{let o=t.content.split(/\s/);if(o.length>1&&!Zn.store.transformCompoundSentence)return!1;switch(e.type){case"image":{let n=e.url??e.image?.url;if(!n||!Zn.store.transformCompoundSentence&&!o.some(i=>i===n||i.match(tge)?.[1]===n))return!1;if(Zn.store.transformEmojis&&wj.test(n))return!0;if(Zn.store.transformStickers){if(kj.test(n))return!0;let i=n.match(v3);if(i&&Xs.getStickerById(i[1]))return!0}break}}}catch(o){new ke("FakeNitro").error("Error in shouldIgnoreEmbed:",o)}return!1},filterAttachments(e){return e.filter(t=>{if(t.content_type!=="image/gif")return!0;let o=t.url.match(v3);return!(o&&Xs.getStickerById(o[1]))})},shouldKeepEmojiLink(e){return e.target&&wj.test(e.target)},addFakeNotice(e,t,o){if(!o)return t;switch(t=Array.isArray(t)?t:[t],e){case 0:return t.push(" This is a FakeNitro sticker and renders like a real sticker only for you. Appears as a link to non-plugin users."),t;case 1:return t.push(" This is a FakeNitro emoji and renders like a real emoji only for you. Appears as a link to non-plugin users."),t}},getStickerLink({format_type:e,id:t}){let o=e===4?"gif":"png";return`https://media.discordapp.net/stickers/${t}.${o}?size=${Zn.store.stickerSize}`},async sendAnimatedSticker(e,t,o){let{frames:n,width:i,height:s}=await fetch(e).then(y=>y.arrayBuffer()).then(U0e),a=(0,cv.GIFEncoder)(),l=Zn.store.stickerSize,c=document.createElement("canvas");c.width=l,c.height=l;let u=c.getContext("2d",{willReadFrequently:!0}),p=l/Math.max(i,s);u.scale(p,p);let m;for(let y of n){let{left:b,top:v,width:E,height:A,img:C,delay:I,blendOp:N,disposeOp:_}=y;m=u.getImageData(b,v,E,A),N===0&&u.clearRect(b,v,E,A),u.drawImage(C,b,v,E,A);let{data:O}=u.getImageData(0,0,l,l),F=(0,cv.quantize)(O,256),J=(0,cv.applyPalette)(O,F);a.writeFrame(J,l,l,{transparent:!0,palette:F,delay:I}),_===1?u.clearRect(b,v,E,A):_===2&&u.putImageData(m,b,v)}a.finish();let g=new File([a.bytesView()],`${t}.gif`,{type:"image/gif"});ls.promptToUpload([g],ne.getChannel(o),sn.ChannelMessage)},canUseEmote(e,t){if(e.type===0)return!0;if(e.available===!1||UXe(e,this.guildId,!0))return!1;let o=!1;if(e.managed&&e.guildId){let n=Lt.getSelfMember(e.guildId)?.roles??[];o=e.roles.some(i=>n.includes(i))}return this.canUseEmotes||o?e.guildId===this.guildId||$Xe(t):!e.animated&&e.guildId===this.guildId},start(){let e=Zn.store;if(!e.enableEmojiBypass&&!e.enableStickerBypass)return;function t(n,i){return!n[i]||/\s/.test(n[i])?"":" "}function o(){return new Promise(n=>{go.show({title:"Hold on!",body:r("div",null,r(W,null,"You are trying to send/edit a message that contains a FakeNitro emoji or sticker, however you do not have permissions to embed links in the current channel. Are you sure you want to send this message? Your FakeNitro items will appear as a link only."),r(W,null,"You can disable this notice in the plugin settings.")),confirmText:"Send Anyway",cancelText:"Cancel",secondaryConfirmText:"Do not show again",onConfirm:()=>n(!0),onCloseCallback:()=>setImmediate(()=>n(!1)),onConfirmSecondary(){Zn.store.disableEmbedPermissionCheck=!0,n(!0)}})})}this.preSend=qi(async(n,i,s)=>{let{guildId:a}=this,l=!1;e:{if(!e.enableStickerBypass)break e;let c=Xs.getStickerById(s.stickers?.[0]);if(!c||"pack_id"in c)break e;let u=this.canUseStickers&&HXe(n);if(c.available!==!1&&(u||c.guild_id===a))break e;let p=this.getStickerLink(c);if(c.format_type===2)return zXe(n)?this.sendAnimatedSticker(p,c.id,n):go.show({title:"Hold on!",body:r("div",null,r(W,null,"You cannot send this message because it contains an animated FakeNitro sticker, and you do not have permissions to attach files in the current channel. Please remove the sticker to proceed."))}),{cancel:!0};{l=!0;let m=new URL(p);m.searchParams.set("name",c.name),m.searchParams.set("lossless","true");let g=e.hyperLinkText.replaceAll("{{NAME}}",c.name);i.content+=`${t(i.content,i.content.length-1)}${e.useStickerHyperLinks?`[${g}](${m})`:m}`,s.stickers.length=0}}if(e.enableEmojiBypass)for(let c of i.validNonShortcutEmojis){if(this.canUseEmote(c,n))continue;l=!0;let u=`<${c.animated?"a":""}:${c.originalName||c.name}:${c.id}>`,p=new URL(To.getEmojiURL({id:c.id,animated:c.animated,size:e.emojiSize}));p.searchParams.set("size",e.emojiSize.toString()),p.searchParams.set("name",c.name),p.searchParams.set("lossless","true"),c.animated&&(p.pathname=p.pathname.replace(".webp",".gif"));let m=e.hyperLinkText.replaceAll("{{NAME}}",c.name);i.content=i.content.replace(u,(g,y,b)=>`${t(b,y-1)}${e.useEmojiHyperLinks?`[${m}](${p})`:p}${t(b,y+g.length)}`)}return l&&!e.disableEmbedPermissionCheck&&!oge(n)&&!await o()?{cancel:!0}:{cancel:!1}}),this.preEdit=Fh(async(n,i,s)=>{if(!e.enableEmojiBypass)return;let a=!1;return s.content=s.content.replace(/(?<!\\)<a?:(?:\w+):(\d+)>/ig,(l,c,u,p)=>{let m=Hi.getCustomEmojiById(c);if(m==null||this.canUseEmote(m,n))return l;a=!0;let g=new URL(To.getEmojiURL({id:m.id,animated:m.animated,size:e.emojiSize}));g.searchParams.set("size",e.emojiSize.toString()),g.searchParams.set("name",m.name),g.searchParams.set("lossless","true");let y=e.hyperLinkText.replaceAll("{{NAME}}",m.name);return`${t(p,u-1)}${e.useEmojiHyperLinks?`[${y}](${g})`:g}${t(p,u+l.length)}`}),a&&!e.disableEmbedPermissionCheck&&!oge(n)&&!await o()?{cancel:!0}:{cancel:!1}})},stop(){ji(this.preSend),Uh(this.preEdit)}})});var ige=x(()=>{});function qXe(...e){let t={};function o(i){for(let s=e.length-1;s>=0;s--)if(i in e[s])return e[s];return t}let n={ownKeys(){return e.reduce((i,s)=>(i.push(...Reflect.ownKeys(s)),i),Reflect.ownKeys(t))}};for(let i of["defineProperty","deleteProperty","get","getOwnPropertyDescriptor","has","set"])n[i]=function(s,...a){return Reflect[i](o(a[0]),...a)};return new Proxy(t,n)}var sge,age=x(()=>{d();sge=qXe});function cge(e,t){let o=`[#${e.toString(16).padStart(6,"0")},#${t.toString(16).padStart(6,"0")}]`,n="",i=Array.from(o).map(s=>s.codePointAt(0)).filter(s=>s>=32&&s<=127).map(s=>String.fromCodePoint(s+917504)).join("");return(n||"")+" "+i}function uge(e){if(e==null)return null;let t=e.match(/\u{e005b}\u{e0023}([\u{e0061}-\u{e0066}\u{e0041}-\u{e0046}\u{e0030}-\u{e0039}]{1,6})\u{e002c}\u{e0023}([\u{e0061}-\u{e0066}\u{e0041}-\u{e0046}\u{e0030}-\u{e0039}]{1,6})\u{e005d}/u);if(t!=null){let o=[...t[0]].map(i=>String.fromCodePoint(i.codePointAt(0)-917504)).join("");return o.substring(1,o.length-1).split(",").map(i=>parseInt(i.replace("#","0x"),16))}else return null}function WXe(){let[,,e]=Cr(()=>dp(z.getCurrentUser().id));return!e&&r(KXe,null)}function KXe(){let e=uge(gr.getUserProfile(z.getCurrentUser().id)?.bio??"")??[0,0],[t,o]=L(e[0]),[n,i]=L(e[1]);return r("section",null,r(so,null,"Usage"),r(W,null,"After enabling this plugin, you will see custom colors in the profiles of other people using compatible plugins."," "),r(W,{className:Z.top8},r("strong",null,"To set your own profile theme colors:"),r("ul",null,r("li",null,"\u2014 use the color pickers below to choose your colors"),r("li",null,'\u2014 click the "Copy 3y3" button'),r("li",null,"\u2014 paste the invisible text anywhere in your bio")),r(Bt,{className:me(Z.top8,Z.bottom8)}),r(er.FormTitle,{tag:"h3"},"Color pickers"),r(Be,{gap:"1em"},r(si,{color:t,label:r(Y,{size:"xs",style:{marginTop:"4px"}},"Primary"),onChange:s=>{o(s)}}),r(si,{color:n,label:r(Y,{size:"xs",style:{marginTop:"4px"}},"Accent"),onChange:s=>{i(s)}}),r(U,{onClick:()=>{let s=cge(t,n);$t(s)},color:U.Colors.PRIMARY,size:U.Sizes.XLARGE,style:{marginBottom:"auto"}},"Copy 3y3")),r(Bt,{className:me(Z.top8,Z.bottom8)}),r(so,null,"Preview"),r("div",{className:"vc-fpt-preview"},r(jXe,{user:z.getCurrentUser(),pendingThemeColors:[t,n],onAvatarChange:()=>{},onBannerChange:()=>{},canUsePremiumCustomization:!0,hideExampleButton:!0,hideFakeActivity:!0,isTryItOut:!0}))))}var lge,jXe,E3,dge=x(()=>{"use strict";d();ige();Q();Et();Ar();tt();eo();ut();wt();H();mt();co();xt();qo();$();fe();B();age();lge=R({nitroFirst:{description:"Default color source if both are present",type:4,options:[{label:"Nitro colors",value:!0,default:!0},{label:"Fake colors",value:!1}]}}),jXe=De("isTryItOut:","pendingThemeColors:","pendingAvatarDecoration:","EDIT_PROFILE_BANNER");E3=k({name:"FakeProfileThemes",description:"Allows profile theming by hiding the colors in your bio thanks to invisible 3y3 encoding",authors:[w.Alyxia,w.Remty],patches:[{find:"UserProfileStore",replacement:{match:/(?<=getUserProfile\(\i\){return )(.+?)(?=})/,replace:"$self.colorDecodeHook($1)"}},{find:"#{intl::USER_SETTINGS_RESET_PROFILE_THEME}",replacement:{match:/#{intl::USER_SETTINGS_RESET_PROFILE_THEME}\).+?}\)(?=\])(?<=color:(\i),.{0,500}?color:(\i),.{0,500}?)/,replace:"$&,$self.addCopy3y3Button({primary:$1,accent:$2})"}}],settingsAboutComponent:WXe,settings:lge,colorDecodeHook(e){if(e?.bio){if(lge.store.nitroFirst&&e.themeColors)return e;let t=uge(e.bio);if(t)return sge(e,{premiumType:2,themeColors:t})}return e},addCopy3y3Button:ee.wrap(function({primary:e,accent:t}){return r(U,{onClick:()=>{let o=cge(e,t);$t(o)},color:U.Colors.PRIMARY,size:U.Sizes.XLARGE,className:Z.left16},"Copy 3y3")},{noop:!0})})});var A3,pge=x(()=>{"use strict";d();H();$();B();A3=k({name:"FavoriteEmojiFirst",authors:[w.Aria,w.Ven],description:"Puts your favorite emoji first in the emoji autocomplete.",patches:[{find:"renderResults({results:",replacement:[{match:/let \i=.{1,100}renderResults\({results:(\i)\.query\.results,/,replace:"$self.sortEmojis($1);$&"}]},{find:"numEmojiResults:",replacement:[{match:/,maxCount:(\i)(.{1,500}\i)=(\i)\.slice\(0,(Math\.max\(\i,\i(?:-\i\.length){2}\))\)/,replace:",maxCount:Infinity$2=($3.sliceTo = $4, $3)"}]}],sortEmojis({query:e}){if(e?.type!=="EMOJIS_AND_STICKERS"||e.typeInfo?.sentinel!==":"||!e.results?.emojis?.length)return;let t=Hi.getDisambiguatedEmojiContext();e.results.emojis=e.results.emojis.sort((o,n)=>{let i=t.isFavoriteEmojiWithoutFetchingLatest(o),s=t.isFavoriteEmojiWithoutFetchingLatest(n);return i&&!s?-1:!i&&s?1:0}).slice(0,e.results.emojis.sliceTo??1/0)}})});function YXe({instance:e,SearchBarComponent:t}){let[o,n]=L(""),i=kt(null),s=gn(a=>{n(a);let{props:l}=e;if(a===""){l.favorites=l.favCopy,e.forceUpdate();return}i.current?.closest("#gif-picker-tab-panel")?.querySelector('[class*="scrollerBase"]')?.scrollTo(0,0);let c=l.favCopy.map(u=>({score:QXe(a.toLowerCase(),fge(u.url??u.src).replace(/(%20|[_-])/g," ").toLowerCase()),gif:u})).filter(u=>u.score!=null);c.sort((u,p)=>p.score-u.score),l.favorites=c.map(u=>u.gif),e.forceUpdate()},[e.state]);return se(()=>()=>{e.dead=!0},[]),r(t,{ref:i,autoFocus:!0,size:"md",className:"",onChange:s,onClear:()=>{n(""),e.props.favCopy!=null&&(e.props.favorites=e.props.favCopy,e.forceUpdate())},query:o,placeholder:"Search Favorite Gifs"})}function fge(e){let t;try{t=new URL(e)}catch{return e}switch(mge.store.searchOption){case"url":return t.href;case"path":return t.host==="media.discordapp.net"||t.host==="tenor.com"?t.pathname.split("/").at(-1)??t.pathname:t.pathname;case"hostandpath":return t.host==="media.discordapp.net"||t.host==="tenor.com"?`${t.host} ${t.pathname.split("/").at(-1)??t.pathname}`:`${t.host} ${t.pathname}`;default:return""}}function QXe(e,t){let o=0,n=0;for(let i=0;i<t.length;i++)if(t[i]===e[o]?(n++,o++):n--,o===e.length)return n;return null}var mge,C3,gge=x(()=>{"use strict";d();Q();tt();H();$();B();mge=R({searchOption:{type:4,description:"The part of the url you want to search",options:[{label:"Entire Url",value:"url"},{label:"Path Only (/somegif.gif)",value:"path"},{label:"Host & Path (tenor.com somgif.gif)",value:"hostandpath",default:!0}]}}),C3=k({name:"FavoriteGifSearch",authors:[w.Aria],description:"Adds a search bar to favorite gifs.",patches:[{find:"renderHeaderContent()",replacement:[{match:/(renderHeaderContent\(\).{1,150}FAVORITES:return)(.{1,150});(case.{1,200}default:.{0,50}?return\(0,\i\.jsx\)\((?<searchComp>\i\..{1,10}),)/,replace:"$1 this.state.resultType === 'Favorites' ? $self.renderSearchBar(this, $<searchComp>) : $2;$3"},{match:/(,suggestions:\i,favorites:)(\i),/,replace:"$1$self.getFav($2),favCopy:$2,"}]}],settings:mge,getTargetString:fge,instance:null,renderSearchBar(e,t){return this.instance=e,r(ee,{noop:!0},r(YXe,{instance:e,SearchBarComponent:t}))},getFav(e){if(!this.instance||this.instance.dead)return e;let{favorites:t}=this.instance.props;return t!=null&&t?.length!==e.length?t:e}})});var T3,hge=x(()=>{"use strict";d();H();$();T3=k({name:"FixCodeblockGap",description:"Removes the gap between codeblocks and text below it",authors:[w.Grzesiek11],patches:[{find:String.raw`/^${"```"}(?:([a-z0-9_+\-.#]+?)\n)?\n*([^\n][^]*?)\n*${"```"}`,replacement:{match:String.raw`/^${"```"}(?:([a-z0-9_+\-.#]+?)\n)?\n*([^\n][^]*?)\n*${"```"}`,replace:"$&\\n?"}}]})});var xge,I3,yge=x(()=>{"use strict";d();Q();fs();eo();w0();wt();H();At();$();xge=R({originalImagesInChat:{type:3,description:"Also load the original image in Chat. WARNING: Read the caveats above",default:!1}}),I3=k({name:"FixImagesQuality",description:"Improves quality of images by loading them at their original resolution",authors:[w.Nuckyz,w.Ven],settings:xge,patches:[{find:".handleImageLoad)",replacement:{match:/getSrc\(\i\)\{/,replace:"$&var _vcSrc=$self.getSrc(this.props,arguments[1]);if(_vcSrc)return _vcSrc;"}}],settingsAboutComponent(){return r(cn,{variant:"primary"},r(Be,{flexDirection:"column",gap:"4px"},r(W,{size:"md",weight:"semibold"},"The default behaviour is the following:"),r(W,null,r("ul",null,r("li",null,"\u2014 In chat, optimised but full resolution images will be loaded."),r("li",null,"\u2014 In the image modal, the original image will be loaded."))),r(W,{size:"md",weight:"semibold",className:Z.top8},"You can also enable original image in chat, but beware of the following caveats:"),r(W,null,r("ul",null,r("li",null,"\u2014 Animated images (GIF, WebP, etc.) in chat will always animate, regardless of if the App is focused."),r("li",null,"\u2014 May cause lag.")))))},getSrc(e,t){if(e?.src)try{let{contentType:o,height:n,src:i,width:s,mosaicStyleAlt:a,trigger:l}=e;if(!(o?.startsWith("image/")??typeof a=="boolean")||i.startsWith("data:"))return;let u=new URL(i);if(!u.pathname.startsWith("/attachments/"))return;u.searchParams.set("animated",String(!t)),t&&u.pathname.endsWith(".gif")&&u.searchParams.set("format","webp");let p=!!l;if(!xge.store.originalImagesInChat&&!p){let m=s*n,g=2e3*1200;if(m<=g)return u.toString();let y=Math.sqrt(m/g);return u.searchParams.set("width",Math.round(s/y).toString()),u.searchParams.set("height",Math.round(n/y).toString()),u.toString()}return u.hostname="cdn.discordapp.com",u.toString()}catch(o){new ke("FixImagesQuality").error("Failed to make image src",o);return}}})});var D3,bge=x(()=>{"use strict";d();H();$();B();D3=k({name:"ForceOwnerCrown",description:"Force the owner crown next to usernames even if the server is large.",authors:[w.D3SOX,w.Nickyux],patches:[{find:"#{intl::GUILD_OWNER}),children:",replacement:{match:/(?<=decorators:.{0,200}?isOwner:)\i/,replace:"$self.isGuildOwner(arguments[0])"}}],isGuildOwner(e){if(!e?.user?.id||e.channel?.type===3)return e.isOwner;let t=e.guildId??e.channel?.guild_id,o=e.user.id;return ct.getGuild(t)?.ownerId===o}})});var Ej,M3,vge=x(()=>{"use strict";d();yi();H();$();fe();Ej=He("createFriendInvite"),M3=k({name:"FriendInvites",description:"Create and manage friend invite links via slash commands (/create friend invite, /view friend invites, /revoke friend invites).",authors:[w.afn,w.Dziurwa],commands:[{name:"create friend invite",description:"Generates a friend invite link.",inputType:0,execute:async(e,t)=>{let o=await Ej.createFriendInvite();Vt(t.channel.id,{content:`
                        discord.gg/${o.code} \xB7
                        Expires: <t:${new Date(o.expires_at).getTime()/1e3}:R> \xB7
                        Max uses: \`${o.max_uses}\`
                    `.trim().replace(/\s+/g," ")})}},{name:"view friend invites",description:"View a list of all generated friend invites.",inputType:0,execute:async(e,t)=>{let n=(await Ej.getAllFriendInvites()).map(i=>`
                    _discord.gg/${i.code}_ \xB7
                    Expires: <t:${new Date(i.expires_at).getTime()/1e3}:R> \xB7
                    Times used: \`${i.uses}/${i.max_uses}\`
                    `.trim().replace(/\s+/g," "));Vt(t.channel.id,{content:n.join(`
`)||"You have no active friend invites!"})}},{name:"revoke friend invites",description:"Revokes all generated friend invites.",inputType:0,execute:async(e,t)=>{await Ej.revokeFriendInvites(),Vt(t.channel.id,{content:"All friend invites have been revoked."})}}]})});var Sge=x(()=>{});var ZXe,XXe,wge,kge,Ege,N3,Age=x(()=>{"use strict";d();Sge();Et();tt();H();mt();$();fe();B();ZXe=et("memberSinceWrapper"),XXe=et("memberSince"),wge=vt('month:"short",day:"numeric"'),kge=He("getLocale"),Ege=De("headingVariant:",'"section"',"headingIcon:"),N3=k({name:"FriendsSince",description:"Shows when you became friends with someone in the user popout",authors:[w.Elvyra,w.Antti],patches:[{find:".SIDEBAR}),nicknameIcons",replacement:{match:/#{intl::USER_PROFILE_MEMBER_SINCE}\),.{0,100}userId:(\i\.id)}\)}\)/,replace:"$&,$self.FriendsSinceComponent({userId:$1,isSidebar:true})"}},{find:",applicationRoleConnection:",replacement:{match:/#{intl::USER_PROFILE_MEMBER_SINCE}\),.{0,100}userId:(\i\.id),.{0,100}}\)}\),/,replace:"$&,$self.FriendsSinceComponent({userId:$1,isSidebar:false}),"}},{find:".MODAL_V2,onClose:",replacement:{match:/#{intl::USER_PROFILE_MEMBER_SINCE}\),.{0,100}userId:(\i\.id),.{0,100}}\)}\),/,replace:"$&,$self.FriendsSinceComponent({userId:$1,isSidebar:false}),"}}],FriendsSinceComponent:ee.wrap(({userId:e,isSidebar:t})=>{if(!Tt.isFriend(e))return null;let o=Tt.getSince(e);return o?t?r(Ege,{heading:"Friends Since",headingVariant:"text-xs/semibold",headingColor:"text-strong"},r(Y,{size:"sm"},wge(o,kge.getLocale()))):r(Ege,{heading:"Friends Since",headingVariant:"text-xs/medium",headingColor:"text-default",className:"vc-friendsSince-profile-section"},r("div",{className:ZXe.memberSinceWrapper},r("div",{className:XXe.memberSince},!!Cn()?.guild_id&&r("svg",{"aria-hidden":"true",width:"16",height:"16",viewBox:"0 0 24 24",fill:"var(--interactive-icon-default)"},r("path",{d:"M13 10a4 4 0 1 0 0-8 4 4 0 0 0 0 8Z"}),r("path",{d:"M3 5v-.75C3 3.56 3.56 3 4.25 3s1.24.56 1.33 1.25C6.12 8.65 9.46 12 13 12h1a8 8 0 0 1 8 8 2 2 0 0 1-2 2 .21.21 0 0 1-.2-.15 7.65 7.65 0 0 0-1.32-2.3c-.15-.2-.42-.06-.39.17l.25 2c.02.15-.1.28-.25.28H9a2 2 0 0 1-2-2v-2.22c0-1.57-.67-3.05-1.53-4.37A15.85 15.85 0 0 1 3 5Z"})),r(Y,{size:"sm"},wge(o,kge.getLocale()))))):null},{noop:!0})})});function VXe({message:e,channel:t,onHeightUpdate:o}){let n=e.author&&!(e.author.id===z.getCurrentUser().id||e.author.system);return JXe({navId:"message-actions",ariaLabel:St("MESSAGE_UTILITIES_A11Y_LABEL"),message:e,channel:t,canReport:n,onHeightUpdate:o,onClose:()=>Dt.closeContextMenu(),textSelection:"",favoriteableType:null,favoriteableId:null,favoriteableName:null,itemHref:void 0,itemSrc:void 0,itemSafeSrc:void 0,itemTextContent:void 0,isFullSearchContextMenu:!0})}var JXe,Cge,eJe,B3,Tge=x(()=>{"use strict";d();Un();Q();H();mt();qo();$();fe();B();JXe=vt(".MESSAGE,commandTargetId:"),Cge=xO;Ln(ot.componentByCode('"cannot copy null text"'),e=>Cge=e);eJe=(e,t)=>{if(t?.isFullSearchContextMenu==null)return;Qt("devmode-copy-id",e,!0)?.push(Cge({id:t.message.author.id,label:St("COPY_ID_AUTHOR")}))};jn("FullSearchContext","SearchReply");B3=k({name:"FullSearchContext",description:"Makes the message context menu in message search results have all options you'd expect",authors:[w.Ven,w.Aria],patches:[{find:"onClick:this.handleMessageClick,",replacement:{match:/this(?=\.handleContextMenu\(\i,\i\))/,replace:"$self"}}],handleContextMenu(e,t){let o=ne.getChannel(t.channel_id);o&&(e.stopPropagation(),Dt.openContextMenu(e,n=>r(VXe,{message:t,channel:o,onHeightUpdate:n.onHeightUpdate})))},contextMenus:{"message-actions":eJe}})});var tJe,P3,Ige=x(()=>{"use strict";d();tt();H();$();fe();B();tJe=De(".USER_MENTION)"),P3=k({name:"FullUserInChatbox",description:"Makes the user mention in the chatbox have more functionalities, like left/right clicking",authors:[w.sadan],patches:[{find:'"text":"locked"',replacement:{match:/(hidePersonalInformation\).+?)(if\(null!=\i\){.+?return \i)(?=})/,replace:"$1return $self.UserMentionComponent({...arguments[0],originalComponent:()=>{$2}});"}}],UserMentionComponent:ee.wrap(e=>Je([z],()=>z.getUser(e.id))==null?e.originalComponent():r(tJe,{className:"mention",userId:e.id,channelId:e.channelId}),{fallback:({wrappedProps:{originalComponent:e}})=>e()})})});var Dge=x(()=>{});function Mge({className:e}){let{oldIcon:t}=_3.use(["oldIcon"]),o=I5.useSetting();return r("svg",{className:e,width:"20",height:"20",viewBox:"0 0 24 24"},r("path",{fill:!o&&!t?"var(--status-danger)":"currentColor",mask:o?void 0:"url(#gameActivityMask)",d:"M3.06 20.4q-1.53 0-2.37-1.065T.06 16.74l1.26-9q.27-1.8 1.605-2.97T6.06 3.6h11.88q1.8 0 3.135 1.17t1.605 2.97l1.26 9q.21 1.53-.63 2.595T20.94 20.4q-.63 0-1.17-.225T18.78 19.5l-2.7-2.7H7.92l-2.7 2.7q-.45.45-.99.675t-1.17.225Zm14.94-7.2q.51 0 .855-.345T19.2 12q0-.51-.345-.855T18 10.8q-.51 0-.855.345T16.8 12q0 .51.345 .855T18 13.2Zm-2.4-3.6q.51 0 .855-.345T16.8 8.4q0-.51-.345-.855T15.6 7.2q-.51 0-.855.345T14.4 8.4q0 .51.345 .855T15.6 9.6ZM6.9 13.2h1.8v-2.1h2.1v-1.8h-2.1v-2.1h-1.8v2.1h-2.1v1.8h2.1v2.1Z"}),!o&&r(f,null,r("path",{fill:"var(--status-danger)",d:t?"M23 2.27 21.73 1 1 21.73 2.27 23 23 2.27Z":"M22.7 2.7a1 1 0 0 0-1.4-1.4l-20 20a1 1 0 1 0 1.4 1.4Z"}),r("mask",{id:"gameActivityMask"},r("rect",{fill:"white",x:"0",y:"0",width:"24",height:"24"}),r("path",{fill:"black",d:t?"M23.27 4.54 19.46.73 .73 19.46 4.54 23.27 23.27 4.54Z":"M23.27 4.73 19.27 .73 -.27 20.27 3.73 24.27Z"}))))}function oJe({iconForeground:e,hideTooltips:t,nameplate:o}){let{location:n}=_3.use(["location"]),i=I5.useSetting();return n!=="PANEL"&&yt(Lu.name)?null:r(zm,{tooltipText:t?void 0:i?"Disable Game Activity":"Enable Game Activity",icon:r(Mge,{className:e}),role:"switch","aria-checked":!i,redGlow:!i,plated:o!=null,onClick:()=>I5.updateSetting(s=>!s)})}var I5,_3,R3,Nge=x(()=>{"use strict";d();Dge();Wo();Q();Gh();Ra();Vb();H();$();B();I5=nr("status","showCurrentGame"),_3=R({oldIcon:{type:3,description:"Use the old icon style before Discord icon redesign",default:!1},location:{type:4,description:"Where to show the game activity toggle button",options:[{label:"Next to Mute/Deafen",value:"PANEL",default:!0},{label:"Equicord Toolbox",value:"TOOLBOX"}],get hidden(){return!yt(Lu.name)}}});R3=k({name:"GameActivityToggle",description:"Adds a button next to the mic and deafen button to toggle game activity.",authors:[w.Nuckyz,w.RuukuLada],dependencies:["UserSettingsAPI"],settings:_3,userAreaButton:{icon:Mge,render:oJe},toolboxActions(){let{location:e}=_3.use(["location"]),t=I5.useSetting();return e!=="TOOLBOX"?null:r(M.MenuCheckboxItem,{id:"game-activity-toggle-toolbox",label:"Enable Game Activity",checked:t,action:()=>I5.updateSetting(o=>!o)})}})});var L3,Bge=x(()=>{"use strict";d();Wo();Aq();H();mt();$();B();L3=k({name:"GifPaste",description:"Makes picking a gif in the gif picker insert a link into the chatbox instead of instantly sending it",authors:[w.Ven],patches:[{find:"handleSelectGIF=",replacement:{match:/handleSelectGIF=(\i)=>\{/,replace:"$&if (!this.props.className) return $self.handleSelect($1);"}}],handleSelect(e){e&&(xu(e.url+" "),yt(jx.name)&&jx.settings.store.keepOpen||hw.closeExpressionPicker())}})});function _ge(e,t,o){let n=Fn.getSendMessageOptionsForReply({channel:e,message:t,shouldMention:!0,showMentionToggle:!0});if(O3.store.greetMode==="Message"||o.length>1){n.stickerIds=o;let i={content:"",tts:!1,invalidEmojis:[],validNonShortcutEmojis:[]};Fn._sendMessage(e.id,i,n)}else Fn.sendGreetMessage(e.id,o[0],n)}function nJe({channel:e,message:t}){let o=O3.use(["greetMode","multiGreetChoices"]),{greetMode:n,multiGreetChoices:i=[]}=o;return r(M.Menu,{navId:"greet-sticker-picker",onClose:()=>V.dispatch({type:"CONTEXT_MENU_CLOSE"}),"aria-label":"Greet Sticker Picker"},r(M.MenuGroup,{label:"Greet Mode"},Object.values(Rge).map(s=>r(M.MenuRadioItem,{key:s,group:"greet-mode",id:"greet-mode-"+s,label:s,checked:s===n,action:()=>o.greetMode=s}))),r(M.MenuSeparator,null),r(M.MenuGroup,{label:"Greet Stickers"},Pge.map(s=>r(M.MenuItem,{key:s.id,id:"greet-"+s.id,label:s.description.split(" ")[0],action:()=>_ge(e,t,[s.id])}))),O3.store.unholyMultiGreetEnabled?r(f,null,r(M.MenuSeparator,null),r(M.MenuItem,{label:"Unholy Multi-Greet",id:"unholy-multi-greet"},Pge.map(s=>{let a=i.some(l=>l===s.id);return r(M.MenuCheckboxItem,{key:s.id,id:"multi-greet-"+s.id,label:s.description.split(" ")[0],checked:a,disabled:!a&&i.length>=3,action:()=>{o.multiGreetChoices=a?i.filter(l=>l!==s.id):[...i,s.id]}})}),r(M.MenuSeparator,null),r(M.MenuItem,{id:"multi-greet-submit",label:"Send Greets",action:()=>_ge(e,t,i),disabled:i.length===0}))):null)}var Rge,O3,Pge,F3,Lge=x(()=>{"use strict";d();Q();H();$();fe();B();Rge=(o=>(o.Greet="Greet",o.NormalMessage="Message",o))(Rge||{}),O3=R({greetMode:{type:4,options:[{label:"Greet (you can only greet 3 times)",value:"Greet",default:!0},{label:"Normal Message (you can greet spam)",value:"Message"}],description:"Choose the greet mode"}}).withPrivateSettings(),Pge=An(e=>Array.isArray(e)&&e[0]?.name==="Wave");F3=k({name:"GreetStickerPicker",description:"Allows you to use any greet sticker instead of only the random one by right-clicking the 'Wave to say hi!' button",authors:[w.Ven],settings:O3,patches:[{find:"#{intl::WELCOME_CTA_LABEL}",replacement:{match:/className:\i\.\i,(?=.{0,40}?"sticker")(?<={channel:\i,message:\i}=(\i).+?)/,replace:"$&onContextMenu:(vcEvent)=>$self.pickSticker(vcEvent, $1),"}}],pickSticker(e,t){t.message.deleted||Dt.openContextMenu(e,()=>r(nJe,{...t}))}})});var Oge=x(()=>{});async function $ge(){let e=await zt(Uge);return D5=new Set(e??[]),D5}async function iJe(e,t){let o=await $ge();o.delete(t)||o.add(t),await rJe(o),wc(e,t)}var Uge,D5,rJe,Fge,U3,Hge=x(()=>{"use strict";d();Oge();vn();z1();Q();ao();H();xt();$();B();Uge="HideMedia_HiddenIds",D5=new Set;rJe=e=>Gt(Uge,[...e]);jn("HideMedia","HideAttachments");Fge=e=>e.attachments.length>0||e.embeds.length>0||e.stickerItems.length>0||e.components.length>0;U3=k({name:"HideMedia",description:"Hide attachments and embeds for individual messages via hover button",authors:[w.Ven],dependencies:["MessageUpdaterAPI"],patches:[{find:"this.renderAttachments(",replacement:{match:/(?<=\i=)this\.render(?:Attachments|Embeds|StickersAccessories|ComponentAccessories)\((\i)\)/g,replace:"$self.shouldHide($1?.id)?null:$&"}}],messagePopoverButton:{icon:c0,render(e){if(!Fge(e)&&!e.messageSnapshots.some(o=>Fge(o.message)))return null;let t=D5.has(e.id);return{label:t?"Show Media":"Hide Media",icon:t?Sh:c0,message:e,channel:ne.getChannel(e.channel_id),onClick:()=>iJe(e.channel_id,e.id)}}},renderMessageAccessory({message:e}){return this.shouldHide(e.id)?r("span",{className:me("vc-hideAttachments-accessory",!e.content&&"vc-hideAttachments-no-content")},"Media Hidden"):null},async start(){await $ge()},stop(){D5.clear()},shouldHide(e){return D5.has(e)}})});function Gge(e,t,o,n){return r(Ue,{text:t},i=>r("button",{...i,onClick:s=>cJe(s,e),style:{all:"unset",cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center"}},r("svg",{width:"24",height:"24",viewBox:"0 -960 960 960"},r("path",{fill:n,d:o}))))}function zge(e,t=!1){let o=Ji.use(["ignoredActivities"]),{ignoredActivities:n}=o;return n.some(i=>i.id===e.id)?lJe(e,"var(--status-danger)"):aJe(e,t?"var(--green-300)":"var(--interactive-icon-default)")}function cJe(e,t){e.stopPropagation();let o=Ji.store.ignoredActivities.findIndex(n=>n.id===t.id);o===-1?Ji.store.ignoredActivities.push(t):Ji.store.ignoredActivities.splice(o,1)}function ug(){sJe.updateSetting(e=>e)}function uJe(){return r(Be,{flexDirection:"column"},r(W,null,"Import the application id of the CustomRPC plugin to the filter list"),r("div",null,r(U,{onClick:()=>{let e=Ge.plugins.CustomRPC?.appID;if(!e)return Re("CustomRPC application ID is not set.",D.Type.FAILURE);Aj?.(e)&&Re("CustomRPC application ID is already added.",D.Type.FAILURE)}},"Import CustomRPC ID")))}function dJe(e){let[t,o]=L(Ji.store.idsList??"");Aj=i=>{let s=new Set(t.split(",").map(c=>c.trim()).filter(Boolean)),a=s.has(i)||(s.add(i),!1),l=Array.from(s).join(", ");return o(l),e.setValue(l),a},se(()=>()=>{Aj=null},[]);function n(i){o(i),e.setValue(i)}return r("section",null,r(so,null,"Filter List"),r(W,{className:Z.bottom8},"Comma separated list of activity IDs to filter (Useful for filtering specific RPC activities and CustomRPC"),r(cp,{type:"text",value:t,onChange:n,placeholder:"235834946571337729, 343383572805058560"}))}function pJe(e,t){if(t&&Ji.store.idsList.includes(t))return Ji.store.listMode===1;switch(e){case 0:return Ji.store.ignorePlaying;case 1:return Ji.store.ignoreStreaming;case 2:return Ji.store.ignoreListening;case 3:return Ji.store.ignoreWatching;case 5:return Ji.store.ignoreCompeting}return!1}var sJe,aJe,lJe,Aj,Ji,$3,qge=x(()=>{"use strict";d();Q();Ra();tt();eo();ut();wt();H();co();$();B();sJe=nr("status","showCurrentGame");aJe=(e,t)=>Gge(e,"Disable activity","M480-320q75 0 127.5-52.5T660-500q0-75-52.5-127.5T480-680q-75 0-127.5 52.5T300-500q0 75 52.5 127.5T480-320Zm0-72q-45 0-76.5-31.5T372-500q0-45 31.5-76.5T480-608q45 0 76.5 31.5T588-500q0 45-31.5 76.5T480-392Zm0 192q-146 0-266-81.5T40-500q54-137 174-218.5T480-800q146 0 266 81.5T920-500q-54 137-174 218.5T480-200Zm0-300Zm0 220q113 0 207.5-59.5T832-500q-50-101-144.5-160.5T480-720q-113 0-207.5 59.5T128-500q50 101 144.5 160.5T480-280Z",t),lJe=(e,t)=>Gge(e,"Enable activity","m644-428-58-58q9-47-27-88t-93-32l-58-58q17-8 34.5-12t37.5-4q75 0 127.5 52.5T660-500q0 20-4 37.5T644-428Zm128 126-58-56q38-29 67.5-63.5T832-500q-50-101-143.5-160.5T480-720q-29 0-57 4t-55 12l-62-62q41-17 84-25.5t90-8.5q151 0 269 83.5T920-500q-23 59-60.5 109.5T772-302Zm20 246L624-222q-35 11-70.5 16.5T480-200q-151 0-269-83.5T40-500q21-53 53-98.5t73-81.5L56-792l56-56 736 736-56 56ZM222-624q-29 26-53 57t-41 67q50 101 143.5 160.5T480-280q20 0 39-2.5t39-5.5l-36-38q-11 3-21 4.5t-21 1.5q-75 0-127.5-52.5T300-500q0-11 1.5-21t4.5-21l-84-82Zm319 93Zm-151 75Z",t);Aj=null;Ji=R({importCustomRPC:{type:6,component:uJe},listMode:{type:4,description:"Change the mode of the filter list",options:[{label:"Whitelist",value:0,default:!0},{label:"Blacklist",value:1}],onChange:ug},idsList:{type:6,default:"",onChange(e){let t=new Set(e.split(",").map(o=>o.trim()).filter(Boolean));Ji.store.idsList=Array.from(t).join(", "),ug()},component:e=>r(dJe,{setValue:e.setValue})},ignorePlaying:{type:3,description:"Ignore all playing activities (These are usually game and RPC activities)",default:!1,onChange:ug},ignoreStreaming:{type:3,description:"Ignore all streaming activities",default:!1,onChange:ug},ignoreListening:{type:3,description:"Ignore all listening activities (These are usually spotify activities)",default:!1,onChange:ug},ignoreWatching:{type:3,description:"Ignore all watching activities",default:!1,onChange:ug},ignoreCompeting:{type:3,description:"Ignore all competing activities (These are normally special game activities)",default:!1,onChange:ug},ignoredActivities:{type:7,default:[],onChange:ug,description:""}});$3=k({name:"IgnoreActivities",authors:[w.Nuckyz,w.Kylie],description:"Ignore activities from showing up on your status ONLY. You can configure which ones are specifically ignored from the Registered Games and Activities tabs, or use the general settings below",dependencies:["UserSettingsAPI"],settings:Ji,patches:[{find:'"LocalActivityStore"',replacement:[{match:/\.LISTENING.+?(?=!?\i\(\)\(\i,\i\))(?<=(\i)\.push.+?)/,replace:(e,t)=>`${e}${t}=${t}.filter($self.isActivityNotIgnored);`}]},{find:'"ActivityTrackingStore"',replacement:{match:/getVisibleRunningGames\(\).+?;(?=for)(?<=(\i)=\i\.\i\.getVisibleRunningGames.+?)/,replace:(e,t)=>`${e}${t}=${t}.filter(({id,name})=>$self.isActivityNotIgnored({type:0,application_id:id,name}));`}},{find:"#{intl::SETTINGS_GAMES_TOGGLE_OVERLAY}",replacement:{match:/(\i)&&!\i\|\|\i\?null(?<=(\i)\.verified&&.+?)/,replace:"$self.renderToggleGameActivityButton($2,$1),$&"}},{find:"#{intl::EMBEDDED_ACTIVITIES_DEVELOPER_ACTIVITY}",replacement:{match:/lineClamp:1.{0,50}?(?=!\i&&\i\?.+?application:(\i))/,replace:"$&$self.renderToggleActivityButton($1),"}}],async start(){if(Ji.store.ignoredActivities.length!==0){let e=y1.getGamesSeen();for(let[t,o]of Ji.store.ignoredActivities.entries())o.type===0&&(e.some(n=>n.id===o.id||n.exePath===o.id)||Ji.store.ignoredActivities.splice(t,1))}},isActivityNotIgnored(e){if(pJe(e.type,e.application_id))return!1;if(e.application_id!=null)return!Ji.store.ignoredActivities.some(t=>t.id===e.application_id)||Ji.store.listMode===0&&Ji.store.idsList.includes(e.application_id);{let t=y1.getRunningGames().find(o=>o.name===e.name)?.exePath;if(t)return!Ji.store.ignoredActivities.some(o=>o.id===t)}return!0},renderToggleGameActivityButton(e,t){return r(ee,{noop:!0},r("div",{style:{marginLeft:12,zIndex:0}},zge({id:e.id??e.exePath,name:e.name,type:0},t)))},renderToggleActivityButton(e){return r(ee,{noop:!0},zge({id:e.id,name:e.name,type:1}))}})});var H3,jge=x(()=>{"use strict";d();Q();H();$();jn("IloveSpam","iLoveSpam");H3=k({name:"ILoveSpam",description:"Do not hide messages from 'likely spammers'",authors:[w.botato,w.Nyako],patches:[{find:"hasFlag:{writable",replacement:{match:/if\((\i)<=(?:0x40000000|(?:1<<30|1073741824))\)return/,replace:"if($1===(1<<20))return false;$&"}}]})});var mJe,fJe,Wge,z3,Kge=x(()=>{"use strict";d();Q();H();$();mJe=/\.(png|jpg|jpeg|gif|webp|avif)$/i,fJe=/^(.+?\.)?(tenor|giphy|imgur)\.com$/i,Wge=R({showFullUrl:{description:"Show the full URL of the image instead of just the file name. Always enabled for GIFs because they usually have no meaningful file name",type:3,default:!1}}),z3=k({name:"ImageFilename",authors:[w.Ven],description:"Display the file name of images & GIFs as a tooltip when hovering over them",settings:Wge,patches:[{find:".RESPONSIVE?",replacement:{match:/(?="data-role":"img","data-safe-src":)(?<=href:(\i).+?)/,replace:"title:$self.getTitle($1),"}}],getTitle(e){try{let t=new URL(e),o=fJe.test(t.hostname);return!o&&!mJe.test(t.pathname)?void 0:o||Wge.store.showFullUrl?e:t.pathname.split("/").pop()}catch{return}}})});var G3,Yge=x(()=>{"use strict";d();H();$();G3=k({name:"ImageLink",description:"Never hide image links in messages, even if it's the only content",authors:[w.Kyuuhachi,w.Sqaaakoi],patches:[{find:"unknownUserMentionPlaceholder:",replacement:{match:/\i\.has\(\i\.type\)&&\(0,\i\.\i\)\(\i\)/,replace:"false"}}]})});var M5,Cj=x(()=>{"use strict";d();M5="vc-imgzoom-magnify-modal"});function Tj(e,t){e()?t():requestAnimationFrame(()=>Tj(e,t))}var Qge=x(()=>{"use strict";d()});var Zge,Ij,Xge=x(()=>{"use strict";d();tt();Dj();Cj();Qge();nt();B();Zge=de("vc-imgzoom-"),Ij=ee.wrap(({instance:e,size:t,zoom:o})=>{let[n,i]=L(!1),[s,a]=L({x:0,y:0}),[l,c]=L({x:0,y:0}),[u,p]=L(0),m=kt(!1),g=kt(o),y=kt(t),b=kt(null),v=kt(null),E=kt(null),A=kt(null);gu(()=>{let N=K=>{K.key==="Shift"&&(m.current=!0)},_=K=>{K.key==="Shift"&&(m.current=!1)},O=()=>{v.current&&E.current&&(v.current.currentTime=E.current.currentTime)},F=K=>{if(b.current)if(e.state.mouseOver&&e.state.mouseDown){let oe=y.current/2,le={x:K.pageX,y:K.pageY},he=-((le.x-b.current.getBoundingClientRect().left)*g.current-oe),Ae=-((le.y-b.current.getBoundingClientRect().top)*g.current-oe);a({x:K.x-oe,y:K.y-oe}),c({x:he,y:Ae}),p(1)}else p(0)},J=K=>{e.state.mouseOver&&K.button===0&&(g.current=Jr.store.zoom,y.current=Jr.store.size,document.getElementById("image-context")&&V.dispatch({type:"CONTEXT_MENU_CLOSE"}),F(K),p(1))},G=()=>{p(0)},te=async K=>{if(e.state.mouseOver&&e.state.mouseDown&&!m.current){let oe=g.current+K.deltaY/100*(Jr.store.invertScroll?-1:1)*Jr.store.zoomSpeed;g.current=oe<=1?1:oe,Jr.store.saveZoomValues&&(Jr.store.zoom=g.current),F(K)}if(e.state.mouseOver&&e.state.mouseDown&&m.current){let oe=y.current+K.deltaY*(Jr.store.invertScroll?-1:1)*Jr.store.zoomSpeed;y.current=oe<=50?50:oe,Jr.store.saveZoomValues&&(Jr.store.size=y.current),F(K)}};return Tj(()=>e.state.readyState==="READY",()=>{let K=document.getElementById(M5);b.current=K,K.querySelector("img,video")?.setAttribute("draggable","false"),e.props.animated&&(E.current=K.querySelector("video"),E.current.addEventListener("timeupdate",O)),i(!0)}),document.addEventListener("keydown",N),document.addEventListener("keyup",_),document.addEventListener("mousemove",F),document.addEventListener("mousedown",J),document.addEventListener("mouseup",G),document.addEventListener("wheel",te),()=>{document.removeEventListener("keydown",N),document.removeEventListener("keyup",_),document.removeEventListener("mousemove",F),document.removeEventListener("mousedown",J),document.removeEventListener("mouseup",G),document.removeEventListener("wheel",te)}},[]);let C=rt(()=>{try{let N=new URL(e.props.src);return N.pathname.startsWith("/attachments/")&&(N.hostname="cdn.discordapp.com"),N.searchParams.set("animated","true"),N.toString()}catch{return e.props.src}},[e.props.src]);if(!n)return null;let I=b.current?.getBoundingClientRect();return I?r("div",{className:Zge("lens",{"nearest-neighbor":Jr.store.nearestNeighbour,square:Jr.store.square}),style:{opacity:u,width:y.current+"px",height:y.current+"px",transform:`translate(${s.x}px, ${s.y}px)`}},e.props.animated?r("video",{ref:v,style:{position:"absolute",left:`${l.x}px`,top:`${l.y}px`},width:`${I.width*g.current}px`,height:`${I.height*g.current}px`,poster:e.props.src,src:E.current?.src??e.props.src,autoPlay:!0,loop:!0,muted:!0}):r("img",{className:Zge("image"),ref:A,style:{position:"absolute",transform:`translate(${l.x}px, ${l.y}px)`},width:`${I.width*g.current}px`,height:`${I.height*g.current}px`,src:C,alt:""})):null},{noop:!0})});var Jge,Vge=x(()=>{d();(window.VencordStyles??=new Map).set("src/plugins/imageZoom/styles.css",{name:"src/plugins/imageZoom/styles.css",source:`.vc-imgzoom-lens {
    position: absolute;
    inset: 0;
    z-index: 9999;
    border: 2px solid grey;
    margin: -2px;
    border-radius: 50%;
    overflow: hidden;
    cursor: none;
    box-shadow: inset 0 0 10px 2px grey;
    filter: drop-shadow(0 0 2px grey);
    pointer-events: none;
}

.vc-imgzoom-square {
    border-radius: 0;
}

.vc-imgzoom-nearest-neighbor > .vc-imgzoom-image {
    image-rendering: pixelated;

    /* https://googlechrome.github.io/samples/image-rendering-pixelated/index.html */
}

.vc-image-metadata {
    position: absolute;
    top: 0;
    right: 0;
    background: rgb(0 0 0 / 60%);
    color: white;
    padding: 4px 8px;
    font-size: 12px;
    z-index: 10;
    pointer-events: none;
}

.vc-image-wrapper {
    position: relative;
    display: inline-block;
}
`,classNames:{},dom:null});Jge="src/plugins/imageZoom/styles.css"});var Jr,gJe,q3,Dj=x(()=>{"use strict";d();Q();la();H();At();$();B();Xge();Cj();Vge();Jr=R({saveZoomValues:{type:3,description:"Whether to save zoom and lens size values",default:!0},invertScroll:{type:3,description:"Invert scroll",default:!0},nearestNeighbour:{type:3,description:"Use Nearest Neighbour Interpolation when scaling images",default:!1},square:{type:3,description:"Make the lens square",default:!1},zoom:{description:"Zoom of the lens",type:5,markers:[1,5,10,20,30,40,50],default:2,stickToMarkers:!1},size:{description:"Radius / Size of the lens",type:5,markers:[50,100,250,500,750,1e3],default:100,stickToMarkers:!1},zoomSpeed:{description:"How fast the zoom / lens size changes",type:5,markers:[.1,.5,1,2,3,4,5],default:.5,stickToMarkers:!1}}),gJe=(e,t)=>{if("href"in t||t.target?.classList?.contains("emoji"))return;let{square:o,nearestNeighbour:n}=Jr.use(["square","nearestNeighbour"]);e.push(r(M.MenuGroup,{id:"image-zoom"},r(M.MenuCheckboxItem,{id:"vc-square",label:"Square Lens",checked:o,action:()=>{Jr.store.square=!o}}),r(M.MenuCheckboxItem,{id:"vc-nearest-neighbour",label:"Nearest Neighbour",checked:n,action:()=>{Jr.store.nearestNeighbour=!n}}),r(M.MenuControlItem,{id:"vc-zoom",label:"Zoom",control:(i,s)=>r(M.MenuSliderControl,{ref:s,...i,minValue:1,maxValue:50,value:Jr.store.zoom,onChange:rn(a=>Jr.store.zoom=a,100)})}),r(M.MenuControlItem,{id:"vc-size",label:"Lens Size",control:(i,s)=>r(M.MenuSliderControl,{ref:s,...i,minValue:50,maxValue:1e3,value:Jr.store.size,onChange:rn(a=>Jr.store.size=a,100)})}),r(M.MenuControlItem,{id:"vc-zoom-speed",label:"Zoom Speed",control:(i,s)=>r(M.MenuSliderControl,{ref:s,...i,minValue:.1,maxValue:5,value:Jr.store.zoomSpeed,onChange:rn(a=>Jr.store.zoomSpeed=a,100),renderValue:a=>`${a.toFixed(3)}x`})})))},q3=k({name:"ImageZoom",description:"Lets you zoom in to images and gifs. Use scroll wheel to zoom in and shift + scroll wheel to increase lens radius / size",authors:[w.Aria],tags:["ImageUtilities"],managedStyle:Jge,patches:[{find:"disableArrowKeySeek:!0",replacement:[{match:/useFullWidth:!0,shouldLink:/,replace:`id:"${M5}",$&`},{match:/(?<=null!=(\i)\?.{0,20})\i\.\i,{children:\1/,replace:"'div',{onClick:e=>e.stopPropagation(),children:$1"}]},{find:'="FOCUS_SENSITIVE",',replacement:{match:/(?<=\[\i\.\i]:)\i&&!\i&&"PINNED"!==\i/,replace:"false"}},{find:".handleImageLoad)",replacement:[{match:/placeholderVersion:\i,(?=.{0,50}children:)/,replace:"...$self.makeProps(this),$&"},{match:/componentDidMount\(\){/,replace:"$&$self.renderMagnifier(this);"},{match:/componentWillUnmount\(\){/,replace:"$&$self.unMountMagnifier();"},{match:/componentDidUpdate\(\i\){/,replace:"$&$self.updateMagnifier(this);"}]}],settings:Jr,contextMenus:{"image-context":gJe},currentMagnifierElement:null,element:null,Magnifier:Ij,root:null,makeProps(e){return{onMouseOver:()=>this.onMouseOver(e),onMouseOut:()=>this.onMouseOut(e),onMouseDown:t=>this.onMouseDown(t,e),onMouseUp:()=>this.onMouseUp(e),id:e.props.id}},renderMagnifier(e){try{e.props.id===M5&&(this.root||(this.root=Ms(this.element)),this.currentMagnifierElement=r(Ij,{size:Jr.store.size,zoom:Jr.store.zoom,instance:e}),this.root.render(this.currentMagnifierElement))}catch(t){new ke("ImageZoom").error("Failed to render magnifier:",t)}},updateMagnifier(e){this.renderMagnifier(e)},unMountMagnifier(){this.root?.unmount(),this.currentMagnifierElement=null,this.root=null},onMouseOver(e){e.setState(t=>({...t,mouseOver:!0}))},onMouseOut(e){e.setState(t=>({...t,mouseOver:!1}))},onMouseDown(e,t){e.button===0&&t.setState(o=>({...o,mouseDown:!0}))},onMouseUp(e){e.setState(t=>({...t,mouseDown:!1}))},start(){this.element=document.createElement("div"),this.element.classList.add("MagnifierContainer"),document.body.appendChild(this.element)},stop(){this.root&&this.root.unmount(),this.element?.remove()}})});var ehe,j3,the=x(()=>{"use strict";d();Q();H();At();$();fe();B();Jh();ehe=Ft("UserAffinitiesV2Store"),j3=k({name:"ImplicitRelationships",description:"Shows your implicit relationships in the Friends tab.",authors:[w.Dolfies],patches:[{find:"#{intl::FRIENDS_ALL_HEADER}",replacement:{match:/toString\(\)\}\);case (\i\.\i)\.PENDING/,replace:'toString()});case $1.IMPLICIT:return "Implicit \u2014 "+arguments[1];case $1.BLOCKED'}},{find:"FriendsEmptyState: Invalid empty state",replacement:{match:/case (\i\.\i)\.ONLINE:(?=return (\i)\.SECTION_ONLINE)/,replace:"case $1.ONLINE:case $1.IMPLICIT:"}},{find:"#{intl::FRIENDS_SECTION_ONLINE}),className:",replacement:{match:/,{id:(\i\.\i)\.PENDING,show:.+?className:(\i\.\i)(?=\},\{id:)/,replace:(e,t,o)=>`,{id:${t}.IMPLICIT,show:true,className:${o},content:"Implicit"}${e}`}},{find:'"FriendsStore"',replacement:{match:/(?<=case (\i\.\i)\.SUGGESTIONS:return \d+===(\i)\.type)/,replace:";case $1.IMPLICIT:return $2.type===5"}},{find:'"FriendsStore',replacement:{match:/(\i\.\i)\.fetchRelationships\(\)/,replace:"$1.fetchRelationships(),$self.fetchImplicitRelationships()"}},{find:"getRelationshipCounts(){",replacement:{predicate:()=>Ge.plugins.ImplicitRelationships.sortByAffinity,match:/\}\)\.sortBy\((.+?)\)\.value\(\)/,replace:"}).sortBy(row => $self.wrapSort(($1), row)).value()"}},{find:".REQUEST_GUILD_MEMBERS,",replacement:{match:/\.send\(\i\.\i\.REQUEST_GUILD_MEMBERS,{/,replace:"$&nonce:arguments[1].nonce,"}},{find:"GUILD_MEMBERS_REQUEST:",replacement:{match:/presences:!!(\i)\.presences/,replace:"$&,nonce:$1.nonce"}},{find:".not_found",replacement:{match:/notFound:(\i)\.not_found/,replace:"$&,nonce:$1.nonce"}}],settings:R({sortByAffinity:{type:3,default:!0,description:"Whether to sort implicit relationships by their affinity to you.",restartNeeded:!0}}),wrapSort(e,t){return t.type===5?ehe.getUserAffinity(t.user.id)?.communicationRank??0:e(t)},async fetchImplicitRelationships(){let e=ehe.getUserAffinities(),t=Tt.getMutableRelationships(),o=e.filter(c=>!Tt.getRelationshipType(c.otherUserId));o.forEach(c=>{t.set(c.otherUserId,5)}),Tt.emitChange();let n=o.filter(c=>!z.getUser(c.otherUserId)),i=Object.keys(ct.getGuilds()),s=ai.fromTimestamp(Date.now()),a=i.length*Math.ceil(n.length/100),l=({chunks:c})=>{try{let u=c.filter(p=>p.nonce===s).length;if(u===0)return;a-=u,Tt.emitChange(),a<=0&&V.unsubscribe("GUILD_MEMBERS_CHUNK_BATCH",l)}catch(u){new ke("ImplicitRelationships").error("Error in GUILD_MEMBERS_CHUNK_BATCH handler",u)}};V.subscribe("GUILD_MEMBERS_CHUNK_BATCH",l);for(let c=0;c<n.length;c+=100)V.dispatch({type:"GUILD_MEMBERS_REQUEST",guildIds:i,userIds:n.slice(c,c+100),presences:!0,nonce:s})},start(){jo.FriendsSections.IMPLICIT="IMPLICIT"}})});var ohe=x(()=>{});function Nj({id:e,modalProps:t}){let o=parseInt(qp[e],16)||372735,[n,i]=L(o);function s(u){i(u)}function a(u){u.key==="Enter"&&l()}async function l(){qp[e]=n.toString(16).padStart(6,"0"),await Gt(W3,qp),t.onClose()}async function c(){delete qp[e],await Gt(W3,qp),t.onClose()}return r(Pe,{...t},r(je,{className:Mj("modal-header")},r(Jo,null,"Custom Color"),r(Ut,{onClick:t.onClose})),r($e,{className:Mj("modal-content"),onKeyDown:a},r("section",{className:Z.bottom16},r(so,null,"Pick a Color"),r(si,{color:n,onChange:s,showEyeDropper:!1}))),r(ht,{className:Mj("modal-footer")},r(U,{color:U.Colors.RED,onClick:c},"Delete Entry"),r(U,{color:U.Colors.BRAND,onClick:l},"Save")))}var Mj,nhe=x(()=>{"use strict";d();vn();ut();nt();co();at();B();uv();Mj=de("vc-customColors-")});function Ud(e,t){if(e&&!(!qp[e]||!Ge.plugins.CustomUserColors.enabled))return t?`#${qp[e]}`:qp[e]}var W3,qp,Bj,rhe,hJe,xJe,N5,K3,uv=x(()=>{"use strict";d();ohe();vn();Q();H();at();$();fe();B();nhe();W3="equicord-customcolors",qp={};(async()=>qp=await zt(W3)||{})();Bj=Ds(['type:"USER_SETTINGS_MODAL_OPEN"']),rhe=()=>r("svg",{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",width:"18",height:"18"},r("path",{d:"m9.17 12.67 2.16 2.16a1 1 0 0 0 .99.25l2.57-.75A3 3 0 0 0 16.6 13l4.91-8.05a1.8 1.8 0 0 0-2.47-2.47L11 7.39a3 3 0 0 0-1.32 1.72l-.75 2.57a1 1 0 0 0 .25.99ZM8.03 13.14c.27.07.51.23.7.43l1.7 1.7c.2.19.36.43.43.7A4 4 0 0 1 7 21H2a1 1 0 1 1 0-2c.68 0 1.13-.77 1.04-1.44a4 4 0 0 1 5-4.42Z"})),hJe=(e,{user:t})=>{if(t?.id==null)return;let o=r(M.MenuItem,{label:"Set Color",id:"set-color",icon:rhe,action:async()=>{await Bj(),Ee(n=>r(Nj,{id:t.id,modalProps:n}))}});e.push(r(M.MenuSeparator,null),o)},xJe=(e,{channel:t})=>{if(t?.id==null)return;let o=r(M.MenuItem,{label:"Set Color",id:"set-color",icon:rhe,action:async()=>{await Bj(),Ee(n=>r(Nj,{id:t.id,modalProps:n}))}});e.push(r(M.MenuSeparator,null),o)};N5=R({dmList:{type:3,description:"Users with custom colors defined will have their name in the dm list colored",default:!0},colorInServers:{type:3,description:"If name colors should be changed within servers",default:!0}}),K3=k({name:"CustomUserColors",description:"Lets you add a custom color to any user, anywhere! Highly recommend to use with typingTweaks and roleColorEverywhere",authors:[j.mochienya],contextMenus:{"user-context":hJe,"gdm-context":xJe},settings:N5,requireSettingsMenu:Bj,getCustomColorString:Ud,patches:[{find:'="SYSTEM_TAG"',replacement:{match:/(?<=colorString:\i,colorStrings:\i,colorRoleName:\i.*?}=)(\i),/,replace:"$self.wrapMessageColorProps($1, arguments[0]),"},predicate:()=>!Ge.plugins.IrcColors.enabled,noWarn:!0},{find:"PrivateChannel.renderAvatar",replacement:{match:/(\i\]:\i\}\),children:\i\}\),)(?=.{0,100}isSystemDM\(\))/,replace:"$1style:{color:`${$self.colorDMList(arguments[0])}`},"},predicate:()=>N5.store.dmList},{find:'"AvatarWithText"',replacement:[{match:/(\}=\i)/,replace:",style$1"},{match:/(?<="div",\{className:\i\.\i,)(?=children:\[)/,replace:"style:style||{},"}],predicate:()=>N5.store.dmList},{find:'"Reply Chain Nudge")',replacement:{match:/(className:.{0,15},colorString:)(\i),/,replace:"$1$self.colorInReplyingTo(arguments[0]) ?? $2,"}}],wrapMessageColorProps(e,t){try{let o=st.getChannelId(),n=ne.getChannel(o),i=n.isDM()||n.isMultiUserDM(),s=this.colorIfServer(t);return s===e.colorString||!N5.store.colorInServers&&!i?e:{...e,colorString:s,colorStrings:e.colorStrings&&{primaryColor:s,secondaryColor:void 0,tertiaryColor:void 0}}}catch(o){return console.error("Failed to calculate message color strings:",o),e}},colorDMList(e){let t=e?.user?.id??e?.channel?.id;return Ud(t,!0)??"inherit"},colorIfServer(e){let t=e?.message?.author?.id,o=e?.author?.colorString;return e?.message?.channel_id==="1337"&&t==="313337"||e?.channel?.guild_id&&!N5.store.colorInServers?o:Ud(t,!0)??o??void 0},colorInReplyingTo(e){let{id:t}=e.reply.message.author;return Ud(t,!0)}})});function ihe(e){let{lightness:t}=ty.use(["lightness"]),o=rt(()=>e?UE(e):null,[e]);return o&&`hsl(${o%360n}, 100%, ${t}%)`}var ty,Y3,she=x(()=>{"use strict";d();Q();uv();uO();H();$();B();ty=R({lightness:{description:"Lightness, in %. Change if the colors are too light or too dark",type:1,default:70},memberListColors:{description:"Replace role colors in the member list",restartNeeded:!0,type:3,default:!0},applyColorOnlyToUsersWithoutColor:{description:"Apply colors only to users who don't have a predefined color",restartNeeded:!1,type:3,default:!1},applyColorOnlyInDms:{description:"Apply colors only in direct messages; do not apply colors in servers.",restartNeeded:!1,type:3,default:!1}}),Y3=k({name:"IrcColors",description:"Makes username colors in chat unique, like in IRC clients",authors:[w.Grzesiek11,w.jamesbt365],settings:ty,patches:[{find:'="SYSTEM_TAG"',replacement:{match:/(?<=colorString:\i,colorStrings:\i,colorRoleName:\i.*?}=)(\i),/,replace:"$self.wrapMessageColorProps($1, arguments[0]),"}},{find:"#{intl::GUILD_OWNER}),children:",replacement:{match:/(?<=roleName:\i,)colorString:/,replace:"colorString:$self.calculateNameColorForListContext(arguments[0]),originalColor:"},predicate:()=>ty.store.memberListColors}],wrapMessageColorProps(e,t){try{let o=this.calculateNameColorForMessageContext(t);return o===e.colorString?e:{...e,colorString:o,colorStrings:e.colorStrings&&{primaryColor:o,secondaryColor:void 0,tertiaryColor:void 0}}}catch(o){return console.error("Failed to calculate message color strings:",o),e}},calculateNameColorForMessageContext(e){let t=e?.message?.author?.id,o=e?.author?.colorString,n=ihe(t);if(Ge.plugins.CustomUserColors.enabled){let i=Ud(t,!0);if(i)return i}return e?.message?.channel_id==="1337"&&t==="313337"||ty.store.applyColorOnlyInDms&&!e?.channel?.isPrivate()?o:!ty.store.applyColorOnlyToUsersWithoutColor||!o?n:o},calculateNameColorForListContext(e){try{let t=e?.user?.id,o=e?.colorString,n=ihe(t);if(Ge.plugins.CustomUserColors.enabled){let i=Ud(t,!0);if(i)return i}return ty.store.applyColorOnlyInDms&&e?.guildId!==void 0?o:!ty.store.applyColorOnlyToUsersWithoutColor||!o?n:o}catch(t){console.error("Failed to calculate name color for list context:",t)}}})});var Q3,$d,Z3,ahe=x(()=>{"use strict";d();vn();H();$();B();Q3=!1,Z3=k({name:"KeepCurrentChannel",description:"Attempt to navigate to the channel you were in before switching accounts or loading Discord.",authors:[w.Nuckyz],patches:[{find:'"Switching accounts"',replacement:{match:/goHomeAfterSwitching:\i/,replace:"goHomeAfterSwitching:!1"}}],flux:{LOGOUT(e){({isSwitchingAccount:Q3}=e)},CONNECTION_OPEN(){Q3&&(Q3=!1,$d?.channelId&&(ne.hasChannel($d.channelId)?pa.transitionToChannel($d.channelId):ho.transitionToGuild("@me")))},async CHANNEL_SELECT({guildId:e,channelId:t}){Q3||($d={guildId:e,channelId:t},await Gt("KeepCurrentChannel_previousData",$d))}},async start(){$d=await zt("KeepCurrentChannel_previousData"),$d?$d.channelId&&pa.transitionToChannel($d.channelId):($d={guildId:hn.getGuildId(),channelId:st.getChannelId()??null},await Gt("KeepCurrentChannel_previousData",$d))}})});async function _j(e){return(await zi.fetchAssetIds(X3,[e]))[0]}function vJe(e){V.dispatch({type:"LOCAL_ACTIVITY_UPDATE",activity:e,socketId:"LastFM"})}var yJe,X3,bJe,lhe,Pj,va,V3,che=x(()=>{"use strict";d();Q();Co();fs();ut();w0();wt();H();At();$();hr();B();yJe="790c37d90400163a5a5fe00d6ca32ef0",X3="1108588077900898414",bJe="2a96cbd8b46e442fc41c2b86b821562f",lhe=new ke("LastFMRichPresence");va=R({apiKey:{description:"Custom Last.fm API key. Not required but highly recommended to avoid rate limiting with our shared key",type:0},username:{description:"Last.fm username",type:0},shareUsername:{description:"Show link to Last.fm profile",type:3,default:!1},clickableLinks:{description:"Make track, artist and album names clickable links",type:3,default:!0},hideWithSpotify:{description:"Hide Last.fm presence if spotify is running",type:3,default:!0},hideWithActivity:{description:"Hide Last.fm presence if you have any other presence",type:3,default:!1},statusName:{description:"Custom status text",type:0,default:"some music"},statusDisplayType:{description:"Show the track / artist name in the member list",type:4,options:[{label:"Don't show (shows generic listening message)",value:"off"},{label:"Show artist name",value:"artist",default:!0},{label:"Show track name",value:"track"}]},nameFormat:{description:"Show name of song and artist in status name",type:4,options:[{label:"Use custom status name",value:"status-name",default:!0},{label:"Use format 'artist - song'",value:"artist-first"},{label:"Use format 'song - artist'",value:"song-first"},{label:"Use artist name only",value:"artist"},{label:"Use song name only",value:"song"},{label:"Use album name (falls back to custom status text if song has no album)",value:"album"}]},useListeningStatus:{description:'Show "Listening to" status instead of "Playing"',type:3,default:!1},missingArt:{description:"When album or album art is missing",type:4,options:[{label:"Use large Last.fm logo",value:"lastfmLogo",default:!0},{label:"Use generic placeholder",value:"placeholder"}]},showLastFmLogo:{description:"Show the Last.fm logo by the album cover",type:3,default:!0},alwaysHideArt:{description:"Disable downloading album art",type:3,default:!1}}),V3=k({name:"LastFMRichPresence",description:"Little plugin for Last.fm rich presence",authors:[w.dzshn,w.RuiNtD,w.blahajZip,w.archeruwu],settings:va,settingsAboutComponent(){return r(cn,null,r(re,{tag:"h5"},"How to create an API key"),r(W,null,"Set ",r("strong",null,"Application name")," and ",r("strong",null,"Application description")," to anything and leave the rest blank."),r(sO,{size:"small",href:"https://www.last.fm/api/account/create",className:Z.top8},"Create API Key"))},start(){this.updatePresence(),Pj=setInterval(()=>{this.updatePresence()},16e3)},stop(){clearInterval(Pj),Pj=void 0},async fetchTrackData(){if(!va.store.username)return null;try{let e=new URLSearchParams({method:"user.getrecenttracks",api_key:va.store.apiKey||yJe,user:va.store.username,limit:"1",format:"json"}),t=await fetch(`https://ws.audioscrobbler.com/2.0/?${e}`);if(!t.ok)throw`${t.status} ${t.statusText}`;let o=await t.json();if(o.error)return lhe.error("Error from Last.fm API",`${o.error}: ${o.message}`),null;let n=o.recenttracks?.track[0];return n?.["@attr"]?.nowplaying?{name:n.name||"Unknown",album:n.album["#text"],artist:n.artist["#text"]||"Unknown",url:n.url,imageUrl:n.image?.find(i=>i.size==="large")?.["#text"]}:null}catch(e){return lhe.error("Failed to query Last.fm API",e),null}},async updatePresence(){vJe(await this.getActivity())},getLargeImage(e){if(!va.store.alwaysHideArt&&e.imageUrl&&!e.imageUrl.includes(bJe))return e.imageUrl;if(va.store.missingArt==="placeholder")return"placeholder"},async getActivity(){if(va.store.hideWithActivity&&cr.getActivities(Ns.getId()).some(a=>a.application_id!==X3&&a.type!==4)||va.store.hideWithSpotify&&cr.getActivities(Ns.getId()).some(a=>a.type===2&&a.application_id!==X3))return null;let e=await this.fetchTrackData();if(!e)return null;let t=this.getLargeImage(e),o=t?{large_image:await _j(t),large_text:e.album||void 0,...va.store.showLastFmLogo&&{small_image:await _j("lastfm-small"),small_text:"Last.fm"}}:{large_image:await _j("lastfm-large"),large_text:e.album||void 0},n=[];va.store.shareUsername&&n.push({label:"Last.fm Profile",url:`https://www.last.fm/user/${va.store.username}`});let i=(()=>{switch(va.store.nameFormat){case"artist-first":return e.artist+" - "+e.name;case"song-first":return e.name+" - "+e.artist;case"artist":return e.artist;case"song":return e.name;case"album":return e.album||va.store.statusName;default:return va.store.statusName}})(),s={application_id:X3,name:i,details:e.name,state:e.artist,status_display_type:{off:0,artist:1,track:2}[va.store.statusDisplayType],assets:o,buttons:n.length?n.map(a=>a.label):void 0,metadata:{button_urls:n.map(a=>a.url)},type:va.store.useListeningStatus?2:0,flags:1};return va.store.clickableLinks&&(s.details_url=e.url,s.state_url=`https://www.last.fm/music/${encodeURIComponent(e.artist)}`,e.album&&(s.assets.large_url=`https://www.last.fm/music/${encodeURIComponent(e.artist)}/${encodeURIComponent(e.album)}`)),s}})});var uhe,dhe=x(()=>{d();uhe=`# Blank lines and lines starting with "#" are ignored

Explode
Read if cute
Have a nice day!
Starting Lightcord...
Loading 0BDFDB.plugin.js...
Installing BetterDiscord...
h
shhhhh did you know that you're my favourite user? But don't tell the others!!
Today's video is sponsored by Raid Shadow Legends, one of the biggest mobile role-playing games of 2019 and it's totally free!
Never gonna give you up, Never gonna let you down
( \u0361\xB0 \u035C\u0296 \u0361\xB0)
(\uFF89\u25D5\u30EE\u25D5)\uFF89*:\uFF65\uFF9F\u2727
You look so pretty today!
Thinking of a funny quote...
3.141592653589793
meow
Welcome, friend
If you, or someone you love, has Ligma, please see the Ligma health line at https://bit.ly/ligma_hotline
Trans Rights
I\u2019d just like to interject for a moment. What you\u2019re refering to as Linux, is in fact, GNU/Linux, or as I\u2019ve recently taken to calling it, GNU plus Linux.
You're doing good today!
Don't worry, it's nothing 9 cups of coffee couldn't solve!
\uFFFD(repeat like 30 times)
a light amount of tomfoolery is okay
do you love?
horror
so eepy
So without further ado, let's just jump right into it!
Dying is absolutely safe
hey you! you're cute :))
heya ~
<:trolley:997086295010594867>
Time is gone, space is insane. Here it comes, here again.
sometimes it's okay to just guhhhhhhhhhhhhhh
Welcome to nginx!`});var SJe,wJe,Rj,eT,phe=x(()=>{"use strict";d();Q();H();At();$();dhe();SJe=uhe.split(`
`).map(e=>/^\s*[^#\s]/.test(e)&&e.trim()).filter(Boolean),wJe="Did you really disable all loading quotes? What a buffoon you are...",Rj=R({replaceEvents:{description:"Should this plugin also apply during events with special event themed quotes? (e.g. Halloween)",type:3,default:!0},enablePluginPresetQuotes:{description:"Enable the quotes preset by this plugin",type:3,default:!0},enableDiscordPresetQuotes:{description:"Enable Discord's preset quotes (including event quotes, during events)",type:3,default:!1},additionalQuotes:{description:"Additional custom quotes to possibly appear, separated by the below delimiter",type:0,default:"",multiline:!0},additionalQuotesDelimiter:{description:"Delimiter for additional quotes",type:0,default:"|"}}),eT=k({name:"LoadingQuotes",description:"Replace Discords loading quotes",authors:[w.Ven,w.KraXen72,w.UlyssesZhan],settings:Rj,patches:[{find:"#{intl::LOADING_DID_YOU_KNOW}",replacement:[{match:/_loadingText.+?(?=(\i)\[.{0,10}\.random)/,replace:"$&$self.mutateQuotes($1),"},{match:/_eventLoadingText.+?(?=(\i)\[.{0,10}\.random)/,replace:"$&$self.mutateQuotes($1),",predicate:()=>Rj.store.replaceEvents}]}],mutateQuotes(e){try{let{enableDiscordPresetQuotes:t,additionalQuotes:o,additionalQuotesDelimiter:n,enablePluginPresetQuotes:i}=Rj.store;t||(e.length=0),i&&e.push(...SJe),e.push(...o.split(n).filter(Boolean)),e.length||e.push(wJe)}catch(t){new ke("LoadingQuotes").error("Failed to mutate quotes",t)}}})});var mhe=x(()=>{});function Lj({className:e}){return r("svg",{viewBox:"0 0 24 24",className:e},r("circle",{cx:"12",cy:"12",r:"8"}))}var fhe=x(()=>{"use strict";d()});var tT,ghe=x(()=>{"use strict";d();Is();xt();I0();B();tT=_n(()=>{let e=new pl,t=new Map;class o extends is.Store{getCount(i){return t.get(i)}async _ensureCount(i){t.has(i)||await xc.preload(i,rl.getDefaultChannel(i).id)}ensureCount(i){!i||t.has(i)||e.push(()=>this._ensureCount(i).then(()=>tl(200),()=>tl(200)))}}return new o(V,{GUILD_MEMBER_LIST_UPDATE({guildId:n,groups:i}){t.set(n,i.reduce((s,a)=>s+(a.id==="offline"?0:a.count),0))},ONLINE_GUILD_MEMBER_COUNT_UPDATE({guildId:n,count:i}){t.set(n,i)}})})});function hhe({className:e}){return r("svg",{viewBox:"0 0 32 32",fill:"currentColor",className:e},r("path",{d:"M15.6668 3C14.2523 3 12.8958 3.5619 11.8956 4.5621C10.8954 5.56229 10.3335 6.91884 10.3335 8.33333V13.6666C10.3335 15.0811 10.8954 16.4378 11.8956 17.438C12.8958 18.4381 14.2523 19 15.6668 19C17.0813 19 18.4378 18.4381 19.438 17.438C20.4382 16.4378 21.0001 15.0811 21.0001 13.6666V8.33333C21.0001 6.91884 20.4382 5.56229 19.438 4.5621C18.4378 3.5619 17.0813 3 15.6668 3Z"}),r("path",{d:"M7.66667 13.6666C7.66667 13.313 7.52619 12.9739 7.27614 12.7238C7.02609 12.4738 6.68695 12.3333 6.33333 12.3333C5.97971 12.3333 5.64057 12.4738 5.39052 12.7238C5.14047 12.9739 5 13.313 5 13.6666C4.99911 16.2653 5.94692 18.7749 7.66545 20.7243C9.38399 22.6736 11.7551 23.9285 14.3334 24.2533V27H11.6667C11.3131 27 10.9739 27.1404 10.7239 27.3905C10.4738 27.6405 10.3334 27.9797 10.3334 28.3333C10.3334 28.6869 10.4738 29.0261 10.7239 29.2761C10.9739 29.5262 11.3131 29.6666 11.6667 29.6666H19.6667C20.0203 29.6666 20.3595 29.5262 20.6095 29.2761C20.8596 29.0261 21 28.6869 21 28.3333C21 27.9797 20.8596 27.6405 20.6095 27.3905C20.3595 27.1404 20.0203 27 19.6667 27H17V24.2533C19.5783 23.9285 21.9494 22.6736 23.6679 20.7243C25.3864 18.7749 26.3343 16.2653 26.3334 13.6666C26.3334 13.313 26.1929 12.9739 25.9428 12.7238C25.6928 12.4738 25.3536 12.3333 25 12.3333C24.6464 12.3333 24.3073 12.4738 24.0572 12.7238C23.8072 12.9739 23.6667 13.313 23.6667 13.6666C23.6667 15.7884 22.8238 17.8232 21.3235 19.3235C19.8233 20.8238 17.7884 21.6666 15.6667 21.6666C13.545 21.6666 11.5101 20.8238 10.0098 19.3235C8.50952 17.8232 7.66667 15.7884 7.66667 13.6666Z"}))}var xhe=x(()=>{"use strict";d()});function Uj({isTooltip:e,tooltipGuildId:t}){let{voiceActivity:o}=P5.use(["voiceActivity"]),n=o&&!e,i=Je([st],()=>Cn()),s=e?t:i?.guild_id,a=Je([lo],()=>{if(!n)return 0;let y=lo.getVoiceStates(s);return y?Object.values(y).filter(({channelId:b})=>{if(!b)return!1;let v=ne.getChannel(b);return v&&Kt.can(Nt.VIEW_CHANNEL,v)}).length:0}),l=Je([h1],()=>h1.getMemberCount(s)),c=Je([tT],()=>tT.getCount(s)),{groups:u}=Je([Oj],()=>Oj.getProps(s,i?.id)),p=Je([Fj],()=>Fj.getMemberListSections(i?.id));if(!e&&(u.length>=1||u[0].id!=="unknown")&&(c=u.reduce((y,b)=>y+(b.id==="offline"?0:b.count),0)),!e&&p&&!a1(p)&&(c=Object.values(p).reduce((y,b)=>y+(b.sectionId==="offline"?0:b.userIds.length),0)),se(()=>{tT.ensureCount(s)},[s]),l==null)return null;let m=B5(a??0),g=c!=null?B5(c):"?";return r("div",{className:Hd("widget",{tooltip:e,"member-list":!e})},r(Ue,{text:`${g} online in this channel`,position:"bottom"},y=>r("div",{...y,className:Hd("container")},r(Lj,{className:Hd("online-count")}),r("span",{className:Hd("online")},g))),r(Ue,{text:`${B5(l)} total server members`,position:"bottom"},y=>r("div",{...y,className:Hd("container")},r(Lj,{className:Hd("total-count")}),r("span",{className:Hd("total")},B5(l)))),n&&a>0&&r(Ue,{text:`${m} members in voice`,position:"bottom"},y=>r("div",{...y,className:Hd("container")},r(hhe,{className:Hd("voice-icon")}),r("span",{className:Hd("voice")},m))))}var yhe=x(()=>{"use strict";d();mt();xt();B();$j();fhe();ghe();xhe()});var Oj,Fj,P5,kJe,B5,Hd,oT,$j=x(()=>{"use strict";d();mhe();Q();tt();H();nt();$();fe();yhe();Oj=Ft("ChannelMemberStore"),Fj=Ft("ThreadMemberListStore"),P5=R({toolTip:{type:3,description:"Show member count on the server tooltip",default:!0,restartNeeded:!0},memberList:{type:3,description:"Show member count in the member list",default:!0,restartNeeded:!0},voiceActivity:{type:3,description:"Show voice activity with member count in the member list",default:!0}}),kJe=new Intl.NumberFormat,B5=e=>kJe.format(e),Hd=de("vc-membercount-"),oT=k({name:"MemberCount",description:"Shows the number of online members, total members, and users in voice channels on the server \u2014 in the member list and tooltip.",authors:[w.Ven,w.Commandtechno,w.Apexo],settings:P5,patches:[{find:"{isSidebarVisible:",replacement:[{match:/children:\[(\i\.useMemo[^}]+"aria-multiselectable")(?<=className:(\i),.+?)/,replace:"children:[$2?.includes('members')?$self.render():null,$1"}],predicate:()=>P5.store.memberList},{find:"GuildTooltip - ",replacement:{match:/#{intl::VIEW_AS_ROLES_MENTIONS_WARNING}.{0,100}(?=])/,replace:"$&,$self.renderTooltip(arguments[0].guild)"},predicate:()=>P5.store.toolTip}],render:ee.wrap(()=>r(Uj,null),{noop:!0}),renderTooltip:ee.wrap(e=>r(Uj,{isTooltip:!0,tooltipGuildId:e.id}),{noop:!0})})});var bhe=x(()=>{});var vhe=x(()=>{});function EJe(e,t,o){let n=t;if(t in e)return void o(e[n]);Object.defineProperty(e,t,{set(i){delete e[n],e[n]=i,o(i)},configurable:!0,enumerable:!1})}var She=x(()=>{"use strict";d()});var Hj={};Ao(Hj,{CONTRIB_ROLE_ID:()=>DE,CONTRIB_ROLE_IDS:()=>__e,ChangeList:()=>Wm,CloseButton:()=>yc,CspBlockedUrls:()=>_1,DONOR_ROLE_ID:()=>xh,DONOR_ROLE_IDS:()=>P_e,Devs:()=>w,EQUIBOP_CONTRIB_ROLE_ID:()=>ME,EQUIBOT_USER_ID:()=>RS,EQUICORD_HELPERS:()=>kL,EQUICORD_TEAM:()=>wL,EquicordDevs:()=>j,EquicordDevsById:()=>a0,GUILD_ID:()=>au,GUILD_IDS:()=>B_e,IS_LINUX:()=>OS,IS_MAC:()=>ri,IS_MOBILE:()=>R_e,IS_WINDOWS:()=>ML,LazyComponent:()=>Rn,Logger:()=>ke,Margins:()=>Z,ModalAPI:()=>Nh,ModalCloseButton:()=>Ut,ModalContent:()=>$e,ModalFooter:()=>ht,ModalHeader:()=>je,ModalRoot:()=>Pe,ModalSize:()=>Po,Modals:()=>v1,NoopComponent:()=>xO,Queue:()=>pl,REACT_GLOBAL:()=>M_e,SUPPORT_CHANNEL_ID:()=>ip,SUPPORT_CHANNEL_IDS:()=>LS,SYM_LAZY_CACHED:()=>Dm,SYM_LAZY_GET:()=>id,Theme:()=>eA,VC_CONTRIB_ROLE_ID:()=>BE,VC_DONOR_ROLE_ID:()=>s1,VC_GUILD_ID:()=>yh,VC_KNOWN_ISSUES_CHANNEL_ID:()=>N_e,VC_REGULAR_ROLE_ID:()=>CL,VC_SUPPORT_CATEGORY_ID:()=>TL,VC_SUPPORT_CHANNEL_ID:()=>EL,VC_SUPPORT_CHANNEL_IDS:()=>IL,VENBOT_USER_ID:()=>AL,VENCORD_CONTRIB_ROLE_ID:()=>NE,VESKTOP_SUPPORT_CHANNEL_ID:()=>Ute,VencordDevsById:()=>s0,ZWSP:()=>KS,canonicalizeDescriptor:()=>$E,canonicalizeFind:()=>dO,canonicalizeMatch:()=>Ti,canonicalizeReplace:()=>jS,canonicalizeReplacement:()=>WS,checkIntersecting:()=>BL,classNameFactory:()=>de,classNameToSelector:()=>SL,classes:()=>me,closeAllModals:()=>li,closeModal:()=>vo,copyToClipboard:()=>Oo,copyWithToast:()=>$t,createAndAppendStyle:()=>gc,debounce:()=>rn,escapeRegExp:()=>mO,fetchUserProfile:()=>dp,formatDuration:()=>QS,formatDurationMs:()=>ZS,getCurrentChannel:()=>Cn,getCurrentGuild:()=>bc,getGuildAcronym:()=>Ba,getIntlMessage:()=>St,getIntlMessageFromHash:()=>KO,getTheme:()=>tA,getUniqueUsername:()=>yu,hasGuildFeature:()=>S1,humanFriendlyJoin:()=>pO,identity:()=>Nl,insertTextIntoChatInputBox:()=>xu,interpolateIfDefined:()=>FS,isAnyPluginDev:()=>lu,isEquicordGuild:()=>l0,isEquicordPluginDev:()=>_E,isEquicordSupport:()=>bh,isNonNullish:()=>kd,isObject:()=>L_e,isObjectEmpty:()=>a1,isPluginDev:()=>PE,isPrimitiveReactNode:()=>yO,isSupportChannel:()=>LL,isTruthy:()=>R0,localStorage:()=>ca,makeCodeblock:()=>Bm,makeLazy:()=>sd,mergeDefaults:()=>k1,onceDefined:()=>EJe,onlyOnce:()=>$m,openImageModal:()=>us,openInviteModal:()=>Gi,openMediaModal:()=>WO,openModal:()=>Ee,openModalLazy:()=>Om,openPrivateChannel:()=>yoe,openUserProfile:()=>or,parseUrl:()=>NL,pluralise:()=>RL,proxyLazy:()=>_n,runtimeHashMessageKey:()=>kh,sendMessage:()=>Na,shouldShowContributorBadge:()=>PL,shouldShowEquicordContributorBadge:()=>_L,sleep:()=>tl,stripIndent:()=>noe,toInlineCode:()=>rRe,tryOrElse:()=>RE,useAwaiter:()=>Cr,useCleanupEffect:()=>uRe,useCspErrors:()=>kU,useFixedTimer:()=>bO,useForceUpdater:()=>Vo,useIntersection:()=>rw,useTimer:()=>iw,wordsFromCamel:()=>YS,wordsFromKebab:()=>Z_e,wordsFromPascal:()=>X_e,wordsFromSnake:()=>Q_e,wordsFromTitle:()=>J_e,wordsToCamel:()=>V_e,wordsToKebab:()=>tRe,wordsToPascal:()=>oRe,wordsToSnake:()=>eRe,wordsToTitle:()=>Nm});var dv=x(()=>{"use strict";d();la();She();zw();cs();H();EU();nt();mt();Km();qS();Is();wh();r1();At();co();rA();xt();at();M1();ad();I0();qo();Da();});function zj(e,t){let o=e.replace("#","");o.length===3&&(o=o.split("").map(c=>c+c).join(""));let n=parseInt(o,16),i=n>>16&255,s=n>>8&255,a=n&255;i=Math.max(0,Math.min(255,i+Math.round(i*(t/100)))),s=Math.max(0,Math.min(255,s+Math.round(s*(t/100)))),a=Math.max(0,Math.min(255,a+Math.round(a*(t/100))));let l=(i<<16|s<<8|a).toString(16).padStart(6,"0");return l==="ffffff"||l==="000000"?e:`#${l}`}function R5(e){let t=e.trim();if(!e)return!0;if(t.length!==e.length)return!1;if(t.toLowerCase()==="role")return!0;if(e.toLowerCase().includes("role")){let i=parseInt(khe.exec(e)?.[1]||"");return!isNaN(i)&&i<=100&&i>=-100}let o=document.createElement("div");o.style.borderColor=e;let n=o.style.borderColor!==""&&CJe.test(e);return o.remove(),n}function pv(e,t,o,n){let i={normal:{original:{color:o,"text-decoration-color":o},adjusted:{color:o,"text-decoration-color":o}},gradient:null};if(!t.trim())return i;let s=null,a=t,l=t,c=t,u=t,p=t,m=t;if(t.toLowerCase().includes("role")){let b=khe.exec(t)?.[1]||"";if(b&&isNaN(parseInt(b)))return i;let v=e?.colorStrings||{};if(a=v.primaryColor||null,l=v.secondaryColor||null,c=v.tertiaryColor||null,u=a,p=l,m=c,!a)return i;a&&b&&(u=zj(a,parseInt(b))),l&&b&&(p=zj(l,parseInt(b))),c&&b&&(m=zj(c,parseInt(b)))}s=!n||!l?null:c?"linear-gradient(to right,var(--custom-gradient-color-1),var(--custom-gradient-color-2),var(--custom-gradient-color-3),var(--custom-gradient-color-1))":"linear-gradient(to right,var(--custom-gradient-color-1),var(--custom-gradient-color-2),var(--custom-gradient-color-1))";let g={isolation:"isolate"},y={"background-clip":"text","background-size":"100px auto","-webkit-text-fill-color":"transparent","-webkit-background-clip":"text",isolation:"isolate"};return{normal:{original:{...g,color:a,"text-decoration-color":a,"-webkit-text-fill-color":a},adjusted:{...g,color:u,"text-decoration-color":u,"-webkit-text-fill-color":u}},gradient:s?{animated:{...y,color:a,"text-decoration-color":a,"--custom-gradient-color-1":a,"--custom-gradient-color-2":l||a,"--custom-gradient-color-3":c||a,"background-image":s,animation:"show-me-your-name-animation 1.5s linear infinite"},static:{original:{...y,color:a,"text-decoration-color":a,"--custom-gradient-color-1":a,"--custom-gradient-color-2":l||a,"--custom-gradient-color-3":c||a,"background-image":s},adjusted:{...y,color:u,"text-decoration-color":u,"--custom-gradient-color-1":u,"--custom-gradient-color-2":p||u,"--custom-gradient-color-3":m||u,"background-image":s}}}:null}}function Ehe(e){return e.trim().split(/(?<!,\s*)\s+/)}function Ahe(e){let[t,o]=e.split(TJe),n=e.replace(t,"").replace(o,"").trim().replaceAll(/{|}/g,"").split(/,\s*/);return{prefix:t?t.trim():"",suffix:o?o.trim():"",targetProcessedNames:n.map(i=>i.trim()).filter(i=>i.length>0)}}function IJe(e){let t=Ehe(e);if(t.length>4||!t.length||t.some(n=>{let{prefix:i,suffix:s,targetProcessedNames:a}=Ahe(n);return i.length>3||s.length>3||!!i&&!whe.test(i)||!!s&&!whe.test(s)||a.length>5||a.some(l=>!["custom","friend","nick","display","user"].includes(l.trim()))}))return!1}function DJe(e,t,o){let n=null;if(o){let m=e;m?.bot&&!isNaN(m?.discriminator)&&Number(m?.discriminator)!==0&&(n=m.discriminator,m&&(m.globalName=m.username))}let i=e?.username?sl.enabled?e.username[0]+"...":e.username+(n?`#${n}`:""):null,s=e?.globalName?sl.enabled&&(t||e.globalName.toLowerCase()===e.username.toLowerCase())?e.globalName[0]+"...":e.globalName:null,a=e?.nick?sl.enabled&&(t||e.nick.toLowerCase()===e.username.toLowerCase())?e.nick[0]+"...":e.nick:null,l=e&&Tt.getNickname(e.id)||null,c=l?sl.enabled&&(t||l.toLowerCase()===e.username.toLowerCase())?l[0]+"...":l:null,u=e?.id&&jp[e.id]||null,p=u?sl.enabled&&(t||u.toLowerCase()===e.username.toLowerCase())?u[0]+"...":u:null;return{username:i,display:s,nick:a,friend:c,custom:p}}function Che(e){let{user:t,type:o}=e,n=e.guildId||e.tags?.props?.displayProfile?.guildId||null,i=n?Lt.getMember(n,t.id):null,s=t&&i?{...t,...i}:t||i||null;return jj(s,null,null,o,"",o==="reactionsTooltip"||o==="profilesTooltip")}function MJe(e){return Che(e)[2]}function NJe(e){return Che(e)[1]}function The(e){let{hideDefaultAtSign:t,replies:o}=Vr.use(["hideDefaultAtSign","replies"]),{message:n,userOverride:i,isRepliedMessage:s,withMentionPrefix:a}=e,l=!!n.webhookId&&!n.interaction,c=ne.getChannel(n.channel_id)||{},u=i||n.author,p=l?u:z.getUser(u.id),m=l?null:Lt.getMember(c.guild_id,u.id),g=p&&m?{...p,...m}:p||m||null,y=t&&(!s||o)?"":a?"@":"";return jj(g,c.id,n.id,s?"replies":"messages",y)}function BJe(e){return The(e)[1]}function PJe(e){return The(e)[0]}function _Je(e){let{hideDefaultAtSign:t,mentions:o}=Vr.use(["hideDefaultAtSign","mentions"]),{channelId:n,userId:i,props:s}=e,a=n&&ne.getChannel(n)||null,l=z.getUser(i),c=a?Lt.getMember(a.guild_id,i):null,u=l&&c?{...l,...c}:l||c||null,p=t&&o?"":"@";return jj(u,n||null,s?.messageId||null,"mentions",p)[1]}function jj(e,t,o,n,i,s=!1){let a=n==="messages",l=n==="replies",c=n==="mentions",u=n==="membersList",p=n==="profilesPopout",m=n==="reactionsPopout",y=n==="reactionsTooltip"||m,b=n==="voiceChannel",v=s?Vr.store:Vr.use(["messages","replies","mentions","memberList","profilePopout","reactions","discriminators","hideDefaultAtSign","truncateAllNamesWithStreamerMode","removeDuplicates","ignoreGradients","ignoreFonts","animateGradients","includedNames","customNameColor","friendNameColor","nicknameColor","displayNameColor","usernameColor","nameSeparator","triggerNameRerender"]),{messages:E,replies:A,mentions:C,memberList:I,profilePopout:N,reactions:_,discriminators:O,hideDefaultAtSign:F,truncateAllNamesWithStreamerMode:J,removeDuplicates:G,ignoreGradients:te,ignoreFonts:K,animateGradients:oe,includedNames:le,customNameColor:he,friendNameColor:Ae,nicknameColor:Ce,displayNameColor:ye,usernameColor:ce,nameSeparator:pe,triggerNameRerender:xe}=v,Ze=e?.guildId?(ct.getGuild(e.guildId)??{}).premiumFeatures?.features.includes("ENHANCED_ROLE_COLORS"):!1,ge=getComputedStyle(document.documentElement)?.getPropertyValue("--text-muted")?.trim()||"#72767d",ae=Ehe(le),Ne=e?pv(e,ce.trim(),"",Ze):null,Fe=e?pv(e,ye.trim(),"",Ze):null,Xe=e?pv(e,Ce.trim(),"",Ze):null,It=e?pv(e,Ae.trim(),"",Ze):null,Ve=e?pv(e,he.trim(),"",Ze):null,_t={color:ge,"-webkit-text-fill-color":ge,isolation:"isolate","white-space":"pre","font-family":"var(--font-primary)","letter-spacing":"normal"},{username:Wt,display:po,nick:no,friend:mo,custom:Sn}=DJe(e,J,O),Br={user:[Wt,Ne],display:[po,Fe],nick:[no,Xe],friend:[mo,It],custom:[Sn,Ve]},be=[];for(let Er of ae){let{prefix:Xy,suffix:Jy,targetProcessedNames:xm}=Ahe(Er),np=null,DS=null,ym="";for(let rp of xm)if(Br[rp]&&(np=Br[rp][0],DS=Br[rp][1],ym=rp,np))break;!np||!DS||be.push({prefix:Xy||"",name:np,wrapped:np,type:ym,suffix:Jy||"",style:DS})}be.length||be.push({prefix:"",name:Wt||"Unknown",wrapped:Wt||"Unknown",suffix:"",style:Ne});let Qe=be.shift(),lt=be.shift(),we=be.shift(),Te=be.shift(),ft=be.shift(),Qo=s?Qe.name||"":_5(Qe.name||""),ro=s?(lt??{}).name||"":_5((lt??{}).name||""),Bn=s?(we??{}).name||"":_5((we??{}).name||""),kr=s?(Te??{}).name||"":_5((Te??{}).name||""),hi=s?(ft??{}).name||"":_5((ft??{}).name||"");if(Qe.wrapped=Qo,lt&&(lt.wrapped=ro),we&&(we.wrapped=Bn),Te&&(Te.wrapped=kr),ft&&(ft.wrapped=hi),a&&!E)return[null,null,null];if(l&&!A)return[null,null,null];if(c&&!C)return[null,null,null];if(u&&!I)return[null,null,null];if(p&&!N)return[null,null,null];if(y&&!_)return[null,null,null];if(b&&!_)return[null,null,null];if(!e||!Wt){let Er=`${i}Unknown`;return[Er,r(f,null,Er),Er]}let lr=new Set([Qe,lt,we,Te,ft].filter(Boolean).map(Er=>Er.name.toLowerCase())).size>1;G&&(ft&&Te&&ft.name.toLowerCase()===Te.name.toLowerCase()&&(ft.type==="user"&&lr?Te=null:ft=null),ft&&we&&ft.name.toLowerCase()===we.name.toLowerCase()&&(ft.type==="user"&&lr?we=null:ft=null),ft&&lt&&ft.name.toLowerCase()===lt.name.toLowerCase()&&(ft.type==="user"&&lr?lt=null:ft=null),ft&&Qe&&ft.name.toLowerCase()===Qe.name.toLowerCase()&&(ft.type==="user"&&lr?Qe=null:ft=null),Te&&we&&Te.name.toLowerCase()===we.name.toLowerCase()&&(Te.type==="user"&&lr?we=null:Te=null),Te&&lt&&Te.name.toLowerCase()===lt.name.toLowerCase()&&(Te.type==="user"&&lr?lt=null:Te=null),Te&&Qe&&Te.name.toLowerCase()===Qe.name.toLowerCase()&&(Te.type==="user"&&lr?Qe=null:Te=null),we&&lt&&we.name.toLowerCase()===lt.name.toLowerCase()&&(we.type==="user"&&lr?lt=null:we=null),we&&Qe&&we.name.toLowerCase()===Qe.name.toLowerCase()&&(we.type==="user"&&lr?Qe=null:we=null),lt&&Qe&&lt.name.toLowerCase()===Qe.name.toLowerCase()&&(lt.type==="user"&&lr?Qe=null:lt=null));let Eo=[Qe,lt,we,Te,ft].filter(Boolean);Qe=Eo.shift(),lt=Eo.shift(),we=Eo.shift(),Te=Eo.shift(),ft=Eo.shift();let t0=c||m,Ca=pv(e,"Role","",Ze),gm=!!Ca?.gradient&&Object.keys(Ca.gradient).length>0,op=(t&&o?Rt.getMessage(t,o):null)?.showMeYourNameGroupId||null,eu=a||l||c?o&&oy.has(o)||op&&oy.has(op):m?Wj.has(e.id):!1,Xa=eu&&gm,dh=Xa&&!AJe.useReducedMotion,Ja=oe&&!te,ph=i+Qe.name,Vu=lt&&Ja?lt.prefix+lt.name+lt.suffix:"",tu=we&&Ja?we.prefix+we.name+we.suffix:"",hm=Te&&Ja?Te.prefix+Te.name+Te.suffix:"",ou=ft&&Ja?ft.prefix+ft.name+ft.suffix:"",Le=[ph,Vu,tu,hm,ou].filter(Boolean).join(pe).trim(),Ye=eu?" show-me-your-name-gradient-hovered":"",fo=t0?"show-me-your-name-gradient show-me-your-name-gradient-inherit-bg"+Ye:"show-me-your-name-gradient show-me-your-name-gradient-unset-bg"+Ye,nu="show-me-your-name-name-group show-me-your-name-first-name-group",Dl="show-me-your-name-name-group show-me-your-name-second-name-group",ln="show-me-your-name-name-group show-me-your-name-third-name-group",IS="show-me-your-name-name-group show-me-your-name-fourth-name-group",Jn="show-me-your-name-name-group show-me-your-name-fifth-name-group",mh="show-me-your-name-name show-me-your-name-first-name",ZR="show-me-your-name-name show-me-your-name-second-name",Zy="show-me-your-name-name show-me-your-name-third-name",Ys="show-me-your-name-name show-me-your-name-fourth-name",ed="show-me-your-name-name show-me-your-name-fifth-name",ru="show-me-your-name-affix show-me-your-name-prefix",Fi="show-me-your-name-affix show-me-your-name-suffix",fc={...m?{display:"flex",flexWrap:"wrap",lineHeight:"1.1em",fontSize:"0.9em"}:{}},td=r("span",{style:fc,className:"show-me-your-name-container"},i&&r("span",null,i),r("span",{className:Xa?fo+" "+nu:nu,"data-text":Xa?ph:void 0,style:Xa&&t0&&Ca?Ca.gradient.animated:void 0},r("span",{className:mh,style:Ca?dh&&Ca.gradient?Ca.gradient.animated:Ca.gradient?Ca.gradient.static.original:Ca.normal.original:void 0},Qe.wrapped)),[{name:lt,dataText:Vu,groupClass:Dl,nameClass:ZR,position:"second"},{name:we,dataText:tu,groupClass:ln,nameClass:Zy,position:"third"},{name:Te,dataText:hm,groupClass:IS,nameClass:Ys,position:"fourth"},{name:ft,dataText:ou,groupClass:Jn,nameClass:ed,position:"fifth"}].map(({name:Er,dataText:Xy,groupClass:Jy,nameClass:xm,position:np})=>Er&&r("span",{key:np,className:Xa&&Ja?fo+" "+Jy:Jy,"data-text":Xa&&Xy?Xy:void 0,style:Xa&&Ja?Er.style.gradient.animated:void 0},r("span",{style:_t,className:ru},r("span",null,pe),Er.prefix),r("span",{className:xm,style:{...K?{"font-family":"var(--font-primary)","letter-spacing":"normal"}:{},...te?Er.style.normal.adjusted:dh&&Ja&&Er.style.gradient?Er.style.gradient.animated:Er.style.gradient?Er.style.gradient.static.original:Er.style.normal.adjusted}},Er.wrapped),r("span",{style:_t,className:Fi},Er.suffix))));return[Le,td,Qe.name]}function RJe(e,t){let o=e?.id,n=e?.showMeYourNameGroupId??"";se(()=>{e&&(t?(Gj(o),Gj(n)):(qj(o),qj(n)))},[o,n,t])}function Gj(e){if(!e)return;let t=oy.get(e)||0;oy.set(e,t+1),t===0&&(Vr.store.triggerNameRerender=!Vr.store.triggerNameRerender)}function qj(e){if(!e)return;let t=oy.get(e)||0;t<=1?(oy.delete(e),Vr.store.triggerNameRerender=!Vr.store.triggerNameRerender):oy.set(e,t-1)}function LJe(e){Wj.add(e),Vr.store.triggerNameRerender=!Vr.store.triggerNameRerender}function OJe(e){Wj.delete(e),Vr.store.triggerNameRerender=!Vr.store.triggerNameRerender}function FJe({modalProps:e,user:t}){let[o,n]=L(jp[t.id]??"");return r(Pe,{...e},r(je,null,r(re,{tag:"h1",style:{flexGrow:1,margin:0}},jp[t.id]?"Change SMYN Nickname":"Add SMYN Nickname"),r(Ut,{onClick:e.onClose})),r($e,null,r(re,{tag:"h3",style:{marginBottom:8,fontSize:"16px",fontWeight:"400",lineHeight:"1.25",color:"var(--text-subtle)"}},"Set a custom SMYN nickname for this user. Make use of it by specifying {custom} in the SMYN template settings."),r("div",{style:{paddingTop:"10px",flexGrow:0}}),r(re,{tag:"h3",style:{marginBottom:8,fontSize:"14px",fontWeight:600}},"SMYN Nickname"),r(qe,{value:o,maxLength:32,onChange:n,placeholder:t.globalName??t.username,style:{width:"100%"}}),r(Ia,{className:"show-me-your-name-reset-button",onClick:async()=>{n(""),delete jp[t.id],await Oe.set("SMYNCustomNicknames",jp),Vr.store.triggerNameRerender=!Vr.store.triggerNameRerender}},"Reset SMYN Nickname"),r("div",{style:{paddingTop:"10px",flexGrow:0}})),r(ht,{className:"show-me-your-name-modal-footer-container"},r(Me,{variant:"primary",onClick:async()=>{let i=o.trim().slice(0,32).trim();i?jp[t.id]=i:delete jp[t.id],await Oe.set("SMYNCustomNicknames",jp),Vr.store.triggerNameRerender=!Vr.store.triggerNameRerender,e.onClose()}},"Save"),r(Me,{variant:"secondary",style:{marginRight:"8px"},onClick:e.onClose},"Cancel")))}var _5,AJe,CJe,khe,whe,TJe,jp,oy,Wj,UJe,Vr,mv,Kj=x(()=>{"use strict";d();vhe();Un();dr();Wo();Q();Ad();Yj();H();dv();$();fe();B();_5=vt("lastIndex;return"),AJe=Ft("AccessibilityStore"),CJe=/^#(?:[\da-f]{3}){1,2}$|^#(?:[\da-f]{4}){1,2}$|(rgb|hsl)a?\((\s*-?\d+%?\s*,){2}(\s*-?\d+%?\s*)\)|(rgb|hsl)a?\((\s*-?\d+%?\s*,){3}\s*(0|(0?\.\d+)|1)\)$/iu,khe=/^role((?:\+|-)\d{0,4})?$/iu,whe=/^[\p{S}\p{P}]{1,3}$/iu,TJe=/(?:\{(?:custom|friend|nick|display|user)(?:,\s*(?:custom|friend|nick|display|user))*\})/iu,jp={};oy=new Map,Wj=new Set;UJe=(e,{user:t})=>{if(!t)return;let o=z.getCurrentUser();if(!o||t.id===o.id)return;let n=Qt("user-profile",e);!n&&e.push(r(M.MenuSeparator,null)),(n||e).push(r(M.MenuItem,{id:"smyn-custom-nickname",label:jp[t.id]?"Change SMYN Nickname":"Add SMYN Nickname",action:()=>Ee(i=>r(ee,null,r(FJe,{modalProps:i,user:t})))}))},Vr=R({messages:{type:3,default:!0,description:"Display custom name format in messages."},replies:{type:3,default:!0,description:"Display custom name format in replies."},mentions:{type:3,default:!0,description:"Display custom name format in mentions."},memberList:{type:3,default:!0,description:"Display the first available name listed in your custom name format in the member list."},profilePopout:{type:3,default:!0,description:"Display the first available name listed in your custom name format in profile popouts."},voiceChannels:{type:3,default:!0,description:"Display the first available name listed in your custom name format in voice channels."},reactions:{type:3,default:!0,description:"Display the first available name listed in your custom name format in reaction tooltips, and the full name in reaction popouts."},discriminators:{type:3,default:!0,description:"Append discriminators to usernames for bots. Discriminators were deprecated for users, but are still used for bots. By default, a bot's username is equivalent to a user's global name, therefore multiple bots can have the same username. Appending discriminators makes them unique again."},hideDefaultAtSign:{type:3,default:!1,description:'Hide the default "@" symbol before the name in mentions and replies. Only applied if either feature is enabled.'},truncateAllNamesWithStreamerMode:{type:3,default:!0,description:"Truncate all names, not just usernames, while in Streamer Mode."},removeDuplicates:{type:3,default:!0,description:"If any of the names are equivalent, remove them, leaving only the unique names."},ignoreFonts:{type:3,default:!1,description:"For the non-primary names, use Discord's default fonts regardless of the user's custom nitro font."},ignoreGradients:{type:3,default:!0,description:"For the non-primary names, if the role has a gradient, ignore it in favor of the color set below."},animateGradients:{type:3,default:!1,description:'For the non-primary names, if the role has a gradient, animate it. This is disabled by "Ignore Gradients" and reduced motion.'},nameSeparator:{type:0,description:"The separator to use between names. The default is a single space.",default:" "},includedNames:{type:0,description:"The order to display usernames, display names, nicknames, friend names, and custom names. Use the following placeholders: {user}, {display}, {nick}, {friend}, {custom}. You can provide multiple name options to use as fallbacks if one is unavailable by separating them with commas as such: {custom, friend, nick}. You can have up to three prefixes and three suffixes per name.",default:"{custom, friend, nick} [{display}] (@{user})",isValid:IJe},customNameColor:{type:0,description:`The color to use for the custom name you assigned a user if it's not the first displayed. Leave blank for default. Accepts hex(a), rgb(a), or hsl(a) input. Use "Role" to follow the user's top role color. Use "Role+-#" to adjust the brightness by that percentage (ex: "Role+15")`,default:"Role-25",isValid:R5},friendNameColor:{type:0,description:`The color to use for a friend's nickname if it's not the first displayed. Leave blank for default. Accepts hex(a), rgb(a), or hsl(a) input. Use "Role" to follow the user's top role color. Use "Role+-#" to adjust the brightness by that percentage (ex: "Role+15")`,default:"Role-25",isValid:R5},nicknameColor:{type:0,description:`The color to use for the nickname if it's not the first displayed. Leave blank for default. Accepts hex(a), rgb(a), or hsl(a) input. Use "Role" to follow the user's top role color. Use "Role+-#" to adjust the brightness by that percentage (ex: "Role+15")`,default:"Role-25",isValid:R5},displayNameColor:{type:0,description:`The color to use for the display name if it's not the first displayed. Leave blank for default. Accepts hex(a), rgb(a), or hsl(a) input. Use "Role" to follow the user's top role color. Use "Role+-#" to adjust the brightness by that percentage (ex: "Role+15")`,default:"Role-25",isValid:R5},usernameColor:{type:0,description:`The color to use for the username if it's not the first displayed. Leave blank for default. Accepts hex(a), rgb(a), or hsl(a) input. Use "Role" to follow the user's top role color. Use "Role+-#" to adjust the brightness by that percentage (ex: "Role+15")`,default:"Role-25",isValid:R5},triggerNameRerender:{type:3,description:"Trigger a name rerender by toggling this setting.",default:!1,hidden:!0}}),mv=k({name:"ShowMeYourName",description:"Display any permutation of custom nicknames, friend nicknames, server nicknames, display names, and usernames in chat.",authors:[w.Rini,w.TheKodeToad,j.Etorix,w.sadan,w.prism],tags:["SMYN","Nicknames","Custom Nicknames"],isModified:!0,settings:Vr,patches:[{find:'="SYSTEM_TAG"',group:!0,replacement:[{match:/(onContextMenu:\i,children:)(.{0,250}?),"data-text":(\i\+\i)/,replace:'$1$self.getMessageNameElement(arguments[0])??($2),"data-text":$self.getMessageNameText(arguments[0])??($3)'},{match:/(\(\{)(shouldSubscribe)/,replace:"$1message:arguments[0].message,$2"}]},{find:'CUSTOM_GIFT?"":',replacement:{match:/(isHovered:(\i).{0,1300}?\(\i,\i,\i\);)(let \i=\i.id===\i)/,replace:"$1arguments[0].message.showMeYourNameGroupId=!!arguments[0].groupId?`g-${arguments[0].groupId}`:null;$self.handleHoveringMessage(arguments[0].message,$2);$3"}},{find:".USER_MENTION)",replacement:[{match:/(let \i=\i=>\(0,)/,replace:"const showMeYourNameMention=$self.getMentionNameElement(arguments[0]);$1"},{match:/(?<=onContextMenu:\i,\.\.\.\i,children:)/,replace:"showMeYourNameMention??",predicate:()=>!yt(fv.name)}]},{find:"noStyleAndInteraction},",replacement:{match:/(className:"mention",)/,replace:"$1props:arguments[2],"}},{find:"let{colorRoleName:",replacement:{match:/(let{colorRoleName:\i,colorString:\i,colorStrings:\i,)name:(\i)/,replace:'$1showMeYourNameName:$2=$self.getMemberListProfilesReactionsVoiceNameText({...arguments[0],type:"membersList"})??(arguments[0].name)'}},{find:"shouldWrap:!0,loop:!0,inProfile:!0",replacement:{match:/(tags:\i,)nickname:(\i)/,replace:'$1showMeYourNameNickname:$2=$self.getMemberListProfilesReactionsVoiceNameText({...arguments[0],type:"profilesPopout"})??(arguments[0].nickname)'}},{find:'id:"view-server-profile",',group:!0,replacement:[{match:/(displayName:)(\i.\i.getName\(void 0,void 0,\i\))/,replace:'$1$self.getMemberListProfilesReactionsVoiceNameText({user:arguments[0].user,guildId:null,type:"profilesTooltip"})??($2)'},{match:/(displayName:)(\i.\i.getName\(\i,\i,\i\))/,replace:'$1$self.getMemberListProfilesReactionsVoiceNameText({user:arguments[0].user,guildId:arguments[0].guildId,type:"profilesTooltip"})??($2)'}]},{find:"reactionTooltip1,",replacement:{match:/(\i.\i.getName\((\i),\i\?\.id,(\i)\))/,replace:'$self.getMemberListProfilesReactionsVoiceNameText({user:$3,guildId:$2,type:"reactionsTooltip"})??($1)'}},{find:"MESSAGE,userId:",group:!0,replacement:[{match:/(?<=return\(0,\i.\i\)\(\i.\i,{className:\i.\i,)(?=onContextMenu:\i=>)/,replace:"onMouseEnter:()=>{$self.addHoveringReactionPopout(arguments[0].user.id)},onMouseLeave:()=>{$self.removeHoveringReactionPopout(arguments[0].user.id)},$2"},{match:/(?<=Child,{className:\i.\i,children:)/,replace:'($self.getMemberListProfilesReactionsVoiceNameElement({user:arguments[0].user,guildId:arguments[0].guildId,type:"reactionsPopout"}))??'}]},{find:",connectUserDragSource:",replacement:{match:/(serverDeaf:\i,)nick:(\i)/,replace:'$1showMeYourNameVoice:$2=$self.getMemberListProfilesReactionsVoiceNameText({user:arguments[0].user,guildId:arguments[0].channel.guild_id,type:"voiceChannel"})??(arguments[0].nick)'}}],async start(){jp=await Oe.get("SMYNCustomNicknames")??{}},contextMenus:{"user-context":UJe},flux:{RELATIONSHIP_UPDATE(e){Vr.store.triggerNameRerender=!Vr.store.triggerNameRerender},RUNNING_STREAMER_TOOLS_CHANGE(e){Vr.store.triggerNameRerender=!Vr.store.triggerNameRerender},ACCESSIBILITY_SYSTEM_PREFERS_REDUCED_MOTION_CHANGED(e){Vr.store.triggerNameRerender=!Vr.store.triggerNameRerender},ACCESSIBILITY_SET_PREFERS_REDUCED_MOTION(e){Vr.store.triggerNameRerender=!Vr.store.triggerNameRerender}},addHoveringMessage:Gj,removeHoveringMessage:qj,handleHoveringMessage:RJe,addHoveringReactionPopout:LJe,removeHoveringReactionPopout:OJe,getMessageNameText:PJe,getMessageNameElement:BJe,getMentionNameElement:_Je,getMemberListProfilesReactionsVoiceNameText:MJe,getMemberListProfilesReactionsVoiceNameElement:NJe})});function $Je(){return r("svg",{className:"vc-mentionAvatars-icon vc-mentionAvatars-role-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},r("path",{d:"M14 8.00598C14 10.211 12.206 12.006 10 12.006C7.795 12.006 6 10.211 6 8.00598C6 5.80098 7.794 4.00598 10 4.00598C12.206 4.00598 14 5.80098 14 8.00598ZM2 19.006C2 15.473 5.29 13.006 10 13.006C14.711 13.006 18 15.473 18 19.006V20.006H2V19.006Z"}),r("path",{d:"M20.0001 20.006H22.0001V19.006C22.0001 16.4433 20.2697 14.4415 17.5213 13.5352C19.0621 14.9127 20.0001 16.8059 20.0001 19.006V20.006Z"}),r("path",{d:"M14.8834 11.9077C16.6657 11.5044 18.0001 9.9077 18.0001 8.00598C18.0001 5.96916 16.4693 4.28218 14.4971 4.0367C15.4322 5.09511 16.0001 6.48524 16.0001 8.00598C16.0001 9.44888 15.4889 10.7742 14.6378 11.8102C14.7203 11.8418 14.8022 11.8743 14.8834 11.9077Z"}))}function Qj(e){return Ihe.store.showAtSymbol?`@${e}`:e}var Ihe,fv,Yj=x(()=>{"use strict";d();bhe();Wo();Q();tt();Kj();H();$();B();Ihe=R({showAtSymbol:{type:3,description:"Whether the the @ symbol should be displayed on user mentions",default:!0}});fv=k({name:"MentionAvatars",description:"Shows user avatars and role icons inside mentions",authors:[w.Ven,w.SerStars],patches:[{find:".USER_MENTION)",replacement:{match:/children:`@\$\{(\i\?\?\i)\}`(?<=\.useName\((\i)\).+?)/,replace:"children:$self.renderUsername({username:$1,user:$2,showMeYourNameMention:typeof showMeYourNameMention!=='undefined'?showMeYourNameMention:undefined})"}},{find:".ROLE_MENTION)",replacement:{match:/children:\[\i&&.{0,100}className:\i.\i,background:!1,.{0,50}?,\i(?=\])/,replace:"$&,$self.renderRoleIcon(arguments[0])"}},{find:".hasUniqueUsername()?null:`#",replacement:{match:/(?<=,(\i)\).{0,55})`@\$\{(\i)\}`/,replace:"$self.renderInputMention($2,$1)"}}],settings:Ihe,renderUsername:ee.wrap(({user:e,username:t,showMeYourNameMention:o})=>{let[n,i]=L(!1),s=yt(mv.name)&&o?o:r(f,null,Qj(t));return r("span",{onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),className:"vc-mentionAvatars-container"},e&&r("img",{src:e.getAvatarURL(hn.getGuildId(),16,n),className:"vc-mentionAvatars-icon",style:{borderRadius:"50%"}}),s)},{noop:!0}),renderInputMention(e,t){return t?r(f,null,r("img",{src:t.getAvatarURL(hn.getGuildId(),16),className:"vc-mentionAvatars-icon",style:{borderRadius:"50%"}}),Qj(e)):Qj(e)},renderRoleIcon:ee.wrap(({roleId:e,guildId:t})=>{if(!e)return null;let o=tr.getRole(t,e);return o?.icon?r("img",{className:"vc-mentionAvatars-icon vc-mentionAvatars-role-icon",src:`${location.protocol}//${window.GLOBAL_ENV.CDN_HOST}/role-icons/${e}/${o.icon}.webp?size=24&quality=lossless`}):r($Je,null)},{noop:!0})})});var L5,Ou,nT=x(()=>{"use strict";d();Q();H();$();B();L5=R({userList:{description:"List of user ids to allow or exempt pings for (separated by commas or spaces)",type:0,default:"1234567890123445,1234567890123445",multiline:!0},roleList:{description:"List of role ids to allow or exempt pings for (separated by commas or spaces)",type:0,default:"1234567890123445,1234567890123445",multiline:!0},shouldPingListed:{description:"Behaviour",type:4,options:[{label:"Do not ping the listed users / roles",value:!1},{label:"Only ping the listed users / roles",value:!0,default:!0}]},inverseShiftReply:{description:"Invert Discord's shift replying behaviour (enable to make shift reply mention user)",type:3,default:!1}}),Ou=k({name:"NoReplyMention",description:"Disables reply pings by default",authors:[w.DustyAngel47,w.rae,w.pylix,w.outfoxxed],settings:L5,shouldMention(e,t){let o=L5.store.userList.includes(e.author.id),n=ne.getChannel(e.channel_id);if(n?.guild_id&&!o){let s=Lt.getMember(n.guild_id,e.author.id)?.roles;o=!!s&&s.some(a=>L5.store.roleList.includes(a))}let i=L5.store.shouldPingListed?o:!o;return L5.store.inverseShiftReply?t!==i:!t&&i},patches:[{find:',"Message")}function',replacement:{match:/:(\i),shouldMention:!(\i)\.shiftKey/,replace:":$1,shouldMention:$self.shouldMention($1,$2.shiftKey)"}}]})});function Rhe(e){return e.key==="Shift"?"SHIFT":e.key==="Control"?"CTRL":e.key==="Alt"?"ALT":null}function O5(e){return e==="NONE"?Lc.size===0:Lc.has(e)}function tW(e){D.show({message:e,type:D.Type.FAILURE,id:D.genId(),options:{duration:3e3}})}async function jJe(e,t,o,n,i){let s=o.trim();if(!s)return;if(n.guild_id&&(!Kt.can(Nt.ADD_REACTIONS,n)||!Kt.can(Nt.READ_MESSAGE_HISTORY,n))){tW("Cannot react: Missing permissions");return}let a=s.match(/^:?([\w-]+):(\d+)$/),l=a?`${a[1]}:${a[2]}`:s,c=i.reactions?.some(u=>{let p=u.emoji.id?`${u.emoji.name}:${u.emoji.id}`:u.emoji.name;return u.me&&p===l});try{c?await Ht.del({url:jo.Endpoints.REACTION(e,t,l,"@me")}):await Ht.put({url:jo.Endpoints.REACTION(e,t,l,"@me")})}catch(u){new ke("MessageClickActions").error("Failed to toggle reaction:",u)}}function WJe(e,t){$t(`https://discord.com/channels/${t.guild_id??"@me"}/${t.id}/${e.id}`,"Link copied!")}function KJe(e,t){if(!Kt.can(Nt.MANAGE_MESSAGES,e)){tW("Cannot pin: Missing permissions");return}t.pinned?Mh.unpinMessage(e,t.id):Mh.pinMessage(e,t.id)}function YJe(e,t){if(!eW(t)){tW("Cannot quote this message type");return}let{content:o}=t;if(ks.store.useSelectionForQuote){let i=window.getSelection()?.toString().trim();i&&t.content?.includes(i)&&(o=i)}if(!o)return;let n=o.split(`
`).map(i=>`> ${i}`).join(`
`)+`
`;xu(n),ks.store.quoteWithReply&&V.dispatch({type:"CREATE_PENDING_REPLY",channel:e,message:t,shouldMention:!1,showMentionToggle:!e.isPrivate?.()})}function QJe(e,t){let n=`https://discord.com/channels/${t.guild_id??"@me"}/${t.id}/${e.id}`;VencordNative.native.openExternal(n)}function ZJe(e,t){V.dispatch({type:"OPEN_THREAD_FLOW_MODAL",channelId:t.id,messageId:e.id})}async function Zj(e,t,o,n){let i=Ns.getId(),s=t.author.id===i;switch(e){case"DELETE":if(!qJe(t,o))return;t.deleted?V.dispatch({type:"MESSAGE_DELETE",channelId:o.id,id:t.id,mlDeleted:!0}):Fn.deleteMessage(o.id,t.id),n.preventDefault();break;case"COPY_LINK":WJe(t,o),n.preventDefault();break;case"COPY_ID":$t(t.id,"Message ID copied!"),n.preventDefault();break;case"COPY_CONTENT":$t(t.content||"","Message content copied!"),n.preventDefault();break;case"COPY_USER_ID":$t(t.author.id,"User ID copied!"),n.preventDefault();break;case"EDIT":if(!s||b1.isEditing(o.id,t.id)||t.state!=="SENT")return;Fn.startEditMessage(o.id,t.id,t.content),n.preventDefault();break;case"REPLY":if(!eW(t)||!Vj(o))return;let a=n.shiftKey,l=yt(Ou.name)?Ou.shouldMention(t,a):!a;V.dispatch({type:"CREATE_PENDING_REPLY",channel:o,message:t,shouldMention:l,showMentionToggle:o.guild_id!==null}),n.preventDefault();break;case"EDIT_REPLY":if(s){if(b1.isEditing(o.id,t.id)||t.state!=="SENT")return;Fn.startEditMessage(o.id,t.id,t.content)}else{if(!eW(t)||!Vj(o))return;let c=yt(Ou.name)?Ou.shouldMention(t,!1):!0;V.dispatch({type:"CREATE_PENDING_REPLY",channel:o,message:t,shouldMention:c,showMentionToggle:o.guild_id!==null})}n.preventDefault();break;case"QUOTE":YJe(o,t),n.preventDefault();break;case"PIN":KJe(o,t),n.preventDefault();break;case"REACT":await jJe(o.id,t.id,ks.store.reactEmoji,o,t),n.preventDefault();break;case"OPEN_THREAD":ZJe(t,o),n.preventDefault();break;case"OPEN_TAB":QJe(t,o),n.preventDefault();break;case"NONE":break}}var Dhe,HJe,zJe,Xj,GJe,Lc,Mhe,Nhe,Bhe,Jj,Phe,Wp,ec,F5,rT,pg,hf,dg,ks,Vj,qJe,eW,iT,Lhe=x(()=>{"use strict";d();Wo();Q();nT();H();mt();At();$();hr();B();Dhe=[{label:"None",value:"NONE"},{label:"Delete",value:"DELETE"},{label:"Copy Link",value:"COPY_LINK"},{label:"Copy ID",value:"COPY_ID"},{label:"Copy Content",value:"COPY_CONTENT"},{label:"Copy User ID",value:"COPY_USER_ID"},{label:"Edit",value:"EDIT"},{label:"Reply",value:"REPLY"},{label:"React",value:"REACT"},{label:"Open Thread",value:"OPEN_THREAD"},{label:"Open Tab",value:"OPEN_TAB"}],HJe=[{label:"None",value:"NONE"},{label:"Delete",value:"DELETE"},{label:"Reply",value:"REPLY"},{label:"Edit",value:"EDIT"},{label:"Quote",value:"QUOTE"},{label:"Copy Content",value:"COPY_CONTENT"},{label:"Copy Link",value:"COPY_LINK"},{label:"Copy ID",value:"COPY_ID"},{label:"Copy User ID",value:"COPY_USER_ID"},{label:"React",value:"REACT"},{label:"Pin",value:"PIN"}],zJe=[{label:"None",value:"NONE"},{label:"Delete",value:"DELETE"},{label:"Reply",value:"REPLY"},{label:"Quote",value:"QUOTE"},{label:"Copy Content",value:"COPY_CONTENT"},{label:"Copy Link",value:"COPY_LINK"},{label:"Copy ID",value:"COPY_ID"},{label:"Copy User ID",value:"COPY_USER_ID"},{label:"React",value:"REACT"},{label:"Pin",value:"PIN"}],Xj=[{label:"None",value:"NONE"},{label:"Shift",value:"SHIFT"},{label:"Ctrl",value:"CTRL"},{label:"Alt",value:"ALT"}],GJe=[{label:"Backspace",value:"BACKSPACE"},{label:"Delete",value:"DELETE"},...Xj],Lc=new Set,Mhe=e=>{let t=Rhe(e);t&&Lc.add(t),e.key==="Backspace"&&Lc.add("BACKSPACE"),e.key==="Delete"&&Lc.add("DELETE")},Nhe=e=>{let t=Rhe(e);t&&Lc.delete(t),e.key==="Backspace"&&Lc.delete("BACKSPACE"),e.key==="Delete"&&Lc.delete("DELETE")},Bhe=()=>{Pl.isFocused()||Lc.clear()},Jj=0,Phe=()=>{let e=Date.now();pg>=1&&e-Jj<ks.store.clickTimeout&&(ec&&(clearTimeout(ec),ec=null),hf=!0,dg=e),pg++,Jj=e};Wp=null,ec=null,F5=null,rT=!1,pg=0,hf=!1,dg=0,ks=R({reactEmoji:{type:0,description:"Emoji to use for react actions",default:"\u{1F480}"},singleClickAction:{type:4,description:"Action on single click with modifier",options:Dhe,default:"DELETE"},singleClickModifier:{type:4,description:"Modifier required for single click action",options:GJe,default:"BACKSPACE"},doubleClickAction:{type:4,description:"Action on double-click (your messages)",options:HJe,default:"EDIT"},doubleClickOthersAction:{type:4,description:"Action on double-click (others' messages)",options:zJe,default:"REPLY"},doubleClickModifier:{type:4,description:"Modifier required for double-click action",options:Xj,default:"NONE"},tripleClickAction:{type:4,description:"Action on triple-click",options:Dhe,default:"REACT"},tripleClickModifier:{type:4,description:"Modifier required for triple-click action",options:Xj,default:"NONE"},disableInDms:{type:3,description:"Disable all click actions in direct messages",default:!1},disableInSystemDms:{type:3,description:"Disable all click actions in system DMs",default:!0},clickTimeout:{type:1,description:"Timeout to distinguish double/triple clicks (ms)",markers:uo(100,500,50),default:300},doubleClickHoldThreshold:{type:1,description:"Max hold time for double-click actions (ms). Holding longer allows text selection",markers:uo(50,500,50),default:150},deferDoubleClickForTriple:{type:3,description:"Delay double-click to allow triple-click actions (disables triple-click when off)",default:!0},selectionHoldTimeout:{type:1,description:"Timeout to allow text selection (ms)",markers:uo(100,1e3,100),default:300},quoteWithReply:{type:3,description:"When quoting, also reply to the message",default:!0},useSelectionForQuote:{type:3,description:"When quoting, use selected text if available",default:!1}});Vj=e=>!e.guild_id||Kt.can(Nt.SEND_MESSAGES,e),qJe=(e,t)=>{let o=Ns.getId();return e.author.id===o||Kt.can(Nt.MANAGE_MESSAGES,t)||e.interactionMetadata?.authorizing_integration_owners?.[1]===o},eW=e=>xw.REPLYABLE.has(e.type)&&!e.hasFlag(64);iT=k({name:"MessageClickActions",description:"Customize click actions on messages.",authors:[w.Ven,j.keyages,j.ZcraftElite],isModified:!0,settings:ks,start(){document.addEventListener("keydown",Mhe),document.addEventListener("keyup",Nhe),document.addEventListener("mousedown",Phe),Pl.addChangeListener(Bhe)},stop(){document.removeEventListener("keydown",Mhe),document.removeEventListener("keyup",Nhe),document.removeEventListener("mousedown",Phe),Pl.removeChangeListener(Bhe),Wp&&(clearTimeout(Wp),Wp=null),ec&&(clearTimeout(ec),ec=null),F5=null,pg=0,hf=!1,dg=0},onMessageClick(e,t,o){let n=o.target;n.nodeType===Node.TEXT_NODE&&(n=n.parentElement);let i=Ns.getId(),s=e.author.id===i,a=t.isDM(),l=t.isSystemDM();if(ks.store.disableInDms&&a||ks.store.disableInSystemDms&&l)return;let c=ks.store.singleClickAction,u=s?ks.store.doubleClickAction:ks.store.doubleClickOthersAction,p=ks.store.tripleClickAction,m=ks.store.singleClickModifier,g=ks.store.doubleClickModifier,y=ks.store.tripleClickModifier,b=o.detail===1&&o.button===0,v=o.detail===2,E=o.detail===3;if(Date.now()-Jj>ks.store.selectionHoldTimeout){Lc.clear(),pg=0,hf=!1,dg=0;return}if(ec&&(clearTimeout(ec),ec=null),E){if(!ks.store.deferDoubleClickForTriple){pg=0,hf=!1,dg=0;return}Wp&&(clearTimeout(Wp),Wp=null,F5=null),O5(y)&&p!=="NONE"&&(Zj(p,e,t,o),Lc.clear()),rT=!1,pg=0,hf=!1,dg=0;return}let A=(O5(g)||g==="NONE")&&u!=="NONE",C=ks.store.deferDoubleClickForTriple&&O5(y)&&p!=="NONE",I=A&&C&&g===y;if(v){rT=!0,ec&&(clearTimeout(ec),ec=null);let N=!hf||Date.now()-dg<ks.store.doubleClickHoldThreshold,_=()=>{Vj(t)&&e.deleted!==!0&&A&&N&&(Zj(u,e,t,o),Lc.clear())};I?(Wp&&clearTimeout(Wp),F5=_,Wp=setTimeout(()=>{F5?.(),F5=null,Wp=null},ks.store.clickTimeout)):_(),N&&o.preventDefault(),pg=0,hf=!1,dg=0;return}if(b){rT=!1;let N=()=>{!rT&&!hf&&O5(m)&&c!=="NONE"&&(Zj(c,e,t,o),Lc.clear()),pg=0,hf=!1,dg=0};u!=="NONE"&&(g==="NONE"||O5(g))&&m==="NONE"?ec=setTimeout(()=>{N(),ec=null},ks.store.clickTimeout):N()}}})});var Ohe,sT,Fhe=x(()=>{"use strict";d();Q();tt();H();Km();$();B();Ohe=1471228928,sT=k({name:"MessageLatency",description:"Displays an indicator for messages that took \u2265n seconds to send",authors:[w.arHSM],settings:R({latency:{type:1,description:"Threshold in seconds for latency indicator",default:2},detectDiscordKotlin:{type:3,description:"Detect old Discord Android clients",default:!0},showMillis:{type:3,description:"Show milliseconds",default:!1},ignoreSelf:{type:3,description:"Don't add indicator to your own messages",default:!1}}),patches:[{find:"showCommunicationDisabledStyles",replacement:{match:/(message:(\i),avatar:\i,username:\(0,\i.jsxs\)\(\i.Fragment,\{children:\[)(\i&&)/,replace:"$1$self.Tooltip()({ message: $2 }),$3"}}],stringDelta(e,t){let o={days:Math.floor(e/864e5),hours:Math.floor(e/36e5%24),minutes:Math.floor(e/6e4%60),seconds:Math.floor(e/1e3%60),milliseconds:Math.floor(e%1e3)},n=a=>o[a]>0?`${o[a]} ${o[a]>1?a:a.substring(0,a.length-1)}`:null;return Object.keys(o).reduce((a,l)=>{let c=n(l);return a+(kd(c)?(a!==""?(t?l==="milliseconds":l==="seconds")?" and ":" ":"")+c:"")},"")||"0 seconds"},latencyTooltipData(e){let{latency:t,detectDiscordKotlin:o,showMillis:n,ignoreSelf:i}=this.settings.store,{id:s,nonce:a}=e;if(!kd(a)||e.author.bot||i&&e.author.id===Ns.getId())return null;let l=!1,c=ai.extractTimestamp(s)-ai.extractTimestamp(a);n||(c=Math.round(c/1e3)*1e3),-c>=Ohe-864e5&&(l=o,c+=Ohe);let u=Math.abs(c),p=u!==c,m=t*1e3,g=u>=m?this.stringDelta(u,n):null,y=120*1e3,b=l?["status-positive","status-positive","text-muted"]:c>=y||p?["text-muted","text-muted","text-muted"]:c>=m*2?["status-danger","text-muted","text-muted"]:["status-warning","status-warning","text-muted"];return u>=m||l?{delta:g,ahead:p,fill:b,isDiscordKotlin:l}:null},Tooltip(){return ee.wrap(({message:e})=>{let t=this.latencyTooltipData(e);if(!kd(t))return null;let o;return t.delta?o=(t.ahead?`This user's clock is ${t.delta} ahead.`:`This message was sent with a delay of ${t.delta}.`)+(t.isDiscordKotlin?" User is suspected to be on an old Discord Android client.":""):o="User is suspected to be on an old Discord Android client",r(Ue,{text:o,position:"top"},n=>r(this.Icon,{delta:t.delta,fill:t.fill,props:n}))},{noop:!0})},Icon({delta:e,fill:t,props:o}){return r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:"12",height:"12",role:"img",fill:"none",style:{marginRight:"8px",verticalAlign:-1},"aria-label":e??"Old Discord Android client","aria-hidden":"false",...o},r("path",{fill:`var(--${t[0]})`,d:"M4.8001 12C4.8001 11.5576 4.51344 11.2 4.16023 11.2H2.23997C1.88676 11.2 1.6001 11.5576 1.6001 12V13.6C1.6001 14.0424 1.88676 14.4 2.23997 14.4H4.15959C4.5128 14.4 4.79946 14.0424 4.79946 13.6L4.8001 12Z"}),r("path",{fill:`var(--${t[1]})`,d:"M9.6001 7.12724C9.6001 6.72504 9.31337 6.39998 8.9601 6.39998H7.0401C6.68684 6.39998 6.40011 6.72504 6.40011 7.12724V13.6727C6.40011 14.0749 6.68684 14.4 7.0401 14.4H8.9601C9.31337 14.4 9.6001 14.0749 9.6001 13.6727V7.12724Z"}),r("path",{fill:`var(--${t[2]})`,d:"M14.4001 2.31109C14.4001 1.91784 14.1134 1.59998 13.7601 1.59998H11.8401C11.4868 1.59998 11.2001 1.91784 11.2001 2.31109V13.6888C11.2001 14.0821 11.4868 14.4 11.8401 14.4H13.7601C14.1134 14.4 14.4001 14.0821 14.4001 13.6888V2.31109Z"}))}})});async function tVe(e,t){let o=gv.get(t);if(o)return o.message;gv.set(t,{fetched:!1});let i=(await Ht.get({url:jo.Endpoints.MESSAGES(e),query:{limit:1,around:t},retries:2}).catch(()=>null))?.body?.[0];if(!i)return;let s=Rt.getMessages(i.channel_id).receiveMessage(i).get(i.id);if(s)return gv.set(s.id,{message:s,fetched:!0}),s}function oVe(e){let t=[];for(let{content_type:o,height:n,width:i,url:s,proxy_url:a}of e.attachments??[])o?.startsWith("image/")&&t.push({height:n,width:i,url:s,proxyURL:a});for(let{type:o,image:n,thumbnail:i,url:s}of e.embeds??[])o==="image"?t.push({...n??i}):s&&o==="gifv"&&!Hhe.test(s)&&t.push({height:i.height,width:i.width,url:s});return t}function nVe(e,t){return!e&&!t?"":e?t?`[no content, ${e} attachment${e!==1?"s":""} and ${t} embed${t!==1?"s":""}]`:`[no content, ${e} attachment${e!==1?"s":""}]`:`[no content, ${t} embed${t!==1?"s":""}]`}function rVe(e){return!!(e.components.length||e.attachments.some(t=>!t.content_type?.startsWith("image/"))||e.embeds.some(t=>t.type!=="image"&&(t.type!=="gifv"||Hhe.test(t.url))))}function iVe(e,t){if(e>t){let s=Math.min(e,400);return{width:s,height:Math.round(t/(e/s))}}let i=Math.min(t,300);return{width:Math.round(e/(t/i)),height:i}}function sVe(e,t){return new Proxy(e,{get(o,n){return n==="vencordEmbeddedBy"?t:Reflect.get(...arguments)}})}function aVe({message:e}){let t=e.vencordEmbeddedBy??[],o=[];for(let[n,i,s]of e.content.matchAll(nW)){if(t.includes(s)||t.length>2)continue;let a=ne.getChannel(i);if(!a||!a.isPrivate()&&!Kt.can(Nt.VIEW_CHANNEL,a))continue;let{listMode:l,idList:c}=aT.store,u=[a.guild_id,i,e.author.id].some(y=>y&&c.includes(y));if(l==="blacklist"&&u||l==="whitelist"&&!u)continue;let p=gv.get(s)?.message;if(!p)if(p??=Rt.getMessage(i,s),p)gv.set(s,{message:p,fetched:!0});else{eVe.unshift(()=>tVe(i,s).then(y=>y&&wc(e.channel_id,e.id)));continue}let m={message:sVe(p,[...t,e.id]),channel:a},g=aT.store.automodEmbeds;o.push(g==="always"||g==="prefer"&&!rVe(p)?r(cVe,{...m}):r(lVe,{...m}))}return o.length?r(f,null,o):null}function zhe(e){return e.isDM()?["Direct Message",To.getUserAvatarURL(z.getUser(e.recipients[0]))]:e.isGroupDM()?["Group DM",To.getChannelIconURL(e)]:["Server",To.getGuildIconURL(ct.getGuild(e.guild_id))]}function lVe({message:e,channel:t}){let o=$he.useSetting(),n=z.getUser(ne.getChannel(t.id).recipients?.[0]),[i,s]=zhe(t);return r(XJe,{embed:{rawDescription:"",color:"var(--background-base-lower)",author:{name:r(Y,{size:"xs",weight:"medium",tag:"span"},r("span",null,i," - "),Jt.parse(t.isDM()?`<@${n.id}>`:`<#${t.id}>`)),iconProxyURL:s}},renderDescription:()=>r("div",{key:e.id,className:me(Uhe.message,aT.store.messageBackgroundColor&&Uhe.searchResult)},r(VJe,{id:`message-link-embeds-${e.id}`,message:e,channel:t,subscribeToComponentDispatch:!1,compact:o}))})}function cVe(e){let{message:t,channel:o}=e,n=$he.useSetting(),i=oVe(t),{parse:s}=Jt,[a,l]=zhe(o);return r(JJe,{channel:o,childrenAccessories:r(Y,{size:"xs",weight:"medium",color:"text-muted",tag:"span",className:`${oW.embedAuthor} ${oW.embedMargin}`},l&&r("img",{src:l,className:oW.embedAuthorIcon,alt:""}),r("span",null,r("span",null,a," - "),o.isDM()?Jt.parse(`<@${ne.getChannel(o.id).recipients[0]}>`):Jt.parse(`<#${o.id}>`))),compact:n,content:r(f,null,t.content||t.attachments.length<=i.length?s(t.content):[nVe(t.attachments.length,t.embeds.length)],i.map((c,u)=>{let{width:p,height:m}=iVe(c.width,c.height);return r("div",{key:u},r("img",{src:c.url,width:p,height:m}))})),hideTimestamp:!1,message:t,_messageEmbed:"automod"})}var gv,XJe,JJe,VJe,Uhe,oW,$he,nW,Hhe,eVe,aT,lT,Ghe=x(()=>{"use strict";d();ww();z1();Q();Ra();Et();H();xt();I0();$();fe();B();gv=new Map,XJe=m1(e=>e.prototype?.renderSuppressButton),JJe=De("withFooter","childrenMessageContent:"),VJe=De("childrenExecutedCommand:",".hideAccessories"),Uhe=et("message","searchResult"),oW=et("embedAuthorIcon","embedAuthor","embedAuthor","embedMargin"),$he=nr("textAndImages","messageDisplayCompact"),nW=/(?<!<)https?:\/\/(?:\w+\.)?discord(?:app)?\.com\/channels\/(?:\d{17,20}|@me)\/(\d{17,20})\/(\d{17,20})/g,Hhe=/^https:\/\/(?:www\.)?tenor\.com\//,eVe=new pl,aT=R({messageBackgroundColor:{description:"Background color for messages in rich embeds",type:3},automodEmbeds:{description:"Use automod embeds instead of rich embeds (smaller but less info)",type:4,options:[{label:"Always use automod embeds",value:"always"},{label:"Prefer automod embeds, but use rich embeds if some content can't be shown",value:"prefer"},{label:"Never use automod embeds",value:"never",default:!0}]},listMode:{description:"Whether to use ID list as blacklist or whitelist",type:4,options:[{label:"Blacklist",value:"blacklist",default:!0},{label:"Whitelist",value:"whitelist"}]},idList:{description:"Guild/channel/user IDs to blacklist or whitelist (separate with comma)",type:0,default:"",multiline:!0},clearMessageCache:{type:6,component:()=>r(U,{onClick:()=>gv.clear()},"Clear the linked message cache")}});lT=k({name:"MessageLinkEmbeds",description:"Adds a preview to messages that link another message",authors:[w.TheSun,w.Ven,w.RyanCaoDev],dependencies:["MessageAccessoriesAPI","MessageUpdaterAPI","UserSettingsAPI"],settings:aT,start(){Oh("MessageLinkEmbeds",e=>nW.test(e.message.content)?(nW.lastIndex=0,r(aVe,{message:e.message})):null,4)},stop(){Sw("MessageLinkEmbeds")}})});var qhe=x(()=>{});var rW,jhe=x(()=>{d();(window.VencordStyles??=new Map).set("src/plugins/messageLogger/deleteStyleOverlay.css",{name:"src/plugins/messageLogger/deleteStyleOverlay.css",source:`.messagelogger-deleted {
    background-color: hsl(var(--red-430-hsl, 0 85% 61%) / 15%) !important;
}`,classNames:{},dom:null});rW="src/plugins/messageLogger/deleteStyleOverlay.css"});var iW,Whe=x(()=>{d();(window.VencordStyles??=new Map).set("src/plugins/messageLogger/deleteStyleText.css",{name:"src/plugins/messageLogger/deleteStyleText.css",source:`.messagelogger-deleted {
    --text-default: var(--status-danger, #f04747);
    --interactive-icon-default: var(--status-danger, #f04747);
    --text-muted: var(--status-danger, #f04747);
    --embed-title: var(--red-460, #be3535);
    --text-link: var(--red-460, #be3535);
    --text-strong: var(--red-460, #be3535);
}`,classNames:{},dom:null});iW="src/plugins/messageLogger/deleteStyleText.css"});function Khe(e){let t=[],o=0;for(;o<e.length;){if(e[o]==="<"&&(e.slice(o+1,o+3)===":"||e.slice(o+1,o+3)==="a:")){let i=e.indexOf(">",o);if(i!==-1){t.push(e.slice(o,i+1)),o=i+1;continue}}if(e[o]==="<"&&e[o+1]==="@"||e[o]==="<"&&e[o+1]==="#"){let i=e.indexOf(">",o);if(i!==-1){t.push(e.slice(o,i+1)),o=i+1;continue}}let n=Array.from(e.slice(o))[0];t.push(n),o+=n.length}return t}function uVe(e,t){if(e.length<t.length&&t.startsWith(e)){let p=t.slice(e.length),m=[];return e.length>0&&m.push({type:"unchanged",text:e}),m.push({type:"added",text:p}),m}if(e.length<t.length&&t.endsWith(e)){let p=t.slice(0,t.length-e.length),m=[];return m.push({type:"added",text:p}),e.length>0&&m.push({type:"unchanged",text:e}),m}if(t.length<e.length&&e.startsWith(t)){let p=e.slice(t.length),m=[];return t.length>0&&m.push({type:"unchanged",text:t}),m.push({type:"removed",text:p}),m}if(t.length<e.length&&e.endsWith(t)){let p=e.slice(0,e.length-t.length),m=[];return m.push({type:"removed",text:p}),t.length>0&&m.push({type:"unchanged",text:t}),m}let o=Khe(e),n=Khe(t),i=[],s=[];for(let p=0;p<=o.length;p++){s[p]=[];for(let m=0;m<=n.length;m++)s[p][m]=0}for(let p=1;p<=o.length;p++)for(let m=1;m<=n.length;m++)o[p-1]===n[m-1]?s[p][m]=s[p-1][m-1]+1:s[p][m]=Math.max(s[p-1][m],s[p][m-1]);let a=o.length,l=n.length,c=[];for(;a>0||l>0;)a>0&&l>0&&o[a-1]===n[l-1]?(c.unshift({type:"unchanged",text:o[a-1]}),a--,l--):l>0&&(a===0||s[a][l-1]>s[a-1][l])?(c.unshift({type:"added",text:n[l-1]}),l--):a>0&&(c.unshift({type:"removed",text:o[a-1]}),a--);let u=[];for(let p of c){let m=u[u.length-1];m&&m.type===p.type?m.text+=p.text:u.push(p)}return u}function sW(e,t){return uVe(e,t)}var Yhe=x(()=>{"use strict";d()});function Qhe(e){Ee(t=>r(ee,null,r(mVe,{modalProps:t,message:e})))}function mVe({modalProps:e,message:t}){let[o,n]=L(t.editHistory.length),i=[t.firstEditTimestamp,...t.editHistory.map(a=>a.timestamp)],s=[...t.editHistory.map(a=>a.content),t.content];return r(Pe,{...e,size:"large"},r(je,{className:U5("head")},r(Y,{size:"lg",weight:"semibold",style:{flexGrow:1}},"Message Edit History"),r(Ut,{onClick:e.onClose})),r($e,{className:U5("contents")},r(Rr,{type:"top",look:"brand",className:me("vc-settings-tab-bar",U5("tab-bar")),selectedItem:o,onItemSelect:n},t.firstEditTimestamp.getTime()!==t.timestamp.getTime()&&r(ii,{text:"This edit state was not logged so it can't be displayed."},r(Rr.Item,{className:"vc-settings-tab-bar-item",id:-1,disabled:!0},r(Di,{className:U5("timestamp"),timestamp:t.timestamp,isEdited:!0,isInline:!1}))),i.map((a,l)=>r(Rr.Item,{key:l,className:"vc-settings-tab-bar-item",id:l},r(Di,{className:U5("timestamp"),timestamp:a,isEdited:!0,isInline:!1})))),r("div",{className:me(dVe.markup,pVe.messageContent,Z.top20)},aW(s[o],t,o===s.length-1?void 0:s[s.length-1]))))}var dVe,pVe,U5,Zhe=x(()=>{"use strict";d();Et();tt();du();nt();co();xt();at();fe();B();lW();dVe=et("markup","codeContainer"),pVe=et("messageContent","markupRtl"),U5=de("vc-ml-modal-")});function txe(e){typeof queueMicrotask=="function"?queueMicrotask(e):setTimeout(e,0)}function oxe(){zd.store.deleteStyle==="text"?(Or(iW),Fr(rW)):(Fr(iW),Or(rW))}function cW(e,t,o){let n={__messageloggerDiff:!0,__messageloggerDiffKey:t,content:r("div",{key:t},o)},s=e.customRenderedContent?.__messageloggerDiffKey!==t;e.__messageloggerLastAppliedKey=t,e.customRenderedContent=n,txe(()=>{e.__messageloggerLastAppliedKey===t&&(e.customRenderedContent=n,s&&wc(e.channel_id,e.id,{customRenderedContent:n}))})}function uT(e){if(!e.customRenderedContent?.__messageloggerDiff)return;let o=e.__messageloggerLastAppliedKey;delete e.__messageloggerLastAppliedKey,delete e.customRenderedContent,txe(()=>{if(e.customRenderedContent?.__messageloggerDiff)return;let i=e.__messageloggerLastAppliedKey;typeof i=="string"&&i!==o||wc(e.channel_id,e.id,{customRenderedContent:null})})}function gVe(e,t,o,n){let i=Jt.parse(e.text,!0,{channelId:t.channel_id,messageId:t.id,allowLinks:!0,allowHeading:!0,allowList:!0,allowEmojiLinks:!0,viewingChannelId:st.getChannelId()}),s;return(e.type==="added"||e.type==="removed")&&(!n||n===e.type)&&(s=`messagelogger-diff-${e.type}`),r("span",{key:o,className:s},i)}function xv(e,t){return e.map((o,n)=>gVe(o,t,n))}function dT(e,t){let o=[];for(let n of e)if(t==="original"){if(n.type==="added")continue;o.push(n)}else{if(n.type==="removed")continue;o.push(n)}return o}function aW(e,t,o){let n=!hv.has(t.id),i=t.__messageloggerAggregated;if(o&&e!==o&&zd.store.showEditDiffs&&n){let s=sW(e,o),a=dT(s,"original"),l=dT(s,"updated");if(zd.store.separatedDiffs){let u=o===t.content;if(u)if(i)cW(t,i.key,i.aggregatedNodes);else{let p=`${t.id}:current:${t.content}:${t.editedTimestamp?.valueOf?.()??0}`;cW(t,p,xv(l,t))}else!i&&t.customRenderedContent?.__messageloggerDiff&&uT(t);return r("div",{className:"messagelogger-diff-view"},a.length?r("div",{className:"messagelogger-diff-original"},xv(a,t)):null,!u&&l.length?r("div",{className:"messagelogger-diff-updated"},xv(l,t)):null)}return!i&&t.customRenderedContent?.__messageloggerDiff&&uT(t),xv(s,t)}return!i&&t.customRenderedContent?.__messageloggerDiff&&uT(t),Jt.parse(e,!0,{channelId:t.channel_id,messageId:t.id,allowLinks:!0,allowHeading:!0,allowList:!0,allowEmojiLinks:!0,viewingChannelId:st.getChannelId()})}var Xhe,hv,Jhe,Vhe,exe,fVe,cT,zd,pT,lW=x(()=>{"use strict";d();qhe();Un();z1();Wo();Q();ps();tt();H();mt();At();xt();$();fe();B();jhe();Whe();Yhe();Zhe();Xhe=et("edited","communicationDisabled","isSystemMessage"),hv=new Set;Jhe="ml-remove-history",Vhe="ml-toggle-style",exe="ml-toggle-diff",fVe=(e,t)=>{let{message:o}=t,{deleted:n,editHistory:i,id:s,channel_id:a}=o;if(!n&&!i?.length)return;e:{if(!n)break e;let c=document.getElementById(`chat-messages-${a}-${s}`);if(!c)break e;e.push(r(M.MenuItem,{id:Vhe,key:Vhe,label:"Toggle Deleted Highlight",action:()=>c.classList.toggle("messagelogger-deleted")}))}if(i?.length&&zd.store.showEditDiffs){let c=hv.has(s);e.push(r(M.MenuItem,{id:exe,key:exe,label:c?"Enable Diff View":"Disable Diff View",color:"danger",action:()=>{c?hv.delete(s):hv.add(s),document.getElementById(`chat-messages-${a}-${s}`)?.classList.toggle("messagelogger-diff-disabled",hv.has(s)),wc(a,s)}}))}let l;yt("MessageLoggerEnhanced")?l="Remove Message (Temporary)":l="Remove Message History",e.push(r(M.MenuItem,{id:Jhe,key:Jhe,label:l,color:"danger",action:()=>{n?V.dispatch({type:"MESSAGE_DELETE",channelId:a,id:s,mlDeleted:!0}):o.editHistory=[]}}))},cT=(e,{channel:t})=>{let o=Rt.getMessages(t?.id);if(!o?.some(i=>i.deleted||i.editHistory?.length))return;(Qt("mark-channel-read",e)??e).push(r(M.MenuItem,{id:"vc-ml-clear-channel",label:"Clear Message Log",color:"danger",action:()=>{o.forEach(i=>{i.deleted?V.dispatch({type:"MESSAGE_DELETE",channelId:t.id,id:i.id,mlDeleted:!0}):wc(t.id,i.id,{editHistory:[]})})}}))};zd=R({deleteStyle:{type:4,description:"The style of deleted messages",default:"text",options:[{label:"Red text",value:"text",default:!0},{label:"Red overlay",value:"overlay"}],onChange:()=>oxe()},logDeletes:{type:3,description:"Whether to log deleted messages",default:!0},collapseDeleted:{type:3,description:"Whether to collapse deleted messages, similar to blocked messages",default:!1,restartNeeded:!0},logEdits:{type:3,description:"Whether to log edited messages",default:!0},inlineEdits:{type:3,description:"Whether to display edit history as part of message content",default:!0},ignoreBots:{type:3,description:"Whether to ignore messages by bots",default:!1},ignoreSelf:{type:3,description:"Whether to ignore messages by yourself",default:!1},ignoreUsers:{type:0,description:"Comma-separated list of user IDs to ignore",default:"",multiline:!0},ignoreChannels:{type:0,description:"Comma-separated list of channel IDs to ignore",default:"",multiline:!0},ignoreGuilds:{type:0,description:"Comma-separated list of guild IDs to ignore",default:"",multiline:!0},showEditDiffs:{type:3,description:"Show visual differences between edited message versions",default:!1,onChange:e=>{!e&&zd.store.separatedDiffs&&(zd.store.separatedDiffs=!1)}},separatedDiffs:{type:3,description:"Separate addition and removals in diffs for a more readable differential",default:!1}},{separatedDiffs:{disabled(){return!this.store.showEditDiffs}}}),pT=k({name:"MessageLogger",description:"Temporarily logs deleted and edited messages.",authors:[w.rushii,w.Ven,w.AutumnVN,w.Nickyux,w.Kyuuhachi,j.justjxke],dependencies:["MessageUpdaterAPI"],isModified:!0,settings:zd,contextMenus:{message:fVe,"channel-context":cT,"thread-context":cT,"user-context":cT,"gdm-context":cT},start(){oxe()},renderEdits:ee.wrap(({message:{id:e,channel_id:t}})=>{let o=Je([Rt],()=>Rt.getMessage(t,e),null,(c,u)=>c?.editHistory===u?.editHistory&&c?.diffViewDisabled===u?.diffViewDisabled&&c?.content===u?.content&&(c?.editedTimestamp?.valueOf?.()??0)===(u?.editedTimestamp?.valueOf?.()??0)),{showEditDiffs:n,inlineEdits:i,separatedDiffs:s}=zd.use(["showEditDiffs","inlineEdits","separatedDiffs"]),a=o.editHistory??[];if(i&&n&&s&&a.length>0){let c=a[0],u=`${o.id}:${a.length}:${o.content}:${o.editedTimestamp?.valueOf?.()??0}`,p=o.__messageloggerAggregated;if(!p||p.key!==u){let m=sW(c.content,o.content),g=dT(m,"original"),y=dT(m,"updated"),b=g.length?xv(g,o):Jt.parse(c.content,!0,{channelId:o.channel_id,messageId:o.id,allowLinks:!0,allowHeading:!0,allowList:!0,allowEmojiLinks:!0,viewingChannelId:st.getChannelId()}),v=xv(y,o);p={key:u,originalNodes:b,aggregatedNodes:v,originalTimestamp:c.timestamp},o.__messageloggerAggregated=p}return cW(o,p.key,p.aggregatedNodes),r("div",{key:`diff-aggregated-${e}`},r("div",{className:"messagelogger-edited",key:"ml-aggregated-original"},p.originalNodes,r(Di,{timestamp:p.originalTimestamp,isEdited:!0,isInline:!1},r("span",{className:Xhe.edited}," ","(",St("MESSAGE_EDITED"),")"))))}return o.__messageloggerAggregated&&delete o.__messageloggerAggregated,o.customRenderedContent?.__messageloggerDiff&&uT(o),i&&r("div",{key:hv.has(e)?`diff-off-${e}`:`diff-on-${e}`},a.map((c,u)=>{let p=u===a.length-1?o.content:a[u+1]?.content;return r("div",{key:u,className:"messagelogger-edited"},aW(c.content,o,p),r(Di,{timestamp:c.timestamp,isEdited:!0,isInline:!1},r("span",{className:Xhe.edited}," ","(",St("MESSAGE_EDITED"),")")))}))},{noop:!0}),makeEdit(e,t){return{timestamp:new Date(e.edited_timestamp),content:t.content}},handleDelete(e,t,o){try{if(e==null||!o&&!e.has(t.id))return e;let n=i=>{let s=e.get(i);if(!s)return;let a=64;t.mlDeleted||(s.flags&a)===a||this.shouldIgnore(s)?e=e.remove(i):e=e.update(i,c=>c.set("deleted",!0).set("attachments",c.attachments.map(u=>(u.deleted=!0,u))))};o?t.ids.forEach(n):n(t.id)}catch(n){new ke("MessageLogger").error("Error during handleDelete",n)}return e},shouldIgnore(e,t=!1){try{let{ignoreBots:o,ignoreSelf:n,ignoreUsers:i,ignoreChannels:s,ignoreGuilds:a,logEdits:l,logDeletes:c}=zd.store,u=z.getCurrentUser().id;return o&&e.author?.bot||n&&e.author?.id===u||i.includes(e.author?.id)||s.includes(e.channel_id)||s.includes(ne.getChannel(e.channel_id)?.parent_id)||(t?!l:!c)||a.includes(ne.getChannel(e.channel_id)?.guild_id)||e.author?.id===AL&&ne.getChannel(e.channel_id)?.parent_id===TL||e.author?.id===RS&&ne.getChannel(e.channel_id)?.id===ip}catch{return!1}},EditMarker({message:e,className:t,children:o,...n}){return r("span",{...n,className:me("messagelogger-edit-marker",t),onClick:()=>Qhe(e),role:"button"},o)},DELETED_MESSAGE_COUNT:()=>({ast:[[6,"count",{"=0":["No deleted messages"],one:[[1,"count"]," deleted message"],other:[[1,"count"]," deleted messages"]},0,"cardinal"]]}),patches:[{find:'"MessageStore"',replacement:[{match:/function (?=.+?MESSAGE_DELETE:(\i))\1\((\i)\){let.+?((?:\i\.){2})getOrCreate.+?}(?=function)/,replace:"function $1($2){   var cache = $3getOrCreate($2.channelId);   cache = $self.handleDelete(cache, $2, false);   $3commit(cache);}"},{match:/function (?=.+?MESSAGE_DELETE_BULK:(\i))\1\((\i)\){let.+?((?:\i\.){2})getOrCreate.+?}(?=function)/,replace:"function $1($2){   var cache = $3getOrCreate($2.channelId);   cache = $self.handleDelete(cache, $2, true);   $3commit(cache);}"},{match:/(function (\i)\((\i)\).+?)\.update\((\i)(?=.*MESSAGE_UPDATE:\2)/,replace:"$1.update($4,m =>   (($3.message.flags & 64) === 64 || $self.shouldIgnore($3.message, true)) ? m :   $3.message.edited_timestamp && $3.message.content !== m.content ?       m.set('editHistory',[...(m.editHistory || []), $self.makeEdit($3.message, m)]) :       m).update($4"},{match:/(?<=getLastEditableMessage\(\i\)\{.{0,200}\.find\((\i)=>)/,replace:"!$1.deleted &&"}]},{find:"}addReaction(",replacement:[{match:/this\.customRenderedContent=(\i)\.customRenderedContent,/,replace:"this.customRenderedContent = $1.customRenderedContent,this.deleted = $1.deleted || false,this.editHistory = $1.editHistory || [],this.firstEditTimestamp = $1.firstEditTimestamp || this.editedTimestamp || this.timestamp,this.diffViewDisabled = $1.diffViewDisabled || false,"}]},{find:".PREMIUM_REFERRAL&&(",replacement:[{match:/(?<=null!=\i\.edited_timestamp\)return )\i\(\i,\{reactions:(\i)\.reactions.{0,50}\}\)/,replace:"Object.assign($&,{ deleted:$1.deleted, editHistory:$1.editHistory, firstEditTimestamp:$1.firstEditTimestamp, diffViewDisabled:$1.diffViewDisabled })"},{match:/attachments:(\i)\((\i)\)/,replace:"attachments: $1((() => {   if ($self.shouldIgnore($2)) return $2;   let old = arguments[1]?.attachments;   if (!old) return $2;   let new_ = $2.attachments?.map(a => a.id) ?? [];   let diff = old.filter(a => !new_.includes(a.id));   old.forEach(a => a.deleted = true);   $2.attachments = [...diff, ...$2.attachments];   return $2;})()),deleted: arguments[1]?.deleted,editHistory: arguments[1]?.editHistory,firstEditTimestamp: new Date(arguments[1]?.firstEditTimestamp ?? $2.editedTimestamp ?? $2.timestamp),diffViewDisabled: arguments[1]?.diffViewDisabled"},{match:/(\((\i)\){return null==\2\.attachments.+?)spoiler:/,replace:"$1deleted: arguments[0]?.deleted,spoiler:"}]},{find:"#{intl::REMOVE_ATTACHMENT_TOOLTIP_TEXT}",replacement:[{match:/\.SPOILER,(?=\[\i\.\i\]:)/,replace:'$&"messagelogger-deleted-attachment":arguments[0]?.item?.originalItem?.deleted,'}]},{find:"Message must not be a thread starter message",replacement:[{match:/\)\("li",\{(.+?),className:/,replace:')("li",{$1,className:(arguments[0].message.deleted ? "messagelogger-deleted " : "")+'}]},{find:".SEND_FAILED,",replacement:{match:/\]:\i.isUnsupported.{0,20}?,children:\[/,replace:"$&arguments[0]?.message?.editHistory?.length>0&&$self.renderEdits(arguments[0]),"}},{find:"#{intl::MESSAGE_EDITED}",replacement:{match:/(isInline:!1,children:.{0,50}?)"span",\{(?=className:)/,replace:"$1$self.EditMarker,{message:arguments[0].message,"}},{find:'"ReferencedMessageStore"',replacement:[{match:/MESSAGE_DELETE:\i,/,replace:"MESSAGE_DELETE:()=>{},"},{match:/MESSAGE_DELETE_BULK:\i,/,replace:"MESSAGE_DELETE_BULK:()=>{},"}]},{find:".MESSAGE,commandTargetId:",replacement:[{match:/children:(\[""===.+?\])/,replace:"children:arguments[0].message.deleted?[]:$1"}]},{find:"NON_COLLAPSIBLE.has(",replacement:{match:/if\((\i)\.blocked\)return \i\.\i\.MESSAGE_GROUP_BLOCKED;/,replace:'$&else if($1.deleted) return"MESSAGE_GROUP_DELETED";'},predicate:()=>zd.store.collapseDeleted},{find:"#{intl::NEW_MESSAGES_ESTIMATED_WITH_DATE}",replacement:[{match:/(\i).type===\i\.\i\.MESSAGE_GROUP_BLOCKED\|\|/,replace:'$&$1.type==="MESSAGE_GROUP_DELETED"||'},{match:/(\i).type===\i\.\i\.MESSAGE_GROUP_BLOCKED\?.*?:/,replace:'$&$1.type==="MESSAGE_GROUP_DELETED"?$self.DELETED_MESSAGE_COUNT:'}],predicate:()=>zd.store.collapseDeleted}]})});function nxe(){return yv.store.tagsList}function mT(e){return yv.store.tagsList[e]??null}function xVe(e){yv.store.tagsList[e.name]=e}function yVe(e){delete yv.store.tagsList[e]}function rxe(e){C1({name:e.name,description:e.name,inputType:1,execute:async(t,o)=>mT(e.name)?(yv.store.clyde&&Vt(o.channel.id,{content:`${mg} The tag **${e.name}** has been sent!`}),{content:e.message.replaceAll("\\n",`
`)}):(Vt(o.channel.id,{content:`${mg} The tag **${e.name}** does not exist anymore! Please reload ur Discord to fix :)`}),{content:`/${e.name}`}),[hVe]:!0},"CustomTags")}var mg,hVe,yv,fT,ixe=x(()=>{"use strict";d();yi();Q();H();$();mg="<:luna:1035316192220553236>",hVe=Symbol("MessageTags");yv=R({clyde:{name:"Clyde message on send",description:"If enabled, clyde will send you an ephemeral message when a tag was used.",type:3,default:!0},tagsList:{type:7,default:{},description:""}}),fT=k({name:"MessageTags",description:"Allows you to save messages and to use them with a simple command.",authors:[w.Luna],settings:yv,async start(){let e=nxe();for(let t in e)rxe(e[t])},commands:[{name:"tags",description:"Manage all the tags for yourself",inputType:0,options:[{name:"create",description:"Create a new tag",type:1,options:[{name:"tag-name",description:"The name of the tag to trigger the response",type:3,required:!0},{name:"message",description:"The message that you will send when using this tag",type:3,required:!0}]},{name:"list",description:"List all tags from yourself",type:1,options:[]},{name:"delete",description:"Remove a tag from your yourself",type:1,options:[{name:"tag-name",description:"The name of the tag to trigger the response",type:3,required:!0}]},{name:"preview",description:"Preview a tag without sending it publicly",type:1,options:[{name:"tag-name",description:"The name of the tag to trigger the response",type:3,required:!0}]}],async execute(e,t){switch(e[0].name){case"create":{let o=Pt(e[0].options,"tag-name",""),n=Pt(e[0].options,"message","");if(mT(o))return Vt(t.channel.id,{content:`${mg} A Tag with the name **${o}** already exists!`});let i={name:o,message:n};rxe(i),xVe(i),Vt(t.channel.id,{content:`${mg} Successfully created the tag **${o}**!`});break}case"delete":{let o=Pt(e[0].options,"tag-name","");if(!mT(o))return Vt(t.channel.id,{content:`${mg} A Tag with the name **${o}** does not exist!`});vw(o),yVe(o),Vt(t.channel.id,{content:`${mg} Successfully deleted the tag **${o}**!`});break}case"list":{Vt(t.channel.id,{embeds:[{title:"All Tags:",description:Object.values(nxe()).map(o=>`\`${o.name}\`: ${o.message.slice(0,72).replaceAll("\\n"," ")}${o.message.length>72?"...":""}`).join(`
`)||`${mg} Woops! There are no tags yet, use \`/tags create\` to create one!`,color:14122879,type:"rich"}]});break}case"preview":{let o=Pt(e[0].options,"tag-name",""),n=mT(o);if(!n)return Vt(t.channel.id,{content:`${mg} A Tag with the name **${o}** does not exist!`});Vt(t.channel.id,{content:n.message.replaceAll("\\n",`
`)});break}default:{Vt(t.channel.id,{content:"Invalid sub-command"});break}}}}]})});var sxe=x(()=>{});var ny,gT,axe=x(()=>{"use strict";d();sxe();Q();H();$();ny=R({reactionCount:{description:"Number of reactions (0-42)",type:1,default:5},frequentEmojis:{description:"Use frequently used emojis instead of favourite emojis",type:3,restartNeeded:!0,default:!0},rows:{description:"Rows of quick reactions to display",type:5,default:2,markers:uo(1,16,1),stickToMarkers:!0},columns:{description:"Columns of quick reactions to display",type:5,default:4,markers:uo(1,12,1),stickToMarkers:!0},compactMode:{description:"Scales the buttons to 75% of their original scale, whilst increasing the inner emoji to 125% scale. Emojis will be 93.75% of the original size. Recommended to have a minimum of 5 columns",type:3,default:!1},scroll:{description:"Enable scrolling the list of emojis",type:3,default:!0}});jn("MoreQuickReactions","BetterQuickReact");gT=k({name:"MoreQuickReactions",description:"Improves the quick react buttons in the message context menu.",authors:[w.Ven,w.Sqaaakoi,w.iamme],isModified:!0,settings:ny,patches:[{find:"#{intl::MESSAGE_UTILITIES_A11Y_LABEL}",replacement:{match:/(?<=length>=3\?.{0,40})\.slice\(0,3\)/,replace:".slice(0,$self.reactionCount)"}},{find:"this.favoriteEmojisWithoutFetchingLatest.concat",replacement:{match:/(this\.favoriteEmojisWithoutFetchingLatest)\.concat/,replace:"[].concat"},predicate:()=>ny.store.frequentEmojis},{find:"#{intl::ADD_REACTION_NAMED}",group:!0,replacement:[{match:/isEmojiPremiumLocked\(\{.{0,25}channel:(\i),/,replace:"$&guild_id:$1?.guild_id??null,"},{match:/(\i)\.length>4&&\((\i)\.length=4\);/,replace:"let [moreQuickReactionsScrollValue,setMoreQuickReactionsScrollValue]=Vencord.Webpack.Common.React.useState(0);moreQuickReactionsScrollValue;"},{match:/className:(\i\.\i),(?=children:)/,replace:'className:"vc-better-quick-react "+($self.settings.store.compactMode?"vc-better-quick-react-compact ":"")+$1,style:{"--vc-better-quick-react-columns":$self.settings.store.columns},'},{match:/children:(\i)\.map\(/,replace:"onWheel:$self.onWheelWrapper(moreQuickReactionsScrollValue,setMoreQuickReactionsScrollValue,$1.length),children:$self.applyScroll($1,moreQuickReactionsScrollValue).map("}]},{find:/\.groupLabel,\i\.hideInteraction,/,replacement:{match:/role:"group",/,replace:"$&style:arguments[0].style,onWheel:arguments[0].onWheel,"}}],getMaxQuickReactions(){return ny.store.rows*ny.store.columns},get reactionCount(){return ny.store.reactionCount},applyScroll(e,t){return e.slice(t,t+this.getMaxQuickReactions())},onWheelWrapper(e,t,o){if(ny.store.scroll)return n=>{if(n.deltaY===0||n.shiftKey)return;n.stopPropagation();let i=n.deltaY<0?-1:1,s=e+i*ny.store.columns;t(Math.max(0,Math.min(s,o-this.getMaxQuickReactions())))}}})});var lxe=x(()=>{});function kVe(e){return e.name||e.recipients.map(z.getUser).filter(kd).map(t=>Tt.getNickname(t.id)||vVe.getName(t)).join(", ")}function AVe(e){let t=xT(e.id).length;return`${t===0?"No":t} Mutual Group${t!==1?"s":""}`}function uxe(e,t){return e.map(o=>r(en,{key:o.id,className:hT.row,onClick:()=>{t(),bVe.selectPrivateChannel(o.id)}},r(Bl,{src:To.getChannelIconURL({id:o.id,icon:o.icon,size:32}),size:"SIZE_40",className:hT.icon}),r("div",{className:hT.details},r("div",{className:hT.name},kVe(o)),r(Y,{size:"xs",weight:"medium"},o.recipients.length+1," Members"))))}var bVe,vVe,cxe,SVe,hT,wVe,xT,EVe,dxe,yT,pxe=x(()=>{"use strict";d();lxe();Et();tt();H();Km();At();$();fe();B();bVe=He("selectPrivateChannel"),vVe=He("getGlobalName"),cxe=et("empty","textContainer","connectionIcon"),SVe=et("tabPanelScroller","tabBarPanel"),hT=et("row","icon","name","details"),wVe=De('action:"PRESS_SECTION"',"section");xT=e=>ne.getSortedPrivateChannels().filter(t=>t.isGroupDM()&&t.recipients.includes(e)),EVe=e=>e.bot||e.id===z.getCurrentUser().id;dxe=Symbol("MutualGroupDMs.Patched"),yT=k({name:"MutualGroupDMs",description:"Shows mutual group dms in profiles",authors:[w.amia],patches:[{find:".BOT_DATA_ACCESS?(",replacement:[{match:/\i\.useEffect.{0,100}(\i)\[0\]\.section/,replace:"$self.pushSection($1,arguments[0].user);$&"},{match:/\(0,\i\.jsx\)\(\i,\{items:\i,section:(\i)/,replace:"$1==='MUTUAL_GDMS'?$self.renderMutualGDMs(arguments[0]):$&"},{match:/className:\i\.\i(?=,type:"top")/,replace:'$& + " vc-mutual-gdms-modal-tab-bar"'}]},{find:".WIDGETS?",replacement:[{match:/items:(\i),.+?(?=return\(0,\i\.jsxs?\)\("div)/,replace:"$&$self.pushSection($1,arguments[0].user);"},{match:/children:(?=.{0,100}?component:.+?section:(\i))/,replace:"$&$1==='MUTUAL_GDMS'?$self.renderMutualGDMs(arguments[0]):"},{match:/type:"top",/,replace:'$&className:"vc-mutual-gdms-modal-v2-tab-bar",'}]},{find:'section:"MUTUAL_FRIENDS"',replacement:[{match:/\i\|\|\i(?=\?\(0,\i\.jsxs?\)\(\i\.\i\.Overlay,)/,replace:"$&||$self.getMutualGroupDms(arguments[0].user.id).length>0"},{match:/\.openUserProfileModal.+?\)}\)}\)(?<=,(\i)&&(\i)&&(\(0,\i\.jsxs?\)\(\i\.\i,{className:(\i)\.\i}\)).{0,50}?"MUTUAL_FRIENDS".+?)/,replace:(e,t,o,n,i)=>`${e},$self.renderDMPageList({user:arguments[0].user,hasDivider:${t}||${o},Divider:${n},listStyle:${i}.list})`}]}],getMutualGroupDms(e){try{return xT(e)}catch(t){new ke("MutualGroupDMs").error("Failed to get mutual group dms:",t)}return[]},pushSection(e,t){try{if(EVe(t)||e[dxe])return;e[dxe]=!0,e.push({text:AVe(t),section:"MUTUAL_GDMS"})}catch(o){new ke("MutualGroupDMs").error("Failed to push mutual group dms section:",o)}},renderMutualGDMs:ee.wrap(({user:e,onClose:t})=>{let o=rt(()=>xT(e.id),[e.id]),n=uxe(o,t);return r(dd,{className:SVe.tabPanelScroller,fade:!0,onClose:t},n.length>0?n:r("div",{className:cxe.empty},r("div",{className:cxe.textContainer},r(Y,{tag:"h3",size:"md",weight:"medium",style:{color:"var(--text-strong)"}},"You don't have any group chats in common"))))}),renderDMPageList:ee.wrap(({user:e,hasDivider:t,Divider:o,listStyle:n})=>{let i=xT(e.id);return i.length===0?null:r(f,null,t&&o,r(wVe,{listClassName:n,header:"Mutual Groups",isLoading:!1,items:uxe(i,()=>{})}))},{noop:!0})})});function MVe(e){if(Fu.store.voiceChannels)try{ne.getChannelIds(e).filter(t=>ne.getChannel(t).isGuildVocal()&&!IVe.isCollapsed(t)).forEach(t=>DVe.update(t))}catch(t){console.warn("[NewGuildSettings] Error applying voice name hiding:",t)}}function gxe(e){e==="@me"||e==="null"||e==null||(mxe(e,{muted:Fu.store.guild,mobile_push:!Fu.store.mobilePush,suppress_everyone:Fu.store.everyone,suppress_roles:Fu.store.role,mute_scheduled_events:Fu.store.events,notify_highlights:Fu.store.highlights?1:0}),Fu.store.messages!==3&&mxe(e,{message_notifications:Fu.store.messages}),Fu.store.showAllChannels&&TVe(e)&&CVe(e),Fu.store.voiceChannels&&MVe(e))}var mxe,CVe,TVe,IVe,DVe,Fu,fxe,bT,hxe=x(()=>{"use strict";d();Un();Q();ao();H();$();fe();B();({updateGuildNotificationSettings:mxe}=He("updateGuildNotificationSettings")),{toggleShowAllChannels:CVe}=qn(".onboardExistingMember(",{toggleShowAllChannels:e=>{let t=String(e);return t.length<100&&!t.includes("onboardExistingMember")&&!t.includes("getOptedInChannels")}}),TVe=vt(".COMMUNITY)||",".isOptInEnabled("),IVe=Ft("CollapsedVoiceChannelStore"),DVe=He("toggleCollapseGuild"),Fu=R({guild:{description:"Mute Guild automatically",type:3,default:!0},messages:{description:"Server Notification Settings",type:4,options:[{label:"All messages",value:0},{label:"Only @mentions",value:1},{label:"Nothing",value:2},{label:"Server default",value:3,default:!0}]},everyone:{description:"Suppress @everyone and @here",type:3,default:!0},role:{description:"Suppress All Role @mentions",type:3,default:!0},highlights:{description:"Suppress Highlights automatically",type:3,default:!0},events:{description:"Mute New Events automatically",type:3,default:!0},showAllChannels:{description:"Show all channels automatically",type:3,default:!0},mobilePush:{description:"Mute Mobile Push Notifications automatically",type:3,default:!0},voiceChannels:{description:"Hide names in Voice channels automatically",type:3,default:!1}}),fxe=e=>(t,{guild:o})=>{if(!o)return;Qt("privacy",t)?.push(r(M.MenuItem,{label:"Apply NewGuildSettings",id:"vc-newguildsettings-apply",icon:e?u0:void 0,action:()=>gxe(o.id)}))};bT=k({name:"NewGuildSettings",description:"Automatically mute new servers and change various other settings upon joining",tags:["MuteNewGuild","mute","server"],authors:[w.Glitch,w.Nuckyz,w.carince,w.Mopi,w.GabiRP],isModified:!0,contextMenus:{"guild-context":fxe(!1),"guild-header-popout":fxe(!0)},patches:[{find:",acceptInvite(",replacement:{match:/INVITE_ACCEPT_SUCCESS.+?,(\i)=null!=.+?;/,replace:(e,t)=>`${e}$self.applyDefaultSettings(${t});`}},{find:"{joinGuild:",replacement:{match:/guildId:(\i),lurker:(\i).{0,20}}\)\);/,replace:(e,t,o)=>`${e}if(!${o})$self.applyDefaultSettings(${t});`}}],settings:Fu,applyDefaultSettings:gxe})});function uW(e){if(!fg)return!1;for(let t=0;t<fg.length;t++)if(fg[t].test(e.content))return!0;for(let t=0;t<e.embeds.length;t++){let o=e.embeds[t];for(let n=0;n<fg.length;n++){let i=o.rawDescription!=null&&fg[n].test(o.rawDescription),s=o.rawTitle!=null&&fg[n].test(o.rawTitle);if(i||s)return!0}}return!1}var fg,ry,vT,dW=x(()=>{"use strict";d();Q();H();$();ry=R({blockedWords:{type:0,description:"Comma-seperated list of words to block",default:"",restartNeeded:!0},useRegex:{type:3,description:"Use each value as a regular expression when checking message content (advanced)",default:!1,restartNeeded:!0},caseSensitive:{type:3,description:"Whether to use a case sensitive search or not",default:!1,restartNeeded:!0},ignoreBlockedMessages:{description:"Completely ignores (recent) new messages bar",type:3,default:!0,restartNeeded:!0}});vT=k({name:"BlockKeywords",description:"Blocks messages containing specific user-defined keywords, as if the user sending them was blocked.",authors:[j.catcraft],patches:[{find:"_channelMessages={}",predicate:()=>ry.store.blockedWords!=="",replacement:{match:/static commit\((\i)\)\{/g,replace:"$&$1=$self.blockMessagesWithKeywords($1);"}},...['"MessageStore"','"ReadStateStore"'].map(e=>({find:e,predicate:()=>ry.store.ignoreBlockedMessages&&ry.store.blockedWords!=="",replacement:[{match:/(?<=function (\i)\((\i)\){)(?=.*MESSAGE_CREATE:\1)/,replace:(t,o,n)=>`if($self.containsBlockedKeywords(${n}.message))return;`}]}))],settings:ry,containsBlockedKeywords:uW,start(){let e=ry.store.blockedWords.split(","),t=ry.store.caseSensitive?"":"i";e&&(ry.store.useRegex?fg=e.map(o=>new RegExp(o,t)):fg=e.map(o=>new RegExp(`\\b${o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}\\b`,t)))},blockMessagesWithKeywords(e){return e.reset(e.map(t=>t.set("blocked",t.blocked||this.containsBlockedKeywords(t))))}})});var NVe,Kp,iy,pW=x(()=>{"use strict";d();Q();dW();H();At();$();fe();B();NVe=Ft("ReferencedMessageStore");pp("NoBlockedMessages","disableNotifications","ignoreMessages");pp("NoBlockedMessages","alsoHideIgnoredUsers","applyToIgnoredUsers");Kp=R({alsoHideIgnoredUsers:{description:"Also hide messages from ignored users.",type:3,default:!0,restartNeeded:!1},disableNotifications:{description:'Hide new message notifications for blocked users. Always true if "Default Hide Users" is enabled below and the user triggering the notification is not exempted in "Override Users".',type:3,default:!1,restartNeeded:!1},allowAutoModMessages:{description:"Allow messages sent by AutoMod to bypass filtering.",type:3,default:!0,restartNeeded:!1},hideBlockedUserReplies:{description:"Hide replies to blocked users.",type:3,default:!1,restartNeeded:!1},defaultHideUsers:{type:3,description:"If enabled, messages from blocked users will be completely hidden and any messages from user IDs in the override list will be collapsed (default Discord behavior) instead. If disabled, messages from blocked users will be collapsed and any messages from user IDs in the override list will be completely hidden instead.",default:!0,restartNeeded:!1},overrideUsers:{type:0,description:"Comma separated list of user IDs which will be hidden or collapsed instead of the default behavior selected above.",restartNeeded:!1,default:""}}),iy=k({name:"NoBlockedMessages",description:"Hide all blocked/ignored messages from chat completely.",authors:[w.rushii,w.Samu,w.jamesbt365,w.Elvyra,j.Etorix],isModified:!0,settings:Kp,patches:[...['"MessageStore"','"ReadStateStore"'].map(e=>({find:e,replacement:[{match:/(?<=function (\i)\((\i)\){)(?=.*MESSAGE_CREATE:\1)/,replace:(t,o,n)=>`if($self.disableNotification(${n}.message)){return;};`}]})),{find:"`forum-post-action-bar-",replacement:[{match:/(?<=\);)(let \i=null,\i=\[\],\i=(\i))/,replace:"$2=$self.filterStream($2);$1"}]}],keepSuppressedMessage(e){let t=Kp.store.overrideUsers.split(",").map(o=>o.trim()).filter(o=>o.length>0);return Kp.store.defaultHideUsers?t.includes(e):!t.includes(e)},shouldKeepMessage(e){let t=this.isSuppressed(e),o=this.isReplyToSuppressed(e);return e.type===24&&Kp.store.allowAutoModMessages?[!0,t]:t.suppressed?[!t.hide,!0]:o.suppressed?[!o.hide,!0]:[!0,!1]},disableNotification(e){if(!e)return!1;let t=this.shouldKeepMessage(e),o=!t[0],n=t[1];return o||n&&Kp.store.disableNotifications},filterStream(e){let{alsoHideIgnoredUsers:t,disableNotifications:o,hideBlockedUserReplies:n,allowAutoModMessages:i,defaultHideUsers:s,overrideUsers:a}=Kp.use(["alsoHideIgnoredUsers","disableNotifications","hideBlockedUserReplies","allowAutoModMessages","defaultHideUsers","overrideUsers"]),l=[];e.forEach(u=>{let p=u.type==="MESSAGE_GROUP_BLOCKED",m=u.type==="MESSAGE_GROUP_IGNORED",g=u.type==="THREAD_STARTER_MESSAGE",y=(p||m)&&u.content?.[0]?.type==="THREAD_STARTER_MESSAGE",b=g&&u.content||y&&u.content?.[0]?.content||null,v=b?.messageReference&&NVe.getMessageByReference(b.messageReference)?.message||null,E=!1;if(y&&b&&v){let A=this.getRelationshipStatus(v.author);A.ignored||A.blocked||(l.push(u.content[0]),E=!0)}if(p||m&&t){let A=u.content.filter((I,N)=>{let _=["MESSAGE","THREAD_STARTER_MESSAGE"].includes(I.type),O=N===0&&I.type==="THREAD_STARTER_MESSAGE",F=_&&(O?v:I.content)||null;return!(O&&E)&&(!F||this.shouldKeepMessage(F)[0])});A.length&&l.push({...u,content:A})}else{let A=["MESSAGE","THREAD_STARTER_MESSAGE"].includes(u.type),C=A&&(g?v:u.content)||null;(!A||!C||this.shouldKeepMessage(C)[0])&&l.push(u)}});let c=l[l.length-1];for(;c&&c.type==="DIVIDER";)l.pop(),c=l[l.length-1];return l},isReplyToSuppressed(e){if(!Kp.store.hideBlockedUserReplies)return{suppressed:!1,hide:!1};try{let t=e.referenced_message||null;if(!t){let o=e.messageReference||e.message_reference;t=o?Rt.getMessage(o.channel_id,o.message_id):null}return t?this.isSuppressed(t):{suppressed:!1,hide:!1}}catch(t){return new ke("NoBlockedMessages").error("Failed to check if referenced message is blocked or ignored:",t),{suppressed:!1,hide:!1}}},isSuppressed(e){try{let{BlockKeywords:t}=Ge.plugins,o=t?.enabled&&t?.ignoreBlockedMessages&&uW(e),n=this.getRelationshipStatus(e.author),i=e.interaction&&this.getRelationshipStatus(e.interaction.user),s=e.author.bot&&(e.messageReference||e.message_reference),a=s&&Rt.getMessage(s.channel_id,s.message_id),l=a&&this.getRelationshipStatus(a.author),c=o||n.blocked||n.ignored&&Kp.store.alsoHideIgnoredUsers||i&&(i.blocked||i.ignored&&Kp.store.alsoHideIgnoredUsers)||l&&(l.blocked||l.ignored&&Kp.store.alsoHideIgnoredUsers),u=!this.keepSuppressedMessage(e.author.id)||e.interaction&&!this.keepSuppressedMessage(e.interaction.user.id)||a&&!this.keepSuppressedMessage(a.author.id);return{suppressed:c,hide:u}}catch(t){return new ke("NoBlockedMessages").error("Failed to check if message is blocked or ignored:",t),{suppressed:!1,hide:!1}}},getRelationshipStatus(e){let t=Tt.isBlocked(e.id);return{ignored:Tt.isIgnored(e.id),blocked:t}}})});var ST,xxe=x(()=>{"use strict";d();H();$();ST=k({name:"DisableDeepLinks",description:"Disables Discord's stupid deep linking feature which tries to force you to use their Desktop App",authors:[w.Ven],required:!0,noop:()=>{},patches:[{find:/\.openNativeAppModal\(.{0,50}?\.DEEP_LINK/,replacement:{match:/\i\.\i\.openNativeAppModal/,replace:"$self.noop"}}]})});var wT,yxe=x(()=>{"use strict";d();H();$();wT=k({name:"NoDevtoolsWarning",description:"Disables the 'HOLD UP' banner in the console. As a side effect, also prevents Discord from hiding your token, which prevents random logouts.",authors:[w.Ven],patches:[{find:"setDevtoolsCallbacks",replacement:{match:/if\(null!=\i&&"0.0.0"===\i\.remoteApp\.getVersion\(\)\)/,replace:"if(true)"}}]})});var kT,bxe=x(()=>{"use strict";d();H();$();kT=k({name:"NoF1",description:"Disables F1 help bind.",authors:[w.Cyn],patches:[{find:',"f1"],comboKeysBindGlobal:',replacement:{match:',"f1"],comboKeysBindGlobal:',replace:"],comboKeysBindGlobal:"}}]})});var ET,vxe=x(()=>{"use strict";d();H();$();ET=k({name:"NoMaskedUrlPaste",authors:[w.CatNoir],description:"Pasting a link while having text selected will not paste as masked URL",patches:[{find:".selection,preventEmojiSurrogates:",replacement:{match:/if\(null!=\i.selection&&\i.\i.isExpanded\(\i.selection\)\)/,replace:"if(false)"}}]})});var Sxe,AT,wxe=x(()=>{"use strict";d();Q();H();$();Sxe=R({inlineVideo:{description:"Play videos without carousel modal",type:3,default:!0,restartNeeded:!0}}),AT=k({name:"NoMosaic",authors:[w.AutumnVN],description:"Removes Discord image mosaic",tags:["image","mosaic","media"],settings:Sxe,patches:[{find:'=>"IMAGE"===',replacement:{match:/=>"IMAGE"===\i\|\|"VIDEO"===\i(?:\|\|("VISUAL_PLACEHOLDER"===\i))?;/,replace:(e,t)=>t!=null?`=>${t};`:"=>false;"}},{find:"renderAttachments(",predicate:()=>Sxe.store.inlineVideo,replacement:{match:/url:(\i)\.url\}\);return /,replace:"$&$1.content_type?.startsWith('image/')&&"}}]})});var CT,kxe=x(()=>{"use strict";d();H();$();CT=k({name:"NoOnboardingDelay",description:"Skips the slow and annoying onboarding delay",authors:[w.nekohaxx],patches:[{find:"#{intl::ONBOARDING_COVER_WELCOME_SUBTITLE}",replacement:{match:"3e3",replace:"0"}}]})});var BVe,$5,TT,Exe=x(()=>{"use strict";d();Q();H();$();fe();BVe=He("getMessageRequestsCount"),$5=R({hideFriendRequestsCount:{type:3,description:"Hide incoming friend requests count",default:!0,restartNeeded:!0},hideMessageRequestsCount:{type:3,description:"Hide message requests count",default:!0,restartNeeded:!0},hidePremiumOffersCount:{type:3,description:"Hide nitro offers count",default:!0,restartNeeded:!0}}),TT=k({name:"NoPendingCount",description:"Removes the ping count of incoming friend requests, message requests, and nitro offers.",authors:[w.amia],settings:$5,patches:[{find:"getPendingCount(){",predicate:()=>$5.store.hideFriendRequestsCount,replacement:{match:/(?<=getPendingCount\(\)\{)/,replace:"return 0;"}},{find:"getMessageRequestsCount(){",predicate:()=>$5.store.hideMessageRequestsCount,replacement:{match:/(?<=getMessageRequestsCount\(\)\{)/,replace:"return 0;"}},{find:".getSpamChannelsCount();return",predicate:()=>$5.store.hideMessageRequestsCount,replacement:{match:/(?<=getSpamChannelsCount\(\);return )\i\.getMessageRequestsCount\(\)/,replace:"$self.getRealMessageRequestCount()"}},{find:"showProgressBadge:",predicate:()=>$5.store.hidePremiumOffersCount,replacement:{match:/(\{unviewedTrialCount:(\i),unviewedDiscountCount:(\i)\}.+?)\2\+\3/,replace:(e,t)=>`${t}0`}}],getRealMessageRequestCount(){return BVe.getMessageRequestChannelIds().size}})});var IT,Axe=x(()=>{"use strict";d();H();$();B();IT=k({name:"NoProfileThemes",description:"Completely removes Nitro profile themes from everyone but yourself",authors:[w.TheKodeToad],patches:[{find:"hasThemeColors(){",replacement:{match:/get canUsePremiumProfileCustomization\(\){return /,replace:"$&$self.isCurrentUser(this.userId)&&"}}],isCurrentUser:e=>e===z.getCurrentUser()?.id})});var mW,DT,Cxe=x(()=>{"use strict";d();Q();H();$();mW=R({shownEmojis:{description:"The types of emojis to show in the autocomplete menu.",type:4,default:"onlyUnicode",options:[{label:"Only unicode emojis",value:"onlyUnicode"},{label:"Unicode emojis and server emojis from current server",value:"currentServer"},{label:"Unicode emojis and all server emojis (Discord default)",value:"all"}]}}),DT=k({name:"NoServerEmojis",authors:[w.UlyssesZhan],description:"Do not show server emojis in the autocomplete menu.",settings:mW,patches:[{find:"}searchWithoutFetchingLatest(",replacement:{match:/\.nameMatchesChain\(\i\)\.reduce\(\((\i),(\i)\)=>\{(?<=channel:(\i).+?)/,replace:"$&if($self.shouldSkip($3,$2))return $1;"}}],shouldSkip(e,t){return t.type!==1?!1:mW.store.shownEmojis==="onlyUnicode"?!0:mW.store.shownEmojis==="currentServer"?t.guildId!==(e!=null?e.getGuildId():null):!1}})});var PVe,MT,Txe=x(()=>{"use strict";d();Q();H();$();PVe=R({notificationVolume:{type:5,description:"Notification volume",markers:[0,25,50,75,100],default:100,stickToMarkers:!1}}),MT=k({name:"NotificationVolume",description:"Save your ears and set a separate volume for notifications and in-app sounds",authors:[w.philipbry],settings:PVe,patches:[{find:"ensureAudio(){",replacement:{match:/(?=Math\.min\(\i\.\i\.getOutputVolume\(\)\/100)/g,replace:"$self.settings.store.notificationVolume/100*"}}]})});var NT,Ixe=x(()=>{"use strict";d();H();$();NT=k({name:"NoTypingAnimation",authors:[w.AutumnVN],description:"Disables the CPU-intensive typing dots animation",patches:[{find:"dotCycle",replacement:{match:/focused:(\i)/g,replace:(e,t)=>`_focused:${t}=false`}}]})});var BT,Dxe=x(()=>{"use strict";d();H();$();BT=k({name:"NoUnblockToJump",description:"Allows you to jump to messages of blocked or ignored users and likely spammers without unblocking them",authors:[w.dzshn],patches:[{find:"#{intl::UNIGNORE_TO_JUMP_BODY}",replacement:{match:/if\(\i\.\i\.isBlockedForMessage\(/,replace:"return true;$&"}}]})});var sy,PT,Mxe=x(()=>{"use strict";d();Q();H();$();hr();B();sy=R({channelToAffect:{type:4,description:"Select the type of DM for the plugin to affect",options:[{label:"Both",value:"both_dms",default:!0},{label:"User DMs",value:"user_dm"},{label:"Group DMs",value:"group_dm"}]},allowMentions:{type:3,description:"Receive audio pings for @mentions",default:!1},allowEveryone:{type:3,description:"Receive audio pings for @everyone and @here in group DMs",default:!1},ignoreUsers:{type:0,description:"User IDs (comma + space) whose pings should NEVER be throttled",restartNeeded:!0,default:""},alwaysPlaySound:{type:3,description:"Play the message notification sound even when its disabled",restartNeeded:!0,default:!1}}),PT=k({name:"OnePingPerDM",description:"If unread messages are sent by a user in DMs multiple times, you'll only receive one audio ping.",authors:[w.ProffDea],isModified:!0,settings:sy,patches:[{find:".getDesktopType()===",replacement:[{match:/(\i\.\i\.getDesktopType\(\)===\i\.\i\.NEVER)\)(?=.*?(\i\.\i\.playNotificationSound\(.{0,5}\)))/,replace:"$&if(!$self.isPrivateChannelRead(arguments[0]?.message))return;else if($self.playSound())return $2;else "},{match:/sound:(\i\?(\i):void 0,volume:\i,onClick)/,replace:"sound:!$self.isPrivateChannelRead(arguments[0]?.message)?undefined:$self.playSound()?$2:$1"}]}],playSound(){return sy.store.alwaysPlaySound},isPrivateChannelRead(e){if(sy.store.ignoreUsers.split(", ").filter(Boolean).includes(e.author.id))return!0;let o=ne.getChannel(e.channel_id)?.type;return o!==1&&o!==3||o===1&&sy.store.channelToAffect==="group_dm"||o===3&&sy.store.channelToAffect==="user_dm"||sy.store.allowMentions&&e.mentions.some(n=>n.id===z.getCurrentUser().id)||sy.store.allowEveryone&&e.mention_everyone?!0:ss.getOldestUnreadMessageId(e.channel_id)===e.id}})});var gW,_T,_Ve,xf,RT=x(()=>{"use strict";d();Q();H();$();B();gW={spotify:{match:/^https:\/\/open\.spotify\.com\/(?:intl-[a-z]{2}\/)?(track|album|artist|playlist|user|episode|prerelease)\/(.+)(?:\?.+?)?$/,replace:(e,t,o)=>`spotify://${t}/${o}`,description:"Open Spotify links in the Spotify app",shortlinkMatch:/^https:\/\/spotify\.link\/.+$/,accountViewReplace:e=>`spotify:user:${e}`},steam:{match:/^https:\/\/(steamcommunity\.com|(?:help|store)\.steampowered\.com)\/.+$/,replace:e=>`steam://openurl/${e}`,description:"Open Steam links in the Steam app",shortlinkMatch:/^https:\/\/s.team\/.+$/,accountViewReplace:e=>`steam://openurl/https://steamcommunity.com/profiles/${e}`},epic:{match:/^https:\/\/store\.epicgames\.com\/(.+)$/,replace:(e,t)=>`com.epicgames.launcher://store/${t}`,description:"Open Epic Games links in the Epic Games Launcher"},tidal:{match:/^https:\/\/(?:listen\.)?tidal\.com\/(?:browse\/)?(track|album|artist|playlist|user|video|mix)\/([a-f0-9-]+).*/,replace:(e,t,o)=>`tidal://${t}/${o}`,description:"Open Tidal links in the Tidal app"},itunes:{match:/^https:\/\/(?:geo\.)?music\.apple\.com\/([a-z]{2}\/)?(album|artist|playlist|song|curator)\/([^/?#]+)\/?([^/?#]+)?(?:\?.*)?(?:#.*)?$/,replace:(e,t,o,n,i)=>i?`itunes://music.apple.com/us/${o}/${n}/${i}`:`itunes://music.apple.com/us/${o}/${n}`,description:"Open Apple Music links in the iTunes app"},vrcx:{match:/^https:\/\/vrchat.com\/home\/(user|avatar|world|group)\/(.+)$/,replace:(e,t,o)=>`vrcx://${t}/${o}`,description:"Open VRChat links in the VRCX app"}},_T=R(Object.entries(gW).reduce((e,[t,o])=>(e[t]={type:3,description:o.description,default:!0},e),{})),_Ve=VencordNative.pluginHelpers.OpenInApp,xf=k({name:"OpenInApp",description:"Open links in their respective apps instead of your browser",authors:[w.Ven,w.surgedevs],settings:_T,patches:[{find:"trackAnnouncementMessageLinkClicked({",replacement:{match:/function (\i\(\i,\i\)\{)(?=.{0,150}trusted:)/,replace:"async function $1 if(await $self.handleLink(...arguments)) return;"}},{find:"no artist ids in metadata",predicate:()=>_T.store.spotify,replacement:[{match:/\i\.\i\.isProtocolRegistered\(\)/g,replace:"true"},{match:/\(0,\i\.isDesktop\)\(\)/,replace:"true"}]},...[".__invalid_connectedAccountOpenIconContainer",".BLUESKY||"].map(e=>({find:e,replacement:{match:/(?<=onClick:(\i)=>\{)(?=.{0,100}\.CONNECTED_ACCOUNT_VIEWED)(?<==(\i)\.metadata.+?)/,replace:"if($self.handleAccountView($1,$2.type,$2.id)) return;"}}))],async handleLink(e,t){if(!e)return!1;let o=e.href;if(!o)return!1;for(let[n,i]of Object.entries(gW))if(_T.store[n]&&(i.shortlinkMatch?.test(o)&&(t?.preventDefault(),o=await _Ve.resolveRedirect(o)),i.match.test(o))){Re("Opened link in native app",D.Type.SUCCESS);let s=o.replace(i.match,i.replace);return VencordNative.native.openExternal(s),t?.preventDefault(),!0}return t?.defaultPrevented?(window.open(o,"_blank"),!0):!1},handleAccountView(e,t,o){let n=gW[t];if(n?.accountViewReplace&&_T.store[t])return VencordNative.native.openExternal(n.accountViewReplace(o)),e.preventDefault(),!0}})});var hW,LT,Nxe=x(()=>{"use strict";d();Q();H();$();hW=R({defaultLayout:{type:4,options:[{label:"List",value:1,default:!0},{label:"Gallery",value:2}],description:"Which layout to use as default"},defaultSortOrder:{type:4,options:[{label:"Recently Active",value:0,default:!0},{label:"Date Posted",value:1}],description:"Which sort order to use as default"}}),LT=k({name:"OverrideForumDefaults",description:"Allows you to override default forum layout/sort order. you can still change it on a per-channel basis",authors:[w.Inbestigator],patches:[{find:"getDefaultLayout(){",replacement:[{match:/}getDefaultLayout\(\){/,replace:"$&return $self.getLayout();"},{match:/}getDefaultSortOrder\(\){/,replace:"$&return $self.getSortOrder();"}]}],getLayout:()=>hW.store.defaultLayout,getSortOrder:()=>hW.store.defaultSortOrder,settings:hW})});function RVe(e){let t=ct.getGuild(e);return t?!S1(t,"INVITES_DISABLED")&&Kt.getGuildPermissionProps(t).canManageRoles:!1}function LVe(e){let o=[...ct.getGuild(e).features,"INVITES_DISABLED"];Ht.patch({url:jo.Endpoints.GUILD(e),body:{features:o}})}var OT,Bxe=x(()=>{"use strict";d();tt();H();mt();$();B();OT=k({name:"PauseInvitesForever",tags:["DisableInvitesForever"],description:"Brings back the option to pause invites indefinitely that stupit Discord removed.",authors:[w.Dolfies,w.amia],patches:[{find:"#{intl::GUILD_INVITE_DISABLE_ACTION_SHEET_DESCRIPTION}",group:!0,replacement:[{match:/children:\i\.\i\.string\(\i\.\i#{intl::GUILD_INVITE_DISABLE_ACTION_SHEET_DESCRIPTION}\)/,replace:"children: $self.renderInvitesLabel({guildId:arguments[0].guildId,setChecked})"},{match:/\.INVITES_DISABLED\)(?=.+?#{intl::INVITES_PERMANENTLY_DISABLED_TIP}.+?checked:(\i)).+?\[\1,(\i)\]=\i.useState\(\i\)/,replace:"$&,setChecked=$2"}]}],renderInvitesLabel:ee.wrap(({guildId:e,setChecked:t})=>r("div",null,St("GUILD_INVITE_DISABLE_ACTION_SHEET_DESCRIPTION"),RVe(e)&&r("a",{role:"button",onClick:()=>{t(!0),LVe(e)}}," Pause Indefinitely.")),{noop:!0})})});var xW,FT,Pxe=x(()=>{"use strict";d();Q();H();ad();$();xW=R({lockout:{type:3,default:!0,description:`Bypass the permission lockout prevention ("Pretty sure you don't want to do this")`,restartNeeded:!0},onboarding:{type:3,default:!0,description:'Bypass the onboarding requirements ("Making this change will make your server incompatible [...]")',restartNeeded:!0}}),FT=k({name:"PermissionFreeWill",description:"Disables the client-side restrictions for channel permission management.",authors:[w.lewisakura],patches:[{find:"#{intl::STAGE_CHANNEL_CANNOT_OVERWRITE_PERMISSION}",replacement:[{match:/case"DENY":.{0,50}if\((?=\i\.\i\.can)/,replace:"$&true||"}],predicate:()=>xW.store.lockout},{find:"#{intl::ONBOARDING_CHANNEL_THRESHOLD_WARNING}",replacement:[{match:/{(?:\i:\(\)=>\i,?){2}}/,replace:e=>e.replaceAll(Ti(/\(\)=>\i/g),"()=>()=>Promise.resolve(true)")}],predicate:()=>xW.store.onboarding}],settings:xW})});var _xe=x(()=>{});function $T({id:e},t){return tr.getSortedRoles(e).filter(o=>o.id===e||t.roles.includes(o.id))}function Rxe(e){switch(gg.store.permissionsSortOrder){case 0:return e.sort((t,o)=>o.position-t.position);case 1:return e.sort((t,o)=>t.position-o.position);default:return e}}function HT(e,t){let o=tr.getRolesSnapshot(t);return e.sort((n,i)=>{if(n.type!==0||i.type!==0)return 0;let s=o[n.id];return o[i.id].position-s.position})}var UT,yr,H5=x(()=>{"use strict";d();nt();hr();fe();B();bv();({getGuildPermissionSpecMap:UT}=He("getGuildPermissionSpecMap")),yr=de("vc-permviewer-")});function bW(){return r("svg",{height:"24",width:"24",viewBox:"0 0 24 24"},r("title",null,"Denied"),r("path",{fill:"var(--status-danger)",d:"M18.4 4L12 10.4L5.6 4L4 5.6L10.4 12L4 18.4L5.6 20L12 13.6L18.4 20L20 18.4L13.6 12L20 5.6L18.4 4Z"}))}function vW(){return r("svg",{height:"24",width:"24",viewBox:"0 0 24 24"},r("title",null,"Allowed"),r("path",{fill:"var(--status-positive)",d:"M8.99991 16.17L4.82991 12L3.40991 13.41L8.99991 19L20.9999 7.00003L19.5899 5.59003L8.99991 16.17ZZ"}))}function Lxe(){return r("svg",{height:"24",width:"24",viewBox:"0 0 16 16"},r("g",null,r("title",null,"Not overwritten"),r("polygon",{fill:"var(--text-default)",points:"12 2.32 10.513 2 4 13.68 5.487 14"})))}var Oxe=x(()=>{"use strict";d()});function UVe(e){let t=FVe(e,20);if(!t)return;let{customIconSrc:o,unicodeEmoji:n}=t;return o??n?.url}function $Ve({permissions:e,guild:t,modalProps:o,header:n}){let i=rt(()=>UT(t),[t.id]);Je([Lt],()=>Lt.getMemberIds(t.id),null,(u,p)=>u.length===p.length),se(()=>{e.sort((u,p)=>u.type-p.type)},[e]),se(()=>{let u=e.filter(p=>p.type===1&&!Lt.isMember(t.id,p.id)).map(({id:p})=>p);V.dispatch({type:"GUILD_MEMBERS_REQUEST",guildIds:[t.id],userIds:u})},[]);let[s,a]=L(0),l=e[s],c=tr.getRolesSnapshot(t.id);return r(Pe,{...o,size:"large"},r(je,null,r(Y,{size:"lg",weight:"semibold",className:yr("modal-title")},n," Permissions"),r(Ut,{onClick:o.onClose})),r($e,{className:yr("modal-content")},!l&&r("div",{className:yr("modal-no-perms")},r(Y,{size:"lg"},"No permissions to display!")),l&&r("div",{className:yr("modal-container")},r(dd,{className:yr("modal-list"),orientation:"auto"},e.map((u,p)=>{let m=z.getUser(u.id??""),g=c[u.id??""],y=g!=null?UVe(g):void 0;return r("div",{key:p,className:yr("modal-list-item-btn"),onClick:()=>a(p),role:"button",tabIndex:0},r("div",{className:yr("modal-list-item",{"modal-list-item-active":s===p}),onContextMenu:b=>{u.type===0?Dt.openContextMenu(b,()=>r(HVe,{guild:t,roleId:u.id,onClose:o.onClose})):u.type===1&&Dt.openContextMenu(b,()=>r(zVe,{userId:u.id}))}},(u.type===0||u.type===2)&&r("span",{className:yr("modal-role-circle"),style:{backgroundColor:g?.colorString??"var(--primary-300)"}}),u.type===0&&y!=null&&r("img",{className:yr("modal-role-image"),src:y}),u.type===1&&m!=null&&r("img",{className:yr("modal-user-img"),src:m.getAvatarURL(void 0,void 0,!1)}),r(Y,{size:"md",className:yr("modal-list-item-text")},u.type===0?g?.name??"Unknown Role":u.type===1?(m!=null&&yu(m))??"Unknown User":r(Be,{gap:"0.2em"},"@owner",r($L,{height:18,width:18,"aria-hidden":"true"})))))})),r("div",{className:yr("modal-divider")}),r(dd,{className:yr("modal-perms"),orientation:"auto"},Object.values(Nt).map(u=>r("div",{key:u,className:yr("modal-perms-item")},r("div",{className:yr("modal-perms-item-icon")},(()=>{let{permissions:p,overwriteAllow:m,overwriteDeny:g}=l;return p?(p&u)===u?vW():bW():m&&(m&u)===u?vW():g&&(g&u)===u?bW():Lxe()})()),r(Y,{size:"md"},i[String(u)].title),r(Ue,{text:(()=>{let{description:p}=i[String(u)];return typeof p=="function"?b0.intl.format(p,{}):p})()},p=>r(cu,{...p}))))))))}function HVe({guild:e,roleId:t,onClose:o}){return r(M.Menu,{navId:yr("role-context-menu"),onClose:Dt.closeContextMenu,"aria-label":"Role Options"},r(M.MenuItem,{id:yr("copy-role-id"),label:St("COPY_ID_ROLE"),action:()=>{Oo(t)}}),gg.store.unsafeViewAsRole&&r(M.MenuItem,{id:yr("view-as-role"),label:St("VIEW_AS_ROLE"),action:()=>{let n=tr.getRole(e.id,t);n&&(o(),V.dispatch({type:"IMPERSONATE_UPDATE",guildId:e.id,data:{type:"ROLES",roles:{[t]:n}}}))}}))}function zVe({userId:e}){return r(M.Menu,{navId:yr("user-context-menu"),onClose:Dt.closeContextMenu,"aria-label":"User Options"},r(M.MenuItem,{id:yr("copy-user-id"),label:St("COPY_ID_USER"),action:()=>{Oo(e)}}))}function ay(e,t,o){return Ee(n=>r(GVe,{modalProps:n,permissions:e,guild:t,header:o}))}var FVe,GVe,zT=x(()=>{"use strict";d();Et();tt();eo();ao();H5();cs();mt();at();hr();fe();B();bv();Oxe();FVe=vt("convertSurrogateToName","customIconSrc","unicodeEmoji");GVe=ee.wrap($Ve)});function Fxe({text:e,color:t,...o}){return r("div",{...o,className:me(z5.role)},r("div",{className:z5.roleRemoveButton},r("span",{className:qVe.roleCircle,style:{backgroundColor:t}})),r("div",{className:z5.roleName},r(Y,{size:"xs",weight:"medium",className:z5.roleNameOverflow},e)))}function jVe({roleName:e,roleColor:t}){return r(f,null,r(Y,{size:"sm"},"Granted By"),r(Fxe,{text:e,color:t}))}function WVe({guild:e,guildMember:t,closePopout:o}){let{permissionsSortOrder:n}=gg.use(["permissionsSortOrder"]),i=rt(()=>UT(e),[e.id]),[s,a]=rt(()=>{let l=[],c=$T(e,t),u=c.map(p=>({type:0,...p}));if(e.ownerId===t.userId){u.push({type:2,permissions:Object.values(Nt).reduce((m,g)=>m|g,0n)});let p=St("GUILD_OWNER")??"Server Owner";l.push({permission:p,roleName:"Owner",roleColor:"var(--primary-300)",rolePosition:1/0})}Rxe(c);for(let p of Object.values(Nt))for(let{permissions:m,colorString:g,position:y,name:b}of c)if((m&p)===p){l.push({permission:i[String(p)].title,roleName:b,roleColor:g||"var(--primary-300)",rolePosition:y});break}return l.sort((p,m)=>m.rolePosition-p.rolePosition),[u,l]},[n]);return r("div",null,r("div",{className:yr("user-header-container")},r(Vn,null,"Permissions"),r("div",{className:yr("user-header-btns")},r(Ue,{text:`Sorting by ${n===0?"Highest Role":"Lowest Role"}`},l=>r("div",{...l,className:yr("user-header-btn"),role:"button",tabIndex:0,onClick:()=>{gg.store.permissionsSortOrder=n===0?1:0}},r("svg",{width:"24",height:"24",viewBox:"0 96 960 960",transform:n===0?"scale(1 1)":"scale(1 -1)"},r("path",{fill:"var(--text-default)",d:"M440 896V409L216 633l-56-57 320-320 320 320-56 57-224-224v487h-80Z"})))),r(Ue,{text:"Role Details"},l=>r("div",{...l,className:yr("user-header-btn"),role:"button",tabIndex:0,onClick:()=>{o(),ay(s,e,t.nick||z.getUser(t.userId).username)}},r("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},r("path",{fill:"var(--text-default)",d:"M7 12.001C7 10.8964 6.10457 10.001 5 10.001C3.89543 10.001 3 10.8964 3 12.001C3 13.1055 3.89543 14.001 5 14.001C6.10457 14.001 7 13.1055 7 12.001ZM14 12.001C14 10.8964 13.1046 10.001 12 10.001C10.8954 10.001 10 10.8964 10 12.001C10 13.1055 10.8954 14.001 12 14.001C13.1046 14.001 14 13.1055 14 12.001ZM19 10.001C20.1046 10.001 21 10.8964 21 12.001C21 13.1055 20.1046 14.001 19 14.001C17.8954 14.001 17 13.1055 17 12.001C17 10.8964 17.8954 10.001 19 10.001Z"})))))),a.length>0&&r("div",{className:me(z5.root)},a.map(({permission:l,roleColor:c,roleName:u})=>r(Ue,{key:l,text:r(jVe,{roleName:u,roleColor:c}),tooltipClassName:yr("granted-by-container"),tooltipContentClassName:yr("granted-by-content")},p=>r(Fxe,{...p,text:l,color:c})))))}var z5,qVe,Uxe,$xe=x(()=>{"use strict";d();Et();tt();ut();H5();mt();xt();hr();fe();B();bv();zT();z5=et("role","roleName","roleRemoveButton","roleNameOverflow","root"),qVe=et("roleCircle","dot","dotBorderColor");Uxe=ee.wrap(WVe,{noop:!0})});function SW(e,t,o){return o===0&&!Lt.isMember(e,t)?null:r(M.MenuItem,{id:"perm-viewer-permissions",label:"Permissions",action:()=>{let n=ct.getGuild(e),{permissions:i,header:s}=ZE(o).returnType().with(0,()=>{let a=Lt.getMember(e,t),l=$T(n,a).map(c=>({type:0,...c}));return n.ownerId===t&&l.push({type:2,permissions:Object.values(Nt).reduce((c,u)=>c|u,0n)}),{permissions:l,header:a.nick??z.getUser(a.userId).username}}).with(1,()=>{let a=ne.getChannel(t);return{permissions:HT(Object.values(a.permissionOverwrites).map(({id:c,allow:u,deny:p,type:m})=>({type:m,id:c,overwriteAllow:u,overwriteDeny:p})),e),header:a.name}}).otherwise(()=>({permissions:tr.getSortedRoles(n.id).map(l=>({type:0,...l})),header:n.name}));ay(i,n,s)}})}function GT(e,t){return(o,n)=>{if(!n||t===0&&!n.user||t===2&&!n.guild||t===1&&(!n.channel||!n.guild))return;let i=Qt(e,o),s=ZE(t).with(0,()=>SW(n.guildId,n.user.id,t)).with(1,()=>SW(n.guild.id,n.channel.id,t)).with(2,()=>SW(n.guild.id)).otherwise(()=>null);if(s!=null){if(i)return i.push(s);e==="roles"&&n.guildId&&o.splice(-1,0,r(M.MenuGroup,null,s))}}}var KVe,gg,vv,bv=x(()=>{"use strict";d();_xe();Un();Q();tt();ao();du();H();xt();$();hr();fe();B();zT();$xe();H5();KVe=et("container","scroller","list"),gg=R({permissionsSortOrder:{description:"The sort method used for defining which role grants an user a certain permission",type:4,options:[{label:"Highest Role",value:0,default:!0},{label:"Lowest Role",value:1}]}});vv=k({name:"PermissionsViewer",description:"View the permissions a user or channel has, and the roles of a server",authors:[w.Nuckyz,w.Ven],settings:gg,patches:[{find:"#{intl::COLLAPSE_ROLES}",replacement:{match:/(?<=\i\.id\)\),\i\(\))(?=,\i\?)/,replace:",$self.ViewPermissionsButton(arguments[0])"}}],ViewPermissionsButton:ee.wrap(({className:e,guild:t,userId:o})=>{let n=Lt.getMember(t.id,o);if(!n)return null;let i=kt(null);return r(g1,{position:"bottom",align:"center",targetElementRef:i,renderPopout:({closePopout:s})=>r(wO,{className:KVe.container,style:{width:"500px"}},r(Uxe,{guild:t,guildMember:n,closePopout:s}))},s=>r(ii,{text:"View Permissions"},r(U,{...s,ref:i,color:U.Colors.CUSTOM,look:U.Looks.FILLED,size:U.Sizes.NONE,className:me(e,"vc-permviewer-role-button")},r(WL,{height:"16",width:"16"}))))},{noop:!0}),contextMenus:{"user-context":GT("roles",0),"channel-context":GT(["mute-channel","unmute-channel"],1),"guild-context":GT("privacy",2),"guild-header-popout":GT("privacy",2)}})});function Hxe(e){let t=e instanceof File,o=t?URL.createObjectURL(e):e;return new Promise((n,i)=>{let s=new Image;s.onload=()=>{t&&URL.revokeObjectURL(o),n(s)},s.onerror=a=>i(Error(`An error occurred while loading ${o}. Check the console for more info.`)),s.crossOrigin="Anonymous",s.src=o})}async function XVe(e,t,o){for(let n of e)switch(n.name){case"image":let i=up.getUpload(t.channel.id,n.name,sn.SlashCommand);if(i){if(!i.isImage)throw _l.clearAll(t.channel.id,sn.SlashCommand),"Upload is not an image";return i.item.file}break;case"url":return n.value;case"user":try{return(await as.getUser(n.value)).getAvatarURL(o?void 0:t.guild?.id,2048).replace(/\?size=\d+$/,"?size=2048")}catch(s){throw console.error(`[petpet] Failed to fetch user
`,s),_l.clearAll(t.channel.id,sn.SlashCommand),"Failed to fetch user. Check the console for more info."}}return _l.clearAll(t.channel.id,sn.SlashCommand),null}function JVe(e,t,o){return e<<8&63488|t<<3&2016|o>>3}function VVe(e,t,o,n){let i=new Uint8Array(Math.floor(e.length/4));for(let s=0;s<i.length;s+=1){let a=e[4*s],l=e[4*s+1],c=e[4*s+2];if(e[4*s+3]<n)i[s]=255;else{let p=JVe(a,l,c);i[s]=p in o?o[p]:o[p]=(0,Sv.nearestColorIndex)(t,[a,l,c])}}return i}var Sv,YVe,QVe,qT,ZVe,jT,zxe=x(()=>{"use strict";d();yi();Q();H();Is();$();B();Sv=Ml(T5()),YVe=20,QVe=128,qT=10,ZVe=sd(()=>Promise.all(Array.from({length:qT},(e,t)=>Hxe(`https://raw.githubusercontent.com/VenPlugs/petpet/main/frames/pet${t}.gif`))));jn("PetPet","petpet");jT=k({name:"PetPet",description:"Adds a /petpet slash command to create headpet gifs from any image",authors:[w.Ven,w.u32],commands:[{inputType:0,name:"petpet",description:"Create a petpet gif. You can only specify one of the image options",options:[{name:"delay",description:"The delay between each frame in ms. Rounded to nearest 10ms. Defaults to the minimum value of 20.",type:4},{name:"resolution",description:"Resolution for the gif. Defaults to 120. If you enter an insane number and it freezes Discord that's your fault.",type:4},{name:"image",description:"Image attachment to use",type:11},{name:"url",description:"URL to fetch image from",type:3},{name:"user",description:"User whose avatar to use as image",type:6},{name:"no-server-pfp",description:"Use the normal avatar instead of the server specific one when using the 'user' option",type:5}],execute:async(e,t)=>{let o=await ZVe(),n=Pt(e,"no-server-pfp",!1);try{var i=await XVe(e,t,n);if(!i)throw"No Image specified!"}catch(E){_l.clearAll(t.channel.id,sn.SlashCommand),Vt(t.channel.id,{content:String(E)});return}let s=await Hxe(i),a=Pt(e,"delay",YVe);if(a<20)return Vt(t.channel.id,{content:"Delay must be at least 20."});let l=Pt(e,"resolution",QVe),c=(0,Sv.GIFEncoder)(),u=Math.min(120,l),p=document.createElement("canvas");p.width=l,p.height=Math.max(l,2*u);let m=p.getContext("2d",{willReadFrequently:!0});_l.clearAll(t.channel.id,sn.SlashCommand),m.drawImage(s,0,u,.8*u,.8*u),m.drawImage(o[0],0,0,u,u);let{data:g}=m.getImageData(0,0,u,2*u),y=(0,Sv.quantize)(g,255),b=new Array(2**16);for(let E=0;E<qT;E++){m.clearRect(0,0,p.width,p.height);let A=E<qT/2?E:qT-E,C=.8+A*.02,I=.8-A*.05,N=(1-C)*.5+.1,_=1-I-.08;m.drawImage(s,N*l,_*l,C*l,I*l),m.drawImage(o[E],0,0,l,l);let{data:O}=m.getImageData(0,0,l,l),F=VVe(O,y,b,1);c.writeFrame(F,l,l,{transparent:!0,transparentIndex:255,delay:a,palette:E===0?y:void 0})}c.finish();let v=new File([c.bytesView()],"petpet.gif",{type:"image/gif"});setTimeout(()=>ls.promptToUpload([v],t.channel,sn.ChannelMessage),10)}}]})});var Gxe=x(()=>{});var qxe,WT,jxe=x(()=>{"use strict";d();Gxe();Q();tt();H();$();B();qxe=R({loop:{description:"Whether to make the PiP video loop or not",type:3,default:!0,restartNeeded:!1}}),WT=k({name:"PictureInPicture",description:"Adds picture in picture to videos (next to the Download button)",authors:[w.Lumap],settings:qxe,patches:[{find:'["VIDEO","CLIP","AUDIO"]',replacement:{match:/(\[\i>0&&\i\.length>0.{0,150}?children:)(\i.slice\(\i\))(?<=showDownload:(\i).+?isVisualMediaType:(\i).+?)/,replace:(e,t,o,n,i)=>`${t}[${n}&&${i}&&$self.PictureInPictureButton(),...${o}]`}}],PictureInPictureButton:ee.wrap(()=>r(Ue,{text:"Toggle Picture in Picture"},e=>r("div",{...e,className:"vc-pip-button",role:"button",style:{cursor:"pointer",paddingTop:"4px",paddingLeft:"4px",paddingRight:"4px"},onClick:t=>{let o=t.currentTarget.parentNode.parentNode.querySelector("video"),n=document.body.appendChild(o.cloneNode(!0));n.loop=qxe.store.loop,n.style.display="none",n.onleavepictureinpicture=()=>n.remove();function i(){n.currentTime=o.currentTime,n.requestPictureInPicture(),o.pause(),n.play()}n.readyState===4?i():n.onloadedmetadata=i}},r("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24"},r("path",{fill:"currentColor",d:"M21 3a1 1 0 0 1 1 1v7h-2V5H4v14h6v2H3a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h18zm0 10a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1h-8a1 1 0 0 1-1-1v-6a1 1 0 0 1 1-1h8zm-1 2h-6v4h6v-4z"})))),{noop:!0})})});var Wxe=x(()=>{});async function wW(){let e=z.getCurrentUser()?.id;e!=null&&(Li=Ua.store.userBasedCategoryList[e]??=[],Kxe?.())}function Yxe(){Kxe=Vo(),Ua.use(["pinOrder","canCollapseDmSection","dmSectionCollapsed","userBasedCategoryList"])}function Qxe(e){return Li.find(t=>t.id===e)}function q5(e){return Li[e]}function Zxe(e){Li.push(e)}function Xxe(e,t){let o=Li.find(n=>n.id===t);o!=null&&(o.channels.includes(e)||o.channels.push(e))}function Jxe(e){let t=Li.find(o=>o.channels.includes(e));t!=null&&(t.channels=t.channels.filter(o=>o!==e))}function Vxe(e){let t=Li.findIndex(o=>o.id===e);t!==-1&&Li.splice(t,1)}function eye(e,t=!0){let o=Li.find(n=>n.id===e);o!=null&&(o.collapsed=t)}function j5(e){return Li.some(t=>t.channels.includes(e))}function KT(){return Li.length}function tye(){if(Ua.store.pinOrder===0){let e=CW.getPrivateChannelIds();return Li.filter(t=>!t.collapsed).flatMap(t=>e.filter(o=>t.channels.includes(o)))}return Li.filter(e=>!e.collapsed).flatMap(e=>e.channels)}function oye(){return Li.reduce((e,t)=>(e.push(t.channels.length===0?1:t.channels.length),e),[])}function iye(e,t,o){!e[t]||!e[o]||([e[t],e[o]]=[e[o],e[t]])}function EW(e,t){let o=Li.findIndex(i=>i.id===e),n=o+t;iye(Li,o,n)}function AW(e,t){let o=Li.find(s=>s.channels.includes(e));if(o==null)return;let n=o.channels.indexOf(e),i=n+t;iye(o.channels,n,i)}var Kxe,Li,nye,G5,rye,kW,YT=x(()=>{"use strict";d();QT();qo();B();Li=[];nye=(e,t,o)=>{let n=e[t],i=e[t+o];return n&&i},G5=(e,t)=>{let o=Li.findIndex(n=>n.id===e);return nye(Li,o,t)},rye=e=>G5(e,-1)||G5(e,1),kW=(e,t)=>{let o=Li.find(i=>i.channels.includes(e));if(o==null)return!1;let n=o.channels.indexOf(e);return nye(o.channels,n,t)}});var sye,TW=x(()=>{"use strict";d();sye=[1752220,3066993,3447003,10181046,15277667,15844367,15105570,15158332,9807270,6323595,1146986,2067276,2123412,7419530,11342935,12745742,11027200,10038562,9936031,5533306]});function net(e,t){return rt(()=>{if(e)return Qxe(e);if(t)return{id:D.genId(),name:`Pin Category ${KT()+1}`,color:10070709,collapsed:!1,channels:[t]}},[e,t])}function ret({categoryId:e,modalProps:t,initialChannelId:o}){let n=net(e,o);if(!n)return null;let[i,s]=L(n.name),[a,l]=L(n.color),c=u=>{u.preventDefault(),n.name=i,n.color=a,e||Zxe(n),t.onClose()};return r(Pe,{...t},r(je,null,r(Y,{size:"lg",weight:"semibold",style:{flexGrow:1}},e?"Edit":"New"," Category")),r("form",{onSubmit:c},r($e,{className:oet("content")},r("section",null,r(re,null,"Name"),r(qe,{value:i,onChange:u=>s(u)})),r(Bt,null),r("section",null,r(re,null,"Color"),r(tet,{key:n.id,defaultColor:10070709,colors:sye,onChange:u=>l(u),value:a,renderDefaultButton:()=>null,renderCustomButton:()=>r(si,{color:a,onChange:u=>l(u),key:n.id,showEyeDropper:!1})}))),r(ht,null,r(U,{type:"submit",onClick:c,disabled:!i},e?"Save":"Create"))))}var tet,IW,oet,ZT,DW=x(()=>{"use strict";d();Et();Ar();ut();TW();YT();nt();at();fe();B();tet=De('id:"color-picker"'),IW=Ds(['type:"USER_SETTINGS_MODAL_OPEN"']),oet=de("vc-pindms-modal-");ZT=(e,t)=>Om(async()=>(await IW(),o=>r(ret,{categoryId:e,modalProps:o,initialChannelId:t})))});function lye(e){let t=j5(e);return r(M.MenuItem,{id:"pin-dm",label:"Pin DMs"},!t&&r(f,null,r(M.MenuItem,{id:"vc-add-category",label:"Add Category",color:"brand",action:()=>ZT(null,e)}),r(M.MenuSeparator,null),Li.map(o=>r(M.MenuItem,{key:o.id,id:`pin-category-${o.id}`,label:o.name,action:()=>Xxe(e,o.id)}))),t&&r(f,null,r(M.MenuItem,{id:"unpin-dm",label:"Unpin DM",color:"danger",action:()=>Jxe(e)}),Ua.store.pinOrder===1&&kW(e,-1)&&r(M.MenuItem,{id:"move-up",label:"Move Up",action:()=>AW(e,-1)}),Ua.store.pinOrder===1&&kW(e,1)&&r(M.MenuItem,{id:"move-down",label:"Move Down",action:()=>AW(e,1)})))}var iet,set,cye,uye=x(()=>{"use strict";d();Un();QT();YT();B();DW();iet=(e,t)=>{Qt("leave-channel",e)?.unshift(lye(t.channel.id))},set=(e,t)=>{let o=Qt("close-dm",e);if(o){let n=o.findIndex(i=>i?.props?.id==="close-dm");o.splice(n,0,lye(t.channel.id))}},cye={"gdm-context":iet,"user-context":set}});var dye,CW,cet,Ua,XT,QT=x(()=>{"use strict";d();Wxe();Q();tt();H();xt();$();fe();B();uye();DW();TW();YT();dye=et("privateChannelsHeaderContainer","headerText"),CW=Ft("PrivateChannelSortStore"),Ua=R({pinOrder:{type:4,description:"Which order should pinned DMs be displayed in?",options:[{label:"Most recent message",value:0,default:!0},{label:"Custom (right click channels to reorder)",value:1}]},canCollapseDmSection:{type:3,description:"Allow uncategorised DMs section to be collapsable",default:!1},dmSectionCollapsed:{type:3,description:"Collapse DM section",default:!1,hidden:!0},userBasedCategoryList:{type:7,default:{},description:""}}),XT=k({name:"PinDMs",description:"Allows you to pin private channels to the top of your DM list. To pin/unpin or re-order pins, right click DMs",authors:[w.Ven,w.Aria],settings:Ua,contextMenus:cye,patches:[{find:'"dm-quick-launcher"===',replacement:[{match:/(?<=channels:\i,)privateChannelIds:(\i)(?=,listRef:)/,replace:"privateChannelIds:$1.filter(c=>!$self.isPinned(c))"},{match:/(?<=renderRow:this\.renderRow,)sections:\[.+?1\)]/,replace:"...$self.makeProps(this,{$&})"},{match:/renderRow(?:",|=)(\i)=>{(?<=renderDM(?:",|=).+?(\i\.\i),\{channel:.+?)/,replace:"$&if($self.isChannelIndex($1.section, $1.row))return $self.renderChannel($1.section,$1.row,$2)();"},{match:/renderSection(?:",|=)(\i)=>{/,replace:"$&if($self.isCategoryIndex($1.section))return $self.renderCategory($1);"},{match:/renderSection(?:",|=).{0,300}?"span",{/,replace:"$&...$self.makeSpanProps(),"},{match:/(\.startsWith\("section-divider"\).+?return 1===)(\i)/,replace:"$1($2-$self.categoryLen())"},{match:/getRowHeight(?:",|=)\((\i),(\i)\)=>{/,replace:"$&if($self.isChannelHidden($1,$2))return 0;"},{match:/(?<=scrollTo\(\{to:\i\}\):\(\i\+=)(\d+)\*\(.+?(?=,)/,replace:"$self.getScrollOffset(arguments[0],$1,this.props.padding,this.state.preRenderedChildren,$&)"},{match:/(scrollToChannel\(\i\){.{1,300})(this\.props\.privateChannelIds)/,replace:"$1[...$2,...$self.getAllUncollapsedChannels()]"}]},{find:'.FRIENDS},"friends"',replacement:{match:/let{showLibrary:\i,/,replace:"$self.usePinnedDms();$&"}},{find:".APPLICATION_STORE&&",replacement:{match:/(?<=\i=__OVERLAY__\?\i:\[\.\.\.\i\(\),\.\.\.)\i/,replace:"$self.getAllUncollapsedChannels().concat($&.filter(c=>!$self.isPinned(c)))"}},{find:"=()=>!1,ensureChatIsVisible:",replacement:{match:/(?<=\i===\i\.ME\?)\i\.\i\.getPrivateChannelIds\(\)/,replace:"$self.getAllUncollapsedChannels().concat($&.filter(c=>!$self.isPinned(c)))"}}],sections:null,set _instance(e){this.instance=e,cet=e},startAt:"WebpackReady",start:wW,flux:{CONNECTION_OPEN:wW},usePinnedDms:Yxe,isPinned:j5,categoryLen:KT,getSections:oye,getAllUncollapsedChannels:tye,requireSettingsMenu:IW,makeProps(e,{sections:t}){return this._instance=e,this.sections=t,this.sections.splice(1,0,...this.getSections()),this.instance?.props?.privateChannelIds?.length===0&&(this.sections[this.sections.length-1]=0),{sections:this.sections,chunkSize:this.getChunkSize()}},makeSpanProps(){return Ua.store.canCollapseDmSection?{onClick:()=>this.collapseDMList(),role:"button",style:{cursor:"pointer"}}:void 0},getChunkSize(){let e=this.getSections();return(e.length*40+e.reduce((o,n)=>o+=n+44,0)+256)*1.5},isCategoryIndex(e){return this.sections&&e>0&&e<this.sections.length-1},isChannelIndex(e,t){if(Ua.store.canCollapseDmSection&&Ua.store.dmSectionCollapsed&&e!==0)return!0;let o=q5(e-1);return this.isCategoryIndex(e)&&(o?.channels?.length===0||o?.channels[t])},collapseDMList(){Ua.store.dmSectionCollapsed=!Ua.store.dmSectionCollapsed},isChannelHidden(e,t){if(e===0)return!1;if(Ua.store.canCollapseDmSection&&Ua.store.dmSectionCollapsed&&this.getSections().length+1===e)return!0;if(!this.instance||!this.isChannelIndex(e,t))return!1;let o=q5(e-1);return o?o.collapsed&&this.instance.props.selectedChannelId!==this.getCategoryChannels(o)[t]:!1},getScrollOffset(e,t,o,n,i){return j5(e)?t*(this.getAllUncollapsedChannels().indexOf(e)+n)+o:(t+o)*2+t*this.getAllUncollapsedChannels().length+i},renderCategory:ee.wrap(({section:e})=>{let t=q5(e-1);return t?r(en,{onClick:()=>eye(t.id,!t.collapsed),onContextMenu:o=>{Dt.openContextMenu(o,()=>r(M.Menu,{navId:"vc-pindms-header-menu",onClose:()=>V.dispatch({type:"CONTEXT_MENU_CLOSE"}),color:"danger","aria-label":"Pin DMs Category Menu"},r(M.MenuItem,{id:"vc-pindms-edit-category",label:"Edit Category",action:()=>ZT(t.id,null)}),rye(t.id)&&r(f,null,G5(t.id,-1)&&r(M.MenuItem,{id:"vc-pindms-move-category-up",label:"Move Up",action:()=>EW(t.id,-1)}),G5(t.id,1)&&r(M.MenuItem,{id:"vc-pindms-move-category-down",label:"Move Down",action:()=>EW(t.id,1)})),r(M.MenuSeparator,null),r(M.MenuItem,{id:"vc-pindms-delete-category",color:"danger",label:"Delete Category",action:()=>Vxe(t.id)})))}},r("h2",{className:me(dye.privateChannelsHeaderContainer,"vc-pindms-section-container",t.collapsed?"vc-pindms-collapsed":""),style:{color:`#${t.color.toString(16).padStart(6,"0")}`}},r("span",{className:dye.headerText},t?.name??"uh oh"),r("svg",{className:"vc-pindms-collapse-icon","aria-hidden":"true",role:"img",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24"},r("path",{fill:"currentColor",d:"M9.3 5.3a1 1 0 0 0 0 1.4l5.29 5.3-5.3 5.3a1 1 0 1 0 1.42 1.4l6-6a1 1 0 0 0 0-1.4l-6-6a1 1 0 0 0-1.42 0Z"})))):null},{noop:!0}),renderChannel(e,t,o){return ee.wrap(()=>{let{channel:n,category:i}=this.getChannel(e,t,this.instance.props.channels);return!n||!i||this.isChannelHidden(e,t)?null:r(o,{channel:n,selected:this.instance.props.selectedChannelId===n.id},n.id)},{noop:!0})},getChannel(e,t,o){let n=q5(e-1);if(!n)return{channel:null,category:null};let i=this.getCategoryChannels(n)[t];return{channel:o[i],category:n}},getCategoryChannels(e){return e.channels.length===0?[]:Ua.store.pinOrder===0?CW.getPrivateChannelIds().filter(t=>e.channels.includes(t)):e?.channels??[]}})});var pye=x(()=>{});var JT,mye=x(()=>{"use strict";d();pye();H();$();JT=k({name:"PlainFolderIcon",description:"Dont show the small guild icons in folders",authors:[w.botato],patches:[{find:"#{intl::GUILD_FOLDER_TOOLTIP_A11Y_LABEL}",replacement:[{match:/\.slice\(0,4\).+?\]:(\i),\[\i\.\i\]:!\1/,replace:(e,t)=>`${e},"vc-plainFolderIcon-plain":!${t}`}]}]})});var fye=x(()=>{});function wv(e,t){return({color:o,tooltip:n,small:i})=>r(Ue,{text:n},s=>r("svg",{...s,height:(t?.height??20)-(i?3:0),width:(t?.width??20)-(i?3:0),viewBox:t?.viewBox??"0 0 24 24",fill:o},r("path",{d:e})))}function pet(e){if(e.id!==Ns.getId())return;let t=Je([gye],()=>gye.getSessions());if(typeof t!="object")return null;let o=Object.values(t).sort(({status:s},{status:a})=>s===a?0:s==="online"?1:a==="online"?-1:s==="idle"?1:a==="idle"?-1:0),n=Object.values(o).reduce((s,a)=>(a.clientInfo.client!=="unknown"&&(s[a.clientInfo.client]=a.status),s),{}),{clientStatuses:i}=cr.getState();i[z.getCurrentUser().id]=n}var gye,uet,kv,det,MW,hg,VT,hye=x(()=>{"use strict";d();fye();Q();H();xt();$();fe();B();gye=Ft("SessionsStore"),{useStatusFillColor:uet}=qn([".5625*","translate"],{useStatusFillColor:ot.byCode(".hex")});kv={desktop:wv("M4 2.5c-1.103 0-2 .897-2 2v11c0 1.104.897 2 2 2h7v2H7v2h10v-2h-4v-2h7c1.103 0 2-.896 2-2v-11c0-1.103-.897-2-2-2H4Zm16 2v9H4v-9h16Z"),web:wv("M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2Zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93Zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39Z"),mobile:wv("M 187 0 L 813 0 C 916.277 0 1000 83.723 1000 187 L 1000 1313 C 1000 1416.277 916.277 1500 813 1500 L 187 1500 C 83.723 1500 0 1416.277 0 1313 L 0 187 C 0 83.723 83.723 0 187 0 Z M 125 1000 L 875 1000 L 875 250 L 125 250 Z M 500 1125 C 430.964 1125 375 1180.964 375 1250 C 375 1319.036 430.964 1375 500 1375 C 569.036 1375 625 1319.036 625 1250 C 625 1180.964 569.036 1125 500 1125 Z",{viewBox:"0 0 1000 1500",height:17,width:17}),embedded:wv("M3.06 20.4q-1.53 0-2.37-1.065T.06 16.74l1.26-9q.27-1.8 1.605-2.97T6.06 3.6h11.88q1.8 0 3.135 1.17t1.605 2.97l1.26 9q.21 1.53-.63 2.595T20.94 20.4q-.63 0-1.17-.225T18.78 19.5l-2.7-2.7H7.92l-2.7 2.7q-.45.45-.99.675t-1.17.225Zm14.94-7.2q.51 0 .855-.345T19.2 12q0-.51-.345-.855T18 10.8q-.51 0-.855.345T16.8 12q0 .51.345 .855T18 13.2Zm-2.4-3.6q.51 0 .855-.345T16.8 8.4q0-.51-.345-.855T15.6 7.2q-.51 0-.855.345T14.4 8.4q0 .51.345 .855T15.6 9.6ZM6.9 13.2h1.8v-2.1h2.1v-1.8h-2.1v-2.1h-1.8v2.1h-2.1v1.8h2.1v2.1Z",{viewBox:"0 0 24 24",height:20,width:20}),suncord:wv("M7 4a6 6 0 00-6 6v4a6 6 0 006 6h10a6 6 0 006-6v-4a6 6 0 00-6-6H7zm0 11a1 1 0 01-1-1v-1H5a1 1 0 010-2h1v-1a1 1 0 012 0v1h1a1 1 0 010 2H8v1a1 1 0 01-1 1zm10-4a1 1 0 100-2 1 1 0 000 2zm1 3a1 1 0 11-2 0 1 1 0 012 0zm0-2a1 1 0 102 0 1 1 0 00-2 0zm-3 1a1 1 0 110-2 1 1 0 010 2z",{viewBox:"0 0 24 24",height:24,width:24}),vencord:wv("M14.8 2.7 9 3.1V47h3.3c1.7 0 6.2.3 10 .7l6.7.6V2l-4.2.2c-2.4.1-6.9.3-10 .5zm1.8 6.4c1 1.7-1.3 3.6-2.7 2.2C12.7 10.1 13.5 8 15 8c.5 0 1.2.5 1.6 1.1zM16 33c0 6-.4 10-1 10s-1-4-1-10 .4-10 1-10 1 4 1 10zm15-8v23.3l3.8-.7c2-.3 4.7-.6 6-.6H43V3h-2.2c-1.3 0-4-.3-6-.6L31 1.7V25z",{viewBox:"0 0 50 50"})},det=({platform:e,status:t,small:o})=>{let n=e==="embedded"?"Console":e[0].toUpperCase()+e.slice(1),i=kv[e]??kv.desktop,{ConsoleIcon:s}=hg.store;if(e==="embedded")switch(s){case"equicord":i=kv.embedded;break;case"suncord":i=kv.suncord;break;case"vencord":i=kv.vencord;break;default:i=kv.embedded;break}return r(i,{color:uet(t),tooltip:n,small:o})};MW=({user:e,isProfile:t,isMessage:o,isMemberList:n})=>{if(e==null||e.bot&&!Ge.plugins.PlatformIndicators.showBots)return null;pet(e);let i=Je([cr],()=>cr.getClientStatus(e.id));if(!i)return null;let s=Array.from(Object.entries(i),([a,l])=>r(det,{key:a,platform:a,status:l,small:t||n}));return s.length?r("div",{className:me("vc-platform-indicator",t&&"vc-platform-indicator-profile",o&&"vc-platform-indicator-message"),style:{marginLeft:n?"4px":void 0}},s):null};pp("PlatformIndicators","profiles","badges");hg=R({list:{type:3,description:"Show indicators in the member list",default:!0},profiles:{type:3,description:"Show indicators in user profiles",default:!0},messages:{type:3,description:"Show indicators inside messages",default:!0},colorMobileIndicator:{type:3,description:"Whether to make the mobile indicator match the color of the user status.",default:!0,restartNeeded:!0},showBots:{type:3,description:"Whether to show platform indicators on bots",default:!1,restartNeeded:!1},ConsoleIcon:{type:4,description:"What console icon to use",restartNeeded:!0,options:[{label:"Equicord",value:"equicord",default:!0},{label:"Suncord",value:"suncord"},{label:"Vencord",value:"vencord"}]}}),VT=k({name:"PlatformIndicators",description:"Adds platform indicators (Desktop, Mobile, Web...) to users",authors:[w.kemo,w.TheSun,w.Nuckyz,w.Ven],settings:hg,renderNicknameIcon(e){return hg.store.profiles?r(MW,{user:z.getUser(e.userId),isProfile:!0}):null},renderMemberListDecorator(e){return hg.store.list?r(MW,{user:e.user,isMemberList:!0}):null},renderMessageDecoration(e){return hg.store.messages?r(MW,{user:e.message?.author,isMessage:!0}):null},patches:[{find:".Masks.STATUS_ONLINE_MOBILE",predicate:()=>hg.store.colorMobileIndicator,replacement:[{match:/\.STATUS_TYPING;switch(?=.+?(if\(\i\)return \i\.\i\.Masks\.STATUS_ONLINE_MOBILE))/,replace:".STATUS_TYPING;$1;switch"},{match:/switch\(\i\)\{case \i\.\i\.ONLINE:(if\(\i\)return\{[^}]+\})/,replace:"$1;$&"}]},{find:".AVATAR_STATUS_MOBILE_16;",predicate:()=>hg.store.colorMobileIndicator,replacement:[{match:/\i===\i\.\i\.ONLINE&&(?=.{0,70}\.AVATAR_STATUS_MOBILE_16;)/,replace:""},{match:/(?<=\(\i\.status,)(\i)(?=,\{.{0,15}isMobile:(\i))/,replace:'$2?"online":$1'},{match:/(?<=\i&&!\i)&&\i===\i\.\i\.ONLINE/,replace:""}]},{find:"}isMobileOnline(",predicate:()=>hg.store.colorMobileIndicator,replacement:{match:/(?<=\i\[\i\.\i\.MOBILE\])===\i\.\i\.ONLINE/,replace:"!= null"}}]})});var xye,met,fet,yye,get,eI,bye=x(()=>{"use strict";d();ma();yi();H();$();B();xye=e=>g0.getDraft(e,sn.ChannelMessage),met=e=>new Promise(t=>{let o=new Image;o.onload=()=>t({width:o.width,height:o.height}),o.onerror=()=>t(null),o.src=e}),fet=async e=>await Promise.all(up.getUploads(e,sn.ChannelMessage).map(async t=>{let{isImage:o,filename:n,spoiler:i,item:{file:s}}=t,a=URL.createObjectURL(s),l={id:Lh(),filename:i?"SPOILER_"+n:n,content_type:void 0,size:t.getSize(),spoiler:i,url:a+"#",proxy_url:a+"#"};if(o){let c=await met(a);if(!c)return l;l.width=c.width,l.height=c.height}return l})),yye=({height:e=20,width:t=20,className:o})=>r("svg",{fill:"currentColor",fillRule:"evenodd",width:t,height:e,className:o,viewBox:"0 0 24 24",style:{scale:"1.096",translate:"0 -1px"}},r("path",{d:"M22.89 11.7c.07.2.07.4 0 .6C22.27 13.9 19.1 21 12 21c-7.11 0-10.27-7.11-10.89-8.7a.83.83 0 0 1 0-.6C1.73 10.1 4.9 3 12 3c7.11 0 10.27 7.11 10.89 8.7Zm-4.5-3.62A15.11 15.11 0 0 1 20.85 12c-.38.88-1.18 2.47-2.46 3.92C16.87 17.62 14.8 19 12 19c-2.8 0-4.87-1.38-6.39-3.08A15.11 15.11 0 0 1 3.15 12c.38-.88 1.18-2.47 2.46-3.92C7.13 6.38 9.2 5 12 5c2.8 0 4.87 1.38 6.39 3.08ZM15.56 11.77c.2-.1.44.02.44.23a4 4 0 1 1-4-4c.21 0 .33.25.23.44a2.5 2.5 0 0 0 3.32 3.32Z"})),get=({isAnyChat:e,isEmpty:t,type:{attachments:o},channel:{id:n}})=>{let i=Je([g0],()=>xye(n));if(!e)return null;let s=o&&up.getUploads(n,sn.ChannelMessage).length>0;return!(!t&&i?.length>0)&&!s?null:r(Lr,{tooltip:"Preview Message",onClick:async()=>Vt(n,{content:xye(n),author:z.getCurrentUser(),attachments:s?await fet(n):void 0}),buttonProps:{style:{translate:"0 2px"}}},r(yye,null))},eI=k({name:"PreviewMessage",description:"Lets you preview your message before sending it.",authors:[w.Aria],startAt:"Init",chatBarButton:{icon:yye,render:get}})});function vye({height:e=24,width:t=24,className:o="icon"}){return r("svg",{className:o,height:e,width:t,viewBox:"0 0 24 24",fill:"currentColor"},r("path",{d:"M12 2C6.486 2 2 6.486 2 12C2 17.515 6.486 22 12 22C14.039 22 15.993 21.398 17.652 20.259L16.521 18.611C15.195 19.519 13.633 20 12 20C7.589 20 4 16.411 4 12C4 7.589 7.589 4 12 4C16.411 4 20 7.589 20 12V12.782C20 14.17 19.402 15 18.4 15L18.398 15.018C18.338 15.005 18.273 15 18.209 15H18C17.437 15 16.6 14.182 16.6 13.631V12C16.6 9.464 14.537 7.4 12 7.4C9.463 7.4 7.4 9.463 7.4 12C7.4 14.537 9.463 16.6 12 16.6C13.234 16.6 14.35 16.106 15.177 15.313C15.826 16.269 16.93 17 18 17L18.002 16.981C18.064 16.994 18.129 17 18.195 17H18.4C20.552 17 22 15.306 22 12.782V12C22 6.486 17.514 2 12 2ZM12 14.599C10.566 14.599 9.4 13.433 9.4 11.999C9.4 10.565 10.566 9.399 12 9.399C13.434 9.399 14.6 10.565 14.6 11.999C14.6 13.433 13.434 14.599 12 14.599Z"}))}var tI,Sye=x(()=>{"use strict";d();H();mt();$();B();tI=k({name:"QuickMention",authors:[w.kemo],description:"Adds a quick mention button to the message actions bar",messagePopoverButton:{icon:vye,render(e){let t=ne.getChannel(e.channel_id);return t.guild_id&&!Kt.can(Nt.SEND_MESSAGES,t)?null:{label:"Quick Mention",icon:vye,message:e,channel:t,onClick:()=>xu(`<@${e.author.id}> `)}}}})});function het({messageId:e,_isQuickEdit:t}){t||(K5=e)}function xet({message:e,_isQuickReply:t}){t||(W5=e.id)}function wye(e){let t=e.key==="ArrowUp";!t&&e.key!=="ArrowDown"||!yet(e)||bet(e)||(e.preventDefault(),e.shiftKey?ket(t):wet(t))}function kye(e,t){let o=document.getElementById("message-content-"+t);if(!o)return;let n=Math.max(document.documentElement.clientHeight,window.innerHeight),i=o.getBoundingClientRect();(i.bottom<150||i.top-n>=-150)&&Fn.jumpToMessage({channelId:e,messageId:t,flash:!1,jumpType:"INSTANT"})}function Eye(e,t){let o=Rt.getMessages(st.getChannelId())._array,n=z.getCurrentUser().id,i=yt(iy.name);o=o.filter(a=>!(a.deleted||!t&&a.author.id!==n||!xw.REPLYABLE.has(a.type)||a.hasFlag(64)||NW.store.ignoreBlockedAndIgnored&&Tt.isBlockedOrIgnored(a.author.id)||i&&iy.isSuppressed(a)));let s=a=>{if(a===null)return o[o.length-1];let l=o.findIndex(u=>u.id===a);if(l===-1)return o[o.length-1];let c=e?l-1:l+1;return o[c]??null};if(t){let a=s(W5);return W5=a?.id??null,a}else{let a=s(K5);return K5=a?.id??null,a}}function vet(e){switch(NW.store.shouldMention){case 2:return yt(Ou.name)?Ou.shouldMention(e,!1):!0;case 0:return!1;default:return!0}}function wet(e){let t=ne.getChannel(st.getChannelId());if(t.guild_id&&!Kt.can(Nt.SEND_MESSAGES,t))return;let o=Eye(e,!0);if(!o)return void V.dispatch({type:"DELETE_PENDING_REPLY",channelId:st.getChannelId()});let n=ne.getChannel(o.channel_id),i=z.getCurrentUser().id;V.dispatch({type:"CREATE_PENDING_REPLY",channel:n,message:o,shouldMention:vet(o),showMentionToggle:!n.isPrivate()&&o.author.id!==i,_isQuickReply:!0}),Bs.dispatchToLastSubscribed("TEXTAREA_FOCUS"),kye(n.id,o.id)}function ket(e){let t=ne.getChannel(st.getChannelId());if(t.guild_id&&!Kt.can(Nt.SEND_MESSAGES,t))return;let o=Eye(e,!1);if(!o)return V.dispatch({type:"MESSAGE_END_EDIT",channelId:st.getChannelId()});V.dispatch({type:"MESSAGE_START_EDIT",channelId:o.channel_id,messageId:o.id,content:o.content,_isQuickEdit:!0}),kye(o.channel_id,o.id)}var W5,K5,NW,oI,yet,bet,Aye=x(()=>{"use strict";d();Wo();Q();pW();nT();H();$();hr();B();W5=null,K5=null,NW=R({shouldMention:{type:4,description:"Ping reply by default",options:[{label:"Follow NoReplyMention plugin (if enabled)",value:2,default:!0},{label:"Enabled",value:1},{label:"Disabled",value:0}]},ignoreBlockedAndIgnored:{type:3,description:"Ignore messages by blocked/ignored users when navigating",default:!0}}),oI=k({name:"QuickReply",authors:[w.fawn,w.Ven,w.pylix],description:"Reply to (ctrl + up/down) and edit (ctrl + shift + up/down) messages via keybinds",settings:NW,start(){document.addEventListener("keydown",wye)},stop(){document.removeEventListener("keydown",wye)},flux:{DELETE_PENDING_REPLY(){W5=null},MESSAGE_END_EDIT(){K5=null},CHANNEL_SELECT(){W5=null,K5=null},MESSAGE_START_EDIT:het,CREATE_PENDING_REPLY:xet}});yet=e=>ri?e.metaKey:e.ctrlKey,bet=e=>e.altKey||!ri&&e.metaKey});var BW,nI,Cye=x(()=>{"use strict";d();H();$();B();nI=k({name:"ReactErrorDecoder",description:'Replaces "Minifed React Error" with the actual error.',authors:[w.Cyn,w.maisymoe],patches:[{find:"React has blocked a javascript: URL as a security precaution.",replacement:{match:/"https:\/\/react.dev\/errors\/"\+\i;/,replace:"$&const vcDecodedError=$self.decodeError(...arguments);if(vcDecodedError)return vcDecodedError;"}}],async start(){let e=`https://raw.githubusercontent.com/facebook/react/v${X.version}/scripts/error-codes/codes.json`;BW=await fetch(e).then(t=>t.json()).catch(t=>console.error(`[ReactErrorDecoder] Failed to fetch React error codes
`,t))},stop(){BW=void 0},decodeError(e,...t){let o=0;return BW?.[e]?.replace(/%s/g,()=>{let n=t[o];return o++,n})}})});var Tye=x(()=>{});function Eet(){let e=[];Object.values(ct.getGuilds()).forEach(t=>{rl.getChannels(t.id).SELECTABLE.concat(rl.getChannels(t.id).VOCAL).concat(Object.values(dw.getActiveJoinedThreadsForGuild(t.id)).flatMap(o=>Object.values(o))).forEach(o=>{ss.hasUnread(o.channel.id)&&e.push({channelId:o.channel.id,messageId:ss.lastMessageId(o.channel.id),readStateType:0})})}),V.dispatch({type:"BULK_ACK",context:"APP",channels:e})}var Aet,rI,Iye=x(()=>{"use strict";d();Tye();B0();Co();tt();H();$();B();Aet=()=>r(Ia,{variant:"secondary",onClick:Eet,className:"vc-ranb-button"},"Read All"),rI=k({name:"ReadAllNotificationsButton",description:"Read all server notifications with a single button click!",authors:[w.kemo,j.KrystalSkull],dependencies:["ServerListAPI"],renderReadAllButton:ee.wrap(Aet,{noop:!0}),start(){kc(0,this.renderReadAllButton)},stop(){Ec(0,this.renderReadAllButton)}})});var tc,iI=x(()=>{"use strict";d();Q();$();tc=R({notices:{type:3,description:"Also show a notice at the top of your screen when removed (use this if you don't want to miss any notifications).",default:!1},offlineRemovals:{type:3,description:"Notify you when starting discord if you were removed while offline.",default:!0},friends:{type:3,description:"Notify when a friend removes you",default:!0},friendRequestCancels:{type:3,description:"Notify when a friend request is cancelled",default:!0},servers:{type:3,description:"Notify when removed from a server",default:!0},groups:{type:3,description:"Notify when removed from a group chat",default:!0}})});async function Cet(){xL(["relationship-notifier-guilds","relationship-notifier-groups","relationship-notifier-friends"])}async function _W(){if(await Cet(),z.getCurrentUser()==null)return;let[e,t,o]=await hL([Mye(),Nye(),Bye()]);if(await Promise.all([sI(),aI(),Y5()]),tc.store.offlineRemovals){if(tc.store.groups&&t?.size)for(let[n,i]of t)Av.has(n)||yf(`You are no longer in the group ${i.name}.`,i.iconURL);if(tc.store.servers&&e?.size)for(let[n,i]of e)!Ev.has(n)&&!PW.isUnavailable(n)&&yf(`You are no longer in the server ${i.name}.`,i.iconURL);if(tc.store.friends&&o?.friends.length)for(let n of o.friends){if(ly.friends.includes(n))continue;let i=await as.getUser(n).catch(()=>{});i&&yf(`You are no longer friends with ${yu(i)}.`,i.getAvatarURL(void 0,void 0,!1),()=>or(i.id))}if(tc.store.friendRequestCancels&&o?.requests?.length)for(let n of o.requests){if(ly.requests.includes(n)||[1,2,4].includes(Tt.getRelationshipType(n)))continue;let i=await as.getUser(n).catch(()=>{});i&&yf(`Friend request from ${yu(i)} has been revoked.`,i.getAvatarURL(void 0,void 0,!1),()=>or(i.id))}}}function yf(e,t,o){tc.store.notices&&ku(e,"OK",()=>C0()),qt({title:"Relationship Notifier",body:e,icon:t,onClick:o})}function Pye(e){return Ev.get(e)}function RW(e){Ev.delete(e),sI()}async function sI(){Ev.clear();let e=z.getCurrentUser().id;for(let[t,{name:o,icon:n}]of Object.entries(ct.getGuilds()))Lt.isMember(t,e)&&Ev.set(t,{id:t,name:o,iconURL:n&&`https://cdn.discordapp.com/icons/${t}/${n}.png`});await Gt(Mye(),Ev)}function _ye(e){return Av.get(e)}function LW(e){Av.delete(e),aI()}async function aI(){Av.clear();for(let{type:e,id:t,name:o,rawRecipients:n,icon:i}of ne.getSortedPrivateChannels())e===3&&Av.set(t,{id:t,name:o||n.map(s=>s.username).join(", "),iconURL:i&&`https://cdn.discordapp.com/channel-icons/${t}/${i}.png`});await Gt(Nye(),Av)}async function Y5(){ly.friends=[],ly.requests=[];let e=Tt.getMutableRelationships();for(let[t,o]of e)switch(o){case 1:ly.friends.push(t);break;case 3:ly.requests.push(t);break}await Gt(Bye(),ly)}var PW,Ev,Av,ly,Mye,Nye,Bye,OW=x(()=>{"use strict";d();vn();T0();_a();mt();hr();fe();B();iI();PW=Ft("GuildAvailabilityStore"),Ev=new Map,Av=new Map,ly={friends:[],requests:[]},Mye=()=>`relationship-notifier-guilds-${z.getCurrentUser().id}`,Nye=()=>`relationship-notifier-groups-${z.getCurrentUser().id}`,Bye=()=>`relationship-notifier-friends-${z.getCurrentUser().id}`});async function Fye({relationship:{type:e,id:t}}){if(FW===t){FW=void 0;return}let o=await as.getUser(t).catch(()=>null);if(o)switch(e){case 1:tc.store.friends&&yf(`${yu(o)} removed you as a friend.`,o.getAvatarURL(void 0,void 0,!1),()=>or(o.id));break;case 3:tc.store.friendRequestCancels&&yf(`A friend request from ${yu(o)} has been removed.`,o.getAvatarURL(void 0,void 0,!1),()=>or(o.id));break}}function Uye({guild:{id:e,unavailable:t}}){if(!tc.store.servers||t||PW.isUnavailable(e))return;if(UW===e){RW(e),UW=void 0;return}let o=Pye(e);o&&(RW(e),yf(`You were removed from the server ${o.name}.`,o.iconURL))}function $ye({channel:{id:e,type:t}}){if(!tc.store.groups||t!==3)return;if($W===e){LW(e),$W=void 0;return}let o=_ye(e);o&&(LW(e),yf(`You were removed from the group ${o.name}.`,o.iconURL))}var FW,UW,$W,Rye,Lye,Oye,Hye=x(()=>{"use strict";d();mt();hr();B();iI();OW();Rye=e=>FW=e,Lye=e=>UW=e,Oye=e=>$W=e});var lI,zye=x(()=>{"use strict";d();H();$();Hye();iI();OW();lI=k({name:"RelationshipNotifier",description:"Notifies you when a friend, group chat, or server removes you.",authors:[w.nick],settings:tc,patches:[{find:"removeRelationship:(",replacement:{match:/(removeRelationship:\((\i),\i,\i\)=>)/,replace:"$1($self.removeFriend($2),0)||"}},{find:"async leaveGuild(",replacement:{match:/(leaveGuild\((\i)\){)/,replace:"$1$self.removeGuild($2);"}},{find:"},closePrivateChannel(",replacement:{match:/(closePrivateChannel\((\i)\){)/,replace:"$1$self.removeGroup($2);"}}],flux:{GUILD_CREATE:sI,GUILD_DELETE:Uye,CHANNEL_CREATE:aI,CHANNEL_DELETE:$ye,RELATIONSHIP_ADD:Y5,RELATIONSHIP_UPDATE:Y5,RELATIONSHIP_REMOVE(e){Fye(e),Y5()},CONNECTION_OPEN:_W},async start(){setTimeout(()=>{_W()},5e3)},removeFriend:Rye,removeGroup:Oye,removeGuild:Lye})});function Gye(e,t){open(t+encodeURIComponent(e.trim()),"_blank")}function Tet(e){let{customEngineName:t,customEngineURL:o,replacementEngine:n}=jye.store,i=!!(t&&o),s=n!=="off"&&!(n==="custom"&&!i),a={...qye};if(i&&(a[t]=o),s){let l=n==="custom"&&i?t:n;return r(M.MenuItem,{label:`Search with ${l}`,key:"search-custom-engine",id:"vc-search-custom-engine",action:()=>Gye(e,a[l])})}return r(M.MenuItem,{label:"Search Text",key:"search-text",id:"vc-search-text"},Object.keys(a).map(l=>{let c="vc-search-content-"+l;return r(M.MenuItem,{key:c,id:c,label:r(Be,{gap:"0.5em",alignItems:"center"},r("img",{style:{borderRadius:"50%"},"aria-hidden":"true",height:16,width:16,src:`https://icons.duckduckgo.com/ip3/${new URL(a[l]).hostname}.ico`}),l),action:()=>Gye(e,a[l])})}))}var qye,jye,Iet,cI,Wye=x(()=>{"use strict";d();Un();Q();eo();H();$();B();qye={Google:"https://www.google.com/search?q=",DuckDuckGo:"https://duckduckgo.com/?q=",Brave:"https://search.brave.com/search?q=",Bing:"https://www.bing.com/search?q=",Yahoo:"https://search.yahoo.com/search?p=",Yandex:"https://yandex.com/search/?text=",GitHub:"https://github.com/search?q=",Reddit:"https://www.reddit.com/search?q=",Wikipedia:"https://wikipedia.org/w/index.php?search=",Startpage:"https://www.startpage.com/sp/search?query="},jye=R({customEngineName:{description:"Name of the custom search engine",type:0,placeholder:"Google"},customEngineURL:{description:"The URL of your Engine",type:0,placeholder:"https://google.com/search?q="},replacementEngine:{description:"Replace with a specific search engine instead of adding a menu",type:4,options:[{label:"Off",value:"off",default:!0},{label:"Custom Engine",value:"custom"},...Object.keys(qye).map(e=>({label:e,value:e}))]}});Iet=(e,t)=>{let o=document.getSelection()?.toString();if(!o)return;let n=Qt("search-google",e);if(n){let i=n.findIndex(s=>s?.props?.id==="search-google");i!==-1&&(n[i]=Tet(o))}};jn("ReplaceGoogleSearch","Search");cI=k({name:"ReplaceGoogleSearch",description:"Replaces the Google search with different Engine(s)",authors:[w.Moxxie,w.Ethan],settings:jye,contextMenus:{message:Iet}})});var Kye=x(()=>{});function Yye(e){return r("i",{className:Det.separator,"aria-hidden":!0,...e})}function Met({referencedMessage:e,baseMessage:t}){if(e.state!==0)return null;let o=e.message.timestamp,n=t.timestamp;return r(Di,{className:"vc-reply-timestamp",compact:S0.isSameDay(o,n),timestamp:o,isInline:!1},r(Yye,null,"["),S0.isSameDay(o,n)?S0.dateFormat(o,"LT"):S0.calendarFormat(o),r(Yye,null,"]"))}var Det,uI,Qye=x(()=>{"use strict";d();Kye();tt();H();$();fe();B();Det=et("separator","latin24CompactTimeStamp");uI=k({name:"ReplyTimestamp",description:"Shows a timestamp on replied-message previews",authors:[w.Kyuuhachi],patches:[{find:"#{intl::REPLY_QUOTE_MESSAGE_NOT_LOADED}",replacement:{match:/\.onClickReply,.+?}\),(?=\i,\i,\i\])/,replace:"$&$self.ReplyTimestamp(arguments[0]),"}}],ReplyTimestamp:ee.wrap(Met,{noop:!0})})});var Net,Bet,dI,Zye=x(()=>{"use strict";d();H();$();fe();Net=et("spoilerContent","hidden"),Bet=et("messagesWrapper","navigationDescription"),dI=k({name:"RevealAllSpoilers",description:"Reveal all spoilers in a message by Ctrl-clicking a spoiler, or in the chat with Ctrl+Shift-click",authors:[w.whqwert],patches:[{find:".removeObscurity,",replacement:{match:/(?<=removeObscurity(?:",|=)(\i)=>{)/,replace:(e,t)=>`$self.reveal(${t});`}}],reveal(e){let{ctrlKey:t,metaKey:o,shiftKey:n,target:i}=e;if(!(ri?o:t))return;let{spoilerContent:s,hidden:a}=Net,{messagesWrapper:l}=Bet,c=n?document.querySelector(`div.${l}`):i.parentElement;for(let u of c.querySelectorAll(`span.${s}.${a}`))u.click()}})});function Xye(e,t){open(t+encodeURIComponent(e),"_blank")}function Jye(e){return r(M.MenuItem,{label:"Search Image",key:"search-image",id:"search-image"},Object.keys(pI).map((t,o)=>{let n="search-image-"+t;return r(M.MenuItem,{key:n,id:n,label:r(Be,{alignItems:"center",gap:"0.5em"},r("img",{style:{borderRadius:"50%"},"aria-hidden":"true",height:16,width:16,src:`https://icons.duckduckgo.com/ip3/${new URL(pI[t]).host}.ico`}),t),action:()=>Xye(e,pI[t])})}),r(M.MenuItem,{key:"search-image-all",id:"search-image-all",label:r(Be,{alignItems:"center",gap:"0.5em"},r(_r,{height:16,width:16}),"All"),action:()=>Object.values(pI).forEach(t=>Xye(e,t))}))}var pI,Pet,_et,mI,Vye=x(()=>{"use strict";d();Un();eo();ao();H();$();B();pI={Google:"https://lens.google.com/uploadbyurl?url=",Yandex:"https://yandex.com/images/search?rpt=imageview&url=",SauceNAO:"https://saucenao.com/search.php?url=",IQDB:"https://iqdb.org/?url=",Bing:"https://www.bing.com/images/search?view=detailv2&iss=sbi&q=imgurl:",TinEye:"https://www.tineye.com/search?url=",ImgOps:"https://imgops.com/start?url="};Pet=(e,t)=>{if(t?.reverseImageSearchType!=="img")return;let o=t.itemHref??t.itemSrc;Qt("copy-link",e)?.push(Jye(o))},_et=(e,t)=>{if(!t?.src)return;(Qt("copy-native-link",e)??e).push(Jye(t.src))},mI=k({name:"ReverseImageSearch",description:"Adds ImageSearch to image context menus",authors:[w.Ven,w.Nuckyz],tags:["ImageUtilities"],patches:[{find:"#{intl::MESSAGE_ACTIONS_MENU_LABEL}),shouldHideMediaOptions:",replacement:{match:/favoriteableType:\i,(?<=(\i)\.getAttribute\("data-type"\).+?)/,replace:(e,t)=>`${e}reverseImageSearchType:${t}.getAttribute("data-role"),`}}],contextMenus:{message:Pet,"image-context":_et}})});var e1e=x(()=>{});async function HW(){wi=await o1e()??{}}async function o1e(){return(await zt(t1e))?.[z.getCurrentUser()?.id]}async function bf(){return(await o1e())?.token}async function Q5(e){return iu(t1e,t=>(t??={},wi=t[z.getCurrentUser().id]??={},e.token&&(wi.token=e.token),e.user&&(wi.user=e.user),t))}function Cv(e){Ee(t=>r(pd,{...t,scopes:["identify"],responseType:"code",redirectUri:"https://manti.vendicated.dev/api/reviewdb/auth",permissions:0n,clientId:"915703782174752809",cancelCompletesFlow:!1,callback:async o=>{try{let n=new URL(o.location);n.searchParams.append("clientMod","vencord");let i=await fetch(n,{headers:{Accept:"application/json"}});if(!i.ok){let{message:a}=await i.json();Re(a||"An error occured while authorizing",D.Type.FAILURE);return}let{token:s}=await i.json();Q5({token:s}),Re("Successfully logged in!",D.Type.SUCCESS),e?.()}catch(n){new ke("ReviewDB").error("Failed to authorize",n)}}}))}var t1e,wi,vf=x(()=>{"use strict";d();vn();At();at();B();t1e="rdb-auth",wi={}});var Tv=x(()=>{"use strict";d()});function n1e(e,t){let o=z.getCurrentUser().id;return o===e||t.sender.discordID===o||wi.user?.type===1}function r1e(e,t){let o=z.getCurrentUser().id;return e===o&&t.sender.discordID!==o}function i1e(e){return e.sender.discordID!==z.getCurrentUser().id}function $a(e,t=D.Type.MESSAGE){D.show({id:D.genId(),message:e,type:t,options:{position:D.Position.BOTTOM}})}var pi,Sf=x(()=>{"use strict";d();nt();B();vf();Tv();pi=de("vc-rdb-")});function Ret(e){return r(Ue,{text:"Unblock user"},t=>r("div",{...t,role:"button",onClick:e.onClick,className:pi("block-modal-unblock")},r("svg",{height:"20",viewBox:"0 -960 960 960",width:"20",fill:"var(--status-danger)"},r("path",{d:"M480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q54 0 104-17.5t92-50.5L228-676q-33 42-50.5 92T160-480q0 134 93 227t227 93Zm252-124q33-42 50.5-92T800-480q0-134-93-227t-227-93q-54 0-104 17.5T284-732l448 448Z"}))))}function Let({user:e,isBusy:t,setIsBusy:o}){let[n,i]=L(!1);return n?null:r("div",{className:pi("block-modal-row")},r("img",{className:pi("block-modal-avatar"),src:e.profilePhoto,alt:""}),r(W,{className:pi("block-modal-username")},e.username),r(Ret,{onClick:t?void 0:async()=>{o(!0);try{await gI(e.discordID),i(!0)}finally{o(!1)}}}))}function Oet(){let[e,t]=L(!1),[o,n,i]=Cr(s1e,{onError:s=>new ke("ReviewDB").error("Failed to fetch blocks",s),fallbackValue:[]});return i?null:n?r(W,null,"Failed to fetch blocks: $",String(n)):o.length?r(f,null,o.map(s=>r(Let,{key:s.discordID,user:s,isBusy:e,setIsBusy:t}))):r(W,null,"No blocked users.")}function fI(){Ee(e=>r(Pe,{...e},r(je,{className:pi("block-modal-header")},r(er.FormTitle,{style:{margin:0}},"Blocked Users"),r(Ut,{onClick:e.onClose})),r($e,{className:pi("block-modal")},wi.token?r(Oet,null):r(W,null,"You are not logged into ReviewDB!"))))}var zW=x(()=>{"use strict";d();wt();vf();Iv();Sf();At();at();qo();B()});var wf,Z5=x(()=>{"use strict";d();Q();Co();mt();$();vf();zW();Sf();wf=R({authorize:{type:6,component:()=>r(Me,{onClick:()=>Cv()},"Authorize with ReviewDB")},notifyReviews:{type:3,description:"Notify about new reviews on startup",default:!0},showWarning:{type:3,description:"Display warning to be respectful at the top of the reviews list",default:!0},hideTimestamps:{type:3,description:"Hide timestamps on reviews",default:!1},hideBlockedUsers:{type:3,description:"Hide reviews from blocked users",default:!0},buttons:{type:6,component:()=>r("div",{className:pi("button-grid")},r(Me,{onClick:fI},"Manage Blocked Users"),r(Me,{variant:"positive",onClick:()=>{VencordNative.native.openExternal("https://github.com/sponsors/mantikafasi")}},"Support ReviewDB development"),r(Me,{variant:"link",onClick:async()=>{let e="https://reviewdb.mantikafasi.dev",t=await bf();t&&(e+="/api/redirect?token="+encodeURIComponent(t)),VencordNative.native.openExternal(e)}},"ReviewDB website"),r(Me,{variant:"link",onClick:()=>Gi("eWPBSbvznt")},"ReviewDB Support Server"))}}).withPrivateSettings()});async function cy(e,t={}){return fetch(a1e+e,{...t,headers:{...t.headers,Authorization:await bf()||""}})}async function l1e(e,t=0){let o=0;wf.store.showWarning||(o|=Fet);let n=new URLSearchParams({flags:String(o),offset:String(t)}),i=await fetch(`${a1e}/users/${e}/reviews?${n}`),s=i.ok?await i.json():{message:i.status===429?"You are sending requests too fast. Wait a few seconds and try again.":"An Error occured while fetching reviews. Please try again later.",reviews:[],updated:!1,hasNextPage:!1,reviewCount:0};return i.ok?s:($a(s.message,D.Type.FAILURE),{...s,reviews:[{id:0,comment:s.message,star:0,timestamp:0,type:3,sender:{id:0,username:"ReviewDB",profilePhoto:"https://cdn.discordapp.com/avatars/1134864775000629298/3f87ad315b32ee464d84f1270c8d1b37.png?size=256&format=webp&quality=lossless",discordID:"1134864775000629298",badges:[]}}]})}async function c1e(e){return await bf()?await cy(`/users/${e.userid}/reviews`,{method:"PUT",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(async o=>{let n=await o.json();return $a(n.message),o.ok?n:null}):($a("Please authorize to add a review."),Cv(),null)}async function u1e(e){return await cy(`/users/${e}/reviews`,{method:"DELETE",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({reviewid:e})}).then(async t=>{let o=await t.json();return $a(o.message),t.ok?o:null})}async function d1e(e){let t=await cy("/reports",{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({reviewid:e})}).then(o=>o.json());$a(t.message)}async function p1e(e,t){if(!(await cy("/blocks",{method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({action:e,discordId:t})})).ok)$a(`Failed to ${e} user`,D.Type.FAILURE);else if($a(`Successfully ${e}ed user`,D.Type.SUCCESS),wi?.user?.blockedUsers){let n=e==="block"?[...wi.user.blockedUsers,t]:wi.user.blockedUsers.filter(i=>i!==t);Q5({user:{...wi.user,blockedUsers:n}})}}async function s1e(){let e=await cy("/blocks",{method:"GET",headers:{Accept:"application/json"}});if(!e.ok)throw new Error(`${e.status}: ${e.statusText}`);return e.json()}function f1e(e){return cy("/users",{method:"POST"}).then(t=>t.json())}async function g1e(e){return cy(`/notifications?id=${e}`,{method:"PATCH"})}var a1e,hI,Fet,m1e,gI,Iv=x(()=>{"use strict";d();B();vf();Tv();Z5();Sf();a1e="https://manti.vendicated.dev/api/reviewdb",hI=50,Fet=2;m1e=e=>p1e("block",e),gI=e=>p1e("unblock",e)});function h1e({onClick:e}){return r(Ue,{text:"Delete Review"},t=>r("div",{...t,className:me(xI.button,xI.dangerous),onClick:e,role:"button"},r($i,{width:"20",height:"20"})))}function x1e({onClick:e}){return r(Ue,{text:"Report Review"},t=>r("div",{...t,className:xI.button,onClick:e,role:"button"},r("svg",{width:"20",height:"20",viewBox:"0 0 24 24"},r("path",{fill:"currentColor",d:"M20,6.002H14V3.002C14,2.45 13.553,2.002 13,2.002H4C3.447,2.002 3,2.45 3,3.002V22.002H5V14.002H10.586L8.293,16.295C8.007,16.581 7.922,17.011 8.076,17.385C8.23,17.759 8.596,18.002 9,18.002H20C20.553,18.002 21,17.554 21,17.002V7.002C21,6.45 20.553,6.002 20,6.002Z"}))))}function y1e({onClick:e,isBlocked:t}){return r(Ue,{text:`${t?"Unblock":"Block"} user`},o=>r("div",{...o,className:xI.button,onClick:e,role:"button"},r("svg",{height:"20",viewBox:"0 -960 960 960",width:"20",fill:"currentColor"},t?r("path",{d:"M480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"}):r("path",{d:"M480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q54 0 104-17.5t92-50.5L228-676q-33 42-50.5 92T160-480q0 134 93 227t227 93Zm252-124q33-42 50.5-92T800-480q0-134-93-227t-227-93q-54 0-104 17.5T284-732l448 448Z"}))))}var xI,b1e=x(()=>{"use strict";d();ao();xt();fe();B();xI=et("button","wrapper","disabled","separator","dangerous")});function yI(e){let t=e.redirectURL?uw:o=>r("span",{...o,role:"button"},o.children);return r(Ue,{text:e.name},({onMouseEnter:o,onMouseLeave:n})=>r(t,{className:pi("blocked-badge"),href:e.redirectURL,onClick:e.onClick},r("img",{className:pi("badge"),width:"22px",height:"22px",onMouseEnter:o,onMouseLeave:n,src:e.icon,alt:e.description})))}var v1e=x(()=>{"use strict";d();Sf();B()});function V5({review:e,refetch:t,profileId:o}){let[n,i]=L(!1);function s(){or(e.sender.discordID)}function a(){go.show({title:"Are you sure?",body:"Do you really want to delete this review?",confirmText:"Delete",cancelText:"Nevermind",onConfirm:async()=>{if(await bf())u1e(e.id).then(p=>{p&&t()});else return $a("You must be logged in to delete reviews.")}})}function l(){go.show({title:"Are you sure?",body:"Do you really you want to report this review?",confirmText:"Report",cancelText:"Nevermind",onConfirm:async()=>{if(await bf())d1e(e.id);else return $a("You must be logged in to report reviews.")}})}let c=wi?.user?.blockedUsers?.includes(e.sender.discordID)??!1;function u(){if(c)return gI(e.sender.discordID);go.show({title:"Are you sure?",body:"Do you really you want to block this user? They will be unable to leave further reviews on your profile. You can unblock users in the plugin settings.",confirmText:"Block",cancelText:"Nevermind",onConfirm:async()=>{if(await bf())m1e(e.sender.discordID);else return $a("You must be logged in to block users.")}})}return r("div",{className:me(pi("review"),X5.cozyMessage,Dv.wrapper,X5.message,X5.groupStart,Dv.cozy),style:{marginLeft:"0px",paddingLeft:"52px"}},r("img",{className:me(Dv.avatar,Dv.clickable),onClick:s,src:e.sender.profilePhoto||"/assets/1f0bfc0865d324c2587920a7d80c609b.png?size=128",style:{left:"0px",zIndex:0}}),r("div",{style:{display:"inline-flex",justifyContent:"center",alignItems:"center"}},r("span",{className:me(Dv.clickable,Dv.username),style:{color:"var(--channels-default)",fontSize:"14px"},onClick:()=>s()},e.sender.username),e.type===3&&r("span",{className:me(J5.botTagVerified,J5.botTagRegular,J5.px,J5.rem),style:{marginLeft:"4px"}},r("span",{className:J5.botText},"System"))),c&&r(yI,{name:"You have blocked this user",description:"You have blocked this user",icon:"/assets/aaee57e0090991557b66.svg",type:0,onClick:()=>fI()}),e.sender.badges.map((p,m)=>r(yI,{key:m,...p})),!wf.store.hideTimestamps&&e.type!==3&&r(Di,{timestamp:new Date(e.timestamp*1e3)},$et.format(e.timestamp*1e3)),r("div",{className:pi("review-comment")},e.comment.length>200&&!n?r(f,null,Jt.parseGuildEventDescription(e.comment.substring(0,200)),"...",r("br",null),r("a",{onClick:()=>i(!0)},"Read more"),"]"):Jt.parseGuildEventDescription(e.comment)),e.id!==0&&r("div",{className:me(S1e.container,S1e.isHeader,X5.buttons),style:{padding:"0px"}},r("div",{className:me(Uet.wrapper,X5.buttonsInner)},i1e(e)&&r(x1e,{onClick:l}),r1e(o,e)&&r(y1e,{isBlocked:c,onClick:u}),n1e(o,e)&&r(h1e,{onClick:a}))))}var X5,S1e,Dv,Uet,J5,$et,qW=x(()=>{"use strict";d();vf();Tv();Iv();Z5();Sf();mt();xt();fe();B();zW();b1e();v1e();X5=et("cozyMessage","message","groupStart","buttons","buttonsInner"),S1e=et("container","isHeader"),Dv=et("avatar","wrapper","cozy","clickable","username"),Uet=et("button","wrapper","selected"),J5=et("botTagVerified","botTagRegular","botText","px","rem"),$et=new Intl.DateTimeFormat});function jW({discordId:e,name:t,onFetchReviews:o,refetchSignal:n,scrollToTop:i,page:s=1,showInput:a=!1,hideOwnReview:l=!1,type:c}){let[u,p]=Vo(!0),[m]=Cr(()=>l1e(e,(s-1)*hI),{fallbackValue:null,deps:[n,u,s],onSuccess:g=>{wf.store.hideBlockedUsers&&(g.reviews=g.reviews?.filter(y=>!Tt.isBlocked(y.sender.discordID))),i?.(),o(g)}});return m?r(f,null,r(jet,{refetch:p,reviews:m.reviews,hideOwnReview:l,profileId:e,type:c}),a&&r(WW,{name:t,discordId:e,refetch:p,isAuthor:m.reviews?.some(g=>g.sender.discordID===z.getCurrentUser().id)})):null}function jet({refetch:e,reviews:t,hideOwnReview:o,profileId:n,type:i}){let s=z.getCurrentUser().id;return r("div",{className:pi("view")},t?.map(a=>(a.sender.discordID!==s||!o)&&r(V5,{key:a.id,review:a,refetch:e,profileId:n})),t?.length===0&&r(W,{className:pi("placeholder")},"Looks like nobody reviewed this ",i===0?"user":"server"," yet. You could be the first!"))}function WW({discordId:e,isAuthor:t,refetch:o,name:n,modalKey:i,repliesTo:s}){let{token:a}=wi,l=kt(null),c=zet.USER_PROFILE_REPLY;c.disableAutoFocus=!0;let u=qet({id:"0",type:1});return r(f,null,r("div",{onClick:()=>{a||($a("Opening authorization window..."),Cv())}},r(Get,{className:pi("input"),channel:u,placeholder:a?s?`Reply to @${n}`:t?`Update review for @${n}`:`Review @${n}`:"You need to authorize to review users!",type:c,disableThemedBackground:!0,setEditorRef:p=>l.current=p,parentModalKey:i,textValue:"",onSubmit:async p=>{if(await c1e({userid:e,comment:p.value,repliesto:s})){o();let g=l.current.ref.current.getSlateEditor();Het.delete(g,{at:{anchor:w1e.start(g,[]),focus:w1e.end(g,[])}})}return{shouldClear:!1,shouldRefocus:!0}}})))}var Het,w1e,zet,Get,qet,k1e=x(()=>{"use strict";d();wt();vf();Tv();Iv();Z5();Sf();qo();fe();B();qW();Het=He("insertNodes","textToText"),w1e=He("start","end","toSlateRange"),zet=He("FORM","USER_PROFILE"),Get=De("editorClassName","CHANNEL_TEXT_AREA"),qet=vt(".GUILD_TEXT]","fromServer)")});function Wet({modalProps:e,modalKey:t,discordId:o,name:n,type:i}){let[s,a]=L(),[l,c]=Vo(!0),[u,p]=L(1),m=kt(null),g=s?.reviewCount,y=s?.reviews.find(b=>b.sender.discordID===wi.user?.discordID);return r(ee,null,r(Pe,{...e,size:"medium"},r(je,null,r(Y,{size:"lg",weight:"semibold",className:pi("modal-header")},n,"'s Reviews",!!g&&r("span",null," (",g," Reviews)")),r(Ut,{onClick:e.onClose})),r($e,{scrollerRef:m},r("div",{className:pi("modal-reviews")},r(jW,{discordId:o,name:n,page:u,refetchSignal:l,onFetchReviews:a,scrollToTop:()=>m.current?.scrollTo({top:0,behavior:"smooth"}),hideOwnReview:!0,type:i}))),r(ht,{className:pi("modal-footer")},r("div",{className:pi("modal-footer-wrapper")},y&&r(V5,{refetch:c,review:y,profileId:o}),r(WW,{isAuthor:y!=null,discordId:o,name:n,refetch:c,modalKey:t}),!!g&&r(aw,{currentPage:u,maxVisiblePages:5,pageSize:hI,totalCount:g,onPageChange:p})))))}function bI(e,t,o){let n="vc-rdb-modal-"+Date.now();Ee(i=>r(Wet,{modalKey:n,modalProps:i,discordId:e,name:t,type:o}),{modalKey:n})}var E1e=x(()=>{"use strict";d();Et();tt();vf();Iv();Sf();at();qo();B();qW();k1e()});var Ket,A1e,KW,vI,C1e=x(()=>{"use strict";d();e1e();tt();ao();du();H();$();fe();B();vf();E1e();Tv();Iv();Z5();Sf();Ket=et("bannerButton"),A1e=(e,{guild:t})=>{t&&e.push(r(M.MenuItem,{label:"View Reviews",id:"vc-rdb-server-reviews",icon:_r,action:()=>bI(t.id,t.name,1)}))},KW=(e,{user:t})=>{t&&e.push(r(M.MenuItem,{label:"View Reviews",id:"vc-rdb-user-reviews",icon:_r,action:()=>bI(t.id,t.username,0)}))},vI=k({name:"ReviewDB",description:"Review other users (Adds a new settings to profiles)",authors:[w.mantikafasi,w.Ven],isModified:!0,settings:wf,contextMenus:{"guild-header-popout":A1e,"guild-context":A1e,"user-context":KW,"user-profile-actions":KW,"user-profile-overflow-menu":KW},patches:[{find:".POPOUT,user:",replacement:{match:/children:\[(?=[^[]+?shouldShowTooltip:)/,replace:"$&$self.BiteSizeReviewsButton({user:arguments[0].user}),"}},{find:".SIDEBAR,disableToolbar:",replacement:{match:/children:\[(?=[^[]+?\.SIDEBAR}\),\i\.bot)/,replace:"$&$self.BiteSizeReviewsButton({user:arguments[0].user}),"}}],flux:{CONNECTION_OPEN:HW},async start(){let e=wf.store,{lastReviewId:t,notifyReviews:o}=e;await HW(),setTimeout(async()=>{if(!wi.token)return;let n=await f1e(wi.token);if(Q5({user:n}),o&&t&&t<n.lastReviewID&&(e.lastReviewId=n.lastReviewID,n.lastReviewID!==0&&$a("You have new reviews on your profile!")),n.notification){let i=n.notification.type===1?{cancelText:"Appeal",confirmText:"Ok",onCancel:async()=>VencordNative.native.openExternal("https://reviewdb.mantikafasi.dev/api/redirect?"+new URLSearchParams({token:wi.token,page:"dashboard/appeal"}))}:{};go.show({title:n.notification.title,body:Jt.parse(n.notification.content,!1),...i}),g1e(n.notification.id)}},4e3)},BiteSizeReviewsButton:ee.wrap(({user:e})=>r(ii,{text:"View Reviews"},r(en,{onClick:()=>bI(e.id,e.username,0),className:Ket.bannerButton},r(KL,{height:16,width:16}))),{noop:!0})})});var Yet,Yp,SI,T1e=x(()=>{"use strict";d();Q();tt();uv();H();At();$();fe();B();Yet=vt('"Result cannot be null because the message is not null"'),Yp=R({chatMentions:{type:3,default:!0,description:"Show role colors in chat mentions (including in the message box)",restartNeeded:!0},memberList:{type:3,default:!0,description:"Show role colors in member list role headers",restartNeeded:!0},voiceUsers:{type:3,default:!0,description:"Show role colors in the voice chat user list",restartNeeded:!0},reactorsList:{type:3,default:!0,description:"Show role colors in the reactors list",restartNeeded:!0},pollResults:{type:3,default:!0,description:"Show role colors in the poll results",restartNeeded:!0},colorChatMessages:{type:3,default:!1,description:"Color chat messages based on the author's role color",restartNeeded:!0},messageSaturation:{type:5,description:"Intensity of message coloring.",markers:uo(0,100,10),default:30}}),SI=k({name:"RoleColorEverywhere",authors:[w.KingFish,w.lewisakura,w.AutumnVN,w.Kyuuhachi,w.jamesbt365],description:"Adds the top role color anywhere possible",settings:Yp,patches:[{find:".USER_MENTION)",replacement:[{match:/(?<=user:(\i),guildId:([^,]+?),.{0,100}?children:\i=>\i)\((\i)\)/,replace:"({...$3,color:$self.getColorInt($1?.id,$2)})"}],predicate:()=>Yp.store.chatMentions},{find:'"text":"locked"',replacement:[{match:/let\{id:(\i),guildId:\i,channelId:(\i)[^}]*\}.*?\.\i,{(?=children)/,replace:"$&color:$self.getColorInt($1,$2),"}],predicate:()=>Yp.store.chatMentions},{find:'tutorialId:"whos-online',replacement:[{match:/(#{intl::CHANNEL_MEMBERS_A11Y_LABEL}.+}\):null,).{0,100}? ",\i\]\}\)\]/,replace:(e,t)=>`${t}$self.RoleGroupColor(arguments[0])]`}],predicate:()=>Yp.store.memberList},{find:"#{intl::THREAD_BROWSER_PRIVATE}",replacement:[{match:/children:\[\i,"  ",\i\]/,replace:"children:[$self.RoleGroupColor(arguments[0])]"}],predicate:()=>Yp.store.memberList},{find:"#{intl::GUEST_NAME_SUFFIX})]",replacement:[{match:/#{intl::GUEST_NAME_SUFFIX}.{0,50}?"".{0,100}\](?=\}\))(?<=guildId:(\i),.+?user:(\i).+?)/,replace:"$&,style:$self.getColorStyle($2.id,$1),"}],predicate:()=>Yp.store.voiceUsers},{find:"MessageReactions.render:",replacement:{match:/tag:"strong",variant:"text-md\/(?:medium|normal)"(?<=onContextMenu:.{0,15}\((\i),(\i),\i\).+?)/,replace:"$&,style:$self.getColorStyle($2?.id,$1?.channel?.id)"},predicate:()=>Yp.store.reactorsList},{find:",reactionVoteCounts",replacement:{match:/\.SIZE_32.+?variant:"text-md\/normal",className:\i\.\i,(?="aria-label":)/,replace:"$&style:$self.getColorStyle(arguments[0]?.user?.id,arguments[0]?.channel?.id),"},predicate:()=>Yp.store.pollResults},{find:".SEND_FAILED,",replacement:{match:/(?<=\]:(\i)\.isUnsupported.{0,50}?,)(?=children:\[)/,replace:"style:$self.useMessageColorsStyle($1),"},predicate:()=>Yp.store.colorChatMessages}],getColorString(e,t){try{if(Ge.plugins.CustomUserColors.enabled){let n=Ud(e,!0);if(n)return n}let o=ne.getChannel(t)?.guild_id??ct.getGuild(t)?.id;return o==null?null:Lt.getMember(o,e)?.colorString??null}catch(o){new ke("RoleColorEverywhere").error("Failed to get color string",o)}return null},getColorInt(e,t){let o=this.getColorString(e,t);return o&&parseInt(o.slice(1),16)},getColorStyle(e,t){let o=this.getColorString(e,t);return o&&{color:o}},useMessageColorsStyle(e){try{let{messageSaturation:t}=Yp.use(["messageSaturation"]),o=Yet(e);if(e.state==="SEND_FAILED")return;if(o.colorString!=null&&t!==0){let n=`color-mix(in oklab, ${o.colorString} ${t}%, var({DEFAULT}))`;return{color:n.replace("{DEFAULT}","--text-default"),"--text-strong":n.replace("{DEFAULT}","--text-strong"),"--text-muted":n.replace("{DEFAULT}","--text-muted")}}}catch(t){new ke("RoleColorEverywhere").error("Failed to get message color",t)}return null},RoleGroupColor:ee.wrap(({id:e,count:t,title:o,guildId:n,label:i})=>{let s=tr.getRole(n,e);return r("span",{style:{color:s?.colorString,fontWeight:"unset",letterSpacing:".05em"}},o??i," \u2014 ",t)},{noop:!0})})});var I1e,wI,D1e=x(()=>{"use strict";d();Q();H();$();I1e=R({onlySnow:{type:3,description:"Only play the Snow Halation Theme",default:!1,restartNeeded:!0}}),wI=k({name:"SecretRingToneEnabler",description:"Always play the secret version of the discord ringtone (except during special ringtone events)",authors:[w.AndrewDLO,w.FieryFlames,w.RamziAH],settings:I1e,patches:[{find:'"call_ringing_beat"',replacement:[{match:/500!==\i\(\)\.random\(1,1e3\)/,replace:"false"},{predicate:()=>I1e.store.onlySnow,match:/"call_ringing_beat",/,replace:""}]}]})});var Qet,Zet,M1e,kI,N1e=x(()=>{"use strict";d();vn();Q();H();mt();$();fe();B();Qet=He("allSummaries","findSummary"),Zet=vt(".people)),startId:",".type}"),M1e=R({summaryExpiryThresholdDays:{type:5,description:"The time in days before a summary is removed. Note that only up to 50 summaries are kept per channel",markers:[1,3,5,7,10,15,20,25,30],stickToMarkers:!1,default:3}}),kI=k({name:"Summaries",description:"Enables Discord's experimental Summaries feature on every server, displaying AI generated summaries of conversations",authors:[w.mantikafasi],settings:M1e,patches:[{find:"SUMMARIZEABLE.has",replacement:{match:/\i\.features\.has\(\i\.\i\.SUMMARIES_ENABLED\w+?\)/g,replace:"true"}},{find:"RECEIVE_CHANNEL_SUMMARY(",replacement:{match:/shouldFetch\((\i),\i\){/,replace:"$& if(!$self.shouldFetch($1)) return false;"}}],flux:{CONVERSATION_SUMMARY_UPDATE(e){let t=e.summaries.map(o=>({...Zet(o),time:Date.now()}));iu("summaries-data",o=>(o??={},o[e.channel_id]?o[e.channel_id].unshift(...t):o[e.channel_id]=t,o[e.channel_id].length>50&&(o[e.channel_id]=o[e.channel_id].slice(0,50)),o))}},async start(){await iu("summaries-data",e=>{e??={};for(let t of Object.keys(e)){for(let o=e[t].length-1;o>=0;o--)e[t][o].time<Date.now()-1e3*60*60*24*M1e.store.summaryExpiryThresholdDays&&e[t].splice(o,1);e[t].length===0&&delete e[t]}return Object.assign(Qet.allSummaries(),e),e})},shouldFetch(e){let t=ne.getChannel(e),o=ct.getGuild(t.guild_id);return S1(o,"SUMMARIES_ENABLED_GA")}})});var B1e=x(()=>{});function _1e(e){let t=e.slice(1,-1).replace(/(\d)(AM|PM)$/i,"$1 $2"),o=new Date(`${new Date().toDateString()} ${t}`).getTime()/1e3;return isNaN(o)?e:(Date.now()/1e3>o&&(o+=86400),`<t:${Math.round(o)}:t>`)}function Jet({rootProps:e,close:t}){let[o,n]=L(),[i,s]=L(""),a=Math.round((new Date(o).getTime()||Date.now())/1e3),l=(p,m)=>`<t:${p}${m&&`:${m}`}>`,[c,u]=rt(()=>{let p=l(a,i);return[p,Jt.parse(p)]},[a,i]);return r(Pe,{...e},r(je,{className:xg("modal-header")},r(Jo,{className:xg("modal-title")},"Timestamp Picker"),r(Ut,{onClick:t,className:xg("modal-close-button")})),r($e,{className:xg("modal-content")},r("input",{className:xg("date-picker"),type:"datetime-local",value:o,onChange:p=>n(p.currentTarget.value),style:{colorScheme:tA()===2?"light":"dark"}}),r(re,null,"Timestamp Format"),r("div",{className:xg("format-select")},r(to,{options:Xet.map(p=>({label:p,value:p})),isSelected:p=>p===i,select:p=>s(p),serialize:p=>p,renderOptionLabel:p=>r("div",{className:xg("format-label")},Jt.parse(l(a,p.value))),renderOptionValue:()=>u})),r(re,{className:Z.bottom8},"Preview"),r(W,{className:xg("preview-text")},u," (",c,")")),r(ht,null,r(U,{onClick:()=>{xu(c+" "),t()}},"Insert")))}var P1e,Xet,xg,R1e,Vet,EI,L1e=x(()=>{"use strict";d();B1e();ma();Q();ut();wt();H();nt();mt();co();at();$();B();P1e=R({replaceMessageContents:{description:"Replace timestamps in message contents",type:3,default:!0}});Xet=["","t","T","d","D","f","F","s","S","R"],xg=de("vc-st-");R1e=({height:e=20,width:t=20,className:o})=>r("svg",{"aria-hidden":"true",role:"img",width:t,height:e,className:o,viewBox:"0 0 24 24",style:{scale:"1.2"}},r("g",{fill:"none",fillRule:"evenodd"},r("path",{fill:"currentColor",d:"M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7v-5z"}),r("rect",{width:"24",height:"24"}))),Vet=({isAnyChat:e})=>e?r(Lr,{tooltip:"Insert Timestamp",onClick:()=>{let t=Ee(o=>r(Jet,{rootProps:o,close:()=>vo(t)}))},buttonProps:{"aria-haspopup":"dialog"}},r(R1e,null)):null,EI=k({name:"SendTimestamps",description:"Send timestamps easily via chat box button & text shortcuts. Read the extended description!",authors:[w.Ven,w.Tyler,w.Grzesiek11],settings:P1e,chatBarButton:{icon:R1e,render:Vet},onBeforeMessageSend(e,t){P1e.store.replaceMessageContents&&(t.content=t.content.replace(/`\d{1,2}:\d{2} ?(?:AM|PM)?`/gi,_1e))},settingsAboutComponent(){let e=["12:00","3:51","17:59","24:00","12:00 AM","0:13PM"].map(t=>`\`${t}\``);return r(f,null,r(W,null,"To quickly send send time only timestamps, include timestamps formatted as `HH:MM` (including the backticks!) in your message"),r(W,null,"See below for examples. If you need anything more specific, use the Date button in the chat bar!"),r(W,null,"Examples:",r("ul",null,e.map(t=>r("li",{key:t},r("code",null,t)," ","->"," ",Jt.parse(_1e(t)))))))}})});var O1e=x(()=>{});function H1e(e){Ee(t=>r(Pe,{...t,size:"medium"},r(ett,{guild:e})))}function U1e(e){return r(Di,{timestamp:new Date(e)})}function ett({guild:e}){let[t,o]=L(),[n,i]=L(),[s,a]=L(),[l,c]=L();se(()=>{e4.friends=!1,e4.blocked=!1,e4.ignored=!1},[]);let[u,p]=L(0),m=e.banner&&To.getGuildBannerURL(e,!0).replace(/\?size=\d+$/,"?size=1024"),g=e.icon&&To.getGuildIconURL({id:e.id,icon:e.icon,canAnimate:!0,size:512});return r("div",{className:zr("root")},m&&u===0&&r("img",{className:zr("banner"),src:m,alt:"",onClick:()=>us({url:m,width:1024})}),r("div",{className:zr("header")},g?r("img",{className:zr("icon"),src:g,alt:"",onClick:()=>us({url:g,height:512,width:512})}):r("div",{"aria-hidden":!0,className:me(F1e.childWrapper,F1e.acronym)},Ba(e)),r("div",{className:zr("name-and-description")},r(re,{className:zr("name")},e.name),e.description&&r(W,null,e.description))),r(Rr,{type:"top",look:"brand",className:zr("tab-bar"),selectedItem:u,onItemSelect:p},r(Rr.Item,{className:zr("tab",{selected:u===0}),id:0},r("div",{style:{textAlign:"center"}},r("div",null,"Server Info"))),r(Rr.Item,{className:zr("tab",{selected:u===1}),id:1},r("div",{style:{textAlign:"center"}},r("div",null,"Friends"),t!==void 0?` (${t})`:"")),r(Rr.Item,{className:zr("tab",{selected:u===4}),id:4},r("div",{style:{textAlign:"center"}},r("div",null,"Mutual Users"),l!==void 0?` (${l})`:"")),r(Rr.Item,{className:zr("tab",{selected:u===2}),id:2},r("div",{style:{textAlign:"center"}},r("div",null,"Blocked Users"),n!==void 0?` (${n})`:"")),r(Rr.Item,{className:zr("tab",{selected:u===3}),id:3},r("div",{style:{textAlign:"center"}},r("div",null,"Ignored Users"),s!==void 0?`(${s})`:""))),r("div",{className:zr("tab-content")},u===0&&r(ott,{guild:e}),u===1&&r(ntt,{guild:e,setCount:o}),u===4&&r(ltt,{guild:e,setCount:c}),u===2&&r(rtt,{guild:e,setCount:i}),u===3&&r(itt,{guild:e,setCount:a})))}function ttt(e,t){let o=Lt.getMember(e,t.id)?.avatar,n=o?To.getGuildMemberAvatarURLSimple({userId:t.id,avatar:o,guildId:e,canAnimate:!0}):To.getUserAvatarURL(t,!0);return r("div",{className:zr("owner")},r("img",{className:zr("owner-avatar"),src:n,alt:"",onClick:()=>us({url:n,height:512,width:512})}),Jt.parse(`<@${t.id}>`))}function ott({guild:e}){let[t]=Cr(()=>as.getUser(e.ownerId),{deps:[e.ownerId],fallbackValue:null}),o={"Server Owner":t?ttt(e.id,t):"Loading...","Created At":U1e(ai.extractTimestamp(e.id)),"Joined At":e.joinedAt?U1e(e.joinedAt.getTime()):"-","Vanity Link":e.vanityURLCode?r("a",null,`discord.gg/${e.vanityURLCode}`):"-","Preferred Locale":e.preferredLocale||"-","Verification Level":["None","Low","Medium","High","Highest"][e.verificationLevel]||"?","Server Boosts":`${e.premiumSubscriberCount??0} (Level ${e.premiumTier??0})`,Channels:rl.getChannels(e.id)?.count-1||"?",Roles:tr.getSortedRoles(e.id).length-1};return r("div",{className:zr("info")},Object.entries(o).map(([n,i])=>r("div",{className:zr("server-info-pair"),key:n},r(re,null,n),typeof i=="string"?r("span",null,i):i)))}function ntt({guild:e,setCount:t}){return YW("friends",e,Tt.getFriendIDs(),t)}function rtt({guild:e,setCount:t}){let o=Tt.getBlockedIDs();return YW("blocked",e,o,t)}function itt({guild:e,setCount:t}){let o=Tt.getIgnoredIDs();return YW("ignored",e,o,t)}function YW(e,t,o,n){let i=[],s=[];for(let l of o)Lt.isMember(t.id,l)?s.push(l):i.push(l);Je([Lt],()=>Lt.getMemberIds(t.id),null,(l,c)=>l.length===c.length),se(()=>{!e4[e]&&i.length&&(e4[e]=!0,V.dispatch({type:"GUILD_MEMBERS_REQUEST",guildIds:[t.id],userIds:i}))},[]),se(()=>n(s.length),[s.length]);let a=s.map(l=>z.getUser(l)).sort((l,c)=>{switch(AI.store.sorting){case"username":return l.username.localeCompare(c.username);case"displayname":return l?.globalName?.localeCompare(c?.globalName||c.username)||l.username.localeCompare(c?.globalName||c.username);default:return 0}});return r(dd,{fade:!0,className:zr("scroller")},a.map(l=>r($1e,{key:l.id,user:l,status:cr.getStatus(l.id)||"offline",onSelect:()=>or(l.id),onContextMenu:()=>{}})))}function stt(e){let t=[];for(let o of Object.values(ct.getGuilds()))if(Lt.isMember(o.id,e)){let n=o.icon?To.getGuildIconURL({id:o.id,icon:o.icon,canAnimate:!0,size:20})??null:null;t.push({guild:o,iconUrl:n})}return{id:e,mutualCount:t.length,mutualGuilds:t}}function att({member:e}){let{mutualGuilds:o,mutualCount:n}=e;return r("div",{className:zr("mutual-guilds")},o.slice(0,3).map(({guild:i,iconUrl:s})=>r("div",{key:i.id,className:zr("guild-icon"),role:"img","aria-label":i.name},s?r("img",{src:s,alt:""}):r("div",{className:zr("guild-acronym")},Ba(i)))),n>3&&r("div",{className:zr("guild-count")},"+",n-3))}function ltt({guild:e,setCount:t}){let[o,n]=L([]),i=z.getCurrentUser().id;return se(()=>{let a=Lt.getMemberIds(e.id).map(l=>stt(l)).filter(l=>l.mutualCount>1&&l.id!==i);a.sort((l,c)=>c.mutualCount-l.mutualCount),n(a),t(a.length)},[e.id]),r(dd,{fade:!0,className:zr("scroller")},o.map(s=>{let a=z.getUser(s.id);return{...s,user:a}}).filter(Boolean).sort((s,a)=>{switch(AI.store.sorting){case"username":return s.user.username.localeCompare(a.user.username);case"displayname":return s.user?.globalName?.localeCompare(a.user?.globalName||a.user.username)||s.user.username.localeCompare(a.user?.globalName||a.user.username);default:return 0}}).map(s=>r("div",{className:zr("member-row"),key:s.id,onClick:()=>or(s.id)},r("div",{className:zr("member-content")},r($1e,{user:s.user,status:cr.getStatus(s.id)||"offline",onSelect:()=>{},onContextMenu:()=>{},mutualGuilds:s.mutualCount})),r("div",{className:zr("member-icons"),onClick:a=>a.stopPropagation()},r(att,{member:s})))))}var F1e,$1e,zr,e4,z1e=x(()=>{"use strict";d();O1e();ut();wt();nt();mt();xt();at();qo();fe();B();QW();F1e=et("icon","acronym","childWrapper"),$1e=De("discriminatorClass:",".isMobileOnline","getAvatarURL"),zr=de("vc-gp-");e4={friends:!1,blocked:!1,ignored:!1}});var G1e,AI,CI,QW=x(()=>{"use strict";d();Un();Q();H();$();B();z1e();G1e=(e,{guild:t})=>{Qt("privacy",e)?.push(r(M.MenuItem,{id:"vc-server-info",label:"Server Info",action:()=>H1e(t)}))},AI=R({sorting:{type:4,description:"Username or if applicable Display Name",options:[{label:"Username",value:"username"},{label:"Display Name",value:"displayname",default:!0},{label:"Dont Sort",value:"none"}]}}),CI=k({name:"ServerInfo",description:"Allows you to view info about a server",authors:[w.Ven,w.Nuckyz,j.Z1xus],dependencies:["DynamicImageModalAPI"],tags:["guild","info","ServerProfile"],isModified:!0,contextMenus:{"guild-context":G1e,"guild-header-popout":G1e},settings:AI})});var q1e=x(()=>{});function ctt(){return TI=Je([Tt,cr],()=>{let e=0,t=Tt.getFriendIDs();for(let o of t)(cr.getStatus(o)??"offline")!=="offline"&&e++;return e}),r("div",{id:"vc-friendcount"},!Mv.store.useCompact&&r("svg",{id:"vc-friendcount-icon",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",fill:"currentColor",viewBox:"0 0 24 24"},r("path",{fill:"currentColor",d:"M13 10a4 4 0 1 0 0-8 4 4 0 0 0 0 8Z"}),r("path",{fill:"currentColor",d:"M3 5v-.75C3 3.56 3.56 3 4.25 3s1.24.56 1.33 1.25C6.12 8.65 9.46 12 13 12h1a8 8 0 0 1 8 8 2 2 0 0 1-2 2 .21.21 0 0 1-.2-.15 7.65 7.65 0 0 0-1.32-2.3c-.15-.2-.42-.06-.39.17l.25 2c.02.15-.1.28-.25.28H9a2 2 0 0 1-2-2v-2.22c0-1.57-.67-3.05-1.53-4.37A15.85 15.85 0 0 1 3 5Z"})),r(Y,{size:"xs",id:"vc-friendcount-text"},TI),!!Mv.store.useCompact&&r(Y,{size:"xs",id:"vc-friendcount-text-compact"},"Friends"))}function utt(){return II=Je([ct,j1e],()=>{let e=j1e.computeGuildIds(),t=ct.getGuilds();return ct.getGuildCount()+e.filter(o=>t[o]==null).length}),r("div",{id:"vc-guildcount"},!Mv.store.useCompact&&r("svg",{id:"vc-guildcount-icon","aria-hidden":"true",role:"img",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",fill:"currentColor",viewBox:"0 0 24 24"},r("path",{fill:"currentColor",d:"M19.73 4.87a18.2 18.2 0 0 0-4.6-1.44c-.21.4-.4.8-.58 1.21-1.69-.25-3.4-.25-5.1 0-.18-.41-.37-.82-.59-1.2-1.6.27-3.14.75-4.6 1.43A19.04 19.04 0 0 0 .96 17.7a18.43 18.43 0 0 0 5.63 2.87c.46-.62.86-1.28 1.2-1.98-.65-.25-1.29-.55-1.9-.92.17-.12.32-.24.47-.37 3.58 1.7 7.7 1.7 11.28 0l.46.37c-.6.36-1.25.67-1.9.92.35.7.75 1.35 1.2 1.98 2.03-.63 3.94-1.6 5.64-2.87.47-4.87-.78-9.09-3.3-12.83ZM8.3 15.12c-1.1 0-2-1.02-2-2.27 0-1.24.88-2.26 2-2.26s2.02 1.02 2 2.26c0 1.25-.89 2.27-2 2.27Zm7.4 0c-1.1 0-2-1.02-2-2.27 0-1.24.88-2.26 2-2.26s2.02 1.02 2 2.26c0 1.25-.88 2.27-2 2.27Z"})),r(Y,{size:"xs",id:"vc-guildcount-text"},II),!!Mv.store.useCompact&&r(Y,{size:"xs",id:"vc-guildcount-text-compact"},"Servers"))}var TI,II,j1e,Mv,DI,W1e=x(()=>{"use strict";d();q1e();B0();Q();Et();tt();H();nt();$();fe();B();TI=0,II=0,j1e=Ft("UserGuildJoinRequestStore");Mv=R({mode:{description:"Mode",type:4,options:[{label:"Only online friend count",value:2,default:!0},{label:"Only server count",value:1},{label:"Both server and online friend counts",value:3}],restartNeeded:!0},useCompact:{description:"Makes the indicator appear with only text",type:3,default:!1,restartNeeded:!0}}),DI=k({name:"ServerListIndicators",description:"Add online friend count or server count in the server list",authors:[w.dzshn,j.Panniku],dependencies:["ServerListAPI"],settings:Mv,renderIndicator:()=>{let{mode:e,useCompact:t}=Mv.store,o;switch(e){case 3:o=`${TI} Friends, ${II} Servers`;break;case 2:o=`${TI} Friends`;break;case 1:o=`${II} Servers`;break}let n=t?de("vc-indicators-compact"):de("vc-indicators");return r(ee,{noop:!0},r("div",{id:n("-container")},r(Ue,{text:o,position:"right"},({onMouseEnter:i,onMouseLeave:s})=>r("div",{id:n("-indicator-items"),onMouseEnter:i,onMouseLeave:s},!!(e&2)&&r(ctt,null),!!(e&1)&&r(utt,null)))))},start(){kc(0,this.renderIndicator)},stop(){Ec(0,this.renderIndicator)}})});var ZW,MI,K1e=x(()=>{"use strict";d();Q();H();$();B();ZW=R({noShiftDelete:{type:3,description:"Remove requirement to hold shift for deleting a message.",default:!0},noShiftPin:{type:3,description:"Remove requirement to hold shift for pinning a message.",default:!0}}),MI=k({name:"ShowAllMessageButtons",description:"Always show all message buttons no matter if you are holding the shift key or not.",authors:[w.Nuckyz,j.mochienya],settings:ZW,patches:[{find:"#{intl::MESSAGE_UTILITIES_A11Y_LABEL}",replacement:[{match:/isExpanded:\i&&(.+?),/,replace:"isExpanded:$1,"},{predicate:()=>ZW.store.noShiftDelete,match:/onClick:.{10,20}(?=,dangerous:!0)/,replace:"onClick:() => $self.deleteMessage(arguments[0].message)"},{predicate:()=>ZW.store.noShiftPin,match:/onClick:.{10,30}(?=\},"pin")/,replace:"onClick:() => $self.toggleMessagePin(arguments[0]),"}]}],deleteMessage({channel_id:e,id:t}){Fn.deleteMessage(e,t)},toggleMessagePin({channel:e,message:t}){if(t.pinned)return Mh.unpinMessage(e,t.id);Mh.pinMessage(e,t.id)}})});var Y1e=x(()=>{});function Q1e(){let e=cw(XW.colors.INTERACTIVE_MUTED).hex(),t=cw(XW.colors.INTERACTIVE_ICON_ACTIVE??XW.colors.INTERACTIVE_ACTIVE).hex();return r(dtt,{color:e,forcedIconColor:t,size:16,tooltipText:St("CONNECTION_VERIFIED"),className:"vc-sc-tooltip-icon"})}var XW,dtt,Z1e=x(()=>{"use strict";d();mt();fe();B();XW=An(e=>e.colors?.INTERACTIVE_MUTED?.css),dtt=De("#{intl::CONNECTIONS_ROLE_OFFICIAL_ICON_TOOLTIP}")});function xtt({id:e,theme:t}){let o=gr.getUserProfile(e);if(!o)return null;let n=o.connectedAccounts;return n?.length?r(Be,{gap:gtt(NI.store.iconSpacing),flexWrap:"wrap"},n.map(i=>r(ytt,{connection:i,theme:t,key:i.id}))):null}function ytt({connection:e,theme:t}){let o=mtt.get(ptt(e.type)),n=o.getPlatformUserUrl?.(e),i=r("img",{"aria-label":e.name,src:t==="light"?o.icon.lightSVG:o.icon.darkSVG,style:{width:NI.store.iconSize,height:NI.store.iconSize}}),s=n?hc:ol;return r(Ue,{text:r("span",{className:"vc-sc-tooltip"},r("span",{className:"vc-sc-connection-name"},e.name),e.verified&&r(Q1e,null),r(s,{height:16,width:16,className:"vc-sc-tooltip-icon"})),key:e.id},a=>n?r("a",{...a,className:"vc-user-connection",href:n,target:"_blank",rel:"noreferrer",onClick:l=>{yt(xf.name)&&xf.handleLink(l.currentTarget,l)}},i):r("button",{...a,className:"vc-user-connection",onClick:()=>{e.type==="xbox"?VencordNative.native.openExternal(`https://www.xbox.com/en-US/play/user/${encodeURIComponent(e.name)}`):$t(e.name)}},i))}var ptt,mtt,ftt,gtt,NI,htt,BI,X1e=x(()=>{"use strict";d();Y1e();Wo();Q();tt();eo();ao();RT();H();mt();$();fe();B();Z1e();ptt=vt(".TWITTER_LEGACY:"),mtt=He("isSupported","getByUrl"),ftt=vt(".getPreviewThemeColors","primaryColor:"),gtt=e=>(e??0)*2+4,NI=R({iconSize:{type:1,description:"Icon size (px)",default:32},iconSpacing:{type:4,description:"Icon margin",default:1,options:[{label:"Compact",value:0},{label:"Cozy",value:1},{label:"Roomy",value:2}]}}),htt=ee.wrap(e=>r(xtt,{...e,id:e.user.id,theme:ftt(e).theme}),{noop:!0});BI=k({name:"ShowConnections",description:"Show connected accounts in user popouts",authors:[w.TheKodeToad],settings:NI,patches:[{find:/\.POPOUT,onClose:\i}\),nicknameIcons:.+?\.isProvisional/,replacement:{match:/userId:\i\.id,guild:\i\}\)(?=])/,replace:"$&,$self.profilePopoutComponent(arguments[0])"}}],profilePopoutComponent:htt})});var J1e=x(()=>{});function Itt({channel:e}){let{defaultAllowedUsersAndRolesDropdownState:t}=Uu.use(["defaultAllowedUsersAndRolesDropdownState"]),[o,n]=L([]),{type:i,topic:s,lastMessageId:a,defaultForumLayout:l,lastPinTimestamp:c,defaultAutoArchiveDuration:u,availableTags:p,id:m,rateLimitPerUser:g,defaultThreadRateLimitPerUser:y,defaultSortOrder:b,defaultReactionEmoji:v,bitrate:E,rtcRegion:A,videoQualityMode:C,permissionOverwrites:I,guild_id:N}=e;return se(()=>{let _=[],O=ct.getGuild(N)?.ownerId;Lt.getMember(N,O)||_.push(O),Object.values(I).forEach(({type:F,id:J})=>{F===1&&!Lt.getMember(N,J)&&_.push(J)}),_.length>0&&V.dispatch({type:"GUILD_MEMBERS_REQUEST",guildIds:[N],userIds:_}),Ge.plugins.PermissionsViewer.enabled&&n(HT(Object.values(I).map(F=>({type:F.type,id:F.id,overwriteAllow:F.allow,overwriteDeny:F.deny})),N))},[m]),r("div",{className:me(JW.auto,JW.customTheme,JW.managedReactiveScroller)},r("div",{className:Sa("container")},r("img",{className:Sa("logo"),src:Ttt}),r("div",{className:Sa("heading-container")},r(Y,{size:"xxl",weight:"bold"},"This is a ",Kt.can(Nt.VIEW_CHANNEL,e)?"locked":"hidden"," ",ktt[i]," channel"),e.isNSFW()&&r(Ue,{text:"NSFW"},({onMouseLeave:_,onMouseEnter:O})=>r("svg",{onMouseLeave:_,onMouseEnter:O,className:Sa("heading-nsfw-icon"),width:"32",height:"32",viewBox:"0 0 48 48","aria-hidden":!0,role:"img"},r("path",{fill:"currentColor",d:"M.7 43.05 24 2.85l23.3 40.2Zm23.55-6.25q.75 0 1.275-.525.525-.525.525-1.275 0-.75-.525-1.3t-1.275-.55q-.8 0-1.325.55-.525.55-.525 1.3t.55 1.275q.55.525 1.3.525Zm-1.85-6.1h3.65V19.4H22.4Z"})))),!e.isGuildVoice()&&!e.isGuildStageVoice()&&r(Y,{size:"lg"},"You can not see the ",e.isForumChannel()?"posts":"messages"," of this channel.",e.isForumChannel()&&s&&s.length>0&&" However you may see its guidelines:"),e.isForumChannel()&&s&&s.length>0&&r("div",{className:Sa("topic-container")},Jt.parseTopic(s,!1,{channelId:m})),a&&r(Y,{size:"md"},"Last ",e.isForumChannel()?"post":"message"," created:",r(Di,{timestamp:new Date(ai.extractTimestamp(a))})),c&&r(Y,{size:"md"},"Last message pin: ",r(Di,{timestamp:new Date(c)})),(g??0)>0&&r(Y,{size:"md"},"Slowmode: ",QS(g,"seconds")),(y??0)>0&&r(Y,{size:"md"},"Default thread slowmode: ",QS(y,"seconds")),(e.isGuildVoice()||e.isGuildStageVoice())&&E!=null&&r(Y,{size:"md"},"Bitrate: ",E," bits"),A!==void 0&&r(Y,{size:"md"},"Region: ",A??"Automatic"),(e.isGuildVoice()||e.isGuildStageVoice())&&r(Y,{size:"md"},"Video quality mode: ",Ctt[C??1]),(u??0)>0&&r(Y,{size:"md"},"Default inactivity duration before archiving ",e.isForumChannel()?"posts":"threads",":"," "+QS(u,"minutes")),l!=null&&r(Y,{size:"md"},"Default layout: ",Att[l]),b!=null&&r(Y,{size:"md"},"Default sort order: ",Ett[b]),v!=null&&r("div",{className:Sa("default-emoji-container")},r(Y,{size:"md"},"Default reaction emoji:"),Jt.defaultRules[v.emojiName?"emoji":"customEmoji"].react({name:v.emojiName?Stt.convertSurrogateToName(v.emojiName):Hi.getCustomEmojiById(v.emojiId)?.name??"",emojiId:v.emojiId??void 0,surrogate:v.emojiName??void 0,src:v.emojiName?wtt.getURL(v.emojiName):void 0},void 0,{key:0})),e.hasFlag(16)&&r(Y,{size:"md"},"Posts on this forum require a tag to be set."),p&&p.length>0&&r("div",{className:Sa("tags-container")},r(Y,{size:"lg",weight:"bold"},"Available tags:"),r("div",{className:Sa("tags")},p.map(_=>r(vtt,{tag:_,key:_.id})))),r("div",{className:Sa("allowed-users-and-roles-container")},r("div",{className:Sa("allowed-users-and-roles-container-title")},yt(vv.name)&&r(Ue,{text:"Permission Details"},({onMouseLeave:_,onMouseEnter:O})=>r("button",{onMouseLeave:_,onMouseEnter:O,className:Sa("allowed-users-and-roles-container-permdetails-btn"),onClick:()=>ay(o,ct.getGuild(e.guild_id),e.name)},r("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},r("path",{fill:"currentColor",d:"M7 12.001C7 10.8964 6.10457 10.001 5 10.001C3.89543 10.001 3 10.8964 3 12.001C3 13.1055 3.89543 14.001 5 14.001C6.10457 14.001 7 13.1055 7 12.001ZM14 12.001C14 10.8964 13.1046 10.001 12 10.001C10.8954 10.001 10 10.8964 10 12.001C10 13.1055 10.8954 14.001 12 14.001C13.1046 14.001 14 13.1055 14 12.001ZM19 10.001C20.1046 10.001 21 10.8964 21 12.001C21 13.1055 20.1046 14.001 19 14.001C17.8954 14.001 17 13.1055 17 12.001C17 10.8964 17.8954 10.001 19 10.001Z"})))),r(Y,{size:"lg",weight:"bold"},"Allowed users and roles:"),r(Ue,{text:t?"Hide Allowed Users and Roles":"View Allowed Users and Roles"},({onMouseLeave:_,onMouseEnter:O})=>r("button",{onMouseLeave:_,onMouseEnter:O,className:Sa("allowed-users-and-roles-container-toggle-btn"),onClick:()=>Uu.store.defaultAllowedUsersAndRolesDropdownState=!t},r("svg",{width:"24",height:"24",viewBox:"0 0 24 24",transform:t?"scale(1 -1)":"scale(1 1)"},r("path",{fill:"currentColor",d:"M16.59 8.59003L12 13.17L7.41 8.59003L6 10L12 16L18 10L16.59 8.59003Z"}))))),t&&r(btt,{channel:e}))))}var JW,btt,vtt,Stt,wtt,ktt,Ett,Att,Ctt,Ttt,V1e,ebe=x(()=>{"use strict";d();Wo();Q();Et();tt();bv();zT();H5();xt();Da();fe();B();PI();JW=et("auto","managedReactiveScroller","customTheme"),btt=De("#{intl::ROLE_REQUIRED_SINGLE_USER_MESSAGE}"),vtt=De("#{intl::FORUM_TAG_A11Y_FILTER_BY_TAG}"),Stt=He("convertSurrogateToName"),wtt=He("getURL","getEmojiColors"),ktt={0:"text",5:"announcement",15:"forum",2:"voice",13:"stage"},Ett={0:"Latest activity",1:"Creation date"},Att={0:"Not set",1:"List view",2:"Gallery view"},Ctt={1:"Automatic",2:"720p"},Ttt="/assets/433e3ec4319a9d11b0cbe39342614982.svg";V1e=ee.wrap(Itt)});function Mtt(e){return e.channel.id==="null"&&e.channel.name==="Uncategorized"&&e.comparator===-1}var Sa,Dtt,Uu,Nv,PI=x(()=>{"use strict";d();J1e();Q();tt();H();nt();xt();$();B();ebe();Sa=de("vc-shc-"),Dtt=1n<<20n,Uu=R({channelStyle:{description:"The style used to display hidden channels.",type:4,options:[{label:"Classic",value:0,default:!0},{label:"Muted",value:1},{label:"Show Unreads",value:2},{label:"Muted and Show Unreads",value:3}],restartNeeded:!0},showMode:{description:"The mode used to display hidden channels.",type:4,options:[{label:"Lock Icon replacing channel icon",value:0,default:!0},{label:"Eye icon on the right",value:2},{label:"Lock icon on the right",value:1}],restartNeeded:!0},defaultAllowedUsersAndRolesDropdownState:{description:"Whether the allowed users and roles dropdown on hidden channels should be open by default",type:3,default:!0}});Nv=k({name:"ShowHiddenChannels",description:"Show channels that you do not have access to view.",authors:[w.BigDuck,w.AverageReactEnjoyer,w.D3SOX,w.Ven,w.Nuckyz,w.Nickyux,w.dzshn,j.Oggetto],isModified:!0,settings:Uu,patches:[{find:'"placeholder-channel-id"',replacement:[{match:/if\(!\i\.\i\.can\(\i\.\i\.VIEW_CHANNEL.+?{if\(this\.id===\i\).+?threadIds:\[\]}}/,replace:""},{match:/(?<=&&)(?=!\i\.\i\.hasUnread\(this\.record\.id\))/,replace:"$self.isHiddenChannel(this.record)||"},{match:/(this\.record\)\?{renderLevel:(.+?),threadIds.+?renderLevel:).+?(?=,threadIds)/g,replace:(e,t,o)=>`${t}${o}`},{match:/(getRenderLevel\(\i\){.+?return)!\i\.\i\.can\(\i\.\i\.VIEW_CHANNEL,this\.record\)\|\|/,replace:(e,t)=>`${t} `}]},{find:"VoiceChannel, transitionTo: Channel does not have a guildId",replacement:[{match:/(?<=getIgnoredUsersForVoiceChannel\((\i)\.id\)[^;]+?;return\()/,replace:(e,t)=>`!$self.isHiddenChannel(${t})&&`},{match:/(?=\|\|\i\.\i\.selectVoiceChannel\((\i)\.id\))/,replace:(e,t)=>`||$self.isHiddenChannel(${t})`},{match:/!__OVERLAY__&&\((?<=selectVoiceChannel\((\i)\.id\).+?)/,replace:(e,t)=>`${e}$self.isHiddenChannel(${t},true)||`}]},{find:".AUDIENCE),{isSubscriptionGated",replacement:{match:/(\i)\.isRoleSubscriptionTemplatePreviewChannel\(\)/,replace:(e,t)=>`${e}||$self.isHiddenChannel(${t})`}},{find:'tutorialId:"instant-invite"',replacement:[...["renderEditButton","renderInviteButton"].map(e=>({match:new RegExp(`(?<=${e}\\(\\){)`,"g"),replace:"if($self.isHiddenChannel(this.props.channel))return null;"}))]},{find:"VoiceChannel.renderPopout: There must always be something to render",all:!0,replacement:{match:/(?<=renderOpenChatButton(?:",|=)\(\)=>{)/,replace:"if($self.isHiddenChannel(this.props.channel))return null;"}},{find:"#{intl::CHANNEL_TOOLTIP_DIRECTORY}",predicate:()=>Uu.store.showMode===0,replacement:{match:/(?=switch\((\i)\.type\).{0,30}\.GUILD_ANNOUNCEMENT.{0,70}\(0,\i\.\i\))/,replace:(e,t)=>`if($self.isHiddenChannel(${t}))return $self.LockIcon;`}},{find:"UNREAD_IMPORTANT:",predicate:()=>Uu.store.showMode!==0,replacement:[{predicate:()=>Uu.store.showMode===2,match:/\.Children\.count.+?:null(?<=,channel:(\i).+?)/,replace:(e,t)=>`${e},$self.isHiddenChannel(${t})?$self.EyeRightIcon():null`},{predicate:()=>Uu.store.showMode===1,match:/\.Children\.count.+?:null(?<=,channel:(\i).+?)/,replace:(e,t)=>`${e},$self.isHiddenChannel(${t})?$self.LockRightIcon():null`}]},{find:"UNREAD_IMPORTANT:",predicate:()=>Uu.store.channelStyle===1||Uu.store.channelStyle===3,replacement:[{match:/Children\.count.+?;(?=return\(0,\i\.jsxs?\)\(\i\.\i,{focusTarget:)(?<={channel:(\i),name:\i,muted:(\i).+?;)/,replace:(e,t,o)=>`${e}${o}=$self.isHiddenChannel(${t})?true:${o};`},{match:/(?<=\?\i\.\i:\i\.\i,)(.{0,150}?)if\((\i)(?:\)return |\?)(\i\.MUTED)/,replace:(e,t,o,n)=>`${o}?${n}:"",${t}if(${o})return ""`}]},{find:"UNREAD_IMPORTANT:",predicate:()=>Uu.store.channelStyle!==2&&Uu.store.channelStyle!==3,replacement:[{match:/(?<=\.LOCKED;if\()(?<={channel:(\i).+?)/,replace:(e,t)=>`!$self.isHiddenChannel(${t})&&`},{match:/Children\.count.+?;(?=return\(0,\i\.jsxs?\)\(\i\.\i,{focusTarget:)(?<={channel:(\i),name:\i,.+?unread:(\i).+?)/,replace:(e,t,o)=>`${e}${o}=$self.isHiddenChannel(${t})?false:${o};`}]},{find:'"ChannelListUnreadsStore"',replacement:{match:/(?<=\.id\)\))(?=&&\(0,\i\.\i\)\((\i)\))/,replace:(e,t)=>`&&!$self.isHiddenChannel(${t})`}},{find:"renderBottomUnread(){",replacement:{match:/(?<=!0\))(?=&&\(0,\i\.\i\)\((\i\.record)\))/,replace:"&&!$self.isHiddenChannel($1)"}},{find:"ignoreRecents:!0",replacement:{match:/(?<=\.id\)\))(?=&&\(0,\i\.\i\)\((\i)\))/,replace:"&&!$self.isHiddenChannel($1)"}},{find:"Missing channel in Channel.renderHeaderToolbar",replacement:[{match:/renderHeaderToolbar(?:",|=)\(\)=>{.+?case \i\.\i\.GUILD_TEXT:(?=.+?(\i\.push.{0,50}channel:(\i)},"notifications"\)\)))(?<=isLurking:(\i).+?)/,replace:(e,t,o,n)=>`${e}if(!${n}&&$self.isHiddenChannel(${o})){${t};break;}`},{match:/renderHeaderToolbar(?:",|=)\(\)=>{.+?case \i\.\i\.GUILD_MEDIA:(?=.+?(\i\.push.{0,40}channel:(\i)},"notifications"\)\)))(?<=isLurking:(\i).+?)/,replace:(e,t,o,n)=>`${e}if(!${n}&&$self.isHiddenChannel(${o})){${t};break;}`},{match:/renderMobileToolbar(?:",|=)\(\)=>{.+?case \i\.\i\.GUILD_DIRECTORY:(?<=let{channel:(\i).+?)/,replace:(e,t)=>`${e}if($self.isHiddenChannel(${t}))break;`},{match:/(?<=renderHeaderBar(?:",|=)\(\)=>{.+?hideSearch:(\i)\.isDirectory\(\))/,replace:(e,t)=>`||$self.isHiddenChannel(${t})`},{match:/(?<=renderSidebar\(\){)/,replace:"if($self.isHiddenChannel(this.props.channel))return null;"},{match:/(?<=renderChat\(\){)/,replace:"if($self.isHiddenChannel(this.props.channel))return $self.HiddenChannelLockScreen(this.props.channel);"}]},{find:'"MessageManager"',replacement:{match:/forceFetch:\i,isPreload:.+?}=\i;(?=.+?getChannel\((\i)\))/,replace:(e,t)=>`${e}if($self.isHiddenChannel({channelId:${t}}))return;`}},{find:'"alt+shift+down"',replacement:{match:/(?<=getChannel\(\i\);return null!=(\i))(?=.{0,200}?>0\)&&\(0,\i\.\i\)\(\i\))/,replace:(e,t)=>`&&!$self.isHiddenChannel(${t})`}},{find:".APPLICATION_STORE&&null!=",replacement:{match:/getState\(\)\.channelId.+?(?=\.map\(\i=>\i\.id)/,replace:"$&.filter(e=>!$self.isHiddenChannel(e))"}},{find:"#{intl::ROLE_REQUIRED_SINGLE_USER_MESSAGE}",replacement:[{match:/(forceRoles:.+?)(\i\.\i\(\i\.\i\.ADMINISTRATOR,\i\.\i\.VIEW_CHANNEL\))(?<=context:(\i)}.+?)/,replace:(e,t,o,n)=>`${t}$self.swapViewChannelWithConnectPermission(${o},${n})`},{match:/permissionOverwrites\[.+?\i=(?<=context:(\i)}.+?)(?=(.+?)VIEW_CHANNEL)/,replace:(e,t,o)=>`${e}!Vencord.Webpack.Common.PermissionStore.can(${Dtt}n,${t})?${o}CONNECT):`},{match:/getSortedRoles.+?\.filter\(\i=>(?=!)/,replace:e=>`${e}$self.isHiddenChannel(arguments[0]?.channel)?true:`},{match:/forceRoles:.+?.value\(\)(?<=channel:(\i).+?)/,replace:(e,t)=>`${e}.reduce(...$self.makeAllowedRolesReduce(${t}.guild_id))`},{match:/return\(0,\i\.jsxs?\)\(\i\.\i,{channelId:(\i)\.id(?=.+?(\(0,\i\.jsxs?\)\("div",{className:\i\.\i,children:\[.{0,100}\i\.length>0.+?\]}\)),)/,replace:(e,t,o)=>`if($self.isHiddenChannel(${t},true)){return${o};}${e}`},{match:/maxUsers:\d+?,users:\i(?<=channel:(\i).+?)/,replace:(e,t)=>`${e},shcChannel:${t}`},{match:/1!==\i\.length(?=\|\|)/,replace:"true"}]},{find:'="interactive-text-default",overflowCountClassName:',replacement:[{match:/let{users:\i,maxUsers:\i,/,replace:"let{shcChannel}=arguments[0];$&"},{match:/\i>0(?=&&!\i&&!\i)/,replace:e=>`($self.isHiddenChannel(typeof shcChannel!=="undefined"?shcChannel:void 0,true)?true:${e})`},{match:/(?<=`\+\$\{)\i(?=\})/,replace:e=>`$self.isHiddenChannel(typeof shcChannel!=="undefined"?shcChannel:void 0,true)&&(${e}-1)<=0?"":${e}`}]},{find:"#{intl::CHANNEL_CALL_CURRENT_SPEAKER}",replacement:[{match:/(?<=&&)\i\.push\(.{0,120}"chat-spacer"/,replace:"(arguments[0]?.inCall||!$self.isHiddenChannel(arguments[0]?.channel,true))&&$&"}]},{find:"#{intl::EMBEDDED_ACTIVITIES_DEVELOPER_ACTIVITY_SHELF_FETCH_ERROR}",replacement:[{match:/renderContent\(\i\){.+?this\.renderVoiceChannelEffects.+?children:/,replace:"$&!this.props.inCall&&$self.isHiddenChannel(this.props.channel,true)?$self.HiddenChannelLockScreen(this.props.channel):"},{match:/renderContent\(\i\){.+?disableGradients:/,replace:"$&!this.props.inCall&&$self.isHiddenChannel(this.props.channel,true)||"},{match:/(?:{|,)render(?!Header|ExternalHeader).{0,30}?:/g,replace:"$&!this.props.inCall&&$self.isHiddenChannel(this.props.channel,true)?()=>null:"},{match:/(?=\i\|\|\i!==\i\.\i\.FULL_SCREEN.{0,100}?this\._callContainerRef)/,replace:'$&!this.props.inCall&&$self.isHiddenChannel(this.props.channel,true)?"":'}]},{find:'"HasBeenInStageChannel"',replacement:[{match:/screenMessage:(\i)\?.+?children:(?=!\1)(?<=let \i,{channel:(\i).+?)/,replace:(e,t,o)=>`${e}$self.isHiddenChannel(${o})?$self.HiddenChannelLockScreen(${o}):`},{match:/render(?:BottomLeft|BottomCenter|BottomRight|ChatToasts):\(\)=>(?<=let \i,{channel:(\i).+?)/g,replace:(e,t)=>`${e}$self.isHiddenChannel(${t})?null:`},{match:/"124px".+?disableGradients:(?<=let \i,{channel:(\i).+?)/,replace:(e,t)=>`${e}$self.isHiddenChannel(${t})||`},{match:/"124px".+?style:(?<=let \i,{channel:(\i).+?)/,replace:(e,t)=>`${e}$self.isHiddenChannel(${t})?void 0:`}]},{find:"#{intl::STAGE_FULL_MODERATOR_TITLE}",replacement:[{match:/\(0,\i\.jsx\)\(\i\.\i\.Divider.+?}\)]}\)(?=.+?:(\i)\.guild_id)/,replace:(e,t)=>`$self.isHiddenChannel(${t})?null:(${e})`},{match:/(?<="participants-list-button"\),!\i&&)\(0,\i\.jsxs?\).{0,280}?iconClassName:/,replace:"!$self.isHiddenChannel(arguments[0]?.channel,true)&&$&"}]},{find:",queryStaticRouteChannels(",replacement:[{match:/(?<=queryChannels\(\i\){.+?getChannels\(\i)(?=\))/,replace:",true"},{match:/(?<=queryChannels\(\i\){.+?\)\((\i)\.type\))(?=&&!\i\.\i\.can\()/,replace:"&&!$self.isHiddenChannel($1)"}]},{find:'"^/guild-stages/(\\\\d+)(?:/)?(\\\\d+)?"',replacement:{match:/\i\.\i\.can\(\i\.\i\.VIEW_CHANNEL,\i\)/,replace:"true"}},{find:'className:"channelMention",children:',replacement:{match:/(?<=getChannel\(\i\);null!=(\i))(?=.{0,100}?selectVoiceChannel)/,replace:(e,t)=>`&&!$self.isHiddenChannel(${t})`}},{find:'"GuildChannelStore"',replacement:[{match:/isChannelGated\(.+?\)(?=&&)/,replace:e=>`${e}&&false`},{match:/(?<=getChannels\(\i)(\){.*?)return (.+?)}/,replace:(e,t,o)=>`,shouldIncludeHidden${t}return $self.resolveGuildChannels(${o},shouldIncludeHidden??arguments[0]==="@favorites");}`}]},{find:"GuildTooltip - ",replacement:{match:/(?<=getChannels\(\i)(?=\))/,replace:",true"}},{find:'"NowPlayingViewStore"',replacement:{match:/(getVoiceStateForUser.{0,150}?)&&\i\.\i\.canWithPartialContext.{0,20}VIEW_CHANNEL.+?}\)(?=\?)/,replace:"$1"}}],swapViewChannelWithConnectPermission(e,t){return Kt.can(Nt.CONNECT,t)||(e&=~Nt.VIEW_CHANNEL,e|=Nt.CONNECT),e},isHiddenChannel(e,t=!1){try{return e==null||Object.hasOwn(e,"channelId")&&e.channelId==null||(e.channelId!=null&&(e=ne.getChannel(e.channelId)),e==null||e.isDM()||e.isGroupDM()||e.isMultiUserDM())||["browse","customize","guide"].includes(e.id)?!1:!Kt.can(Nt.VIEW_CHANNEL,e)||t&&!Kt.can(Nt.CONNECT,e)}catch(o){return console.error("[ViewHiddenChannels#isHiddenChannel]: ",o),!1}},resolveGuildChannels(e,t){if(t)return e;let o={};for(let[n,i]of Object.entries(e)){if(!Array.isArray(i)){o[n]=i;continue}o[n]??=[];for(let s of i)(Mtt(s)||s.channel.id===null||!this.isHiddenChannel(s.channel))&&o[n].push(s)}return o},makeAllowedRolesReduce(e){return[(t,o,n,i)=>{if(n!==0)return t;let s=i.find(a=>a.id===e);return s?[s]:i},[]]},HiddenChannelLockScreen:e=>r(V1e,{channel:e}),LockIcon:ee.wrap(()=>r("svg",{className:Sa("channel-list-icon"),height:"18",width:"20",viewBox:"0 0 24 24","aria-hidden":!0,role:"img"},r("path",{fill:"currentcolor",fillRule:"evenodd",d:"M17 11V7C17 4.243 14.756 2 12 2C9.242 2 7 4.243 7 7V11C5.897 11 5 11.896 5 13V20C5 21.103 5.897 22 7 22H17C18.103 22 19 21.103 19 20V13C19 11.896 18.103 11 17 11ZM12 18C11.172 18 10.5 17.328 10.5 16.5C10.5 15.672 11.172 15 12 15C12.828 15 13.5 15.672 13.5 16.5C13.5 17.328 12.828 18 12 18ZM15 11H9V7C9 5.346 10.346 4 12 4C13.654 4 15 5.346 15 7V11Z"})),{noop:!0}),EyeRightIcon:ee.wrap(()=>r(Ue,{text:"Hidden Channel"},({onMouseLeave:e,onMouseEnter:t})=>r("svg",{onMouseLeave:e,onMouseEnter:t,className:me(Sa("channel-list-icon"),Sa("hidden-channel-icon")),width:"24",height:"24",viewBox:"0 0 24 24","aria-hidden":!0,role:"img"},r("path",{fill:"currentcolor",fillRule:"evenodd",d:"m19.8 22.6-4.2-4.15q-.875.275-1.762.413Q12.95 19 12 19q-3.775 0-6.725-2.087Q2.325 14.825 1 11.5q.525-1.325 1.325-2.463Q3.125 7.9 4.15 7L1.4 4.2l1.4-1.4 18.4 18.4ZM12 16q.275 0 .512-.025.238-.025.513-.1l-5.4-5.4q-.075.275-.1.513-.025.237-.025.512 0 1.875 1.312 3.188Q10.125 16 12 16Zm7.3.45-3.175-3.15q.175-.425.275-.862.1-.438.1-.938 0-1.875-1.312-3.188Q13.875 7 12 7q-.5 0-.938.1-.437.1-.862.3L7.65 4.85q1.025-.425 2.1-.638Q10.825 4 12 4q3.775 0 6.725 2.087Q21.675 8.175 23 11.5q-.575 1.475-1.512 2.738Q20.55 15.5 19.3 16.45Zm-4.625-4.6-3-3q.7-.125 1.288.112.587.238 1.012.688.425.45.613 1.038.187.587.087 1.162Z"}))),{noop:!0}),LockRightIcon:ee.wrap(()=>r(Ue,{text:"Hidden Channel"},({onMouseLeave:e,onMouseEnter:t})=>r("svg",{onMouseLeave:e,onMouseEnter:t,className:Sa("channel-list-icon")+" shc-hidden-channel-icon",width:"24",height:"24",viewBox:"0 0 24 24","aria-hidden":!0,role:"img"},r("path",{fill:"currentcolor",className:"shc-evenodd-fill-current-color",d:"M17 11V7C17 4.243 14.756 2 12 2C9.242 2 7 4.243 7 7V11C5.897 11 5 11.896 5 13V20C5 21.103 5.897 22 7 22H17C18.103 22 19 21.103 19 20V13C19 11.896 18.103 11 17 11ZM12 18C11.172 18 10.5 17.328 10.5 16.5C10.5 15.672 11.172 15 12 15C12.828 15 13.5 15.672 13.5 16.5C13.5 17.328 12.828 18 12 18ZM15 11H9V7C9 5.346 10.346 4 12 4C13.654 4 15 5.346 15 7V11Z"}))),{noop:!0})})});var VW,Bv,_I,tbe=x(()=>{"use strict";d();Q();H();At();$();VW=e=>({type:3,description:e,default:!0,restartNeeded:!0}),Bv=R({showTimeouts:VW("Show member timeout icons in chat."),showInvitesPaused:VW("Show the invites paused tooltip in the server list."),showModView:VW("Show the member mod view context menu item in all servers.")}),_I=k({name:"ShowHiddenThings",tags:["ShowTimeouts","ShowInvitesPaused","ShowModView","DisableDiscoveryFilters"],description:"Displays various hidden & moderator-only things regardless of permissions.",authors:[w.Dolfies],settings:Bv,patches:[{find:"showCommunicationDisabledStyles",predicate:()=>Bv.store.showTimeouts,replacement:{match:/&&\i\.\i\.canManageUser\(\i\.\i\.MODERATE_MEMBERS,\i\.author,\i\)/,replace:""}},{find:"INVITES_DISABLED)||",predicate:()=>Bv.store.showInvitesPaused,replacement:{match:/\i\.\i\.can\(\i\.\i.MANAGE_GUILD,\i\)/,replace:"true"}},{find:/,checkElevated:!1}\),\i\.\i\)}(?<=getCurrentUser\(\);return.+?)/,predicate:()=>Bv.store.showModView,replacement:{match:/return \i\.\i\(\i\.\i\(\{user:\i,context:\i,checkElevated:!1\}\),\i\.\i\)/,replace:"return true"}},{find:"#{intl::GUILD_MEMBER_MOD_VIEW_HIGHEST_ROLE}),children:",predicate:()=>Bv.store.showModView,replacement:{match:/(#{intl::GUILD_MEMBER_MOD_VIEW_HIGHEST_ROLE}.{0,80})role:\i(?<=\[\i\.roles,\i\.highestRoleId,(\i)\].+?)/,replace:(e,t,o)=>`${t}role:$self.getHighestRole(arguments[0],${o})`}},{find:'action:"PRESS_MOD_VIEW",icon:',predicate:()=>Bv.store.showModView,replacement:{match:/\i(?=\?null)/,replace:"false"}}],getHighestRole({member:e},t){try{return t.find(o=>o.id===e.highestRoleId)}catch(o){new ke("ShowHiddenThings").error("Failed to find highest role",o);return}}})});var obe=x(()=>{});function rbe(e,t){let o=ne.getChannel(e.channel_id)?.guild_id;if(!o)return null;let n=Lt.getMember(o,e.author.id);if(!n?.communicationDisabledUntil)return null;let i=()=>r(Btt,{deadline:new Date(n.communicationDisabledUntil),showUnits:!0,stopAtOneSec:!0});return St("GUILD_ENABLE_COMMUNICATION_TIME_REMAINING",{username:e.author.username,countdown:i}),t?i():St("GUILD_ENABLE_COMMUNICATION_TIME_REMAINING",{username:e.author.username,countdown:i})}var Ntt,Btt,nbe,RI,ibe=x(()=>{"use strict";d();obe();Q();Et();tt();du();H();mt();ad();$();fe();B();Ntt=Ti(/#{intl::MAX_AGE_NEVER}/),Btt=m1(e=>e.prototype?.render&&Ntt.test(e.prototype.render.toString())),nbe=R({displayStyle:{description:"How to display the timeout duration",type:4,options:[{label:"In the Tooltip",value:"tooltip"},{label:"Next to the timeout icon",value:"ssalggnikool",default:!0}]}});RI=k({name:"ShowTimeoutDuration",description:"Shows how much longer a user's timeout will last, either in the timeout icon tooltip or next to it",authors:[w.Ven,w.Sqaaakoi],settings:nbe,patches:[{find:"#{intl::GUILD_COMMUNICATION_DISABLED_ICON_TOOLTIP_BODY}",replacement:[{match:/\i\.\i,{(text:.{0,30}#{intl::GUILD_COMMUNICATION_DISABLED_ICON_TOOLTIP_BODY}\))/,replace:"$self.TooltipWrapper,{message:arguments[0].message,$1"}]}],TooltipWrapper:ee.wrap(({message:e,children:t,text:o})=>nbe.store.displayStyle==="tooltip"?r(ii,{text:rbe(e,!1)},t):r("div",{className:"vc-std-wrapper"},r(ii,{text:o},t),r(Y,{size:"md",color:"text-danger"},rbe(e,!0)," timeout remaining")),{noop:!0})})});function Ptt(){return r(eK,null,r("mask",{id:"vc-silent-msg-mask"},r("path",{fill:"#fff",d:"M0 0h24v24H0Z"}),r("path",{stroke:"#000",strokeWidth:"5.99068",d:"M0 24 24 0"})),r("path",{fill:"var(--status-danger)",d:"m21.178 1.70703 1.414 1.414L4.12103 21.593l-1.414-1.415L21.178 1.70703Z"}))}var Pv,LI,eK,_tt,OI,tK=x(()=>{"use strict";d();ma();vu();Q();H();$();B();Pv=!1,LI=R({persistState:{type:4,description:"How to persist the silent message toggle state",options:[{label:"Don't persist (reset on channel change)",value:"none",default:!0},{label:"Persist between channels",value:"channels"},{label:"Persist between channels and restarts",value:"restarts"}],onChange(e){Pv=e!=="none"&&Pv}},autoDisable:{type:3,description:"Automatically disable the silent message toggle again after sending one",default:!0}});eK=({height:e=20,width:t=20,className:o,children:n})=>r("svg",{width:t,height:e,viewBox:"0 0 24 24",className:o,style:{scale:"1.2"}},r("path",{fill:"currentColor",mask:"url(#vc-silent-msg-mask)",d:"M18 10.7101C15.1085 9.84957 13 7.17102 13 4c0-.30736.0198-.6101.0582-.907C12.7147 3.03189 12.3611 3 12 3 8.686 3 6 5.686 6 9v5c0 1.657-1.344 3-3 3v1h18v-1c-1.656 0-3-1.343-3-3v-3.2899ZM8.55493 19c.693 1.19 1.96897 2 3.44497 2s2.752-.81 3.445-2H8.55493ZM18.2624 5.50209 21 2.5V1h-4.9651v1.49791h2.4411L16 5.61088V7h5V5.50209h-2.7376Z"}),n),_tt=({isMainChat:e})=>{let[t,o]=L(LI.store.persistState==="restarts"||Pv);function n(i){LI.store.persistState!=="none"&&(Pv=i),o(i)}return se(()=>{let i=(s,a)=>{t&&(LI.store.autoDisable&&n(!1),a.content.startsWith("@silent ")||(a.content="@silent "+a.content))};return qi(i),()=>void ji(i)},[t]),e?r(Lr,{tooltip:t?"Disable Silent Message":"Enable Silent Message",onClick:()=>n(!t)},t?r(eK,null):r(Ptt,null)):null},OI=k({name:"SilentMessageToggle",authors:[w.Nuckyz,w.CatNoir,j.Z1xus],description:"Adds a button to the chat bar to toggle sending a silent message.",settings:LI,chatBarButton:{icon:eK,render:_tt}})});function sbe(){pn.store.enabledGlobally=!pn.store.enabledGlobally}function oK(e,t,o){t.includes(e)?t.splice(t.indexOf(e),1):t.push(e),o?pn.store.disabledLocations=t.join(", "):pn.store.enabledLocations=t.join(", ")}function Ltt(){return r("svg",{width:"20",height:"20",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",style:{scale:"1.2"}},r("path",{fill:"currentColor",d:"M18.333 15.556H1.667a1.667 1.667 0 0 1 -1.667 -1.667v-10a1.667 1.667 0 0 1 1.667 -1.667h16.667a1.667 1.667 0 0 1 1.667 1.667v10a1.667 1.667 0 0 1 -1.667 1.667M4.444 6.25V4.861a0.417 0.417 0 0 0 -0.417 -0.417H2.639a0.417 0.417 0 0 0 -0.417 0.417V6.25a0.417 0.417 0 0 0 0.417 0.417h1.389a0.417 0.417 0 0 0 0.417 -0.417m3.333 0V4.861a0.417 0.417 0 0 0 -0.417 -0.417H5.973a0.417 0.417 0 0 0 -0.417 0.417V6.25a0.417 0.417 0 0 0 0.417 0.417h1.389a0.417 0.417 0 0 0 0.417 -0.417m3.333 0V4.861a0.417 0.417 0 0 0 -0.417 -0.417h-1.389a0.417 0.417 0 0 0 -0.417 0.417V6.25a0.417 0.417 0 0 0 0.417 0.417h1.389a0.417 0.417 0 0 0 0.417 -0.417m3.333 0V4.861a0.417 0.417 0 0 0 -0.417 -0.417h-1.389a0.417 0.417 0 0 0 -0.417 0.417V6.25a0.417 0.417 0 0 0 0.417 0.417h1.389a0.417 0.417 0 0 0 0.417 -0.417m3.333 0V4.861a0.417 0.417 0 0 0 -0.417 -0.417h-1.389a0.417 0.417 0 0 0 -0.417 0.417V6.25a0.417 0.417 0 0 0 0.417 0.417h1.389a0.417 0.417 0 0 0 0.417 -0.417m-11.667 3.333V8.194a0.417 0.417 0 0 0 -0.417 -0.417H4.306a0.417 0.417 0 0 0 -0.417 0.417V9.583a0.417 0.417 0 0 0 0.417 0.417h1.389a0.417 0.417 0 0 0 0.417 -0.417m3.333 0V8.194a0.417 0.417 0 0 0 -0.417 -0.417H7.639a0.417 0.417 0 0 0 -0.417 0.417V9.583a0.417 0.417 0 0 0 0.417 0.417h1.389a0.417 0.417 0 0 0 0.417 -0.417m3.333 0V8.194a0.417 0.417 0 0 0 -0.417 -0.417h-1.389a0.417 0.417 0 0 0 -0.417 0.417V9.583a0.417 0.417 0 0 0 0.417 0.417h1.389a0.417 0.417 0 0 0 0.417 -0.417m3.333 0V8.194a0.417 0.417 0 0 0 -0.417 -0.417h-1.389a0.417 0.417 0 0 0 -0.417 0.417V9.583a0.417 0.417 0 0 0 0.417 0.417h1.389a0.417 0.417 0 0 0 0.417 -0.417m-11.667 3.333v-1.389a0.417 0.417 0 0 0 -0.417 -0.417H2.639a0.417 0.417 0 0 0 -0.417 0.417V12.917a0.417 0.417 0 0 0 0.417 0.417h1.389a0.417 0.417 0 0 0 0.417 -0.417m10 0v-1.389a0.417 0.417 0 0 0 -0.417 -0.417H5.973a0.417 0.417 0 0 0 -0.417 0.417V12.917a0.417 0.417 0 0 0 0.417 0.417h8.056a0.417 0.417 0 0 0 0.417 -0.417m3.333 0v-1.389a0.417 0.417 0 0 0 -0.417 -0.417h-1.389a0.417 0.417 0 0 0 -0.417 0.417V12.917a0.417 0.417 0 0 0 0.417 0.417h1.389a0.417 0.417 0 0 0 0.417 -0.417",transform:"translate(2, 3)"}))}function nK(){return pn.store.defaultHidden?pn.store.disabledLocations?pn.store.disabledLocations.split(",").map(e=>e.trim()).filter(Boolean):(pn.store.disabledLocations="",[]):pn.store.enabledLocations?pn.store.enabledLocations.split(",").map(e=>e.trim()).filter(Boolean):(pn.store.enabledLocations="",[])}function abe(e){if(!pn.store.enabledGlobally)return!1;let t=typeof e=="string"?e:e.id,o=typeof e=="string"?ne.getChannel(t)?.guild_id:e.guild_id,n=nK();return pn.store.defaultHidden?!n.includes(o)&&!n.includes(t):n.includes(o)||n.includes(t)}function Ftt(){let{hideChatBoxTypingIndicators:e}=pn.use(["hideChatBoxTypingIndicators"]);return e}function Utt(){let{hideMembersListTypingIndicators:e}=pn.use(["hideMembersListTypingIndicators"]);return e}var pn,Rtt,Ott,FI,lbe=x(()=>{"use strict";d();ma();yi();Un();Wo();Q();Ad();H();$();B();pn=R({enabledGlobally:{type:3,description:"Toggle functionality of your own typing indicator globally.",default:!0},hideChatBoxTypingIndicators:{type:3,description:"Hide other users' typing indicators from above the chat bar.",default:!1},hideMembersListTypingIndicators:{type:3,description:"Hide other users' typing indicators from the members list.",default:!1},chatIcon:{type:3,description:"Show an icon in the chat bar for modifying the plugin on the go.",default:!0},chatIconLeftClickAction:{type:4,description:"What to do when left clicking the chat icon.",options:[{label:"Toggle Typing Globally",value:"global"},{label:"Toggle Typing in Channel",value:"channel",default:!0},{label:"Toggle Typing in Guild",value:"guild"},{label:"Open Plugin Settings",value:"settings"}]},chatIconMiddleClickAction:{type:4,description:"What to do when middle clicking the chat icon.",options:[{label:"Toggle Typing Globally",value:"global"},{label:"Toggle Typing in Channel",value:"channel"},{label:"Toggle Typing in Guild",value:"guild"},{label:"Open Plugin Settings",value:"settings",default:!0}]},chatIconRightClickAction:{type:4,description:"What to do when right clicking the chat icon.",options:[{label:"Toggle Typing Globally",value:"global",default:!0},{label:"Toggle Typing in Channel",value:"channel"},{label:"Toggle Typing in Guild",value:"guild"},{label:"Open Plugin Settings",value:"settings"}]},chatContextMenu:{type:3,description:"Show a dropdown in the chat context menu to modify plugin settings on the go.",default:!0},defaultHidden:{type:3,description:'If enabled, the plugin will hide your typing from others in any DMs/channels/guilds not listed in "Disabled Locations" below. If disabled, the plugin will show your typing to others for any DMs/channels/guilds not listed in "Enabled Locations" below.',default:!0},enabledLocations:{type:0,description:'Enable functionality for these IDs. Accepts a comma separated list of DM IDs, channel IDs, and guild IDs. Only used if "Default Hidden" is disabled.',default:""},disabledLocations:{type:0,description:'Disable functionality for these IDs. Accepts a comma separated list of DM IDs, channel IDs, and guild IDs. Only used if "Default Hidden" is enabled.',default:""}});Rtt=({channel:e,type:t})=>{let{enabledGlobally:o,chatIcon:n,defaultHidden:i,enabledLocations:s,disabledLocations:a,chatIconLeftClickAction:l,chatIconMiddleClickAction:c,chatIconRightClickAction:u}=pn.use(["enabledGlobally","chatIcon","defaultHidden","enabledLocations","disabledLocations","chatIconLeftClickAction","chatIconMiddleClickAction","chatIconRightClickAction"]);if(!["normal","sidebar"].some(E=>t.analyticsName===E)||!n)return null;let m=nK(),g=o&&abe(e),y=e.guild_id&&m.includes(e.guild_id)?"Guild":m.includes(e.id)?"Channel":"Global",b=o?g?`Typing Hidden (${y})`:`Typing Visible (${y})`:"Typing Visible (Global)";function v(E){switch(E){case"global":sbe();break;case"channel":oK(e.id,m,i);break;case"guild":e.guild_id&&oK(e.guild_id,m,i);break;case"settings":Rs(pt.SilentTyping);break}}return r(Lr,{tooltip:b,onClick:E=>{E.button===0&&v(pn.store.chatIconLeftClickAction)},onAuxClick:E=>{E.button===1&&v(pn.store.chatIconMiddleClickAction)},onContextMenu:E=>{E.button===2&&v(pn.store.chatIconRightClickAction)}},r("svg",{width:"20",height:"20",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",style:{scale:"1.2"}},r("path",{fill:"currentColor",mask:`url(#silent-typing-msg-mask-${e.id})`,d:"M18.333 15.556H1.667a1.667 1.667 0 0 1 -1.667 -1.667v-10a1.667 1.667 0 0 1 1.667 -1.667h16.667a1.667 1.667 0 0 1 1.667 1.667v10a1.667 1.667 0 0 1 -1.667 1.667M4.444 6.25V4.861a0.417 0.417 0 0 0 -0.417 -0.417H2.639a0.417 0.417 0 0 0 -0.417 0.417V6.25a0.417 0.417 0 0 0 0.417 0.417h1.389a0.417 0.417 0 0 0 0.417 -0.417m3.333 0V4.861a0.417 0.417 0 0 0 -0.417 -0.417H5.973a0.417 0.417 0 0 0 -0.417 0.417V6.25a0.417 0.417 0 0 0 0.417 0.417h1.389a0.417 0.417 0 0 0 0.417 -0.417m3.333 0V4.861a0.417 0.417 0 0 0 -0.417 -0.417h-1.389a0.417 0.417 0 0 0 -0.417 0.417V6.25a0.417 0.417 0 0 0 0.417 0.417h1.389a0.417 0.417 0 0 0 0.417 -0.417m3.333 0V4.861a0.417 0.417 0 0 0 -0.417 -0.417h-1.389a0.417 0.417 0 0 0 -0.417 0.417V6.25a0.417 0.417 0 0 0 0.417 0.417h1.389a0.417 0.417 0 0 0 0.417 -0.417m3.333 0V4.861a0.417 0.417 0 0 0 -0.417 -0.417h-1.389a0.417 0.417 0 0 0 -0.417 0.417V6.25a0.417 0.417 0 0 0 0.417 0.417h1.389a0.417 0.417 0 0 0 0.417 -0.417m-11.667 3.333V8.194a0.417 0.417 0 0 0 -0.417 -0.417H4.306a0.417 0.417 0 0 0 -0.417 0.417V9.583a0.417 0.417 0 0 0 0.417 0.417h1.389a0.417 0.417 0 0 0 0.417 -0.417m3.333 0V8.194a0.417 0.417 0 0 0 -0.417 -0.417H7.639a0.417 0.417 0 0 0 -0.417 0.417V9.583a0.417 0.417 0 0 0 0.417 0.417h1.389a0.417 0.417 0 0 0 0.417 -0.417m3.333 0V8.194a0.417 0.417 0 0 0 -0.417 -0.417h-1.389a0.417 0.417 0 0 0 -0.417 0.417V9.583a0.417 0.417 0 0 0 0.417 0.417h1.389a0.417 0.417 0 0 0 0.417 -0.417m3.333 0V8.194a0.417 0.417 0 0 0 -0.417 -0.417h-1.389a0.417 0.417 0 0 0 -0.417 0.417V9.583a0.417 0.417 0 0 0 0.417 0.417h1.389a0.417 0.417 0 0 0 0.417 -0.417m-11.667 3.333v-1.389a0.417 0.417 0 0 0 -0.417 -0.417H2.639a0.417 0.417 0 0 0 -0.417 0.417V12.917a0.417 0.417 0 0 0 0.417 0.417h1.389a0.417 0.417 0 0 0 0.417 -0.417m10 0v-1.389a0.417 0.417 0 0 0 -0.417 -0.417H5.973a0.417 0.417 0 0 0 -0.417 0.417V12.917a0.417 0.417 0 0 0 0.417 0.417h8.056a0.417 0.417 0 0 0 0.417 -0.417m3.333 0v-1.389a0.417 0.417 0 0 0 -0.417 -0.417h-1.389a0.417 0.417 0 0 0 -0.417 0.417V12.917a0.417 0.417 0 0 0 0.417 0.417h1.389a0.417 0.417 0 0 0 0.417 -0.417",transform:"translate(2, 3)"}),g&&r(f,null,r("mask",{id:`silent-typing-msg-mask-${e.id}`},r("path",{fill:"#fff",d:"M0 0h24v24H0Z"}),r("path",{stroke:"#000",strokeWidth:"5.99068",d:"M0 24 24 0",transform:"translate(-2, -3)"})),r("path",{fill:"var(--status-danger)",d:"m21.178 1.70703 1.414 1.414L4.12103 21.593l-1.414-1.415L21.178 1.70703Z"}))))};Ott=e=>{let{chatIcon:t,chatContextMenu:o,enabledGlobally:n,defaultHidden:i,hideChatBoxTypingIndicators:s,hideMembersListTypingIndicators:a}=pn.use(["chatIcon","chatContextMenu","enabledGlobally","defaultHidden","hideChatBoxTypingIndicators","hideMembersListTypingIndicators"]);if(!o)return;let l=Qt("submit-button",e);if(!l)return;let c=l.findIndex(u=>u?.props?.id==="submit-button");l.splice(c>=0?c:0,0,r(M.MenuItem,{id:"vc-silent-typing",label:"Silent Typing"},r(M.MenuCheckboxItem,{id:"vc-silent-typing-enabled",label:"Enabled",checked:n,action:()=>pn.store.enabledGlobally=!pn.store.enabledGlobally}),r(M.MenuCheckboxItem,{id:"vc-silent-typing-chat-bar-indicators",label:"Chat Bar Indicators",checked:pn.store.hideChatBoxTypingIndicators,action:()=>pn.store.hideChatBoxTypingIndicators=!pn.store.hideChatBoxTypingIndicators}),r(M.MenuCheckboxItem,{id:"vc-silent-typing-members-list-indicators",label:"Members List Indicators",checked:pn.store.hideMembersListTypingIndicators,action:()=>pn.store.hideMembersListTypingIndicators=!pn.store.hideMembersListTypingIndicators}),r(M.MenuCheckboxItem,{id:"vc-silent-typing-chat-icon",label:"Chat Icon",checked:t,action:()=>pn.store.chatIcon=!pn.store.chatIcon}),r(M.MenuCheckboxItem,{id:"vc-silent-typing-default",label:"Default Hidden",checked:i,action:()=>pn.store.defaultHidden=!pn.store.defaultHidden})))};FI=k({name:"SilentTyping",authors:[w.Ven,w.Rini,w.ImBanana,j.Etorix],description:"Hide your typing indicator from chat.",isModified:!0,settings:pn,shouldHideChatBarTypingIndicators:Ftt,shouldHideMembersListTypingIndicators:Utt,contextMenus:{"textarea-context":Ott},chatBarButton:{icon:Ltt,render:Rtt},patches:[{find:'.dispatch({type:"TYPING_START_LOCAL"',replacement:{match:/startTyping\(\i\){.+?},stop/,replace:"startTyping:$self.startTyping,stop"}},{find:"activityInviteEducationActivity:",group:!0,replacement:[{match:/(let{activityInviteEducationActivity)/,replace:"const silentTypingShouldHideChatBarTypingIndicators=$self.shouldHideChatBarTypingIndicators();$1"},{match:/("stop-animation".{0,80}?ref:\i,children:)/,replace:"$1silentTypingShouldHideChatBarTypingIndicators?[]:"}]},{find:",{avatarCutoutX",replacement:{match:/isTyping:(\i)=!1(,typingIndicatorRef:\i,isSpeaking:)/,replace:"silentTypingIsTyping:$1=$self.shouldHideMembersListTypingIndicators()?false:(arguments[0].isTyping??false)$2"}}],commands:[{name:"silent-typing",description:"Hide your typing indicator from chat.",inputType:0,options:[{name:"toggle",description:"Toggle functionality globally, for the channel, or for the guild.",required:!1,type:3,choices:[{name:"Global",label:"Global",value:"global"},{name:"Channel",label:"Channel",value:"channel"},{name:"Guild",label:"Guild",value:"guild"}]},{name:"chat-bar-indicators",description:"Hide other users' typing indicators from above the chat bar.",required:!1,type:5},{name:"members-list-indicators",description:"Hide other users' typing indicators from the members list.",required:!1,type:5},{name:"chat-icon",description:"Show an icon in the chat bar for toggling the plugin on the go.",required:!1,type:5},{name:"chat-context-menu",description:"Show a dropdown in the chat context menu to toggle plugin settings on the go.",required:!1,type:5},{name:"default-hidden",description:"Whether to hide typing in DMs/channels/guilds by default or not.",required:!1,type:5}],execute:async(e,t)=>{let o=!1,n=Pt(e,"toggle");if(typeof n=="string")if(o=!0,n==="global")sbe();else{let l=n==="guild"?t.channel.guild_id:t.channel.id;oK(l,nK(),pn.store.defaultHidden)}let i=Pt(e,"chat-icon");typeof i=="boolean"&&(o=!0,pn.store.chatIcon=!!i);let s=Pt(e,"chat-context-menu");typeof s=="boolean"&&(o=!0,pn.store.chatContextMenu=!!s);let a=Pt(e,"default-hidden");typeof a=="boolean"&&(o=!0,pn.store.defaultHidden=!!a),Vt(t.channel.id,{content:o?"Silent typing settings updated.":"No changes made to silent typing settings."})}}],async startTyping(e){abe(e)||V.dispatch({type:"TYPING_START_LOCAL",channelId:e})}})});var cbe=x(()=>{});function iK(e){return new Date(Tt.getSince(e.id))}var $tt,rK,sK,UI,ube=x(()=>{"use strict";d();cbe();Q();Et();tt();eo();du();H();nt();$();B();$tt=new Intl.DateTimeFormat(void 0,{month:"numeric",day:"numeric",year:"numeric"}),rK=de("vc-sortFriends-");sK=R({showDates:{type:3,description:"Show dates on friend requests",default:!1,restartNeeded:!0}});jn("SortFriends","SortFriendRequests");UI=k({name:"SortFriends",authors:[w.Megu,j.CallMeGii],description:"Sorts friend requests by date of receipt",isModified:!0,settings:sK,patches:[{find:"getRelationshipCounts(){",replacement:{match:/\}\)\.sortBy\((.+?)\)\.value\(\)/,replace:"}).sortBy(row => $self.wrapSort(($1), row)).value()"}},{find:"peopleListItemRef",replacement:{predicate:()=>sK.store.showDates,match:/(?<=children:.*user:(\i),.*subText:).+?(?=,hovered:\i,showAccountIdentifier)/,replace:"$self.makeSubtext($1, $&)"}},{find:"#{intl::FRIEND_REQUEST_CANCEL}",replacement:{predicate:()=>sK.store.showDates,match:/(?<=children:\[)\(0,.{0,100}user:\i,hovered:\i.+?(?=,\(0)(?<=user:(\i).+?)/,replace:(e,t)=>`$self.WrapperDateComponent({user:${t},children:${e}})`}}],wrapSort(e,t){return t.type===3||t.type===4?-iK(t.user):e(t)},makeSubtext(e,t){let o=iK(e);return isNaN(o.getTime())?null:r(Be,{flexDirection:"column",style:{gap:"0px",flexWrap:"wrap",lineHeight:"0.9rem"}},r("span",null,t),r("span",null,r("div",{className:"",style:{display:"flex",alignItems:"center"}},r("svg",{"aria-hidden":"true",role:"img",xmlns:"http://www.w3.org/2000/svg",width:"8",height:"8",fill:"none",viewBox:"0 0 24 24",style:{marginRight:"4px",display:"inline-block"}},r("path",{fill:"var(--input-placeholder-text)",fillRule:"evenodd",d:"M12 23a11 11 0 1 0 0-22 11 11 0 0 0 0 22Zm1-18a1 1 0 1 0-2 0v7c0 .27.1.52.3.7l3 3a1 1 0 0 0 1.4-1.4L13 11.58V5Z",clipRule:"evenodd"})),r("span",null,"Added \u2014 ",o.toDateString()))))},WrapperDateComponent:ee.wrap(({user:e,children:t})=>{let o=iK(e);return r("div",{className:rK("wrapper")},t,!isNaN(o.getTime())&&r(ii,{text:S0.dateFormat(o,"LLLL"),tooltipClassName:rK("tooltip")},r(Y,{size:"xs",className:rK("date")},$tt.format(o))))},{noop:!0})})});var aK,$I,dbe=x(()=>{"use strict";d();Q();H();$();aK=R({noSpotifyAutoPause:{description:"Disable Spotify auto-pause",type:3,default:!0,restartNeeded:!0},keepSpotifyActivityOnIdle:{description:"Keep Spotify activity playing when idling",type:3,default:!1,restartNeeded:!0}}),$I=k({name:"SpotifyCrack",description:"Free listen along, no auto-pausing in voice chat, and allows activity to continue playing when idling",authors:[w.Cyn,w.Nuckyz],settings:aK,patches:[{find:'dispatch({type:"SPOTIFY_PROFILE_UPDATE"',replacement:{match:/SPOTIFY_PROFILE_UPDATE.+?isPremium:(?="premium"===(\i)\.body\.product)/,replace:(e,t)=>`${e}(${t}.body.product="premium")&&`}},{find:"}getPlayableComputerDevices(){",replacement:[{predicate:()=>aK.store.noSpotifyAutoPause,match:/(?<=function \i\(\){)(?=.{0,200}SPOTIFY_AUTO_PAUSED\))/,replace:"return;"},{predicate:()=>aK.store.keepSpotifyActivityOnIdle,match:/(shouldShowActivity\(\){.{0,50})&&!\i\.\i\.isIdle\(\)/,replace:"$1"}]}]})});function lK(e,t){return{name:e,description:`Share your current Spotify ${e} in chat`,inputType:0,options:[$n],execute(o,{channel:n}){let i=Htt.getTrack();if(!i)return Vt(n.id,{content:"You're not listening to any music."});if(i.id==null)return Vt(n.id,{content:"Failed to find the track on spotify."});let s=t(i),a=Pt(o,"message");Na(n.id,{content:a?`${a} ${s}`:s},!1,Fn.getSendMessageOptionsForReply(ztt.getPendingReply(n.id))).then(()=>{V.dispatch({type:"DELETE_PENDING_REPLY",channelId:n.id})})}}}var Htt,ztt,HI,pbe=x(()=>{"use strict";d();yi();H();mt();$();fe();B();Htt=He("getPlayerState"),ztt=He("getPendingReply");HI=k({name:"SpotifyShareCommands",description:"Share your current Spotify track, album or artist via slash command (/track, /album, /artist)",authors:[w.katlyn],commands:[lK("track",e=>`https://open.spotify.com/track/${e.id}`),lK("album",e=>`https://open.spotify.com/album/${e.album.id}`),lK("artist",e=>e.artists[0].external_urls.spotify)]})});var mbe,fbe,zI,gbe,GI=x(()=>{"use strict";d();mbe=(e=!1)=>r("svg",{viewBox:"0 0 20 20",fill:e?"red":"currentColor","aria-hidden":"true",width:"18",height:"18",className:"vce-likes-icon"},r("path",{d:"M16.44 3.10156C14.63 3.10156 13.01 3.98156 12 5.33156C10.99 3.98156 9.37 3.10156 7.56 3.10156C4.49 3.10156 2 5.60156 2 8.69156C2 9.88156 2.19 10.9816 2.52 12.0016C4.1 17.0016 8.97 19.9916 11.38 20.8116C11.72 20.9316 12.28 20.9316 12.62 20.8116C15.03 19.9916 19.9 17.0016 21.48 12.0016C21.81 10.9816 22 9.88156 22 8.69156C22 5.60156 19.51 3.10156 16.44 3.10156Z"})),fbe=e=>r("svg",{"aria-hidden":"true",viewBox:"0 0 20 20",width:"20",height:"20",fill:"currentColor",...e},r("path",{d:"M2.75 14A1.75 1.75 0 0 1 1 12.25v-2.5a.75.75 0 0 1 1.5 0v2.5c0 .138.112.25.25.25h10.5a.25.25 0 0 0 .25-.25v-2.5a.75.75 0 0 1 1.5 0v2.5A1.75 1.75 0 0 1 13.25 14Z"}),r("path",{d:"M7.25 7.689V2a.75.75 0 0 1 1.5 0v5.689l1.97-1.969a.749.749 0 1 1 1.06 1.06l-3.25 3.25a.749.749 0 0 1-1.06 0L4.22 6.78a.749.749 0 1 1 1.06-1.06l1.97 1.969Z"})),zI=e=>r("svg",{"aria-hidden":"true",viewBox:"0 0 24 24",width:"20",height:"20",fill:"currentColor",...e},r("path",{fillRule:"evenodd",d:"M12 23a11 11 0 1 0 0-22 11 11 0 0 0 0 22Zm1-18a1 1 0 1 0-2 0v7c0 .27.1.52.3.7l3 3a1 1 0 0 0 1.4-1.4L13 11.58V5Z",clipRule:"evenodd"})),gbe=e=>r("svg",{"aria-hidden":"true",viewBox:"0 0 24 24",width:"20",height:"20",fill:"currentColor",...e},r("circle",{cx:"12",cy:"12",r:"10",fill:"transparent"}),r("path",{fillRule:"evenodd",d:"M12 23a11 11 0 1 0 0-22 11 11 0 0 0 0 22Zm1.44-15.94L13.06 14a1.06 1.06 0 0 1-2.12 0l-.38-6.94a1 1 0 0 1 1-1.06h.88a1 1 0 0 1 1 1.06Zm-.19 10.69a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0Z",clipRule:"evenodd"}))});function Gtt({emoji:e,prefix:t,log:o,delta:n,instance:i}){return r(X.Fragment,null,r("span",null,i.sinceStart.toFixed(3),"s"),r("span",null,i.sinceLast.toFixed(3),"s"),r("span",null,n?.toFixed(0)??""),r("span",null,r("pre",null,e," ",t??" ",o)))}function qtt({title:e,logs:t,traceEnd:o}){let n=t.find(a=>a.timestamp)?.timestamp??0,i=n,s=t.map(a=>{let l=a.timestamp??i,c=(l-n)/1e3,u=(l-i)/1e3;return i=l,{sinceStart:c,sinceLast:u}});return r("section",null,r(Jo,null,e),r("code",null,o&&r("div",{style:{color:"var(--text-strong)",marginBottom:5,userSelect:"text"}},"Trace ended at: ",new Date(o).toTimeString()),r("div",{style:{color:"var(--text-strong)",display:"grid",gridTemplateColumns:"repeat(3, auto) 1fr",gap:"2px 10px",userSelect:"text"}},r("span",null,"Start"),r("span",null,"Interval"),r("span",null,"Delta"),r("span",{style:{marginBottom:5}},"Event"),t4.logs.map((a,l)=>r(Gtt,{key:l,...a,instance:s[l]})))))}function jtt({trace:e}){let t=e.split(`
`);return r("section",null,r(so,null,"Server Trace"),r("code",null,r(Be,{flexDirection:"column",gap:"5px",style:{color:"var(--text-strong)",userSelect:"text"}},t.map((o,n)=>r("span",{key:n},o)))))}function Wtt(){if(!t4?.logs)return r("div",null,"Loading...");let e=t4.logGroups.find(t=>t.serverTrace)?.serverTrace;return r(X.Fragment,null,r(qtt,{title:"Startup Timings",logs:t4.logs,traceEnd:t4.endTime_}),r("div",{style:{marginTop:5}},"\xA0"),e&&r(jtt,{trace:e}))}var t4,cK,hbe=x(()=>{"use strict";d();tt();eo();ut();fe();B();t4=He("markWithDelta","markAndLog","markAt");cK=ee.wrap(Wtt)});var qI,xbe=x(()=>{"use strict";d();GI();Xm();H();$();hbe();qI=k({name:"StartupTimings",description:"Adds Startup Timings to the Settings menu",authors:[w.Megu],start(){let{customEntries:e,customSections:t}=vi;e.push({key:"equicord_startup_timings",title:"Startup Timings",Component:cK,Icon:zI}),t.push(()=>({section:"EquicordStartupTimings",label:"Startup Timings",searchableTitles:["Startup Timings"],element:cK,id:"EquicordStartupTimings"})),hs.push(["EquicordStartupTimings","equicord_startup_timings"])},stop(){let{customEntries:e,customSections:t}=vi,o=e.findIndex(s=>s.key==="equicord_startup_timings");o!==-1&&e.splice(o,1);let n=t.findIndex(s=>s({}).id==="EquicordStartupTimings");n!==-1&&t.splice(n,1);let i=hs.findIndex(s=>s[1]==="equicord_startup_timings");i!==-1&&e.splice(i,1)}})});var jI,ybe=x(()=>{"use strict";d();H();$();jI=k({name:"StickerPaste",description:"Makes picking a sticker in the sticker picker insert it into the chatbox instead of instantly sending",authors:[w.ImBanana],patches:[{find:".stickers,previewSticker:",replacement:{match:/if\(\i\.\i\.getUploadCount/,replace:"return true;$&"}}]})});function bbe({streamKey:e},t){e.endsWith(z.getCurrentUser().id)&&V.dispatch({type:"STREAMER_MODE_UPDATE",key:"enabled",value:t})}var WI,vbe=x(()=>{"use strict";d();H();$();B();WI=k({name:"StreamerModeOn",description:"Automatically enables streamer mode when you start streaming in Discord",authors:[w.Kodarru],flux:{STREAM_CREATE:e=>bbe(e,!0),STREAM_DELETE:e=>bbe(e,!1)}})});var KI,YI,Sbe=x(()=>{"use strict";d();Q();H();$();B();KI=R({superReactByDefault:{type:3,description:"Reaction picker will default to Super Reactions",default:!0},unlimitedSuperReactionPlaying:{type:3,description:"Remove the limit on Super Reactions playing at once",default:!1},superReactionPlayingLimit:{description:"Max Super Reactions to play at once. 0 to disable playing Super Reactions",type:5,default:20,markers:[0,5,10,20,40,60,80,100],stickToMarkers:!0}},{superReactionPlayingLimit:{disabled(){return this.store.unlimitedSuperReactionPlaying}}}),YI=k({name:"SuperReactionTweaks",description:"Customize the limit of Super Reactions playing at once, and super react by default",authors:[w.FieryFlames,w.ant0n],patches:[{find:",BURST_REACTION_EFFECT_PLAY",replacement:[{match:/(BURST_REACTION_EFFECT_PLAY:\i=>{.+?if\()(\(\(\i,\i\)=>.+?\(\i,\i\))>=5+?(?=\))/,replace:(e,t,o)=>`${t}!$self.shouldPlayBurstReaction(${o})`},{match:/((\i)=5.+?)if\((.{0,20}?)>=\2\)return;/,replace:(e,t,o)=>`${t}if(!$self.shouldPlayBurstReaction(${o}))return;`,noWarn:!0}]},{find:".EMOJI_PICKER_CONSTANTS_EMOJI_CONTAINER_PADDING_HORIZONTAL)",replacement:{match:/(openPopoutType:void 0(?=.+?isBurstReaction:(\i).+?(\i===\i\.\i.REACTION)).+?\[\2,\i\]=\i\.useState\().+?\)/,replace:(e,t,o,n)=>`${t}$self.shouldSuperReactByDefault&&${n})`}}],settings:KI,shouldPlayBurstReaction(e){return!!(KI.store.unlimitedSuperReactionPlaying||KI.store.superReactionPlayingLimit>e)},get shouldSuperReactByDefault(){return KI.store.superReactByDefault&&Ma.getState().premiumTypeActual!=null}})});function Abe(e){let t=e.match(/^(\/)?(.+?)(?:\/([gimsuyv]*))?$/);return t?new RegExp(t[2],t[3]?.split("").filter((o,n,i)=>i.indexOf(o)===n).join("")??"g"):new RegExp(e)}function Ktt(e){try{return Abe(e),null}catch(t){return r("span",{style:{color:"var(--text-feedback-critical)"}},String(t))}}function uK({initialValue:e,onChange:t,placeholder:o}){let[n,i]=L(e);return r(qe,{placeholder:o,value:n,onChange:i,spellCheck:!1,onBlur:()=>n!==e&&t(n)})}function kbe({title:e,rulesArray:t}){let o=e==="Using Regex";async function n(a){a!==t.length-1&&t.splice(a,1)}async function i(a,l,c){l===t.length-1&&t.push(Ebe()),t[l][c]=a,t[l].find===""&&t[l].replace===""&&t[l].onlyIfIncludes===""&&l!==t.length-1&&t.splice(l,1)}let s=[{label:"Apply to your messages (visible to everyone)",value:"myMessages"},{label:"Apply to others' messages (only visible to you)",value:"othersMessages"},{label:"Apply to all messages",value:"allMessages"}];return r(f,null,r(Vn,null,e),r(Be,{flexDirection:"column",style:{gap:"0.5em",paddingBottom:"1.25em"}},t.map((a,l)=>r(X.Fragment,{key:`${a.find}-${l}`},r(Be,{gap:"0.5em",flexDirection:"row",style:{flexGrow:1}},r(uK,{placeholder:"Find",initialValue:a.find,onChange:c=>i(c,l,"find")}),r(uK,{placeholder:"Replace",initialValue:a.replace,onChange:c=>i(c,l,"replace")}),r(uK,{placeholder:"Only if includes",initialValue:a.onlyIfIncludes,onChange:c=>i(c,l,"onlyIfIncludes")})),l!==t.length-1&&r(Be,{flexDirection:"row",style:{gap:"0.5em"}},r("div",{style:{flex:.9}},r(to,{options:s,isSelected:c=>c===a.scope,select:c=>i(c,l,"scope"),serialize:c=>c})),r(U,{size:U.Sizes.MIN,onClick:()=>n(l),style:{flex:.1,backgroundColor:"var(--input-background)",border:"1px solid var(--input-border)",color:"var(--status-danger)"}},r($i,{style:{verticalAlign:"middle"}}))),l!==t.length-1&&r(Bt,{style:{width:"unset",margin:"0.5em 0"}}),o&&Ktt(a.find)))))}function Ytt(){let[e,t]=L("");return r(f,null,r(Vn,null,"Test Rules"),r(qe,{placeholder:"Type a message",onChange:t}),r(qe,{placeholder:"Message with rules applied",editable:!1,value:dK(e,"allMessages")}))}function dK(e,t){if(e.length===0)return e;for(let o of o4.store.stringRules)o.find&&(o.onlyIfIncludes&&!e.includes(o.onlyIfIncludes)||o.scope!=="allMessages"&&o.scope!==t&&t!=="allMessages"||(e=` ${e} `.replaceAll(o.find,o.replace.replaceAll("\\n",`
`)).replace(/^\s|\s$/g,"")));for(let o of o4.store.regexRules)if(o.find&&!(o.onlyIfIncludes&&!e.includes(o.onlyIfIncludes))&&!(o.scope!=="allMessages"&&o.scope!==t&&t!=="allMessages"))try{let n=Abe(o.find);e=e.replace(n,o.replace.replaceAll("\\n",`
`))}catch{new ke("TextReplace").error(`Invalid regex: ${o.find}`)}return e=e.trim(),e}function Qtt(e){let t=z.getCurrentUser(),o=e.author;return!e.content||!t?.id||!o?.id||o.id===t.id?e.content:dK(e.content,"othersMessages")}var Ebe,wbe,o4,Ztt,QI,Cbe=x(()=>{"use strict";d();Q();Ar();eo();ut();ao();H();At();$();B();Ebe=()=>({find:"",replace:"",onlyIfIncludes:"",scope:"myMessages"}),wbe=()=>[Ebe()],o4=R({replace:{type:6,component:()=>{let{stringRules:e,regexRules:t}=o4.use(["stringRules","regexRules"]);return r(f,null,r(kbe,{title:"Using String",rulesArray:e}),r(kbe,{title:"Using Regex",rulesArray:t}),r(Ytt,null))}},stringRules:{type:7,default:wbe(),description:"Rules for replacing text using string matching."},regexRules:{type:7,default:wbe(),description:"Rules for replacing text using regular expressions."}});Ztt=["1102784112584040479","1419347113745059961"],QI=k({name:"TextReplace",description:"Replace text in your or others' messages. You can find pre-made rules in the #textreplace-rules channel in Vencord's Server.",authors:[w.AutumnVN,w.TheKodeToad,j.Etorix],isModified:!0,settings:o4,modifyIncomingMessage:Qtt,patches:[{find:"!1,hideSimpleEmbedContent",replacement:{match:/(let{toAST:.{0,125}?)\(\i\?\?\i\).content/,replace:"const textReplaceContent=$self.modifyIncomingMessage(arguments[2]?.contentMessage??arguments[1]);$1textReplaceContent"}}],start(){let{stringRules:e,regexRules:t}=o4.store;e.forEach(o=>{o.scope||(o.scope="myMessages")}),t.forEach(o=>{o.scope||(o.scope="myMessages")})},onBeforeMessageSend(e,t){Ztt.includes(e)||(t.content=dK(t.content,"myMessages"))}})});var ZI,Tbe=x(()=>{"use strict";d();H();At();$();B();ZI=k({name:"ThemeAttributes",description:"Adds data attributes to various elements for theming purposes",authors:[w.Ven,w.Board],patches:[{find:".tabBarRef",replacement:{match:/style:this\.getStyle\(\),role:"tab"/,replace:"$&,'data-tab-id':this.props.id"}},{find:"Message must not be a thread starter message",replacement:{match:/"aria-setsize":-1,(?=.{0,150}?#{intl::MESSAGE_A11Y_ROLE_DESCRIPTION})/,replace:"...$self.getMessageProps(arguments[0]),$&"}},{find:"#{intl::LABEL_WITH_ONLINE_STATUS}",replacement:[{match:/src:(\i)\?\?void 0.{1,50}"aria-hidden":!0/,replace:"$&,style:$self.getAvatarStyles($1)"}]},{find:"showCommunicationDisabledStyles",replacement:{match:/src:(\i),"aria-hidden":!0/,replace:"$&,style:$self.getAvatarStyles($1)"}}],getAvatarStyles(e){return!e||e.startsWith("data:")?{}:Object.fromEntries([128,256,512,1024,2048,4096].map(t=>[`--avatar-url-${t}`,`url(${e.replace(/\d+$/,String(t))})`]))},getMessageProps(e){try{let t=e.message?.author,o=t?.id;return{"data-author-id":o,"data-author-username":t?.username,"data-is-self":o&&o===z.getCurrentUser()?.id}}catch(t){return new ke("ThemeAttributes").error("Error in getMessageProps",t),{}}}})});var Ibe=x(()=>{});function Dbe(){mi.store.receivedInput="auto",mi.store.receivedOutput="en",mi.store.sentInput="auto",mi.store.sentOutput="en"}var mi,n4=x(()=>{"use strict";d();Q();$();mi=R({receivedInput:{type:0,description:"Language that received messages should be translated from",default:"auto",hidden:!0},receivedOutput:{type:0,description:"Language that received messages should be translated to",default:"en",hidden:!0},sentInput:{type:0,description:"Language that your own messages should be translated from",default:"auto",hidden:!0},sentOutput:{type:0,description:"Language that your own messages should be translated to",default:"en",hidden:!0},service:{type:4,description:"Translation service (Not supported on Web!)",disabled:()=>!0,options:[{label:"Google Translate",value:"google",default:!0},{label:"DeepL Free",value:"deepl"},{label:"DeepL Pro",value:"deepl-pro"}],onChange:Dbe},deeplApiKey:{type:0,description:"DeepL API key",default:"",placeholder:"Get your API key from https://deepl.com/your-account",disabled:()=>!0},autoTranslate:{type:3,description:"Automatically translate your messages before sending. You can also shift/right click the translate button to toggle this",default:!1},showAutoTranslateTooltip:{type:3,description:"Show a tooltip on the ChatBar button whenever a message is automatically translated",default:!0}}).withPrivateSettings()});var pK,Mbe=x(()=>{"use strict";d();pK={auto:"Detect language",af:"Afrikaans",sq:"Albanian",am:"Amharic",ar:"Arabic",hy:"Armenian",as:"Assamese",ay:"Aymara",az:"Azerbaijani",bm:"Bambara",eu:"Basque",be:"Belarusian",bn:"Bengali",bho:"Bhojpuri",bs:"Bosnian",bg:"Bulgarian",ca:"Catalan",ceb:"Cebuano",ny:"Chichewa","zh-CN":"Chinese (Simplified)","zh-TW":"Chinese (Traditional)",co:"Corsican",hr:"Croatian",cs:"Czech",da:"Danish",dv:"Dhivehi",doi:"Dogri",nl:"Dutch",en:"English",eo:"Esperanto",et:"Estonian",ee:"Ewe",tl:"Filipino",fi:"Finnish",fr:"French",fy:"Frisian",gl:"Galician",ka:"Georgian",de:"German",el:"Greek",gn:"Guarani",gu:"Gujarati",ht:"Haitian Creole",ha:"Hausa",haw:"Hawaiian",iw:"Hebrew",hi:"Hindi",hmn:"Hmong",hu:"Hungarian",is:"Icelandic",ig:"Igbo",ilo:"Ilocano",id:"Indonesian",ga:"Irish",it:"Italian",ja:"Japanese",jw:"Javanese",kn:"Kannada",kk:"Kazakh",km:"Khmer",rw:"Kinyarwanda",gom:"Konkani",ko:"Korean",kri:"Krio",ku:"Kurdish (Kurmanji)",ckb:"Kurdish (Sorani)",ky:"Kyrgyz",lo:"Lao",la:"Latin",lv:"Latvian",ln:"Lingala",lt:"Lithuanian",lg:"Luganda",lb:"Luxembourgish",mk:"Macedonian",mai:"Maithili",mg:"Malagasy",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi","mni-Mtei":"Meiteilon (Manipuri)",lus:"Mizo",mn:"Mongolian",my:"Myanmar (Burmese)",ne:"Nepali",no:"Norwegian",or:"Odia (Oriya)",om:"Oromo",ps:"Pashto",fa:"Persian",pl:"Polish",pt:"Portuguese",pa:"Punjabi",qu:"Quechua",ro:"Romanian",ru:"Russian",sm:"Samoan",sa:"Sanskrit",gd:"Scots Gaelic",nso:"Sepedi",sr:"Serbian",st:"Sesotho",sn:"Shona",sd:"Sindhi",si:"Sinhala",sk:"Slovak",sl:"Slovenian",so:"Somali",es:"Spanish",su:"Sundanese",sw:"Swahili",sv:"Swedish",tg:"Tajik",ta:"Tamil",tt:"Tatar",te:"Telugu",th:"Thai",ti:"Tigrinya",ts:"Tsonga",tr:"Turkish",tk:"Turkmen",ak:"Twi",uk:"Ukrainian",ur:"Urdu",ug:"Uyghur",uz:"Uzbek",vi:"Vietnamese",cy:"Welsh",xh:"Xhosa",yi:"Yiddish",yo:"Yoruba",zu:"Zulu"}});async function r4(e,t){let o=Xtt;try{return await o(t,mi.store[`${e}Input`],mi.store[`${e}Output`])}catch(n){let i=typeof n=="string"?n:"Something went wrong. If this issue persists, please check the console or ask for help in the support server.";throw Re(i,D.Type.FAILURE),n instanceof Error?n:new Error(i)}}async function Xtt(e,t,o){let n="https://translate-pa.googleapis.com/v1/translate?"+new URLSearchParams({"params.client":"gtx",dataTypes:"TRANSLATION",key:"AIzaSyDLEeFI5OtFBwYBIoK_jj5m32rZK5CkCXA","query.sourceLanguage":t,"query.targetLanguage":o,"query.text":e}),i=await fetch(n);if(!i.ok)throw new Error(`Failed to translate "${e}" (${t} -> ${o})
${i.status} ${i.statusText}`);let{sourceLanguage:s,translation:a}=await i.json();return{sourceLanguage:pK[s]??s,text:a}}var Gd,T8o,Nbe,I8o,i4=x(()=>{"use strict";d();nt();M1();B();Mbe();n4();Gd=de("vc-trans-"),T8o=VencordNative.pluginHelpers.Translate,Nbe=()=>pK;I8o=$m(()=>Re("Deepl API quota exceeded. Falling back to Google Translate",D.Type.FAILURE))});function Vtt({settingsKey:e,includeAuto:t}){let o=mi.use([e])[e],n=rt(()=>{let i=Object.entries(Nbe()).map(([s,a])=>({value:s,label:a}));return t||i.shift(),i},[]);return r("section",{className:Z.bottom16},r(so,null,mi.def[e].description),r(Ii,{options:n,value:n.find(i=>i.value===o)?.value,placeholder:"Select a language",maxVisibleItems:5,closeOnSelect:!0,onChange:i=>mi.store[e]=i}))}function eot(){let e=mi.use(["autoTranslate"]).autoTranslate;return r(fn,{title:"Auto Translate",description:mi.def.autoTranslate.description,value:e,onChange:t=>mi.store.autoTranslate=t,hideBorder:!0})}function Bbe({rootProps:e}){return r(Pe,{...e},r(je,{className:Gd("modal-header")},r(Jo,{className:Gd("modal-title")},"Translate"),r(Ut,{onClick:e.onClose})),r($e,{className:Gd("modal-content")},Jtt.map(t=>r(Vtt,{key:t,settingsKey:t,includeAuto:t.endsWith("Input")})),r(Bt,{className:Z.bottom16}),r(eot,null)))}var Jtt,Pbe=x(()=>{"use strict";d();Ar();Qs();ut();co();at();B();n4();i4();Jtt=["receivedInput","receivedOutput","sentInput","sentOutput"]});var yg,s4,_be,mK=x(()=>{"use strict";d();ma();wt();xt();at();B();n4();Pbe();i4();yg=({height:e=20,width:t=20,className:o})=>r("svg",{viewBox:"0 96 960 960",height:e,width:t,className:me(Gd("icon"),o)},r("path",{fill:"currentColor",d:"m475 976 181-480h82l186 480h-87l-41-126H604l-47 126h-82Zm151-196h142l-70-194h-2l-70 194Zm-466 76-55-55 204-204q-38-44-67.5-88.5T190 416h87q17 33 37.5 62.5T361 539q45-47 75-97.5T487 336H40v-80h280v-80h80v80h280v80H567q-22 69-58.5 135.5T419 598l98 99-30 81-127-122-200 200Z"})),_be=({isMainChat:e})=>{let{autoTranslate:t}=mi.use(["autoTranslate"]),[o,n]=L(!1);if(se(()=>(s4=n,()=>s4=void 0),[]),!e)return null;let i=()=>{let a=!t;mi.store.autoTranslate=a,a&&mi.store.showAutoTranslateAlert!==!1&&go.show({title:"Equicord Auto-Translate Enabled",body:r(f,null,r(W,null,"You just enabled Auto Translate! Any message ",r("b",null,"will automatically be translated")," before being sent.")),confirmText:"Disable Auto-Translate",cancelText:"Got it",secondaryConfirmText:"Don't show again",onConfirmSecondary:()=>mi.store.showAutoTranslateAlert=!1,onConfirm:()=>mi.store.autoTranslate=!1,confirmColor:"vc-notification-log-danger-btn"})},s=r(Lr,{tooltip:"Open Translate Modal",onClick:a=>{if(a.shiftKey)return i();Ee(l=>r(Bbe,{rootProps:l}))},onContextMenu:i,buttonProps:{"aria-haspopup":"dialog"}},r(yg,{className:Gd({"auto-translate":t,"chat-button":!0})}));return o&&mi.store.showAutoTranslateTooltip?r(Ue,{text:"Auto Translate Enabled",forceOpen:!0},()=>s):s}});function gK(e,t){fK.get(e)(t)}function tot({onDismiss:e}){return r("button",{onClick:e,className:Gd("dismiss")},"Dismiss")}function Rbe({message:e}){let[t,o]=L();return se(()=>{if(!e.vencordEmbeddedBy)return fK.set(e.id,o),()=>void fK.delete(e.id)},[]),t?r("span",{className:Gd("accessory")},r(yg,{width:16,height:16,className:Gd("accessory-icon")}),Jt.parse(t.text),r("br",null),"(translated from ",t.sourceLanguage," - ",r(tot,{onDismiss:()=>o(void 0)}),")"):null}var fK,Lbe=x(()=>{"use strict";d();B();mK();i4();fK=new Map});function Fbe(e){return e.content||e.messageSnapshots?.[0]?.message.content||e.embeds?.find(t=>t.type==="auto_moderation_message")?.rawDescription||""}var oot,Obe,XI,Ube=x(()=>{"use strict";d();Ibe();Un();H();$();B();n4();mK();Lbe();i4();oot=(e,{message:t})=>{let o=Fbe(t);if(!o)return;let n=Qt("copy-text",e);n&&n.splice(n.findIndex(i=>i?.props?.id==="copy-text")+1,0,r(M.MenuItem,{id:"vc-trans",label:"Translate",icon:yg,action:async()=>{let i=await r4("received",o);gK(t.id,i)}}))};XI=k({name:"Translate",description:"Translate messages with Google Translate or DeepL",authors:[w.Ven,w.AshtonMemer],settings:mi,contextMenus:{message:oot},translate:r4,renderMessageAccessory:e=>r(Rbe,{message:e.message}),chatBarButton:{icon:yg,render:_be},messagePopoverButton:{icon:yg,render(e){let t=Fbe(e);return t?{label:"Translate",icon:yg,message:e,channel:ne.getChannel(e.channel_id),onClick:async()=>{let o=await r4("received",t);gK(e.id,o)}}:null}},async onBeforeMessageSend(e,t){if(!mi.store.autoTranslate||!t.content)return;s4?.(!0),clearTimeout(Obe),Obe=setTimeout(()=>s4?.(!1),2e3);let o=await r4("sent",t.content);t.content=o.text}})});var $be=x(()=>{});var Hbe,zbe=x(()=>{d();(window.VencordStyles??=new Map).set("src/plugins/typingTweaks/style.css",{name:"src/plugins/typingTweaks/style.css",source:`.vc-typing-user {
    cursor: pointer;

    [class*="wrapper"] {
        display: inline-block;
        margin-right: 0.25em;
        vertical-align: -4px;
    }
}`,classNames:{},dom:null});Hbe="src/plugins/typingTweaks/style.css"});function not(e,t){if(uy.store.showRoleColors){if(Ge.plugins.CustomUserColors.enabled){let o=Ud(t,!0);if(o)return o}return Lt.getMember(e,t)?.colorString}}var uy,hK,Gbe,JI,xK=x(()=>{"use strict";d();Q();tt();uv();H();mt();Km();At();$();B();zbe();uy=R({showAvatars:{type:3,default:!0,description:"Show avatars in the typing indicator"},showRoleColors:{type:3,default:!0,description:"Show role colors in the typing indicator"},alternativeFormatting:{type:3,default:!0,description:"Show a more useful message when several users are typing"},amITyping:{type:3,default:!1,restartNeeded:!0,description:"Shows you if other people can see you typing"}}),hK=ee.wrap(function({users:t,count:o,guildId:n}){return r(f,null,t.slice(0,o).map(i=>r(X.Fragment,{key:i.id},r(Gbe,{user:i,guildId:n}),", ")),"and ",o," others are typing...")},{noop:!0});Gbe=ee.wrap(function({user:t,guildId:o}){return r("strong",{className:"vc-typing-user",role:"button",onClick:()=>{or(t.id)},style:{color:uy.store.showRoleColors?not(o,t.id):void 0}},uy.store.showAvatars&&r(Bl,{size:"SIZE_16",src:t.getAvatarURL(o,128)}),Lt.getNick(o,t.id)||!o&&Tt.getNickname(t.id)||t.globalName||t.username)},{noop:!0});Bh(!0,"TypingTweaks","AmITyping","amITyping");JI=k({name:"TypingTweaks",description:"Show avatars and role colours in the typing indicator",authors:[w.zt,w.sadan,j.MrDiamond],settings:uy,isModified:!0,managedStyle:Hbe,patches:[{find:"#{intl::THREE_USERS_TYPING}",group:!0,replacement:[{match:/(?<="aria-atomic":!0,children:)\i/,replace:"$self.renderTypingUsers({ users: arguments[0]?.typingUserObjects, guildId: arguments[0]?.channel?.guild_id, children: $& })"},{match:/(?<=function \i\(\i\)\{)(?=[^}]+?\{channel:\i,isThreadCreation:\i=!1,\.\.\.\i\})/,replace:"let typingUserObjects = $self.useTypingUsers(arguments[0]?.channel);"},{match:/typingUsers:(\i)\?\[\]:\i,/,replace:"$&typingUserObjects: $1 || typeof typingUserObjects === 'undefined' ? [] : typingUserObjects,"},{match:/(&&\(\i=)\i\.\i\.format\(\i\.\i#{intl::SEVERAL_USERS_TYPING_STRONG},\{\}\)/,replace:"$1$self.buildSeveralUsers({ users: arguments[0]?.typingUserObjects, count: arguments[0]?.typingUserObjects?.length - 2, guildId: arguments[0]?.channel?.guild_id })",predicate:()=>uy.store.alternativeFormatting}]},{find:"this.handleDismissInviteEducation",predicate:()=>uy.store.amITyping,replacement:{match:/\i\.default\.getCurrentUser\(\)/,replace:'""'}}],useTypingUsers(e){try{if(!e)throw new Error("No channel");let t=Je([il],()=>il.getTypingUsers(e.id)),o=Je([Ns],()=>Ns.getId());return Object.keys(t).filter(n=>!n||Tt.isBlockedOrIgnored(n)?!1:n===o?uy.store.amITyping:!0).map(n=>z.getUser(n)).filter(kd)}catch(t){return new ke("TypingTweaks").error("Failed to get typing users:",t),[]}},buildSeveralUsers:hK,renderTypingUsers:ee.wrap(({guildId:e,users:t,children:o})=>{try{if(!Array.isArray(o))return o;let n=0;return o.map(i=>{if(i.type!=="strong"&&!(typeof i!="string"&&!X.isValidElement(i)))return i;let s=t[n++];return r(Gbe,{key:s.id,guildId:e,user:s})})}catch(n){new ke("TypingTweaks").error("Failed to render typing users:",n)}return o},{noop:!0})})});function _v(e,t){let o=z.getUser(t);return Lt.getNick(e,t)??o.globalName??o.username}function iot({channelId:e,guildId:t}){let o=Je([il],()=>({...il.getTypingUsers(e)}),null,(p,m)=>{let g=Object.keys(p),y=Object.keys(m);return g.length===y.length&&y.every(b=>p[b]!=null)}),n=Je([st],()=>st.getChannelId());if(!dy.store.includeMutedChannels&&pw.isChannelMuted(t,e)||!dy.store.includeCurrentChannel&&n===e)return null;let i=z.getCurrentUser()?.id,s=Object.keys(o).filter(p=>p!==i&&!(Tt.isBlocked(p)&&!dy.store.includeBlockedUsers)&&!(Tt.isIgnored(p)&&!dy.store.includeIgnoredUsers)),[a,l,c]=s,u;switch(s.length){case 0:break;case 1:{u=St("ONE_USER_TYPING",{a:_v(t,a)});break}case 2:{u=St("TWO_USERS_TYPING",{a:_v(t,a),b:_v(t,l)});break}case 3:{u=St("THREE_USERS_TYPING",{a:_v(t,a),b:_v(t,l),c:_v(t,c)});break}default:{u=Ge.plugins.TypingTweaks.enabled?hK({users:[a,l].map(z.getUser),count:s.length-2,guildId:t}):St("SEVERAL_USERS_TYPING");break}}return s.length>0?r(Ue,{text:u},p=>r("div",{className:"vc-typing-indicator",...p},(dy.store.indicatorMode&2)===2&&r("div",{onClick:m=>{m.stopPropagation(),m.preventDefault()},onKeyPress:m=>m.stopPropagation()},r(ud,{users:s.map(m=>z.getUser(m)),guildId:t,renderIcon:!1,max:3,showDefaultAvatarsForNullUsers:!0,showUserPopout:!0,size:16,className:"vc-typing-indicator-avatars"})),(dy.store.indicatorMode&1)===1&&r("div",{className:"vc-typing-indicator-dots"},r(rot,{dotRadius:3,themed:!0})))):null}var rot,dy,VI,qbe=x(()=>{"use strict";d();$be();Q();tt();xK();H();mt();$();fe();B();rot=De("Math.min(1,Math.max(","dotRadius:");dy=R({includeCurrentChannel:{type:3,description:"Whether to show the typing indicator for the currently selected channel",default:!0},includeMutedChannels:{type:3,description:"Whether to show the typing indicator for muted channels.",default:!1},includeIgnoredUsers:{type:3,description:"Whether to show the typing indicator for ignored users.",default:!1},includeBlockedUsers:{type:3,description:"Whether to show the typing indicator for blocked users.",default:!1},indicatorMode:{type:4,description:"How should the indicator be displayed?",options:[{label:"Avatars and animated dots",value:3,default:!0},{label:"Animated dots",value:1},{label:"Avatars",value:2}]}}),VI=k({name:"TypingIndicator",description:"Adds an indicator if someone is typing on a channel.",authors:[w.Nuckyz,w.fawn,w.Sqaaakoi],isModified:!0,settings:dy,patches:[{find:"UNREAD_IMPORTANT:",replacement:{match:/\.Children\.count.+?:null(?<=,channel:(\i).+?)/,replace:"$&,$self.TypingIndicator($1.id,$1.getGuildId())"}},{find:"M0 15H2c0 1.6569",replacement:{match:/mentionsCount:\i.+?null(?<=channel:(\i).+?)/,replace:"$&,$self.TypingIndicator($1.id,$1.getGuildId())"}}],TypingIndicator:(e,t)=>r(ee,{noop:!0},r(iot,{channelId:e,guildId:t}))})});var eD,jbe=x(()=>{"use strict";d();H();$();eD=k({name:"Unindent",description:"Trims leading indentation from codeblocks",authors:[w.Ven],patches:[{find:"inQuote:",replacement:{match:/,content:([^,]+),inQuote/,replace:(e,t)=>`,content:$self.unindent(${t}),inQuote`}}],unindent(e){e=e.replace(/\t/g,"    ");let t=e.match(/^ *(?=\S)/gm)?.reduce((o,n)=>Math.min(o,n.length),1/0)??0;return t?e.replace(new RegExp(`^ {${t}}`,"gm"),""):e},unindentMsg(e){e.content=e.content.replace(/```(.|\n)*?```/g,t=>{let o=t.split(`
`);if(o.length<2)return t;let n="";return o[o.length-1]==="```"&&(n=o.pop()),`${o[0]}
${this.unindent(o.slice(1).join(`
`))}
${n}`})},onBeforeMessageSend(e,t){return this.unindentMsg(t)},onBeforeMessageEdit(e,t,o){return this.unindentMsg(o)}})});var sot,tD,Wbe=x(()=>{"use strict";d();Q();H();$();sot=R({zoomMultiplier:{type:5,description:"Zoom multiplier",markers:uo(2,16),default:4}}),tD=k({name:"UnlockedAvatarZoom",description:"Allows you to zoom in further in the image crop tool when changing your avatar",authors:[w.nakoyasha],settings:sot,patches:[{find:"#{intl::AVATAR_UPLOAD_EDIT_MEDIA}",replacement:{match:/maxValue:\d/,replace:"maxValue:$self.settings.store.zoomMultiplier"}}]})});var yK,aot,oD,Kbe=x(()=>{"use strict";d();Un();ao();H();$();B();yK=4,aot=(e,{channel:t,message:{author:o,messageSnapshots:n,embeds:i,flags:s,id:a}})=>{let l=(s&yK)!==0,c=n.some(g=>g.message.embeds.length);if(!l&&!i.length&&!c)return;let u=t.isPrivate()||!!(Kt.getChannelPermissions({id:t.id})&Nt.EMBED_LINKS);if(o.id===z.getCurrentUser().id&&!u)return;let p=Qt("delete",e),m=p?.findIndex(g=>g?.props?.id==="delete");!m||!p||p.splice(m-1,0,r(M.MenuItem,{id:"unsuppress-embeds",key:"unsuppress-embeds",label:l?"Unsuppress Embeds":"Suppress Embeds",color:l?void 0:"danger",icon:l?Sh:c0,action:()=>Ht.patch({url:jo.Endpoints.MESSAGE(t.id,a),body:{flags:l?s&~yK:s|yK}})}))},oD=k({name:"UnsuppressEmbeds",authors:[w.rad,w.HypedDomi],description:"Allows you to unsuppress embeds in messages",contextMenus:{message:aot}})});var Rv,nD=x(()=>{"use strict";d();Q();$();Rv=R({pronounsFormat:{type:4,description:"The format for pronouns to appear in chat",options:[{label:"Lowercase",value:"LOWERCASE",default:!0},{label:"Capitalized",value:"CAPITALIZED"}]},showSelf:{type:3,description:"Enable or disable showing pronouns for yourself",default:!0}})});function lot(e,t=!1){let o=Je([gr],()=>gr.getUserProfile(e)?.pronouns),n=Je([gr],()=>gr.getGuildMemberProfile(e,Cn()?.getGuildId())?.pronouns);return t?o:n||o}function Ybe(e,t=!1){let o=lot(e,t)?.trim().replace(/\n+/g,"");return Rv.store.pronounsFormat==="LOWERCASE"?o?.toLowerCase():o}var Qbe=x(()=>{"use strict";d();mt();B();nD()});function Xbe(e){return!(e.author.bot||e.author.system||e.type===uot||!Rv.store.showSelf&&e.author.id===z.getCurrentUser().id)}function Jbe({message:e}){let t=Ybe(e.author.id);return t&&r(Ue,{text:St("USER_PROFILE_PRONOUNS")},o=>r("span",{...o,className:me(Zbe.timestampInline,Zbe.timestamp)},"\u2022 ",t))}var Zbe,cot,uot,Vbe,eve,tve=x(()=>{"use strict";d();Ra();tt();mt();xt();fe();B();nD();Qbe();Zbe=et("timestampInline","timestamp"),cot=nr("textAndImages","messageDisplayCompact"),uot=24;Vbe=ee.wrap(({message:e})=>Xbe(e)?r(Jbe,{message:e}):null,{noop:!0}),eve=ee.wrap(({message:e})=>!cot.useSetting()||!Xbe(e)?null:r(Jbe,{message:e}),{noop:!0})});var rD,ove=x(()=>{"use strict";d();Q();H();$();tve();nD();jn("UserMessagesPronouns","PronounDB");rD=k({name:"UserMessagesPronouns",authors:[w.Tyman,w.TheKodeToad,w.Ven,w.Elvyra],description:"Adds pronouns to chat user messages",settings:Rv,patches:[{find:"showCommunicationDisabledStyles",replacement:{match:/(?<=return\s*\(0,\i\.jsxs?\)\(.+!\i&&)(\(0,\i.jsxs?\)\(.+?\{.+?\}\))/,replace:"[$1, $self.PronounsChatComponentWrapper(arguments[0])]"}},{find:'="SYSTEM_TAG"',replacement:[{match:/className:\i\(\)\(\i\.className(?:,\i\.\i)?,\i\)\}\)(?:\))?,(?=\i)/g,replace:"$&$self.CompactPronounsChatComponentWrapper(arguments[0]),"}]}],PronounsChatComponentWrapper:Vbe,CompactPronounsChatComponentWrapper:eve})});var nve=x(()=>{});function sD(e){let{size:t=16,className:o,...n}=e;return r("div",{...n,className:me(Lv("speaker"),o)},r("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"currentColor"},e.children))}function ive(e){return r(sD,{...e},r("path",{d:"M12 3a1 1 0 0 0-1-1h-.06a1 1 0 0 0-.74.32L5.92 7H3a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h2.92l4.28 4.68a1 1 0 0 0 .74.32H11a1 1 0 0 0 1-1V3ZM15.1 20.75c-.58.14-1.1-.33-1.1-.92v-.03c0-.5.37-.92.85-1.05a7 7 0 0 0 0-13.5A1.11 1.11 0 0 1 14 4.2v-.03c0-.6.52-1.06 1.1-.92a9 9 0 0 1 0 17.5Z"}),r("path",{d:"M15.16 16.51c-.57.28-1.16-.2-1.16-.83v-.14c0-.43.28-.8.63-1.02a3 3 0 0 0 0-5.04c-.35-.23-.63-.6-.63-1.02v-.14c0-.63.59-1.1 1.16-.83a5 5 0 0 1 0 9.02Z"}))}function sve(e){return r(sD,{...e},r("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 4h.5v-.5a2.5 2.5 0 0 1 5 0V4h.5a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1h-6a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1Zm4-.5V4h-2v-.5a1 1 0 1 1 2 0Z"}),r("path",{d:"M11 2a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1h-.06a1 1 0 0 1-.74-.32L5.92 17H3a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1h2.92l4.28-4.68a1 1 0 0 1 .74-.32H11ZM20.5 12c-.28 0-.5.22-.52.5a7 7 0 0 1-5.13 6.25c-.48.13-.85.55-.85 1.05v.03c0 .6.52 1.06 1.1.92a9 9 0 0 0 6.89-8.25.48.48 0 0 0-.49-.5h-1ZM16.5 12c-.28 0-.5.23-.54.5a3 3 0 0 1-1.33 2.02c-.35.23-.63.6-.63 1.02v.14c0 .63.59 1.1 1.16.83a5 5 0 0 0 2.82-4.01c.02-.28-.2-.5-.48-.5h-1Z"}))}function pot(e){return r(sD,{...e},r("path",{d:"m2.7 22.7 20-20a1 1 0 0 0-1.4-1.4l-20 20a1 1 0 1 0 1.4 1.4ZM10.8 17.32c-.21.21-.1.58.2.62V20H9a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-2v-2.06A8 8 0 0 0 20 10a1 1 0 0 0-2 0c0 1.45-.52 2.79-1.38 3.83l-.02.02A5.99 5.99 0 0 1 12.32 16a.52.52 0 0 0-.34.15l-1.18 1.18ZM15.36 4.52c.15-.15.19-.38.08-.56A4 4 0 0 0 8 6v4c0 .3.03.58.1.86.07.34.49.43.74.18l6.52-6.52ZM5.06 13.98c.16.28.53.31.75.09l.75-.75c.16-.16.19-.4.08-.61A5.97 5.97 0 0 1 6 10a1 1 0 0 0-2 0c0 1.45.39 2.81 1.06 3.98Z"}))}function mot(e){return r(sD,{...e},r("path",{d:"M22.7 2.7a1 1 0 0 0-1.4-1.4l-20 20a1 1 0 1 0 1.4 1.4l20-20ZM17.06 2.94a.48.48 0 0 0-.11-.77A11 11 0 0 0 2.18 16.94c.14.3.53.35.76.12l3.2-3.2c.25-.25.15-.68-.2-.76a5 5 0 0 0-1.02-.1H3.05a9 9 0 0 1 12.66-9.2c.2.09.44.05.59-.1l.76-.76ZM20.2 8.28a.52.52 0 0 1 .1-.58l.76-.76a.48.48 0 0 1 .77.11 11 11 0 0 1-4.5 14.57c-1.27.71-2.73.23-3.55-.74a3.1 3.1 0 0 1-.17-3.78l1.38-1.97a5 5 0 0 1 4.1-2.13h1.86a9.1 9.1 0 0 0-.75-4.72ZM10.1 17.9c.25-.25.65-.18.74.14a3.1 3.1 0 0 1-.62 2.84 2.85 2.85 0 0 1-3.55.74.16.16 0 0 1-.04-.25l3.48-3.48Z"}))}function fot({channel:e,isLocked:t}){let o=Je([lo],()=>lo.getVoiceStatesForChannel(e.id)),n=rt(()=>Object.values(o).map(s=>z.getUser(s.userId)).filter(s=>s!=null),[o]),i=t?sve:ive;return r(f,null,r(Y,{size:"sm",weight:"bold"},"In Voice Chat"),r(Y,{size:"sm",weight:"bold"},Jt.parse(`<#${e.id}>`)),r("div",{className:Lv("vc-members")},r(i,{size:18}),r(ud,{users:n,renderIcon:!1,max:13,size:18})))}var Lv,dot,rve,iD,a4,ave=x(()=>{"use strict";d();Wo();Et();tt();PI();nt();xt();fe();B();Lv=de("vc-uvs-"),{selectVoiceChannel:dot}=He("selectVoiceChannel","selectChannel"),rve=et("actionButton","highlight");iD=new Map,a4=ee.wrap(({userId:e,isProfile:t,isActionButton:o,shouldHighlight:n})=>{let i=Je([lo],()=>lo.getVoiceStateForUser(e)?.channelId),{isMuted:s,isDeaf:a}=Je([lo],()=>{let g=lo.getVoiceStateForUser(e);return{isMuted:g?.mute||g?.selfMute||!1,isDeaf:g?.deaf||g?.selfDeaf||!1}}),l=i==null?void 0:ne.getChannel(i);if(l==null)return null;let c=l.isDM()||l.isMultiUserDM();if(!c&&!Kt.can(Nt.VIEW_CHANNEL,l)&&!yt(Nv.name))return null;let u=!c&&(!Kt.can(Nt.VIEW_CHANNEL,l)||!Kt.can(Nt.CONNECT,l));function p(g){if(g.preventDefault(),g.stopPropagation(),!(l==null||i==null))if(clearTimeout(iD.get(i)),iD.delete(i),g.detail>1){if(!c&&!Kt.can(Nt.CONNECT,l)){Re("You cannot join the user's Voice Channel",D.Type.FAILURE);return}dot(i)}else{let y=setTimeout(()=>{pa.transitionToChannel(i),iD.delete(i)},250);iD.set(i,y)}}let m=u?sve:a?mot:s?pot:ive;return r(Ue,{text:r(fot,{channel:l,isLocked:u}),tooltipClassName:Lv("tooltip-container"),tooltipContentClassName:Lv("tooltip-content")},g=>r(m,{...g,role:"button",onClick:p,className:me(Lv("clickable"),o&&rve.actionButton,o&&n&&rve.highlight,Lv(t&&"profile-speaker")),size:o?20:16}))},{noop:!0})});var l4,aD,lve=x(()=>{"use strict";d();nve();Q();H();$();ave();l4=R({showInUserProfileModal:{type:3,description:"Show a user's Voice Channel indicator in their profile next to the name",default:!0,restartNeeded:!0},showInMemberList:{type:3,description:"Show a user's Voice Channel indicator in the member and DMs list",default:!0,restartNeeded:!0},showInMessages:{type:3,description:"Show a user's Voice Channel indicator in messages",default:!0,restartNeeded:!0}}),aD=k({name:"UserVoiceShow",description:"Shows an indicator when a user is in a Voice Channel",authors:[w.Nuckyz,w.LordElias,j.omaw],settings:l4,renderNicknameIcon({userId:e}){return l4.store.showInUserProfileModal?r(a4,{userId:e,isProfile:!0}):null},renderMemberListDecorator({user:e}){return l4.store.showInMemberList?e==null?null:r(a4,{userId:e.id}):null},renderMessageDecoration({message:e}){return l4.store.showInMessages?e?.author==null?null:r(a4,{userId:e.author.id,isMessageIndicator:!0}):null},patches:[{find:"null!=this.peopleListItemRef.current",replacement:{match:/\.isProvisional.{0,50}?className:\i\.\i,children:\[(?<=isFocused:(\i).+?)/,replace:"$&$self.VoiceChannelIndicator({userId:this?.props?.user?.id,isActionButton:true,shouldHighlight:$1}),"},predicate:()=>l4.store.showInMemberList}],VoiceChannelIndicator:a4})});var cve=x(()=>{});var got,hot,bK,bg,vK=x(()=>{"use strict";d();cve();Q();Co();H();nt();$();got=de("vc-usrbg-"),hot="https://usrbg.is-hardly.online/users",bK=R({nitroFirst:{description:"Banner to use if both Nitro and USRBG banners are present",type:4,options:[{label:"Nitro banner",value:!0,default:!0},{label:"USRBG banner",value:!1}]},voiceBackground:{description:"Use USRBG banners as voice chat backgrounds",type:3,default:!0,restartNeeded:!0}}),bg=k({name:"USRBG",description:"Displays user banners from USRBG, allowing anyone to get a banner without Nitro",authors:[w.AutumnVN,w.katlyn,w.pylix,w.TheKodeToad],settings:bK,patches:[{find:':"SHOULD_LOAD");',replacement:{match:/\i(?:\?)?.getPreviewBanner\(\i,\i,\i\)(?=.{0,100}"COMPLETE")/,replace:"$self.patchBannerUrl(arguments[0])||$&"}},{find:'"data-selenium-video-tile":',replacement:[{match:/(?<=function\((\i),\i\)\{)(?=let.{20,40},style:)/,replace:"Object.assign($1.style=$1.style||{},$self.getVoiceBackgroundStyles($1));"}]},{find:'"VideoBackground-web"',predicate:()=>bK.store.voiceBackground,replacement:{match:/backgroundColor:.{0,25},\{style:(?=\i\?)/,replace:"$&$self.userHasBackground(arguments[0]?.userId)?null:"}}],data:null,settingsAboutComponent:()=>r(Me,{variant:"link",className:got("settings-button"),onClick:()=>VencordNative.native.openExternal("https://github.com/AutumnVN/usrbg#how-to-request-your-own-usrbg-banner")},"Get your own USRBG banner"),getVoiceBackgroundStyles({className:e,participantUserId:t}){if(e.includes("tile")&&this.userHasBackground(t))return{backgroundImage:`url(${this.getImageUrl(t)})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}},patchBannerUrl({displayProfile:e}){if(!(e?.banner&&bK.store.nitroFirst)&&this.userHasBackground(e?.userId))return this.getImageUrl(e?.userId)},userHasBackground(e){return!!this.data?.users[e]},getImageUrl(e){if(!this.userHasBackground(e))return null;let{endpoint:t,bucket:o,prefix:n,users:{[e]:i}}=this.data;return`${t}/${o}/${n}${e}?${i}`},async start(){let e=await fetch(hot);e.ok&&(this.data=await e.json())}})});var SK,wK,xot,lD,uve=x(()=>{"use strict";d();H();$();fe();B();SK=new Map,xot=vt(".createFromServer(",".isBlockedForMessage","messageReference:"),lD=k({name:"ValidReply",description:'Fixes "Message could not be loaded" upon hovering over the reply',authors:[w.newwares],patches:[{find:"#{intl::REPLY_QUOTE_MESSAGE_NOT_LOADED}",replacement:{match:/#{intl::REPLY_QUOTE_MESSAGE_NOT_LOADED}\)/,replace:"$&,onMouseEnter:()=>$self.fetchReply(arguments[0])"}},{find:"ReferencedMessageStore",replacement:[{match:/_channelCaches=new Map;/,replace:"$&_=$self.setReplyStore(this);"}]}],setReplyStore(e){wK=e},async fetchReply(e){let{channel_id:t,message_id:o}=e.baseMessage.messageReference;SK.has(o)||(SK.set(o,t),Ht.get({url:`/channels/${t}/messages`,query:{limit:1,around:o},retries:2}).then(n=>{let i=n?.body?.[0];i&&(i.id!==o?(wK.set(t,o,{state:2}),V.dispatch({type:"MESSAGE_DELETE",channelId:t,message:o})):(wK.set(i.channel_id,i.id,{state:0,message:xot(i)}),V.dispatch({type:"MESSAGE_UPDATE",message:i})))}).catch(()=>{}).finally(()=>{SK.delete(o)}))}})});async function bot(e){let t=z.getUser(e);if(t)return t;let o=await Ht.get({url:jo.Endpoints.USER(e)}).then(s=>(V.dispatch({type:"USER_UPDATE",user:s.body}),s.body));await V.dispatch({type:"USER_PROFILE_FETCH_FAILURE",userId:e}),t=z.getUser(e);let n=Object.entries(yot).filter(([s,a])=>!isNaN(a)&&t.hasFlag(a)).map(([s])=>dve[s.toLowerCase()]).filter(kd);(o.premium_type||!o.bot&&(o.banner||o.avatar?.startsWith?.("a_")))&&n.push(dve.premium);let i=gr.getUserProfile(e);return i&&(i.accentColor=o.accent_color,i.badges=n,i.banner=o.banner,i.premiumType=o.premium_type),t}function vot({data:e,UserMention:t,RoleMention:o,parse:n,props:i}){let[s,a]=L(e.userId);if(s)return r(t,{className:"mention",userId:s,channelId:e.channelId,inlinePreview:i.noStyleAndInteraction,props:i,key:i.key});let l=n(e.content,i);return r(o,{...e,props:i,inlinePreview:i.formatInline},r("span",{onMouseEnter:()=>{let c=l?.[0]?.props?.children;if(typeof c!="string")return;let u=c.match(/<@!?(\d+)>/)?.[1];if(!u||cD.has(u))return;if(z.getUser(u))return a(u);let p=()=>{cD.add(u),pve.unshift(()=>bot(u).then(()=>{a(u),cD.delete(u)}).catch(m=>{m?.status===429&&(pve.unshift(()=>tl(m?.body?.retry_after??1e3).then(p)),cD.delete(u))}).finally(()=>tl(300)))};p()}},l))}var yot,dve,cD,pve,uD,mve=x(()=>{"use strict";d();tt();H();Km();xt();I0();$();B();yot=jo.UserFlags,dve={active_developer:{id:"active_developer",description:"Active Developer",icon:"6bdc42827a38498929a4920da12695d9",link:"https://support-dev.discord.com/hc/en-us/articles/10113997751447"},bug_hunter_level_1:{id:"bug_hunter_level_1",description:"Discord Bug Hunter",icon:"2717692c7dca7289b35297368a940dd0",link:"https://support.discord.com/hc/en-us/articles/360046057772-Discord-Bugs"},bug_hunter_level_2:{id:"bug_hunter_level_2",description:"Discord Bug Hunter",icon:"848f79194d4be5ff5f81505cbd0ce1e6",link:"https://support.discord.com/hc/en-us/articles/360046057772-Discord-Bugs"},certified_moderator:{id:"certified_moderator",description:"Moderator Programs Alumni",icon:"fee1624003e2fee35cb398e125dc479b",link:"https://discord.com/safety"},discord_employee:{id:"staff",description:"Discord Staff",icon:"5e74e9b61934fc1f67c65515d1f7e60d",link:"https://discord.com/company"},get staff(){return this.discord_employee},hypesquad:{id:"hypesquad",description:"HypeSquad Events",icon:"bf01d1073931f921909045f3a39fd264",link:"https://discord.com/hypesquad"},hypesquad_online_house_1:{id:"hypesquad_house_1",description:"HypeSquad Bravery",icon:"8a88d63823d8a71cd5e390baa45efa02",link:"https://discord.com/settings/hypesquad-online"},hypesquad_online_house_2:{id:"hypesquad_house_2",description:"HypeSquad Brilliance",icon:"011940fd013da3f7fb926e4a1cd2e618",link:"https://discord.com/settings/hypesquad-online"},hypesquad_online_house_3:{id:"hypesquad_house_3",description:"HypeSquad Balance",icon:"3aa41de486fa12454c3761e8e223442e",link:"https://discord.com/settings/hypesquad-online"},partner:{id:"partner",description:"Partnered Server Owner",icon:"3f9748e53446a137a052f3454e2de41e",link:"https://discord.com/partners"},premium:{id:"premium",description:"Subscriber",icon:"2ba85e8026a8614b640c2837bcdfe21b",link:"https://discord.com/settings/premium"},premium_early_supporter:{id:"early_supporter",description:"Early Supporter",icon:"7060786766c9c840eb3019e725d2b358",link:"https://discord.com/settings/premium"},verified_developer:{id:"verified_developer",description:"Early Verified Bot Developer",icon:"6df5892e0f35b051f8b61eace34f4967"}},cD=new Set,pve=new pl(5);uD=k({name:"ValidUser",description:"Fix mentions for unknown users showing up as '@unknown-user' (hover over a mention to fix it)",authors:[w.Ven,w.Dolfies],tags:["MentionCacheFix"],patches:[{find:'className:"mention"',replacement:{match:/react(?=\(\i,\i,\i\).{0,100}return null==.{0,70}\?\(0,\i\.jsx\)\((\i\.\i),.+?jsx\)\((\i\.\i),\{className:"mention")/,replace:"react:(...args)=>$self.renderMention($1,$2,...args),originalReact"}},{find:"unknownUserMentionPlaceholder:",replacement:{match:/unknownUserMentionPlaceholder:/,replace:"$&false&&"}}],renderMention(e,t,o,n,i){return r(ee,{noop:!0},r(vot,{key:"mention"+o.userId,RoleMention:e,UserMention:t,data:o,parse:n,props:i}))}})});var kK,dD,fve=x(()=>{"use strict";d();H();$();B();kK={},dD=k({name:"VoiceChatDoubleClick",description:"Join voice chats via double click instead of single click",authors:[w.Ven,w.D3SOX,w.sadan],patches:[...[".handleVoiceStatusClick",".handleClickChat"].map(e=>({find:e,replacement:[{match:/onClick:\(\)=>\{this.handleClick\(\)/g,replace:"onClick:()=>{$self.schedule(()=>{this.handleClick()},this)"}]})),{find:'className:"channelMention",children',replacement:{match:/onClick:(\i)(?=,.{0,30}className:"channelMention".+?(\i)\.inContent)/,replace:(e,t,o)=>`onClick:(vcDoubleClickEvt)=>$self.shouldRunOnClick(vcDoubleClickEvt,${o})&&${t}()`}},{find:',["embedded_background"]',replacement:{match:/(?=children)(?<=selectVoiceChannel\((\i)\.id\).{0,100})/,replace:"onClick:$self.goToChannel.bind(null,$1),"}}],goToChannel(e){let{id:t}=e??{};if(!t)return console.error("No channel id found");pa.transitionToChannel(t)},shouldRunOnClick(e,{channelId:t}){let o=ne.getChannel(t);return!o||![2,13].includes(o.type)?!0:e.detail>=2},schedule(e,t){let o=t.props.channel.id;if(st.getVoiceChannelId()===o){e();return}let n=kK[o]??={timeout:void 0,i:0};clearTimeout(n.timeout),++n.i>=2?(e(),delete kK[o]):n.timeout=setTimeout(()=>{delete kK[o]},500)}})});function Sot(e,t){return e.reduce((o,n)=>{let i=t(n);return o[i]??=[],o[i].push(n),o},{})}function EK({voice:e,voices:t}){let o=t.map(n=>({label:n.name,value:n.voiceURI,default:n.default}));return r(Ii,{placeholder:"Select a voice",maxVisibleItems:5,options:o,value:o.find(n=>n.value===e)?.value,onChange:n=>wa.store.voice=n,closeOnSelect:!0})}function kot({voice:e,voices:t}){let o=rt(()=>Sot(t,c=>c.lang),[t]),n=rt(()=>{let c=[];for(let u in o)try{let p=wot.of(u);p&&c.push({name:u,friendlyName:p})}catch{}return c},[o]),[i,s]=L(()=>pD()?.lang??n[0].name);if(n.length===1)return r(EK,{voice:e,voices:o[n[0].name]});let a=o[i],l=n.map(c=>({label:c.friendlyName,value:c.name}));return r(f,null,r(re,null,"Language"),r(Ii,{placeholder:"Select a language",options:l,value:l.find(c=>c.value===i)?.value,onChange:c=>s(c),maxVisibleItems:5,closeOnSelect:!0}),r(re,null,"Voice"),r(EK,{voice:e,voices:a}))}function Eot(){let e=rt(()=>window.speechSynthesis?.getVoices()??[],[]),{voice:t}=wa.use(["voice"]);if(!e.length)return r(W,null,"No voices found.");let o=e.length>20?kot:EK;return r(o,{voice:t,voices:e})}function gve(){return r("section",null,r(re,null,"Voice"),r(Eot,null))}var wot,hve=x(()=>{"use strict";d();ut();wt();B();AK();wot=new Intl.DisplayNames(["en"],{type:"language"})});function pD(e=window.speechSynthesis?.getVoices()){if(!e)return;if(wa.store.voice){let o=e.find(n=>n.voiceURI===wa.store.voice);if(o)return o;new ke("VcNarrator").error(`Voice "${wa.store.voice}" not found. Resetting to default.`)}let t=e.find(o=>o.default);return wa.store.voice=t?.voiceURI,t}var Aot,wa,AK=x(()=>{"use strict";d();Q();At();$();hve();Aot=()=>window.speechSynthesis?.getVoices().find(e=>e.default);wa=R({voice:{type:6,component:gve,get default(){return Aot()?.voiceURI}},volume:{type:5,description:"Narrator Volume",default:1,markers:[0,.25,.5,.75,1],stickToMarkers:!1},rate:{type:5,description:"Narrator Speed",default:1,markers:[.1,.5,1,2,5,10],stickToMarkers:!1},sayOwnName:{description:"Say own name",type:3,default:!1},latinOnly:{description:"Strip non latin characters from names before saying them",type:3,default:!1},joinMessage:{type:0,description:"Join Message",default:"{{USER}} joined"},leaveMessage:{type:0,description:"Leave Message",default:"{{USER}} left"},moveMessage:{type:0,description:"Move Message",default:"{{USER}} moved to {{CHANNEL}}"},muteMessage:{type:0,description:"Mute Message (only self for now)",default:"{{USER}} muted"},unmuteMessage:{type:0,description:"Unmute Message (only self for now)",default:"{{USER}} unmuted"},deafenMessage:{type:0,description:"Deafen Message (only self for now)",default:"{{USER}} deafened"},undeafenMessage:{type:0,description:"Undeafen Message (only self for now)",default:"{{USER}} undeafened"}})});function fD(e){if(!e)return;let{volume:t,rate:o}=wa.store,n=new SpeechSynthesisUtterance(e),i=pD();n.voice=i,n.volume=t,n.rate=o,speechSynthesis.speak(n)}function mD(e){let t=wa.store.latinOnly?/[^\p{Script=Latin}\p{Number}\p{Punctuation}\s]/gu:/[^\p{Letter}\p{Number}\p{Punctuation}\s]/gu;return e.normalize("NFKC").replace(t,"").replace(/_{2,}/g,"_").trim()}function gD(e,t,o,n,i){return e.replaceAll("{{USER}}",mD(t)||(t?"Someone":"")).replaceAll("{{CHANNEL}}",mD(o)||"channel").replaceAll("{{DISPLAY_NAME}}",mD(n)||(n?"Someone":"")).replaceAll("{{NICKNAME}}",mD(i)||(i?"Someone":""))}function Cot({channelId:e,oldChannelId:t},o){if(o&&e!==CK&&(t=CK,CK=e),e!==t){if(e)return[t?"move":"join",e];if(t)return["leave",t]}return["",""]}function Tot(e){let t=z.getCurrentUser(),o=hn.getGuildId();fD(gD(wa.store[e+"Message"],t.username,"general",t.globalName??t.username,Lt.getNick(o,t.id)??t.username))}var CK,hD,xve=x(()=>{"use strict";d();vc();ut();wt();H();At();co();Da();$();B();AK();hD=k({name:"VcNarrator",description:"Announces when users join, leave, or move voice channels via narrator",authors:[w.Ven],reporterTestable:2,settings:wa,flux:{VOICE_STATE_UPDATES({voiceStates:e}){let t=hn.getGuildId(),o=st.getVoiceChannelId(),n=z.getCurrentUser().id;if(ne.getChannel(o)?.type!==13)for(let i of e){let{userId:s,channelId:a,oldChannelId:l}=i,c=s===n;if(c&&i.sessionId!==Ns.getSessionId()||!c&&(!o||a!==o&&l!==o))continue;let[u,p]=Cot(i,c);if(!u)continue;let m=wa.store[u+"Message"],g=c&&!wa.store.sayOwnName?"":z.getUser(s).username,y=g&&(z.getUser(s).globalName??g),b=g&&(Lt.getNick(t,s)??y),v=ne.getChannel(p).name;fD(gD(m,g,v,y,b))}},AUDIO_TOGGLE_SELF_MUTE(){let e=st.getVoiceChannelId(),t=lo.getVoiceStateForChannel(e);if(!t)return;let o=t.mute||t.selfMute?"unmute":"mute";fD(gD(wa.store[o+"Message"],"",ne.getChannel(e).name,"",""))},AUDIO_TOGGLE_SELF_DEAF(){let e=st.getVoiceChannelId(),t=lo.getVoiceStateForChannel(e);if(!t)return;let o=t.deaf||t.selfDeaf?"undeafen":"deafen";fD(gD(wa.store[o+"Message"],"",ne.getChannel(e).name,"",""))}},start(){if(typeof speechSynthesis>"u"||speechSynthesis.getVoices().length===0){new ke("VcNarrator").warn("SpeechSynthesis not supported or no Narrator voices found. Thus, this plugin will not work. Check my Settings for more info");return}},settingsAboutComponent(){let[e,t]=rt(()=>{let i=speechSynthesis.getVoices();return[i.length!==0,i.some(s=>s.lang.startsWith("en"))]},[]),o=rt(()=>Object.keys(wa.def).filter(i=>i.endsWith("Message")).map(i=>i.slice(0,-7)),[]),n=null;if(e)t||(n=r(Mi,null,"You don't have any English voices installed, so the narrator might sound weird"));else{let i="No narrator voices found. ";i+=OS?"Install speech-dispatcher or espeak and run Discord with the --enable-speech-dispatcher flag":"Try installing some in the Narrator settings of your Operating System",n=r(Mi,null,i)}return r("section",null,r(W,null,"You can customise the spoken messages below. You can disable specific messages by setting them to nothing"),r(W,null,"The special placeholders ",r("code",null,"{{USER}}"),", ",r("code",null,"{{DISPLAY_NAME}}"),", ",r("code",null,"{{NICKNAME}}")," and ",r("code",null,"{{CHANNEL}}")," ","will be replaced with the user's name (nothing if it's yourself), the user's display name, the user's nickname on current server and the channel's name respectively"),t&&r(f,null,r(so,{className:Z.top20},"Play Example Sounds"),r("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem"},className:"vc-narrator-buttons"},o.map(i=>r(U,{key:i,onClick:()=>Tot(i)},Nm([i]))))),n)}})});function bve(e,t,o){let n=new URL(e,window.location.href),i=e.startsWith("/")?"png":n.searchParams.get("animated")==="true"?"gif":TK.store.format;n.searchParams.set("size",TK.store.imgSize),n.pathname=n.pathname.replace(/\.(png|jpe?g|webp)$/,`.${i}`),e=n.toString(),n.searchParams.set("size","4096");let s=n.toString();us({url:e,original:s,width:t,height:o})}var TK,c4,yve,Iot,Dot,Mot,xD,vve=x(()=>{"use strict";d();Q();ao();H();mt();$();B();TK=R({format:{type:4,description:"Choose the image format to use for non animated images. Animated images will always use .gif",options:[{label:"webp",value:"webp",default:!0},{label:"png",value:"png"},{label:"jpg",value:"jpg"}]},imgSize:{type:4,description:"The image size to use",options:["128","256","512","1024","2048","4096"].map(e=>({label:e,value:e,default:e==="1024"}))}}),c4=e=>bve(e,512,512),yve=e=>bve(e,1024);Iot=(e,{user:t,guildId:o})=>{if(!t)return;let n=Lt.getMember(o,t.id)?.avatar||null;e.splice(-1,0,r(M.MenuGroup,null,r(M.MenuItem,{id:"view-avatar",label:"View Avatar",action:()=>c4(To.getUserAvatarURL(t,!0)),icon:nl}),n&&r(M.MenuItem,{id:"view-server-avatar",label:"View Server Avatar",action:()=>c4(To.getGuildMemberAvatarURLSimple({userId:t.id,avatar:n,guildId:o,canAnimate:!0})),icon:nl})))},Dot=(e,{guild:t})=>{if(!t)return;let{id:o,icon:n,banner:i}=t;!i&&!n||e.splice(-1,0,r(M.MenuGroup,null,n?r(M.MenuItem,{id:"view-icon",label:"View Icon",action:()=>c4(To.getGuildIconURL({id:o,icon:n,canAnimate:!0})),icon:nl}):null,i?r(M.MenuItem,{id:"view-banner",label:"View Banner",action:()=>yve(To.getGuildBannerURL(t,!0)),icon:nl}):null))},Mot=(e,{channel:t})=>{t&&e.splice(-1,0,r(M.MenuGroup,null,r(M.MenuItem,{id:"view-group-channel-icon",label:"View Icon",action:()=>c4(To.getChannelIconURL(t)),icon:nl})))},xD=k({name:"ViewIcons",authors:[w.Ven,w.TheKodeToad,w.Nuckyz,w.nyx],description:"Makes avatars and banners in user profiles clickable, adds View Icon/Banner entries in the user, server and group channel context menu.",tags:["ImageUtilities"],dependencies:["DynamicImageModalAPI"],settings:TK,openAvatar:c4,openBanner:yve,contextMenus:{"user-context":Iot,"guild-context":Dot,"gdm-context":Mot},patches:[{find:"imageClassName:null!=",replacement:{match:/avatarSrc:(\i),eventHandlers:(\i).+?"div",.{0,100}className:\i,/,replace:'$&style:{cursor:"pointer"},onClick:()=>{$self.openAvatar($1)},'}},{find:'backgroundColor:"COMPLETE"',replacement:{match:/(overflow:"visible",.{0,125}?!1\),)style:{(?=.+?backgroundImage:null!=(\i)\?`url\(\$\{\2\}\))/,replace:(e,t,o)=>`${t}onClick:()=>${o}!=null&&$self.openBanner(${o}),style:{cursor:${o}!=null?"pointer":void 0,`}},{find:'["aria-hidden"],"aria-label":',replacement:{match:/null==\i\.icon\?.+?src:(\(0,\i\.\i\).+?\))(?=[,}])/,replace:(e,t)=>`${e},onClick:()=>arguments[0]?.size!=="SIZE_48"&&$self.openAvatar(${t})`}},{find:".channel.getRecipientId(),",replacement:{match:/(?=,src:(\i.getAvatarURL\(.+?[)]))/,replace:(e,t)=>`,onClick:()=>$self.openAvatar(${t})`}},{find:".EMPTY_GROUP_DM)",replacement:{match:/(?<=SIZE_80,)(?=src:(.+?\))[,}])/,replace:(e,t)=>`onClick:()=>$self.openAvatar(${t}),`}}]})});function Not(e){return Object.fromEntries(Object.entries(e).sort(([t],[o])=>t.localeCompare(o)))}function Bot(e){let t=Not(JSON.parse(JSON.stringify(e)));for(let n of["email","phone","mfaEnabled","personalConnectionId"])delete t.author[n];let o=t;return delete o.editHistory,delete o.deleted,delete o.firstEditTimestamp,o.attachments?.forEach(n=>delete n.deleted),t}function IK(e,t,o){let n=Ee(i=>r(ee,null,r(Pe,{...i,size:"large"},r(je,null,r(Y,{size:"lg",weight:"semibold",style:{flexGrow:1}},"View Raw"),r(Ut,{onClick:()=>vo(n)})),r($e,null,r("div",{style:{padding:"16px 0"}},!!o&&r(f,null,r(re,null,"Content"),r(Hl,{content:o,lang:""}),r(Bt,{className:Z.bottom20})),r(re,null,t," Data"),r(Hl,{content:e,lang:"json"}))),r(ht,null,r(Be,null,r(U,{onClick:()=>$t(e,`${t} data copied to clipboard!`)},"Copy ",t," JSON"),!!o&&r(U,{onClick:()=>$t(o,"Content copied to clipboard!")},"Copy Raw Content"))))))}function Sve(e){e=Bot(e);let t=JSON.stringify(e,null,4);return IK(t,"Message",e.content)}function Ov(e){return(t,o)=>{let n=o[e.toLowerCase()];if(!n||o.label===St("CHANNEL_ACTIONS_MENU_LABEL"))return;let i=t.at(-1);if(i?.key==="developer-actions"){let a=i.props;Array.isArray(a.children)||(a.children=[a.children]),t=a.children}let s=`vc-view-${e.toLowerCase()}-raw`;t.splice(-1,0,r(M.MenuItem,{id:s,label:"View Raw",action:()=>IK(JSON.stringify(n,null,4),e),icon:bD}))}}var bD,yD,Pot,vD,wve=x(()=>{"use strict";d();Q();Et();_0();Ar();tt();eo();ut();H();mt();co();at();$();B();bD=({height:e=20,width:t=20,className:o})=>r("svg",{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",width:t,height:e,className:o},r("path",{d:"M12.9297 3.25007C12.7343 3.05261 12.4154 3.05226 12.2196 3.24928L11.5746 3.89824C11.3811 4.09297 11.3808 4.40733 11.5739 4.60245L16.5685 9.64824C16.7614 9.84309 16.7614 10.1569 16.5685 10.3517L11.5739 15.3975C11.3808 15.5927 11.3811 15.907 11.5746 16.1017L12.2196 16.7507C12.4154 16.9477 12.7343 16.9474 12.9297 16.7499L19.2604 10.3517C19.4532 10.1568 19.4532 9.84314 19.2604 9.64832L12.9297 3.25007Z"}),r("path",{d:"M8.42616 4.60245C8.6193 4.40733 8.61898 4.09297 8.42545 3.89824L7.78047 3.24928C7.58466 3.05226 7.26578 3.05261 7.07041 3.25007L0.739669 9.64832C0.5469 9.84314 0.546901 10.1568 0.739669 10.3517L7.07041 16.7499C7.26578 16.9474 7.58465 16.9477 7.78047 16.7507L8.42545 16.1017C8.61898 15.907 8.6193 15.5927 8.42616 15.3975L3.43155 10.3517C3.23869 10.1569 3.23869 9.84309 3.43155 9.64824L8.42616 4.60245Z"}));yD=R({clickMethod:{description:"Change the button to view the raw content/data of any message.",type:4,options:[{label:"Left Click to view the raw content.",value:"Left",default:!0},{label:"Right click to view the raw content.",value:"Right"}]}});Pot=(e,{id:t})=>{let o=bc();if(!o)return;let n=tr.getRole(o.id,t);n&&e.push(r(M.MenuItem,{id:"vc-view-role-raw",label:"View Raw",action:()=>IK(JSON.stringify(n,null,4),"Role"),icon:bD}))},vD=k({name:"ViewRaw",description:"Copy and view the raw content/data of any message, channel or guild",authors:[w.KingFish,w.Ven,w.rad,w.ImLvna],settings:yD,contextMenus:{"guild-context":Ov("Guild"),"guild-settings-role-context":Ov("Role"),"channel-context":Ov("Channel"),"thread-context":Ov("Channel"),"gdm-context":Ov("Channel"),"user-context":Ov("User"),"dev-context":Pot},messagePopoverButton:{icon:bD,render(e){let t=()=>{yD.store.clickMethod==="Right"?$t(e.content):Sve(e)},o=i=>{yD.store.clickMethod==="Left"?(i.preventDefault(),i.stopPropagation(),$t(e.content)):(i.preventDefault(),i.stopPropagation(),Sve(e))};return{label:yD.store.clickMethod==="Right"?"Copy Raw (Left Click) / View Raw (Right Click)":"View Raw (Left Click) / Copy Raw (Right Click)",icon:bD,message:e,channel:ne.getChannel(e.channel_id),onClick:t,onContextMenu:o}}}})});var kve=x(()=>{});var SD,Eve=x(()=>{"use strict";d();kve();H();$();SD=k({name:"VoiceDownload",description:"Adds a download to voice messages. (Opens a new browser tab)",authors:[w.puv],patches:[{find:"#{intl::LgCPMt::raw}",replacement:{match:/(?<=onVolumeHide:\i\}\))/,replace:",$self.renderDownload(arguments[0].src)"}}],renderDownload(e){return r("a",{className:"vc-voice-download",href:e,onClick:t=>t.stopPropagation(),"aria-label":"Download voice message",download:"voice-message.ogg"},r(this.Icon,null))},Icon:()=>r("svg",{height:"24",width:"24",viewBox:"0 0 24 24",fill:"currentColor"},r("path",{d:"M12 2a1 1 0 0 1 1 1v10.59l3.3-3.3a1 1 0 1 1 1.4 1.42l-5 5a1 1 0 0 1-1.4 0l-5-5a1 1 0 1 1 1.4-1.42l3.3 3.3V3a1 1 0 0 1 1-1ZM3 20a1 1 0 1 0 0 2h18a1 1 0 1 0 0-2H3Z"}))})});var Ave=x(()=>{});var REo,Cve=x(()=>{"use strict";d();B();d4();REo=VencordNative.pluginHelpers.VoiceMessages});var _ot,Rot,Lot,Tve,Ive=x(()=>{"use strict";d();qo();fe();d4();_ot="----",Rot="RECORDING",Lot=De("waveform:","onVolumeChange"),Tve=({src:e,waveform:t,recording:o})=>{let n=iw({deps:[o]}),i=o?Math.floor(n/1e3):0,s=Math.floor(i/60)+":"+(i%60).toString().padStart(2,"0");return e&&!o?r(Lot,{key:e,src:e,waveform:t}):r("div",{className:vg("preview",o?"preview-recording":[])},r("div",{className:vg("preview-indicator")}),r("div",{className:vg("preview-time")},s),r("div",{className:vg("preview-label")},o?Rot:_ot))}});var Dve,Mve=x(()=>{"use strict";d();B();d4();Dve=({setAudioBlob:e,onRecordingChange:t})=>{let[o,n]=L(!1),[i,s]=L(!1),[a,l]=L(),c=p=>{n(p),t?.(p)};function u(){!o?navigator.mediaDevices.getUserMedia({audio:{echoCancellation:u4.store.echoCancellation,noiseSuppression:u4.store.noiseSuppression,deviceId:On.getInputDeviceId()}}).then(m=>{let g=[],y=new MediaRecorder(m);l(y);let b=E=>{g.push(E.data)},v=()=>{e(new Blob(g,{type:"audio/ogg; codecs=opus"})),c(!1),y.removeEventListener("dataavailable",b),y.removeEventListener("stop",v),m.getTracks().forEach(E=>E.stop())};y.addEventListener("dataavailable",b),y.addEventListener("stop",v,{once:!0}),y.start(),c(!0)}):a?.stop()}return r(f,null,r(U,{onClick:u},o?"Stop":"Start"," recording"),r(U,{disabled:!o,onClick:()=>{s(!i),i?a?.resume():a?.pause()}},i?"Resume":"Pause"," recording"))}});function Kot(e){let t=e.getChannelData(0),o=hu.clamp(Math.floor(e.duration*qot),Math.min(zot,t.length),Got),n=new Uint8Array(o),i=Math.floor(t.length/o);for(let a=0;a<o;a++){let l=0;for(let c=0;c<i;c++){let u=a*i+c;l+=t[u+c]**2}n[a]=Math.floor(Math.sqrt(l/i)*wD)}let s=Math.max(...n);if(s){let a=Math.min(1,100*(s/wD)**3),l=1+(wD/s-1)*a;for(let c=0;c<o;c++)n[c]=Math.min(wD,Math.floor(n[c]*l))}return window.btoa(String.fromCharCode(...n))}function Yot(e,t){let o=st.getChannelId(),n=Wot.getPendingReply(o);n&&V.dispatch({type:"DELETE_PENDING_REPLY",channelId:o});let i=new jot({file:new File([e],"voice-message.ogg",{type:"audio/ogg; codecs=opus"}),isThumbnail:!1,platform:1},o);i.on("complete",()=>{Ht.post({url:jo.Endpoints.MESSAGES(o),body:{flags:Fot|(Pv?Uot:0),channel_id:o,content:"",nonce:ai.fromTimestamp(Date.now()),sticker_ids:[],type:0,attachments:[{id:"0",filename:i.filename,uploaded_filename:i.uploadedFilename,waveform:t.waveform,duration_secs:t.duration}],message_reference:n?Fn.getSendMessageOptionsForReply(n)?.messageReference:null}})}),i.on("error",()=>Re("Failed to upload voice message",D.Type.FAILURE)),i.upload()}function Qot(){let[e,t]=L();return[e,n=>{e&&URL.revokeObjectURL(e),t(URL.createObjectURL(n))}]}function Xot({modalProps:e}){let[t,o]=L(!1),[n,i]=L(),[s,a]=Qot(),l=Dve;se(()=>()=>{s&&URL.revokeObjectURL(s)},[s]);let[c,u]=Cr(async()=>{if(!n)return DK;let g=await new AudioContext().decodeAudioData(await n.arrayBuffer());return{waveform:Kot(g),duration:g.duration}},{deps:[n],fallbackValue:DK}),p=n&&(!n.type.startsWith("audio/ogg")||n.type.includes("codecs")&&!n.type.includes("opus"));return r(Pe,{...e},r(je,null,r(re,null,"Record Voice Message")),r($e,{className:vg("modal")},r("div",{className:vg("buttons")},r(l,{setAudioBlob:m=>{i(m),a(m)},onRecordingChange:o}),r(U,{onClick:async()=>{let m=await i1("audio/*");m&&(i(m),a(m))}},"Upload File")),r(re,null,"Preview"),u?r(W,{className:vg("error")},"Failed to parse selected audio file: ",u.message):r(Tve,{src:s,waveform:c.waveform,recording:t}),p&&r(cn,{variant:"warning",className:Z.top16,defaultPadding:!0},r(er.FormText,null,"Voice Messages have to be OggOpus to be playable on iOS. This file is ",r("code",null,n.type)," so it will not be playable on iOS."),r(W,{className:Z.top8},"To fix it, first convert it to OggOpus, for example using the ",r(Go,{href:"https://convertio.co/mp3-opus/"},"convertio web converter")))),r(ht,null,r(U,{disabled:!n,onClick:()=>{Yot(n,c??DK),e.onClose(),Re("Now sending voice message... Please be patient",D.Type.MESSAGE)}},"Send")))}var Fot,Uot,$ot,Hot,zot,Got,qot,wD,DK,jot,Wot,vg,Zot,u4,kD,d4=x(()=>{"use strict";d();Ave();Q();fs();ut();ao();ts();wt();tK();H();nt();co();at();qo();$();rd();hr();fe();B();Cve();Ive();Mve();Fot=8192,Uot=4096,$ot="AAAAAAAAAAAA",Hot=1,zot=32,Got=256,qot=10,wD=255,DK={waveform:$ot,duration:Hot},jot=An(e=>e.prototype?.trackUploadFinished),Wot=Ft("PendingReplyStore"),vg=de("vc-vmsg-");Zot=(e,t)=>{let o=!t.channel.guild_id||Kt.can(Nt.SEND_VOICE_MESSAGES,t.channel)&&Kt.can(Nt.SEND_MESSAGES,t.channel);e.push(r(M.MenuItem,{id:"vc-send-vmsg",label:r("div",null,r(zL,{height:24,width:24}),r("div",null,"Send Voice Message",!o&&r("span",{style:{fontSize:"smaller",opacity:.6}}," (Missing Permissions)"))),action:()=>Ee(n=>r(Xot,{modalProps:n})),disabled:!o}))};u4=R({noiseSuppression:{type:3,description:"Noise Suppression",default:!0},echoCancellation:{type:3,description:"Echo Cancellation",default:!0}}),kD=k({name:"VoiceMessages",description:"Allows you to send voice messages like on mobile. To do so, right click the upload button and click Send Voice Message.",authors:[w.Ven,w.Vap,w.Nickyux,j.Z1xus,w.prism],settings:u4,contextMenus:{"channel-attach":Zot}})});var Jot,ED,Nve=x(()=>{"use strict";d();Q();H();$();Jot=R({multiplier:{description:"Volume Multiplier",type:5,markers:uo(1,5,.5),default:2,stickToMarkers:!0}}),ED=k({name:"VolumeBooster",authors:[w.Nuckyz,w.sadan],description:"Allows you to set the user and stream volume above the default maximum",settings:Jot,patches:[...["#{intl::USER_VOLUME}","currentVolume:"].map(e=>({find:e,replacement:{match:/(?<=maxValue:)\i\.\i\?(\d+?):(\d+?)(?=,)/,replace:(t,o,n)=>`${o}*$self.settings.store.multiplier`}})),{find:"streamSourceNode",predicate:()=>!0,group:!0,replacement:[{match:/Math\.max.{0,30}\)\)/,replace:"arguments[0]"},{match:/\}return"video"/,replace:"this.updateAudioElement();$&"},{match:/\.volume=this\._volume\/100;/,replace:".volume=0.00;$self.patchVolume(this);"}]},{find:"AudioContextSettingsMigrated",replacement:[{match:/(?<=isLocalMute\(\i,\i\),volume:(\i).+?\i\(\i,\i,)\1(?=\))/,replace:"$&>200?200:$&"},{match:/(?<=Object\.entries\(\i\.localMutes\).+?volume:).+?(?=,)/,replace:"$&>200?200:$&"},{match:/(?<=Object\.entries\(\i\.localVolumes\).+?volume:).+?(?=})/,replace:"$&>200?200:$&"}]},{find:'="MediaEngineStore",',replacement:[{match:/(\.settings\.audioContextSettings.+?)(\i\[\i\])=(\i\.volume)(.+?setLocalVolume\(\i,).+?\)/,replace:(e,t,o,n,i)=>t+`(${o}>200?void 0:${o}=${n})`+i+`${o}??${n})`}]}],patchVolume(e){if(e.stream.getAudioTracks().length!==0){if(e.streamSourceNode??=e.audioContext.createMediaStreamSource(e.stream),!e.gainNode){let t=e.gainNode=e.audioContext.createGain();e.streamSourceNode.connect(t),t.connect(e.audioContext.destination)}e.sinkId!=null&&e.sinkId!==e.audioContext.sinkId&&"setSinkId"in AudioContext.prototype&&e.audioContext.setSinkId(e.sinkId==="default"?"":e.sinkId),e.gainNode.gain.value=e._mute?0:e._volume/100}}})});async function Vot(e){let t=await fetch(e);if(t.status===200)return await t.blob()}function Pve(e){let t=new URL(e);return t.host===Bve?e:(t.searchParams.delete("width"),t.searchParams.delete("height"),t.origin===ent?(t.host=Bve,t.searchParams.delete("size"),t.searchParams.delete("quality"),t.searchParams.delete("format")):t.searchParams.set("quality","lossless"),t.toString())}var AD,_ve,CD,Rve,Fv,ent,Bve,TD,Lve=x(()=>{"use strict";d();Q();cs();H();$();rd();fe();B();AD=qn('closest("[contenteditable=true]")',{contextMenuCallbackWeb:ot.byCode('"[contenteditable=true]"'),contextMenuCallbackNative:ot.byCode('.getPropertyValue("-webkit-user-select")')});_ve=!1,CD=!1;("legcord"in window||"goofcord"in window)&&(_ve=!0,CD=!1);Rve=R({addBack:{type:3,description:"Add back the Discord context menus for images, links and the chat input bar",default:CD,restartNeeded:!0,hidden:CD}}),Fv=()=>CD||Rve.store.addBack,ent="https://media.discordapp.net",Bve="cdn.discordapp.com";TD=k({name:"WebContextMenus",description:"Re-adds context menus missing in the web version of Discord: Links & Images (Copy/Open Link/Image), Text Area (Copy, Cut, Paste, SpellCheck)",authors:[w.Ven],enabledByDefault:!0,required:_ve,settings:Rve,start(){Fv()&&(window.removeEventListener("contextmenu",AD.contextMenuCallbackWeb),window.addEventListener("contextmenu",AD.contextMenuCallbackNative),this.changedListeners=!0)},stop(){this.changedListeners&&(window.removeEventListener("contextmenu",AD.contextMenuCallbackNative),window.addEventListener("contextmenu",AD.contextMenuCallbackWeb))},patches:[{find:"open-native-link",replacement:[{match:/if\(!\i\.\i\|\|null==/,replace:"if(null=="},{match:/\i\.\i\.copy/,replace:"Vencord.Util.copyToClipboard"}]},{find:"Copy image not supported",replacement:[{match:/(?<=(?:canSaveImage|canCopyImage)\(.{0,120}?)!\i\.isPlatformEmbedded/g,replace:"false"},{match:/(?<=canCopyImage\(.+?)typeof \i\.clipboard\.copyImage/,replace:'"function"'}]},{find:'id:"copy-image"',replacement:[{match:/!\i\.isPlatformEmbedded/,replace:"false"},{match:/(#{intl::COPY_IMAGE_MENU_ITEM}\),.{0,75}?)action:/,replace:"$1action:()=>$self.copyImage(arguments[0]),oldAction:"},{match:/(#{intl::SAVE_IMAGE_MENU_ITEM}\),.{0,75}?)action:/,replace:"$1action:()=>$self.saveImage(arguments[0]),oldAction:"}]},{find:'navId:"image-context"',all:!0,predicate:Fv,replacement:{match:/return \i\.\i(?=\?|&&)/,replace:"return true"}},{find:'"interactionUsernameProfile"',predicate:Fv,replacement:{match:/if\((?="A"===\i\.tagName&&""!==\i\.textContent)/,replace:"if(false&&"}},{find:'getElementById("slate-toolbar"',predicate:Fv,replacement:{match:/(?<=handleContextMenu\(\i\)\{.{0,200}isPlatformEmbedded)\)/,replace:"||true)"}},{find:".SLASH_COMMAND_SUGGESTIONS_TOGGLED,{",predicate:Fv,replacement:[{match:/if\(!\i\.\i\)return null;/,replace:""},{match:/\b\i\.\i\.(copy|cut|paste)/g,replace:"$self.$1"}]},{find:'"add-to-dictionary"',predicate:Fv,replacement:{match:/let\{text:\i=""/,replace:"return [null,null];$&"}},{find:'"MediaEngineWebRTC");',replacement:{match:/supports\(\i\)\{switch\(\i\)\{(case (\i).\i)/,replace:"$&.DISABLE_VIDEO:return true;$1"}},{find:"#{intl::SEARCH_WITH_GOOGLE}",replacement:{match:/\i\.isPlatformEmbedded/,replace:"true"}},{find:"#{intl::COPY}),hint:",replacement:[{match:/\i\.isPlatformEmbedded/,replace:"true"},{match:/\i\.\i\.copy(?=\(\i)/,replace:"Vencord.Util.copyToClipboard"}],all:!0,noWarn:!0},{find:'("interactionUsernameProfile',replacement:{match:/\i\.isPlatformEmbedded(?=.{0,50}\.tagName)/,replace:"true"}}],async copyImage(e){e=Pve(e);let t=await fetch(e).then(o=>o.blob());if(t.type!=="image/png"){let o=await createImageBitmap(t),n=document.createElement("canvas");n.width=o.width,n.height=o.height,n.getContext("2d").drawImage(o,0,0),await new Promise(i=>{n.toBlob(s=>{t=s,i()},"image/png")})}navigator.clipboard.write([new ClipboardItem({"image/png":t})])},async saveImage(e){e=Pve(e);let t=await Vot(e);if(!t)return;let o=new URL(e).pathname.split("/").pop(),n=new File([t],o,{type:t.type});su(n)},copy(){let e=document.getSelection();e&&Oo(e.toString())},cut(){this.copy(),Bs.dispatch("INSERT_TEXT",{rawText:""})},async paste(){let e=(await navigator.clipboard.read())[0];if(!e)return;let t=new DataTransfer;for(let o of e.types)if(o==="image/png"){let n=new File([await e.getType(o)],"unknown.png",{type:o});t.items.add(n)}else if(o==="text/plain"){let n=await e.getType(o);t.setData(o,await n.text())}document.dispatchEvent(new ClipboardEvent("paste",{clipboardData:t}))}})});var MK,ID,Ove=x(()=>{"use strict";d();H();$();fe();B();MK=He("JUMP_TO_GUILD","SERVER_NEXT"),ID=k({name:"WebKeybinds",description:"Re-adds keybinds missing in the web version of Discord: ctrl+t, ctrl+shift+t, ctrl+tab, ctrl+shift+tab, ctrl+1-9, ctrl+,. Only works fully on Vesktop/Legcord, not inside your browser",authors:[w.Ven],enabledByDefault:!0,onKey(e){if(e.ctrlKey||e.metaKey&&ri)switch(e.key){case"t":case"T":return;case"Tab":return;case",":e.preventDefault(),Lm.openUserSettings("my_account_panel");break;default:e.key>="1"&&e.key<="9"&&(e.preventDefault(),MK.JUMP_TO_GUILD.action(e,`mod+${e.key}`));break}},start(){document.addEventListener("keydown",this.onKey)},stop(){document.removeEventListener("keydown",this.onKey)}})});var DD,Fve=x(()=>{"use strict";d();H();$();DD=k({name:"WebScreenShareFixes",authors:[w.Kaitlyn],description:"Removes 2500kbps bitrate cap on chromium and vesktop clients.",enabledByDefault:!0,patches:[{find:"x-google-max-bitrate",replacement:[{match:/`x-google-max-bitrate=\$\{\i\}`/,replace:'"x-google-max-bitrate=80_000"'},{match:";level-asymmetry-allowed=1",replace:";b=AS:800000;level-asymmetry-allowed=1"},{match:/;usedtx=\$\{(\i)\?"0":"1"\}/,replace:'$&${$1?";stereo=1;sprop-stereo=1":""}'}]}]})});function ont(e,t,o){let n=t.name+(t.id?`:${t.id}`:"");return Ht.get({url:jo.Endpoints.REACTIONS(e.channel_id,e.id,n),query:{limit:100,type:o},oldFormErrors:!0}).then(i=>{for(let s of i.body)V.dispatch({type:"USER_UPDATE",user:s});V.dispatch({type:"MESSAGE_REACTION_ADD_USERS",channelId:e.channel_id,messageId:e.id,users:i.body,emoji:t,reactionType:o})}).catch(console.error).finally(()=>tl(250))}function nnt(e,t,o){let n=`${e.id}:${t.name}:${t.id??""}:${o}`,i=Hve[n]??={fetched:!1,users:new Map};return i.fetched||(tnt.unshift(()=>ont(e,t,o)),i.fetched=!0),i.users}function Uve(e){e.stopPropagation()}var NK,tnt,Hve,$ve,MD,zve=x(()=>{"use strict";d();Q();tt();H();xt();I0();qo();$();B();NK=null,tnt=new pl;$ve=R({avatarClick:{description:"Toggle clicking avatars in reactions",type:3,default:!1,restartNeeded:!0}}),MD=k({name:"WhoReacted",description:"Renders the avatars of users who reacted to a message",authors:[w.Ven,w.KannaDev,w.newwares],isModified:!0,settings:$ve,patches:[{find:",reactionRef:",replacement:{match:/(\i)\?null:\(0,\i\.jsx\)\(\i\.\i,{className:\i\.reactionCount,.*?}\),/,replace:"$&$1?null:$self.renderUsers(this.props),"}},{find:'"MessageReactionsStore"',replacement:{match:/function (\i)\(\){(\i)={}(?=.*CONNECTION_OPEN:\1)/,replace:"$&;$self.reactions=$2;"}},{find:"cleanAutomaticAnchor(){",replacement:{match:/constructor\(\i\)\{(?=.{0,100}(?:automaticAnchor|\.messages\.loadingMore))/,replace:"$&$self.setScrollObj(this);"}}],setScrollObj(e){NK=e},renderUsers(e){return e.message.reactions.length>10?null:r(ee,{noop:!0},r(this.UsersComponent,{...e}))},UsersComponent({message:e,emoji:t,type:o}){let n=Vo();gu(()=>{NK?.scrollCounter>0&&NK.setAutomaticAnchor(null)}),se(()=>{let a=l=>{l?.messageId===e.id&&n()};return V.subscribe("MESSAGE_REACTION_ADD_USERS",a),()=>V.unsubscribe("MESSAGE_REACTION_ADD_USERS",a)},[e.id,n]);let i=nnt(e,t,o),s=Array.from(i,([a])=>z.getUser(a)).filter(Boolean);return r("div",{style:{marginLeft:"0.5em",transform:"scale(0.9)"}},r("div",{onClick:Uve,onKeyDown:Uve,style:$ve.store.avatarClick?{}:{pointerEvents:"none"}},r(ud,{users:s,guildId:ne.getChannel(e.channel_id)?.guild_id,renderIcon:!1,max:5,showDefaultAvatarsForNullUsers:!0,showUserPopout:!0})))},set reactions(e){Hve=e}})});async function BK(){return kf&&kf.close(),kf=new WebSocket(`ws://127.0.0.1:${zs.store.webSocketPort??42070}/?client=Equicord`),new Promise((e,t)=>{kf.onopen=e,kf.onerror=t,setTimeout(t,3e3)})}function int(e){return e.type===ND.DM&&zs.store.dmNotifications||e.type===ND.GROUP_DM&&zs.store.groupDmNotifications?!1:!zs.store.serverNotifications}function snt(e,t,o){fetch(`https://cdn.discordapp.com/avatars/${o.author.id}/${o.author.avatar}.png?size=128`).then(n=>n.blob()).then(n=>new Promise(i=>{let s=new FileReader;s.onload=()=>i(s.result.split(",")[1]),s.readAsDataURL(n)})).then(n=>{let i={type:1,timeout:zs.store.lengthBasedTimeout?Wve(t):zs.store.timeout,height:jve(t),opacity:zs.store.opacity,volume:zs.store.volume,audioPath:zs.store.soundPath,title:e,content:t,useBase64Icon:!0,icon:n,sourceApp:"Vencord"};qve(i)})}function Gve(e,t){let o={type:1,timeout:zs.store.lengthBasedTimeout?Wve(e):zs.store.timeout,height:jve(e),opacity:zs.store.opacity,volume:zs.store.volume,audioPath:zs.store.soundPath,title:t,content:e,useBase64Icon:!1,icon:"default",sourceApp:"Equicord"};qve(o)}async function qve(e){let t={sender:"Vencord",target:"xsoverlay",command:"SendNotification",jsonData:JSON.stringify(e),rawData:null};kf.readyState!==kf.OPEN&&await BK(),kf.send(JSON.stringify(t))}function ant(e,t){let o=z.getCurrentUser();return e.author.id===o.id||e.author.bot&&!zs.store.botNotifications?!1:rnt(e,t)}function jve(e){return e.length<=100?100:e.length<=200?150:e.length<=300?200:250}function Wve(e){return e.length<=100?3:e.length<=200?4:e.length<=300?5:6}var ND,rnt,s9o,zs,kf,a9o,BD,Kve=x(()=>{"use strict";d();Q();H();At();$();fe();B();ND=An(e=>e.ANNOUNCEMENT_THREAD===10),rnt=vt(".SUPPRESS_NOTIFICATIONS))return!1"),s9o=new ke("XSOverlay"),zs=R({webSocketPort:{type:1,description:"Websocket port",default:42070,async onChange(){await BK()}},preferUDP:{type:3,description:"Enable if you use an older build of XSOverlay unable to connect through websockets. This setting is ignored on web.",default:!1,disabled:()=>!0},botNotifications:{type:3,description:"Allow bot notifications",default:!1},serverNotifications:{type:3,description:"Allow server notifications",default:!0},dmNotifications:{type:3,description:"Allow Direct Message notifications",default:!0},groupDmNotifications:{type:3,description:"Allow Group DM notifications",default:!0},callNotifications:{type:3,description:"Allow call notifications",default:!0},pingColor:{type:0,description:"User mention color",default:"#7289da"},channelPingColor:{type:0,description:"Channel mention color",default:"#8a2be2"},soundPath:{type:0,description:"Notification sound (default/warning/error)",default:"default"},timeout:{type:1,description:"Notification duration (secs)",default:3},lengthBasedTimeout:{type:3,description:"Extend duration with message length",default:!0},opacity:{type:5,description:"Notif opacity",default:1,markers:uo(0,1,.1)},volume:{type:5,description:"Volume",default:.2,markers:uo(0,1,.1)}});a9o=VencordNative.pluginHelpers.XSOverlay,BD=k({name:"XSOverlay",description:"Forwards discord notifications to XSOverlay, for easy viewing in VR",authors:[w.Nyako],tags:["vr","notify"],reporterTestable:2,settings:zs,flux:{CALL_UPDATE({call:e}){if(e?.ringing?.includes(z.getCurrentUser().id)&&zs.store.callNotifications){let t=ne.getChannel(e.channel_id);Gve("Incoming call",`${t.name} is calling you...`)}},MESSAGE_CREATE({message:e,optimistic:t}){if(t)return;let o=ne.getChannel(e.channel_id);if(!ant(e,e.channel_id))return;let n=zs.store.pingColor.replaceAll("#","").trim(),i=zs.store.channelPingColor.replaceAll("#","").trim(),s=e.content,a="";if(o.guild_id){let p=ct.getGuild(o.guild_id);a=`${e.author.username} (${p.name}, #${o.name})`}switch(o.type){case ND.DM:a=e.author.username.trim();break;case ND.GROUP_DM:let p=o.name.trim()??o.rawRecipients.map(m=>m.username).join(", ");a=`${e.author.username} (${p})`;break}if(e.referenced_message&&(a+=" (reply)"),e.embeds.length>0&&(s+=" [embed] ",e.content===""&&(s="sent message embed(s)")),e.sticker_items&&(s+=" [sticker] ",e.content===""&&(s="sent a sticker")),e.attachments.filter(p=>typeof p?.content_type=="string"&&p?.content_type.startsWith("image")).forEach(p=>{s+=` [image: ${p.filename}] `}),e.attachments.filter(p=>p&&!p.content_type?.startsWith("image")).forEach(p=>{s+=` [attachment: ${p.filename}] `}),e.mentions.length>0&&(s=s.replace(/<@!?(\d{17,20})>/g,(p,m)=>`<color=#${n}><b>@${z.getUser(m)?.username||"unknown-user"}</color></b>`)),e.mention_roles.length>0)for(let p of e.mention_roles){let m=tr.getRole(o.guild_id,p);if(!m)continue;let g=m.colorString??`#${n}`;s=s.replace(`<@&${p}>`,`<b><color=${g}>@${m.name}</color></b>`)}let c=s.match(new RegExp("(<a?:\\w+:\\d+>)","g")),u=s.match(new RegExp("<(#\\d+)>","g"));if(c)for(let p of c)s=s.replace(new RegExp(`${p}`,"g"),`:${p.split(":")[1]}:`);if(u)for(let p of u){let m=p.split("<#")[1];m=m.substring(0,m.length-1),s=s.replace(new RegExp(`${p}`,"g"),`<b><color=#${i}>#${ne.getChannel(m).name}</color></b>`)}int(o)||snt(a,s,e)}},start:BK,stop(){kf.close()},settingsAboutComponent:()=>r(f,null,r(U,{onClick:()=>Gve("This is a test notification! explode","Hello from Vendor!")},"Send test notification"))})});async function Yve(e){return(await zi.fetchAssetIds(Qve,[e]))[0]}function lnt(e){V.dispatch({type:"LOCAL_ACTIVITY_UPDATE",activity:e,socketId:"ABSRPC"})}var Sg,Qve,PK,Uv,_K,PD,Zve=x(()=>{"use strict";d();Q();ut();wt();H();At();$();B();Sg=R({serverUrl:{description:"AudioBookShelf server URL (e.g., https://abs.example.com)",type:0},username:{description:"AudioBookShelf username",type:0},password:{description:"AudioBookShelf password",type:0}}),Qve="1381423044907503636",PK=new ke("AudioBookShelfRichPresence"),Uv=null;PD=k({name:"AudioBookShelfRichPresence",description:"Rich presence for AudioBookShelf media server",authors:[j.vmohammad],settingsAboutComponent:()=>r(f,null,r(so,null,"How to connect to AudioBookShelf"),r(W,null,"Enter your AudioBookShelf server URL, username, and password to display your currently playing audiobooks as Discord Rich Presence.",r("br",null),r("br",null),"The plugin will automatically authenticate and fetch your listening progress.")),settings:Sg,start(){this.updatePresence(),_K=setInterval(()=>{this.updatePresence()},1e4)},stop(){clearInterval(_K),_K=void 0},async authenticate(){if(!Sg.store.serverUrl||!Sg.store.username||!Sg.store.password)return PK.warn("AudioBookShelf server URL, username, or password is not set in settings."),Re("AudioBookShelf RPC is not configured.","failure",{duration:15e3}),!1;try{let t=`${Sg.store.serverUrl.replace(/\/$/,"")}/login`,o=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:Sg.store.username,password:Sg.store.password})});if(!o.ok)throw`${o.status} ${o.statusText}`;return Uv=(await o.json()).user?.token,!!Uv}catch(e){return PK.error("Failed to authenticate with AudioBookShelf",e),Uv=null,!1}},async fetchMediaData(){if(!Uv&&!await this.authenticate())return null;let e=t=>{let o=Date.now(),n=t.updatedAt;return(o-n)/1e3<=30};try{let t=Sg.store.serverUrl.replace(/\/$/,""),o=`${t}/api/me/listening-sessions`,n=await fetch(o,{headers:{Authorization:`Bearer ${Uv}`}});if(!n.ok){if(n.status===401&&(Uv=null,await this.authenticate()))return this.fetchMediaData();throw`${n.status} ${n.statusText}`}let{sessions:i}=await n.json(),s=i.find(m=>m.updatedAt&&!m.isFinished);if(!s||!e(s))return null;let{mediaMetadata:a,mediaType:l,duration:c,currentTime:u,libraryItemId:p}=s;return a?(console.log(a),{name:a.title||"Unknown",type:l||"book",author:a.author||a.publisher,series:a.series[0]?.name,duration:c,currentTime:u,imageUrl:p?`${t}/api/items/${p}/cover`:void 0,isFinished:s.isFinished||!1}):null}catch(t){return PK.error("Failed to query AudioBookShelf API",t),null}},async updatePresence(){lnt(await this.getActivity())},async getActivity(){let e=await this.fetchMediaData();if(!e||e.isFinished)return null;let t=e.imageUrl;console.log("Large Image URL:",t);let o={large_image:t?await Yve(t):await Yve("audiobookshelf"),large_text:e.series||e.author||void 0},n=()=>e.name,i=()=>e.series&&e.author?`${e.series} \u2022 ${e.author}`:e.author||"AudioBook",s=e.currentTime&&e.duration?{start:Date.now()-e.currentTime*1e3,end:Date.now()+(e.duration-e.currentTime)*1e3}:void 0;return{application_id:Qve,name:"AudioBookShelf",details:n(),state:i(),assets:o,timestamps:s,type:2,flags:1}}})});var _D,Xve=x(()=>{"use strict";d();H();$();_D=k({name:"AltKrispSwitch",description:"Makes the Noise Suppression Popout switch between None and Krisp instead of Krisp and Standard",authors:[w.newwares],patches:[{find:",setNoiseCancellation(",replacement:{match:/(}\),)(.{1,2}\.\i\.dispatch\({type:"AUDIO_SET_NOISE_SUPPRESSION",)/,replace:"$1!$self.shouldCancelSuppression(arguments)&&$2"}}],shouldCancelSuppression([e,t]){if(t?.section==="Noise Cancellation Popout")return!e}})});var Qp,RD,Jve=x(()=>{"use strict";d();Q();H();$();Qp=R({dms:{type:3,default:!0,description:"Remove shops above DMs list",restartNeeded:!0},quests:{type:3,default:!1,description:"Remove quests above DMs list",restartNeeded:!0},serverBoost:{type:3,default:!0,description:"Remove server boost info above channel list",restartNeeded:!0},billing:{type:3,default:!0,description:"Remove billing settings",restartNeeded:!0},gift:{type:3,default:!0,description:"Remove gift button",restartNeeded:!0},emojiList:{type:3,default:!0,description:"Remove unavailable categories from the emoji picker",restartNeeded:!0}}),RD=k({name:"Anammox",description:"Hides various features related to nitro and the store",authors:[w.Kyuuhachi],settings:Qp,patches:[{find:'tutorialId:"direct-messages"',replacement:[{match:/"nitro-tab-group"\)/,replace:"$&&&undefined",predicate:()=>Qp.store.dms},{match:/"discord-shop"\)/,replace:"$&&&undefined",predicate:()=>Qp.store.dms},{match:/"quests"\)/,replace:"$&&&undefined",predicate:()=>Qp.store.quests}]},{find:".hasLibraryApplication()&&!",replacement:[{match:/\i\.\i\.APPLICATION_STORE,/,replace:"/*$&*/"},{match:/\i\.\i\.COLLECTIBLES_SHOP,/,replace:"/*$&*/"}],predicate:()=>Qp.store.dms},{find:"useGuildActionRow",replacement:{match:/(GUILD_NEW_MEMBER_ACTIONS_PROGRESS_BAR\)):(\i(?:\.premiumProgressBarEnabled)?)/,replace:"$1:null"},predicate:()=>Qp.store.serverBoost},{find:".BILLING_SECTION,",replacement:{match:/(?<=buildLayout:\(\)=>)\[.+?\]/,replace:"[]"},predicate:()=>Qp.store.billing},{find:'"sticker")',replacement:{match:/&&\i\.push\(\([^&]*?,"gift"\)\)/,replace:""},predicate:()=>Qp.store.gift},{find:"#{intl::EMOJI_PICKER_EXPAND_EMOJI_SECTION}),size:",replacement:{match:/(\i)=\i\|\|!\i&&\i.\i.isEmojiCategoryNitroLocked\(\{[^}]*\}\);/,replace:"$&$1||"},predicate:()=>Qp.store.emojiList},{find:"#{intl::EMOJI_CATEGORY_TOP_GUILD_EMOJI},{guildName:",replacement:{match:/(?<=(\i)\.unshift\((\i)\):)(?=\1\.push\(\2\))/,replace:"$2.isNitroLocked||"},predicate:()=>Qp.store.emojiList}]})});async function dnt(){Vi||(Vi=new AudioContext);let e=wg.store.soundQuality;for(let t of cnt){let o=t.replace(".wav","");Vve[o]=await pnt(`${unt}/${e}/${t}`)}}async function pnt(e){Vi||(Vi=new AudioContext);let t=await fetch(e);if(!t.ok)throw new Error("Network response was not OK");let o=await t.arrayBuffer();return Vi.decodeAudioData(o)}async function mnt(e){Vi||(Vi=new AudioContext);let t=[],o=e.toLowerCase();for(let u=0;u<o.length;u++){let p=o[u];if(p==="s"&&o[u+1]==="h")t.push("sound27"),u++;else if(p==="t"&&o[u+1]==="h")t.push("sound28"),u++;else{if(p==="h"&&(o[u-1]==="s"||o[u-1]==="t"))continue;if(p===","||p==="?")t.push("sound30");else{if(p===o[u-1])continue;if(p.match(/[a-z]/)){let m=p.charCodeAt(0)-96;t.push(`sound${String(m).padStart(2,"0")}`)}}}}if(t.length===0)return null;let n=t.length*.1,i=Math.max(1,Math.floor(Vi.sampleRate*n)),s=Vi.createBuffer(1,i,Vi.sampleRate),a=s.getChannelData(0),l=0,c=Vi.sampleRate*(.09/wg.store.speed);for(let u=0;u<t.length;u++){let p=Vve[t[u]];if(!p)continue;let g=2.8*wg.store.pitch+Math.random()*.15;if(o.endsWith("?")&&u>=t.length*.8){let A=(u-t.length*.8)/(t.length*.2);g+=A*.1+.1}let b=p.getChannelData(0),v=b.length,E=Math.floor(v/g);for(let A=0;A<E;A++){let C=Math.floor(A*g),I=l+A;C<v&&I<a.length&&(a[I]=b[C])}l+=Math.floor(c)}return s}async function fnt(e,t){Vi||(Vi=new AudioContext);let o=Vi.createBufferSource(),n=Vi.createGain();o.buffer=e,o.playbackRate.value=wg.store.pitch,n.gain.value=t,o.connect(n),n.connect(Vi.destination),o.start()}var wg,Vi,cnt,Vve,unt,LD,e2e=x(()=>{"use strict";d();Q();H();$();B();wg=R({volume:{type:5,description:"Volume of the animalese sound",default:.5,markers:[0,.1,.25,.5,.6,.75,1]},speed:{type:5,description:"Speed of the animalese sound",default:1,markers:[.5,.75,1,1.25,1.5]},pitch:{type:5,description:"Pitch multiplier",default:1,markers:[.75,.8,.85,1,1.15,1.25,1.35,1.5]},messageLengthLimit:{type:1,description:"Maximum length of message to process",default:50},processOwnMessages:{type:3,description:"Enable to yap your own messages too",default:!0},soundQuality:{type:4,description:"Quality of sound to use",options:[{label:"High",value:"high",default:!0},{label:"Medium",value:"med"},{label:"Low",value:"low"},{label:"Lowest",value:"low"}]}}),Vi=null,cnt=Array.from({length:30},(e,t)=>`sound${String(t+1).padStart(2,"0")}.wav`),Vve={},unt="https://raw.githubusercontent.com/Equicord/Equibored/main/sounds/animalese";LD=k({name:"Animalese",description:"Plays animal crossing animalese for every message sent (they yap a lot)",authors:[j.ryanamay,j.Mocha],settings:wg,flux:{async MESSAGE_CREATE({optimistic:e,type:t,message:o,channelId:n}){if(e||t!=="MESSAGE_CREATE"||o.state==="SENDING"||!o.content||o.author?.bot||n!==st.getChannelId())return;let i=/https?:\/\/[^\s]+/,s=wg.store.messageLengthLimit||100,a=wg.store.processOwnMessages??!0;if(!(i.test(o.content)||o.content.length>s||!a&&String(o.author.id)===String(z.getCurrentUser().id)))try{let l=await mnt(o.content);l&&await fnt(l,wg.store.volume)}catch(l){console.error("[Animalese]",l)}}},async start(){Vi||(Vi=new AudioContext,await dnt())},stop(){Vi&&(Vi.close(),Vi=null)}})});var OD,gnt,t2e=x(()=>{"use strict";d();vu();H();$();B();OD=k({name:"AtSomeone",authors:[w.Joona],description:"Mention someone randomly",patches:[{find:".LAUNCHABLE_APPLICATIONS;",replacement:[{match:/&(\i)\(\)\((\i),\i\(\)\.test\)&&(\i)\.push\(\i\(\)\)/g,replace:"$&,$1()($2,/someone/.test)&&$3.push({text:'@someone',description:'Mention someone randomly'})"}]},{find:"inQuote:",replacement:{match:/\|here/,replace:"$&|someone"}}],start(){this.preSend=qi((e,t)=>{t.content=t.content.replace(/@someone/g,()=>`<@${gnt()}>`)})},stop(){ji(this.preSend)}}),gnt=()=>{let e=hn.getGuildId();if(e===null){let o=ne.getChannel(st.getChannelId()).recipients;return o[~~(o.length*Math.random())]}let t=Lt.getMembers(e);return t[~~(t.length*Math.random())].userId}});function i2e(){p4.clear(),r2e.store.extensions.split(",").map(t=>t.trim().toLowerCase()).forEach(t=>{t&&!t.startsWith(".")?p4.add("."+t):t&&p4.add(t)})}function FD(e){let t=e.name.substring(e.name.lastIndexOf(".")).toLowerCase();return t!==""&&p4.has(t)}async function s2e(e){let t=await e.arrayBuffer(),o=new Uint8Array(t),n=ox({[e.name]:o}),i=e.name.substring(0,e.name.lastIndexOf("."))||e.name;return new File([n],`${i}.zip`,{type:"application/zip"})}async function hnt(e,t){let o=ox(t);return new File([o],`${e}.zip`,{type:"application/zip"})}async function xnt(e){return new Promise((t,o)=>{e.file(t,o)})}async function ynt(e){let t={};async function o(n,i=""){let s=n.createReader(),a=async()=>new Promise((l,c)=>{s.readEntries(async u=>{if(u.length===0){l();return}for(let p of u){let m=i?`${i}/${p.name}`:p.name;if(p.isFile){let y=await(await xnt(p)).arrayBuffer();t[m]=new Uint8Array(y)}else p.isDirectory&&await o(p,m)}await a(),l()},c)});await a()}return await o(e),t}async function bnt(e){let t=[];for(let o of e)if(FD(o)){$v.info(`Auto-zipping file: ${o.name}`);try{let n=await s2e(o);t.push(n)}catch(n){$v.error(`Failed to zip file ${o.name}:`,n),t.push(o)}}else t.push(o);return t}function o2e(e){if(!e.dataTransfer)return;let t=Array.from(e.dataTransfer.items);if(t.length===0||!t.some(i=>i.webkitGetAsEntry()?.isDirectory||i.kind==="file"&&i.getAsFile()&&FD(i.getAsFile())))return;e.preventDefault(),e.stopPropagation();let n=[];for(let i of t){let s=i.webkitGetAsEntry();if(s?.isDirectory){$v.info(`Zipping folder: ${s.name}`);let a=ynt(s).then(l=>hnt(s.name,l)).catch(l=>($v.error(`Failed to zip folder ${s.name}:`,l),null));n.push(a)}else if(s?.isFile){let a=i.getAsFile();a&&(FD(a)?($v.info(`Auto-zipping file: ${a.name}`),n.push(s2e(a).catch(l=>($v.error(`Failed to zip file ${a.name}:`,l),a)))):n.push(Promise.resolve(a)))}}Promise.all(n).then(i=>{let s=i.filter(c=>c!==null),a=st.getChannelId(),l=ne.getChannel(a);l&&s.length>0&&setTimeout(()=>ls.promptToUpload(s,l,sn.ChannelMessage),10)})}function n2e(e){let t=Array.from(e.clipboardData?.files||[]);t.length===0||!t.some(FD)||(e.preventDefault(),e.stopPropagation(),bnt(t).then(n=>{let i=st.getChannelId(),s=ne.getChannel(i);s&&n.length>0&&setTimeout(()=>ls.promptToUpload(n,s,sn.ChannelMessage),10)}))}var $v,r2e,p4,RK,UD,a2e=x(()=>{"use strict";d();Q();H();At();$();B();e8();$v=new ke("AutoZipper"),r2e=R({extensions:{type:0,description:"Comma-separated list of file extensions to auto-zip (e.g., .psd,.blend,.exe,.dmg)",default:".psd,.blend,.exe,.dmg,.app,.apk,.iso",onChange:()=>{p4.clear(),i2e()}}}),p4=new Set;RK=!1;UD=k({name:"AutoZipper",description:"Automatically zips specified file types and folders before uploading to Discord",authors:[j.SSnowly],settings:r2e,start(){RK||(RK=!0,i2e(),document.addEventListener("drop",o2e,!0),document.addEventListener("paste",n2e,!0))},stop(){document.removeEventListener("drop",o2e,!0),document.removeEventListener("paste",n2e,!0),RK=!1}})});var LK,l2e=x(()=>{d();(window.VencordStyles??=new Map).set("src/equicordplugins/bannersEverywhere/style.css",{name:"src/equicordplugins/bannersEverywhere/style.css",source:`/* stylelint-disable property-no-vendor-prefix */
.vc-banners-everywhere-memberlist {
    position: absolute;
    left: 0;
    border-radius: var(--radius-sm);
    opacity: 0.8;
    -webkit-mask-image: linear-gradient(to right, transparent 20%, #fff);
    mask-image: linear-gradient(to right, transparent 20%, #fff);
    object-fit: cover;
    width: 100%;
    height: 100%;
    cursor: pointer;
}

.vc-banners-everywhere-memberlist ~ div {
    z-index: 1;
}
`,classNames:{},dom:null});LK="src/equicordplugins/bannersEverywhere/style.css"});var $D,OK,HD,c2e=x(()=>{"use strict";d();vn();Wo();Q();ps();vK();H();$();B();l2e();$D=R({animate:{description:"Animate banners",type:3,default:!1},preferNameplate:{description:"prefer nameplate over banner",type:3,default:!1}}),OK="bannersEverywhere",HD=k({name:"BannersEverywhere",description:"Displays banners in the member list ",authors:[w.ImLvna,w.AutumnVN],settings:$D,patches:[{find:"#{intl::GUILD_OWNER}),",replacement:[{match:/user:(\i).{0,150}nameplate:(\i).*?name:null.*?(?=avatar:)/,replace:"$&banner:$self.memberListBannerHook($1, $2),"},{match:/(?<=\),nameplate:)(\i)/,replace:"$self.nameplate($1)"}]},{find:'role:"listitem",innerRef',replacement:{match:/children:\[(?=.{0,100}\.MEMBER_LIST)/,replace:"$&arguments[0].banner,"}}],data:{},async start(){Or(LK),this.data=await zt(OK)||{}},stop(){Fr(LK),Gt(OK,this.data)},nameplate(e){if($D.store.preferNameplate)return e},memberListBannerHook(e,t){let o=this.getBanner(e.id);if(o&&!($D.store.preferNameplate&&t))return $D.store.animate||(o=o.replace(".gif",".png"),this.gifToPng(o).then(n=>{let i=document.getElementById(`vc-banners-everywhere-${e.id}`);i&&(i.src=n)}).catch()),r("img",{alt:"",id:`vc-banners-everywhere-${e.id}`,src:o,className:"vc-banners-everywhere-memberlist"})},async gifToPng(e){return new Promise((t,o)=>{let n=new Image;n.crossOrigin="anonymous",n.onload=()=>{let i=document.createElement("canvas");i.width=n.width,i.height=n.height;let s=i.getContext("2d");s?(s.drawImage(n,0,0),t(i.toDataURL("image/png"))):o(new Error("Failed to get canvas context."))},n.onerror=()=>t(""),n.src=e})},getBanner(e){if(yt(bg.name)&&bg.userHasBackground(e)){let o=bg.getImageUrl(e);return o===null&&(o=""),o}let t=gr.getUserProfile(e);return t?.banner&&(this.data[e]=`https://cdn.discordapp.com/banners/${e}/${t.banner}.${t.banner.startsWith("a_")?"gif":"png"}`,Gt(OK,this.data)),this.data[e]}})});function u2e(){return r("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r("path",{d:"M6.5 9.50026H14.0385C15.4063 9.50026 16.0902 9.50026 16.5859 9.82073C16.8235 9.97438 17.0259 10.1767 17.1795 10.4144C17.5 10.91 17.5 11.5939 17.5 12.9618C17.5 14.3297 17.5 15.0136 17.1795 15.5092C17.0259 15.7469 16.8235 15.9492 16.5859 16.1029C16.0902 16.4233 15.4063 16.4233 14.0385 16.4233H9.5M6.5 9.50026L8.75 7.42334M6.5 9.50026L8.75 11.5772",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"}))}function vnt(e){try{return new TextDecoder("utf-8",{fatal:!0}).decode(new Uint8Array(e.split("").map(t=>t.charCodeAt(0)))),!0}catch{return!1}}function d2e(e){let t=/\b[A-Za-z0-9+/]{4,}(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?\b/g;return e.match(t)||[]}function p2e(e){return e.map(t=>{try{let o=atob(t);return vnt(o)?o:null}catch(o){return console.error("Failed to decode base64 content:",o),null}}).filter(t=>t!==null)}function m2e(e){let t=Ee(o=>r(ee,null,r(Pe,{...o,size:"large"},r(je,null,r(Y,{size:"lg",weight:"semibold",style:{flexGrow:1}},"Decoded Base64 Content"),r(Ut,{onClick:()=>vo(t)})),r($e,null,r("div",{style:{padding:"16px 0"}},r(re,null,"Decoded Content"),e.map((n,i)=>r(Hl,{key:i,content:n,lang:""})))),r(ht,null,r(Be,{gap:10},e.map((n,i)=>r(U,{key:i,onClick:()=>$t(n,"Decoded content copied to clipboard!")},"Copy Decoded Content ",i+1)))))))}var zD,GD,f2e=x(()=>{"use strict";d();Q();Et();_0();tt();eo();ut();H();mt();at();$();B();zD=R({clickMethod:{description:"Change the button to decode base64 content of any message.",type:4,options:[{label:"Left Click to decode the base64 content.",value:"Left",default:!0},{label:"Right click to decode the base64 content.",value:"Right"}]}}),GD=k({name:"DecodeBase64",description:"Decode base64 content of any message and copy the decoded content.",authors:[j.ThePirateStoner],settings:zD,messagePopoverButton:{icon:u2e,render(e){let t=()=>{let i=d2e(e.content),s=p2e(i);zD.store.clickMethod==="Right"?s.forEach(a=>$t(a)):m2e(s)},o=i=>{let s=d2e(e.content),a=p2e(s);zD.store.clickMethod==="Left"?(i.preventDefault(),i.stopPropagation(),a.forEach(l=>$t(l))):(i.preventDefault(),i.stopPropagation(),m2e(a))};return{label:zD.store.clickMethod==="Right"?"Copy Decoded (Left Click) / Decode Base64 (Right Click)":"Decode Base64 (Left Click) / Copy Decoded (Right Click)",icon:u2e,message:e,channel:ne.getChannel(e.channel_id),onClick:t,onContextMenu:o}}}})});var g2e=x(()=>{});var Oc,m4=x(()=>{"use strict";d();Q();$();Oc=R({memberList:{type:3,description:"Show activity icons in the member list",default:!0,restartNeeded:!0},iconSize:{type:5,description:"Size of the activity icons",markers:[10,15,20],default:15,stickToMarkers:!1},specialFirst:{type:3,description:"Show special activities first (Currently Spotify and Twitch)",default:!0,restartNeeded:!1},renderGifs:{type:3,description:"Allow rendering GIFs",default:!0,restartNeeded:!1},removeGameActivityStatus:{type:3,description:"Remove game activity icon and status",default:!1,restartNeeded:!0},divider:{type:6,description:"",component:()=>r("div",{style:{width:"100%",height:1,borderTop:"thin solid var(--input-border-default, var(--input-border))",paddingTop:5,paddingBottom:5}})},userPopout:{type:3,description:"Show all activities in the profile popout/sidebar",default:!0,restartNeeded:!0},hideTooltip:{type:3,description:"Hides activities in various places",default:!0},allActivitiesStyle:{type:4,description:"Style for showing all activities",options:[{default:!0,label:"Carousel",value:"carousel"},{label:"List",value:"list"}]}})});function UK(e){if(!e)return;let{application_id:t}=e;if(!t)return;let o=h2e.getApplication(t);return!o&&Hv.has(t)&&(o=Hv.get(t)??null),o??void 0}function x2e(e,t=!1){let o=[],n=e.filter(i=>i.application_id||i.platform||i?.id?.startsWith("spotify:"));for(let i of n){let{assets:s,application_id:a,platform:l,id:c}=i;if(!(!a&&!l&&!c?.startsWith("spotify:")))if(s){let{small_image:u,small_text:p,large_image:m,large_text:g}=s,y=p??"Small Text",b=g??"Large Text",v=(E,A)=>{if(E.startsWith("mp:")){let C=`https://media.discordapp.net/${E.replace(/mp:/,"")}`;(Oc.store.renderGifs||!C.endsWith(".gif"))&&o.push({image:{src:C,alt:A},activity:i})}else if(E.startsWith("spotify:")){let C=`https://i.scdn.co/image/${E.split(":")[1]}`;o.push({image:{src:C,alt:A},activity:i})}else{let C=`https://cdn.discordapp.com/app-assets/${a}/${E}.png`;o.push({image:{src:C,alt:A},activity:i})}};t?u?v(u,y):m&&v(m,b):m?v(m,b):u&&v(u,y)}else if(a){let u=h2e.getApplication(a);if(u||(Hv.has(a)?u=Hv.get(a):(Hv.set(a,null),Snt(a).then(p=>{Hv.set(a,p)}).catch(console.error))),u)if(u.icon){let p=`https://cdn.discordapp.com/app-icons/${u.id}/${u.icon}.png`;o.push({image:{src:p,alt:u.name},activity:i,application:u})}else l==="xbox"&&o.push({image:{src:FK,alt:"Xbox"},activity:i,application:u});else l==="xbox"&&o.push({image:{src:FK,alt:"Xbox"},activity:i})}else l==="xbox"&&o.push({image:{src:FK,alt:"Xbox"},activity:i})}return o}var h2e,Snt,Hv,FK,py,qd,f4=x(()=>{"use strict";d();nt();fe();m4();h2e=Ft("ApplicationStore"),{fetchApplication:Snt}=He("fetchApplication"),Hv=new Map,FK="https://discord.com/assets/9a15d086141be29d9fcd.png",py=De('location:"UserProfileActivityCard",'),qd=de("vc-bactivities-")});function $K({activity:e,application:t,user:o}){let n=z.getCurrentUser();return n?r(ee,null,r("div",{className:qd("activity-tooltip")},r(py,{activity:e,user:o,application:t,currentUser:n}))):null}var y2e=x(()=>{"use strict";d();tt();f4();B()});function b2e(e){return r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 268",...e},r("path",{fill:"#5a3e85",d:"M17.458 0L0 46.556v186.201h63.983v34.934h34.931l34.898-34.934h52.36L256 162.954V0zm23.259 23.263H232.73v128.029l-40.739 40.741H128L93.113 226.92v-34.886H40.717zm64.008 116.405H128V69.844h-23.275zm63.997 0h23.27V69.844h-23.27z"}))}var v2e=x(()=>{"use strict";d()});function S2e({activities:e,user:t,hideTooltip:o}){let n=[];if(t.bot||Oc.store.hideTooltip&&o)return null;let i=x2e(e);if(i.length){let a=(c,u)=>c.image?.src===u.image?.src,l=i.filter((c,u,p)=>p.findIndex(m=>a(m,c))===u);for(let c of l)n.push({iconElement:r("img",{...c.image}),tooltip:r($K,{activity:c.activity,application:c.application,user:t})})}if(((a,l)=>{let c=e.findIndex(({name:u})=>u===a);if(c!==-1){let u=e[c],p={iconElement:r(l,null),tooltip:r($K,{activity:u,user:t})};Oc.store.specialFirst?n.unshift(p):n.splice(c,0,p)}})("Twitch",b2e),n.length){let a={"--icon-size":`${Oc.store.iconSize}px`};return r(ee,{noop:!0},r("div",{className:qd("row")},n.map(({iconElement:l,tooltip:c},u)=>r("div",{key:u,className:qd("icon"),style:a},c?r(Ue,{text:c},({onMouseEnter:p,onMouseLeave:m})=>r("div",{onMouseEnter:p,onMouseLeave:m},l)):l))))}else if(e.filter(l=>l.type!==4).length!==n.length)return r(wnt,{size:"xs"});return null}var wnt,w2e=x(()=>{"use strict";d();tt();fe();B();y2e();v2e();m4();f4();wnt=De("M5 2a3 3 0 0 0-3 3v14a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V5a3 3 0 0 0-3-3H5Zm6.81 7c-.54 0-1 .26-1.23.61A1 1 0 0 1 8.92 8.5 3.49 3.49 0 0 1 11.82 7c1.81 0 3.43 1.38 3.43 3.25 0 1.45-.98 2.61-2.27 3.06a1 1 0 0 1-1.96.37l-.19-1a1 1 0 0 1 .98-1.18c.87 0 1.44-.63 1.44-1.25S12.68 9 11.81 9ZM13 16a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm7-10.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0ZM18.5 20a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3ZM7 18.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0ZM5.5 7a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z")});function HK({disabled:e,direction:t}){return r("svg",{className:`vc-bactivities-caret-${t.toLowerCase()} ${e&&"disabled"}`,width:"24",height:"24",viewBox:"0 0 24 24"},r("path",{fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd",d:"M16.59 8.59004L12 13.17L7.41 8.59004L6 10L12 16L18 10L16.59 8.59004Z"}))}var k2e=x(()=>{"use strict";d()});function E2e({activities:e,currentActivity:t,onActivityChange:o}){let n=e.indexOf(t);return r("div",{className:qd("controls"),style:{display:"flex",flexDirection:"row",justifyContent:"space-between"}},r(Ue,{text:"Left",tooltipClassName:qd("controls-tooltip")},({onMouseEnter:i,onMouseLeave:s})=>r("span",{onMouseEnter:i,onMouseLeave:s,onClick:()=>{n-1>=0?o(e[n-1]):o(e[e.length-1])}},r(HK,{disabled:n<1,direction:"left"}))),r("div",{className:qd("controls-carousel")},e.map((i,s)=>r("div",{key:"dot--"+s,onClick:()=>o(i),className:qd("controls-dot",t===i&&"controls-selected")}))),r(Ue,{text:"Right",tooltipClassName:qd("controls-tooltip")},({onMouseEnter:i,onMouseLeave:s})=>r("span",{onMouseEnter:i,onMouseLeave:s,onClick:()=>{n+1<e.length?o(e[n+1]):o(e[0])}},r(HK,{disabled:n>=e.length-1,direction:"right"}))))}var A2e=x(()=>{"use strict";d();B();f4();k2e()});function C2e({activity:e,user:t,...o}){let n=z.getCurrentUser();if(!n)return null;let[i,s]=L(e?.type!==4?e:null),a=Je([cr],()=>cr.getActivities(t.id).filter(c=>c.type!==4));se(()=>{if(!a.length){s(null);return}(!i||!a.includes(i))&&s(a[0])},[a]);let l=rt(()=>Object.keys(o).reduce((c,u)=>(u!=="renderActions"&&u!=="application"&&(c[u]=o[u]),c),{}),[o]);return a.length?Oc.store.allActivitiesStyle==="carousel"?r(ee,{noop:!0},r("div",{style:{display:"flex",flexDirection:"column"}},e&&i?.application_id===e.application_id?r(py,{activity:i,user:t,currentUser:n,...o}):r(py,{activity:i,user:t,application:UK(i),currentUser:n,...l}),a.length>1&&i&&r(E2e,{activities:a,currentActivity:i,onActivityChange:s}))):r(ee,{noop:!0},r("div",{style:{display:"flex",flexDirection:"column",gap:"5px"}},a.map((c,u)=>u===0?r(py,{key:u,activity:c,user:t,currentUser:n,...o}):r(py,{key:u,activity:c,user:t,application:UK(c),currentUser:n,...l})))):null}var T2e=x(()=>{"use strict";d();tt();B();A2e();m4();f4()});var my,zK=x(()=>{"use strict";d();g2e();Q();H();$();w2e();T2e();m4();jn("BetterActivities","MemberListActivities");my=k({name:"BetterActivities",description:"Shows activity icons in the member list and allows showing all activities",authors:[w.D3SOX,w.Arjix,w.AutumnVN,w.thororen],tags:["activity"],settings:Oc,patchActivityList:S2e,showAllActivitiesComponent:C2e,patches:[{find:'"ActivityStatus"),',replacement:[{match:/(?<=className:\i,children:\[).*?(?=\i\(\),\i&&)/g,replace:"",predicate:()=>Oc.store.removeGameActivityStatus},{match:/(?<=hideTooltip:.{0,4}}=(\i).*?{}\))\]/g,replace:",$self.patchActivityList($1)]",predicate:()=>Oc.store.memberList}]},{find:/\.POPOUT,onClose:\i}\),nicknameIcons:.+?\.isProvisional/,replacement:{match:/((\i)=.{0,10}(\i)\.id\).*?,onInteraction:\i\}\),).{0,250}onClose:\i\}\)/,replace:"$1$self.showAllActivitiesComponent({ activity: $2, user: $3 })"},predicate:()=>Oc.store.userPopout}]})});var I2e=x(()=>{});function Ent(e){let[t,o]=e.split(" "),n={B:1,KB:1024,MB:1024**2,GB:1024**3,TB:1024**4}[o];if(n)return parseFloat(t)*n}function Ant(e){let t=e.querySelector("[class*='metadataContent']"),o=t?.querySelector("a"),n=e.querySelector("[class*='metadataContent'] [class*='metadataSize']"),i=o?.getAttribute("href"),s=e.querySelector("audio");if(!n?.textContent||!o?.textContent||!i||!s)return!1;let a=o.textContent,l=Ent(n.textContent);if(l&&l>knt)return!1;let c=[t?.parentElement,e.querySelector("[class*='audioControls']")],p=getComputedStyle(e).borderRadius;return Ef.store.forceMoveBelow&&c.forEach(m=>{m&&(m.style.zIndex="2")}),{name:a,size:l,url:i,audio:s,parentBorderRadius:p}}async function Cnt(e,t,o){let n=new URL(t);n.searchParams.set("t",Date.now().toString());let i="https://corsproxy.io/?url="+encodeURIComponent(n.href),a=await(await fetch(i)).blob(),l=URL.createObjectURL(a),c=new AudioContext,u=c.createAnalyser();u.fftSize=2048;let p=u.frequencyBinCount,m=new Uint8Array(p),g=new Uint8Array(p);c.createMediaElementSource(e).connect(u),u.connect(c.destination);let b=document.createElement("canvas"),v=b.getContext("2d");if(!v)return;b.classList.add("better-audio-visualizer"),e.parentElement?.appendChild(b),o&&(b.style.borderRadius=o);function E(){e.paused||requestAnimationFrame(E),u.getByteTimeDomainData(m),u.getByteFrequencyData(g),v&&(v.clearRect(0,0,b.width,b.height),Ef.store.oscilloscope&&Tnt(v,b,m,p),Ef.store.spectrograph&&Int(v,b,g,p))}e.src=l,e.addEventListener("play",()=>{c.state==="suspended"&&c.resume(),E()}),e.addEventListener("pause",()=>{c.suspend()})}function Tnt(e,t,o,n){let i=t.width/n,s=0,{oscilloscopeSolidColor:a,oscilloscopeColor:l}=Ef.store,[c,u,p]=l.split(",").map(Number);e.lineWidth=2,e.clearRect(0,0,t.width,t.height),e.beginPath();for(let m=0;m<n;m++){let g=o[m]/128,y=g*t.height/2;if(a)e.strokeStyle=`rgb(${c}, ${u}, ${p})`;else{let b=Math.min(c+g*100+m/n*155,255),v=Math.min(u+g*50+m/n*155,255),E=Math.min(p+g*150+m/n*155,255);e.strokeStyle=`rgb(${b}, ${v}, ${E})`}m===0?e.moveTo(s,y):e.lineTo(s,y),s+=i}e.stroke()}function Int(e,t,o,n){let{spectrographSolidColor:i,spectrographColor:s}=Ef.store,a=t.height,l=t.width/n,c=0,u=Math.max(...o);if(!(u===0||!isFinite(u)))for(let p=0;p<n;p++){let m=o[p]/u*a;if(i)e.fillStyle=`rgb(${s})`;else{let[g,y,b]=s.split(",").map(Number),v=Math.min(g+p/n*155,255),E=Math.min(y+p/n*155,255),A=Math.min(b+p/n*155,255),C=e.createLinearGradient(c,t.height-m,c,t.height);C.addColorStop(0,`rgb(${v}, ${E}, ${A})`);let I=`rgb(${Math.max(v-50,0)},${Math.max(E-50,0)},${Math.max(A-50,0)})`;C.addColorStop(1,I),e.fillStyle=C}e.fillRect(c,t.height-m,l,m),c+=l+.5}}function M2e(e){e.querySelectorAll("[class*='wrapperAudio']:not([data-better-audio-processed])").forEach(t=>{t.dataset.betterAudioProcessed="true";let o=Ant(t);o&&Cnt(o.audio,o.url,o.parentBorderRadius)})}function Dnt(e){let t=new MutationObserver(o=>{o.forEach(n=>{n.type==="childList"&&n.addedNodes.forEach(i=>{i instanceof HTMLElement&&M2e(i)})})});return t.observe(e,{childList:!0,subtree:!0}),t}function Mnt(e){if(e.startsWith("#")){let t=e.match(/\w\w/g);if(t){let[o,n,i]=t.map(s=>parseInt(s,16));return`${o}, ${n}, ${i}`}}return e}function D2e(e,t,o){let n=/^(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})$/;if(e.match(n))Ef.store[t]=e;else{let i=Mnt(e);i.match(n)?Ef.store[t]=i:(Re(`Invalid color format for ${t}, make sure it's in the format 'R, G, B' or '#RRGGBB'`,D.Type.FAILURE),Ef.store[t]=o)}}var knt,Ef,GK,qD,N2e=x(()=>{"use strict";d();I2e();Q();H();$();B();knt=12e6;Ef=R({oscilloscope:{type:3,description:"Enable oscilloscope visualizer",default:!0},spectrograph:{type:3,description:"Enable spectrograph visualizer",default:!0},oscilloscopeSolidColor:{type:3,description:"Use solid color for oscilloscope",default:!1},oscilloscopeColor:{type:0,description:"Color for oscilloscope",default:"255, 255, 255",onChange:e=>D2e(e,"oscilloscopeColor","255, 255, 255")},spectrographSolidColor:{type:3,description:"Use solid color for spectrograph",default:!1},spectrographColor:{type:0,description:"Color for spectrograph",default:"33, 150, 243",onChange:e=>D2e(e,"spectrographColor","33, 150, 243")},forceMoveBelow:{type:3,description:"Force the visualizer below the audio player",default:!0}}),GK=null,qD=k({name:"BetterAudioPlayer",description:"Adds a spectrograph and oscilloscope visualizer to audio attachment players",authors:[j.creations],settings:Ef,start(){let e=()=>{let t=document.querySelector("[class*='content']");t?(M2e(t),GK=Dnt(t)):requestAnimationFrame(e)};e()},stop(){GK?.disconnect(),GK=null}})});var B2e=x(()=>{});function Nnt(){let{reasons:e}=fy.store;return r("section",null,r(re,null,"Reasons"),e.map((t,o)=>r("div",{key:o,className:jD("reason-wrapper")},r(qe,{value:t,onChange:n=>{e[o]=n,fy.store.reasons=e},placeholder:"Reason"}),r(U,{className:jD("remove-button"),color:U.Colors.TRANSPARENT,onClick:()=>{e.splice(o,1),fy.store.reasons=e},look:U.Looks.FILLED,size:U.Sizes.MIN},r($i,null)))),r("div",{className:jD("reason-wrapper")},r(U,{onClick:()=>fy.store.reasons.push(""),className:jD("add-button"),size:U.Sizes.LARGE,color:U.Colors.TRANSPARENT},r(Am,null)," Add another reason")))}var jD,fy,WD,P2e=x(()=>{"use strict";d();B2e();Q();ut();ao();H();nt();$();B();jD=de("vc-bbr-");fy=R({reasons:{description:"Your custom reasons",type:6,default:[],component:Nnt},isTextInputDefault:{type:3,description:'Shows a text input instead of a select menu by default. (Equivalent to clicking the "Other" option)'}}),WD=k({name:"BetterBanReasons",description:"Create custom reasons to use in the Discord ban modal, and/or show a text input by default instead of the options.",authors:[w.Inbestigator],patches:[{find:"#{intl::BAN_REASON_OPTION_SPAM_ACCOUNT}",replacement:[{match:/(\[\{name:\i\.\i\.\i\(\i\.\i\.\i\),.+?"other"\}\])/,replace:"$self.getReasons($1)"},{match:/useState\(null\)(?=.{0,300}targetUserId:)/,replace:"useState($self.getDefaultState())"}]}],getReasons(e){let t=fy.store.reasons.filter(n=>n.trim());return[...(t.length?t:[]).map(n=>({name:n,value:n})),...e]},getDefaultState:()=>fy.store.isTextInputDefault?1:0,settings:fy})});var _2e=x(()=>{});var KD,qK,YD,R2e=x(()=>{"use strict";d();_2e();H();mt();$();B();KD="",qK=e=>{},YD=k({name:"BetterBlockedUsers",description:"Allows you to search in blocked users list and makes names selectable in settings.",authors:[j.TheArmagan],patches:[{find:'"],{numberOfBlockedUsers:',replacement:[{match:/(?<=\}=(\i).*?\]\}\))/,replace:",$1.listType==='blocked'?$self.renderSearchInput():null"},{match:/(?<=userId:(\i).*?\}\)\]\}\),)(\(.*?loading:\i\}\))/,replace:"$self.renderUser($1,$2)"},{match:/(?<=\}=(\i).{0,10}(\i).useState.{0,5};)/,replace:"let [searchResults,setSearchResults]=$2.useState([]);$self.setUpdateFunc($1,setSearchResults);"},{match:/(?<=\i,children:)(\i)(?=\.slice)/,replace:"(searchResults.length?searchResults:$1)"}]}],renderSearchInput(){let[e,t]=X.useState(KD);return X.useEffect(()=>{let o=this.getFilteredUsers(KD);qK(o)},[]),r(qe,{placeholder:"Search users...",style:{width:"200px"},onInput:o=>{let n=o.target.value.toLowerCase().trim();t(n),KD=n;let i=this.getFilteredUsers(n);qK(i)},value:e})},renderUser(e,t){return r("div",{style:{display:"flex",gap:"8px"}},r(U,{color:U.Colors.PRIMARY,onClick:()=>or(e)},St("SHOW_USER_PROFILE")),t)},getSearchResults(){return!!KD},setUpdateFunc(e,t){if(e.listType==="blocked")return qK=t,!0},getFilteredUsers(e){return e=e.toLowerCase(),Tt.getBlockedIDs().filter(t=>{let o=z.getUser(t);return o?t===e||o?.username?.toLowerCase()?.includes(e)||o?.globalName?.toLowerCase()?.includes(e):t===e})}})});function WK(e){V.dispatch({type:"APPLICATION_COMMAND_INDEX_FETCH_REQUEST",target:e})}var jK,QD,L2e=x(()=>{"use strict";d();yi();Q();H();$();B();jK=R({autoFillArguments:{description:"Automatically fill command with all arguements instead of just required ones",type:3,default:!0},allowNewlinesInCommands:{description:"Allow newlines in command inputs (CTRL + Shift + Enter)",type:3,default:!0}});QD=k({name:"BetterCommands",description:"Enhances the command system with miscellaneous improvements.",authors:[w.thororen],settings:jK,patches:[{find:'applicationCommand",',predicate:()=>jK.store.autoFillArguments,replacement:[{match:/\(\i\.required.{0,20}\]\)/,replace:"true"}]},{find:'"italics"),!0;',predicate:()=>jK.store.allowNewlinesInCommands,replacement:[{match:/case (\i\.\i)\.TAB:if\(null!=(\i).selection&&\i\((\i)(?=.{0,300}(\i\.\i\.insertText))/,replace:(e,t,o,n,i)=>`case ${t}.ENTER:
                                    if(${n}.shiftKey && ${n}.ctrlKey){
                                        ${n}.preventDefault();
                                        ${n}.stopPropagation();
                                        ${i}(${o},'\\n');
                                        return true;
                                    }
                                    break;
                                ${e}`}]}],commands:[{name:"refresh",description:"Refreshes Discord application commands locally",options:[{name:"user",description:"specific user to try and refresh",type:6}],inputType:3,execute:async(e,t)=>{try{let o=t.channel.id,n=t.guild?.id,i=Pt(e,"user");if(Vt(t.channel.id,{content:"Refreshing application commands..."}),WK({type:"channel",channelId:o}),n&&WK({type:"guild",guildId:n}),i){let s=await z.getUser(i);WK(s.bot?{type:"application",applicationId:s.id}:{type:"user"})}Vt(t.channel.id,{content:"Commands refreshed successfully!"})}catch(o){console.error("[Refresh Command] Error refreshing commands:",o),Vt(t.channel.id,{content:"Failed to refresh commands. Check the console for details."})}}}]})});var O2e=x(()=>{});function Bnt(e){U2e.joinGuild(e,{lurker:!0}).then(()=>{U2e.transitionToGuildSync(e)}).catch(()=>{throw new Error("Guild is not lurkable")})}var F2e,U2e,ZD,$2e=x(()=>{"use strict";d();O2e();ao();H();mt();xt();$();fe();B();F2e=et("avatar","zalgo","clickable"),U2e=He("joinGuild");ZD=k({name:"BetterInvites",description:"See invites expiration date, view inviter profile and preview servers before joining by clicking the name",authors:[j.iamme,w.thororen],patches:[{find:"#{intl::xdCLeM::raw}",replacement:[{match:/profile:\i\}\),.{0,15}profile:\i/,replace:"$&,invite:arguments[0].invite"}]},{find:"onlineCount})})]",replacement:[{match:/children:(\i)\.name\}\)\}\)\}\)/,replace:"onClick:$self.Lurkable($1),$&"},{match:/(:(\i),disableGuildNameClick:.{0,20}\}\),\i)(\]\}\))/,replace:"$1,$self.RenderTip(arguments[0].invite?.expires_at)$3,$self.Header(arguments[0].invite?.inviter,$2.name)"}]}],RenderTip(e){if(!e)return null;let t=r(f,null,Jt.parse(`<t:${Math.round(new Date(e).getTime()/1e3)}:R>`));return r(Ue,{text:r(f,null,"This invite will ",e?r(f,null,"expire ",t):r(f,null,"not expire"))},({onMouseEnter:n,onMouseLeave:i})=>r("div",{className:"vc-bi-tooltip",onMouseEnter:n,onMouseLeave:i},r(cu,{className:"vc-bi-tooltip-icon"})))},Header(e,t){let o=z.getCurrentUser().id;return!e||o===e.id?null:r("div",{className:"vc-bi-header-inner"},r("img",{alt:"",className:me(F2e.avatar,F2e.clickable)+" vc-bi-inviter-avatar",onClick:()=>or(e.id),src:e.avatar?`https://cdn.discordapp.com/avatars/${e.id}/${e.avatar}.webp?size=80`:"/assets/1f0bfc0865d324c2587920a7d80c609b.png?size=128"}),r("div",{className:"vc-bi-header-text"},e.global_name||e.username," invited you to ",t))},Lurkable:e=>e&&new Set(e.features).has("DISCOVERABLE")?()=>Bnt(e.id):null,startAt:"WebpackReady"})});var XD,H2e=x(()=>{"use strict";d();H();$();B();XD=k({name:"BetterPlusReacts",authors:[w.Joona],description:"The amount of plus before :emoji: is the message to add it to",patches:[{find:".SLASH_COMMAND_USED,",replacement:[{match:/\\\+/,replace:"$&*"},{match:/\i.trim\(\)/,replace:"$&.replace(/^\\++/, '+')"},{match:/=(\i\.\i\.getMessages\(\i\.id\))\.last\(\)(?=.{78,85}.getByName\((\i)\.)/,replace:"=$self.getMsgReference()"}]},{find:"this.props.activeCommandOption,",replacement:[{match:/:this.props.currentWord/,replace:"$&.replace(/^\\++/, '+')"},{match:/this.props.editorRef.current\)return;/,replace:"$&$self.setMsgReference(this.props.currentWord.split(':')[0],this.props.channel.id);"}]}],message:null,getMsgReference(){let{message:e}=this;return this.message=null,e},setMsgReference(e,t){let{getMessages:o}=Rt;this.message=o(t).getByIndex(o(t).length-e.split("+").length+1)}})});var gy,hy,KK=x(()=>{"use strict";d();Q();H();$();gy=R({removeNameplate:{type:3,description:"Remove nameplate styling.",default:!0,restartNeeded:!0},removeAudioMenus:{type:3,description:"Remove menus next to mute and deafen buttons.",default:!0,restartNeeded:!0},alwaysShowUsername:{type:3,description:"Always show username instead of status.",default:!0,restartNeeded:!0},removeButtonTooltips:{type:3,description:"Remove button tooltips.",default:!1,restartNeeded:!0},removeAvatarDecoration:{type:3,description:"Remove avatar decoration.",default:!0,restartNeeded:!0},removeUsernameStyles:{type:3,description:"Remove username colors and effects.",default:!0,restartNeeded:!0}}),hy=k({name:"BetterUserArea",description:"Customize and make the user area more clean.",authors:[w.prism],settings:gy,patches:[{find:"#{intl::ACCOUNT_SPEAKING_WHILE_MUTED}",replacement:{match:/,nameplate:\i,selectedGuildId:(\i),avatarDecoration/,replace:",nameplate:null,selectedGuildId:$1,avatarDecoration"},predicate:()=>gy.store.removeNameplate},{find:"#{intl::ACCOUNT_SPEAKING_WHILE_MUTED}",replacement:[{match:/(?<=#{intl::MUTE}\),)className:\i\.\i,/,replace:""},{match:/(?<=#{intl::DEAFEN}\),)className:\i\.\i,/,replace:""},{match:/,\(0,\i\.jsxs?\)\(\i\.\i,\{.{0,600}#{intl::ACCOUNT_INPUT_OPTIONS}\)\}\)(?=\])/,replace:""},{match:/,\(0,\i\.jsxs?\)\(\i\.\i,\{.{0,650}#{intl::ACCOUNT_OUTPUT_OPTIONS}\)\}\)(?=\])/,replace:""}],predicate:()=>gy.store.removeAudioMenus},{find:"#{intl::ACCOUNT_SPEAKING_WHILE_MUTED}",replacement:{match:/hoverText:(\i),forceHover:\i,children:/g,replace:"hoverText:$1,forceHover:!0,children:"},predicate:()=>gy.store.alwaysShowUsername},{find:"#{intl::ACCOUNT_SPEAKING_WHILE_MUTED}",replacement:[{match:/:\{tooltipText:\i\};/,replace:":{tooltipText:void 0};"},{match:/(?<=role:"switch",)tooltipText:\i\}/,replace:"tooltipText:void 0}"},{match:/tooltipText:\i,tooltipPositionKey/,replace:"tooltipText:void 0,tooltipPositionKey"}],predicate:()=>gy.store.removeButtonTooltips},{find:"#{intl::ACCOUNT_SPEAKING_WHILE_MUTED}",replacement:{match:/avatarDecoration:(.{0,70}),size:/,replace:"avatarDecoration:void 0,size:"},predicate:()=>gy.store.removeAvatarDecoration},{find:"#{intl::ACCOUNT_SPEAKING_WHILE_MUTED}",replacement:{match:/displayNameStyles:(\i),/,replace:"displayNameStyles:void 0,"},predicate:()=>gy.store.removeUsernameStyles}]})});var JD,z2e=x(()=>{"use strict";d();H();$();JD=k({name:"BlockKrisp",description:"Prevent Krisp from loading",authors:[w.D3SOX],patches:[{find:"Failed to load Krisp module",replacement:{match:/await \i.\i.ensureModule\("discord_krisp"\)/,replace:"throw new Error();$&"}},{find:"krisp_browser_models",replacement:{match:/(\i,\{\i:\(\)=>)\i/,replace:"$1null"}},{find:"isNoiseCancellationSupported(){",replacement:{match:/isNoiseCancellationSupported\(\)\{/,replace:"$&return false;"}}]})});var VD,G2e=x(()=>{"use strict";d();H();$();VD=k({name:"BypassPinPrompt",description:"Bypass the pin prompt when using the pin functions",authors:[w.thororen],patches:[...['source:"message-actions"','id:"pin",action','"Channel Pins"'].map(e=>({find:e,replacement:[{match:/(\i\.\i\.(unpin|pin)Message\(\i,\i\.id\)):\i\.\i\.confirm(Unpin|Pin)\(\i,\i\)/g,replace:"$1:$1"}]}))]})});function _nt(e){return r("svg",{width:"18",height:"18"},r("circle",{cx:"9",cy:"9",r:"8",fill:e?"currentColor":"var(--status-danger)"}),r("circle",{cx:"9",cy:"9",r:"3.75",fill:e?"black":"white"}))}function YK(e){return e.replace(/\s/g,"").split(",").filter(t=>t.trim()!=="").join(", ")}async function q2e(e,t){try{let o=ne.getChannel(e.channel_id),n=/<#(\d{19})>/g,i=/<@(\d{18})>/g;e.content=e.content.replace(n,(s,a)=>`#${ne.getChannel(a)?.name}`),e.content=e.content.replace(i,(s,a)=>`@${z.getUser(a).globalName}`),await $w.showNotification({title:`${e.author.globalName} ${t?`(#${o?.name}, ${ne.getChannel(o?.parent_id)?.name})`:""}`,body:e.content,icon:z.getUser(e.author.id).getAvatarURL(void 0,void 0,!1),onClick:function(){ho.transitionTo(`/channels/${t??"@me"}/${e.channel_id}/${e.id}`)}}),oc.store.notificationSound&&_s("message1")}catch(o){new ke("BypassStatus").error("Failed to notify user: ",o)}}function QK(e){return(t,o)=>{let n=o[e];if(!n)return;let i=oc.store[`${e}s`].split(", ").includes(n.id);e==="user"&&n.id===z.getCurrentUser().id||t.splice(-1,0,r(M.MenuGroup,null,r(M.MenuItem,{id:`status-${e}-bypass`,label:`${i?"Remove":"Add"} Status Bypass`,icon:()=>_nt(i),action:()=>{let s=oc.store[`${e}s`].split(", ");i?s=s.filter(a=>a!==n.id):s.push(n.id),oc.store[`${e}s`]=s.filter(a=>a.trim()!=="").join(", ")}})))}}var Pnt,oc,e7,j2e=x(()=>{"use strict";d();Ol();dr();Q();H();mt();At();$();B();Pnt=4096;oc=R({guilds:{type:0,description:"Guilds to let bypass (notified when pinged anywhere in guild)",default:"",placeholder:"Separate with commas",onChange:e=>oc.store.guilds=YK(e)},channels:{type:0,description:"Channels to let bypass (notified when pinged in that channel)",default:"",placeholder:"Separate with commas",onChange:e=>oc.store.channels=YK(e)},users:{type:0,description:"Users to let bypass (notified for all messages sent in DMs)",default:"",placeholder:"Separate with commas",onChange:e=>oc.store.users=YK(e)},allowOutsideOfDms:{type:3,description:"Allow selected users to bypass status outside of DMs too (acts like a channel/guild bypass, but it's for all messages sent by the selected users)"},notificationSound:{type:3,description:"Whether the notification sound should be played",default:!0},respectSilentPings:{type:3,description:"Respect silent pings (@silent / suppress notifications)",default:!0},statusToUse:{type:4,description:"Status to use for whitelist",options:[{label:"Online",value:"online"},{label:"Idle",value:"idle"},{label:"Do Not Disturb",value:"dnd",default:!0},{label:"Invisible",value:"invisible"}]}}),e7=k({name:"BypassStatus",description:"Still get notifications from specific sources when in do not disturb mode. Right-click on users/channels/guilds to set them to bypass do not disturb mode.",authors:[w.Inbestigator],dependencies:["AudioPlayerAPI"],flux:{async MESSAGE_CREATE({message:e,guildId:t,channelId:o}){try{let n=z.getCurrentUser(),i=await cr.getStatus(n.id),s=Cn()?.id??"0";if(e.state==="SENDING"||e.content===""||e.author.id===n.id||o===s&&Pl.isFocused()||i!==oc.store.statusToUse||oc.store.respectSilentPings&&e.flags&Pnt)return;let a=Rt.getMessage(o,e.id)?.mentioned;if((oc.store.guilds.split(", ").includes(t)||oc.store.channels.split(", ").includes(o))&&a)await q2e(e,t);else if(oc.store.users.split(", ").includes(e.author.id)){let l=await xc.getOrEnsurePrivateChannel(e.author.id);(o===l||a&&oc.store.allowOutsideOfDms===!0)&&await q2e(e,t)}}catch(n){new ke("BypassStatus").error("Failed to handle message: ",n)}}},settings:oc,contextMenus:{"guild-context":QK("guild"),"channel-context":QK("channel"),"user-context":QK("user")}})});var W2e=x(()=>{});function t7(e){let t=kn.store;switch(e){case 0:return t.showTextBadge;case 2:return t.showVoiceBadge;case 4:return t.showCategoryBadge;case 5:return t.showAnnouncementBadge;case 10:return t.showAnnouncementThreadBadge;case 11:return t.showPublicThreadBadge;case 12:return t.showPrivateThreadBadge;case 13:return t.showStageBadge;case 14:return t.showDirectoryBadge;case 15:return t.showForumBadge;case 16:return t.showMediaBadge;case 6100:return t.showNSFWBadge;case 6101:return t.showLockedBadge;case 6102:return t.showRulesBadge;default:return t.showUnknownBadge}}function o7(e){switch(e){case 0:return{css:"text",label:kn.store.textBadgeLabel,color:kn.store.textBadgeColor};case 2:return{css:"voice",label:kn.store.voiceBadgeLabel,color:kn.store.voiceBadgeColor};case 4:return{css:"category",label:kn.store.categoryBadgeLabel,color:kn.store.categoryBadgeColor};case 5:return{css:"announcement",label:kn.store.announcementBadgeLabel,color:kn.store.announcementBadgeColor};case 10:return{css:"announcement-thread",label:kn.store.announcementThreadBadgeLabel,color:kn.store.announcementThreadBadgeColor};case 11:return{css:"thread",label:kn.store.publicThreadBadgeLabel,color:kn.store.publicThreadBadgeColor};case 12:return{css:"private-thread",label:kn.store.privateThreadBadgeLabel,color:kn.store.privateThreadBadgeColor};case 13:return{css:"stage",label:kn.store.stageBadgeLabel,color:kn.store.stageBadgeColor};case 14:return{css:"directory",label:kn.store.directoryBadgeLabel,color:kn.store.directoryBadgeColor};case 15:return{css:"forum",label:kn.store.forumBadgeLabel,color:kn.store.forumBadgeColor};case 16:return{css:"media",label:kn.store.mediaBadgeLabel,color:kn.store.mediaBadgeColor};case 6100:return{css:"nsfw",label:kn.store.nsfwBadgeLabel,color:kn.store.nsfwBadgeColor};case 6101:return{css:"locked",label:kn.store.lockedBadgeLabel,color:kn.store.lockedBadgeColor};case 6102:return{css:"rules",label:kn.store.rulesBadgeLabel,color:kn.store.rulesBadgeColor};default:return{css:"unknown",label:kn.store.unknownBadgeLabel,color:kn.store.unknownBadgeColor}}}var kn,K2e=x(()=>{"use strict";d();Q();$();kn=R({oneBadgePerChannel:{type:3,default:!1,description:"Show only one badge per channel",restartNeeded:!0},showTextBadge:{type:3,default:!0,description:"Show Text badge",restartNeeded:!0},showVoiceBadge:{type:3,default:!0,description:"Show Voice badge",restartNeeded:!0},showCategoryBadge:{type:3,default:!0,description:"Show Category badge",restartNeeded:!0},showDirectoryBadge:{type:3,default:!0,description:"Show Directory badge",restartNeeded:!0},showAnnouncementThreadBadge:{type:3,default:!0,description:"Show Announcement Thread badge",restartNeeded:!0},showPublicThreadBadge:{type:3,default:!0,description:"Show Public Thread badge",restartNeeded:!0},showPrivateThreadBadge:{type:3,default:!0,description:"Show Private Thread badge",restartNeeded:!0},showStageBadge:{type:3,default:!0,description:"Show Stage badge",restartNeeded:!0},showAnnouncementBadge:{type:3,default:!0,description:"Show Announcement badge",restartNeeded:!0},showForumBadge:{type:3,default:!0,description:"Show Forum badge",restartNeeded:!0},showMediaBadge:{type:3,default:!0,description:"Show Media badge",restartNeeded:!0},showNSFWBadge:{type:3,default:!0,description:"Show NSFW badge",restartNeeded:!0},showLockedBadge:{type:3,default:!0,description:"Show Locked badge",restartNeeded:!0},showRulesBadge:{type:3,default:!0,description:"Show Rules badge",restartNeeded:!0},showUnknownBadge:{type:3,default:!0,description:"Show Unknown badge",restartNeeded:!0},textBadgeLabel:{type:0,default:"Text",description:"Text badge label",restartNeeded:!0},voiceBadgeLabel:{type:0,default:"Voice",description:"Voice badge label",restartNeeded:!0},categoryBadgeLabel:{type:0,default:"Category",description:"Category badge label",restartNeeded:!0},announcementBadgeLabel:{type:0,default:"News",description:"Announcement badge label",restartNeeded:!0},announcementThreadBadgeLabel:{type:0,default:"News Thread",description:"Announcement Thread badge label",restartNeeded:!0},publicThreadBadgeLabel:{type:0,default:"Thread",description:"Public Thread badge label",restartNeeded:!0},privateThreadBadgeLabel:{type:0,default:"Private Thread",description:"Private Thread badge label",restartNeeded:!0},stageBadgeLabel:{type:0,default:"Stage",description:"Stage badge label",restartNeeded:!0},directoryBadgeLabel:{type:0,default:"Directory",description:"Directory badge label",restartNeeded:!0},forumBadgeLabel:{type:0,default:"Forum",description:"Forum badge label",restartNeeded:!0},mediaBadgeLabel:{type:0,default:"Media",description:"Media badge label",restartNeeded:!0},nsfwBadgeLabel:{type:0,default:"NSFW",description:"NSFW badge label",restartNeeded:!0},lockedBadgeLabel:{type:0,default:"Locked",description:"Locked badge label",restartNeeded:!0},rulesBadgeLabel:{type:0,default:"Rules",description:"Rules badge label",restartNeeded:!0},unknownBadgeLabel:{type:0,default:"Unknown",description:"Unknown badge label",restartNeeded:!0},textBadgeColor:{type:0,description:"Text badge color",restartNeeded:!0},voiceBadgeColor:{type:0,description:"Voice badge color",restartNeeded:!0},categoryBadgeColor:{type:0,description:"Category badge color",restartNeeded:!0},announcementBadgeColor:{type:0,description:"Announcement badge color",restartNeeded:!0},announcementThreadBadgeColor:{type:0,description:"Announcement Thread badge color",restartNeeded:!0},publicThreadBadgeColor:{type:0,description:"Public Thread badge color",restartNeeded:!0},privateThreadBadgeColor:{type:0,description:"Private Thread badge color",restartNeeded:!0},stageBadgeColor:{type:0,description:"Stage badge color",restartNeeded:!0},directoryBadgeColor:{type:0,description:"Directory badge color",restartNeeded:!0},forumBadgeColor:{type:0,description:"Forum badge color",restartNeeded:!0},mediaBadgeColor:{type:0,description:"Media badge color",restartNeeded:!0},nsfwBadgeColor:{type:0,description:"NSFW badge color",restartNeeded:!0},lockedBadgeColor:{type:0,description:"Locked badge color",restartNeeded:!0},rulesBadgeColor:{type:0,description:"Rules badge color",restartNeeded:!0},unknownBadgeColor:{type:0,description:"Unknown badge color",restartNeeded:!0}})});function n7(e,t){let{css:o,label:n,color:i}=o7(e);return r("div",{key:e,className:`channel-badge channel-badge-${o}`,style:i?{backgroundColor:i}:void 0,title:t},n)}var r7,Y2e=x(()=>{"use strict";d();W2e();H();$();B();K2e();r7=k({name:"ChannelBadges",description:"Adds badges to channels based on their type",authors:[j.creations,w.thororen],settings:kn,patches:[{find:"UNREAD_IMPORTANT:",replacement:{match:/\.Children\.count.+?:null(?<=,channel:(\i).+?)/,replace:"$&,$self.renderChannelBadges($1)"}},{find:"18V16H9v2H6Zm3",replacement:{match:/mentionsCount:\i.+?null(?<=channel:(\i).+?)/,replace:"$&,$self.renderChannelBadges($1)"}}],renderChannelBadges(e){if(!e||!t7(e.type))return null;let{type:t,nsfw:o,threadMetadata:n}=e,i=e.isPrivate()||n?.locked||e.isArchivedThread(),s=o||e.isNSFW(),a=hn.getGuildId(),l=a?ct.getGuild(a):null,c=[{id:6101,condition:i,title:"This channel is locked."},{id:6100,condition:s,title:"This channel is marked as NSFW."},{id:6102,condition:l?.rulesChannelId===e.id,title:"This channel is the server rules channel."}],u=[];if(kn.store.oneBadgePerChannel){let p=c.find(({id:m,condition:g})=>g&&t7(m));p?u.push(n7(p.id,p.title)):u.push(n7(t,o7(t).label))}else u=c.filter(({id:p,condition:m})=>m&&t7(p)).map(({id:p,title:m})=>n7(p,m)),u.push(n7(t,o7(t).label));return r("div",{className:"badge-container"},u)}})});var Q2e=x(()=>{});function i7({label:e,description:t,settingKey:o,enabledKey:n}){let s=dt.use([o])[o],[a,l]=L(!1),[c,u]=L(null),p=kt(null);se(()=>{if(!a)return;let y=v=>{if(v.preventDefault(),v.stopPropagation(),["Control","Shift","Alt","Meta"].includes(v.key))return;let E=[];ri&&v.ctrlKey?(v.ctrlKey&&E.push("CONTROL"),v.metaKey&&E.push("CTRL")):v.ctrlKey&&E.push("CTRL"),v.shiftKey&&E.push("SHIFT"),v.altKey&&E.push("ALT");let A=v.key.toUpperCase();A===" "&&(A="SPACE"),A==="ESCAPE"&&(A="ESC"),E.push(A);let C=E.join("+"),I={closeTabKeybind:dt.store.closeTabKeybind,newTabKeybind:dt.store.newTabKeybind,cycleTabForwardKeybind:dt.store.cycleTabForwardKeybind,cycleTabBackwardKeybind:dt.store.cycleTabBackwardKeybind},N=Object.entries(I).find(([_,O])=>_!==o&&O===C);if(N){u(`This keybind is already used by: ${N[0]}`),setTimeout(()=>u(null),3e3),l(!1);return}dt.store[o]=C,u(null),l(!1)},b=()=>{l(!1)};return document.addEventListener("keydown",y,!0),window.addEventListener("blur",b),p.current?.focus(),()=>{document.removeEventListener("keydown",y,!0),window.removeEventListener("blur",b)}},[a,o]);let m=()=>{let y={closeTabKeybind:"CTRL+W",newTabKeybind:"CTRL+T",cycleTabForwardKeybind:"CTRL+TAB",cycleTabBackwardKeybind:"CTRL+SHIFT+TAB"};dt.store[o]=y[o],u(null)},g=n?dt.use([n])[n]:!0;return r("div",{className:"channelTabs-keybind-input"},r("div",{className:"channelTabs-keybind-info"},r(Zs,{variant:"text-md/semibold"},e),r(Zs,{variant:"text-sm/normal",style:{color:"var(--text-muted)"}},t),!g&&r(Zs,{variant:"text-xs/normal",style:{color:"var(--text-feedback-critical)"}},"This shortcut is currently disabled"),c&&r(Zs,{variant:"text-xs/normal",className:"channelTabs-keybind-conflict"},c)),r("div",{className:"channelTabs-keybind-controls"},r("button",{ref:p,className:`channelTabs-keybind-button ${a?"listening":""}`,onClick:()=>l(!0),disabled:!g},a?"Press any key...":Rnt(s)),r(U,{size:U.Sizes.SMALL,color:U.Colors.PRIMARY,onClick:m,disabled:!g},"Reset")))}function Rnt(e){return navigator.platform.toUpperCase().includes("MAC")?e.includes("CTRL+TAB")||e.includes("CTRL+SHIFT+TAB")?e.replace("CTRL","^"):e.replace("CTRL","\u2318"):e}function Z2e(){let e=()=>{dt.store.closeTabKeybind="CTRL+W",dt.store.newTabKeybind="CTRL+T",dt.store.cycleTabForwardKeybind="CTRL+TAB",dt.store.cycleTabBackwardKeybind="CTRL+SHIFT+TAB"};return r(ee,null,r(Bt,null),r("div",{className:"channelTabs-keybind-settings"},r(re,null,"Keyboard Shortcuts"),r(W,null,"Click a button and press your desired key combination. Modifiers like CTRL, SHIFT, and ALT are supported."),r(i7,{label:"Close Tab",description:"Close the currently active tab",settingKey:"closeTabKeybind",enabledKey:"enableCloseTabShortcut"}),r(i7,{label:"New Tab",description:"Open a new tab with the current channel",settingKey:"newTabKeybind",enabledKey:"enableNewTabShortcut"}),r(i7,{label:"Cycle Tabs Forward",description:"Switch to the next tab (wraps around to first)",settingKey:"cycleTabForwardKeybind",enabledKey:"enableTabCycleShortcut"}),r(i7,{label:"Cycle Tabs Backward",description:"Switch to the previous tab (wraps around to last)",settingKey:"cycleTabBackwardKeybind",enabledKey:"enableTabCycleShortcut"}),r("div",{style:{marginTop:"16px"}},r(U,{color:U.Colors.RED,onClick:e},"Reset All to Defaults"))))}var X2e=x(()=>{"use strict";d();Ar();tt();ut();wt();kg();H();B()});function Lnt(){let e=[{label:"Tab Hover Effects (lift + scale)",value:"hover",selected:dt.store.animationHover},{label:"Selected Tab Lift Animation",value:"selection",selected:dt.store.animationSelection},{label:"Tab Drag & Drop (ghost + reorder)",value:"drag-drop",selected:dt.store.animationDragDrop},{label:"Tab Enter/Exit Slides (creation + closing)",value:"enter-exit",selected:dt.store.animationEnterExit},{label:"Icon Pop on Selection (icon scale-up)",value:"icon-pop",selected:dt.store.animationIconPop},{label:"Close Button Rotation",value:"close-rotation",selected:dt.store.animationCloseRotation},{label:"Plus Button Pulse",value:"plus-pulse",selected:dt.store.animationPlusPulse},{label:"Mention Badge Glow",value:"mention-glow",selected:dt.store.animationMentionGlow},{label:"Compact Mode Expansion",value:"compact-expand",selected:dt.store.animationCompactExpand},{label:"Selected Tab Blue Border",value:"selected-border",selected:dt.store.animationSelectedBorder},{label:"Selected Tab Background Color",value:"selected-background",selected:dt.store.animationSelectedBackground},{label:"Tab Shadow Effects",value:"tab-shadows",selected:dt.store.animationTabShadows},{label:"Tab Repositioning (smooth position changes)",value:"tab-positioning",selected:dt.store.animationTabPositioning},{label:"Resize Handle Fade",value:"resize-handle",selected:dt.store.animationResizeHandle},{label:"Active Quests Gradient",value:"quests-active",selected:dt.store.animationQuestsActive}],[t,o]=L(e.filter(s=>s.selected));function n(s){let a=s.map(l=>l.value);e.forEach(l=>{l.selected=a.includes(l.value)}),dt.store.animationHover=a.includes("hover"),dt.store.animationSelection=a.includes("selection"),dt.store.animationDragDrop=a.includes("drag-drop"),dt.store.animationEnterExit=a.includes("enter-exit"),dt.store.animationIconPop=a.includes("icon-pop"),dt.store.animationCloseRotation=a.includes("close-rotation"),dt.store.animationPlusPulse=a.includes("plus-pulse"),dt.store.animationMentionGlow=a.includes("mention-glow"),dt.store.animationCompactExpand=a.includes("compact-expand"),dt.store.animationSelectedBorder=a.includes("selected-border"),dt.store.animationSelectedBackground=a.includes("selected-background"),dt.store.animationTabShadows=a.includes("tab-shadows"),dt.store.animationTabPositioning=a.includes("tab-positioning"),dt.store.animationResizeHandle=a.includes("resize-handle"),dt.store.animationQuestsActive=a.includes("quests-active"),o(s)}function i(s){if(s.length===0){n([]);return}let a=s.filter(u=>typeof u!="string"),l=s.find(u=>typeof u=="string"),c=e.find(u=>u.value===l);c.selected?n(a.filter(u=>u.value!==l)):n([...a,c])}return r("section",null,r(re,null,"Animation Controls"),r(W,null,"Enable or disable specific animations for channel tabs. Each option can be toggled independently."),r("div",{style:{marginTop:"8px"}},r(Ii,{placeholder:"Select which animations to enable...",maxVisibleItems:12,clearable:!0,multi:!0,value:t,options:e,onChange:i,closeOnSelect:!1})))}var Gs,g4,dt,s7=x(()=>{"use strict";d();Q();ut();wt();ZK();X2e();At();$();B();Gs=new ke("ChannelTabs"),g4={Red:"var(--channeltabs-red)",Blue:"var(--channeltabs-blue)",Yellow:"var(--channeltabs-yellow)",Green:"var(--channeltabs-green)",Black:"var(--channeltabs-black)",White:"var(--channeltabs-white)",Orange:"var(--channeltabs-orange)",Pink:"var(--channeltabs-pink)"},dt=R({onStartup:{type:4,description:"On startup",options:[{label:"Do nothing (open on the friends tab)",value:"nothing",default:!0},{label:"Remember tabs from last session",value:"remember"},{label:"Open on a specific set of tabs",value:"preset"}]},tabSet:{component:J2e,type:6,default:{}},noPomeloNames:{description:"Use display names instead of usernames for DM's",type:3,default:!1},showStatusIndicators:{description:"Show status indicators for DM's",type:3,default:!0},showBookmarkBar:{description:"",type:3,default:!0},bookmarkNotificationDot:{description:"Show notification dot for bookmarks",type:3,default:!0},widerTabsAndBookmarks:{description:"Extend the length of tabs and bookmarks for larger monitors",type:3,default:!1,restartNeeded:!1},tabWidthScale:{type:1,description:"Tab width scale (percentage) - adjustable by dragging tab edges",default:100,hidden:!0,restartNeeded:!1},renderAllTabs:{type:3,description:"Keep all tabs cached in memory for faster switching (caches scroll position and state)",default:!1,restartNeeded:!1},switchToExistingTab:{type:3,description:"Switch to tab if it already exists for the channel you're navigating to",default:!1,restartNeeded:!1},createNewTabIfNotExists:{type:3,description:"Create a new tab if one doesn't exist for the channel you're navigating to",default:!1,restartNeeded:!1},enableRapidNavigation:{type:3,description:"Enable rapid navigation behavior - quickly navigating between channels will replace the current tab instead of creating new ones",default:!1,restartNeeded:!1},rapidNavigationThreshold:{type:5,description:"Time window (in seconds) for rapid navigation. Within this time, new channels replace the current tab instead of creating new ones.",markers:[1,2,3,5,10,20,30,40,50,60],default:3,stickToMarkers:!1},tabBarPosition:{type:4,description:"Where to show the tab bar.",options:[{label:"Top",value:"top",default:!0},{label:"Bottom",value:"bottom"}],restartNeeded:!0},enableNumberKeySwitching:{type:3,description:"Enable number keys (1-9) to switch tabs",default:!0,restartNeeded:!1},numberKeySwitchCount:{type:5,description:"Number of tabs accessible via number keys (1-9)",markers:uo(1,9,1),default:3,stickToMarkers:!0},enableCloseTabShortcut:{type:3,description:"Enable close tab keyboard shortcut",default:!0,restartNeeded:!1},enableNewTabShortcut:{type:3,description:"Enable new tab keyboard shortcut",default:!0,restartNeeded:!1},enableTabCycleShortcut:{type:3,description:"Enable tab cycling keyboard shortcut",default:!0,restartNeeded:!1},keybindsSection:{type:6,component:Z2e},closeTabKeybind:{type:0,description:"Keyboard shortcut to close the current tab",default:"CTRL+W",hidden:!0},newTabKeybind:{type:0,description:"Keyboard shortcut to open a new tab",default:"CTRL+T",hidden:!0},cycleTabForwardKeybind:{type:0,description:"Keyboard shortcut to cycle to the next tab",default:"CTRL+TAB",hidden:!0},cycleTabBackwardKeybind:{type:0,description:"Keyboard shortcut to cycle to the previous tab",default:"CTRL+SHIFT+TAB",hidden:!0},showTabNumbers:{type:3,description:"Show numbered badges on tabs to indicate keyboard shortcuts",default:!1,restartNeeded:!1},tabNumberPosition:{type:4,description:"Where to display the numbered badge on tabs",options:[{label:"Left side (before icon)",value:"left",default:!0},{label:"Right side (after content)",value:"right"}],restartNeeded:!1},animations:{type:6,component:Lnt},animationHover:{type:3,description:"Enable hover lift and scale effects",default:!0,hidden:!0},animationSelection:{type:3,description:"Enable selection animations (border glow, lift)",default:!0,hidden:!0},animationDragDrop:{type:3,description:"Enable drag and drop ghost effects",default:!0,hidden:!0},animationEnterExit:{type:3,description:"Enable tab creation/closing slide animations",default:!0,hidden:!0},animationIconPop:{type:3,description:"Enable icon scale-up animation on selection",default:!0,hidden:!0},animationCloseRotation:{type:3,description:"Enable rotation animation for close buttons",default:!0,hidden:!0},animationPlusPulse:{type:3,description:"Enable pulse animation for plus button",default:!0,hidden:!0},animationMentionGlow:{type:3,description:"Enable pulsing red glow for mentions",default:!0,hidden:!0},animationCompactExpand:{type:3,description:"Enable smooth expansion for compact tabs",default:!0,hidden:!0},animationSelectedBorder:{type:3,description:"Enable border and glow styling for selected tabs",default:!0,hidden:!0},animationSelectedBackground:{type:3,description:"Enable background color change for selected tabs",default:!0,hidden:!0},animationTabShadows:{type:3,description:"Enable shadow effects on tabs",default:!0,hidden:!0},animationTabPositioning:{type:3,description:"Enable smooth transitions when tabs move positions",default:!0,hidden:!0},animationResizeHandle:{type:3,description:"Enable fade animation for resize handle",default:!0,hidden:!0},animationQuestsActive:{type:3,description:"Enable gradient animations on Quests tab when quests are actively running",default:!0,hidden:!0},compactAutoExpandSelected:{type:3,description:"Automatically expand compact tabs when selected to show the full channel name",default:!0,restartNeeded:!1},compactAutoExpandOnHover:{type:3,description:"Automatically expand compact tabs on hover to show the full channel name",default:!0,restartNeeded:!1},openInNewTabAutoSwitch:{type:3,description:"Automatically switch to new tabs opened from 'Open in New Tab' context menu",default:!0,restartNeeded:!1},bookmarksIndependentFromTabs:{type:3,description:"Bookmarks navigate independently without affecting the active tabs bar",default:!0,restartNeeded:!1},showResizeHandle:{type:3,description:"Show resize handle when hovering over tabs to adjust tab width",default:!0,restartNeeded:!1},openNewTabsInCompactMode:{type:3,description:"Open all newly created tabs in compact mode by default",default:!1,restartNeeded:!1},newTabButtonBehavior:{type:3,description:"New tab (+) button follows tabs instead of staying pinned to the right",default:!0,restartNeeded:!1},oneTabPerServer:{type:3,description:"Limit to one tab per server, so opening a new channel in that server will use the existing tab.",default:!1,restartNeeded:!1},maxOpenTabs:{type:5,description:"Maximum number of open tabs (0 = unlimited)",markers:uo(0,20,1),default:0,stickToMarkers:!0,restartNeeded:!1}})});function Gr(e){return"bookmarks"in e}function a7(e){if(Gr(e))return"Folder";let{channelId:t}=e;if(t?.startsWith("__"))return{__quests__:"Quests","__message-requests__":"Message Requests",__friends__:"Friends",__shop__:"Shop",__library__:"Library",__discovery__:"Discovery",__nitro__:"Nitro",__icymi__:"ICYMI",__activity__:"Activity"}[t]||"Special Page";let o=ne.getChannel(t);return o?o.name?`#${o.name}`:o.recipients?z.getUser(o.recipients?.[0])?.username??"Unknown User":"Bookmark":"Bookmark"}function XK(e){let[t,o]=L({}),n=gn(s=>{o(s),Oe.update("ChannelTabs_bookmarks",a=>({...a,[e]:s[e]}))},[e]);Cr(()=>Oe.get("ChannelTabs_bookmarks"),{fallbackValue:void 0,onSuccess(s){s||(s={[e]:[]},Oe.set("ChannelTabs_bookmarks",{[e]:[]})),s[e]||(s[e]=[]),n(s)}});let i={addBookmark:(s,a)=>{if(!t)return;if(typeof a=="number"&&!Gr(t[e][a]))return Gs.error("Attempted to add bookmark to non-folder "+a,t);let l=s.name??a7(s);typeof a=="number"?t[e][a].bookmarks.push({...s,name:l}):t[e].push({...s,name:l}),n({...t})},addFolder(){if(!t)return;let s=t[e].push({name:"Folder",iconColor:g4.Black,bookmarks:[]});return n({...t}),s-1},editBookmark(s,a){t&&(Object.entries(a).forEach(([l,c])=>{t[e][s][l]=c}),n({...t}))},deleteBookmark(s,a){if(t){if(s<0||s>t[e].length-1)return Gs.error("Attempted to delete bookmark at index "+s,t);typeof a=="number"?t[e][a].bookmarks.splice(s,1):t[e].splice(s,1),n({...t})}},moveDraggedBookmarks(s,a){if(s<0||a>t[e].length)return Gs.error(`Out of bounds drag (swap between indexes ${s} and ${a})`,t);let l=t[e].splice(s,1)[0];t[e].splice(a,0,l),n({...t})}};return[t[e],i]}var V2e=x(()=>{"use strict";d();dr();qo();B();s7()});var h4,x4,y4,b4,v4,zv,JK,VK,S4,l7=x(()=>{"use strict";d();fe();h4=De("10.47a.76.76"),x4=De("M2.63 4.19A3"),y4=De("M1.16 5.02c-.1.28"),b4=De("M7.74 9.3A2 2 0 0 1 9.3 7.75l7.22"),v4=De("M16.23 12c0 1.29-.95 2.25"),zv=De("12h1a8"),JK=De("0-.66-1.75h-4.81a"),VK=De("17.3 9 16.8 9 15.92V8.1Z"),S4=De("10.58l-3.3-3.3a1")});function A4(){return dt.store.bookmarksIndependentFromTabs&&E4}function u7(){return w4}function eY(){clearTimeout(c7),w4=!1}function d7(){E4=!1}function k4(e,t,o){Eg={guildId:e||"@me",channelId:t,timestamp:Date.now(),source:o}}function tY(e,t,o){if(!Eg)return!1;let n=e||"@me";return(Eg.guildId||"@me")===n&&Eg.channelId===t&&Eg.source===o}function oY(){Eg&&Date.now()-Eg.timestamp>2e3&&(Eg=null)}function xy(e,...t){let o=e.length;for(let n=0;n<o;n++)e.pop();e.push(...t)}function ka(e,t,o,n=!0,i=!1){if(!i&&dt.store.oneTabPerServer&&e.guildId&&e.guildId!=="@me"){let u=Xt.find(p=>p.guildId===e.guildId);if(u){u.channelId=e.channelId,u.messageId=o,u.compact="compact"in e?e.compact:dt.store.openNewTabsInCompactMode,t?Es(u.id):bl(n);return}}let s=dt.store.maxOpenTabs;if(s>0&&Xt.length>=s){let u=Xt.find(p=>p.id===Ha);u&&(u.channelId=e.channelId,u.guildId=e.guildId,u.messageId=o,u.compact="compact"in e?e.compact:dt.store.openNewTabsInCompactMode,t?bl(n):Es(u.id));return}let c=Fnt();Xt.push({...e,id:c,messageId:o,compact:"compact"in e?e.compact:dt.store.openNewTabsInCompactMode}),t&&Es(c),nY(),bl(n)}function Ag(e){if(Xt.length<=1)return;let t=Xt.findIndex(n=>n.id===e);if(t===-1)return Gs.error("Couldn't find channel tab with ID "+e,Xt);let o=Xt.splice(t,1);if(yy.push(...o),Af.delete(e),e===Ha)if(Zp.length){Zp.pop();let n;for(;!n;){let i=Zp.at(-1);if(Zp.pop(),!i){let a=t<Xt.length?t:0;Es(Xt[a].id);break}let s=Xt.find(a=>a.id===i);s&&(n=s)}n&&(Es(n.id),Zp.pop())}else{let n=t<Xt.length?t:0;Es(Xt[n].id)}t!==Xt.length?iSe():nY(),bl()}function rY(e){let t=Xt.find(i=>i.id===e);if(t===void 0)return Gs.error("Couldn't find channel tab with ID "+e,Xt);let o=Xt.filter(i=>i.id!==e);yy.push(...o.reverse());let n=Xt.find(i=>i.id===Ha);xy(Xt,t),m7(e),xy(Zp,e),t.channelId!==n.channelId?Es(e):bl()}function iY(e){let t=Xt.findIndex(i=>i.id===e);if(t===-1)return Gs.error("Couldn't find channel tab with ID "+e,Xt);let o=Xt.filter((i,s)=>s>t);yy.push(...o.reverse());let n=Xt.filter((i,s)=>s<=t);xy(Xt,...n),n.some(i=>i.id===Ha)?bl():Es(Xt.at(-1).id)}function sY(e){let t=Xt.findIndex(i=>i.id===e);if(t===-1)return Gs.error("Couldn't find channel tab with ID "+e,Xt);let o=Xt.filter((i,s)=>s<t);yy.push(...o.reverse());let n=Xt.filter((i,s)=>s>=t);xy(Xt,...n),n.some(i=>i.id===Ha)?bl():Es(Xt[0].id)}function by(e){if(!e.channelId||A4())return;let t=Xt.find(i=>i.id===Ha),o=e.guildId||"@me",n=Xt.find(i=>{let s=i.guildId||"@me";return i.channelId===e.channelId&&s===o});if(dt.store.switchToExistingTab&&n){Es(n.id);return}if(dt.store.createNewTabIfNotExists){let i=Date.now(),s=i-nSe<dt.store.rapidNavigationThreshold*1e3;if(nSe=i,s&&dt.store.enableRapidNavigation){let a=Xt.find(l=>l.id===Ha);if(a&&a.channelId!==e.channelId){a.channelId=e.channelId,a.guildId=e.guildId,bl();return}}n||ka(e,!0);return}t&&t.channelId!==e.channelId&&(Xt[Xt.indexOf(t)]={id:t.id,compact:t.compact,...e},bl())}function aY(){return!!yy.length}function jd(e){return E4&&dt.store.bookmarksIndependentFromTabs?!1:e===Ha}function lY(e,t){if(e<0||e>=Xt.length||t<0||t>=Xt.length)return Gs.error(`Out of bounds drag (swap between indexes ${e} and ${t})`,Xt);let o=Xt.splice(e,1)[0];if(!o)return Gs.error(`Tab at index ${e} is undefined`,Xt);Xt.splice(t,0,o),bl()}function sSe(){return document.querySelector('[class*="scrollerInner"]')}function Hnt(){let e=Date.now();for(let[t,o]of Af.entries())e-o.timestamp>Unt&&Af.delete(t);if(Af.size>oSe){let o=Array.from(Af.entries()).sort((n,i)=>n[1].timestamp-i[1].timestamp).slice(0,Af.size-oSe);for(let[n]of o)Af.delete(n)}}function znt(){if(!dt.store.renderAllTabs)return;let e=sSe();e&&Ha!==void 0&&(Hnt(),Af.set(Ha,{scrollPosition:e.scrollTop,timestamp:Date.now()}))}function Gnt(e){if(!dt.store.renderAllTabs)return;let t=Af.get(e);t&&requestAnimationFrame(()=>{setTimeout(()=>{let o=sSe();o&&(o.scrollTop=t.scrollPosition)},50)})}function Es(e){let t=Xt.find(o=>o.id===e);if(t===void 0)return Gs.error("Couldn't find channel tab with ID "+e,Xt);if(E4=!1,znt(),m7(e),clearTimeout(c7),w4=!0,t.channelId&&t.channelId.startsWith("__")){let n={__quests__:"/quest-home","__message-requests__":"/message-requests",__friends__:"/channels/@me",__shop__:"/shop",__library__:"/library",__discovery__:"/discovery",__nitro__:"/store",__icymi__:"/icymi",__activity__:"/channels/@me/activity"}[t.channelId];if(n){k4(t.guildId,t.channelId,"tab"),ho.transitionTo(n),c7=setTimeout(()=>{w4=!1},eSe);return}}t.messageId?(k4(t.guildId,t.channelId,"tab"),ho.transitionTo(`/channels/${t.guildId}/${t.channelId}/${t.messageId}`),delete Xt[Xt.indexOf(t)].messageId):t.channelId!==st.getChannelId()||t.guildId!==hn.getGuildId()?(k4(t.guildId,t.channelId,"tab"),ho.transitionToGuild(t.guildId,t.channelId),Gnt(e)):bl(),c7=setTimeout(()=>{w4=!1},eSe)}function cY(e,t){let{userId:o}=e;if(tSe??=Oe.get("ChannelTabs_openChannels_v2"),xy(Xt),xy(Zp),rSe=0,dt.store.onStartup!=="nothing"&&yt("KeepCurrentChannel"))return Re("Not restoring tabs as KeepCurrentChannel is enabled",D.Type.FAILURE);switch(dt.store.onStartup){case"remember":{tSe.then(n=>{let i=n?.[o];if(!i)return ka({channelId:e.channelId,guildId:e.guildId},!0),Re("Failed to restore tabs",D.Type.FAILURE);xy(Xt),i.openTabs.forEach(s=>ka(s)),Ha=Xt[i.openTabIndex]?.id??0,t(o),Es(Ha)}).catch(n=>{Gs.error("Failed to load persisted tabs from DataStore",n),Re("Failed to load saved tabs",D.Type.FAILURE),ka({channelId:e.channelId,guildId:e.guildId},!0),t(o)});break}case"preset":{let n=dt.store.tabSet?.[o];if(!n)break;n.forEach(i=>ka(i)),m7(0),t(o);break}default:t(o)}Xt.length||ka({channelId:e.channelId,guildId:e.guildId},!0,void 0,!1);for(let n=0;n<Zp.length;n++)Zp.pop();Es(Ha)}function uY(){if(!yy.length)return;let e=yy.pop();ka(e,!0)}function m7(e){if(Xt.findIndex(o=>o.id===e)===-1)return Gs.error("Couldn't find channel tab with ID "+e,Xt);Ha=e,Zp.push(e)}function dY(e){bl=e}function pY(e){by(e),Es(Xt.find(t=>t.id===Ha).id)}function f7(e){if(dt.store.bookmarksIndependentFromTabs){if(E4=!0,k4(e.guildId,e.channelId,"bookmark"),e.channelId&&e.channelId.startsWith("__")){let o={__quests__:"/quest-home","__message-requests__":"/message-requests",__friends__:"/channels/@me",__shop__:"/shop",__library__:"/library",__discovery__:"/discovery",__nitro__:"/store",__icymi__:"/icymi",__activity__:"/channels/@me/activity"}[e.channelId];if(o){ho.transitionTo(o),bl();return}}ho.transitionToGuild(e.guildId,e.channelId),bl()}else pY(e)}function mY(e){let t=Xt.findIndex(o=>o.id===e);if(t===-1)return Gs.error("Couldn't find channel tab with ID "+e,Xt);Xt[t]={...Xt[t],compact:!Xt[t].compact},bl()}function fY(){let e=kt(void 0),[t,o]=L(0);return iSe=()=>{o(n=>n+1),clearTimeout(e.current),e.current=setTimeout(()=>{o(0)},3e3)},nY=()=>{clearTimeout(e.current),o(0)},se(()=>()=>{clearTimeout(e.current)},[]),new Array(t).fill(r("div",{className:Ont("tab","ghost-tab")}))}var Ont,Eg,E4,w4,c7,eSe,rSe,Fnt,Xt,yy,Ha,Zp,tSe,Af,oSe,Unt,$nt,Mn,bl,iSe,nY,nSe,p7,aSe=x(()=>{"use strict";d();dr();Wo();nt();B();s7();Ont=de("vc-channeltabs-"),Eg=null,E4=!1,w4=!1,eSe=1e3;rSe=0,Fnt=()=>rSe++,Xt=[],yy=[],Zp=[],Af=new Map,oSe=50,Unt=1800*1e3,$nt={get openedTabs(){return Xt}},{openedTabs:Mn}=$nt,bl=(e=!0)=>{Gs.warn("Update function not set")},iSe=()=>{Gs.warn("Set ghost tab function not set")},nY=()=>{Gs.warn("Clear ghost tab function not set")};nSe=0;p7=async e=>{e&&Oe.update("ChannelTabs_openChannels_v2",t=>({...t??{},[e]:{openTabs:Xt,openTabIndex:Xt.findIndex(o=>o.id===Ha)}}))}});var lSe=x(()=>{"use strict";d()});var gY={};Ao(gY,{ActivityIcon:()=>VK,CircleQuestionIcon:()=>S4,DiscoveryIcon:()=>b4,EnvelopeIcon:()=>y4,FriendsIcon:()=>zv,ICYMIIcon:()=>JK,NitroIcon:()=>v4,QuestIcon:()=>h4,ShopIcon:()=>x4,bookmarkFolderColors:()=>g4,bookmarkPlaceholderName:()=>a7,clearBookmarkViewingMode:()=>d7,clearNavigationFlag:()=>eY,clearStaleNavigationContext:()=>oY,closeOtherTabs:()=>rY,closeTab:()=>Ag,closeTabsToTheLeft:()=>sY,closeTabsToTheRight:()=>iY,createTab:()=>ka,handleChannelSwitch:()=>by,hasClosedTabs:()=>aY,isBookmarkFolder:()=>Gr,isNavigatingViaTab:()=>u7,isNavigationFromSource:()=>tY,isTabSelected:()=>jd,isViewingViaBookmarkMode:()=>A4,logger:()=>Gs,moveDraggedTabs:()=>lY,moveToTab:()=>Es,navigateToBookmark:()=>f7,openStartupTabs:()=>cY,openedTabs:()=>Mn,reopenClosedTab:()=>uY,saveTabs:()=>p7,setNavigationSource:()=>k4,setOpenTab:()=>m7,setUpdaterFunction:()=>dY,settings:()=>dt,switchChannel:()=>pY,toggleCompactTab:()=>mY,useBookmarks:()=>XK,useGhostTabs:()=>fY});var kg=x(()=>{"use strict";d();V2e();s7();l7();aSe();lSe()});var cSe=x(()=>{});function y7(e,t){let o=t??z.getCurrentUser()?.id;if(!o)return;let{ignoredQuestProfile:n}=Ke.store,i=n==="shared"?"shared":o;Ke.store.ignoredQuestIDs[i]=e}function Tg(e){let t=e??z.getCurrentUser()?.id;if(!t)return[];let{ignoredQuestIDs:o,ignoredQuestProfile:n}=Ke.store,i=n==="shared"?"shared":t;return o[i]??=[],o[i]}function Ig(e){let t=e.config.taskConfigV2?.tasks;return t.PLAY_ON_DESKTOP||t.PLAY_ON_XBOX||t.PLAY_ON_PLAYSTATION||t.PLAY_ACTIVITY||t.WATCH_VIDEO||t.WATCH_VIDEO_ON_MOBILE||t.ACHIEVEMENT_IN_ACTIVITY}function b7(e,t){let o=wo.get(e.id);if(o)return o.progress;let n=e.userStatus?.progress;if(!n)return null;if(t.type==="WATCH_VIDEO"||t.type==="WATCH_VIDEO_ON_MOBILE"){let i=n.WATCH_VIDEO?.value,s=n.WATCH_VIDEO_ON_MOBILE?.value;return i!==void 0||s!==void 0?Math.max(i??0,s??0):null}return n[t.type]?.value??null}function qv(e){let t=e.type==="WATCH_VIDEO"||e.type==="WATCH_VIDEO_ON_MOBILE",o=e.target,n=o-(t?hY:0);return{raw:o,adjusted:n}}function Xp(e,t=!0){let o=e.userStatus?.completedAt,n=e.userStatus?.claimedAt,i=new Date(e.config.expiresAt)<new Date,s=A7(e.id);return n?"CLAIMED":t&&s&&(!i||o)?"IGNORED":o||!i?"UNCLAIMED":i?"EXPIRED":"UNKNOWN"}function C4(e){return vl.getQuest(e.id)??e}function uSe(e){return VencordNative.csp.isDomainAllowed(e,["img-src"])}function g7(e){return Array.isArray(e)?e.map(g7):e&&typeof e=="object"?Object.fromEntries(Object.entries(e).map(([t,o])=>[t.replace(/_([a-z])/g,(n,i)=>i.toUpperCase()),g7(o)])):e}function Mo(){return new Date().toLocaleString(void 0,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}).replace(",","")}function Fc(e){let t=e>>16&255,o=e>>8&255,n=e&255;return{r:t,g:o,b:n}}function jv(e,t){let o={...e};return o.r=Math.max(0,Math.min(255,o.r+t)),o.g=Math.max(0,Math.min(255,o.g+t)),o.b=Math.max(0,Math.min(255,o.b+t)),o}function Cf(e,t=.5){return(.299*e.r+.587*e.g+.114*e.b)/255<t}function xY(e,t=[],o=!0,n=!1,i=!0,s=!1){let a=e.trim();if(!a)return o;function l(p){return s?p.trim():p.trim().toLowerCase()}let c=new Set(t.map(p=>l(p))),u=new Set;for(let p of a.split(",")){if(p=l(p),!p||!c.has(p)||i&&u.has(p))return!1;u.add(p)}return!n||c.size===u.size}function Jp(e){let t=e.trim().toUpperCase();return t.endsWith("QUEST")?t.slice(0,-5).trim():t}async function Wv(e,t){try{let{body:o}=g7(await Ht.get({url:"/quests/@me",retries:3}));return V.dispatch({type:"QUESTS_FETCH_CURRENT_QUESTS_SUCCESS",excludedQuests:o.excludedQuests,questEnrollmentBlockedUntil:o.questEnrollmentBlockedUntil,quests:o.quests,...e!==void 0&&{source:e}}),o.quests}catch(o){return t?.warn(`[${Mo()}] Failed to fetch and dispatch Quests:`,o),null}}async function v7(e,t=3e4,o=500,n){let i=Jp(e.config.messages.questName),s=Date.now();if(e.userStatus?.enrolledAt)return n?.info(`[${Mo()}] Quest ${i} is already enrolled.`),!0;if(e.userStatus?.completedAt)return n?.warn(`[${Mo()}] Cannot enroll in completed Quest ${i}.`),!1;for(n?.info(`[${Mo()}] Waiting for enrollment in Quest ${i}...`);!e.userStatus?.enrolledAt&&Date.now()-s<t;)await new Promise(a=>setTimeout(a,o)),e=C4(e);return e.userStatus?.enrolledAt?(n?.info(`[${Mo()}] Successfully waited for enrollment in Quest ${i}.`),!0):(n?.warn(`[${Mo()}] Timeout waiting for enrollment in Quest ${i}.`),!1)}async function S7(e,t,o,n){let i=Jp(e.config.messages.questName);if(e.userStatus?.enrolledAt){if(e.userStatus?.completedAt)return!0}else return o?.warn(`[${Mo()}] Cannot report progress for unenrolled Quest ${i}.`),!1;let s=n?.attempts??1,a=n?.delay??2500;for(let l=1;l<=s;l++)try{let c=await Ht.post({url:`/quests/${e.id}/video-progress`,body:{timestamp:t}});if(!c||!c.body){o?.warn(`[${Mo()}] No response body received while reporting video progress for Quest ${i} on attempt ${l}/${s}.`),l<s&&await new Promise(u=>setTimeout(u,a));continue}return o?.info(`[${Mo()}] Quest ${i} progress reported: ${t} seconds.`),!0}catch(c){o?.error(`[${Mo()}] Failed to report progress for Quest ${i} on attempt ${l}/${s}:`,c),l<s&&await new Promise(u=>setTimeout(u,a))}return o?.warn(`[${Mo()}] Exhausted all ${s} attempts to report progress for Quest ${i}.`),!1}async function T4(e,t,o,n){let i=Jp(e.config.messages.questName);if(e.userStatus?.enrolledAt){if(e.userStatus?.completedAt)return{progress:null}}else return o?.warn(`[${Mo()}] Cannot send heartbeat for unenrolled Quest ${i}.`),{progress:null};let s=n?.attempts??1,a=n?.delay??2500;for(let l=1;l<=s;l++)try{let c=await Ht.post({url:`/quests/${e.id}/heartbeat`,body:{stream_key:`call:${e.id}:1`,terminal:t}});if(!c||!c.body){o?.warn(`[${Mo()}] No response body received while sending heartbeat for Quest ${i} on attempt ${l}/${s}.`),l<s&&await new Promise(y=>setTimeout(y,a));continue}let{body:u}=g7(c),p=u.progress.PLAY_ON_DESKTOP||u.progress.PLAY_ON_XBOX||u.progress.PLAY_ON_PLAYSTATION||u.progress.PLAY_ACTIVITY,m=e.config.taskConfigV2?.tasks.PLAY_ON_DESKTOP||e.config.taskConfigV2?.tasks.PLAY_ON_XBOX||e.config.taskConfigV2?.tasks.PLAY_ON_PLAYSTATION||e.config.taskConfigV2?.tasks.PLAY_ACTIVITY,g=p?.value||1;return m?(o?.info(`[${Mo()}] Heartbeat sent for Quest ${i} with progress: ${g}/${m.target}.`),{progress:g}):(o?.warn(`[${Mo()}] Could not recognize the Quest type for Quest ${i}.`),{progress:null})}catch(c){o?.error(`[${Mo()}] Failed to send heartbeat for Quest ${i} on attempt ${l}/${s}:`,c),l<s&&await new Promise(u=>setTimeout(u,a))}return o?.warn(`[${Mo()}] Exhausted all ${s} attempts to send heartbeat for Quest ${i}.`),{progress:null}}function vy(e,t){let o=e.length,n=t?3:0;return o===1?16:o===2?21:21+(o-2)*8-n}function w7(e,t=4){let o=e<0,n=Math.abs(e);if(t<=0){let u=o?`-${n}`:`${n}`;return[u,vy(u,o)]}if(String(n).length<=t){let u=o?`-${n}`:`${n}`;return[u,vy(u,o)]}if(n<1e3){if(t===1)if(n<100){let u=o?"<-9":"9+";return[u,vy(u,o)]}else{let u=o?"<-99":"99+";return[u,vy(u,o)]}else if(t===2){let u=o?"<-99":"99+";return[u,vy(u,o)]}}let a=n,l=["K","M","B"],c="";for(let u=0;u<l.length;u++){let p=Math.floor(a/1e3);if(p===0)break;if(u===l.length-1&&p>=1e3){a=999,c=l[u];break}a=p,c=l[u]}if(o){let u=`<-${a}${c}`;return[u,vy(u,!0)]}else{let u=`${a}${c}+`;return[u,vy(u,!1)]}}var _e,Yo,vl,Cg,hY,h7,Gv,x7,k7=x(()=>{"use strict";d();nt();At();fe();B();I4();yY();E7();_e=de("questify-"),Yo=new ke("Questify"),vl=He("getQuest"),Cg="/quest-home",hY=24,h7=0,Gv=1,x7=2});function mSe(e,t,o){return r("svg",{viewBox:"0 0 24 24",height:e,width:t,fill:"none",className:o},r("path",{fill:"currentColor",d:"M12 3a1 1 0 0 0-1-1h-.06a1 1 0 0 0-.74.32L5.92 7H3a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h2.92l4.28 4.68a1 1 0 0 0 .74.32H11a1 1 0 0 0 1-1V3ZM15.1 20.75c-.58.14-1.1-.33-1.1-.92v-.03c0-.5.37-.92.85-1.05a7 7 0 0 0 0-13.5A1.11 1.11 0 0 1 14 4.2v-.03c0-.6.52-1.06 1.1-.92a9 9 0 0 1 0 17.5Z",className:""}),r("path",{fill:"currentColor",d:"M15.16 16.51c-.57.28-1.16-.2-1.16-.83v-.14c0-.43.28-.8.63-1.02a3 3 0 0 0 0-5.04c-.35-.23-.63-.6-.63-1.02v-.14c0-.63.59-1.1 1.16-.83a5 5 0 0 1 0 9.02Z"}))}function C7(e,t,o){return r("svg",{viewBox:"0 0 24 24",height:e,width:t,fill:"none",className:o},r("path",{fill:"currentColor",d:"M7.5 21.7a8.95 8.95 0 0 1 9 0 1 1 0 0 0 1-1.73c-.6-.35-1.24-.64-1.9-.87.54-.3 1.05-.65 1.52-1.07a3.98 3.98 0 0 0 5.49-1.8.77.77 0 0 0-.24-.95 3.98 3.98 0 0 0-2.02-.76A4 4 0 0 0 23 10.47a.76.76 0 0 0-.71-.71 4.06 4.06 0 0 0-1.6.22 3.99 3.99 0 0 0 .54-5.35.77.77 0 0 0-.95-.24c-.75.36-1.37.95-1.77 1.67V6a4 4 0 0 0-4.9-3.9.77.77 0 0 0-.6.72 4 4 0 0 0 3.7 4.17c.89 1.3 1.3 2.95 1.3 4.51 0 3.66-2.75 6.5-6 6.5s-6-2.84-6-6.5c0-1.56.41-3.21 1.3-4.51A4 4 0 0 0 11 2.82a.77.77 0 0 0-.6-.72 4.01 4.01 0 0 0-4.9 3.96A4.02 4.02 0 0 0 3.73 4.4a.77.77 0 0 0-.95.24 3.98 3.98 0 0 0 .55 5.35 4 4 0 0 0-1.6-.22.76.76 0 0 0-.72.71l-.01.28a4 4 0 0 0 2.65 3.77c-.75.06-1.45.33-2.02.76-.3.22-.4.62-.24.95a4 4 0 0 0 5.49 1.8c.47.42.98.78 1.53 1.07-.67.23-1.3.52-1.91.87a1 1 0 1 0 1 1.73Z"}))}function Qnt(e){return r(Ynt,{...e})}function Znt(e){return r(Knt,{...e})}function T7({id:e,className:t="vc-server-list-item",icon:o,tooltip:n,showPill:i=!0,isVisible:s,isSelected:a,hasUnread:l,lowerBadgeProps:c,upperBadgeProps:u,onClick:p,onContextMenu:m,onMouseDown:g}){let y=t.split(" ")||["vc-server-list-item"],b=`${y.join(" ")}-container`,v=`${y.join(" ")}-icon-container`,E=`${y.join(" ")}-server-list-button-container`,A=`${y.join(" ")}-pill-container`,C=`${y.join(" ")}-button`,I=`${y.join(" ")}-pill`,N=`${I} selected`,_=`${I} hovered`,O=`${y.join(" ")}-lower-badge`,F=`${y.join(" ")}-upper-badge`,[J,G]=L(!1),te=s??!0,K=a??!1,oe=l??!1,le=c?{...c,className:c.className??O}:null,he=le?{width:w7(le.count,le.maxDigits)[1]}:null,Ae=!le||le.count===0?null:Znt({...le,style:{...le.style||{},...he||{}}}),Ce=u?{...u,className:u.className??F}:null,ye=Ce?Qnt(Ce):null,ce=o?r("div",{className:v},o):void 0,pe={...ce&&{icon:()=>ce},...n!==void 0&&{tooltip:n},...p!==void 0&&{onClick:p},...g!==void 0&&{onMouseDown:g},...m!==void 0&&{onContextMenu:m},...Ae&&he?{lowerBadgeSize:he}:{},...Ae?{lowerBadge:Ae}:{},...ye?{upperBadge:ye}:{}};return r(ee,null,te&&r("div",{...e!==void 0?{id:e}:{},className:b},r("div",{className:A},r(Wnt,{unread:oe&&i,selected:K&&i,hovered:J&&i,className:K?N:J?_:I})),r("div",{className:E},r(jnt,{showPill:!1,selected:K,className:C,onMouseEnter:()=>G(!0),onMouseLeave:()=>G(!1),...pe}))))}var jnt,Wnt,Knt,Ynt,bY,pSe,vY,D4,E7=x(()=>{"use strict";d();Ad();fe();B();k7();jnt=De("tooltip:","lowerBadgeSize:"),Wnt=De('"pill":"empty"'),Knt=De("BADGE_NOTIFICATION_BACKGROUND","let{count:"),Ynt=De("{icon:",".ROUND,disableColor"),bY=De(",{label:",",description:",",required:",",errorMessage:",",children:"),pSe=De(".rowIndex,trackGuildAndChannelMetadata"),vY=(a=>(a[a.UNKNOWN=0]="UNKNOWN",a[a.REWARD_CODE=1]="REWARD_CODE",a[a.IN_GAME=2]="IN_GAME",a[a.COLLECTIBLE=3]="COLLECTIBLE",a[a.VIRTUAL_CURRENCY=4]="VIRTUAL_CURRENCY",a[a.FRACTIONAL_PREMIUM=5]="FRACTIONAL_PREMIUM",a))(vY||{});D4=e=>r(Ii,{...e})});function vSe(e){return SY.add(e),()=>SY.delete(e)}function Tf(){Ke.store.triggerQuestsRerender=!Ke.store.triggerQuestsRerender,SY.forEach(e=>e())}function wY(e,t){let{questRewardIncludeRewardCode:o,questRewardIncludeNitroCode:n,questRewardIncludeCollectibles:i,questRewardIncludeInGame:s,questRewardIncludeOrbs:a}=Ke.store,l={1:o,2:s,3:i,4:a,5:n},c=Array.from(vl.quests.values());Wv(e,t).then(u=>{if(u!==null&&Array.isArray(u)&&c.length>0){let p=new Set(c.map(y=>y.id)),m=u.filter(y=>!p.has(y.id)),g=m.filter(y=>{let b=kSe(y);return b in l&&l[b]});if(m.length>0){let y=Ke.store.fetchingQuestsAlert;y&&g.length>0?(t.info(`[${Mo()}] New Quests detected. Playing alert sound.`),_s(y,{volume:Ke.store.fetchingQuestsAlertVolume})):t.info(`[${Mo()}] New Quests detected.`)}}})}function M7(e){e&&AY()?kY():EY()}function kY(e){Sy&&(clearInterval(Sy),Sy=null);let t=e?e*1e3:Ke.store.fetchingQuestsInterval*1e3;Yo.info(`[${Mo()}] Starting AutoFetch of Quests every ${(t/6e4).toFixed(2)} minutes.`),Sy=setInterval(()=>{wY("Questify-AutoFetch",Yo)},t)}function EY(){Sy&&(Yo.info(`[${Mo()}] Stopping AutoFetch of Quests.`),clearInterval(Sy),Sy=null)}function AY(){let e=Ke.store.questButtonDisplay,t=Ke.store.questButtonUnclaimed,o=!Ke.store.disableQuestsEverything&&!Ke.store.disableQuestsFetchingQuests;return e==="always"?o&&["pill","badge","both"].includes(t):e==="unclaimed"?o:!1}function SSe(e){let o=Tg().filter(n=>n!==e);If(o)}function wSe(e){let o=Tg().concat(e);If(o)}function A7(e){return Tg().includes(e)}function kSe(e){let t=e.config.rewardsConfig.rewards[0];return t.type in vY?t.type:0}function nrt(e,t){let{questRewardIncludeRewardCode:o,questRewardIncludeNitroCode:n,questRewardIncludeCollectibles:i,questRewardIncludeInGame:s,questRewardIncludeOrbs:a}=Ke.store,l={1:o,2:s,3:i,4:a,5:n},c=t??Array.from(vl.quests.values()),u=Array.from(vl.excludedQuests.values()),p=e?new Set(e):new Set(Tg(t?.[0]?.userStatus?.userId)),m=new Set,g=0;for(let y of c){let b=Xp(y,!1);if(p.has(y.id))m.add(y.id);else if(b==="UNCLAIMED"){let v=kSe(y);l[v]&&g++}}for(let y of u)p.has(y.id)&&m.add(y.id);return[Array.from(m),g]}function If(e,t){let[o,n]=nrt(e,t);return Ke.store.unclaimedUnignoredQuests=n,y7(o,t?.[0]?.userStatus?.userId),Tf(),o}function rrt({visible:e,selected:t,showPill:o,showBadge:n,badgeColor:i,leftClickAction:s,middleClickAction:a,rightClickAction:l,onSelectedChange:c}){function u(g){if(g.type==="mousedown"&&g.button!==Gv)return;g.preventDefault(),g.stopPropagation();let y=null;g.button===Gv?y=a:g.button===x7?y=l:g.button===h7&&(y=s),y==="open-quests"?c(!t):y==="plugin-settings"||y==="context-menu"&&Dt.openContextMenu(g,()=>r(M.Menu,{navId:_e("dummy-quest-button-context-menu"),onClose:Dt.closeContextMenu,"aria-label":"Quest Button Menu"},r(M.MenuItem,{id:_e("dummy-quest-button-mark-all-ignored"),label:"Mark All Ignored",disabled:!0}),r(M.MenuItem,{id:_e("dummy-quest-button-reset-ignored-list"),label:"Reset Ignored List",disabled:!0}),r(M.MenuItem,{id:_e("dummy-quest-button-fetch-quests"),label:"Fetch Quests",disabled:!0})))}let p=i?Fc(i):null,m={count:n?3:0,maxDigits:2,...p?{color:`rgb(${p.r},${p.g},${p.b})`}:{},...p?{style:{color:Cf(p)?"white":"black"}}:{}};return r(T7,{id:_e("dummy-quest-button"),className:_e("dummy-quest-button","quest-button"),icon:C7(26,26),tooltip:"Quests",showPill:!0,isVisible:e,isSelected:t,hasUnread:o,lowerBadgeProps:m,onClick:u,onContextMenu:u,onMouseDown:u})}function irt(){let{questButtonDisplay:e,questButtonUnclaimed:t,questButtonBadgeColor:o,questButtonLeftClickAction:n,questButtonMiddleClickAction:i,questButtonRightClickAction:s}=Ke.use(["questButtonDisplay","questButtonUnclaimed","questButtonBadgeColor","questButtonLeftClickAction","questButtonMiddleClickAction","questButtonRightClickAction"]);["always","unclaimed","never"].includes(e)||(Ke.store.questButtonDisplay="always"),["pill","badge","both","none"].includes(t)||(Ke.store.questButtonUnclaimed="both"),typeof o!="number"&&o!==null&&(Ke.store.questButtonBadgeColor=M4),["open-quests","context-menu","plugin-settings","nothing"].includes(n)||(Ke.store.questButtonLeftClickAction=fSe),["open-quests","context-menu","plugin-settings","nothing"].includes(i)||(Ke.store.questButtonMiddleClickAction=gSe),["open-quests","context-menu","plugin-settings","nothing"].includes(s)||(Ke.store.questButtonRightClickAction=hSe)}function srt(){let{disableQuestsDiscoveryTab:e,disableQuestsFetchingQuests:t,disableQuestsDirectMessagesTab:o,disableQuestsPageSponsoredBanner:n,disableQuestsPopupAboveAccountPanel:i,disableQuestsBadgeOnUserProfiles:s,disableQuestsGiftInventoryRelocationNotice:a,disableFriendsListActiveNowPromotion:l,disableMembersListActivelyPlayingIcon:c}=Ke.use(["disableQuestsEverything","disableQuestsDiscoveryTab","disableQuestsFetchingQuests","disableQuestsDirectMessagesTab","disableQuestsPageSponsoredBanner","disableQuestsPopupAboveAccountPanel","disableQuestsBadgeOnUserProfiles","disableQuestsGiftInventoryRelocationNotice","disableFriendsListActiveNowPromotion","disableMembersListActivelyPlayingIcon"]);(e||o||n||t||i||s||a||l||c)&&(Ke.store.disableQuestsEverything=!1)}function art(){irt();let{questButtonDisplay:e,questRewardIncludeRewardCode:t,questRewardIncludeNitroCode:o,questRewardIncludeCollectibles:n,questRewardIncludeInGame:i,questRewardIncludeOrbs:s,questButtonUnclaimed:a,questButtonBadgeColor:l,questButtonLeftClickAction:c,questButtonMiddleClickAction:u,questButtonRightClickAction:p}=Ke.use(["questButtonDisplay","questRewardIncludeRewardCode","questRewardIncludeNitroCode","questRewardIncludeCollectibles","questRewardIncludeInGame","questRewardIncludeOrbs","questButtonUnclaimed","questButtonBadgeColor","questButtonLeftClickAction","questButtonMiddleClickAction","questButtonRightClickAction"]),m=[{name:"Always",value:"always"},{name:"Unclaimed",value:"unclaimed"},{name:"Never",value:"never"}],g=[{name:"Pill",value:"pill"},{name:"Badge",value:"badge"},{name:"Both",value:"both"},{name:"None",value:"none"}],y=[{label:"Open Quests",value:"open-quests"},{label:"Context Menu",value:"context-menu"},{label:"Plugin Settings",value:"plugin-settings"},{label:"Nothing",value:"nothing"}],b=[{label:"Orbs",value:"orbs",selected:s},{label:"Nitro Codes",value:"nitro-code",selected:o},{label:"Reward Codes",value:"reward-code",selected:t},{label:"In Game Items",value:"in-game",selected:i},{label:"Profile Collectibles",value:"collectibles",selected:n}],[v,E]=L(b.filter(ae=>ae.selected).map(ae=>ae.value)),[A,C]=L(m.find(ae=>ae.value===e)),[I,N]=L(g.find(ae=>ae.value===a)),[_,O]=L(c),[F,J]=L(u),[G,te]=L(p),[K,oe]=L(l),[le,he]=L(!1);function Ae(ae){b.forEach(Ne=>{Ne.selected=ae.includes(Ne.value)}),Ke.store.questRewardIncludeRewardCode=ae.includes("reward-code"),Ke.store.questRewardIncludeNitroCode=ae.includes("nitro-code"),Ke.store.questRewardIncludeCollectibles=ae.includes("collectibles"),Ke.store.questRewardIncludeInGame=ae.includes("in-game"),Ke.store.questRewardIncludeOrbs=ae.includes("orbs"),E(ae),If()}function Ce(ae){let Ne=ae.map(Ve=>typeof Ve=="string"?b.find(_t=>_t.value===Ve):Ve);if(ae.length===0){Ae([]);return}let Fe=ae.length>v.length?ae[ae.length-1]:v.find(Ve=>!ae.includes(Ve)),Xe=Ne.filter(Ve=>Ve.value!==Fe),It=b.find(Ve=>Ve.value===Fe);It.selected?Ae(Xe.filter(Ve=>Ve.value!==Fe).map(Ve=>Ve.value)):Ae([...Xe.map(Ve=>Ve.value),It.value])}function ye(ae){C(ae),Ke.store.questButtonDisplay=ae.value,M7(Ke.store.fetchingQuestsInterval)}function ce(ae){N(ae),Ke.store.questButtonUnclaimed=ae.value,M7(Ke.store.fetchingQuestsInterval)}function pe(ae){oe(ae),Ke.store.questButtonBadgeColor=ae}function xe(ae){O(ae),Ke.store.questButtonLeftClickAction=ae}function Ze(ae){J(ae),Ke.store.questButtonMiddleClickAction=ae}function ge(ae){te(ae),Ke.store.questButtonRightClickAction=ae}return r(ee,null,r(Bt,{className:_e("setting-divider")}),r("div",{className:_e("setting","quest-icon-setting")},r("section",null,r("div",{className:_e("main-inline-group")},r("div",null,r(re,{className:_e("form-title")},"Quest Button"),r(W,{className:_e("form-description")},"Show a Quest button in the server list with an optional indicator for unclaimed Quests.")),r("div",{className:_e("dummy-quest-button")},r(rrt,{visible:A.value!=="never",selected:le,showPill:I.value==="pill"||I.value==="both",showBadge:I.value==="badge"||I.value==="both",badgeColor:K,leftClickAction:_,middleClickAction:F,rightClickAction:G,onSelectedChange:he}))),r("div",{className:_e("main-inline-group")},r("div",{className:_e("inline-group-item")},r(re,{className:_e("form-subtitle","form-subtitle-spacier")},"Left Click Action"),r(to,{options:y,className:_e("select","titled-select"),popoutPosition:"top",serialize:String,isSelected:ae=>ae===_,select:xe})),r("div",{className:_e("inline-group-item")},r(re,{className:_e("form-subtitle","form-subtitle-spacier")},"Middle Click Action"),r(to,{options:y,className:_e("select","titled-select"),popoutPosition:"top",serialize:String,isSelected:ae=>ae===F,select:Ze})),r("div",{className:_e("inline-group-item")},r(re,{className:_e("form-subtitle","form-subtitle-spacier")},"Right Click Action"),r(to,{options:y,className:_e("select","titled-select"),popoutPosition:"top",serialize:String,isSelected:ae=>ae===G,select:ge}))),r("div",{className:_e("main-inline-group")},r("div",{className:_e("inline-group-item")},r(re,{className:_e("form-subtitle")},"Button Visibility"),r(bY,{value:A.value,options:m,onChange:ye}),r(re,{className:_e("form-subtitle")},"Badge Color"),r("div",{className:_e("sub-inline-group")},r(si,{color:K,onChange:pe,showEyeDropper:!0}),r(U,{className:_e("button","button-blue"),onClick:()=>pe(M4)},"Default"),r(U,{className:_e("button","button-red"),onClick:()=>pe(null)},"Disable"))),r("div",{className:_e("inline-group-item")},r(re,{className:_e("form-subtitle")},"Unclaimed Indicator"),r(bY,{value:I.value,options:g,onChange:ce}))),r("div",{className:_e("main-inline-group")},r("section",null,r(re,{className:_e("form-subtitle","form-subtitle-spacier")},"Included Reward Types"),r(W,{className:_e("form-description","margin-bottom-8")},"Only count Quests with these reward types as unclaimed when determining button visibility, badge count, and when playing the alert sound."),r(D4,{placeholder:"Select which reward types to include in the unclaimed count...",feedback:"There's no supported Quest feature by that name.",className:_e("select"),optionClassName:_e("affixless-select-popout-option"),maxVisibleItems:b.length,maxOptionsVisible:b.length,clearable:!0,multi:!0,value:v,options:b,onChange:Ce,closeOnSelect:!1}))))))}function lrt(){srt();let{disableQuestsEverything:e,disableQuestsDiscoveryTab:t,disableQuestsFetchingQuests:o,disableQuestsDirectMessagesTab:n,disableQuestsPageSponsoredBanner:i,disableQuestsPopupAboveAccountPanel:s,disableQuestsBadgeOnUserProfiles:a,disableQuestsGiftInventoryRelocationNotice:l,disableFriendsListActiveNowPromotion:c,disableMembersListActivelyPlayingIcon:u,makeMobileQuestsDesktopCompatible:p,completeVideoQuestsInBackground:m,completeGameQuestsInBackground:g,completeAchievementQuestsInBackground:y,notifyOnQuestComplete:b}=Ke.use(["disableQuestsEverything","disableQuestsDiscoveryTab","disableQuestsFetchingQuests","disableQuestsDirectMessagesTab","disableQuestsPageSponsoredBanner","disableQuestsPopupAboveAccountPanel","disableQuestsBadgeOnUserProfiles","disableQuestsGiftInventoryRelocationNotice","disableFriendsListActiveNowPromotion","disableMembersListActivelyPlayingIcon","makeMobileQuestsDesktopCompatible","completeVideoQuestsInBackground","completeGameQuestsInBackground","completeAchievementQuestsInBackground","notifyOnQuestComplete"]),v=[{label:"Disable Everything",value:"everything",selected:e,type:"disable"},{label:"Disable Fetching Quests",value:"fetching",selected:o,type:"disable"},{label:"Disable Quests Tab in DMs",value:"dms",selected:n,type:"disable"},{label:"Disable Badge on User Profiles",value:"badge",selected:a,type:"disable"},{label:"Disable Popup Above User Panel",value:"popup",selected:s,type:"disable"},{label:"Disable Discovery Tab Relocation Notice",value:"discovery",selected:t,type:"disable"},{label:"Disable Gift Inventory Relocation Notice",value:"inventory",selected:l,type:"disable"},{label:"Disable Sponsored Banner on Quests Page",value:"sponsored-banner",selected:i,type:"disable"},{label:"Disable Friends List Active Now Promotion",value:"friends-list",selected:c,type:"disable"},{label:"Disable Members List Actively Playing Icon",value:"members-list",selected:u,type:"disable"},{label:"Complete Watch Video Quests in Background",value:"video-quests-background",selected:m,type:"modification"},{label:"Complete Play Game/Activity Quests in Background",value:"game-quests-background",selected:g,type:"modification"},{label:"Complete Task in Activity Quests in Background",value:"achievement-quests-background",selected:y,type:"modification"},{label:"Make Mobile Quests Desktop Compatible",value:"mobile-desktop-compatible",selected:p,type:"modification"},{label:"Notify on Auto-Complete",value:"notify-on-complete",selected:b,type:"modification"}],E=v.filter(F=>F.type==="disable"),A=v.filter(F=>F.type==="modification"),C=v.find(F=>F.value==="everything"),[I,N]=L(v.filter(F=>F.selected).map(F=>F.value));function _(F){v.forEach(G=>{G.selected=F.includes(G.value)});let J=Ke.store.disableQuestsEverything!==F.includes("everything")||Ke.store.disableQuestsFetchingQuests!==F.includes("fetching");Ke.store.disableQuestsEverything=F.includes("everything"),Ke.store.disableQuestsDiscoveryTab=F.includes("discovery"),Ke.store.disableQuestsFetchingQuests=F.includes("fetching"),Ke.store.disableQuestsDirectMessagesTab=F.includes("dms"),Ke.store.disableQuestsPageSponsoredBanner=F.includes("sponsored-banner"),Ke.store.disableQuestsPopupAboveAccountPanel=F.includes("popup"),Ke.store.disableQuestsBadgeOnUserProfiles=F.includes("badge"),Ke.store.disableQuestsGiftInventoryRelocationNotice=F.includes("inventory"),Ke.store.disableFriendsListActiveNowPromotion=F.includes("friends-list"),Ke.store.disableMembersListActivelyPlayingIcon=F.includes("members-list"),Ke.store.makeMobileQuestsDesktopCompatible=F.includes("mobile-desktop-compatible"),Ke.store.completeVideoQuestsInBackground=F.includes("video-quests-background"),Ke.store.completeGameQuestsInBackground=F.includes("game-quests-background"),Ke.store.completeAchievementQuestsInBackground=F.includes("achievement-quests-background"),Ke.store.notifyOnQuestComplete=F.includes("notify-on-complete"),J&&M7(Ke.store.fetchingQuestsInterval),N(F.map(G=>typeof G=="string"?G:G.value))}function O(F){let J=F.map(K=>typeof K=="string"?v.find(oe=>oe.value===K):K);if(F.length===0){_([]);return}let G=F.length>I.length?F[F.length-1]:I.find(K=>!F.includes(K)),te=J.filter(K=>K.value!==G);G==="everything"?C.selected?_(te.filter(K=>K.value!==G).map(K=>K.value)):_([...te.filter(K=>K.type!=="disable").map(K=>K.value),G]):E.some(K=>K.value===G)?E.find(oe=>oe.value===G).selected?_(te.filter(oe=>oe.value!==G).map(oe=>oe.value)):_([...te.map(oe=>oe.value),G]):A.some(K=>K.value===G)&&(A.find(oe=>oe.value===G).selected?_(te.map(oe=>oe.value)):_([...te.map(oe=>oe.value),G]))}return r(ee,null,r(Bt,{className:_e("setting-divider")}),r("div",{className:_e("setting","disable-quests-setting")},r("section",null,r(re,{className:_e("form-title")},"Quest Features"),r(W,{className:_e("form-description","margin-bottom-8")},"Modify specific Quest features.",r("br",null),r("br",null),"The ",r("span",{className:_e("inline-code-block")},"Disable Quest Popup Above Account Panel")," option will be ignored for completed Quests and Quest progress tracking.",r("br",null),r("br",null),"The ",r("span",{className:_e("inline-code-block")},"Complete Video Quests in Background")," option will wait for the duration of the Video Quest and mark it as completed automatically.",r("br",null),r("br",null),"Similarly, the ",r("span",{className:_e("inline-code-block")},"Complete Play Game/Activity Quests in Background")," option will wait for the duration of the Game Quest and mark it as completed automatically. This option is only supported on the official desktop client.",r("br",null),r("br",null),"The ",r("span",{className:_e("inline-code-block")},"Complete Task in Activity Quests in Background")," option will immediately mark Task in Activity Quests as completed when started.",r("br",null),r("br",null),"You still must start the Quests manually. The first click will start the Quests in the background. For Video Quests, subsequent clicks will open the video modal as normal. For Activity Quests, subsequent clicks will open the activity as normal. To abort the Quests, you can open the context menu on the Quest tile and select ",r("span",{className:_e("inline-code-block")},"Stop Auto-Complete"),".",r("br",null),r("br",null),"Using any of the Auto-Complete options is against Discord's TOS. Use at your own risk."),r(D4,{placeholder:"Select which Quest features to modify.",feedback:"There's no supported Quest feature by that name.",className:_e("select"),optionClassName:_e("affixless-select-popout-option"),maxVisibleItems:v.length,maxOptionsVisible:v.length,clearable:!0,multi:!0,value:I,options:v,onChange:O,closeOnSelect:!1}))))}function urt(){let{restyleQuestsUnclaimed:e,restyleQuestsClaimed:t,restyleQuestsIgnored:o,restyleQuestsExpired:n,restyleQuestsGradient:i,restyleQuestsPreload:s}=Ke.use(["restyleQuestsUnclaimed","restyleQuestsClaimed","restyleQuestsIgnored","restyleQuestsExpired","restyleQuestsGradient","restyleQuestsPreload"]),[a,l]=L(e),[c,u]=L(t),[p,m]=L(o),[g,y]=L(n),[b,v]=L(i),[E,A]=L(s),[C,I]=L(e),[N,_]=L(i),[O,F]=L(!1),[J,G]=L(null),te=TY(J);se(()=>{let ye=()=>{if(vl.quests.size>0){if(J){if(J){let ce=structuredClone(J);ce.dummyColor=C,G(ce)}}else{let ce=Array.from(vl.quests.values()),pe=Math.floor(Math.random()*ce.length),xe=structuredClone(ce[pe]);xe.dummyColor=C,G(xe)}F(!0)}else F(!1),G(null)};return vl.addChangeListener(ye),ye(),()=>vl.removeChangeListener(ye)},[C]);function K(ye,ce){ye===0&&l(ce),ye===1&&u(ce),ye===2&&m(ce),ye===3&&y(ce),I(ce),Ke.store.restyleQuestsUnclaimed=ye===0?ce:a,Ke.store.restyleQuestsClaimed=ye===1?ce:c,Ke.store.restyleQuestsIgnored=ye===2?ce:p,Ke.store.restyleQuestsExpired=ye===3?ce:g}function oe(ye){_(ye),v(ye),Ke.store.restyleQuestsGradient=ye}function le(ye){A(ye),Ke.store.restyleQuestsPreload=ye}let he=[{label:"Unclaimed",idx:0,defaultValue:M4,value:a},{label:"Claimed",idx:1,defaultValue:xSe,value:c},{label:"Ignored",idx:2,defaultValue:ySe,value:p},{label:"Expired",idx:3,defaultValue:bSe,value:g}],Ae=[{label:"Intense Restyle Gradient",value:"intense"},{label:"Default Restyle Gradient",value:"default"},{label:"Subtle Black Gradient",value:"black"},{label:"No Gradient",value:"hide"}],Ce=[{label:"Load All Quest Assets On Page Load",value:!0},{label:"Load Quest Assets During Page Scroll",value:!1}];return r(ee,null,r(Bt,{className:_e("setting-divider")}),r("div",{className:_e("setting","restyle-quests-setting")},r("section",null,r("div",null,r(re,{className:_e("form-title")},"Restyle Quests"),r(W,{className:_e("form-description")},"Highlight Quests with optional theme colors for visibility.",r("br",null),r("br",null),"Claimed and Expired Quest styles will take precedence even if a Quest is ignored.")),r("div",{className:_e("main-inline-group")},r("div",{className:_e("gradient-setting-group","inline-group-item","flex-35")},r(re,{className:_e("form-subtitle")},"Gradient Style"),r(to,{options:Ae,className:_e("select","titled-select"),popoutPosition:"top",serialize:String,isSelected:ye=>ye===b,select:oe})),r("div",{className:_e("preload-setting-group","inline-group-item","flex-65")},r(re,{className:_e("form-subtitle")},"Asset Preload"),r(to,{options:Ce,className:_e("select","titled-select"),popoutPosition:"top",serialize:String,isSelected:ye=>ye===E,select:le}))),r("div",{className:_e("color-picker-container")},he.map(({label:ye,idx:ce,defaultValue:pe,value:xe})=>r("div",{key:ye,className:_e("inline-group-item","color-picker-group")},r(re,{className:_e("form-subtitle")},ye),r("div",{className:_e("color-picker-with-buttons")},r(si,{color:xe,onChange:Ze=>K(ce,Ze),showEyeDropper:!0}),r("div",{className:_e("sub-inline-group")},r(U,{className:_e("button","wide-button","button-blue"),onClick:()=>K(ce,pe)},"Default"),r(U,{className:_e("button","wide-button","button-red"),onClick:()=>K(ce,null)},"Disable")))))),r("div",{className:_e("dummy-quest-preview"),style:te},O&&J&&r(crt,{quest:J,dummyColor:C,dummyGradient:N})))))}function drt(){let[e,t]=L(Ke.store.reorderQuests),{unclaimedSubsort:o,claimedSubsort:n,ignoredSubsort:i,expiredSubsort:s,ignoredQuestProfile:a,rememberQuestPageSort:l,rememberQuestPageFilters:c}=Ke.use(["unclaimedSubsort","claimedSubsort","ignoredSubsort","expiredSubsort","ignoredQuestProfile","rememberQuestPageSort","rememberQuestPageFilters"]),u=p=>{let m=[{label:"Added (Newest)",value:"Recent DESC"},{label:"Added (Oldest)",value:"Recent ASC"}];return p==="expired"?m.push({label:"Expired (Most Recent)",value:"Expiring DESC"},{label:"Expired (Least Recent)",value:"Expiring ASC"}):p!=="claimed"&&m.push({label:"Expiring (Soonest)",value:"Expiring ASC"},{label:"Expiring (Latest)",value:"Expiring DESC"}),p==="claimed"&&m.push({label:"Claimed (Most Recent)",value:"Claimed DESC"},{label:"Claimed (Least Recent)",value:"Claimed ASC"}),m};return r(ee,null,r(Bt,{className:_e("setting-divider")}),r("div",{className:_e("setting","reorder-quests-setting")},r("section",null,r("div",null,r(re,{className:_e("form-title")},"Reorder Quests"),r(W,{className:_e("form-description")},'Sort Quests by their status. Applied when the "Questify" sort option is selected on the Quest page.',r("br",null),r("br",null),"Comma-separated list must contain all of: ",r("span",{className:_e("inline-code-block")},"UNCLAIMED, CLAIMED, IGNORED, EXPIRED"),".")),r("div",null,r(qe,{inputClassName:_e("text-input"),value:e,onChange:p=>{let m=p.toUpperCase(),g=xY(m,["UNCLAIMED","CLAIMED","IGNORED","EXPIRED"],!0,!0,!0,!1);if(t(m),g){let y=m.split(",").map(b=>b.trim()).join(", ");Ke.store.reorderQuests=y}},placeholder:"You must include all of UNCLAIMED, CLAIMED, IGNORED, EXPIRED",error:xY(e,["UNCLAIMED","CLAIMED","IGNORED","EXPIRED"],!1,!0,!0,!1)?void 0:"Invalid format."})),r("div",{className:_e("main-inline-group")},r("div",{className:_e("inline-group-item")},r(re,{className:_e("form-subtitle")},"Unclaimed Subsort"),r(to,{options:u("unclaimed"),className:_e("select","titled-select"),popoutPosition:"bottom",serialize:String,isSelected:p=>p===o,select:p=>{Ke.store.unclaimedSubsort=p}})),r("div",{className:_e("inline-group-item")},r(re,{className:_e("form-subtitle")},"Claimed Subsort"),r(to,{options:u("claimed"),className:_e("select","titled-select"),popoutPosition:"bottom",serialize:String,isSelected:p=>p===n,select:p=>{Ke.store.claimedSubsort=p}}))),r("div",{className:_e("main-inline-group")},r("div",{className:_e("inline-group-item")},r(re,{className:_e("form-subtitle")},"Ignored Subsort"),r(to,{options:u("ignored"),className:_e("select","titled-select"),popoutPosition:"bottom",serialize:String,isSelected:p=>p===i,select:p=>{Ke.store.ignoredSubsort=p}})),r("div",{className:_e("inline-group-item")},r(re,{className:_e("form-subtitle")},"Expired Subsort"),r(to,{options:u("expired"),className:_e("select","titled-select"),popoutPosition:"bottom",serialize:String,isSelected:p=>p===s,select:p=>{Ke.store.expiredSubsort=p}}))),r("div",{className:_e("main-inline-group")},r("div",{className:_e("inline-group-item")},r(re,{className:_e("form-subtitle")},"Ignored Quest Profile"),r(to,{options:[{label:"Shared: All accounts on this client share ignores.",value:"shared"},{label:"Private: All accounts on this client have separate ignores.",value:"private"}],className:_e("select","titled-select"),popoutPosition:"bottom",serialize:String,isSelected:p=>p===a,select:p=>{Ke.store.ignoredQuestProfile=p}}))),r("div",{className:_e("main-inline-group")},r("div",{className:_e("inline-group-item")},r(re,{className:_e("form-subtitle")},"Remember Sort Choice"),r(to,{options:[{label:"Yes",value:!0},{label:"No",value:!1}],className:_e("select","titled-select"),popoutPosition:"bottom",serialize:String,isSelected:p=>p===l,select:p=>{Ke.store.rememberQuestPageSort=p}})),r("div",{className:_e("inline-group-item")},r(re,{className:_e("form-subtitle")},"Remember Filter Choice"),r(to,{options:[{label:"Yes",value:!0},{label:"No",value:!1}],className:_e("select","titled-select"),popoutPosition:"bottom",serialize:String,isSelected:p=>p===c,select:p=>{Ke.store.rememberQuestPageFilters=p}}))),r("div",{className:_e("main-inline-group")},r(W,{className:_e("form-description")},'This sort and filter choice refers to the built-in sort and filter options on the Quest page. The custom sorting above is only applied when the "Questify" sort option is selected on the Quest page. If remembering is disabled, the sort or filter options will be reset each time you open the Quest page.')))))}function prt(){let{fetchingQuestsInterval:e,fetchingQuestsAlert:t}=Ke.use(["fetchingQuestsInterval","fetchingQuestsAlert"]),o={minutes:{singular:"Minute",plural:"Minutes",multiplier:60},hours:{singular:"Hour",plural:"Hours",multiplier:3600}},n=[{value:0,label:"Disabled"},{value:1800,label:"30 Minutes"},{value:3600,label:"1 Hour"},{value:3600*2,label:"3 Hours"},{value:3600*4,label:"6 Hours"},{value:3600*6,label:"12 Hours"}],i=SA().map(G=>{let te=G.toUpperCase().replace(/_/g," ").replace(/(\d+)/g," $1");return{value:G,label:te}});function s(G){let te=n.find(Ae=>Ae.value===G);if(te)return te;let K=Object.entries(o).filter(([Ae,Ce])=>G>=Ce.multiplier),oe=K[K.length-1]?.[1],le=Math.ceil(G/oe.multiplier*100)/100,he=le===1?oe.singular:oe.plural;return{value:G,label:`${le} ${he}`}}function a(G){if(G===null)return null;let te=i.find(oe=>oe.value===G);if(te)return te;let K=G.split("/").pop()?.split("?")[0]?.split(".")[0]?.replace(/_/g," ").replace(/\w\S*/g,oe=>oe.toUpperCase())||"CUSTOM SOUND";return{value:G,label:K}}function l(G){let te=s(G),K=n.filter(oe=>oe.value!==G);return[te,...K].sort((oe,le)=>Number(oe.value)-Number(le.value))}function c(G){let te=G?i.filter(oe=>oe.value!==G):i;return G?[a(G),...te].sort((oe,le)=>oe.label.localeCompare(le.label)):te.sort((oe,le)=>oe.label.localeCompare(le.label))}function u(G){if(!G.trim()){v(l(g));return}let te=n.find(Ce=>Ce.value===0&&Ce.label.toLowerCase().startsWith(G.toLowerCase()));if(te){v([te]);return}let K=G.match(/^\s*(\d+\.?(?:\d+)?)\s*([a-zA-Z]+)?\s*$/i);if(!K){v([]);return}let oe=Number(K[1]),le=K[2]?.toLowerCase(),he=Object.keys(o).filter(Ce=>o[Ce].singular.toLowerCase().startsWith(le)||o[Ce].plural.toLowerCase().startsWith(le))[0];if(isNaN(oe)){v([]);return}let Ae=[];if(he){let Ce=o[he],ye=Math.ceil(oe*Ce.multiplier*100)/100;ye>=I7&&ye<=D7&&Ae.push(s(ye))}else for(let Ce of Object.values(ort)){let ye=Math.ceil(oe*Ce.multiplier*100)/100;ye>=I7&&ye<=D7&&Ae.push(s(ye))}v(Ae)}function p(G){if(!G.trim()){N(c(A));return}let te=G.startsWith("http://")||G.startsWith("https://"),K=a(G);if(te){uSe(G).then(le=>{N(le?[K]:[])});return}let oe=i.filter(le=>le.label.toLowerCase().replace(/\s+/,"").includes(G.toLowerCase().replace(/\s+/,"")));if(oe){N(oe);return}N([])}let m=e,[g,y]=L(m),[b,v]=L(l(g)),E=t,[A,C]=L(E),[I,N]=L(c(A)),[_,O]=L(!1),F=kt(null);function J(){F.current?.stop(),F.current=null,O(!1)}return se(()=>()=>{J()},[]),r(ee,null,r(Bt,{className:_e("setting-divider")}),r("div",{className:_e("setting","fetching-quests-setting")},r("section",null,r("div",null,r(re,{className:_e("form-title")},"Fetching Quests"),r(W,{className:_e("form-description")},"Configure how often to fetch Quests from Discord and set up alerts for new Quests.",r("br",null),r("br",null),"By default, Discord only fetches Quests on load and when visiting the Quests page. This means that without a fetch interval defined below, this plugin will become unaware of new Quests added throughout the day.",r("br",null),r("br",null),"This relies on the Quest Button being enabled and set to either ",r("span",{className:_e("inline-code-block")},"Unclaimed"),", or set to ",r("span",{className:_e("inline-code-block")},"Always")," with unclaimed ",r("span",{className:_e("inline-code-block")},"Pill"),", ",r("span",{className:_e("inline-code-block")},"Badge"),", or ",r("span",{className:_e("inline-code-block")},"Both")," indicators enabled. Otherwise, there is no reason to periodically fetch Quests.",r("br",null),r("br",null),"Also, if ",r("span",{className:_e("inline-code-block")},"Fetching Quests")," is blocked in the ",r("span",{className:_e("inline-code-block")},"Quest Features")," setting, this will not work.")),r("div",null,r("div",null,r(re,{className:_e("form-subtitle","form-subtitle-spacier")},"Fetch Interval")),r("div",null,r(D4,{filter:(G,te)=>G,placeholder:"Select or type an interval between 30 minutes and 12 hours.",feedback:"Intervals must be between 30 minutes and 12 hours.",className:_e("select","titled-select"),maxVisibleItems:n.length+1,maxOptionsVisible:n.length+1,clearable:!1,multi:!1,value:g,options:b,closeOnSelect:!0,onSearchChange:u,onClose:()=>{v(l(g))},onChange:G=>{let te=G;Ke.store.fetchingQuestsInterval=te,y(te),v(l(te)),M7(te)}}))),r("div",null,r("div",null,r(re,{className:_e("form-subtitle","form-subtitle-spacier")},"Alert Sound")),r("div",{className:_e("sub-inline-group")},r("div",{className:_e("inline-group-item")},r(D4,{filter:(G,te)=>G,placeholder:"Select a sound or provide a custom sound URL.",feedback:"Sound not found, or URL is not from a supported domain.",className:_e("select","titled-select"),clearable:!0,multi:!1,maxVisibleItems:7,value:A,options:I,closeOnSelect:!1,onSearchChange:p,onClose:()=>{N(c(A))},onChange:G=>{let te=G;Ke.store.fetchingQuestsAlert=te,C(te),N(c(te))}})),r("div",{className:_e("inline-group-item","alert-icon",{"playing-audio":!!_}),onClick:()=>{A&&(F.current?J():(F.current=_s(A,{onEnded:J,volume:Ke.store.fetchingQuestsAlertVolume}),O(!0)))},style:{cursor:A?"pointer":"default"}},mSe(24,24))),r("div",{className:_e("sub-inline-group")},r("div",{className:_e("inline-group-item","volume-slider-container")},r(Tr,{markers:uo(0,100,10),initialValue:Ke.store.fetchingQuestsAlertVolume,onValueChange:G=>{Ke.store.fetchingQuestsAlertVolume=G},className:_e("volume-slider")})))))))}var Sy,fSe,gSe,hSe,Xnt,Jnt,Vnt,M4,xSe,ySe,bSe,ert,trt,I7,D7,SY,ort,crt,Ke,yY=x(()=>{"use strict";d();Ol();Q();Ad();$();B();I4();E7();k7();Sy=null,fSe="open-quests",gSe="plugin-settings",hSe="context-menu",Xnt="always",Jnt="both",Vnt="UNCLAIMED, CLAIMED, IGNORED, EXPIRED",M4=2842239,xSe=6105983,ySe=8334124,bSe=2368553,ert="intense",trt="discodo",I7=1800,D7=720*60,SY=new Set;ort={second:{singular:"Second",plural:"Seconds",multiplier:1},minute:{singular:"Minute",plural:"Minutes",multiplier:60},hour:{singular:"Hour",plural:"Hours",multiplier:3600},day:{singular:"Day",plural:"Days",multiplier:1440*60},week:{singular:"Week",plural:"Weeks",multiplier:10080*60}};crt=({quest:e,dummyColor:t,dummyGradient:o})=>{let n=CY("",e,t,o);return r(pSe,{className:[_e("dummy-quest"),n].join(" "),quest:e})};Ke=R({disableQuests:{type:6,component:lrt,description:"Select which Quest features to disable."},disableQuestsEverything:{type:3,description:"Disable all Quest features.",default:!1,hidden:!0},disableQuestsFetchingQuests:{type:3,description:"Disable fetching Quests from Discord.",default:!1,hidden:!0},disableQuestsDiscoveryTab:{type:3,description:"Disable Quest tab in the Discovery page.",default:!1,hidden:!0},disableQuestsDirectMessagesTab:{type:3,description:"Disable Quest tab in Direct Messages.",default:!1,hidden:!0},disableQuestsPageSponsoredBanner:{type:3,description:"Disable the sponsored banner on the Quest page.",default:!1,hidden:!0},disableQuestsPopupAboveAccountPanel:{type:3,description:"Disable the Quest popup above your account panel.",default:!0,hidden:!0},disableQuestsBadgeOnUserProfiles:{type:3,description:"Disable the Quest badge on user profiles.",default:!1,hidden:!0},disableQuestsGiftInventoryRelocationNotice:{type:3,description:"Disable the gift inventory Quest relocation notice.",default:!0,hidden:!0},disableFriendsListActiveNowPromotion:{type:3,description:"Disable the promotion of Quests for games played by friends.",default:!0,hidden:!0},disableMembersListActivelyPlayingIcon:{type:3,description:"Disable the actively playing icon in members list items.",default:!0,hidden:!0},makeMobileQuestsDesktopCompatible:{type:3,description:"Make mobile-only Quests compatible with desktop.",default:!0,hidden:!0},completeVideoQuestsInBackground:{type:3,description:"Complete Video Quests in the background after the video duration has passed.",default:!1,hidden:!0,onChange:e=>{e||wo.forEach((t,o)=>{t.type==="watch"&&(clearTimeout(t.progressTimeout),clearTimeout(t.rerenderTimeout),wo.delete(o))}),Tf()}},completeGameQuestsInBackground:{type:3,description:"Complete Game Quests in the background after the game duration has passed.",default:!1,hidden:!0,onChange:e=>{e||wo.forEach((t,o)=>{t.type==="play"&&(clearTimeout(t.progressTimeout),clearTimeout(t.rerenderTimeout),wo.delete(o))}),Tf()}},completeAchievementQuestsInBackground:{type:3,description:"Complete Achievement in Activity Quests in the background.",default:!1,hidden:!0,onChange:e=>{e||wo.forEach((t,o)=>{t.type==="achievement"&&(clearTimeout(t.progressTimeout),clearTimeout(t.rerenderTimeout),wo.delete(o))}),Tf()}},notifyOnQuestComplete:{type:3,description:"Show a notification when a Quest is auto-completed.",default:!0,hidden:!0},questButton:{type:6,component:art,description:"Show a Quest button in the server list."},questButtonDisplay:{type:0,description:"Which display type to use for the Quest button in the server list.",default:Xnt,hidden:!0},questRewardIncludeRewardCode:{type:3,description:"Include Quests with Reward Codes when displaying Quest counts.",default:!0,hidden:!0},questRewardIncludeNitroCode:{type:3,description:"Include Quests with Nitro Codes when displaying Quest counts.",default:!0,hidden:!0},questRewardIncludeInGame:{type:3,description:"Include Quests with In-Game rewards when displaying Quest counts.",default:!0,hidden:!0},questRewardIncludeCollectibles:{type:3,description:"Include Quests with Collectibles when displaying Quest counts.",default:!0,hidden:!0},questRewardIncludeOrbs:{type:3,description:"Include Quests with Orbs when displaying Quest counts.",default:!0,hidden:!0},questButtonUnclaimed:{type:0,description:"Which display type to use for the unclaimed indicator on the Quest button in the server list.",default:Jnt,hidden:!0},questButtonBadgeColor:{type:7,description:"The color of the Quest button badge in the server list.",default:M4,hidden:!0},questButtonLeftClickAction:{type:0,description:"The action to perform when left-clicking the Quest button in the server list.",default:fSe,hidden:!0},questButtonMiddleClickAction:{type:0,description:"The action to perform when middle-clicking the Quest button in the server list.",default:gSe,hidden:!0},questButtonRightClickAction:{type:0,description:"The action to perform when right-clicking the Quest button in the server list.",default:hSe,hidden:!0},fetchingQuests:{type:6,component:prt,description:"Fetch Quests from Discord."},fetchingQuestsInterval:{type:7,description:"The interval in seconds to fetch Quests from Discord.",default:2700,hidden:!0},fetchingQuestsAlert:{type:7,description:"The sound to play when new Quests are detected.",default:trt,hidden:!0},fetchingQuestsAlertVolume:{type:1,description:"The volume for the new Quest alert sound.",default:100,hidden:!0},restyleQuests:{type:6,component:urt,description:"Customize the appearance of Quest tiles in the Quests page."},restyleQuestsUnclaimed:{type:7,description:"The color of unclaimed Quest tiles in the Quests page.",default:M4,hidden:!0},restyleQuestsClaimed:{type:7,description:"The color of claimed Quest tiles in the Quests page.",default:xSe,hidden:!0},restyleQuestsIgnored:{type:7,description:"The color of ignored Quest tiles in the Quests page.",default:ySe,hidden:!0},restyleQuestsExpired:{type:7,description:"The color of expired Quest tiles in the Quests page.",default:bSe,hidden:!0},restyleQuestsGradient:{type:0,description:"Style of the gradient used in the Quest tiles.",default:ert,hidden:!0},restyleQuestsPreload:{type:3,description:"Attempt to preload the assets for the Quest tiles.",default:!0,hidden:!0},reorderQuests:{type:6,description:"Sort Quests by their status. Leave empty for default sorting. Comma-separated list must contain all of: UNCLAIMED, CLAIMED, IGNORED, EXPIRED.",default:Vnt,component:drt},unclaimedSubsort:{type:0,description:"Subsort method for unclaimed Quests.",default:"Expiring ASC",hidden:!0},claimedSubsort:{type:0,description:"Subsort method for claimed Quests.",default:"Claimed DESC",hidden:!0},ignoredSubsort:{type:0,description:"Subsort method for ignored Quests.",default:"Recent DESC",hidden:!0},expiredSubsort:{type:0,description:"Subsort method for expired Quests.",default:"Expiring DESC",hidden:!0},unclaimedUnignoredQuests:{type:1,description:"Tracks the number of unclaimed and unignored Quests.",default:0,hidden:!0},onQuestsPage:{type:3,description:"Whether the user is currently on the Quests page.",default:!1,hidden:!0},triggerQuestsRerender:{type:3,description:"Trigger a rerender of the Quests page by toggling this setting.",default:!1,hidden:!0},ignoredQuestProfile:{type:0,description:"The profile used for ignored Quests.",default:"private",hidden:!0},rememberQuestPageSort:{type:3,description:"Remember the last used sort on the Quests page.",default:!0,hidden:!0},rememberQuestPageFilters:{type:3,description:"Remember the last used filters on the Quests page.",default:!0,hidden:!0},lastQuestPageSort:{type:0,description:"Remember the last used sort on the Quests page.",default:"questify",hidden:!0},lastQuestPageFilters:{type:7,description:"Remember the last used filters on the Quests page.",default:{},hidden:!0},ignoredQuestIDs:{type:7,description:"An array of Quest IDs that are ignored.",default:{},hidden:!0}})});function frt(){If([])}function grt(){let e=vl.quests,t=vl.excludedQuests,o=new Set,n=Tg();for(let i of e.values()){let s=i.id;(Xp(i,!1)==="UNCLAIMED"||n.includes(s))&&o.add(s)}for(let i of t.values())n.includes(i.id)&&o.add(i.id);y7(Array.from(o)),Ke.store.unclaimedUnignoredQuests=0}function ESe(e,t,o){return e!=="never"&&(e==="always"||!!t||o)}function hrt(){let{questButtonDisplay:e,questButtonUnclaimed:t,questButtonBadgeColor:o,unclaimedUnignoredQuests:n,onQuestsPage:i}=Ke.use(["questButtonDisplay","questButtonUnclaimed","questButtonBadgeColor","unclaimedUnignoredQuests","onQuestsPage"]),s=o===null?null:Fc(o);function a(c){if(c.type==="mousedown"&&c.button!==Gv)return;c.preventDefault(),c.stopPropagation();let u=null;c.button===Gv?u=Ke.store.questButtonMiddleClickAction:c.button===x7?u=Ke.store.questButtonRightClickAction:c.button===h7&&(u=Ke.store.questButtonLeftClickAction),u==="open-quests"?ho.transitionTo(Cg):u==="plugin-settings"?Rs(pt.Questify):u==="context-menu"&&Dt.openContextMenu(c,()=>r(M.Menu,{navId:_e("quest-button-context-menu"),onClose:Dt.closeContextMenu,"aria-label":"Quest Button Menu"},r(M.MenuItem,{id:_e("ignore-quests-option"),label:"Mark All Ignored",action:grt,disabled:!n}),r(M.MenuItem,{id:_e("unignore-quests-option"),label:"Reset Ignored List",action:frt,disabled:!Tg().length}),r(M.MenuItem,{id:_e("fetch-quests-option"),label:"Fetch Quests",action:()=>wY("Questify-ManualFetch",Yo)})))}let l={count:["badge","both"].includes(t)?n:0,maxDigits:2,...s?{color:`rgb(${s.r}, ${s.g}, ${s.b})`}:{},...s?{style:{color:Cf(s)?"white":"black"}}:{}};return r(T7,{id:_e("quest-button"),className:_e("quest-button"),icon:C7(26,26),tooltip:"Quests",showPill:!0,isVisible:ESe(e,n,i),isSelected:i,hasUnread:!!n&&["pill","both"].includes(t),lowerBadgeProps:l,onClick:a,onContextMenu:a,onMouseDown:a})}function xrt(){let{disableQuestsGiftInventoryRelocationNotice:e,disableQuestsEverything:t}=Ke.use(["disableQuestsGiftInventoryRelocationNotice","disableQuestsEverything"]);return e||t}function yrt(){let{disableQuestsDiscoveryTab:e,disableQuestsEverything:t}=Ke.use(["disableQuestsDiscoveryTab","disableQuestsEverything"]);return e||t}function brt(){let{disableQuestsDirectMessagesTab:e,disableQuestsEverything:t}=Ke.use(["disableQuestsDirectMessagesTab","disableQuestsEverything"]);return e||t}function vrt(){let{disableQuestsPageSponsoredBanner:e,disableQuestsEverything:t}=Ke.use(["disableQuestsPageSponsoredBanner","disableQuestsEverything"]);return e||t}function Srt(){let{disableQuestsBadgeOnUserProfiles:e,disableQuestsEverything:t}=Ke.use(["disableQuestsBadgeOnUserProfiles","disableQuestsEverything"]);return e||t}function wrt(e){let{disableQuestsPopupAboveAccountPanel:t,disableQuestsEverything:o}=Ke.use(["disableQuestsPopupAboveAccountPanel","disableQuestsEverything","triggerQuestsRerender"]),n=!e?.userStatus?.progress||Object.keys(e?.userStatus?.progress||{}).length===0;return!e||(t||o)&&n}function krt(){return Ke.store.disableQuestsFetchingQuests||Ke.store.disableQuestsEverything}function Ert(){let{disableFriendsListActiveNowPromotion:e,disableQuestsEverything:t}=Ke.use(["disableFriendsListActiveNowPromotion","disableQuestsEverything"]);return e||t}function Art(){let{disableMembersListActivelyPlayingIcon:e,disableQuestsEverything:t}=Ke.use(["disableMembersListActivelyPlayingIcon","disableQuestsEverything"]);return e||t}function Crt(e,t,o=!1){let n=A7(t.quest.id),i=!!t.quest.userStatus?.enrolledAt,s=!o&&i&&CSe(t.quest);e.unshift(r(M.MenuGroup,null,!o&&(n?r(M.MenuItem,{id:_e("unignore-quests"),label:"Unmark as Ignored",action:()=>{SSe(t.quest.id)}}):r(M.MenuItem,{id:_e("ignore-quests"),label:"Mark as Ignored",action:()=>{wSe(t.quest.id)}})),wo.has(t.quest.id)?r(M.MenuItem,{id:_e("stop-auto-complete"),label:"Stop Auto-Complete",action:()=>{let a=wo.get(t.quest.id);a&&(clearInterval(a.progressTimeout),clearTimeout(a.rerenderTimeout),wo.delete(t.quest.id),Tf())}}):s?r(M.MenuItem,{id:_e("start-auto-complete"),label:"Start Auto-Complete",action:()=>{IY(t.quest)}}):null,r(M.MenuItem,{id:_e("copy-quest-id"),label:"Copy Quest ID",action:()=>{Oo(t.quest.id)}})))}function CY(e,t,o,n){let{restyleQuestsUnclaimed:i,restyleQuestsClaimed:s,restyleQuestsIgnored:a,restyleQuestsExpired:l,restyleQuestsGradient:c}=Ke.use(["ignoredQuestIDs","ignoredQuestProfile","restyleQuestsUnclaimed","restyleQuestsClaimed","restyleQuestsIgnored","restyleQuestsExpired","restyleQuestsGradient"]),u=[_e("quest-item-restyle"),_e("quest-item-intense-gradient"),_e("quest-item-default-gradient"),_e("quest-item-black-gradient"),_e("quest-item-hide-gradient"),_e("quest-item-contrast-logo")];if(e.includes(_e("dummy-quest")))return e;let p=Xp(t),g=[...e.split(" ").filter(E=>E&&!u.includes(E))],b=o!==void 0&&o===null,v=null;return b||(p==="CLAIMED"&&(o||s!==null)?(g.push(_e("quest-item-restyle")),v=Cf(Fc(o??s),.875)):p==="UNCLAIMED"&&(o||i!==null)?(g.push(_e("quest-item-restyle")),v=Cf(Fc(o??i),.875)):p==="EXPIRED"&&(o||l!==null)?(g.push(_e("quest-item-restyle")),v=Cf(Fc(o??l),.875)):p==="IGNORED"&&(o||a!==null)&&(g.push(_e("quest-item-restyle")),v=Cf(Fc(o??a),.875))),v!==null&&((n||c)==="black"?g.push(_e("quest-item-black-gradient")):(n||c)==="hide"?g.push(_e("quest-item-hide-gradient")):((n||c)==="default"?g.push(_e("quest-item-default-gradient")):g.push(_e("quest-item-intense-gradient")),v||g.push(_e("quest-item-contrast-logo")))),g.join(" ")}function ASe(e){let{makeMobileQuestsDesktopCompatible:t}=Ke.use(["makeMobileQuestsDesktopCompatible","triggerQuestsRerender"]);t?e.forEach(o=>{let i=o.config?.taskConfigV2?.tasks;i?.WATCH_VIDEO_ON_MOBILE&&(!i?.WATCH_VIDEO||N4.has(o.id))&&(N4.add(o.id),i.WATCH_VIDEO={...i.WATCH_VIDEO_ON_MOBILE,type:"WATCH_VIDEO"})}):N4.size>0&&(N4.forEach(o=>{let i=e.find(s=>s.id===o)?.config?.taskConfigV2;i&&delete i.tasks.WATCH_VIDEO}),N4.clear())}function Trt(e,t){let{reorderQuests:o,unclaimedSubsort:n,claimedSubsort:i,ignoredSubsort:s,expiredSubsort:a}=Ke.use(["ignoredQuestIDs","ignoredQuestProfile","reorderQuests","unclaimedSubsort","claimedSubsort","ignoredSubsort","expiredSubsort","completeVideoQuestsInBackground","completeGameQuestsInBackground","completeAchievementQuestsInBackground","triggerQuestsRerender"]);if(ASe(e),t||!o?.trim())return e;let l=o.split(",").map(g=>g.trim().toLowerCase()),c={claimed:[],expired:[],ignored:[],unclaimed:[],unknown:[]};e.forEach(g=>{let y=Xp(g);y==="CLAIMED"?c.claimed.push(g):y==="UNCLAIMED"?c.unclaimed.push(g):y==="EXPIRED"?c.expired.push(g):y==="IGNORED"?c.ignored.push(g):c.unknown.push(g)});let u=g=>{switch(g){case"Recent ASC":return(y,b)=>new Date(y.config.startsAt).getTime()-new Date(b.config.startsAt).getTime();case"Recent DESC":return(y,b)=>new Date(b.config.startsAt).getTime()-new Date(y.config.startsAt).getTime();case"Expiring ASC":return(y,b)=>new Date(y.config.expiresAt).getTime()-new Date(b.config.expiresAt).getTime();case"Expiring DESC":return(y,b)=>new Date(b.config.expiresAt).getTime()-new Date(y.config.expiresAt).getTime();case"Claimed ASC":return(y,b)=>new Date(y.userStatus?.claimedAt||0).getTime()-new Date(b.userStatus?.claimedAt||0).getTime();case"Claimed DESC":return(y,b)=>new Date(b.userStatus?.claimedAt||0).getTime()-new Date(y.userStatus?.claimedAt||0).getTime();default:return(y,b)=>new Date(b.config.startsAt).getTime()-new Date(y.config.startsAt).getTime()}},p=u(n||"Recent DESC");c.unclaimed.sort((g,y)=>{let b=!!g.userStatus?.completedAt,v=!!y.userStatus?.completedAt;return b!==v?b?1:-1:p(g,y)}),c.claimed.sort(u(i||"Claimed DESC")),c.ignored.sort(u(s||"Recent DESC")),c.expired.sort(u(a||"Expiring DESC"));let m=[];return l.forEach(g=>{c[g]&&m.push(...c[g])}),Object.keys(c).forEach(g=>{l.includes(g)||m.push(...c[g])}),m}function TY(e){Ke.use(["restyleQuests","ignoredQuestIDs","ignoredQuestProfile"]);let t={},o=null,n=Ke.store.restyleQuestsUnclaimed,i=Ke.store.restyleQuestsClaimed,s=Ke.store.restyleQuestsIgnored,a=Ke.store.restyleQuestsExpired,l=i!==null?Fc(i):"",c=n!==null?Fc(n):"",u=s!==null?Fc(s):"",p=a!==null?Fc(a):"",m=e?.dummyColor!==void 0,g=e?.dummyColor!==void 0&&e?.dummyColor!==null?Fc(e.dummyColor):null,y=e?Xp(e):null;if(y==="CLAIMED"?o=m?g:l||null:y==="UNCLAIMED"?o=m?g:c||null:y==="EXPIRED"?o=m?g:p||null:y==="IGNORED"&&(o=m?g:u||null),!o)return t;let v=Cf(o)?1:-1,E=jv(o,200*v),A=jv(o,150*v),C=jv(o,100*v),I=jv(o,50*v),N=jv(o,75*v);return t["--questify-color"]=`rgb(${o.r}, ${o.g}, ${o.b})`,t["--questify-quest-name"]=`rgb(${E.r}, ${E.g}, ${E.b})`,t["--questify-reward-title"]=`rgb(${A.r}, ${A.g}, ${A.b})`,t["--questify-reward-description"]=`rgb(${C.r}, ${C.g}, ${C.b})`,t["--questify-button-normal"]=`rgb(${I.r}, ${I.g}, ${I.b})`,t["--questify-button-hover"]=`rgb(${N.r}, ${N.g}, ${N.b})`,t}function Irt(){let{restyleQuestsPreload:e}=Ke.use(["restyleQuestsPreload"]);return e}async function Drt(e,t){let o=Jp(e.config.messages.questName),n=e.userStatus?.enrolledAt?new Date(e.userStatus.enrolledAt):null,i=Math.floor((new Date().getTime()-(n??new Date).getTime())/1e3)||1;wo.set(e.id,{progressTimeout:null,rerenderTimeout:null,progress:i,type:"watch"});let{raw:s,adjusted:a}=t,l=i,c=i,u=Math.max(0,a-c);if(Yo.info(`[${Mo()}] Quest ${o} will be completed in the background in ${u} seconds.`),!n){let E=await v7(e,6e4,15,Yo);if(e=C4(e),!E){Yo.warn(`[${Mo()}] Quest ${o} not enrolled within ${6e4/1e3} seconds.`),wo.delete(e.id);return}}if(!wo.has(e.id))return;let p=10,m;async function g(){clearInterval(m),clearTimeout(y);let v=await S7(e,s,Yo);wo.delete(e.id),v?(Yo.info(`[${Mo()}] Quest ${o} completed.`),Ke.store.notifyOnQuestComplete&&qt({title:"Quest Completed!",body:`The ${o} Quest has completed.`,dismissOnClick:!0,onClick:()=>ho.transitionTo(`${Cg}#${e.id}`)})):Yo.error(`[${Mo()}] Failed to complete Quest ${o}.`)}if(u<p)m=setTimeout(async()=>{await g()},u*1e3);else{let E=(s-c)/u,A=p*E,C=Math.floor(u/p),I=0;S7(e,i,Yo),m=setInterval(async()=>{I++,l+=p,c+=A;let N=Math.min(Math.floor(c),s);if((I<C||l<s-hY-p/2)&&await S7(e,N,Yo),I>=C){clearInterval(m);let _=C*p,O=Math.max(0,u-_);m=setTimeout(g,O*1e3);let F=wo.get(e.id);F&&(F.progressTimeout=m)}},p*1e3)}let y=setInterval(()=>{let v=wo.get(e.id);v?v.progress+=1:clearInterval(y),Tf()},1e3),b=wo.get(e.id);b&&(b.progressTimeout=m,b.rerenderTimeout=y)}async function Mrt(e,t){let o=Jp(e.config.messages.questName),n=e.userStatus?.enrolledAt?new Date(e.userStatus.enrolledAt):null,i=Ig(e),s=t.adjusted,a=b7(e,i)||0,l=Math.max(0,s-a),c=20;if(wo.set(e.id,{progressTimeout:null,rerenderTimeout:null,progress:a,type:"play"}),Yo.info(`[${Mo()}] Quest ${o} will be completed in the background in ${l} seconds.`),!n){let b=await v7(e,6e4,500,Yo);if(e=C4(e),!b){Yo.warn(`[${Mo()}] Quest ${o} not enrolled after waiting for ${6e4/1e3} seconds.`),wo.delete(e.id);return}}if(!wo.has(e.id))return;let u=await T4(e,!1,Yo,{attempts:3,delay:2500}),p=setInterval(async()=>{let y=await T4(e,!1,Yo,{attempts:3,delay:2500});if(y.progress===null){clearInterval(p),wo.delete(e.id),Yo.error(`[${Mo()}] Failed to send heartbeat for Quest ${o}.`);return}let b=y.progress>=s,v=s-y.progress,E=wo.get(e.id);if(E&&(E.progress=y.progress),b){clearInterval(p),clearTimeout(m);let A=await T4(e,!0,Yo,{attempts:3,delay:2500});wo.delete(e.id),A?(Yo.info(`[${Mo()}] Quest ${o} completed.`),Ke.store.notifyOnQuestComplete&&qt({title:"Quest Completed!",body:`The ${o} Quest has completed.`,dismissOnClick:!0,onClick:()=>ho.transitionTo(`${Cg}#${e.id}`)})):Yo.error(`[${Mo()}] Failed to complete Quest ${o}.`)}else v<c&&(clearInterval(p),clearTimeout(m),setTimeout(async()=>{let A=await T4(e,!0,Yo,{attempts:3,delay:2500});wo.delete(e.id),A?(Yo.info(`[${Mo()}] Quest ${o} completed.`),Ke.store.notifyOnQuestComplete&&qt({title:"Quest Completed!",body:`The ${o} Quest has completed.`,dismissOnClick:!0,onClick:()=>ho.transitionTo(`${Cg}#${e.id}`)})):Yo.error(`[${Mo()}] Failed to complete Quest ${o}.`)},(v+1)*1e3))},c*1e3),m=setInterval(()=>{let y=wo.get(e.id);y?y.progress+=1:clearInterval(m),Tf()},1e3),g=wo.get(e.id);g&&(g.progress=u.progress||a,g.progressTimeout=p,g.rerenderTimeout=m)}async function Nrt(e,t){let o=Jp(e.config.messages.questName),n=e.userStatus?.enrolledAt?new Date(e.userStatus.enrolledAt):null,i=e.config.taskConfigV2?.tasks.ACHIEVEMENT_IN_ACTIVITY;if(wo.set(e.id,{progressTimeout:null,rerenderTimeout:null,progress:0,type:"achievement"}),Yo.info(`[${Mo()}] Quest ${o} will be completed in the background.`),!n){let u=await v7(e,6e4,15,Yo);if(e=C4(e),!u){Yo.warn(`[${Mo()}] Quest ${o} not enrolled within ${6e4/1e3} seconds.`),wo.delete(e.id);return}}if(!wo.has(e.id))return;let s=i?.applications?.[0].id;if(!s){Yo.warn(`[${Mo()}] Could not find application ID for Quest ${o}.`),wo.delete(e.id);return}let a=null;try{let u=(await Ht.post({url:`/oauth2/authorize?client_id=${s}&response_type=code&scope=identify%20applications.entitlements&state=`,body:{authorize:!0}}))?.body?.location;if(u&&(a=new URL(u).searchParams.get("code")),!a){Yo.warn(`[${Mo()}] Auth code not found for Quest ${o}.`),wo.delete(e.id);return}}catch(c){Yo.error(`[${Mo()}] Failed to retrieve auth code for Quest ${o}:`,c),wo.delete(e.id);return}let l=await mrt.complete(s,a,t.adjusted);if(wo.delete(e.id),l.success)Yo.info(`[${Mo()}] Quest ${o} completed.`),Ke.store.notifyOnQuestComplete&&qt({title:"Quest Completed!",body:`The ${o} Quest has completed.`,dismissOnClick:!0,onClick:()=>ho.transitionTo(`${Cg}#${e.id}`)});else{let c=l.error||"An error occurred while completing the Quest.";Yo.error(`[${Mo()}] Failed to complete Quest ${o}:`,c);return}}function CSe(e){let{completeVideoQuestsInBackground:t,completeGameQuestsInBackground:o,completeAchievementQuestsInBackground:n}=Ke.store,i=Ig(e);if(!i)return!1;let s=Xp(e),a=!!e.userStatus?.completedAt;if(s!=="UNCLAIMED"||a)return!1;let l=i.type==="WATCH_VIDEO"||i.type==="WATCH_VIDEO_ON_MOBILE",c=i.type==="PLAY_ON_DESKTOP"||i.type==="PLAY_ON_XBOX"||i.type==="PLAY_ON_PLAYSTATION"||i.type==="PLAY_ACTIVITY",u=i.type==="ACHIEVEMENT_IN_ACTIVITY";return!!(l&&t||c&&o&&!1||u&&n&&!1)}function IY(e){let t=Jp(e.config.messages.questName),o=Ig(e),n=qv(o),i=wo.get(e.id),s=o?.type==="WATCH_VIDEO"||o?.type==="WATCH_VIDEO_ON_MOBILE",a=o?.type==="PLAY_ON_DESKTOP"||o?.type==="PLAY_ON_XBOX"||o?.type==="PLAY_ON_PLAYSTATION"||o?.type==="PLAY_ACTIVITY",l=o?.type==="ACHIEVEMENT_IN_ACTIVITY",c=CSe(e);if(e.userStatus?.completedAt||i)return!1;if(o)if(c){if(s)return Drt(e,n),!0;if(a)return Mrt(e,n),!0;if(l)return Nrt(e,n),!0}else return!1;else return Yo.warn(`[${Mo()}] Could not recognize the Quest type for ${t}.`),!1;return!1}function Brt(e){let{completeGameQuestsInBackground:t}=Ke.store;return wo.has(e.id)?!0:null}function Prt(e){let{completeGameQuestsInBackground:t,completeVideoQuestsInBackground:o,completeAchievementQuestsInBackground:n}=Ke.store,i=Ig(e),{adjusted:s}=qv(i),a=`${String(Math.floor(s/60)).padStart(2,"0")}:${String(s%60).padStart(2,"0")}`,l=i?.type==="WATCH_VIDEO"||i?.type==="WATCH_VIDEO_ON_MOBILE",c=i?.type==="PLAY_ON_DESKTOP"||i?.type==="PLAY_ON_XBOX"||i?.type==="PLAY_ON_PLAYSTATION"||i?.type==="PLAY_ACTIVITY",u=i?.type==="ACHIEVEMENT_IN_ACTIVITY";if(s>0){if(c&&t&&!1||l&&o)return`Complete (${a})`;if(u&&n)return"Complete (Immediate)"}return null}function DY(e,t=!1){let{completeGameQuestsInBackground:o,completeVideoQuestsInBackground:n,completeAchievementQuestsInBackground:i}=Ke.store,s=e.userStatus?.enrolledAt?new Date(e.userStatus.enrolledAt):null,a=Ig(e),l=wo.get(e.id),c=a?.type==="WATCH_VIDEO"||a?.type==="WATCH_VIDEO_ON_MOBILE",u=a?.type==="PLAY_ON_DESKTOP"||a?.type==="PLAY_ON_XBOX"||a?.type==="PLAY_ON_PLAYSTATION"||a?.type==="PLAY_ACTIVITY",p=a?.type==="ACHIEVEMENT_IN_ACTIVITY";if(s){if(u&&o&&!1||c&&n){let{adjusted:m}=qv(a),g=b7(e,a)||0,y=Math.min(g,m),b=Math.max(0,m-y),v=c&&s&&(new Date().getTime()-s.getTime())/1e3>=m,E=`${String(Math.floor(b/60)).padStart(2,"0")}:${String(b%60).padStart(2,"0")}`,A=b>=60?`${Math.floor(b/60)}m ${b%60}s`:`${b%60}s`;if(l)return v||!b?"Completing...":`Completing ${t?`in ${A}`:`(${E})`}`;if(c||u)return v?"Complete (Immediate)":b===m?`Complete (${E})`:`Resume (${E})`}else if(p&&i)return l?"Completing...":"Complete (Immediate)"}return null}function _rt({quest:e,percentCompleteText:t}){let o=Ig(e);if(!o)return null;let{adjusted:n}=qv(o),i=b7(e,o);if(!n||i===null)return null;let s=Math.min(1,i/n);return t?{percentComplete:s,percentCompleteText:`${Math.floor(s*100)}%`}:{percentComplete:s}}function Rrt(e){let t=Xp(e),o=!!e.userStatus?.completedAt&&t==="UNCLAIMED",n=wo.get(e.id),i=e.config.rewardsConfig.rewards[0]||null,s=DY(e,!0)||"Completing",a=o?"Completed":null;return!n&&!a?null:i?.orbQuantity?`${a||s} for ${i.orbQuantity} Orbs.`:i?.messages?.nameWithArticle?`${a||s} for ${i.messages.nameWithArticle}.`:`${a||s} for an unrecognized reward.`}function Lrt(e){return Jp(e.config.messages.questName)}function Ort(){Ke.use(["triggerQuestsRerender"]);let e=null,t=1/0;return wo.forEach((o,n)=>{let i=vl.getQuest(n);if(!i)return;let s=Ig(i),{adjusted:a}=qv(s);if(!a)return;let l=a-o.progress;l<t-3&&(t=l,e=i)}),e||(e=Array.from(vl.quests.values()).filter(n=>n.userStatus?.completedAt&&Xp(n)==="UNCLAIMED").sort((n,i)=>{let s=new Date(n.userStatus?.completedAt).getTime();return new Date(i.userStatus?.completedAt).getTime()-s})[0]??null),e}function Frt(e){let{questButtonDisplay:t,unclaimedUnignoredQuests:o,onQuestsPage:n}=Ke.use(["questButtonDisplay","unclaimedUnignoredQuests","onQuestsPage"]);return ESe(t,o,n)?e===Cg:!1}function Urt(){Ke.use(["triggerQuestsRerender"]);let[e,t]=L(0);return se(()=>vSe(()=>t(o=>o+1)),[]),e}function $rt(){let{rememberQuestPageSort:e,lastQuestPageSort:t}=Ke.store;return e?t:"questify"}function Hrt(){let{rememberQuestPageFilters:e,lastQuestPageFilters:t}=Ke.store;return e?Object.values(t).map(o=>JSON.parse(JSON.stringify(o))):null}function zrt(e){Ke.store.lastQuestPageSort=e}function Grt(e){!e||!Object.keys(e).length||!Object.values(e).every(t=>t.group&&t.filter)||(Ke.store.lastQuestPageFilters=JSON.parse(JSON.stringify(e)).reduce((t,o)=>({...t,[o.filter]:o}),{}))}function qrt(e,t,o,n){let i=["WATCH_VIDEO","WATCH_VIDEO_ON_MOBILE","PLAY_ON_DESKTOP","PLAY_ON_XBOX","PLAY_ON_PLAYSTATION","PLAY_ACTIVITY","ACHIEVEMENT_IN_ACTIVITY"];return Array.from(i).some(a=>Object.values(e.config.taskConfigV2?.tasks||{}).some(l=>l.type===a&&(l.type!=="WATCH_VIDEO_ON_MOBILE"||Ke.store.makeMobileQuestsDesktopCompatible)))?{disabled:Brt(e)??o,text:DY(e)??t,onClick:()=>{!IY(e)&&n&&n()},icon:()=>{}}:{disabled:o,text:t,onClick:n,icon:()=>{}}}var mrt,N4,wo,N7,I4=x(()=>{"use strict";d();cSe();_a();Wo();B0();Q();Ad();H();dv();$();fe();B();yY();E7();k7();mrt=VencordNative.pluginHelpers.Questify,N4=new Set,wo=new Map;Bh(!0,"Questify","QuestCompleter","completeVideoQuestsInBackground","completeGameQuestsInBackground","completeAchievementQuestsInBackground");N7=k({name:"Questify",description:"Enhance your Quest experience with a suite of features, or disable them entirely if they're not your thing.",authors:[j.Etorix],dependencies:["AudioPlayerAPI","ServerListAPI"],startAt:"Init",settings:Ke,sortQuests:Trt,formatLowerBadge:w7,getQuestTileStyle:TY,getQuestTileClasses:CY,makeDesktopCompatible:ASe,shouldHideQuestPopup:wrt,shouldHideDiscoveryTab:yrt,shouldPreloadQuestAssets:Irt,shouldHideDirectMessagesTab:brt,shouldPreventFetchingQuests:krt,shouldHideBadgeOnUserProfiles:Srt,shouldHideSponsoredQuestBanner:vrt,shouldHideGiftInventoryRelocationNotice:xrt,shouldHideFriendsListActiveNowPromotion:Ert,shouldHideMembersListActivelyPlayingIcon:Art,getQuestUnacceptedButtonText:Prt,getQuestPanelPercentComplete:_rt,processQuestForAutoComplete:IY,getQuestAcceptedButtonProps:qrt,getQuestAcceptedButtonText:DY,getQuestPanelSubtitleText:Rrt,getQuestPanelTitleText:Lrt,getQuestPanelOverride:Ort,setLastFilterChoices:Grt,getLastFilterChoices:Hrt,activeQuestIntervals:wo,disguiseHomeButton:Frt,getLastSortChoice:$rt,setLastSortChoice:zrt,useQuestRerender:Urt,patches:[{find:"quests-wumpus-hikes-mountain-transparent-background",replacement:{match:/return(?=\(0,\i.\i\)\("div",{className:)/,replace:"return $self.shouldHideGiftInventoryRelocationNotice()?null:"}},{find:"GLOBAL_DISCOVERY_SIDEBAR},",replacement:[{match:/(GLOBAL_DISCOVERY_TABS).map/,replace:'$1.filter(tab=>!(tab==="quests"&&$self.shouldHideDiscoveryTab())).map'}]},{find:"QUEST_HOME_V2):",replacement:[{match:/(?<="family-center"\):null,)/,replace:"$self.shouldHideDirectMessagesTab()||"}]},{find:"{isInDiscoverQuestHomeTab:",group:!0,replacement:[{match:/(?<=resetSortingFiltering\(\)},\[\]\);)/,replace:"const shouldHideSponsoredQuestBanner=$self.shouldHideSponsoredQuestBanner();"},{match:/(?<=if\(null!=\i\))return(.{0,60}?}\))/,replace:"if(!shouldHideSponsoredQuestBanner)return $1"}]},{find:'"ActivityStatus")',group:!0,replacement:[{match:/(?<=\i\)&&"xs"===\i;)/,replace:"const shouldHideMembersListActivelyPlayingIcon=$self.shouldHideMembersListActivelyPlayingIcon();"},{match:/(?<=\i\(\),\i&&)/,replace:"!shouldHideMembersListActivelyPlayingIcon&&"}]},{find:".MODAL]:26",group:!0,replacement:[{match:/(return 0===\i.length\?null:\(0,)/,replace:"const shouldHideBadgeOnUserProfiles=$self.shouldHideBadgeOnUserProfiles();$1"},{match:/(badges:\i)/,replace:'$1.filter(badge=>!(["quest_completed","orb_profile_badge"].includes(badge.id)&&shouldHideBadgeOnUserProfiles))'}]},{find:"QUESTS_BAR,questId",replacement:{match:/(?=if\(null==(\i)\)return null;)(.{0,125}?quest:\i}\);return)/,replace:"const hidePopup=$self.shouldHideQuestPopup($1);$2!hidePopup&&"}},{find:",{progressTextAnimation:",replacement:{match:/(?<=children:\i}=)(\i)/,replace:"Object.assign({},$1,$self.getQuestPanelPercentComplete($1))"}},{find:'"progress-title"',replacement:{match:/(?<=return.{0,150}?quest:(\i),percentComplete:\i.{0,280}?"progress-title",children.{0,115}?children:)(\i.{0,50}"progress-subtitle",isTextTransition:!0,children.{0,115}?children:)/,replace:"$self.getQuestPanelTitleText($1)??$2$self.getQuestPanelSubtitleText($1)??"}},{find:'"useQuestBarQuest"})',replacement:{match:/(?<=null\);return )(\i\?\i:\i)/,replace:"$self.getQuestPanelOverride()??($1)"}},{find:"`application-stream-",group:!0,replacement:[{match:/(let{party)/,replace:"const shouldHideFriendsListActiveNowPromotion=$self.shouldHideFriendsListActiveNowPromotion();$1"},{match:/(null!=(\i)&&null!=\i&&)/,replace:"!shouldHideFriendsListActiveNowPromotion&&$1"}]},{find:'type:"QUESTS_FETCH_CURRENT_QUESTS_BEGIN"',group:!0,replacement:[{match:/(if\(!\i.\i.isFetchingCurrentQuests\))/,replace:"if($self.shouldPreventFetchingQuests())return;$1"},{match:/(?=let.{0,150}QUESTS_FETCH_QUEST_TO_DELIVER_BEGIN)/,replace:"if($self.shouldPreventFetchingQuests())return;"}]},{find:".popoutLayerContext,renderPopout:",group:!0,replacement:[{match:/(?<=forwardRef\(function\((\i),\i\){)/,replace:"const vcDynamicDropdownFeedback=$1.feedback;"},{match:/((\i);return\(0,\i.\i\)\(\i,{)(loading:\i,)/,replace:"$1feedback:vcDynamicDropdownFeedback,$3"},{match:/(\i.intl.string\(\i.\i#{intl::NO_RESULTS_FOUND}\))/,replace:"arguments[0]?.feedback??$1"},{match:/(?<=\.scrollIntoView\()/,replace:'{block:"nearest",inline:"nearest"}'},{match:/(?<=renderOptionPrefix:\i,renderOptionSuffix:\i)/,replace:",popoutClassName:arguments[0]?.popoutClassName,optionClassName:arguments[0]?.optionClassName"},{match:/"aria-busy":!0,className:\i\(\)\(/,replace:"$&arguments[0]?.popoutClassName,"},{match:/(?<="aria-posinset":\i,"aria-setsize":\i.length,)/,replace:"optionClassName:arguments[0]?.optionClassName,"},{match:/(?<=focusProps:{enabled:!1},className:\i\(\)\()/,replace:"arguments[0]?.optionClassName,"},{match:/(?<=closeOnSelect:\i)(?=})/,replace:",...arguments[0]"}]},{find:'("BalanceCounter")',replacement:[{match:/(`\${(\i).toFixed\(0\)}`.length)/,replace:"$1+($2>=1e6?0.8:$2>=1e3?0.4:0)"},{match:/(?<=children:\i.to\(\i=>`\${\i)(.toFixed\(0\))/,replace:".toLocaleString(undefined,{maximumFractionDigits:0})"}]},{find:".INTERACTIVE_TEXT_ACTIVE.css,shape",group:!0,replacement:[{match:/(=>{let{count:\i,)/,replace:"$1maxDigits,"},{match:/(children:\i\(\i)/,replace:"$1,maxDigits"},{match:/(?<=function \i\((\i))(\){return )(\i<1e3.{0,60}?k\+`)/,replace:",maxDigits$2maxDigits===undefined?($3):$self.formatLowerBadge($1,maxDigits)[0]"}]},{find:"id:`quest-tile-",group:!0,replacement:[{match:/(?<=\i.current=\i},className:)(\i\(\)\(\i.\i,\i\)),/,replace:"$self.getQuestTileClasses($1,arguments[0].quest),style:$self.getQuestTileStyle(arguments[0].quest),"},{match:/(warningHints:\i,)isVisibleInViewport:(\i)/,replace:"$1isVisibleInViewport:$self.shouldPreloadQuestAssets()?true:$2"},{match:/(onReceiveErrorHints:\i,)isVisibleInViewport:(\i)/,replace:"$1isVisibleInViewport:$self.shouldPreloadQuestAssets()?true:$2"}]},{find:".ALL)}):(",group:!0,replacement:[{match:/(claimedQuests:(\i).{0,50}?;)/,replace:"$1$2=$self.sortQuests($2);"}]},{find:'SUGGESTED="suggested",',replacement:{match:/return ((\i).SUGGESTED="suggested",)/,replace:'return $2.QUESTIFY="questify",$1'}},{find:"has no rewards configured`",replacement:{match:/(?=case (\i.\i).SUGGESTED)/,replace:'case $1.QUESTIFY:return "Questify";'}},{find:'CLAIMED="claimed",',group:!0,replacement:[{match:/(?<=function \i\((\i),\i\){let \i=\i.useRef.{0,100}?;)(return \i.useMemo\(\(\)=>{)/,replace:'const questRerenderTrigger=$self.useQuestRerender();const questifySorted=$self.sortQuests($1,arguments[1].sortMethod!=="questify");$2if(arguments[1].sortMethod==="questify"){$1=questifySorted;};'},{match:/return (\i).current;/,replace:"null;"},{match:/(?<=sortMethod:(\i).{0,100}?\)\);)(return )((\i).sort)/,replace:'$2$1==="questify"?$4:$3'},{match:/(?<=id\);.{0,100}?,\i},\[\i,\i)/,replace:",questRerenderTrigger,questifySorted"}]},{find:"({resetSortingFiltering:()",group:!0,replacement:[{match:/(\i.\i.SUGGESTED)/,replace:"$self.getLastSortChoice()??$1"},{match:/(get\(\i\)\)\?\?)(\i)/,replace:"$1$self.getLastFilterChoices()??$2"},{match:/(onChange:)(\i)(.{0,40}?selectedSortMethod)/,replace:"$1(value)=>{$self.settings.store.lastQuestPageSort=value;$2(value);}$3"},{match:/(onChange:)(\i)(.{0,40}?selectedFilters)/,replace:"$1(value)=>{$self.settings.store.lastQuestPageFilters=value.reduce((acc,item)=>({...acc,[item.filter]:item}),{});$2(value);}$3"},{match:/(?<=ALL,\i.useMemo\(\(\)=>\()({sortMethod:(\i),filters:(\i))/,replace:"$self.setLastSortChoice($2),$self.setLastFilterChoices($3),$1"}]},{find:",{rewardWithArticleHook:()",replacement:{match:/showPlaceholder:!\i/,replace:"showPlaceholder:false"}},{find:"IN_PROGRESS:if(",group:!0,replacement:[{match:/(tooltipText:\i.intl.string\(\i.\i.\i\),onClick:\(\)=>)(\(0,\i.\i\)\({quest)/,replace:"$1!$self.processQuestForAutoComplete(arguments[0].quest)&&$2"},{match:/(\i,tooltipText:null,onClick:async\(\)=>{)/,replace:"$self.getQuestUnacceptedButtonText(arguments[0].quest)??$1const startingAutoComplete=arguments[0].isVideoQuest?false:$self.processQuestForAutoComplete(arguments[0].quest);"},{match:/(if\(\i\)return{text:)/,replace:"$1$self.getQuestAcceptedButtonText(arguments[0].quest)??"},{match:/(?=return \i.useMemo)/,replace:"const questRerenderTrigger=$self.useQuestRerender();"},{match:/(\i\.intl\.string\(\i\.\i#{intl::QUESTS_SEE_CODE}\)\}\)\}\},\[|\)\}\}\},\[)/,replace:"$1questRerenderTrigger,"},{match:/(?<=,)(\i\(\))(\)}};)/,replace:"!startingAutoComplete&&$1$2"}]},{find:"CAPTCHA_FAILED:",replacement:{match:/(?<=SUCCESS:)(\i\({)/,replace:"!$self.processQuestForAutoComplete(arguments[0])&&$1"}},{find:'"sm",preClickCallback:',replacement:[{match:/(?=let{quest:)/,replace:"const questifyText=$self.getQuestUnacceptedButtonText(arguments[0].quest);"},{match:/(?<=}\),)(\i\?\.\(\))/,replace:"!$self.processQuestForAutoComplete(arguments[0].quest)&&($1)"},{match:/(?<=,text:)(?=\i)/,replace:"questifyText??"}]},{find:"WATCH_VIDEO,skipEnrollmentCheck:!0})",group:!0,replacement:[{match:/(select:)(\i)(,serialize:\i=>{)/g,replace:"$1(platform)=>{$self.processQuestForAutoComplete(arguments[0].quest),$2(platform)}$3"},{match:/(?<=secondary",)disabled:(!0),text:(\i\.intl\.string\(\i\.\i#{intl::QUEST_ACCEPTED}\)),/,replace:"...$self.getQuestAcceptedButtonProps(arguments[0].quest,$2,$1,undefined),"},{match:/(?<=icon:.{0,35}?onClick:(.{0,20}?),text:(\i),fullWidth:!0)/,replace:",...$self.getQuestAcceptedButtonProps(arguments[0].quest,$2,false,$1)"}]},{find:"GLOBAL_DISCOVERY),",replacement:{match:/(pathname:(\i)}.{0,400}?return )/,replace:"$1$self.disguiseHomeButton($2)?false:"}}],contextMenus:{"quests-entry":Crt},flux:{CHANNEL_SELECT(e){Ke.store.onQuestsPage=window.location.pathname===Cg},QUESTS_FETCH_CURRENT_QUESTS_SUCCESS(e){let t=e.source?` [${e.source}]`:"";Yo.info(`[${Mo()}] [QUESTS_FETCH_CURRENT_QUESTS_SUCCESS]${t}
`,e),If(void 0,e.quests)},QUESTS_ENROLL_SUCCESS(e){Yo.info(`[${Mo()}] [QUESTS_ENROLL_SUCCESS]
`,e),Wv("Questify",Yo),If()},QUESTS_CLAIM_REWARD_SUCCESS(e){Yo.info(`[${Mo()}] [QUESTS_CLAIM_REWARD_SUCCESS]
`,e),Wv("Questify",Yo),If()},QUESTS_USER_STATUS_UPDATE(e){Yo.info(`[${Mo()}] [QUESTS_USER_STATUS_UPDATE]
`,e),If()},RUNNING_GAMES_CHANGE(e){let t=e.games.map(n=>n.id),o=!1;Array.from(vl.quests.values()).forEach(n=>{let i=Jp(n.config.messages.questName),s=n.config.application.id;if(t.includes(s)&&wo.has(n.id)){let a=wo.get(n.id);clearInterval(a?.progressTimeout),clearTimeout(a?.rerenderTimeout),wo.delete(n.id),Yo.info(`[${Mo()}] Application for Quest ${i} that was being completed in the background has been launched. Stopping background completion to prevent duplicate heartbeats.`),o=!0}}),o&&Tf()},LOGOUT(e){Ke.store.unclaimedUnignoredQuests=0,Ke.store.onQuestsPage=!1},LOGIN_SUCCESS(e){p0.then(()=>{Wv("Questify",Yo)})}},renderQuestifyButton:ee.wrap(hrt,{noop:!0}),start(){kc(0,this.renderQuestifyButton);let e=Ke.store.fetchingQuestsInterval;e>=I7&&e<=D7&&AY()&&kY()},stop(){Ec(0,this.renderQuestifyButton),EY(),wo.forEach((e,t)=>{clearInterval(e.progressTimeout),clearTimeout(e.rerenderTimeout),wo.delete(t)})}})});function TSe(){let{showBookmarkBar:e}=dt.use(["showBookmarkBar"]);return r(M.Menu,{navId:"channeltabs-context",onClose:()=>V.dispatch({type:"CONTEXT_MENU_CLOSE"}),"aria-label":"ChannelTabs Context Menu"},r(M.MenuGroup,null,r(M.MenuCheckboxItem,{checked:e,id:"show-bookmark-bar",label:"Bookmark Bar",action:()=>{dt.store.showBookmarkBar=!dt.store.showBookmarkBar}})))}function MY({modalProps:e,modalKey:t,bookmark:o,onSave:n}){let[i,s]=L(o.name),[a,l]=L(Gr(o)?o.iconColor:void 0),c=a7(o);return r(Pe,{...e},r(je,null,r(Y,{size:"lg",weight:"semibold"},"Edit Bookmark")),r($e,null,r(re,{className:Z.top16},"Bookmark Name"),r(qe,{value:i===c?void 0:i,placeholder:c,onChange:u=>s(u)}),Gr(o)&&r(f,null,r(re,{className:Z.top16},"Folder Color"),r(to,{options:Object.entries(g4).map(([u,p])=>({label:u,value:p,default:o.iconColor===p})),isSelected:u=>a===u,select:l,serialize:String}))),r(ht,null,r(U,{onClick:()=>n(i||c,a)},"Save"),r(U,{color:U.Colors.TRANSPARENT,look:U.Looks.FILLED,onClick:()=>vo(t)},"Cancel")))}function jrt({modalProps:e,modalKey:t,bookmarks:o,onSave:n}){let[i,s]=L(-1);return r(Pe,{...e},r(je,null,r(Y,{size:"lg",weight:"semibold"},"Add Bookmark to Folder")),r($e,null,r(re,{className:Z.top16},"Select a folder"),r(to,{options:[...Object.entries(o).filter(([,a])=>Gr(a)).map(([a,l])=>({label:l.name,value:parseInt(a,10)})),{label:"Create one",value:-1,default:!0}],isSelected:a=>a===i,select:s,serialize:String})),r(ht,null,r(U,{onClick:()=>n(i)},"Save"),r(U,{color:U.Colors.TRANSPARENT,look:U.Looks.FILLED,onClick:()=>vo(t)},"Cancel")))}function Wrt({modalProps:e,modalKey:t,onConfirm:o}){return r(Pe,{...e},r(je,null,r(Y,{size:"lg",weight:"semibold"},"Are you sure?")),r($e,null,r(W,{className:Z.top16},"Deleting a bookmark folder will also delete all bookmarks within it.")),r(ht,null,r(U,{color:U.Colors.RED,onClick:o},"Delete"),r(U,{color:U.Colors.TRANSPARENT,look:U.Looks.FILLED,onClick:()=>vo(t)},"Cancel")))}function ISe({bookmarks:e,index:t,methods:o}){let{showBookmarkBar:n,bookmarkNotificationDot:i}=dt.use(["showBookmarkBar","bookmarkNotificationDot"]),s=e[t],a=Gr(s);return r(M.Menu,{navId:"channeltabs-bookmark-context",onClose:()=>V.dispatch({type:"CONTEXT_MENU_CLOSE"}),"aria-label":"ChannelTabs Bookmark Context Menu"},r(M.MenuGroup,null,i&&!a&&r(M.MenuItem,{id:"mark-as-read",label:St("MARK_AS_READ"),disabled:!ss.hasUnread(s.channelId),action:()=>v0.ackChannel(ne.getChannel(s.channelId))}),a?r(M.MenuItem,{id:"open-all-in-folder",label:"Open All Bookmarks",action:()=>s.bookmarks.forEach(l=>ka(l))}):r(M.MenuItem,{id:"open-in-tab",label:"Open in New Tab",action:()=>ka(s)})),r(M.MenuGroup,null,r(M.MenuItem,{id:"edit-bookmark",label:"Edit Bookmark",action:()=>{let l=Ee(c=>r(MY,{modalProps:c,modalKey:l,bookmark:s,onSave:(u,p)=>{o.editBookmark(t,{name:u}),p&&o.editBookmark(t,{iconColor:p}),vo(l)}}))}}),r(M.MenuItem,{id:"delete-bookmark",label:"Delete Bookmark",action:()=>{if(a){let l=Ee(c=>r(Wrt,{modalProps:c,modalKey:l,onConfirm:()=>{o.deleteBookmark(t),vo(l)}}))}else o.deleteBookmark(t)}}),r(M.MenuItem,{id:"add-to-folder",label:"Add Bookmark to Folder",disabled:a,action:()=>{let l=Ee(c=>r(jrt,{modalProps:c,modalKey:l,bookmarks:e,onSave:u=>{if(u===-1){let p=o.addFolder();o.addBookmark(s,p)}else o.addBookmark(s,u);o.deleteBookmark(e.indexOf(s)),vo(l)}}))}})),r(M.MenuGroup,null,r(M.MenuCheckboxItem,{checked:n,id:"show-bookmark-bar",label:"Bookmark Bar",action:()=>{dt.store.showBookmarkBar=!dt.store.showBookmarkBar}})))}function DSe({tab:e}){let t=ne.getChannel(e.channelId),[o,n]=L(e.compact),{showBookmarkBar:i}=dt.use(["showBookmarkBar"]);return r(M.Menu,{navId:"channeltabs-tab-context",onClose:()=>V.dispatch({type:"CONTEXT_MENU_CLOSE"}),"aria-label":"ChannelTabs Tab Context Menu"},r(M.MenuGroup,null,t&&r(M.MenuItem,{id:"mark-as-read",label:St("MARK_AS_READ"),disabled:!ss.hasUnread(t.id),action:()=>v0.ackChannel(t)}),r(M.MenuCheckboxItem,{checked:o,id:"toggle-compact-tab",label:"Compact",action:()=>{n(s=>!s),mY(e.id)}})),Mn.length!==1&&r(M.MenuGroup,null,r(M.MenuItem,{id:"close-tab",label:"Close Tab",action:()=>Ag(e.id)}),r(M.MenuItem,{id:"close-other-tabs",label:"Close Other Tabs",action:()=>rY(e.id)}),r(M.MenuItem,{id:"close-right-tabs",label:"Close Tabs to the Right",disabled:Mn.indexOf(e)===Mn.length-1,action:()=>iY(e.id)}),r(M.MenuItem,{id:"close-left-tabs",label:"Close Tabs to the Left",disabled:Mn.indexOf(e)===0,action:()=>sY(e.id)}),r(M.MenuItem,{id:"reopen-closed-tab",label:"Reopen Closed Tab",disabled:!aY(),action:()=>uY()})),r(M.MenuGroup,null,r(M.MenuCheckboxItem,{checked:i,id:"show-bookmark-bar",label:"Bookmark Bar",action:()=>{dt.store.showBookmarkBar=!dt.store.showBookmarkBar}})))}var B7=x(()=>{"use strict";d();Et();ut();wt();kg();mt();co();at();B()});function Qrt(e=20,t=20,o){return r("svg",{viewBox:"0 0 24 24",height:e,width:t,fill:"none",className:o},r("path",{fill:"currentColor",d:"M3 3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V3zm2 1v16h10V4H5zm13-1h2a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1h-2V3zm0 2v12h1V5h-1z"}))}function Zrt({size:e,fill:t}){return r("svg",{width:e,height:e,viewBox:"0 0 24 24"},r("path",{fill:t,d:"M17.3 18.7a1 1 0 0 0 1.4-1.4L13.42 12l5.3-5.3a1 1 0 0 0-1.42-1.4L12 10.58l-5.3-5.3a1 1 0 0 0-1.4 1.42L10.58 12l-5.3 5.3a1 1 0 1 0 1.42 1.4L12 13.42l5.3 5.3Z"}))}function NY({isTyping:e}){return e?r(Krt,{dotRadius:3,themed:!0,className:As("typing-indicator")}):null}function PSe(e){let{guild:t,guildId:o,channel:n,channelId:i,compact:s}=e,a=z.getCurrentUser()?.id,l=n?.recipients,{noPomeloNames:c,showStatusIndicators:u}=dt.use(["noPomeloNames","showStatusIndicators"]),[p,m,g]=Je([il,cr],()=>{let y=l?.[0]??"";return[!!Object.keys(il.getTypingUsers(e.channelId)).filter(b=>b!==a).length,cr.getStatus(y),cr.isMobileOnline(y)]});if(t){if(n)return r(f,null,r(NSe,{guild:t}),r(Yrt,{channel:n,guild:t}),r(Y,{className:As("name-text")},n.name),r(Kv,{channelIds:[n.id]}),r(NY,{isTyping:p}));{let y=`${St("UNKNOWN_CHANNEL")} (${i})`;switch(i){case"customize-community":y=St("CHANNELS_AND_ROLES");break;case"channel-browser":y=St("GUILD_SIDEBAR_CHANNEL_BROWSER");break;case"shop":y=St("GUILD_SHOP_CHANNEL_LABEL");break;case"member-safety":y=St("MEMBER_SAFETY_CHANNEL_TITLE");break;case"@home":y=St("SERVER_GUIDE");break}return r(f,null,r(NSe,{guild:t}),r(Y,{className:As("name-text")},y))}}if(n&&l?.length)if(l.length===1){let y=z.getUser(l[0]),b=c?y.globalName||y.username:yu(y);return r(f,null,r(Bl,{size:"SIZE_24",src:y.getAvatarURL(o,128),status:u?m:void 0,isTyping:p,isMobile:g}),r(Y,{className:As("name-text")},b),r(Kv,{channelIds:[n.id]}),!u&&r(NY,{isTyping:p}))}else return r(f,null,r(Xrt,{channel:n}),r(Y,{className:As("name-text")},n?.name||St("GROUP_DM")),r(Kv,{channelIds:[n.id]}),r(NY,{isTyping:p}));if(i&&i.startsWith("__")){let b={__quests__:{label:"Quests",Icon:h4},"__message-requests__":{label:"Message Requests",Icon:y4},__friends__:{label:St("FRIENDS"),Icon:zv},__shop__:{label:"Shop",Icon:x4},__library__:{label:"Library",Icon:()=>Qrt(20,20)},__discovery__:{label:"Discovery",Icon:b4},__nitro__:{label:"Nitro",Icon:v4},__icymi__:{label:"ICYMI",Icon:JK},__activity__:{label:"Activity",Icon:VK}}[i];if(b){let{label:v,Icon:E}=b;return r(f,null,r(E,null),r(Y,{className:As("name-text")},v))}}return o==="@me"||o===void 0?r(f,null,r(zv,null),r(Y,{className:As("name-text")},St("FRIENDS"))):r(f,null,r(S4,null),r(Y,{className:As("name-text")},St("UNKNOWN_CHANNEL")))}function BY(e){let{channelId:t,guildId:o,id:n,index:i,compact:s}=e,a=ct.getGuild(o),l=ne.getChannel(t),[c,u]=L(!0),[p,m]=L(!1),[g,y]=L(!1),[b,v]=L(!1),[E,A]=L(!1),{showTabNumbers:C,tabNumberPosition:I}=dt.use(["showTabNumbers","tabNumberPosition"]);se(()=>{if(c){let K=setTimeout(()=>u(!1),300);return()=>clearTimeout(K)}},[c]),se(()=>{if(b&&!g){let K=setTimeout(()=>v(!1),100);return()=>clearTimeout(K)}},[b,g]);let N=kt(null),_=kt(0),O=100,F=K=>{K.preventDefault(),K.stopPropagation();let oe=K.clientX,le=N.current?.getBoundingClientRect().width||0,he=192,Ae=dt.store.tabWidthScale;document.body.style.cursor="ew-resize",document.body.style.userSelect="none";let Ce=ce=>{let pe=ce.clientX-oe,Ze=(le+pe)/he,ge=Math.max(.5,Math.min(2,Ze));Ae=Math.round(ge*100),N.current&&N.current.style.setProperty("--tab-width-scale",String(Ae/100))},ye=()=>{document.removeEventListener("mousemove",Ce),document.removeEventListener("mouseup",ye),document.body.style.cursor="",document.body.style.userSelect="",dt.store.tabWidthScale=Ae,N.current&&N.current.style.removeProperty("--tab-width-scale")};document.addEventListener("mousemove",Ce),document.addEventListener("mouseup",ye)},[,J]=y0(()=>({type:"vc_ChannelTab",item:()=>{y(!0),_.current=Date.now()-O;let K=Mn.find(oe=>oe.id===n);return{id:n,channelId:K?.channelId||t,guildId:K?.guildId||o}},collect:K=>({isDragging:!!K.isDragging()}),end:()=>{y(!1),v(!1),_.current=0}}),[n,t,o]),[,G]=Rm(()=>({accept:"vc_ChannelTab",hover:(K,oe)=>{if(!N.current)return;let le=Date.now(),he=K.id,Ae=n;if(he===Ae)return;let Ce=Mn.findIndex(Ve=>Ve.id===he),ye=Mn.findIndex(Ve=>Ve.id===Ae);if(Ce===-1||ye===-1)return;let ce=oe.isOver({shallow:!0});if(v(ce),le-_.current<O)return;let pe=N.current.getBoundingClientRect(),xe=oe.getClientOffset();if(!xe)return;let Ze=xe.x-pe.left,ge=pe.right-pe.left,ae=ge/2,Xe=(document.querySelector(".vc-channeltabs-tab-dragging")?.getBoundingClientRect().width||ge)/2,It=ge*.05;Ce<ye&&Ze+Xe<ae+It||Ce>ye&&Ze-Xe>ae-It||(_.current=le,lY(Ce,ye))},drop:()=>{v(!1)}}),[]);J(G(N));let te=wo.size>0;return r("div",{className:As("tab",{"tab-compact":s,"tab-selected":jd(n),"tab-entering":c,"tab-closing":p,"tab-dragging":g,"tab-drop-target":b,"tab-nitro":t==="__nitro__","tab-quests-active":t==="__quests__"&&te,wider:dt.store.widerTabsAndBookmarks}),key:i,ref:N,onMouseEnter:()=>A(!0),onMouseLeave:()=>A(!1),onAuxClick:K=>{K.button===1&&Ag(n)},onContextMenu:K=>Dt.openContextMenu(K,()=>r(DSe,{tab:e}))},r("button",{className:As("button","channel-info"),onClick:()=>Es(n)},r("div",{className:As("tab-inner"),"data-compact":s},C&&I==="left"&&r(BSe,{number:i+1,position:"left",isSelected:jd(n),isCompact:s,isHovered:E}),r(PSe,{...e,guild:a,channel:l}),C&&I==="right"&&r(BSe,{number:i+1,position:"right",isSelected:jd(n),isCompact:s,isHovered:E}))),Mn.length>1&&r("button",{className:As("button","close-button",{"close-button-compact":s,hoverable:!s}),onClick:()=>{m(!0),setTimeout(()=>Ag(n),150)}},r(Zrt,{size:16,fill:"var(--interactive-icon-default)"})),!s&&dt.store.showResizeHandle&&r("div",{className:As("tab-resize-handle"),onMouseDown:F}))}var Krt,MSe,Yrt,As,NSe,Xrt,Kv,BSe,_Se,PY=x(()=>{"use strict";d();Et();kg();l7();I4();nt();mt();xt();fe();B();B7();Krt=De("Math.min(1,Math.max(","dotRadius:"),MSe=et("numberBadge","baseShapeRound"),Yrt=De('"ChannelItemIcon")');As=de("vc-channeltabs-");NSe=({guild:e})=>e.icon?r("img",{src:`https://${window.GLOBAL_ENV.CDN_HOST}/icons/${e?.id}/${e?.icon}.png`,className:As("icon")}):r("div",{className:As("guild-acronym-icon")},r(Y,{size:"xs",weight:"semibold",tag:"span"},Ba(e))),Xrt=({channel:e})=>r("img",{src:e?.icon?`https://${window.GLOBAL_ENV.CDN_HOST}/channel-icons/${e?.id}/${e?.icon}.png`:"https://discord.com/assets/c6851bd0b03f1cca5a8c1e720ea6ea17.png",className:As("icon")});Kv=({channelIds:e})=>{let[t,o]=Je([ss],()=>[e.reduce((n,i)=>n+ss.getUnreadCount(i),0),e.reduce((n,i)=>n+ss.getMentionCount(i),0)]);return t>0?r("div",{"data-has-mention":!!o,className:me(As("notification-badge"),MSe.numberBadge,MSe.baseShapeRound),style:{width:"16px"},ref:n=>n?.style.setProperty("background-color",o?"var(--red-400)":"var(--brand-500)","important")},o||t):null},BSe=({number:e,position:t,isSelected:o,isCompact:n,isHovered:i})=>o||n&&!i?null:r("div",{className:As("tab-number-badge",`position-${t}`),"data-position":t},e);_Se=e=>{let t=ct.getGuild(e.guildId),o=ne.getChannel(e.channelId);return r("div",{className:me(As("preview-tab"),e.compact?As("preview-tab-compact"):null)},r(PSe,{...e,guild:t,channel:o}))}});function RSe({height:e=16,width:t=16}){return r("svg",{viewBox:"0 0 24 24",height:e,width:t,fill:"none"},r("path",{fill:"currentColor",d:"M3 3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V3zm2 1v16h10V4H5zm13-1h2a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1h-2V3zm0 2v12h1V5h-1z"}))}function Vrt({fill:e}){return r("path",{fill:e,d:"M20 7H12L10.553 5.106C10.214 4.428 9.521 4 8.764 4H3C2.447 4 2 4.447 2 5V19C2 20.104 2.895 21 4 21H20C21.104 21 22 20.104 22 19V9C22 7.896 21.104 7 20 7Z"})}function LSe({bookmark:e}){if(Gr(e))return r("svg",{height:16,width:16,viewBox:"0 0 24 24"},r(Vrt,{fill:e.iconColor}));let{channelId:t}=e;if(t?.startsWith("__")){let s={__quests__:h4,"__message-requests__":y4,__friends__:zv,__shop__:x4,__library__:()=>r(RSe,{height:16,width:16}),__discovery__:b4,__nitro__:v4}[t];if(s)return t==="__library__"?r(RSe,{height:16,width:16}):r(s,{height:16,width:16})}let o=ne.getChannel(e.channelId),n=ct.getGuild(e.guildId);return n?n.icon?r("img",{src:`https://${window.GLOBAL_ENV.CDN_HOST}/icons/${n?.id}/${n?.icon}.png`,className:Cs("bookmark-icon")}):r("div",{className:Cs("bookmark-icon")},r(Y,{size:"xxs",weight:"semibold",tag:"span"},Ba(n))):o?.recipients?.length?o.recipients.length===1?r(Bl,{size:"SIZE_16",src:z.getUser(o.recipients[0]).getAvatarURL(void 0,128)}):r("img",{src:o.icon?`https://${window.GLOBAL_ENV.CDN_HOST}/channel-icons/${o?.id}/${o?.icon}.png`:"/assets/c6851bd0b03f1cca5a8c1e720ea6ea17.png",className:Cs("bookmark-icon")}):r(S4,{height:16,width:16})}function eit({bookmark:e,folderIndex:t,bookmarkIndex:o,methods:n,isCurrentChannel:i}){let{bookmarkNotificationDot:s}=dt.use(["bookmarkNotificationDot"]),a=kt(null),[,l]=y0(()=>({type:"vc_Bookmark",item:()=>({index:o,folderIndex:t,bookmark:e,isFromFolder:!0}),collect:c=>({isDragging:!!c.isDragging()})}),[e,t,o]);return l(a),r("div",{ref:a,className:me(Cs("bookmark","folder-item","hoverable"),i&&Cs("bookmark-active")),onClick:()=>f7(e),onContextMenu:c=>{c.stopPropagation(),Dt.openContextMenu(c,()=>r(M.Menu,{navId:"folder-item-context",onClose:()=>V.dispatch({type:"CONTEXT_MENU_CLOSE"})},r(M.MenuItem,{key:"edit-bookmark",id:"edit-bookmark",label:"Edit Bookmark",action:()=>{let u=Ee(p=>r(MY,{modalProps:p,modalKey:u,bookmark:e,onSave:m=>{let y=[...n.bookmarks[t].bookmarks];y[o].name=m,n.editBookmark(t,{bookmarks:y}),vo(u)}}))}}),r(M.MenuItem,{key:"delete-bookmark",id:"delete-bookmark",label:"Delete Bookmark",action:()=>n.deleteBookmark(o,t)}),r(M.MenuItem,{key:"remove-from-folder",id:"remove-from-folder",label:"Remove from Folder",action:()=>{n.addBookmark(e),n.deleteBookmark(o,t)}}),s&&ss.hasUnread(e.channelId)&&r(M.MenuItem,{key:"mark-as-read",id:"mark-as-read",label:St("MARK_AS_READ"),action:()=>v0.ackChannel(ne.getChannel(e.channelId))})))}},r("svg",{width:"12",height:"12",viewBox:"0 0 24 24",style:{marginRight:"0.25rem"}},r("path",{fill:"currentColor",d:"M10 17l5-5-5-5z"})),r(LSe,{bookmark:e}),r(Y,{size:"sm",className:Cs("name-text")},e.name),s&&r(Kv,{channelIds:[e.channelId]}))}function OSe(e){let{bookmarks:t,index:o,methods:n,isExpanded:i,onToggleFolder:s,isCurrentChannel:a}=e,l=t[o],{bookmarkNotificationDot:c}=dt.use(["bookmarkNotificationDot"]),u=kt(null),[,p]=y0(()=>({type:"vc_Bookmark",canDrag:()=>!Gr(l),item:()=>{let b=t.findIndex(v=>Gr(v)?Gr(l)&&v.bookmarks===l.bookmarks:!Gr(l)&&v.channelId===l.channelId&&v.guildId===l.guildId);return{index:b!==-1?b:o,folderIndex:void 0,bookmark:l,isFromFolder:!1}},collect:b=>({isDragging:!!b.isDragging()})}),[t,l,o]),[,m]=Rm(()=>({accept:"vc_Bookmark",hover:(b,v)=>{if(!u.current)return;let E=b.index,A=o;if(E===A)return;let C=u.current?.getBoundingClientRect(),I=(C.right-C.left)/2,_=v.getClientOffset().x-C.left;E<A&&_<I||E>A&&_>I||(n.moveDraggedBookmarks(E,A),b.index=A)}}),[]),[{isOver:g},y]=Rm(()=>({accept:["vc_ChannelTab","vc_Bookmark"],canDrop:()=>Gr(l),drop:(b,v)=>{if(!Gr(l))return;let E=v.getItemType();if(E==="vc_ChannelTab"&&n.addBookmark({guildId:b.guildId,channelId:b.channelId},o),E==="vc_Bookmark"){let A=b.bookmark||t[b.index];if(Gr(A)||b.isFromFolder&&b.folderIndex===o)return;b.isFromFolder?n.deleteBookmark(b.index,b.folderIndex):n.deleteBookmark(b.index),n.addBookmark(A,o)}},collect:b=>({isOver:b.isOver({shallow:!0})&&b.canDrop()})}),[t,o,n]);return Gr(l)?p(y(m(u))):p(m(u)),r("div",{className:me(Cs("bookmark","hoverable",{wider:dt.store.widerTabsAndBookmarks}),g&&Cs("folder-drop-target"),i&&Cs("folder-expanded"),a&&Cs("bookmark-active")),ref:u,onClick:b=>{Gr(l)?s?.():f7(l)},onContextMenu:b=>Dt.openContextMenu(b,()=>r(ISe,{...e}))},r(LSe,{bookmark:l}),Gr(l)&&r("svg",{width:"12",height:"12",viewBox:"0 0 24 24",style:{marginLeft:"0.25rem"}},r("path",{fill:"currentColor",d:i?"M7 10l5 5 5-5z":"M10 17l5-5-5-5z"})),r(Y,{size:"sm",className:Cs("name-text")},l.name),c&&r(Kv,{channelIds:Gr(l)?l.bookmarks.map(b=>b.channelId):[l.channelId]}))}function _Y({children:e,className:t,customRef:o}){let n=kt(null);se(()=>{let s=n.current;if(!s)return;let a=l=>{l.preventDefault(),s.scrollLeft+=l.deltaX+l.deltaY};return s.addEventListener("wheel",a),()=>s.removeEventListener("wheel",a)},[]);let i=s=>{n.current=s,o&&o(s)};return r("div",{className:me(Cs("scroller"),t),ref:i},e)}function RY(e){let{guildId:t,channelId:o,userId:n}=e,[i,s]=XK(n),[a,l]=L(new Set),{bookmarksIndependentFromTabs:c}=dt.use(["bookmarksIndependentFromTabs"]),u=st.getChannelId(),p=hn.getGuildId()||"@me",m=Mn.find(C=>jd(C.id)),g=m&&m.channelId===u&&(m.guildId||"@me")===p,y=C=>{l(I=>{let N=new Set(I);return N.has(C)?N.delete(C):N.add(C),N})},b=!1,v=-1;i?.forEach((C,I)=>{Gr(C)?C.bookmarks.some(N=>N.channelId===o)&&(b=!0,v=I):C.channelId===o&&(b=!0)});let[{isOver:E},A]=Rm(()=>({accept:["vc_ChannelTab","vc_Bookmark"],drop:(C,I)=>{if(!i||I.didDrop())return;let N=I.getItemType();if(N==="vc_ChannelTab")s.addBookmark({guildId:C.guildId,channelId:C.channelId});else if(N==="vc_Bookmark"&&C.isFromFolder&&C.folderIndex!==void 0){let _=i[C.folderIndex];if(Gr(_)){let O=C.bookmark||_.bookmarks[C.index];s.deleteBookmark(C.index,C.folderIndex),s.addBookmark(O)}}},collect:C=>({isOver:C.isOver({shallow:!0})})}),[i,s]);return r("div",{className:Cs("bookmark-container")},r(_Y,{className:me(Cs("bookmarks"),E&&Cs("bookmarks-drop-target")),customRef:A},!i&&r(Y,{className:Cs("bookmark-placeholder-text"),size:"xs"},"Loading bookmarks..."),i&&!i.length&&r(Y,{className:Cs("bookmark-placeholder-text"),size:"xs"},"You have no bookmarks. You can add an open tab or hide this by right clicking it"),Array.isArray(i)&&i.length>0&&i.flatMap((C,I)=>{let N=[r(OSe,{key:I,index:I,bookmarks:i,methods:s,isExpanded:a.has(I),onToggleFolder:()=>y(I),isCurrentChannel:c&&!g&&!Gr(C)&&C.channelId===u&&(C.guildId||"@me")===p})];return Gr(C)&&a.has(I)&&C.bookmarks.forEach((_,O)=>{N.push(r(eit,{key:`${I}-${O}`,bookmark:_,folderIndex:I,bookmarkIndex:O,methods:s,isCurrentChannel:c&&!g&&_.channelId===u&&(_.guildId||"@me")===p}))}),N})),r(Ue,{text:b?"Remove from Bookmarks":"Add to Bookmarks",position:"left"},C=>r("button",{className:Cs("button"),...C,onClick:()=>{b?v===-1?s.deleteBookmark(i.findIndex(I=>!Gr(I)&&I.channelId===o)):s.deleteBookmark(i[v].bookmarks.findIndex(I=>I.channelId===o),v):s.addBookmark({guildId:t,channelId:o})}},r(Jrt,{height:20,width:20,colorClass:Cs(b?"bookmark-star-checked":"bookmark-star")}))))}var Cs,Jrt,FSe=x(()=>{"use strict";d();Et();kg();l7();nt();mt();xt();at();fe();B();PY();B7();Cs=de("vc-channeltabs-"),Jrt=De(".73-2.25h6.12l1.9-5.83Z")});function LY(e){let[t,o]=L(""),[n,i]=L(!1),{showBookmarkBar:s,widerTabsAndBookmarks:a,tabWidthScale:l,enableNumberKeySwitching:c,numberKeySwitchCount:u,enableCloseTabShortcut:p,enableNewTabShortcut:m,enableTabCycleShortcut:g,closeTabKeybind:y,newTabKeybind:b,cycleTabForwardKeybind:v,cycleTabBackwardKeybind:E,tabBarPosition:A,animationHover:C,animationSelection:I,animationDragDrop:N,animationEnterExit:_,animationIconPop:O,animationCloseRotation:F,animationPlusPulse:J,animationMentionGlow:G,animationCompactExpand:te,animationSelectedBorder:K,animationSelectedBackground:oe,animationTabShadows:le,animationTabPositioning:he,animationResizeHandle:Ae,animationQuestsActive:Ce,compactAutoExpandSelected:ye,compactAutoExpandOnHover:ce,newTabButtonBehavior:pe}=dt.use(["showBookmarkBar","widerTabsAndBookmarks","tabWidthScale","enableNumberKeySwitching","numberKeySwitchCount","enableCloseTabShortcut","enableNewTabShortcut","enableTabCycleShortcut","closeTabKeybind","newTabKeybind","cycleTabForwardKeybind","cycleTabBackwardKeybind","tabBarPosition","animationHover","animationSelection","animationDragDrop","animationEnterExit","animationIconPop","animationCloseRotation","animationPlusPulse","animationMentionGlow","animationCompactExpand","animationSelectedBorder","animationSelectedBackground","animationTabShadows","animationTabPositioning","animationResizeHandle","animationQuestsActive","compactAutoExpandSelected","compactAutoExpandOnHover","newTabButtonBehavior"]),xe=fY(),Ze=Je([USe],()=>USe.isFullscreenInContext()??!1),ge=Vo(),ae=gn((Xe=!0)=>{ge(),Xe&&p7(t)},[t]),Ne=kt(null),Fe=kt(null);return se(()=>{dY(ae);let Xe=()=>{let{id:It}=z.getCurrentUser();It===t&&Mn.length||(o(It),cY({...e,userId:It},o))};return V.subscribe("CONNECTION_OPEN_SUPPLEMENTAL",Xe),()=>{V.unsubscribe("CONNECTION_OPEN_SUPPLEMENTAL",Xe)}},[]),se(()=>{if(Ne.current)try{Yv.containerHeight=Ne.current.clientHeight}catch{}},[t,s,A]),se(()=>{ge()},[a]),se(()=>{let Xe=Fe.current;if(!Xe)return;let It=()=>{if(!pe){i(!0);return}let _t=Xe.scrollWidth>Xe.clientWidth;i(_t)};It();let Ve=new ResizeObserver(It);return Ve.observe(Xe),()=>Ve.disconnect()},[Mn.length,pe]),se(()=>{let Xe=(Ve,_t)=>{let Wt=_t.split("+"),po=Wt.includes("CTRL"),no=Wt.includes("SHIFT"),mo=Wt.includes("ALT"),Sn=Wt[Wt.length-1].toLowerCase(),Br=Ve.ctrlKey||Ve.metaKey,be=Ve.shiftKey,Qe=Ve.altKey,lt=Ve.key.toLowerCase();return Sn==="tab"?po===Br&&no===be&&mo===Qe&&lt==="tab":Sn==="space"?po===Br&&no===be&&mo===Qe&&lt===" ":po===Br&&no===be&&mo===Qe&&lt===Sn},It=Ve=>{let _t=Ve.target;if(!(_t.tagName==="INPUT"||_t.tagName==="TEXTAREA"||_t.isContentEditable)){if(c){let Wt=parseInt(Ve.key,10);if(!isNaN(Wt)&&Wt>=1&&Wt<=u){let po=Wt-1;if(Mn[po]){Ve.preventDefault(),Es(Mn[po].id);return}}}if(p&&Xe(Ve,y)){Ve.preventDefault();let Wt=Mn.find(po=>jd(po.id));Wt&&Mn.length>1&&Ag(Wt.id);return}if(m&&Xe(Ve,b)){Ve.preventDefault(),Ve.stopPropagation(),ka(e,!0);return}if(g&&Xe(Ve,v)){Ve.preventDefault(),Ve.stopPropagation();let Wt=Mn.findIndex(po=>jd(po.id));if(Wt!==-1&&Mn.length>1){let po=(Wt+1)%Mn.length;Es(Mn[po].id)}return}if(g&&Xe(Ve,E)){Ve.preventDefault(),Ve.stopPropagation();let Wt=Mn.findIndex(po=>jd(po.id));if(Wt!==-1&&Mn.length>1){let po=(Wt-1+Mn.length)%Mn.length;Es(Mn[po].id)}return}}};return document.addEventListener("keydown",It,!0),()=>{document.removeEventListener("keydown",It,!0)}},[c,u,p,y,m,b,g,v,E,e,Mn]),se(()=>{if(t){let Xe=e.guildId||"@me";tY(Xe,e.channelId,"bookmark")||by(e),p7(t),oY()}},[t,e.channelId,e.guildId]),!t||Ze?null:r("div",{className:me(ki("container"),A==="top"&&ki("container-top"),!C&&ki("no-hover-animation"),!I&&ki("no-selection-animation"),!N&&ki("no-drag-animation"),!_&&ki("no-enter-exit-animation"),!O&&ki("no-icon-pop-animation"),!F&&ki("no-close-rotation"),!J&&ki("no-plus-animation"),!G&&ki("no-mention-glow"),!te&&ki("no-compact-animation"),!K&&ki("no-selected-border"),!oe&&ki("no-selected-background"),!le&&ki("no-tab-shadows"),!he&&ki("no-tab-positioning"),!Ae&&ki("no-resize-handle-animation"),!Ce&&ki("no-quests-active-animation"),!ye&&ki("no-compact-auto-expand"),!ce&&ki("no-compact-hover-expand")),ref:Ne,style:{"--tab-width-scale":l/100},onContextMenu:Xe=>Dt.openContextMenu(Xe,()=>r(TSe,null))},s&&r(f,null,r(RY,{...e,userId:t}),r("div",{className:ki("separator")})),r("div",{className:ki("tab-container")},r(_Y,{customRef:Xe=>{Fe.current=Xe},className:ki("tab-scroller",pe&&!n&&"tab-scroller-following")},Mn.filter(Xe=>Xe!=null).map((Xe,It)=>r(BY,{...Xe,index:It,key:Xe.id})),xe),r("button",{onClick:()=>ka(e,!0),className:ki("button","new-button","hoverable")},r(tit,null))))}function J2e(e){let t=z.getCurrentUser()?.id;if(!t)return r(W,null,"there's no logged in account?????");let{setValue:o}=e,{tabSet:n}=dt.use(["tabSet"]),i=[{guildId:"@me",channelId:void 0}],[s,a]=L(n?.[t]??i);return r(f,null,r(re,null,"Startup tabs"),r(Be,{flexDirection:"row",style:{gap:"2px"}},s.map(l=>r(f,null,r(_Se,{...l})))),r(Be,{flexDirection:"row-reverse"},r(U,{onClick:()=>{a([...Mn]),o({...n,[t]:[...Mn]})}},"Set to currently open tabs")))}var tit,USe,ki,ZK=x(()=>{"use strict";d();eo();ut();wt();kg();nt();xt();qo();fe();B();OY();FSe();PY();B7();tit=De("0v-5h5a1"),USe=Ft("ChannelRTCStore"),ki=de("vc-channeltabs-")});var P7,Yv,OY=x(()=>{"use strict";d();Q2e();Un();tt();H();$();B();ZK();kg();kg();P7=(e,t)=>{let{channel:o,messageId:n}=t,i=r(M.MenuItem,{label:"Open in New Tab",id:"open-link-in-tab",action:()=>ka({guildId:o.guild_id||"@me",channelId:o.id},dt.store.openInNewTabAutoSwitch,n,!0,!0)}),s=Qt("channel-copy-link",e);s?s.push(i):e.splice(-1,0,r(M.MenuGroup,null,i))},Yv=k({name:"ChannelTabs",description:"Group your commonly visited channels in tabs, like a browser",authors:[w.TheSun,w.TheKodeToad,j.keifufu,w.Nickyux,j.DiabeloDEV,j.justjxke],dependencies:["ContextMenuAPI"],contextMenus:{"channel-mention-context":P7,"channel-context":P7,"user-context":P7,"gdm-context":P7},patches:[{find:'"AppView"',replacement:[{match:/((\i\?.params)\?\.channelId.{0,600})"div",{(?=className:\i\.\i)/,replace:"$1$self.render,{currentChannel:$2,",predicate:()=>dt.store.tabBarPosition==="top"},{match:/((\i\?.params)\?.channelId.{0,300})"div",{/,replace:"$1$self.render,{currentChannel:$2,",predicate:()=>dt.store.tabBarPosition==="bottom"}]},{find:"`transitionToGuild - Transitioning to",replacement:{match:/(\i\((\i),(\i),\i,\i\)\{)(.{0,25}`transitionToGuild)/,replace:"$1$self.handleNavigation($2,$3);$4"}},{find:'[data-recents-channel="',replacement:{match:/(?<=className:\i.\i,onJump:)\i=>(\i)\(\i,(\i)\.id\)/,replace:"event => { if (event.ctrlKey) $self.open($2); else $1(event, $2.id) }"}},{find:".deleteRecentMention(",replacement:{match:/(?<=className:\i.\i,onJump:)(\i)(?=.{0,20}message:(\i))/,replace:"event => { if (event.ctrlKey) $self.open($2); else $1(event) }"}},{find:"__invalid_searchResultFocusRing",replacement:{match:/(\i)\.stopPropagation.{0,50}(?=null!=(\i))/,replace:"$&if ($1.ctrlKey) return $self.open($2);"}},{find:"#{intl::JUMP}),onClick:",replacement:{match:/\i&&\((\i).maxHeight.{0,5}\)/,replace:"$&;$1.maxHeight-=$self.containerHeight"}}],settings:dt,start(){let e=dt.store;if(e.enableHotkeys!==void 0){let t=e.enableHotkeys;dt.store.enableNumberKeySwitching=t,dt.store.enableCloseTabShortcut=t,dt.store.enableNewTabShortcut=t,dt.store.enableTabCycleShortcut=t,delete e.enableHotkeys}e.hotkeyCount!==void 0&&(dt.store.numberKeySwitchCount=e.hotkeyCount,delete e.hotkeyCount)},containerHeight:0,flux:{CHANNEL_SELECT(e){if(u7()){eY();return}let t=A4(),{channelId:o}=e,{guildId:n}=e;if(!o){let i=window.location.pathname;if(i==="/quest-home"||i.includes("quest-home"))o="__quests__",n="@me";else if(i.includes("/message-requests"))o="__message-requests__",n="@me";else if(i==="/channels/@me")o="__friends__",n="@me";else if(i==="/channels/@me/activity")o="__activity__",n="@me";else if(i.includes("/shop"))o="__shop__",n="@me";else if(i.includes("/library"))o="__library__",n="@me";else if(i.includes("/discovery"))o="__discovery__",n="@me";else if(i.includes("/store"))o="__nitro__",n="@me";else if(i.includes("/icymi"))o="__icymi__",n="@me";else return}t||(d7(),o&&n&&by({guildId:n,channelId:o}))}},render({currentChannel:e,children:t}){let o=r(ee,null,r(LY,{...e}));return dt.store.tabBarPosition==="top"?r(f,null,o,t):r(f,null,t,o)},open(e){let t={channelId:e.channel_id,guildId:ne.getChannel(e.channel_id)?.guild_id,compact:!1};ka(t,!1,e.id)},handleNavigation(e,t){u7()||A4()||(d7(),requestAnimationFrame(()=>{by({guildId:e,channelId:t})}))},util:gY})});var $Se=x(()=>{});var HSe,_7,zSe=x(()=>{"use strict";d();$Se();Q();H();$();B();HSe=R({colorEffects:{type:3,description:"Turn on or off color effects for getting close to the character limit",default:!0}}),_7=k({name:"CharacterCounter",description:"Adds a character counter to the chat input",authors:[j.creations,j.Panniku,w.thororen],settings:HSe,patches:[{find:".CREATE_FORUM_POST||",replacement:{match:/(textValue:.{0,50}channelId:\i\.id\}\)),\i/,replace:"$1,$self.getCharCounter(arguments[0].textValue)"}},{find:"#{intl::PREMIUM_MESSAGE_LENGTH_UPSELL_TOOLTIP}",replacement:{match:/return \i\?\i\(\):\i\(\)/,replace:"return null"}}],getCharCounter(e){let o=(z.getCurrentUser().premiumType??0)===2?4e3:2e3,{length:n}=e,i="var(--primary-330)";if(HSe.store.colorEffects){let s=n/o*100;s<50?i="var(--text-muted)":s<75?i="var(--yellow-330)":s<90?i="var(--orange-330)":i="var(--red-360)"}return r("div",{className:"vc-char-counter",style:{color:i}},r("span",{className:"vc-char-count"},n),"/",r("span",{className:"vc-char-max"},o))}})});var R7,GSe=x(()=>{"use strict";d();H();$();R7=k({name:"CleanChannelName",authors:[w.AutumnVN],description:"remove all emoji and decor shit from channel names",patches:[{find:"loadAllGuildAndPrivateChannelsFromDisk(){",replacement:{match:/(?<=getChannel\(\i\)\{if\(null!=\i\)return )\i\(\i\)/,replace:"$self.cleanChannelName($&)"}}],cleanChannelName(e){return e&&(e.name=e.name.normalize("NFKC").replace(/[x]/g,t=>({"\u1D00":"a",\u0299:"b","\u1D04":"c","\u1D05":"d","\u1D07":"e","\uA730":"f",\u0262:"g",\u029C:"h",\u026A:"i","\u1D0A":"j","\u1D0B":"k",\u029F:"l","\u1D0D":"m",\u0274:"n","\u1D0F":"o","\u1D18":"p",\u01EB:"q",\u0280:"r","\uA731":"s","\u1D1B":"t","\u1D1C":"u","\u1D20":"v","\u1D21":"w",x:"x",\u028F:"y","\u1D22":"z"})[t]).replace(/[^\u0020-\u007E]?\p{Extended_Pictographic}[^\u0020-\u007E]?/ug,"").replace(/-?[^\p{Letter}\u0020-\u007E]-?/ug,[2,4].includes(e.type)?" ":"-").replace(/(^-|-$)/g,"").replace(/-+/g,"-")),e}})});var L7,qSe=x(()=>{"use strict";d();H();$();L7=k({name:"CleanerChannelGroups",description:"Hides all channels in collapsed categories, even if they have unread messages.",authors:[j.justjxke],patches:[{find:'"placeholder-channel-id"',replacement:[{match:/this\.category\.isCollapsed&&\(.{0,600}?\)\?\{renderLevel:3,threadIds:/,replace:"this.category.isCollapsed?{renderLevel:3,threadIds:"},{match:/(?<=!this.category.isCollapsed.{0,50}\i=)(\i\(this\.record,.{0,5},\i\.hideMutedChannels\);)/,replace:"this.category.isCollapsed?[]:$1"}]}]})});function jSe(e,t){let o=t?e:ne.getChannel(e)?.guild_id,n=Vp.store.guildBlackList?.split(",").map(s=>s.trim()).filter(Boolean)??[],i=Vp.store.guildWhiteList?.split(",").map(s=>s.trim()).filter(Boolean)??[];return!!(n.includes(o)||i.length&&!i.includes(o))}function wy(e,t){return t&&jSe(t,!1)||Tt.isBlocked(e)&&Vp.store.hideBlockedUsers?!0:Vp.store.usersToBlock.length===0?!1:Vp.store.usersToBlock.split(", ").includes(e)}function oit(e,t){if(!tr.getRole(t,e))return!1;let n=Lt.getMembers(t).filter(i=>i.roles.includes(e));return n.length?jSe(t,!0)?!0:n.every(i=>wy(i.userId)&&!(z.getUser(i.userId).desktop||z.getUser(i.userId).mobile)):!1}function nit(){switch(Vp.store.blockedReplyDisplay){case"displayText":return r(W,{style:{marginTop:"0px",marginBottom:"0px"}},r("i",null,"\u2193 Replying to blocked message"));case"hideReply":return null}}function rit(e){return Array.isArray(e)?e.filter(t=>{if(!t?.key)return!1;let o=t.key.match(/(?:user-|party-spotify:)(.+)/)?.[1];if(o)return!wy(o);if(t.key.startsWith("channel-")&&Vp.store.hideVc){let{party:n}=t.props;if(!n)return!0;let{applicationStreams:i,partiedMembers:s,priorityMembers:a,voiceChannels:l}=n;return l?.forEach(u=>u.members=u.members?.filter(p=>!wy(p.id))??[]),n.applicationStreams=(i??[]).filter(u=>!wy(u.streamUser.id)),n.priorityMembers=a?.filter(u=>!wy(u.user.id))??[],n.partiedMembers=s?.filter(u=>!wy(u.id))??[],(l?.some(u=>u.members?.length)??!1)||(n.partiedMembers?.length??0)||(n.priorityMembers?.length??0)||(n.applicationStreams?.length??0)}return!0}):e}var Vp,O7,WSe=x(()=>{"use strict";d();Q();wt();H();$();B();Vp=R({hideVc:{type:3,description:"Hide voice channels containing blocked users.",default:!1,restartNeeded:!0},usersToBlock:{type:0,description:"User IDs seperated by a comma and a space",restartNeeded:!0,default:""},hideBlockedUsers:{type:3,description:"Should blocked users should also be hidden everywhere",default:!0,restartNeeded:!0},hideBlockedMessages:{type:3,description:"Should messages from blocked users should be hidden fully (same as the old noblockedmessages plugin)",default:!0,restartNeeded:!0},hideEmptyRoles:{type:3,description:"Should role headers be hidden if all of their members are blocked",restartNeeded:!0,default:!0},blockedReplyDisplay:{type:4,description:"What should display instead of the message when someone replies to someone you have hidden",restartNeeded:!0,options:[{value:"displayText",label:"Display text saying a hidden message was replied to",default:!0},{value:"hideReply",label:"Literally nothing"}]},guildBlackList:{type:0,description:"Guild ids to disable functionality in",restartNeeded:!0,default:""},guildWhiteList:{type:0,description:"Guild ids to enable functionality in",restartNeeded:!0,default:""}});O7=k({name:"ClientSideBlock",description:"Allows you to locally hide almost all content from any user",tags:["blocked","block","hide","hidden","noblockedmessages"],authors:[w.Samwich,j.KamiRu],settings:Vp,activeNowView:rit,shouldHideUser:wy,hiddenReplyComponent:nit,isRoleAllBlockedMembers:oit,patches:[{find:".NITRO_NOTIFICATION,[",replacement:{match:/renderContentOnly:\i}=\i;/,replace:"$&if($self.shouldHideUser(arguments[0].message.author.id, arguments[0].message.channel_id)) return null; "}},{find:"peopleListItemRef.current.componentWillLeave",replacement:{match:/\i}=this.state;/,replace:"$&if($self.shouldHideUser(this.props.user.id)) return null; "}},{find:"._areActivitiesExperimentallyHidden=(",replacement:{match:/(?<=user:(\i),guildId:\i,channel:(\i).*?)BOOST_GEM_ICON.{0,10}\);/,replace:"$&if($self.shouldHideUser($1.id, $2.id)) return null; "}},{find:"._areActivitiesExperimentallyHidden=(",replacement:{match:/\i.memo\(function\(\i\){/,replace:"$&if($self.isRoleAllBlockedMembers(arguments[0].id, arguments[0].guildId)) return null;"},predicate:()=>Vp.store.hideEmptyRoles},{find:"#{intl::BLOCKED_MESSAGE_COUNT}}",replacement:{match:/1:\i\.content.length;/,replace:"$&return null;"},predicate:()=>Vp.store.hideBlockedMessages},{find:".GUILD_APPLICATION_PREMIUM_SUBSCRIPTION||",replacement:[{match:/(?=let \i,\{repliedAuthor:)/,replace:"if(arguments[0]?.referencedMessage?.message && $self.shouldHideUser(arguments[0].referencedMessage.message.author.id, arguments[0].baseMessage.messageReference.channel_id)) { return $self.hiddenReplyComponent(); }"}]},{find:"PrivateChannel.renderAvatar",replacement:{match:/(return \i\.isMultiUserDM\(\))(?<=function\(\i,(\i),\i\){.*)/,replace:"if($2.rawRecipients[0] && $2.rawRecipients[0]?.id){if($self.shouldHideUser($2.rawRecipients[0].id)) return null;}$1"}},{find:"getFriendIDs(){",replacement:{match:/\?\?\[\]\)\),\i\.friends/,replace:"$&.filter(id => !$self.shouldHideUser(id))"}},{find:"ACTIVE_NOW_COLUMN)",replacement:{match:/(\i\.\i),\{(?=\}\)\])/,replace:'"div",{children:$self.activeNowView($1())'}},{find:"}getMutualFriends(",replacement:{match:/(getMutualFriends\(\i\){)return (\i\.get\(\i\))/,replace:"$1if($2) return $2.filter(u => !$self.shouldHideUser(u.key))"}}]})});function Bg(e){return e.trim().toLowerCase()}function awe(e){if(!Array.isArray(e)||e.length===0)return e;let t=!1,o=e.map((n,i)=>{if(!X.isValidElement(n))return n;let s=n;if(s.type===QSe)return n;let a=typeof s.key=="string"&&s.key.length>0?s.key:void 0,l=a??`chatbar-${i}`;return t=!0,r(QSe,{key:a,...{element:s,buttonKey:l,key:a??l}})});return t?o:e}function lit(e){return e.hasAttribute("aria-label")?e:e.querySelector("[aria-label]")??null}function cit(e,t,o,n){let i=uwe(e,t),{commandId:s}=i;n.dataset[KSe]=s,n.setAttribute(B4,s);let a=()=>{if(n.isConnected)return n;let l=o.querySelector(`[${B4}="${s}"]`);return l||document.querySelector(`[${B4}="${s}"]`)};return i.getters.add(a),()=>{i.getters.delete(a),i.getters.size===0&&(oQ(i.commandId),H7.delete(e),QY.delete(i.commandId)),n.removeAttribute(B4),delete n.dataset[KSe]}}function ZSe(e,t,o){let n=e?.getAttribute("aria-label")?.trim();if(n)return n;let i=lwe(t);return i||o}function lwe(e){if(!e)return null;let t=e.props??{},o=typeof t.tooltip=="string"?t.tooltip.trim():"";if(o)return o;let n=typeof t.ariaLabel=="string"?t.ariaLabel.trim():"";if(n)return n;let i=t.children;return cwe(i)}function cwe(e){if(e==null||typeof e=="boolean")return null;if(typeof e=="string")return e.trim()||null;if(typeof e=="number")return e.toString();if(Array.isArray(e)){for(let t of e){let o=cwe(t);if(o)return o}return null}return X.isValidElement(e)?lwe(e):null}function uwe(e,t){let o=t.trim()||e,n=H7.get(e);if(n)return n.label!==o&&(n.label=o,fi(XSe(n))),n;let i=uit(o,e),s={commandId:i,label:o,getters:new Set};return H7.set(e,s),QY.set(i,s),fi(XSe(s)),s}function uit(e,t){let o=YY(e)||YY(t)||"chat-button",n=`chatbar-${o}`,i=2;for(;rc.has(n)||QY.has(n);)n=`chatbar-${o}-${i++}`;return n}function XSe(e){let t=Array.from(new Set([...e.label.toLowerCase().split(/\s+/).filter(Boolean),"chat","button"]));return{id:e.commandId,label:e.label,keywords:t,categoryId:U4,tags:[Sl,Xn],handler:()=>dit(e)}}function dit(e){let t=dwe(e);if(!t){io(`Unable to find the "${e.label}" chat button.`,D.Type.FAILURE);return}try{t.click()}catch(o){console.error("CommandPalette","Failed to click chat bar button",e.label,o),io(`Failed to trigger ${e.label}.`,D.Type.FAILURE);return}io(`${e.label} activated.`,D.Type.SUCCESS)}function dwe(e){for(let t of Array.from(e.getters))try{let o=t();if(o&&o.isConnected)return o}catch(o){console.error("CommandPalette","Failed to resolve chat bar button",o)}return document.querySelector(`[${B4}="${e.commandId}"]`)}function pit(e,t){if(!e)return;let o=Vv.get(e);if(o){o.count+=1;return}Vv.set(e,{label:t,count:1})}function mit(e){let t=Vv.get(e);t&&(t.count-=1,t.count<=0&&Vv.delete(e))}function pwe(e){if(typeof e=="string")return e;if(!e||typeof e!="object")return null;let t=e;return typeof t.id=="string"?t.id:typeof t.channelId=="string"?t.channelId:typeof t.channel_id=="string"?t.channel_id:t.channel?pwe(t.channel):null}function Xv(e){if(!e)return null;if(typeof e=="string"){let i=e;return z?.getUser?.(i)?i:null}if(Array.isArray(e)){for(let i of e){let s=Xv(i);if(s)return s}return null}if(typeof e!="object")return null;let t=e,o=["userId","user_id","recipientId","recipient_id"];for(let i of o){let s=t[i];if(typeof s=="string"&&z?.getUser?.(s))return s}let n=["recipient_ids","recipients","rawRecipients"];for(let i of n){let s=t[i];if(Array.isArray(s))for(let a of s){let l=Xv(a);if(l)return l}}if(t.user){let i=Xv(t.user);if(i)return i}if(t.channel){let i=Xv(t.channel);if(i)return i}return null}function fit(e){for(let t of e){let o=Xv(t);if(o)return o}return null}function ZY(e){if(!e)return null;if(typeof e=="object"){let o=e;if(o&&typeof o.id=="string"&&("type"in o||"isDM"in o))return o;if(o.channel){let n=ZY(o.channel);if(n)return n}if(typeof o.channel_id=="string"){let n={id:o.channel_id};return o.recipients&&(n.recipients=o.recipients),o.rawRecipients&&(n.rawRecipients=o.rawRecipients),o.type&&(n.type=o.type),n}}let t=pwe(e);return t?ne.getChannel(t)??{id:t}:null}function git(e){if(!e)return;let t=z?.getCurrentUser?.()?.id;try{if(typeof e.getRecipientId=="function"){let o=e.getRecipientId();if(o&&o!==t)return o}}catch{}if(Array.isArray(e.recipients)){for(let o of e.recipients)if(typeof o=="string"&&o!==t)return o}if(Array.isArray(e.rawRecipients))for(let o of e.rawRecipients){let n=typeof o=="string"?o:o&&typeof o=="object"&&typeof o.id=="string"?o.id:void 0;if(n&&n!==t)return n}}function mwe(e){if(!(!e||typeof e.id!="string"))try{let t=typeof e.isDM=="function"?e.isDM():e.type===1,o=typeof e.isGroupDM=="function"?e.isGroupDM():e.type===3;if(!t&&!o)return;Bf={channelId:e.id,recipientId:t?git(e):void 0,isGroupDm:o}}catch{}}function fwe(e,t){if(!e)return;let o=z?.getCurrentUser?.()?.id;if(o&&e===o||Bf?.isGroupDm)return;let n=null,i=ne.getDMFromUserId;if(typeof i=="function")try{n=i(e)??null}catch(s){console.error("CommandPalette","Failed to resolve DM channel",s)}Bf={channelId:t??n??null,recipientId:e,isGroupDm:!1}}function hit(){if($Y)return;let e=xc;if(!e)return;let t=["closePrivateChannel","closeChannel","deletePrivateChannel","closeDM"],o=[];for(let n of t){let i=e[n];if(typeof i!="function")continue;let s=function(...l){try{let c=ZY(l[0]);mwe(c);let u=Bf;if(!u||!u.recipientId){let p=fit(l);if(p){let m=u?.channelId??(typeof c?.id=="string"?c.id:null);fwe(p,m)}}}catch(c){console.error("CommandPalette",`Failed to record closed channel via ${n}`,c)}return i.apply(this,l)};e[n]=s,o.push(()=>{e[n]=i})}o.length&&($Y=!0,e2.push(()=>{for(let n of o)try{n()}catch(i){console.error("CommandPalette","Failed to restore channel close method",i)}$Y=!1}))}function vit(e){let t;do t=`custom-${Math.random().toString(36).slice(2,8)}`;while(e.has(t));return t}function Sit(e){if(!Array.isArray(e))return[];let t=new Set,o=[];for(let n of e){if(!n||typeof n!="object")continue;let i=(()=>{let p=n.action;if(!p||typeof p!="object"||typeof p.type!="string")return null;switch(p.type){case"command":return{type:"command",commandId:String(p.commandId??"")};case"settings":return{type:"settings",route:String(p.route??"")};case"url":return{type:"url",url:String(p.url??""),openExternal:!!p.openExternal};case"macro":return Array.isArray(p.steps)?{type:"macro",steps:p.steps.map(m=>String(m)).filter(Boolean)}:{type:"macro",steps:[]};default:return null}})();if(!i)continue;let s=Array.isArray(n.keywords)?n.keywords.map(p=>String(p).trim()).filter(Boolean):[],a=[];if(Array.isArray(n.tags)){let p=new Set;for(let m of n.tags){let g=String(m??"").trim();if(!g)continue;let y=Bg(g);!y||p.has(y)||(p.add(y),a.push(g))}}let l=typeof n.id=="string"&&n.id.trim().length?n.id.trim():"";(!l||t.has(l))&&(l=vit(t));let c=typeof n.label=="string"?n.label.trim():"",u={id:l,label:c,description:n.description?String(n.description):void 0,keywords:s,tags:a,categoryId:n.categoryId?String(n.categoryId):void 0,danger:!!n.danger,action:i};t.add(l),o.push(u)}return o}function wit(){let e=z4.map(t=>({...t,keywords:t.keywords?[...t.keywords]:void 0,tags:t.tags?[...t.tags]:void 0}));for(let t of qY)t(e)}function xwe(e){z4=Sit(e),wit(),Y7(rwe)}function XY(){return z4.map(e=>({...e,keywords:e.keywords?[...e.keywords]:void 0,tags:e.tags?[...e.tags]:void 0}))}function JY(e){return qY.add(e),e(XY()),()=>{qY.delete(e)}}async function ywe(e){xwe(e);try{await Oe.set(nwe,z4)}catch(t){console.error("CommandPalette","Failed to persist custom commands",t)}}function kit(e){switch(e){case"online":return"Online";case"idle":return"Idle";case"dnd":return"Do Not Disturb";case"invisible":return"Invisible";default:return e}}function VY(e=!0){_4!=null&&(clearTimeout(_4),_4=null,e&&io("Canceled scheduled status reset.",D.Type.MESSAGE)),$7=null}function ewe(e){if(!Zv){io("Unable to change status right now.",D.Type.FAILURE);return}let t=Zv.getSetting?.()??"online";VY(!1),Zv.updateSetting("dnd"),$7=t,_4=window.setTimeout(()=>{let o=$7??"online";Zv.updateSetting(o),io(`Status reverted to ${kit(o)}.`,D.Type.SUCCESS),_4=null,$7=null},e*6e4),io(`Do Not Disturb for ${e} minutes.`,D.Type.SUCCESS)}function bwe(){if(UY)return;UY=!0,hit();let e=t=>{let o=ZY(t);o&&mwe(o);let n=Bf;if(!n||!n.recipientId){let i=Xv(t);if(i){let s=n?.channelId??(typeof o?.id=="string"?o.id:null);fwe(i,s)}}};V.subscribe?.("CHANNEL_CLOSE",e),e2.push(()=>{V.unsubscribe?.("CHANNEL_CLOSE",e),UY=!1,Bf=null})}function vwe(){for(VY(!1);e2.length;){let e=e2.pop();try{e?.()}catch(t){console.error("CommandPalette","Failed to cleanup session callback",t)}}for(;zY.length;){let e=zY.pop();try{e?.()}catch(t){console.error("CommandPalette","Failed to cleanup runtime callback",t)}}for(let e of t2.values()){try{e.unsubscribe?.()}catch(t){console.error("CommandPalette","Failed to unsubscribe context provider",e.provider.id,t)}e.unsubscribe=void 0,e.commandIds.clear()}Bf=null,t2.clear(),Mg.clear(),rc.clear(),P4=null,z7.clear(),G7.clear(),j7.clear(),R4.clear(),Vv.clear(),Df.length=0,WY=!1,L4+=1,Swe(),q7.clear()}function o2(e){return e?xit.get(e)??VSe:VSe}function W7(e){return yit.get(e)??"Other"}function K7(e){return Df.indexOf(e)}function Y7(e){let t=t2.get(e);if(!t)return;let{commandIds:o}=t,n=Array.from(o),i=new Set;if(n.length)for(let l of n){let c=nc.has(l);c&&i.add(l),oQ(l,c?{preservePin:!0}:void 0),o.delete(l)}let s=[];try{s=t.provider.getCommands()??[]}catch(l){console.error("CommandPalette","Failed to compute commands for provider",t.provider.id,l),s=[]}let a=new Set;for(let l of s)fi(l),o.add(l.id),a.add(l.id);if(i.size){let l=!1;for(let c of i)!a.has(c)&&nc.delete(c)&&(l=!0);l&&G4()}}function Eit(e){if(!e.provider.subscribe)return;let t=()=>Y7(e.provider.id),o=e.provider.subscribe(t);e.unsubscribe=o}function eQ(e){if(t2.has(e.id))return;let t={provider:e,commandIds:new Set};t2.set(e.id,t),Eit(t),Y7(e.id)}function tQ(){for(let e of t2.keys())Y7(e)}function oQ(e,t){if(!rc.get(e))return;let n=nc.has(e);rc.delete(e),n&&!t?.preservePin&&(nc.delete(e),G4()),j7.delete(e);let i=R4.get(e);if(i){for(let s of i)mit(s);R4.delete(e)}nQ()}function Q7(e){return rc.get(e)}function Ait(){P4=null,z7.clear(),G7.clear()}function Swe(){for(let e of q7)e(L4)}function nQ(){L4+=1,Ait(),Swe()}function Cit(e){let t=e.keywords??[],o=e.tags??[];return[e.label,e.description??"",e.shortcut??"",...t,...o].filter(Boolean).join(" ").toLowerCase()}function Tit(e){let t=Df.indexOf(e);t!==-1&&Df.splice(t,1),Df.unshift(e),Df.length>YSe&&(Df.length=YSe)}function Iit(){let e=[];for(let t of Df){let o=rc.get(t);o&&e.push(o)}return e}function twe(e){for(let t of Df){if(t===e||iit.has(t))continue;let o=rc.get(t);if(o)return o}}function G4(){let e=new Set(nc);for(let t of GY)t(e)}async function wwe(){try{await Oe.set(hwe,Array.from(nc))}catch(e){console.error("CommandPalette","Failed to save pinned commands",e)}}function Dit(){let e=!1;for(let t of Array.from(nc))rc.has(t)||(nc.delete(t),e=!0);return e}function Ewe(e){let t=e.parentId??null,o={...e,parentId:t},n=Mg.get(e.id);n&&n.label===o.label&&n.description===o.description&&(n.parentId??null)===t||(Mg.set(e.id,o),nQ())}function rQ(){return Array.from(Mg.values()).sort((e,t)=>e.label.localeCompare(t.label))}function Awe(e){let t=e??null;return rQ().filter(o=>(o.parentId??null)===t)}function ky(e){if(!e)return[];let t=[],o=Mg.get(e);for(;o;)t.unshift(o),o=o.parentId?Mg.get(o.parentId):void 0;return t}function fi(e){let t=nc.has(e.id);rc.has(e.id)&&oQ(e.id,t?{preservePin:!0}:void 0);let o=e.categoryId??qs;Mg.has(o)||Ewe({id:o,label:o.split(/[\s-]+/).map(u=>u.charAt(0).toUpperCase()+u.slice(1)).join(" "),parentId:null});let n=new Map,i=u=>{if(!u)return;let p=Bg(u);p&&(n.has(p)||n.set(p,u.trim()))};if(Array.isArray(e.tags))for(let u of e.tags)i(u);let s=bit.get(o);if(s)for(let u of s)i(u);let a=Array.from(n.keys()),l=Array.from(n.values()),c={...e,categoryId:o,hiddenInSearch:e.hiddenInSearch??!1,searchGroup:e.searchGroup,tags:l};rc.set(e.id,c),R4.set(e.id,a);for(let u of a){let p=n.get(u)??u;pit(u,p)}j7.set(e.id,Cit(c)),nQ()}function n2(){return P4||(P4=Array.from(rc.values()).sort((e,t)=>e.label.localeCompare(t.label))),P4}function iQ(e){let t=z7.get(e);if(t)return t;let o=n2().filter(n=>n.categoryId===e);return z7.set(e,o),o}async function sQ(e){if(await Z7,!e)return null;if(rc.has(e)||tQ(),!rc.has(e))return console.warn("CommandPalette","Attempted to pin unavailable command",e),null;let t=!nc.has(e);return t?nc.add(e):nc.delete(e),await wwe(),G4(),t}function Cwe(e){let t=!0,o=n=>{t&&e(new Set(n))};return GY.add(o),Z7.then(()=>o(nc)),()=>{t=!1,GY.delete(o)}}function Pit(e){let t=new Set,o=[e];for(;o.length;){let n=o.shift();if(!t.has(n)){t.add(n);for(let i of Mg.values())(i.parentId??null)===n&&o.push(i.id)}}return t}function X7(e){let t=G7.get(e);if(t)return t;let o=Pit(e),n=n2().filter(i=>i.categoryId&&o.has(i.categoryId));return G7.set(e,n),n}function J7(e){return j7.get(e)??""}function V7(){return L4}function r2(){return Array.from(Vv.entries()).map(([e,t])=>({id:e,label:t.label,count:t.count})).sort((e,t)=>t.count===e.count?e.label.localeCompare(t.label):t.count-e.count)}function Twe(e){return R4.get(e)??[]}function i2(e){let t=!0,o=n=>{t&&e(n)};return q7.add(o),o(L4),()=>{t=!1,q7.delete(o)}}async function eM(e){try{await e.handler(),Tit(e.id)}catch(t){D.show({message:`Command failed: ${e.label}`,type:D.Type.FAILURE,id:D.genId()}),console.error("CommandPalette",t)}}function io(e,t){D.show({message:e,type:t,id:D.genId(),options:{position:D.Position.BOTTOM}})}function aQ(e){let t=[e.name.toLowerCase(),"plugin"];return e.description&&t.push(...e.description.toLowerCase().split(/\s+/)),Array.from(new Set(t.filter(Boolean)))}function _it(e){let t=yt(e.name),o=Array.from(new Set([...aQ(e),"settings","configure","preferences"]));return{id:`toggle-plugin-${e.name.toLowerCase()}`,label:`${t?"Disable":"Enable"} ${e.name}`,description:e.description,keywords:o,categoryId:t?"plugins-disable":"plugins-enable",searchGroup:`plugin-${e.name.toLowerCase()}`,tags:[Sl,Xn],handler:async()=>{let n=yt(e.name),i=await r8(e.name),s=yt(e.name);i&&n!==s?io(`${s?"Enabled":"Disabled"} ${e.name}.`,D.Type.SUCCESS):i||io(`Failed to toggle ${e.name}.`,D.Type.FAILURE),KY(e)}}}function KY(e){fi(_it(e))}function Rit(){for(let e of Object.values(pt))KY(e);if(!F7){let e=(t,o)=>{if(typeof o!="string"||!o.startsWith("plugins.")||!o.endsWith(".enabled"))return;let n=o.slice(8,-8),i=pt[n];i&&KY(i)};Tn.addGlobalChangeListener(e),F7=()=>{Tn.removeGlobalChangeListener(e)},zY.push(()=>{F7?.(),F7=null})}}function Lit(){for(let e of Object.values(pt)){let t=aQ(e);fi({id:`settings-plugin-${e.name.toLowerCase()}`,label:`${e.name} Settings`,description:e.description,keywords:t,categoryId:"plugins-settings",handler:()=>Rs(e),tags:[Sl,Uc],searchGroup:`plugin-${e.name.toLowerCase()}`})}}function Oit(){fi({id:"check-for-updates",label:"Check for Updates",description:"Checks for Equicord updates",keywords:["updates","check","updater"],categoryId:"updates",tags:[Ng,Xn],handler:async()=>{try{if(await vd()){let t=O1.length;io(t===1?"One update available.":`${t} updates available.`,D.Type.SUCCESS)}else io("No updates found.",D.Type.MESSAGE)}catch(e){io("Failed to check for updates.",D.Type.FAILURE),console.error("CommandPalette",e)}}}),fi({id:"open-changelog",label:"View Changelog",description:"Opens the Equicord changelog",keywords:["updates","changelog"],categoryId:"updates",tags:[Ng,Uc],handler:()=>xi("equicord_changelog")})}function Fit(){for(let e of Bit)kwe.set(e.id,e),jY.set(e.route,e),e.id==="settings-privacy"&&jY.set("Privacy & Safety",e),fi({id:e.id,label:e.label,description:e.description,keywords:e.keywords,categoryId:"discord-settings",tags:[Uc],handler:async()=>{let t=e.id==="settings-privacy"?"privacy_and_safety":null;try{await xi(e.route)}catch(o){t?await xi(t):(console.error("CommandPalette","Failed to open Discord settings",e.route,o),io(`Unable to open ${e.label}.`,D.Type.FAILURE))}}})}function Iwe(e){return kwe.get(e)}function Dwe(e){return jY.get(e)}function Uit(){let e=st?.getChannelId?.();return e?ne.getChannel(e)??null:null}function $it(){return hn?.getGuildId?.()??null}function Hit(e){if(!e)return"Current Channel";try{if(typeof e.isDM=="function"&&e.isDM())return"Direct Message";if(typeof e.isGroupDM=="function"&&e.isGroupDM())return e.name??"Group DM";if(e.name)return`#${e.name}`;if(e.rawRecipients?.length)return"Direct Message"}catch{}return"Current Channel"}function zit(e){return e?(ct.getGuild?.(e)??null)?.name??"Current Guild":"Current Guild"}function Mwe(e){return!e||e<=0?null:{end_time:new Date(Date.now()+e*6e4).toISOString(),selected_time_window:e}}function Git(e,t,o,n){let i=gwe;if(!i?.updateChannelOverrideSettings){io("Channel mute controls unavailable.",D.Type.FAILURE);return}let s={muted:o,mute_config:o?Mwe(n):null};try{i.updateChannelOverrideSettings(t,e,s),io(`${o?"Muted":"Unmuted"} channel.`,D.Type.SUCCESS)}catch(a){console.error("CommandPalette","Failed to toggle channel mute",a),io("Failed to update channel mute state.",D.Type.FAILURE)}}function HY(e,t,o){let n=gwe;if(!n?.updateGuildNotificationSettings){io("Guild mute controls unavailable.",D.Type.FAILURE);return}let i={muted:t,mute_config:t?Mwe(o):null};try{n.updateGuildNotificationSettings(e,i),io(`${t?"Muted":"Unmuted"} server.`,D.Type.SUCCESS)}catch(s){console.error("CommandPalette","Failed to toggle guild mute",s),io("Failed to update server mute state.",D.Type.FAILURE)}}function qit(){let e=new Date,t=new Date(e);return t.setDate(e.getDate()+1),t.setHours(0,0,0,0),Math.max(1,Math.ceil((t.getTime()-e.getTime())/6e4))}function jit(e){let t=!1;if(Bs?.dispatchToLastSubscribed){let o=["TOGGLE_CHANNEL_PINS","CHANNEL_TOGGLE_PINNED_MESSAGES"];for(let n of o)try{Bs.dispatchToLastSubscribed(n,{channelId:e,open:!0,isOpen:!0,location:"commandPalette"}),t=!0;break}catch(i){console.error("CommandPalette",`Failed to dispatch ${n} for pins`,i)}}if(!t)try{V.dispatch({type:"CHANNEL_PINS_MODAL_OPEN",channelId:e})}catch(o){console.error("CommandPalette","Failed to open pins",o),io("Unable to open pins panel.",D.Type.FAILURE)}}function Wit(){eQ({id:$u,getCommands:()=>Kit(),subscribe:e=>{let t=()=>e();return st?.addChangeListener?.(t),hn?.addChangeListener?.(t),Jv?.addChangeListener?.(t),()=>{st?.removeChangeListener?.(t),hn?.removeChangeListener?.(t),Jv?.removeChangeListener?.(t)}}})}function Kit(){let e=[],t=Uit(),o=$it(),n=t?.id;if(t&&n){let i=Hit(t);if(e.push({id:"context-channel-mark-read",label:`Mark ${i} Read`,keywords:["context","mark","read",i.replace(/#/g,"")],categoryId:$u,tags:[Dg,Xn],handler:async()=>{try{let s=v0?.ackChannel;if(!s)throw new Error("ackChannel unavailable");let a=ne.getChannel(n)??t;if(!a)throw new Error("Channel not found");await Promise.resolve(s(a)),io(`Marked ${i} as read.`,D.Type.SUCCESS)}catch(s){console.error("CommandPalette","Failed to mark read",s),io("Failed to mark channel as read.",D.Type.FAILURE)}}}),e.push({id:"context-channel-open-pins",label:`Open Pins for ${i}`,keywords:["context","pins",i.replace(/#/g,"")],categoryId:$u,tags:[Dg,Uc],handler:()=>jit(n)}),t.guild_id&&Jv?.isChannelMuted){let s=Jv.isChannelMuted(t.guild_id,n);e.push({id:"context-channel-toggle-mute",label:`${s?"Unmute":"Mute"} ${i}`,keywords:["context","mute",i.replace(/#/g,"")],categoryId:$u,tags:[Dg,Xn],handler:()=>Git(n,t.guild_id,!s)})}}if(o&&o!=="@me"&&Jv?.isMuted){let i=zit(o),s=Jv.isMuted(o);e.push({id:"context-guild-toggle-mute",label:`${s?"Unmute":"Mute"} ${i}`,keywords:["context","guild","mute"],categoryId:$u,tags:[Dg,Xn],handler:()=>HY(o,!s)}),s||(e.push({id:"context-guild-mute-hour",label:`Mute ${i} for 1 Hour`,keywords:["context","guild","mute","hour"],categoryId:$u,tags:[Dg,Xn],handler:()=>HY(o,!0,60)}),e.push({id:"context-guild-mute-tomorrow",label:`Mute ${i} Until Tomorrow`,keywords:["context","guild","mute","tomorrow"],categoryId:$u,tags:[Dg,Xn],handler:()=>HY(o,!0,qit())})),JSe?.open&&e.push({id:"context-guild-open-settings",label:`Open Settings for ${i}`,keywords:["context","guild","settings"],categoryId:$u,tags:[Dg,Uc],handler:async()=>{try{await Promise.resolve(JSe.open(o,"OVERVIEW"))}catch(a){console.error("CommandPalette","Failed to open guild settings",a),io("Unable to open guild settings.",D.Type.FAILURE)}}})}return e}async function Nwe(e,t){if(!e)return;if(t.has(e)){io("Command loop detected in macro execution.",D.Type.FAILURE);return}e.startsWith("custom-")&&t.add(e);let o=Q7(e);if(!o){io(`Command ${e} not found.`,D.Type.FAILURE);return}await eM(o)}async function Yit(e,t){for(let o of e)await Nwe(o,t)}async function Qit(e){let{action:t}=e;try{switch(t.type){case"command":await Nwe(t.commandId,new Set([e.id]));break;case"settings":xi(t.route);break;case"url":{let o=window?.DiscordNative?.app?.openExternalURL;t.openExternal&&typeof o=="function"?o(t.url):window.open(t.url,"_blank","noopener,noreferrer");break}case"macro":await Yit(t.steps,new Set([e.id]));break;default:io("Unsupported custom command action.",D.Type.FAILURE);break}}catch(o){console.error("CommandPalette","Failed to execute custom command",e,o),io(`Failed to run ${e.label}.`,D.Type.FAILURE)}}function Zit(){return z4.map(e=>({id:e.id,label:e.label||"Untitled Command",description:e.description,keywords:e.keywords,tags:e.tags,categoryId:e.categoryId??O4,danger:e.danger,handler:()=>Qit(e)}))}function Xit(){eQ({id:rwe,getCommands:()=>Zit(),subscribe:e=>JY(()=>e())})}function Jit(){let e=window?.DiscordNative?.notifications;if(e?.clearAll)try{e.clearAll(),io("Cleared desktop notifications.",D.Type.SUCCESS)}catch(t){console.error("CommandPalette","Failed to clear notifications",t),io("Failed to clear notifications.",D.Type.FAILURE)}else io("Notification clearing not supported.",D.Type.FAILURE)}function Vit(e,t=2e3){return new Promise(o=>{let n=ne.getDMFromUserId?.(e)??null;if(n){o(n);return}let i=ne.addChangeListener?.bind(ne),s=ne.removeChangeListener?.bind(ne);if(typeof i!="function"||typeof s!="function"){let p=window.setTimeout(()=>{o(ne.getDMFromUserId?.(e)??null)},t);e2.push(()=>window.clearTimeout(p));return}let a=!1,l=null,c=p=>{a||(a=!0,l!==null&&(window.clearTimeout(l),l=null),s(u),o(p))},u=()=>{let p=ne.getDMFromUserId?.(e)??null;p&&c(p)};i(u),l=window.setTimeout(()=>{c(ne.getDMFromUserId?.(e)??null)},t),e2.push(()=>{a||(a=!0,l!==null&&(window.clearTimeout(l),l=null),s(u),o(ne.getDMFromUserId?.(e)??null))})})}async function est(){bwe();let e=Bf;if(!e){io("No DM closures recorded this session.",D.Type.MESSAGE);return}let{channelId:t,recipientId:o,isGroupDm:n}=e,i=typeof t=="string"?t:null,s=a=>a?(pa.transitionToChannel(a),io("Reopened last closed DM.",D.Type.SUCCESS),!0):!1;try{if(i&&ne.getChannel(i)&&s(i))return;if(!n&&o&&xc?.openPrivateChannel){let a=ne.getDMFromUserId?.(o)??null;if(s(a))return;let l=null;try{let u=await Promise.resolve(xc.openPrivateChannel({recipientIds:[o],location:"CommandPalette",navigateToChannel:!1}));typeof u=="string"&&(l=u)}catch(u){console.error("CommandPalette","Failed to open DM via ChannelActionCreators",u)}if(l||(l=await Vit(o,2e3)),s(l))return;let c=ne.getDMFromUserId?.(o)??i;if(s(c))return;io("The DM could not be reopened.",D.Type.FAILURE);return}if(s(i))return;io("The DM is no longer available.",D.Type.FAILURE)}catch(a){console.error("CommandPalette","Failed to reopen DM",a),io("The DM is no longer available.",D.Type.FAILURE)}finally{Bf=null}}function tst(){bwe();let e=[{id:"session-dnd-30",label:"Set DND for 30 Minutes",keywords:["session","status","dnd","30"],categoryId:Mf,tags:[Qv,Xn],handler:()=>ewe(30)},{id:"session-dnd-60",label:"Set DND for 1 Hour",keywords:["session","status","dnd","60"],categoryId:Mf,tags:[Qv,Xn],handler:()=>ewe(60)},{id:"session-status-cancel",label:"Cancel Status Timer",keywords:["session","status","cancel"],categoryId:Mf,tags:[Qv,Xn],handler:()=>VY()},{id:"session-clear-notifications",label:"Clear Desktop Notifications",keywords:["session","notifications","clear"],categoryId:Mf,tags:[Qv,Xn],handler:Jit},{id:"session-reopen-dm",label:"Reopen Last Closed DM",keywords:["session","dm","reopen"],categoryId:Mf,tags:[Qv,Uc],handler:est}];for(let t of e)fi(t)}function ost(){let e=ct.getGuilds?.()??{};Object.values(e).forEach(t=>{fi({id:`open-guild-${t.id}`,label:`Navigate to ${t.name}`,keywords:["guild","server",t.name.toLowerCase()],categoryId:$4,tags:[iwe,Uc],handler:()=>{ho.transitionToGuild(t.id)}})})}function nst(){Tt.getFriendIDs().forEach(t=>{let o=z.getUser(t);if(!o)return;let n=Tt.getNickname(t)||o.globalName||null,i=n?`${n} (@${o.username})`:o.username;fi({id:`open-friend-${o.id}`,label:`Open DM with ${i}`,keywords:["friend","dm",i.toLowerCase()],categoryId:H4,tags:[swe,Uc],handler:()=>{let s=ne.getDMFromUserId(o.id);ho.transitionTo(`/channels/@me/${s}`)}})})}function U7(e){if(!Zv){io("Unable to change status right now.",D.Type.FAILURE);return}Zv.updateSetting(e);let t={online:"Online",idle:"Idle",dnd:"Do Not Disturb",invisible:"Invisible"}[e];io(`Status set to ${t}.`,D.Type.SUCCESS)}function rst(){let{enabled:e}=sl;V.dispatch({type:"STREAMER_MODE_UPDATE",key:"enabled",value:!e}),io(`Streamer Mode ${e?"disabled":"enabled"}.`,D.Type.SUCCESS)}function ist(){Ir.toggleSelfMute();let e=On.isSelfMute();io(e?"Microphone muted.":"Microphone unmuted.",D.Type.SUCCESS)}function sst(){Ir.toggleSelfDeaf();let e=On.isSelfDeaf();io(e?"You are now deafened.":"You are no longer deafened.",D.Type.SUCCESS)}function ast(){Ge.useQuickCss=!Ge.useQuickCss,io(`QuickCSS ${Ge.useQuickCss?"enabled":"disabled"}.`,D.Type.SUCCESS)}function lst(){Ge.transparent=!Ge.transparent,io(`Window transparency ${Ge.transparent?"enabled":"disabled"}.`,D.Type.SUCCESS)}function cst(){fi({id:"command-palette-open-settings",label:"Open Command Palette Settings",description:"Configure the Command Palette plugin",keywords:["command","palette","settings"],categoryId:qs,tags:[Uc,Ng],handler:()=>{Rs(s2)}}),fi({id:"command-palette-show-recent",label:"Show Recent Commands",description:"Displays the last executed commands",keywords:["recent","history"],categoryId:qs,tags:[Nf],handler:()=>{let e=Iit().slice(0,5);if(e.length===0){io("No commands have been run yet.",D.Type.MESSAGE);return}let t=e.map((o,n)=>`${n+1}. ${o.label}`).join(`
`);D.show({message:t,type:D.Type.MESSAGE,id:D.genId(),options:{position:D.Position.BOTTOM}})}}),fi({id:"command-palette-rerun-last",label:"Re-run Last Command",keywords:["recent","again"],categoryId:qs,tags:[Nf,Xn],handler:async()=>{let e=twe("command-palette-rerun-last");if(!e){io("No commands available to re-run.",D.Type.MESSAGE);return}await eM(e)}}),fi({id:"command-palette-toggle-pin-last",label:"Toggle Pin on Last Command",keywords:["recent","pin"],categoryId:qs,tags:[Nf,Xn],handler:async()=>{let e=twe("command-palette-toggle-pin-last");if(!e){io("No recent commands to pin.",D.Type.MESSAGE);return}let t=await sQ(e.id);if(t===null){io(`${e.label} is not currently available to pin.`,D.Type.MESSAGE);return}io(`${e.label} ${t?"pinned":"unpinned"}.`,D.Type.SUCCESS)}})}function ust(){let e=[{id:"set-status-online",label:"Set Status: Online",handler:()=>U7("online"),keywords:["status","online"],tags:[Nf,Xn]},{id:"set-status-idle",label:"Set Status: Idle",handler:()=>U7("idle"),keywords:["status","idle"],tags:[Nf,Xn]},{id:"set-status-dnd",label:"Set Status: Do Not Disturb",handler:()=>U7("dnd"),keywords:["status","dnd","busy"],tags:[Nf,Xn]},{id:"set-status-invisible",label:"Set Status: Invisible",handler:()=>U7("invisible"),keywords:["status","offline","invisible"],tags:[Nf,Xn]},{id:"toggle-streamer-mode",label:"Toggle Streamer Mode",handler:rst,keywords:["stream","privacy"],tags:[Xn]},{id:"toggle-self-mute",label:"Toggle Self Mute",handler:ist,keywords:["voice","mute"],tags:[Xn]},{id:"toggle-self-deafen",label:"Toggle Self Deafen",handler:sst,keywords:["voice","deafen"],tags:[Xn]}];for(let t of e)fi({id:t.id,label:t.label,description:t.description,keywords:t.keywords,categoryId:qs,tags:t.tags,handler:t.handler})}function dst(e){return yt(e.name)?e.patches?.length?(io(`${e.name} requires a restart to reload.`,D.Type.MESSAGE),!1):qm(e)?Gm(e)?(io(`Reloaded ${e.name}.`,D.Type.SUCCESS),!0):(io(`Failed to restart ${e.name}.`,D.Type.FAILURE),!1):(io(`Failed to stop ${e.name}.`,D.Type.FAILURE),!1):(io(`${e.name} is disabled.`,D.Type.MESSAGE),!1)}async function pst(){let e=Object.values(pt),t=0;for(let o of e)yt(o.name)&&dst(o)&&(t+=1);t===0?io("No plugins were reloaded.",D.Type.MESSAGE):io(`Reloaded ${t} plugin${t===1?"":"s"}.`,D.Type.SUCCESS)}async function owe(e){let t=0;for(let o of Object.values(pt)){let n=yt(o.name);if(e&&n||!e&&(yt(o.name)||!n)||o.patches?.length)continue;await r8(o.name)&&yt(o.name)===e&&(t+=1)}io(t?`${e?"Enabled":"Disabled"} ${t} plugin${t===1?"":"s"}.`:"No plugins changed state.",D.Type.SUCCESS)}function mst(){fi({id:"reload-all-plugins",label:"Reload All Plugins",description:"Attempts to hot reload every enabled plugin",keywords:["plugin","reload","restart"],categoryId:"plugins-changes",tags:[Sl,Ng,Xn],handler:()=>void pst()}),fi({id:"enable-all-plugins",label:"Enable All Plugins",keywords:["plugin","enable"],categoryId:"plugins-changes",tags:[Sl,Xn],handler:()=>void owe(!0)}),fi({id:"disable-all-plugins",label:"Disable All Non-required Plugins",keywords:["plugin","disable"],categoryId:"plugins-changes",tags:[Sl,Xn],handler:()=>void owe(!1)}),fi({id:"restart-equicord",label:"Restart Equicord",description:"Reloads the Discord client window",keywords:["restart","reload"],categoryId:"plugins-changes",tags:[Ng,Xn],handler:()=>window.location.reload()})}function YY(e){return e.trim().toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}function fst(){let e=pt,t=[],o=new Set;for(let n of Object.values(e)){let{toolboxActions:i}=n,s=Object.entries(i??{});if(s.length!==0)for(let[a,l]of s){if(typeof l!="function")continue;let c=a?.trim()||"Action",u=YY(c)||"action",p=`plugin-action-${n.name.toLowerCase()}-${u}`,m=p,g=2;for(;o.has(m)||rc.has(m);)m=`${p}-${g++}`;o.add(m);let y=yt(n.name),b=Array.from(new Set([...aQ(n),...c.toLowerCase().split(/\s+/),...y?[]:["disabled"]]));t.push({id:m,label:`${n.name}: ${c}`,description:n.description,keywords:b,categoryId:F4,tags:[Sl,Xn,Ng],handler:()=>{if(!yt(n.name)){io(`${n.name} is disabled. Enable the plugin to use this action.`,D.Type.FAILURE);return}return gst(n,l,c)}})}}return t}async function gst(e,t,o){try{await Promise.resolve(t.call(e))}catch(n){console.error("CommandPalette","Toolbox action failed",e.name,o,n),io(`Failed to run ${e.name}: ${o}`,D.Type.FAILURE)}}function hst(){eQ({id:sit,getCommands:()=>fst(),subscribe:e=>{let t=(o,n)=>{typeof n!="string"||!n.startsWith("plugins.")||e()};return Tn.addGlobalChangeListener(t),()=>{Tn.removeGlobalChangeListener(t)}}})}function xst(){fi({id:"toggle-quickcss",label:"Toggle QuickCSS",keywords:["css","theme","quick"],categoryId:qs,tags:[FY,Xn],handler:ast}),fi({id:"toggle-window-transparency",label:"Toggle Window Transparency",keywords:["window","transparency","appearance"],categoryId:qs,tags:[FY,Xn],handler:lst}),fi({id:"open-theme-library",label:"Open Theme Library",keywords:["theme","library"],categoryId:qs,tags:[FY,Uc],handler:()=>xi("equicord_themes")})}function Bwe(){if(!WY){for(let e of Mit)Ewe(e);for(let e of Nit)fi(e);cst(),ust(),Oit(),Fit(),Rit(),Lit(),mst(),hst(),xst(),Wit(),Xit(),tst(),ost(),nst(),Z7.then(async()=>{Dit()&&await wwe(),G4()}),WY=!0}}var H7,QY,KSe,B4,Mg,rc,L4,P4,z7,G7,j7,q7,YSe,Df,iit,Zv,nwe,O4,Mf,$u,rwe,F4,sit,U4,$4,H4,R4,Vv,Nf,Uc,Xn,Ng,FY,Sl,Qv,Dg,ait,iwe,swe,QSe,_4,$7,UY,Bf,$Y,e2,zY,gwe,JSe,Jv,qs,xit,yit,VSe,bit,hwe,nc,GY,t2,F7,z4,qY,W7o,Z7,Mit,Nit,Bit,kwe,jY,WY,q4=x(()=>{"use strict";d();dr();Wo();Q();Ra();Nw();g9();wu();fe();B();Jh();j4();H7=new Map,QY=new Map,KSe="vcCommandPaletteId",B4="data-vc-command-palette-id",Mg=new Map,rc=new Map,L4=0,P4=null,z7=new Map,G7=new Map,j7=new Map,q7=new Set,YSe=10,Df=[],iit=new Set(["command-palette-rerun-last","command-palette-toggle-pin-last","command-palette-show-recent","command-palette-open-settings"]),Zv=nr("status","status"),nwe="CommandPaletteCustomCommands",O4="custom-commands",Mf="session-tools",$u="context-current",rwe="custom-commands",F4="plugins-actions",sit="plugin-toolbox-actions",U4="chatbar-actions",$4="guilds-actions",H4="friends-actions",R4=new Map,Vv=new Map,Nf="Core",Uc="Navigation",Xn="Utility",Ng="Developer",FY="Customization",Sl="Plugins",Qv="Session",Dg="Context",ait="Custom",iwe="Guilds",swe="Friends";QSe=({element:e,buttonKey:t})=>{let o=X.useRef(null),n=X.useRef(e);return n.current=e,se(()=>{let i=!1,s=null,a=null,l=16,c=()=>{if(i)return;let p=o.current;if(!p){u();return}let m=lit(p);if(!m){u();return}let g=ZSe(m,n.current,t);s=cit(t,g,p,m),l=16},u=()=>{if(i)return;let p=l;l=Math.min(l*2,1e3),a=window.setTimeout(c,p)};return c(),()=>{i=!0,a!=null&&window.clearTimeout(a),s?.()}},[t]),se(()=>{if(!o.current)return;let s=H7.get(t);if(!s)return;let a=dwe(s);if(!a)return;let l=ZSe(a,n.current,t);uwe(t,l)},[e,t]),r("div",{ref:o,style:{display:"contents"}},e)};_4=null,$7=null,UY=!1,Bf=null,$Y=!1,e2=[],zY=[],gwe=He("updateGuildNotificationSettings","updateChannelOverrideSettings"),JSe=He("open","selectRole","updateGuild"),Jv=Ft("UserGuildSettingsStore"),qs="quick-actions",xit=new Map([[qs,100],[$u,95],[Mf,90],["discord-settings",90],["updates",75],[O4,80],["plugins",45],["plugins-enable",45],["plugins-disable",45],["plugins-settings",40],["plugins-changes",40],[F4,45],[U4,45],[$4,40],[H4,40]]),yit=new Map([[qs,"Core Actions"],[$u,"Core Actions"],[Mf,"Core Actions"],["discord-settings","Discord Settings"],["updates","Updates"],[O4,"Custom Commands"],["plugins","Plugin Controls"],["plugins-enable","Plugin Controls"],["plugins-disable","Plugin Controls"],["plugins-settings","Plugin Controls"],["plugins-changes","Plugin Controls"],[F4,"Plugin Controls"],[U4,"Plugin Controls"],[$4,"Guilds"],[H4,"Friends"]]),VSe=50,bit=new Map([[qs,[Nf]],[$u,[Dg]],[Mf,[Qv]],["discord-settings",[Uc]],["updates",[Ng]],[O4,[ait]],["plugins",[Sl]],["plugins-enable",[Sl]],["plugins-disable",[Sl]],["plugins-settings",[Sl]],["plugins-changes",[Sl]],[F4,[Sl,Xn]],[U4,[Sl,Xn]],[$4,[iwe]],[H4,[swe]]]),hwe="CommandPalettePinned",nc=new Set,GY=new Set,t2=new Map,F7=null,z4=[],qY=new Set,W7o=(async()=>{try{let e=await Oe.get(nwe);Array.isArray(e)&&xwe(e)}catch(e){console.error("CommandPalette","Failed to load custom commands",e)}})();Z7=(async()=>{try{let e=await Oe.get(hwe);if(Array.isArray(e))for(let t of e)nc.add(t)}catch(e){console.error("CommandPalette","Failed to load pinned commands",e)}})();Z7.then(()=>G4());Mit=[{id:qs,label:"Quick Actions",description:"Common Equicord shortcuts"},{id:"plugins",label:"Plugins",description:"Manage Equicord and Vencord plugins"},{id:$u,label:"Current Context",description:"Actions for the selected channel and guild"},{id:"plugins-enable",label:"Enable Plugin",parentId:"plugins"},{id:"plugins-disable",label:"Disable Plugin",parentId:"plugins"},{id:"plugins-settings",label:"Plugin Settings",parentId:"plugins"},{id:F4,label:"Plugin Actions",parentId:"plugins"},{id:U4,label:"Chat Bar Buttons",parentId:"plugins"},{id:"plugins-changes",label:"Plugin Changes",parentId:"plugins"},{id:"updates",label:"Updates",description:"Stay up to date with Equicord"},{id:"discord-settings",label:"Discord Settings",description:"Jump to Discord configuration pages"},{id:O4,label:"Custom Commands",description:"User-defined command palette entries"},{id:Mf,label:"Session Tools",description:"Utilities for managing your Discord session"},{id:$4,label:"Guilds",description:"Quickly navigate to your guilds"},{id:H4,label:"Friends",description:"Quickly DM your friends"}],Nit=[{id:"open-equicord-settings",label:"Open Equicord Settings",keywords:["settings","equicord"],categoryId:qs,tags:[Uc,Nf],handler:()=>xi("equicord_main")},{id:"open-plugin-settings",label:"Open Plugin Settings",keywords:["settings","plugins"],categoryId:qs,tags:[Uc,Sl],handler:()=>xi("equicord_plugins")},{id:"reload-windows",label:"Reload Discord",description:"Reloads the current Discord window",keywords:["reload"],categoryId:qs,tags:[Ng,Xn],handler:()=>window.location.reload()}],Bit=[{id:"settings-account",label:"Open My Account",route:"my_account",keywords:["account","profile"]},{id:"settings-privacy",label:"Open Data & Privacy",route:"data_and_privacy",keywords:["privacy","safety","data"]},{id:"settings-notifications",label:"Open Notifications",route:"legacy_notifications_settings",keywords:["notifications"]},{id:"settings-voice",label:"Open Voice & Video",route:"voice_and_video",keywords:["voice","video","audio"]},{id:"settings-text",label:"Open Text & Images",route:"text_and_images",keywords:["text","images"]},{id:"settings-appearance",label:"Open Appearance",route:"appearance",keywords:["appearance","theme"]},{id:"settings-accessibility",label:"Open Accessibility",route:"accessibility",keywords:["accessibility"]},{id:"settings-keybinds",label:"Open Keybinds",route:"keybinds",keywords:["keybinds","shortcuts"]},{id:"settings-advanced",label:"Open Advanced",route:"advanced",keywords:["advanced"]}],kwe=new Map,jY=new Map,WY=!1});var lQ=x(()=>{});function tM(e){return Ee(t=>r(bst,{modalProps:t,...e}))}function bst({modalProps:e,allowMultiple:t=!1,initialQuery:o="",initialSelectedIds:n=[],filter:i,onSelect:s,onComplete:a,onClose:l}){let c=de("vc-command-palette-"),[u,p]=L(o),[m,g]=L(()=>V7()),[y,b]=L(-1),[v,E]=L(!1),A=Hu.store.showTags??!0,{visualStyle:C="classic"}=Hu.use(["visualStyle"]),I=C==="polished"?"style-polished":"style-classic",N=rt(()=>Array.from(new Set(n)),[n]),[_,O]=L(()=>N),F=kt([]),J=kt([]);se(()=>i2(g),[]),se(()=>{let Ne=requestAnimationFrame(()=>E(!0));return()=>cancelAnimationFrame(Ne)},[]),se(()=>{J.current=_},[_]);let G=rt(()=>n2(),[m]),te=rt(()=>new Map(G.map(Ne=>[Ne.id,Ne])),[G]),K=rt(()=>i?G.filter(i):G,[G,i]),le=u.trim().toLowerCase(),he=rt(()=>new Set(_),[_]),{items:Ae,hasCommands:Ce}=rt(()=>{let Ne=(_t,Wt)=>{let po=o2(Wt.categoryId)-o2(_t.categoryId);return po!==0?po:_t.label.localeCompare(Wt.label)},Fe;if(le){let _t=no=>{let mo=0,Sn=no.label.toLowerCase();if(Sn===le?mo+=60:Sn.startsWith(le)?mo+=45:Sn.includes(le)&&(mo+=30),Sn.split(/[^a-z0-9]+/).includes(le)&&(mo+=20),no.keywords&&no.keywords.length){let lt=no.keywords.map(we=>we.toLowerCase()).filter(Boolean);lt.includes(le)?mo+=35:lt.some(we=>we.includes(le))&&(mo+=15)}if((no.description?.toLowerCase()??"").includes(le)&&(mo+=10),no.tags&&no.tags.length){let lt=no.tags.map(we=>we.toLowerCase());lt.includes(le)?mo+=25:lt.some(we=>we.includes(le))&&(mo+=10)}mo===0&&(mo=5),mo+=o2(no.categoryId);let Qe=K7(no.id);return Qe>=0&&(mo+=Math.max(0,30-Qe*4)),mo},Wt=new Map,po=0;for(let no of K){if(no.hiddenInSearch||!J7(no.id).includes(le))continue;let Sn=_t(no),Br=no.searchGroup??no.id,be=Wt.get(Br);(!be||Sn>be.score||Sn===be.score&&po<be.order)&&Wt.set(Br,{entry:no,score:Sn,order:po}),po+=1}Fe=Array.from(Wt.values()).sort((no,mo)=>mo.score!==no.score?mo.score-no.score:no.order-mo.order).map(no=>no.entry)}else Fe=[...K].sort(Ne);let Xe=new Map,It=[];for(let _t of Fe){let Wt=W7(_t.categoryId);Xe.has(Wt)||(Xe.set(Wt,[]),It.push(Wt)),Xe.get(Wt).push(_t)}let Ve=[];for(let _t of It){let Wt=Xe.get(_t);if(!(!Wt||Wt.length===0)){Ve.push({type:"section",label:_t});for(let po of Wt)Ve.push({type:"command",command:po})}}return{items:Ve,hasCommands:Fe.length>0}},[K,le]);se(()=>{if(!Ce){b(-1);return}b(Ne=>Ne>=0&&Ne<Ae.length&&Pg(Ae[Ne])?Ne:cQ(Ae))},[Ae,Ce]),se(()=>{if(y<0)return;F.current[y]?.scrollIntoView({block:"nearest"})},[y,Ae]),F.current=F.current.slice(0,Ae.length);let ye=Ne=>{O(Fe=>Fe.includes(Ne.id)?Fe.filter(It=>It!==Ne.id):[...Fe,Ne.id])},ce=Ne=>{if(t){ye(Ne);return}s?.(Ne),e.onClose?.()},pe=Ne=>{Ce&&b(Fe=>{let Xe=Fe>=0&&Fe<Ae.length&&Pg(Ae[Fe])?Fe:cQ(Ae);return Xe<0?-1:yst(Xe,Ne,Ae)})},xe=gn(()=>{if(!t)return;let Ne=Array.from(new Set(J.current)),Fe=Ne.map(Xe=>te.get(Xe)).filter(Xe=>!!Xe);a?a(Fe,Ne):Fe.forEach(Xe=>s?.(Xe))},[t,te,a,s]);se(()=>()=>{t&&xe(),l?.()},[t,xe,l]);let Ze=Ne=>Ne instanceof HTMLElement?Ne.isContentEditable||Ne.tagName==="INPUT"||Ne.tagName==="TEXTAREA":!1,ge=Ne=>{if(!Ce){Ne.key==="Escape"&&(Ne.preventDefault(),e.onClose?.());return}if(Ne.key==="ArrowDown"){Ne.preventDefault(),pe(1);return}if(Ne.key==="ArrowUp"){Ne.preventDefault(),pe(-1);return}if(Ne.key==="Enter"){let Fe=y>=0?Ae[y]:void 0;if(t){Pg(Fe)&&(Ne.preventDefault(),ye(Fe.command));return}let Xe=Ae.find(Pg),It=Pg(Fe)?Fe.command:Xe?.command;It&&(Ne.preventDefault(),ce(It));return}if(t&&Ne.key===" "&&!Ne.altKey&&!Ne.ctrlKey&&!Ne.metaKey&&!Ze(Ne.target)){let Fe=y>=0?Ae[y]:void 0;Pg(Fe)&&(Ne.preventDefault(),ye(Fe.command));return}Ne.key==="Escape"&&(Ne.preventDefault(),e.onClose?.())},ae=t?"Add Commands":"Choose Command";return r(Pe,{...e,size:"small",className:c("root",I,v&&"root-visible")},r("div",{className:c("container"),onKeyDown:ge},r("div",{className:c("header")},ae),r("div",{className:c("search"),onMouseDown:Ne=>{Ne.preventDefault(),Ne.currentTarget.querySelector("input")?.focus({preventScroll:!0})}},r("span",{className:c("prompt")},"\u203A"),r(qe,{autoFocus:!0,value:u,onChange:p,placeholder:"Search commands"})),r("div",{className:c("list")},!Ce&&r("div",{className:c("empty")},"No commands found"),Ae.map((Ne,Fe)=>{if(Ne.type==="section")return F.current[Fe]=null,r("div",{key:`section-${Fe}`,className:c("section")},Ne.label);let{command:Xe}=Ne,Ve=ky(Xe.categoryId).filter(_t=>_t.label&&_t.id!=="quick-actions").map(_t=>_t.label).join(" / ");return r("button",{key:Xe.id,type:"button",className:c("item",{selected:Fe===y,chosen:t&&he.has(Xe.id),danger:Xe.danger}),onClick:()=>ce(Xe),onMouseEnter:()=>b(Fe),ref:_t=>{F.current[Fe]=_t}},r("div",{className:c("item-content")},r("div",{className:c("text")},r("div",{className:c("label")},Xe.label),Xe.description&&r("div",{className:c("description")},Xe.description),Ve&&r("div",{className:c("meta")},Ve),A&&Xe.tags&&Xe.tags.length>0&&r("div",{className:c("tags")},Xe.tags.map(_t=>r("span",{key:_t,className:c("tag-chip")},_t))))))}))))}var Pg,cQ,yst,Pwe=x(()=>{"use strict";d();lQ();nt();at();B();j4();q4();Pg=e=>e?.type==="command",cQ=e=>e.findIndex(Pg),yst=(e,t,o)=>{if(o.length===0)return-1;let n=e;for(let i=0;i<o.length;i+=1)if(n=(n+t+o.length)%o.length,Pg(o[n]))return n;return cQ(o)}});function uQ(){let t=rQ().map(o=>{let n=ky(o.id);return{label:`${n.length?n.map(s=>s.label).join(" \u203A "):o.label} (${o.id})`,value:o.id,description:o.description}});return[{label:"Auto (use default placement)",value:""},...t]}function wst(){return{id:`custom-${Math.random().toString(36).slice(2,8)}`,label:"New Command",keywords:[],tags:[],categoryId:void 0,description:"",danger:!1,action:{type:"command",commandId:""}}}function pQ(e){let t=new Set,o=[];for(let n of e){let i=n.trim();if(!i)continue;let s=Bg(i);!s||t.has(s)||(t.add(s),o.push(i))}return o}function zu(e,t){let o=t.tags!==void 0?pQ(t.tags):e.tags;return{...e,...t,keywords:t.keywords??e.keywords,tags:o,action:t.action??e.action}}function dQ(e){let t=e.split(",").map(o=>o.trim());return pQ(t)}function kst(e,t){let{action:o}=e;switch(o.type){case"command":let n=o.commandId.trim(),i;return n?Q7(n)||(i="No command matches this ID."):i="Enter a command ID or choose one below.",r("div",{style:{display:"flex",flexDirection:"column",gap:8}},r(qe,{label:"Target Command ID",value:o.commandId,placeholder:"Existing command id",error:i,onChange:a=>t({type:"command",commandId:a})}),r(Me,{size:"small",onClick:()=>tM({initialQuery:o.commandId,onSelect:a=>t({type:"command",commandId:a.id})})},"Choose Command\u2026"));case"settings":{let a=o.route?Dwe(o.route):void 0,l=a?`${a.label} (${a.route})`:o.route||"No page selected";return r("div",{style:{display:"flex",flexDirection:"column",gap:8}},r(W,{size:"sm",style:{color:"var(--text-muted, #a5a6ab)"}},"Current page: ",l),r(Me,{size:"small",onClick:()=>tM({initialSelectedIds:a?[a.id]:void 0,filter:c=>c.categoryId==="discord-settings",onSelect:c=>{let u=Iwe(c.id);t({type:"settings",route:u?.route??c.label})}})},"Choose Page\u2026"))}case"url":{let a,l=o.url.trim();if(l&&!l.startsWith("http://")&&!l.startsWith("https://"))a="Use http:// or https:// links.";else if(l)try{new URL(l)}catch{a="Enter a valid URL."}return r("div",{style:{display:"flex",flexDirection:"column",gap:12}},r(qe,{label:"URL",value:o.url,placeholder:"https://example.com",error:a,onChange:c=>t({type:"url",url:c,openExternal:o.openExternal})}),r("div",{style:{display:"flex",alignItems:"center",gap:8}},r(os,{checked:!!o.openExternal,onChange:c=>t({type:"url",url:o.url,openExternal:c})}),r(W,{size:"sm"},"Open externally")))}case"macro":let s=o.steps.filter(a=>!Q7(a));return r("div",{style:{display:"flex",flexDirection:"column",gap:8}},r(qe,{label:"Command Sequence",value:o.steps.join(", "),placeholder:"command-a, command-b",onChange:a=>t({type:"macro",steps:dQ(a)})}),r(Me,{size:"small",onClick:()=>tM({allowMultiple:!0,initialSelectedIds:o.steps,onComplete:(a,l)=>{let c=l??a.map(u=>u.id);t({type:"macro",steps:c})}})},"Add Step\u2026"),o.steps.length>0&&r("div",{style:{display:"flex",flexWrap:"wrap",gap:6}},o.steps.map((a,l)=>r(Ia,{key:`${a}-${l}`,variant:"secondary",onClick:()=>{let c=[...o.steps];c.splice(l,1),t({type:"macro",steps:c})}},a," \u2715"))),s.length>0&&r(W,{size:"sm",style:{color:"var(--status-danger-text, #f04747)"}},"Unknown command IDs: ",s.join(", ")));default:return null}}function _we(){let[e,t]=X.useState(()=>XY()),[o,n]=X.useState(()=>r2()),[i,s]=X.useState(()=>uQ()),[a,l]=X.useState({}),[c,u]=X.useState({});X.useEffect(()=>JY(b=>t(b)),[]),X.useEffect(()=>(n(r2()),s(uQ()),i2(()=>{n(r2()),s(uQ())})),[]);let p=X.useCallback(b=>{t(b),ywe(b)},[]),m=()=>{p([...e,wst()])},g=b=>{p(e.filter(v=>v.id!==b))},y=(b,v)=>{p(e.map(E=>E.id===b?v(E):E))};return X.useEffect(()=>{l(b=>{let v={...b};for(let E of Object.keys(v))e.some(A=>A.id===E)||delete v[E];return v}),u(b=>{let v={...b};for(let E of Object.keys(v))e.some(A=>A.id===E)||delete v[E];return v})},[e]),r("section",null,r(re,{tag:"h4",style:{color:"var(--text-normal, #dcddde)"}},"Custom Commands"),r(W,{size:"sm",className:"vc-command-palette-settings-help"},"1) Name the command \xB7 2) Add optional description/keywords/tags/category \xB7 3) Choose an action and fill its details (IDs should match existing palette commands for aliases and macros)."),r("div",{style:{display:"flex",flexDirection:"column",gap:16}},e.map(b=>{let v=a[b.id],E=!!(b.description?.trim()?.length||(b.keywords?.length??0)||(b.tags?.length??0)||b.categoryId||b.danger),A=v??E,C=b.categoryId??"",I=C?ky(C):[],N=C?I.length?I.map(O=>O.label).join(" \u203A "):C:"Auto (default)",_=c[b.id]??!1;return r("div",{key:b.id,style:{padding:14,borderRadius:8,background:"var(--background-primary)",border:"1px solid var(--background-base-low)",display:"flex",flexDirection:"column",gap:12}},r("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},r(re,{tag:"h5",style:{color:"var(--text-normal, #dcddde)",marginBottom:0}},b.label||"Untitled Command"),r(Ia,{variant:"secondary",onClick:()=>u(O=>({...O,[b.id]:!_}))},_?"Expand":"Collapse")),!_&&r(f,null,r(qe,{label:"Label",value:b.label,placeholder:"Display name",onChange:O=>y(b.id,F=>zu(F,{label:O}))}),r("div",{style:{display:"flex",flexDirection:"column",gap:8}},r("div",{style:{display:"flex",flexWrap:"wrap",gap:8,alignItems:"center"}},r(to,{options:vst,isSelected:O=>O===b.action.type,select:O=>{switch(O){case"command":y(b.id,J=>oM[0].apply(J));break;case"settings":y(b.id,J=>oM[1].apply(J));break;case"url":y(b.id,J=>oM[2].apply(J));break;case"macro":y(b.id,J=>oM[3].apply(J));break;default:break}},serialize:O=>O.value})),r(W,{size:"xs",style:{color:"var(--text-muted, #a5a6ab)",fontSize:12}},Sst[b.action.type])),kst(b,O=>y(b.id,F=>zu(F,{action:O}))),r(Ia,{variant:"secondary",onClick:()=>l(O=>({...O,[b.id]:!(A??!1)}))},A?"Hide advanced options":"Show advanced options"),A&&r("div",{style:{display:"flex",flexDirection:"column",gap:12,background:"var(--background-secondary-alt)",borderRadius:8,padding:12}},r(qe,{label:"Description",value:b.description??"",placeholder:"Optional subtitle",onChange:O=>y(b.id,F=>zu(F,{description:O}))}),r(qe,{label:"Keywords",value:(b.keywords??[]).join(", "),placeholder:"Comma-separated keywords",onChange:O=>y(b.id,F=>zu(F,{keywords:dQ(O)}))}),r("div",{style:{display:"flex",flexDirection:"column",gap:6}},r(qe,{label:"Tags",value:(b.tags??[]).join(", "),placeholder:"Comma-separated tags",onChange:O=>y(b.id,F=>zu(F,{tags:dQ(O)}))}),o.length>0&&r("div",{style:{display:"flex",flexDirection:"column",gap:6}},r(W,{size:"xs",style:{color:"var(--text-muted, #a5a6ab)",fontSize:12}},"Suggestions"),r("div",{style:{display:"flex",flexWrap:"wrap",gap:6}},o.filter(O=>!(b.tags??[]).some(F=>Bg(F)===O.id)).slice(0,12).map(O=>r(Me,{key:O.id,size:"min",variant:"secondary",onClick:()=>y(b.id,F=>zu(F,{tags:pQ([...F.tags??[],O.label])}))},O.label))))),r("div",{style:{display:"flex",flexDirection:"column",gap:6}},r(to,{options:i,isSelected:O=>O===C,select:O=>y(b.id,F=>zu(F,{categoryId:O||void 0})),serialize:O=>O.value}),r(W,{size:"xs",style:{color:"var(--text-muted, #a5a6ab)",fontSize:12}},"Choose where this command appears in the palette."),C&&r("div",{style:{display:"flex",flexWrap:"wrap",gap:6}},r("span",{style:{display:"inline-flex",alignItems:"center",gap:6,borderRadius:999,padding:"2px 10px",fontSize:12,background:"var(--background-base-low)",color:"var(--text-normal, #dcddde)"}},N,r("span",{style:{color:"var(--text-muted, #a5a6ab)"}},"\xB7 ",C)))),r("div",{style:{display:"flex",alignItems:"center",gap:8}},r(os,{checked:!!b.danger,onChange:O=>y(b.id,F=>zu(F,{danger:O}))}),r(W,{size:"sm"},"Show as dangerous")))),r(Me,{variant:"dangerPrimary",size:"small",onClick:()=>g(b.id)},"Remove Command"))})),r(Me,{variant:"primary",style:{marginTop:16},onClick:m},"Add Command"))}var vst,Sst,oM,Rwe=x(()=>{"use strict";d();Co();ut();wt();Im();B();Pwe();q4();vst=[{label:"Run Command",value:"command"},{label:"Open Settings Page",value:"settings"},{label:"Open URL",value:"url"},{label:"Run Macro",value:"macro"}],Sst={command:"Alias another palette command by ID. Use the picker if you\u2019re unsure of the identifier.",settings:"Jump directly to a Discord settings page. Choose a page from the picker.",url:"Open a link. Use https:// links for best compatibility.",macro:"Run a sequence of commands in order. Add steps via the picker."};oM=[{label:"Alias",description:"Mirror an existing command",apply:e=>zu(e,{action:{type:"command",commandId:""}})},{label:"Settings",description:"Open Discord settings",apply:e=>zu(e,{action:{type:"settings",route:"My Account"}})},{label:"Link",description:"Open an external URL",apply:e=>zu(e,{action:{type:"url",url:"https://",openExternal:!0}})},{label:"Macro",description:"Run multiple commands",apply:e=>zu(e,{action:{type:"macro",steps:[]}})}]});function Owe(e){return Ast[e]??Est}function Cst(e){let t=Owe(e);return{background:t.dot,boxShadow:`0 0 0 2px ${t.glow}`}}function Lwe(e){let t=Owe(e);return{"--tag-chip-color":t.dot,"--tag-chip-glow":t.glow}}function Tst({modalProps:e}){let[t,o]=L(""),[n,i]=L([]),[s,a]=L(-1),[l,c]=L(null),[u,p]=L(()=>V7()),[m,g]=L(new Set),[y,b]=L(!1),[v,E]=L([]),{visualStyle:A="classic"}=Hu.use(["visualStyle"]),C=A==="polished"?"style-polished":"style-classic",I=Hu.store.showTags??!0,N=I&&(Hu.store.enableTagFilter??!0),_=kt(null),O=kt([]),F=be=>!!(be&&be.type!=="section"),J=be=>{for(let Qe=0;Qe<be.length;Qe+=1)if(F(be[Qe]))return Qe;return-1},G=(be,Qe,lt)=>{if(lt.length===0||!lt.some(Te=>F(Te)))return-1;let we=be;for(let Te=0;Te<lt.length;Te+=1)if(we=(we+Qe+lt.length)%lt.length,F(lt[we]))return we;return J(lt)};se(()=>Cwe(Qe=>{g(new Set(Qe))}),[]),se(()=>i2(p),[]),se(()=>{let be=requestAnimationFrame(()=>b(!0));return()=>cancelAnimationFrame(be)},[]);let te=rt(()=>r2(),[u]);se(()=>{let be=new Set(te.map(Qe=>Qe.id));E(Qe=>{if(be.size===0)return Qe.length?[]:Qe;let lt=Qe.filter(we=>be.has(we));return lt.length===Qe.length?Qe:lt})},[te]);let K=rt(()=>te.slice(0,9),[te]),oe=rt(()=>new Map(te.map(be=>[be.id,be.label])),[te]),le=rt(()=>new Set(v),[v]),he=rt(()=>v.map(be=>oe.get(be)??be).filter((be,Qe,lt)=>lt.indexOf(be)===Qe),[v,oe]),Ae=gn(be=>{E(Qe=>Qe.includes(be)?Qe.filter(lt=>lt!==be):[...Qe,be])},[]),Ce=t.trim(),ye=Ce.length>0,ce=n[n.length-1]??null,pe=rt(()=>n2(),[u]),xe=rt(()=>new Map(pe.map(be=>[be.id,be])),[pe]),Ze=rt(()=>v.slice().sort().join("|"),[v]);se(()=>{tQ()},[Ze,N]);let ge=rt(()=>{if(!N||v.length===0)return null;let be=new Set(v),Qe=new Set;for(let lt of pe){let we=Twe(lt.id);if(!we.length)continue;let Te=!0;for(let ft of be)if(!we.includes(ft)){Te=!1;break}Te&&Qe.add(lt.id)}return Qe},[pe,N,Ze]),ae=gn(be=>!N||!ge?!0:ge.has(be.id),[N,ge]),Ne=rt(()=>{let be=ce?.id??null,Qe=Awe(be);return ye?[]:ge?Qe.filter(lt=>X7(lt.id).some(Te=>ge.has(Te.id))):Qe},[ye,ce,u,ge]),Fe=rt(()=>{if(m.size===0)return[];let be=[];for(let Qe of m){let lt=xe.get(Qe);lt&&be.push(lt)}return be},[m,xe]),Xe=rt(()=>{if(ye)return[];let be=Fe;if(ce){let Qe=new Set(X7(ce.id).map(lt=>lt.id));be=be.filter(lt=>Qe.has(lt.id))}return ge&&(be=be.filter(Qe=>ge.has(Qe.id))),be},[Fe,ce,ye,u,ge]),It=rt(()=>{let be=Ce.toLowerCase(),Qe=(Te,ft)=>{let Qo=Te.label.toLowerCase(),ro=0;if(Qo===be?ro+=60:Qo.startsWith(be)?ro+=45:Qo.includes(be)&&(ro+=30),Qo.split(/[^a-z0-9]+/).includes(be)&&(ro+=20),Te.keywords&&Te.keywords.length){let lr=Te.keywords.map(Eo=>Eo.toLowerCase()).filter(Boolean);lr.includes(be)?ro+=35:lr.some(Eo=>Eo.includes(be))&&(ro+=15)}if((Te.description?.toLowerCase()??"").includes(be)&&(ro+=10),Te.tags&&Te.tags.length){let lr=Te.tags.map(Eo=>Eo.toLowerCase());lr.includes(be)?ro+=25:lr.some(Eo=>Eo.includes(be))&&(ro+=10)}ro===0&&(ro=5),ro+=o2(Te.categoryId),ft&&(ro+=50);let hi=K7(Te.id);return hi>=0&&(ro+=Math.max(0,30-hi*4)),ro};if(be){let Te=ce?X7(ce.id):pe,ft=0,Qo=new Map;for(let ro of Te){let Bn=m.has(ro.id);if(!Bn&&ro.hiddenInSearch||!ae(ro)||!J7(ro.id).includes(be))continue;let hi=Qe(ro,Bn),lr=ro.searchGroup??ro.id,Eo=Qo.get(lr);(!Eo||hi>Eo.score||hi===Eo.score&&ft<Eo.order)&&Qo.set(lr,{entry:ro,score:hi,order:ft}),ft+=1}return Array.from(Qo.values()).sort((ro,Bn)=>Bn.score!==ro.score?Bn.score-ro.score:ro.order-Bn.order).map(ro=>ro.entry)}let lt=Te=>[...Te].sort((ft,Qo)=>{let ro=m.has(ft.id)?1:0,Bn=m.has(Qo.id)?1:0;if(ro!==Bn)return Bn-ro;let kr=ft.danger?1:0,hi=Qo.danger?1:0;return kr!==hi?kr-hi:ft.label.localeCompare(Qo.label)}),we=[];return ce&&Ne.length===0?we=iQ(ce.id):!ce&&Ne.length===0&&(we=iQ(qs)),ge&&(we=we.filter(Te=>ge.has(Te.id))),lt(we)},[Ce,ce,Ne,m,u,pe,ae,ge]),Ve=rt(()=>{if(ye){let we=new Map,Te=[];for(let Qo of It){let ro=W7(Qo.categoryId);we.has(ro)||(we.set(ro,[]),Te.push(ro)),we.get(ro).push({type:"command",command:Qo,pinned:m.has(Qo.id)})}let ft=[];for(let Qo of Te){let ro=we.get(Qo);!ro||ro.length===0||(ft.push({type:"section",label:Qo}),ft.push(...ro))}return ft}let be=Xe.map(we=>({type:"command",command:we,pinned:!0})),Qe=Ne.map(we=>({type:"category",category:we})),lt=It.filter(we=>!m.has(we.id)).map(we=>({type:"command",command:we,pinned:m.has(we.id)}));return[...be,...Qe,...lt]},[Ne,It,Xe,m,ye,I]),_t=gn(be=>{switch(be.type){case"category":return`category:${be.category.id}`;case"section":return`section:${be.label}`;case"command":return`command:${be.command.id}`;default:return"unknown"}},[]);se(()=>{if(Ve.length===0){s!==-1&&a(-1),l!==null&&c(null);return}if(l){let be=Ve.findIndex(Qe=>F(Qe)&&_t(Qe)===l);if(be!==-1){be!==s&&a(be);return}s!==-1&&a(-1),c(null);return}(s>=Ve.length||s>=0&&!F(Ve[s]))&&s!==-1&&a(-1),l!==null&&c(null)},[Ve,l,s,_t]),se(()=>{if(Ce.length>0){let be=J(Ve);be!==s&&a(be);let Qe=be>=0?_t(Ve[be]):null;Qe!==l&&c(Qe)}},[Ce,Ve,s,l,_t]),se(()=>{if(s<0)return;let be=O.current[s];be&&be.scrollIntoView({block:"nearest"})},[s,Ve]);let Wt=be=>{i(Qe=>[...Qe,be]),a(-1),c(null)},po=()=>{i(be=>be.slice(0,-1)),a(-1),c(null)},no=async be=>{li(),await eM(be)},mo=async be=>{!be||be.type==="section"||(be.type==="category"?Wt(be.category):await no(be.command))};O.current=O.current.slice(0,Ve.length);let Sn=n.map(be=>be.label).join(" / "),Br=!ye&&n.length>0;return r(Pe,{...e,className:yn("root",C,y&&"root-visible"),size:"small"},r("div",{className:yn("container"),onKeyDown:async be=>{if(I&&N&&be.altKey&&!be.ctrlKey&&!be.metaKey){let Qe=-1;if(be.code?.startsWith("Digit")?Qe=Number(be.code.slice(5)):/^[0-9]$/.test(be.key)&&(Qe=Number(be.key)),Qe>=1&&Qe<=K.length){be.preventDefault();let lt=K[Qe-1];lt&&Ae(lt.id);return}if(Qe===0){be.preventDefault(),E(lt=>lt.length?[]:lt);return}}if(be.key==="ArrowDown"&&Ve.length>0){be.preventDefault();let Qe=G(s,1,Ve);if(Qe!==-1){Qe!==s&&a(Qe);let lt=_t(Ve[Qe]);lt!==l&&c(lt)}return}if(be.key==="ArrowUp"&&Ve.length>0){be.preventDefault();let Qe=G(s,-1,Ve);if(Qe!==-1){Qe!==s&&a(Qe);let lt=_t(Ve[Qe]);lt!==l&&c(lt)}return}if(be.key==="ArrowLeft"&&n.length>0){be.preventDefault(),po();return}if(be.key==="ArrowRight"){let Qe=Ve[s];F(Qe)&&(be.preventDefault(),await mo(Qe));return}if(be.key==="Enter"){let Qe=It[0]?{type:"command",command:It[0],pinned:m.has(It[0].id)}:void 0,lt=Ve[s]??Qe;lt&&F(lt)&&(be.preventDefault(),await mo(lt))}}},r("div",{className:yn("header")},r("div",{className:yn("header-top")},r("span",{className:yn("title")},"Command Palette"),Br&&r("div",{className:yn("header-trail"),onMouseDown:be=>be.preventDefault()},r("button",{className:yn("back"),onClick:po,type:"button"},"\u2039"),r("span",{className:yn("header-trail-path")},Sn))),r("div",{className:yn("search"),onMouseDown:be=>{be.preventDefault(),be.currentTarget.querySelector("input")?.focus({preventScroll:!0})}},r("span",{className:yn("prompt")},"\u203A"),r(qe,{autoFocus:!0,value:t,onChange:be=>o(be),placeholder:"Type a command"}))),I&&N&&te.length>0&&r("div",{className:yn("tag-filter-wrapper"),onMouseDown:be=>be.preventDefault()},r("div",{className:yn("tag-filter")},te.map(be=>{let Qe=le.has(be.id),lt=K.findIndex(ro=>ro.id===be.id),we=Bg(be.label??be.id),Te=Lwe(we||be.id),ft=Cst(we||be.id),Qo=ri?"\u2325":"Alt";return r("button",{key:be.id,className:yn("tag-button",{active:Qe}),onClick:()=>Ae(be.id),type:"button",style:Te},Qe&&r("span",{className:yn("tag-indicator"),"aria-hidden":"true",style:ft}),r("span",{className:yn("tag-label")},be.label),r("span",{className:yn("tag-count")},be.count),lt!==-1&&r("span",{className:yn("tag-hotkey")},`${Qo}+${lt+1}`))})),he.length>0&&r("div",{className:yn("tag-status")},"Filtering by ",he.join(", "))),r("div",{className:yn("list"),ref:_},Ve.length===0&&r("div",{className:yn("empty")},"No commands found"),Ve.map((be,Qe)=>{let lt=Qe===s;if(be.type==="section")return O.current[Qe]=null,r("div",{key:`section-${Qe}`,className:yn("section")},be.label);if(be.type==="category")return r("button",{key:`category-${be.category.id}`,className:yn("item","category",{selected:lt}),onClick:()=>Wt(be.category),type:"button",ref:kr=>{O.current[Qe]=kr}},r("div",{className:yn("item-content")},r("div",{className:yn("text")},r("div",{className:yn("label")},be.category.label),be.category.description&&r("div",{className:yn("description")},be.category.description)),r("span",{className:yn("category-indicator")},"\u203A")));let{command:we,pinned:Te}=be,Qo=ky(we.categoryId).filter(kr=>kr.id!==qs).map(kr=>kr.label).join(" / "),ro=[];we.shortcut&&ro.push(we.shortcut),Te&&ro.push("Pinned"),Qo&&ro.push(Qo);let Bn=ro.join(" \xB7 ");return r("button",{key:we.id,className:yn("item",{selected:lt,danger:we.danger,pinned:Te}),onClick:async()=>{await no(we)},type:"button",ref:kr=>{O.current[Qe]=kr}},r("div",{className:yn("item-content")},r("div",{className:yn("text")},r("div",{className:yn("label",we.danger&&"label-danger")},we.label),we.description&&r("div",{className:yn("description")},we.description),Bn&&r("div",{className:yn("meta")},Bn),I&&we.tags&&we.tags.length>0&&r("div",{className:yn("tags")},we.tags.map(kr=>{let hi=Bg(kr)||kr,lr=Lwe(hi);return r("span",{key:kr,className:yn("tag-chip"),style:lr},kr)}))),r("span",{className:yn("pin",Te&&"pin-active"),onClick:async kr=>{kr.stopPropagation(),await sQ(we.id);let hi=_t(be);hi!==l&&c(hi)},role:"button","aria-label":Te?"Unpin command":"Pin command",title:Te?"Unpin command":"Pin command"},Te?"\u2605":"\u2606")))}))))}function Fwe(){Ee(e=>r(Tst,{modalProps:e}))}var yn,Est,Ast,Uwe=x(()=>{"use strict";d();lQ();H();nt();at();B();j4();q4();yn=de("vc-command-palette-"),Est={dot:"rgba(var(--brand-experiment-500-rgb, 88 101 242) / 100%)",glow:"rgba(var(--brand-experiment-500-rgb, 88 101 242) / 35%)"},Ast={danger:{dot:"var(--status-danger-background, #ed4245)",glow:"rgba(237, 66, 69, 0.4)"},warning:{dot:"var(--status-warning-background, #faa61a)",glow:"rgba(250, 166, 26, 0.4)"},custom:{dot:"rgba(186, 104, 200, 1)",glow:"rgba(186, 104, 200, 0.35)"},core:{dot:"rgba(78, 201, 176, 1)",glow:"rgba(78, 201, 176, 0.35)"},navigation:{dot:"rgba(59, 130, 246, 1)",glow:"rgba(59, 130, 246, 0.35)"},utility:{dot:"rgba(255, 140, 0, 1)",glow:"rgba(255, 140, 0, 0.35)"},developer:{dot:"rgba(147, 112, 219, 1)",glow:"rgba(147, 112, 219, 0.35)"},customization:{dot:"rgba(244, 114, 182, 1)",glow:"rgba(244, 114, 182, 0.35)"},plugins:{dot:"rgba(56, 189, 248, 1)",glow:"rgba(56, 189, 248, 0.35)"},session:{dot:"rgba(0, 200, 255, 1)",glow:"rgba(0, 200, 255, 0.35)"},context:{dot:"rgba(0, 168, 120, 1)",glow:"rgba(0, 168, 120, 0.35)"}}});function Dst(e){let t=navigator.platform.toUpperCase().includes("MAC"),o=Array.isArray(e)?e.join("+").toUpperCase():e;return t?o.replace(/CONTROL/g,"^").replace(/CTRL/g,"\u2318").replace(/META/g,"\u2318"):o}function Mst(){let[e,t]=L(!1),[o,n]=L(null),i=Hu.use(["hotkey"]).hotkey;se(()=>{if(!e)return;let a=c=>{if(c.preventDefault(),c.stopPropagation(),["Control","Shift","Alt","Meta"].includes(c.key))return;let u=[];c.metaKey&&u.push("META"),c.ctrlKey&&u.push(ri?"CONTROL":"CTRL"),c.shiftKey&&u.push("SHIFT"),c.altKey&&u.push("ALT");let p=c.key.toUpperCase();p===" "&&(p="SPACE"),p==="ESCAPE"&&(p="ESC"),u.push(p),Hu.store.hotkey=u.map(m=>m.toLowerCase()),n(null),t(!1)},l=()=>{t(!1)};return document.addEventListener("keydown",a,!0),window.addEventListener("blur",l),()=>{document.removeEventListener("keydown",a,!0),window.removeEventListener("blur",l)}},[e]);let s=()=>{Hu.store.hotkey=mQ,n(null)};return r("div",{className:"vc-command-palette-keybind-input"},r("div",{className:"vc-command-palette-keybind-info"},r(Y,{size:"md",weight:"semibold"},"Command Palette Hotkey"),r(Y,{size:"sm",weight:"normal",style:{color:"var(--text-muted)"}},"Hotkey used to open the command palette"),o&&r(Y,{size:"xs",weight:"normal",className:"vc-command-palette-keybind-conflict"},o)),r("div",{className:"vc-command-palette-keybind-controls"},r(Me,{type:"button",variant:"secondary",className:`vc-command-palette-keybind-button ${e?"listening":""}`,onClick:()=>t(!0)},e?r(Y,{size:"sm",weight:"normal",style:{color:"var(--white)",opacity:.8}},"Press any key..."):Dst(i)),r(Me,{size:"small",variant:"secondary",onClick:s},"Reset")))}function $we(){let e=Hu.store.hotkey;return Array.isArray(e)&&e.length>0?e:typeof e=="string"&&e.trim()?e.split("+").map(t=>t.trim()).filter(Boolean):mQ}function Nst(e){let t=$we().map(i=>i.toLowerCase()),o=e.key.toLowerCase(),n=!1;for(let i of t)switch(i){case"control":case"ctrl":if(!(e.ctrlKey||ri&&e.metaKey))return!1;continue;case"meta":case"cmd":case"command":if(!e.metaKey)return!1;continue;case"shift":if(!e.shiftKey)return!1;continue;case"alt":case"option":if(!e.altKey)return!1;continue;default:if(o!==i)return!1;n=!0}return n||t.every(i=>["control","ctrl","meta","cmd","command","shift","alt","option"].includes(i))}function Bst(e){if(!(e instanceof HTMLElement))return!1;if(e.isContentEditable)return!0;let t=e.tagName;return t==="INPUT"||t==="TEXTAREA"||t==="SELECT"}function Pst(){return $we().some(t=>{let o=t.toLowerCase();return o==="control"||o==="ctrl"||o==="meta"||o==="cmd"||o==="command"||o==="alt"||o==="option"})}var mQ,Ist,nM,Hu,s2,j4=x(()=>{"use strict";d();Q();Et();Co();H();$();B();q4();Rwe();Uwe();mQ=ri?["Meta","Shift","P"]:["Control","Shift","P"],Ist=!1,nM=!1;Hu=R({hotkey:{description:"Hotkey used to open the command palette",type:6,default:mQ,component:Mst},visualStyle:{description:"Palette appearance",type:4,options:[{label:"Classic",value:"classic",default:!0},{label:"Polished",value:"polished"}]},showTags:{description:"Display tag chips for commands",type:3,default:!0},enableTagFilter:{description:"Show the tag filter bar",type:3,default:!0},customCommands:{description:"Manage custom command palette entries",type:6,component:_we}});s2=k({name:"CommandPalette",description:"Quickly run actions through a searchable command palette",authors:[j.justjxke,j.Ethan],settings:Hu,patches:[{find:'"sticker")',replacement:{match:/("div",\{.{0,15}children:)(.+?)\}/,replace:"$1$self.wrapChatBarChildren($2)}"}}],start(){Bwe(),window.addEventListener("keydown",this.handleKeydown)},stop(){window.removeEventListener("keydown",this.handleKeydown),nM=!1,vwe()},handleKeydown(e){Ist||Nst(e)&&(Bst(e.target)&&!Pst()||(e.preventDefault(),!nM&&(nM=!0,requestAnimationFrame(()=>{nM=!1,Fwe()}))))},wrapChatBarChildren:awe})});var Hwe=x(()=>{});function _st(e,t){if(t==="")return!1;try{return e.match(new RegExp(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")))}catch{return!1}}function Rst({child:e}){let[t,o]=L(!1),{onClick:n}=Gwe.store,i=n?fQ("container"):"";return t?e:r("div",{className:i,onClick:()=>n&&o(!0),onMouseEnter:s=>{n||(s.currentTarget.className=fQ("enter"))},onMouseLeave:s=>{n||(s.currentTarget.className=fQ("leave"))}},e)}function Lst({index:e,forceUpdate:t}){let[o,n]=L(ic[e]);o!==ic[e]&&n(ic[e]);let i=e===ic.length-1;return r(Be,{flexDirection:"row"},r("div",{style:{flexGrow:1}},r(qe,{placeholder:"Word",spellCheck:!1,value:o,onChange:l=>{ic[e]=l,n(l),Oe.set(zwe,ic),i&&(ic.push(""),t())}})),r(U,{onClick:()=>{ic.length!==1&&(ic=ic.slice(0,e).concat(ic.slice(e+1)),t())},look:U.Looks.FILLED,size:U.Sizes.SMALL,style:{padding:0,color:"var(--primary-400)",transition:"color 0.2s ease-in-out",opacity:i?"0%":"100%"}},r($i,null)))}function Ost(){let e=Vo(),t=ic.map((o,n)=>r(Lst,{key:n,index:n,forceUpdate:e}));return r(f,null,r(Vn,null,"Flagged Words"),t)}var fQ,zwe,ic,Gwe,rM,qwe=x(()=>{"use strict";d();Hwe();dr();Q();eo();ut();ao();H();nt();qo();$();B();fQ=de("vc-content-warning-"),zwe="ContentWarning_words",ic=[""];Gwe=R({flagged:{type:6,component:()=>r(Ost,null)},onClick:{type:3,description:"Only show trigger content on click instead of hover",default:!1}}),rM=k({name:"ContentWarning",authors:[j.camila314],description:"Allows you to specify certain trigger words that will be blurred by default. Hovering/Clicking on the blurred content will reveal it.",settings:Gwe,patches:[{find:".VOICE_HANGOUT_INVITE?",replacement:{match:/(compact:\i}=(\i).+?)(\(0,.+\}\)\]\}\))/,replace:"$1 $self.modify(arguments[0].message,$3)"}}],modify(e,t){return ic.some(o=>_st(e.content,o))?r(Rst,{child:t}):t},async start(){ic=await Oe.get(zwe)??[""]}})});function Fst(e){try{let t=gr.getUserProfile(e);if(!t||!t.themeColors||t.themeColors.length<2)return null;let o=t.themeColors[0].toString(16).padStart(6,"0"),n=t.themeColors[1].toString(16).padStart(6,"0");return{primaryColor:o,secondaryColor:n}}catch(t){return console.error("Failed to get profile colors:",t),null}}function Ust(e){let t=Fst(e);if(!t){D.show({type:D.Type.FAILURE,message:"No profile colors found!",id:D.genId()});return}let{primaryColor:o,secondaryColor:n}=t,i=`Primary-color #${o}, Secondary-Color #${n}`;try{Oo(i),D.show({type:D.Type.SUCCESS,message:"Profile colors copied to clipboard!",id:D.genId()})}catch(s){console.error("Failed to copy to clipboard:",s),D.show({type:D.Type.FAILURE,message:"Error copying profile colors!",id:D.genId()})}}function $st(){return r("svg",{viewBox:"0 0 24 24",width:"20",height:"20",xmlns:"http://www.w3.org/2000/svg"},r("path",{fill:"currentColor",d:"M17,4H15.82A3,3,0,0,0,13,2H11A3,3,0,0,0,8.18,4H7A3,3,0,0,0,4,7V19a3,3,0,0,0,3,3H17a3,3,0,0,0,3-3V7A3,3,0,0,0,17,4ZM10,5a1,1,0,0,1,1-1h2a1,1,0,0,1,1,1V6H10Zm8,14a1,1,0,0,1-1,1H7a1,1,0,0,1-1-1V7A1,1,0,0,1,7,6H8V7A1,1,0,0,0,9,8h6a1,1,0,0,0,1-1V6h1a1,1,0,0,1,1,1Z"}))}var jwe,iM,Wwe=x(()=>{"use strict";d();cs();H();$();B();jwe=(e,{user:t})=>{t&&e.push(r(M.MenuItem,{id:"CopyProfileColors",icon:$st,label:"Copy Profile Colors",action:()=>Ust(t.id)}))},iM=k({name:"CopyProfileColors",description:"A plugin to copy people's profile gradient colors to clipboard.",authors:[j.Crxa,j.Cortex],contextMenus:{"user-context":jwe,"user-profile-actions":jwe}})});var Hst,sM,Kwe=x(()=>{"use strict";d();cs();H();$();fe();B();Hst=vt("null/undefined"),sM=k({name:"CopyStatusUrls",description:"Copy the users status url when you right-click it",authors:[w.sadan],patches:[{find:'?"PRESS_WATCH_ON_CRUNCHYROLL_BUTTON"',replacement:{match:/(?=onClick)(?=.*index:(\i))/,replace:"onContextMenu: $self.makeContextMenu(arguments[0], $1),"}}],makeContextMenu(e,t){return async()=>{try{let{button_urls:o}=await Hst(e.activity,e.user.id);if(!o[t])throw new Error("button_urls does not contain index");Oo(o[t]),D.show({id:D.genId(),message:"Copied URL",type:D.Type.SUCCESS,options:{position:D.Position.TOP}})}catch(o){console.error(o),D.show({id:D.genId(),message:"Error copying URL, check console for more info",type:D.Type.FAILURE,options:{position:D.Position.TOP}})}}}})});var zst,Gst,aM,Ywe=x(()=>{"use strict";d();cs();H();$();B();zst=()=>r("svg",{className:"mentionicon",height:"20",width:"20",viewBox:"0 0 24 24",fill:"currentColor"},r("path",{d:"M12 2C6.486 2 2 6.486 2 12C2 17.515 6.486 22 12 22C14.039 22 15.993 21.398 17.652 20.259L16.521 18.611C15.195 19.519 13.633 20 12 20C7.589 20 4 16.411 4 12C4 7.589 7.589 4 12 4C16.411 4 20 7.589 20 12V12.782C20 14.17 19.402 15 18.4 15L18.398 15.018C18.338 15.005 18.273 15 18.209 15H18C17.437 15 16.6 14.182 16.6 13.631V12C16.6 9.464 14.537 7.4 12 7.4C9.463 7.4 7.4 9.463 7.4 12C7.4 14.537 9.463 16.6 12 16.6C13.234 16.6 14.35 16.106 15.177 15.313C15.826 16.269 16.93 17 18 17L18.002 16.981C18.064 16.994 18.129 17 18.195 17H18.4C20.552 17 22 15.306 22 12.782V12C20 6.486 17.514 2 12 2ZM12 14.599C10.566 14.599 9.4 13.433 9.4 11.999C9.4 10.565 10.566 9.399 12 9.399C13.434 9.399 14.6 10.565 14.6 11.999C14.6 13.433 13.434 14.599 12 14.599Z"})),Gst=(e,{user:t})=>{t&&e.push(r(M.MenuItem,{id:"vc-copy-user-mention",label:"Copy User Mention",action:()=>Oo(`<@${t.id}>`),icon:zst}))},aM=k({name:"CopyUserMention",authors:[j.Cortex,w.castdrian],description:"Adds a button to copy user's mention on the user context menu, works best with ValidUser.",contextMenus:{"user-context":Gst}})});var Qwe=x(()=>{});function gQ(e){document.getElementById("fathorse")?.remove();let t={right:[[0,0],[1,0],[2,0],[3,0],[4,0],[5,0],[6,0],[7,0],[8,0]],downright:[[0,1],[1,1],[2,1],[3,1],[4,1],[5,1],[6,1],[7,1],[8,1]],down:[[0,2],[1,2],[2,2],[3,2],[4,2],[5,2],[6,2],[7,2],[8,2]],downleft:[[0,3],[1,3],[2,3],[3,3],[4,3],[5,3],[6,3],[7,3],[8,3]],left:[[0,4],[1,4],[2,4],[3,4],[4,4],[5,4],[6,4],[7,4],[8,4]],upleft:[[0,5],[1,5],[2,5],[3,5],[4,5],[5,5],[6,5],[7,5],[8,5]],up:[[0,6],[1,6],[2,6],[3,6],[4,6],[5,6],[6,6],[7,6],[8,6]],upright:[[0,7],[1,7],[2,7],[3,7],[4,7],[5,7],[6,7],[7,7],[8,7]]},o=9,n=8,i={speed:e.speed??30,framerate:e.fps??24,size:e.size??120,fade:e.fade??!0,freeroam:e.freeroam??!0,shake:e.shake||window._horseShake,image:e.image},s={x:i.size/2,y:i.size/2},a={x:s.x,y:s.y},l=1e3/i.framerate,c=9e3,u=3e3,p=12,m=document.createElement("div"),g,y=0;function b(){if(m.parentElement){if(g||(g=Date.now()),Date.now()-g>=l&&N(),i.shake)if(y>=Date.now()){let _=Math.floor(Math.random()*4-2),O=Math.floor(Math.random()*4-2);document.body.style.transform=`translate3d(${_}px, ${O}px, 0)`}else document.body.style.transform="";requestAnimationFrame(b)}}function v(){y=Date.now()+20}let E=0;function A(_,O){let F=t[_],J=F[0];O&&(J=F[Math.floor(E)%F.length]),m.style.backgroundPosition=`-${J[0]*i.size}px -${J[1]*i.size}px`,m.style.left=`${s.x-i.size/2}px`,m.style.top=`${s.y-i.size/2}px`}let C=1/0,I=!1;function N(){if(g=Date.now(),i.freeroam&&C<Date.now()){let K=Math.random()*Math.PI*2,oe=Math.min(window.innerWidth,window.innerHeight)/i.size*50;a.x=Math.abs((a.x+Math.sin(K)*oe)%window.innerWidth),a.y=Math.abs((a.y+Math.cos(K)*oe)%window.innerHeight),I=!0}let _=a.x-s.x,O=a.y-s.y,F=Math.sqrt(_**2+O**2),J=[O/F<-.5?"up":"",O/F>.5?"down":"",_/F<-.5?"left":"",_/F>.5?"right":""].join("")||"down",G=I?Math.min(i.speed,p):i.speed;if(F>=Math.max(G,i.size*.7)){E++,I&&(C=Date.now()+u);let K=Math.sqrt(window.innerWidth**2+window.innerHeight**2);(F/K>.5||E%2===1)&&(s.x+=_/F*G,s.y+=O/F*G,I||v());let le=i.size/2;s.x=Math.min(Math.max(le,s.x),window.innerWidth-le),s.y=Math.min(Math.max(le,s.y),window.innerHeight-le),A(J,!0)}else E=0,A(J);let te=i.size*.6;I?m.style.opacity="80%":i.fade&&F<=te?m.style.opacity=`${15+F/te*85}%`:m.style.opacity=""}return m.id="fathorse",m.ariaHidden=!0,m.style.width=`${i.size}px`,m.style.height=`${i.size}px`,m.style.left=`${s.x-i.size/2}px`,m.style.top=`${s.y-i.size/2}px`,m.style.position="fixed",m.style.pointerEvents="none",m.style.imageRendering="pixelated",m.style.zIndex=2147483647,m.style.backgroundImage=`url(${JSON.stringify(i.image)})`,m.style.backgroundSize=`${o*i.size}px ${n*i.size}px`,m.style.willChange="left, top, background-position",m.style.transition="opacity 0.1s linear",document.body.appendChild(m),i.shake&&(document.body.style.willChange="transform"),window.addEventListener("mousemove",_=>{a.x=_.clientX,a.y=_.clientY,C=Date.now()+c,I=!1}),requestAnimationFrame(b),a}var Zwe=x(()=>{"use strict";d()});function hQ(e={}){let{speed:t=10,fps:o=24,image:n="./oneko.gif",persistPosition:i=!0,furColor:s="#FFFFFF",outlineColor:a="#000000"}=e,l=document.createElement("div"),c=32,u=32,p=0,m=0,g=0,y=0,b=null,v=0,E=t,A={idle:[[-3,-3]],alert:[[-7,-3]],scratchSelf:[[-5,0],[-6,0],[-7,0]],scratchWallN:[[0,0],[0,-1]],scratchWallS:[[-7,-1],[-6,-2]],scratchWallE:[[-2,-2],[-2,-3]],scratchWallW:[[-4,0],[-4,-1]],tired:[[-3,-2]],sleeping:[[-2,0],[-2,-1]],N:[[-1,-2],[-1,-3]],NE:[[0,-2],[0,-3]],E:[[-3,0],[-3,-1]],SE:[[-5,-1],[-5,-2]],S:[[-6,-3],[-7,-2]],SW:[[-5,-3],[-6,-1]],W:[[-4,-2],[-4,-3]],NW:[[-1,0],[-1,-1]]};function C(K,oe,le){return new Promise((he,Ae)=>{let Ce=new Image;Ce.crossOrigin="anonymous",Ce.onload=()=>{let ye=document.createElement("canvas");ye.width=Ce.width,ye.height=Ce.height;let ce=ye.getContext("2d");ce.drawImage(Ce,0,0);let pe=ce.getImageData(0,0,ye.width,ye.height),xe=pe.data,Ze=I(oe),ge=I(le);for(let ae=0;ae<xe.length;ae+=4){let Ne=xe[ae],Fe=xe[ae+1],Xe=xe[ae+2],It=xe[ae+3];Ne===255&&Fe===255&&Xe===255?(xe[ae]=Ze.r,xe[ae+1]=Ze.g,xe[ae+2]=Ze.b):Ne===0&&Fe===0&&Xe===0&&(xe[ae]=ge.r,xe[ae+1]=ge.g,xe[ae+2]=ge.b)}ce.putImageData(pe,0,0),he(ye.toDataURL())},Ce.onerror=Ae,Ce.src=K})}function I(K){let oe=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(K);return oe?{r:parseInt(oe[1],16),g:parseInt(oe[2],16),b:parseInt(oe[3],16)}:{r:0,g:0,b:0}}function N(){let K=n;if(i){let oe=JSON.parse(window.localStorage.getItem("oneko"));oe!==null&&(c=oe.nekoPosX,u=oe.nekoPosY,p=oe.mousePosX,m=oe.mousePosY,g=oe.frameCount,y=oe.idleTime,b=oe.idleAnimation,v=oe.idleAnimationFrame,l.style.backgroundPosition=oe.bgPos)}l.id="oneko",l.ariaHidden=!0,l.style.width="32px",l.style.height="32px",l.style.position="fixed",l.style.pointerEvents="none",l.style.imageRendering="pixelated",l.style.left=`${c-16}px`,l.style.top=`${u-16}px`,l.style.zIndex=2147483647,C(K,s,a).then(oe=>{l.style.backgroundImage=`url(${oe})`}).catch(oe=>{console.error("Failed to recolor Oneko image:",oe),l.style.backgroundImage=`url(${K})`}),document.body.appendChild(l),document.addEventListener("mousemove",function(oe){p=oe.clientX,m=oe.clientY}),i&&window.addEventListener("beforeunload",function(oe){window.localStorage.setItem("oneko",JSON.stringify({nekoPosX:c,nekoPosY:u,mousePosX:p,mousePosY:m,frameCount:g,idleTime:y,idleAnimation:b,idleAnimationFrame:v,bgPos:l.style.backgroundPosition}))}),window.requestAnimationFrame(O)}let _;function O(K){l.isConnected&&(_||(_=K),K-_>1e3/o&&(_=K,te()),window.requestAnimationFrame(O))}function F(K,oe){let le=A[K][oe%A[K].length];l.style.backgroundPosition=`${le[0]*32}px ${le[1]*32}px`}function J(){b=null,v=0}function G(){if(y+=1,y>10&&Math.floor(Math.random()*200)==0&&b==null){let K=["sleeping","scratchSelf"];c<32&&K.push("scratchWallW"),u<32&&K.push("scratchWallN"),c>window.innerWidth-32&&K.push("scratchWallE"),u>window.innerHeight-32&&K.push("scratchWallS"),b=K[Math.floor(Math.random()*K.length)]}switch(b){case"sleeping":if(v<8){F("tired",0);break}F("sleeping",Math.floor(v/4)),v>192&&J();break;case"scratchWallN":case"scratchWallS":case"scratchWallE":case"scratchWallW":case"scratchSelf":F(b,v),v>9&&J();break;default:F("idle",0);return}v+=1}function te(){g+=1;let K=c-p,oe=u-m,le=Math.sqrt(K**2+oe**2);if(le<E||le<48){G();return}if(b=null,v=0,y>1){F("alert",0),y=Math.min(y,7),y-=1;return}let he;he=oe/le>.5?"N":"",he+=oe/le<-.5?"S":"",he+=K/le>.5?"W":"",he+=K/le<-.5?"E":"",F(he,g),c-=K/le*E,u-=oe/le*E,c=Math.min(Math.max(16,c),window.innerWidth-16),u=Math.min(Math.max(16,u),window.innerHeight-16),l.style.left=`${c-16}px`,l.style.top=`${u-16}px`}N()}var Xwe=x(()=>{"use strict";d()});function Wst(){let{furColor:e,outlineColor:t}=wl.use(["furColor","outlineColor"]),o=a=>{if(!a||typeof a!="string")return null;let l=a.replace(/^#/,"");if(l.length!==6)return null;let c=parseInt(l,16);return isNaN(c)?null:c},n=a=>a===null?"#FFFFFF":"#"+a.toString(16).padStart(6,"0").toUpperCase(),i=a=>{let l=n(a);wl.store.furColor=l,Gu()},s=a=>{let l=n(a);wl.store.outlineColor=l,Gu()};return r("div",null,r("div",{className:xQ("color-modal")},r("div",null,r(re,{className:"form-subtitle"},"Fur Color"),r("div",{className:xQ("color")},r(si,{color:o(e)??16777215,onChange:i,showEyeDropper:!0}))),r("div",null,r(re,{className:"form-subtitle"},"Outline Color"),r("div",{className:xQ("color")},r(si,{color:o(t)??0,onChange:s,showEyeDropper:!0})))))}function Jwe(){document.getElementById("oneko")?.remove(),document.getElementById("fathorse")?.remove()}function Gu(){if(yt("CursorBuddy"))switch(Jwe(),wl.store.buddy){case"oneko":{hQ({speed:wl.store.speed,fps:wl.store.fps,image:qst,persistPosition:!1,furColor:wl.store.furColor,outlineColor:wl.store.outlineColor});break}case"fathorse":gQ({speed:wl.store.speed,fps:wl.store.fps,size:wl.store.size,fade:wl.store.fade,freeroam:wl.store.freeroam,shake:wl.store.shake,image:jst})}}var qst,jst,xQ,wl,lM,Vwe=x(()=>{"use strict";d();Qwe();Wo();Q();Ar();ut();H();nt();$();B();Zwe();Xwe();qst="https://raw.githubusercontent.com/adryd325/oneko.js/5281d057c4ea9bd4f6f997ee96ba30491aed16c0/oneko.gif",jst="https://raw.githubusercontent.com/nexpid/fatass-horse/08bc4042750d5f995c55327f7b6c6710158f5263/sheet.png",xQ=de("vc-cursor-buddy-");wl=R({buddy:{description:"Pick a cursor buddy",type:4,options:[{label:"Oneko",value:"oneko",default:!0},{label:"Fatass Horse",value:"fathorse"}],onChange:Gu},speed:{description:"Speed of your buddy",type:1,default:10,isValid:e=>e>=0||"Speed must be bigger than 0",onChange:Gu},fps:{description:"Framerate of your buddy",type:1,default:24,isValid:e=>e>0||"Framerate must be bigger than 0",onChange:Gu},onekoSection:{type:6,component:()=>r("div",null,r(re,{style:{fontSize:"1.6em",marginTop:"10px"}},"Oneko"),r(Bt,{style:{marginBottom:"-10px"}}))},onekoColorSettings:{type:6,component:Wst},furColor:{description:"Fur hex color for Oneko",type:0,default:"#FFFFFF",onChange:Gu,hidden:!0},outlineColor:{description:"Outline hex color for Oneko",type:0,default:"#000000",onChange:Gu,hidden:!0},fathorseSection:{type:6,component:()=>r("div",null,r(re,{style:{fontSize:"1.6em",marginTop:"10px"}},"Fatass Horse"),r(Bt,{style:{marginBottom:"-10px"}}))},size:{description:"Size of the fatass horse",type:1,default:120,isValid:e=>e>0||"Size must be bigger than 0",onChange:Gu},fade:{description:"If the horse should fade when the cursor is near",type:3,default:!0,onChange:Gu},freeroam:{description:"If the horse should roam freely when idle",type:3,default:!0,onChange:Gu},shake:{description:"If the horse should shake the window when it's walking",type:3,default:!1,onChange:Gu}},{furColor:{disabled(){return this.store.buddy!=="oneko"}},outlineColor:{disabled(){return this.store.buddy!=="oneko"}},size:{disabled(){return this.store.buddy!=="fathorse"}},fade:{disabled(){return this.store.buddy!=="fathorse"}},freeroam:{disabled(){return this.store.buddy!=="fathorse"}},shake:{disabled(){return this.store.buddy!=="fathorse"}}});jn("CursorBuddy","Oneko","oneko");lM=k({name:"CursorBuddy",description:"only a slightly annoying plugin",authors:[w.Ven,w.adryd,j.nexpid,j.ZcraftElite],tags:["Oneko","FatassHorse","Pet"],settings:wl,isModified:!0,start:Gu,stop:Jwe})});var qu,cM=x(()=>{"use strict";d();Q();$();qu=R({solidIcon:{type:3,default:!1,description:"Use a solid background on the background of the image"},folderIcons:{type:6,hidden:!0,description:"folder icon settings",component:()=>r(f,null)}})});async function e8e(e,t){qu.store.folderIcons||(qu.store.folderIcons={});let o=qu.store.folderIcons;o[e.folderId]=t}function uM(e,t=1){let o=e&255,n=(e&65280)>>>8;return`rgba(${[(e&16711680)>>>16,n,o].join(",")},${t})`}var yQ=x(()=>{"use strict";d();cM()});function Kst(e){let[t,o]=L((qu.store.folderIcons??{})[e.folderId]?.url??""),[n,i]=L(100);return r(f,null,r(qe,{defaultValue:t,onChange:(s,a)=>{o(s)},placeholder:"https://example.com/image.png"}),r(Yst,{folderProps:e,url:t,size:n}),t&&r(f,null,r("div",{style:{color:"#FFF"}},"Change the size of the folder icon"),r(Tr,{initialValue:100,onValueChange:s=>{i(s)},maxValue:200,minValue:25,markers:Array.apply(0,Array(176)).map((s,a)=>a+25),stickToMarkers:!0,keyboardStep:1,renderMarker:()=>null})),r(U,{onClick:()=>{e8e(e,{url:t,size:n}),vo("custom-folder-icon")}},"Save"),r("hr",null),r(U,{onClick:()=>{let s=qu.store.folderIcons;s[e.folderId]&&(s[e.folderId]=null),vo("custom-folder-icon")}},"Unset"),r("hr",null))}function Yst({folderProps:e,url:t,size:o}){return t?r("div",{className:"test1234",style:{width:"20vh",height:"20vh",overflow:"hidden",borderRadius:"33%",backgroundColor:uM(e.folderColor,.4),display:"flex",justifyContent:"center",alignItems:"center"}},r("img",{alt:"",src:t,width:`${o}%`,height:`${o}%`})):null}function t8e(e){return r(M.MenuItem,{id:"custom-folder-icons",key:"custom-folder-icons",label:"Change Icon",action:()=>{Om(async()=>t=>r(Pe,{...t},r(je,null,r("div",{style:{color:"white"}},"Set a New Icon.")),r($e,null,r(Kst,{folderId:e.folderId,folderColor:e.folderColor})),r("div",{style:{color:"white",margin:"2.5%",marginTop:"1%"}},"You might have to hover the folder after setting in order for it to refresh.")),{modalKey:"custom-folder-icon"})}})}var o8e=x(()=>{"use strict";d();at();B();cM();yQ()});var dM,n8e=x(()=>{"use strict";d();H();$();o8e();cM();yQ();dM=k({name:"CustomFolderIcons",description:"Customize folder icons with any png",authors:[j.sadan],settings:qu,patches:[{find:"#{intl::GUILD_FOLDER_TOOLTIP_A11Y_LABEL}",replacement:{match:/(\(0,\i\.jsx\)\(\i,\{folderNode:(\i),hovered:\i,sorting:\i\}\))/,replace:"($self.shouldReplace({folderNode:$2})?$self.replace({folderNode:$2}):$1)"}}],contextMenus:{"guild-context":(e,t)=>{"folderId"in t&&e.push(t8e(t))}},shouldReplace(e){return!!qu.store.folderIcons?.[e.folderNode.id]?.url},replace(e){let t=qu.store.folderIcons;if(t&&t[e.folderNode.id]){let o=t[e.folderNode.id];return r("div",{style:{backgroundColor:uM(e.folderNode.color,+qu.store.solidIcon||.4),display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%"}},r("img",{alt:"",src:o.url,width:`${o.size??100}%`,height:`${o.size??100}%`}))}}})});var r8e=x(()=>{});async function i8e(e){let t=crypto.randomUUID(),o=await e.arrayBuffer(),n=await s8e(o,e.type,e.name),i=await zt(W4)??{};return i[t]={id:t,name:e.name,buffer:o,type:e.type,dataUri:n},await Gt(W4,i),t}async function Pf(){return await zt(W4)??{}}async function s8e(e,t,o){try{let n=t||"audio/mpeg";if((!n||n==="application/octet-stream")&&o)switch(o.split(".").pop()?.toLowerCase()){case"ogg":n="audio/ogg";break;case"mp3":n="audio/mpeg";break;case"wav":n="audio/wav";break;case"m4a":case"mp4":n="audio/mp4";break;case"flac":n="audio/flac";break;case"aac":n="audio/aac";break;case"webm":n="audio/webm";break;case"wma":n="audio/x-ms-wma";break;default:n="audio/mpeg"}let i=new Uint8Array(e),s=new Blob([i],{type:n});return new Promise((a,l)=>{let c=new FileReader;c.onloadend=()=>a(c.result),c.onerror=l,c.readAsDataURL(s)})}catch(n){console.error("[CustomSounds] Error generating data URI:",n);let i=new Uint8Array(e),s="",a=8192;for(let c=0;c<i.length;c+=a){let u=i.slice(c,c+a);s+=String.fromCharCode(...u)}let l=btoa(s);return`data:${t||"audio/mpeg"};base64,${l}`}}async function a8e(e){let o=(await Pf())[e];if(!o)return;if(o.dataUri)return o.dataUri;console.log(`[CustomSounds] No cached data URI for ${e}, generating...`);let n=await s8e(o.buffer,o.type,o.name),i=await Pf();return i[e].dataUri=n,await Gt(W4,i),n}async function l8e(e){let t=await Pf();delete t[e],await Gt(W4,t)}var W4,bQ=x(()=>{"use strict";d();vn();W4="ScattrdCustomSounds"});function c8e({type:e,override:t,onChange:o}){let n=X.useRef(null),i=Vo(),s=X.useRef(null),[a,l]=X.useState({});X.useEffect(()=>{Pf().then(l)},[]);let c=async()=>{await o(),i()},u=async()=>{if(s.current?.stop(),!t.enabled){s.current=_s(e.id);return}let{selectedSound:y}=t;if(y==="custom"&&t.selectedFileId)try{let b=await _g(t.selectedFileId);if(!b||!b.startsWith("data:audio/")){Re("No custom sound file available for preview");return}s.current=_s(b,{volume:t.volume,onError:v=>{console.error("[CustomSounds] Error playing custom audio:",v),Re("Error playing custom sound. File may be corrupted.")}})}catch(b){console.error("[CustomSounds] Error in previewSound:",b),Re("Error playing sound.")}else y==="default"?s.current=_s(e.id):s.current=_s(y)},p=async y=>{let b=y.target.files?.[0];if(!b)return;let v=b.name.split(".").pop()?.toLowerCase();if(!v||!Qst.includes(v)){Re("Invalid file type. Please upload an audio file."),y.target.value="";return}try{Re("Uploading file...");let E=await i8e(b),A=await Pf();l(A),t.selectedFileId=E,t.selectedSound="custom",await _g(E),await c(),Re(`File uploaded successfully: ${b.name}`)}catch(E){console.error("[CustomSounds] Error uploading file:",E),Re(`Error uploading file: ${E}`)}y.target.value=""},m=async y=>{try{await l8e(y);let b=await Pf();l(b),t.selectedFileId===y?(t.selectedFileId=void 0,t.selectedSound="default",await c()):i(),Re("File deleted successfully")}catch(b){console.error("[CustomSounds] Error deleting file:",b),Re("Error deleting file.")}},g=Object.entries(a).filter(([y,b])=>!!y&&!!b?.name).map(([y,b])=>({value:y,label:b.name}));return r(cn,{className:Zst("card")},r(fn,{title:e.name,value:t.enabled||!1,onChange:async y=>{if(console.log(`[CustomSounds] Setting ${e.id} enabled to:`,y),t.enabled=y,y&&t.selectedSound==="custom"&&t.selectedFileId)try{await _g(t.selectedFileId)}catch(b){console.error(`[CustomSounds] Failed to cache data URI for ${e.id}:`,b),Re("Error loading custom sound file")}await c(),console.log("[CustomSounds] After setting enabled, override.enabled =",t.enabled)},className:Z.bottom16,hideBorder:!0}),t.enabled&&r(f,null,r("div",{style:{display:"flex",gap:"8px",marginBottom:"16px"}},r(U,{color:U.Colors.GREEN,onClick:u},"Preview"),r(U,{color:U.Colors.RED,onClick:()=>s.current?.stop()},"Stop")),r(re,null,"Volume"),r(Tr,{markers:uo(0,100,10),initialValue:t.volume,onValueChange:y=>{s.current&&(s.current.volume=y),t.volume=y,c()},className:Z.bottom16,disabled:!t.enabled}),r(re,null,"Sound Source"),r(to,{options:[{value:"default",label:"Default"},...e.seasonal?.map(y=>({value:y,label:Xst(y)}))??[],{value:"custom",label:"Custom"}],isSelected:y=>y===t.selectedSound,select:async y=>{if(t.selectedSound=y,y==="custom"&&t.selectedFileId)try{await _g(t.selectedFileId)}catch(b){console.error(`[CustomSounds] Failed to cache data URI for ${e.id}:`,b),Re("Error loading custom sound file")}await c()},serialize:y=>y.value,className:Z.bottom16}),t.selectedSound==="custom"&&r(f,null,r(re,null,"Custom File"),r(to,{options:[{value:"",label:"Select a file..."},...g],isSelected:y=>y===(t.selectedFileId||""),select:async y=>{y?(t.selectedFileId=y,await _g(y)):t.selectedFileId=void 0,await c()},serialize:y=>y.value,className:Z.bottom8}),r("input",{ref:n,type:"file",accept:".mp3,.wav,.ogg,.m4a,.flac,.aac,.webm,.wma,.mp4",style:{display:"none"},onChange:p}),r("div",{style:{display:"flex",gap:"8px",marginBottom:"16px"}},r(U,{onClick:()=>n.current?.click(),color:U.Colors.BRAND},"Upload New"),t.selectedFileId&&a[t.selectedFileId]&&r(U,{color:U.Colors.RED,onClick:()=>m(t.selectedFileId)},"Delete Selected File")))))}var Qst,Zst,CBo,Xst,u8e=x(()=>{"use strict";d();Ol();fs();Qs();ut();nt();co();qo();$();fe();B();bQ();vQ();Qst=["mp3","wav","ogg","m4a","aac","flac","webm","wma","mp4"],Zst=de("vc-custom-sounds-"),CBo=An(e=>e.prototype?.activateUploadDialogue&&e.prototype.setRef),Xst=e=>e.replace(/_/g," ").replace(/\b\w/g,t=>t.toUpperCase())});function l2(){return{enabled:!1,selectedSound:"default",volume:100,useFile:!1,selectedFileId:void 0}}var a2,SQ,d8e=x(()=>{"use strict";d();a2={halloween_call_calling:"https://canary.discord.com/assets/0950a7ea4f1dd037870b.mp3",winter_call_calling:"https://canary.discord.com/assets/7b945e7be3f86c5b7c82.mp3",halloween_call_ringing:"https://canary.discord.com/assets/1b883b366ae11a303b82.mp3",winter_call_ringing:"https://canary.discord.com/assets/e087eb83aaa4c43a44bc.mp3",call_ringing_beat:"https://canary.discord.com/assets/3b3a2f5f29b9cb656efb.mp3",call_ringing_snow_halation:"https://canary.discord.com/assets/99b1d8a6fe0b95e99827.mp3",call_ringing_snowsgiving:"https://canary.discord.com/assets/54527e70cf0ddaeff76f.mp3",halloween_deafen:"https://canary.discord.com/assets/c4aedda3b528df50221c.mp3",winter_deafen:"https://canary.discord.com/assets/9bb77985afdb60704817.mp3",halloween_disconnect:"https://canary.discord.com/assets/ca7d2e46cb5a16819aff.mp3",winter_disconnect:"https://canary.discord.com/assets/ec5d85405877c27caeda.mp3",halloween_message1:"https://canary.discord.com/assets/e386c839fb98675c6a79.mp3",halloween_mute:"https://canary.discord.com/assets/ee7fdadf4c714eed6254.mp3",winter_mute:"https://canary.discord.com/assets/6d7616e08466ab9f1c6d.mp3",halloween_undeafen:"https://canary.discord.com/assets/045e5b9608df1607e0cf.mp3",winter_undeafen:"https://canary.discord.com/assets/fa8da1499894ecac36c7.mp3",halloween_unmute:"https://canary.discord.com/assets/260c581568eacca03f7e.mp3",winter_unmute:"https://canary.discord.com/assets/9dbfb1c211e3815cd7b1.mp3",halloween_user_join:"https://canary.discord.com/assets/80cf806f45467a5898cd.mp3",winter_user_join:"https://canary.discord.com/assets/badc42c2a9063b4a962c.mp3",halloween_user_leave:"https://canary.discord.com/assets/f407ad88a1dc40541769.mp3",winter_user_leave:"https://canary.discord.com/assets/ec3d9eaea30b33e16da6.mp3"},SQ=[{name:"Activity End",id:"activity_end"},{name:"Activity Launch",id:"activity_launch"},{name:"Activity User Join",id:"activity_user_join"},{name:"Activity User Left",id:"activity_user_left"},{name:"ASMR Message",id:"asmr_message1"},{name:"Bit Message",id:"bit_message1"},{name:"Bop Message",id:"bop_message1"},{name:"Call Calling",id:"call_calling",seasonal:["halloween_call_calling","winter_call_calling"]},{name:"Call Ringing",id:"call_ringing",seasonal:["halloween_call_ringing","winter_call_ringing","call_ringing_beat","call_ringing_snow_halation","call_ringing_snowsgiving"]},{name:"Clip Error",id:"clip_error"},{name:"Clip Save",id:"clip_save"},{name:"DDR Down",id:"ddr-down"},{name:"DDR Left",id:"ddr-left"},{name:"DDR Right",id:"ddr-right"},{name:"DDR Up",id:"ddr-up"},{name:"Deafen",id:"deafen",seasonal:["halloween_deafen","winter_deafen"]},{name:"Discodo",id:"discodo"},{name:"Disconnect",id:"disconnect",seasonal:["halloween_disconnect","winter_disconnect"]},{name:"Ducky Message",id:"ducky_message1"},{name:"Hang Status Select",id:"hang_status_select"},{name:"Highfive Clap",id:"highfive_clap"},{name:"Highfive Whistle",id:"highfive_whistle"},{name:"Human Man",id:"human_man"},{name:"LoFi Message",id:"lofi_message1"},{name:"Mention 1 (@role)",id:"mention1"},{name:"Mention 2 (@everyone)",id:"mention2"},{name:"Mention 3 (@here)",id:"mention3"},{name:"Message 1 (Generic)",id:"message1",seasonal:["halloween_message1"]},{name:"Message 2 (Reply in Server)",id:"message2"},{name:"Message 3 (DMs and Group DMs)",id:"message3"},{name:"Mute",id:"mute",seasonal:["halloween_mute","winter_mute"]},{name:"Overlay Unlock",id:"overlayunlock"},{name:"Poggermode Achievement",id:"poggermode_achievement_unlock"},{name:"Poggermode Applause",id:"poggermode_applause"},{name:"Poggermode Enabled",id:"poggermode_enabled"},{name:"Poggermode Message",id:"poggermode_message_send"},{name:"PTT Start",id:"ptt_start"},{name:"PTT Stop",id:"ptt_stop"},{name:"Reconnect",id:"reconnect"},{name:"Robot Man",id:"robot_man"},{name:"Stage Waiting",id:"stage_waiting"},{name:"Stream Ended",id:"stream_ended"},{name:"Stream Started",id:"stream_started"},{name:"Stream User Joined",id:"stream_user_joined"},{name:"Stream User Left",id:"stream_user_left"},{name:"Success",id:"success"},{name:"Undeafen",id:"undeafen",seasonal:["halloween_undeafen","winter_undeafen"]},{name:"Unmute",id:"unmute",seasonal:["halloween_unmute","winter_unmute"]},{name:"User Join",id:"user_join",seasonal:["halloween_user_join","winter_user_join"]},{name:"User Leave",id:"user_leave",seasonal:["halloween_user_leave","winter_user_leave"]},{name:"User Moved",id:"user_moved"},{name:"Vibing Wumpus",id:"vibing_wumpus"}]});function K4(e){let t=c2.store[e];if(!t)return l2();if(typeof t=="object")return t;try{return JSON.parse(t)}catch{return l2()}}function pM(e,t){c2.store[e]=JSON.stringify(t)}async function _g(e){if(Ay.has(e))return Ay.get(e);try{let t=await a8e(e);if(t)return Ay.set(e,t),console.log(`[CustomSounds] Cached data URI for file ${e}`),t}catch(t){console.error(`[CustomSounds] Error generating data URI for ${e}:`,t)}return null}async function eat(){console.log("[CustomSounds] Preloading data URIs into memory cache...");for(let e of Ey){let t=K4(e.id);if(t?.enabled&&t.selectedSound==="custom"&&t.selectedFileId)try{await _g(t.selectedFileId),console.log(`[CustomSounds] Preloaded data URI for ${e.id}`)}catch(o){console.error(`[CustomSounds] Failed to preload data URI for ${e.id}:`,o)}}console.log(`[CustomSounds] Memory cache contains ${Ay.size} data URIs`)}async function tat(){console.log("[CustomSounds] === DEBUG INFO ===");let e=await zt(Jst);console.log("[CustomSounds] Raw DataStore content:",e);let t=await Pf();console.log(`[CustomSounds] Stored files: ${Object.keys(t).length}`);let o=0,n=0;for(let[a,l]of Object.entries(t)){let c=l.buffer?.byteLength||0,u=l.dataUri?.length||0;o+=c,n+=u,console.log(`[CustomSounds] File ${a}:`,{name:l.name,type:l.type,bufferSize:`${(c/1024).toFixed(1)}KB`,hasValidBuffer:l.buffer instanceof ArrayBuffer,hasDataUri:!!l.dataUri,dataUriSize:`${(u/1024).toFixed(1)}KB`})}console.log(`[CustomSounds] Total storage - Buffers: ${(o/1024).toFixed(1)}KB, DataURIs: ${(n/1024).toFixed(1)}KB`),console.log(`[CustomSounds] Memory cache contains ${Ay.size} data URIs`),console.log("[CustomSounds] Settings store structure:",Object.keys(c2.store)),console.log("[CustomSounds] Sound override status:");let i=0,s=0;for(let[a,l]of Object.entries(c2.store)){if(a==="overrides")continue;let c=K4(a),u=JSON.stringify(c).length;s+=u,console.log(`[CustomSounds] ${a}:`,{enabled:c.enabled,selectedSound:c.selectedSound,selectedFileId:c.selectedFileId,volume:c.volume,settingsSize:`${u}B`}),c.enabled&&i++}console.log(`[CustomSounds] Total enabled overrides: ${i}`),console.log(`[CustomSounds] Estimated settings size: ${(s/1024).toFixed(1)}KB`),console.log("[CustomSounds] === END DEBUG ===")}var p8e,Ey,Jst,Ay,Vst,oat,c2,mM,vQ=x(()=>{"use strict";d();r8e();vn();Q();ut();H();nt();$();B();bQ();u8e();d8e();p8e=de("vc-custom-sounds-"),Ey=SQ||[],Jst="ScattrdCustomSounds",Ay=new Map;Vst=e=>{let t=e.audio;e.audio in a2&&(t=SQ.find(n=>n.seasonal?.includes(e.audio))?.id||e.audio);let o=K4(t);if(o?.enabled){if(o.selectedSound==="custom"&&o.selectedFileId){let n=Ay.get(o.selectedFileId);if(n){e.audio=n,e.volume=o.volume;return}else return}if(o.selectedSound!=="default"&&o.selectedSound!=="custom"){if(o.selectedSound in a2){e.audio=a2[o.selectedSound],e.volume=o.volume;return}let n=Ey.find(i=>i.id===e.audio);if(n?.seasonal){let i=n.seasonal.find(s=>s.startsWith(`${o.selectedSound}_`));if(i&&i in a2){e.audio=a2[i],e.volume=o.volume;return}}}e.volume=o.volume}};oat=Object.fromEntries(Ey.map(e=>[e.id,{type:0,description:`Override for ${e.name}`,default:JSON.stringify(l2()),hidden:!0}])),c2=R({...oat,overrides:{type:6,description:"",component:()=>{let[e,t]=X.useState(0),[o,n]=X.useState(""),i=X.useRef(null);X.useEffect(()=>{Ey.forEach(p=>{c2.store[p.id]||pM(p.id,l2())})},[]);let s=()=>{Ey.forEach(p=>{pM(p.id,l2())}),Ay.clear(),t(p=>p+1),Re("All overrides reset successfully!")},a=()=>{i.current?.click()},l=p=>{let m=p.target.files?.[0];if(m){let g=new FileReader;g.onload=async y=>{try{s();let b=JSON.parse(y.target?.result);b.overrides&&Array.isArray(b.overrides)&&b.overrides.forEach(v=>{if(v.id){let E={enabled:v.enabled??!1,selectedSound:v.selectedSound??"default",selectedFileId:v.selectedFileId??void 0,volume:v.volume??100,useFile:!1};pM(v.id,E)}}),t(v=>v+1),Re("Settings imported successfully!")}catch(b){console.error("Error importing settings:",b),Re("Error importing settings. Check console for details.")}},g.readAsText(m),p.target.value=""}},c=async()=>{let p=Ey.map(v=>{let E=K4(v.id);return{id:v.id,enabled:E.enabled,selectedSound:E.selectedSound,selectedFileId:E.selectedFileId??void 0,volume:E.volume}}).filter(v=>v.enabled||v.selectedSound!=="default"),m={overrides:p,__note:"Audio files are not included in exports and will need to be re-uploaded after import"},g=new Blob([JSON.stringify(m,null,2)],{type:"application/json"}),y=URL.createObjectURL(g),b=document.createElement("a");b.href=y,b.download="customSounds-settings.json",b.click(),URL.revokeObjectURL(y),Re(`Exported ${p.length} settings (audio files not included)`)},u=Ey.filter(p=>p.name.toLowerCase().includes(o.toLowerCase())||p.id.toLowerCase().includes(o.toLowerCase()));return r("div",null,r("div",{className:"vc-custom-sounds-buttons"},r(U,{color:U.Colors.BRAND,onClick:a},"Import"),r(U,{color:U.Colors.PRIMARY,onClick:c},"Export"),r(U,{color:U.Colors.RED,onClick:s},"Reset All"),r(U,{color:U.Colors.WHITE,onClick:tat},"Debug"),r("input",{ref:i,type:"file",accept:".json",style:{display:"none"},onChange:l})),r("div",{className:p8e("search")},r(re,null,"Search Sounds"),r(qe,{value:o,onChange:p=>n(p),placeholder:"Search by name or ID"})),r("div",{className:p8e("sounds-list")},u.map(p=>{let m=K4(p.id);return r(c8e,{key:`${p.id}-${e}`,type:p,override:m,onChange:async()=>{if(pM(p.id,m),m.enabled&&m.selectedSound==="custom"&&m.selectedFileId)try{await _g(m.selectedFileId)}catch(g){console.error(`[CustomSounds] Failed to cache data URI for ${p.id}:`,g),Re("Error loading custom sound file")}console.log(`[CustomSounds] Settings saved for ${p.id}:`,m)}})})))}}}),mM=k({name:"CustomSounds",description:"Customize Discord's sounds.",authors:[w.ScattrdBlade,w.TheKodeToad],settings:c2,startAt:"Init",audioProcessor:Vst,async start(){console.log("[CustomSounds] Plugin starting...");try{await eat(),console.log("[CustomSounds] Startup complete")}catch(e){console.error("[CustomSounds] Startup failed:",e)}},stop(){console.log("[CustomSounds] Plugin stopped")}})});var wQ=x(()=>{});var nat,rat,iat,$c,fM,m8e,f8e=x(()=>{"use strict";d();wQ();tt();wt();fe();B();kQ();nat=De(/previewGuildId:\i,preview:\i,/),rat=vt('username:"Clyde"'),iat=vt("isProbablyAValidSnowflake","messageReference:"),$c={cozyFormat:{name:"Cozy mode",description:"Time format to use in messages on cozy mode",default:"[calendar]",offset:0},compactFormat:{name:"Compact mode",description:"Time format on compact mode and hovering messages",default:"LT",offset:0},tooltipFormat:{name:"Tooltip",description:"Time format to use on tooltips",default:"LLLL \u2022 [relative]",offset:0},ariaLabelFormat:{name:"Aria label",description:"Time format to use on aria labels",default:"[calendar]",offset:0},sameDayFormat:{name:"Same day",description:"[calendar] format for today",default:"[Today at] HH:mm:ss",offset:0},lastDayFormat:{name:"Last day",description:"[calendar] format for yesterday",default:"[Yesterday at] HH:mm:ss",offset:-1e3*60*60*24},lastWeekFormat:{name:"Last week",description:"[calendar] format for within the last week",default:"ddd DD.MM.YYYY HH:mm:ss",offset:-1e3*60*60*24*6},sameElseFormat:{name:"Older date",description:"[calendar] format for older dates",default:"ddd DD.MM.YYYY HH:mm:ss",offset:-1e3*60*60*24*31}},fM=e=>{let t=rat({content:e.message,channelId:"1337",embeds:[]});t.author=z.getCurrentUser(),t.id=e.msgId,t.timestamp=ll(e.date??new Date);let o=z.getCurrentUser(),n=t&&iat(t);return n?r("div",{className:"vc-cmt-demo-message"},r(nat,{author:{...o,nick:o.globalName||o.username},message:n,compact:e.compact,isGroupStart:e.isGroupStart||!1,className:"vc-cmt-demo-message-preview",hideSimpleEmbedContent:!0})):r("div",{className:"vc-cmt-demo-message"},r(W,null,r("b",null,"Preview:")," ",u2.renderTimestamp(date,"cozy")))},m8e=ee.wrap(()=>{let[e,t]=L(!1),o=kt(new Date),n=kt(new Date(Date.now()+$c.lastDayFormat.offset)),i=kt(new Date(Date.now()+$c.lastWeekFormat.offset)),s=kt(new Date(Date.now()+$c.sameElseFormat.offset));return r("div",{className:"vc-cmt-demo-message-container",onClick:()=>t(!e)},r(fM,{compact:e,msgId:"1337",message:`Click me to switch to ${e?"cozy":"compact"} mode`,isGroupStart:!0,date:s.current}),r(fM,{compact:e,msgId:"1338",message:"This message was sent in the last week",isGroupStart:!0,date:i.current}),r(fM,{compact:e,msgId:"1339",message:"Hover over timestamps to see tooltip formats",isGroupStart:!0,date:n.current}),r(fM,{compact:e,msgId:"1340",message:"Edit the formats below to see them live update here",isGroupStart:!0,date:o.current}))},{noop:!0})});var sat,aat,_f,u2,kQ=x(()=>{"use strict";d();wQ();Q();Ar();ut();ts();wt();H();co();qo();$();B();f8e();sat=(e,t)=>{let o=ll(e);ll.relativeTimeThreshold("s",60),ll.relativeTimeThreshold("ss",-1),ll.relativeTimeThreshold("m",60);let n=_f.store?.formats?.sameDayFormat||$c.sameDayFormat.default,i=_f.store?.formats?.lastDayFormat||$c.lastDayFormat.default,s=_f.store?.formats?.lastWeekFormat||$c.lastWeekFormat.default,a=_f.store?.formats?.sameElseFormat||$c.sameElseFormat.default;return o.format(t).replace("calendar",()=>o.calendar(null,{sameDay:n,lastDay:i,lastWeek:s,sameElse:a})).replace("relative",()=>o.fromNow())},aat=e=>{let[t,o]=L(e.pluginSettings?.[e.id]||e.format.default),n=i=>{o(i),e.onChange(e.id,i)};return r(f,null,r(re,null,e.format.name),r(W,null,e.format.description),r(qe,{value:t,onChange:n}))},_f=R({formats:{type:6,description:"Customize the timestamp formats",component:e=>{let[t,o]=L(tn().plugins?.CustomTimestamps?.formats??{}),n=(i,s)=>{let a={...t,[i]:s};o(a),e.setValue(a)};return r(f,null,r(m8e,null),Object.entries($c).map(([i,s])=>r("section",{key:i},i==="sameDayFormat"&&r("div",{className:Z.bottom20},r(Bt,{style:{marginBottom:"10px"}}),r(re,{tag:"h1"},"Calendar formats"),r(W,null,"How to format the [calendar] value if used in the above timestamps.")),r(aat,{id:i,format:s,onChange:n,pluginSettings:t}))))}}}).withPrivateSettings(),u2=k({name:"CustomTimestamps",description:"Custom timestamps on messages and tooltips",authors:[w.Rini,j.nvhhr,j.Suffocate,w.Obsidian],settings:_f,settingsAboutComponent:()=>r("div",{className:"vc-cmt-info-card"},r(Jo,null,"How to use:"),r(W,null,r(Go,{href:"https://momentjs.com/docs/#/displaying/format/"},"Moment.js formatting documentation"),r("div",{className:Z.top8},"Additionally you can use these in your inputs:",r("br",null),r("b",null,"[calendar]"),' enables dynamic date formatting such as "Today" or "Yesterday".',r("br",null),r("b",null,"[relative]"),' gives you times such as "4 hours ago".',r("br",null)))),patches:[{find:"#{intl::MESSAGE_EDITED_TIMESTAMP_A11Y_LABEL}",replacement:[{match:/\i.useMemo\(.{0,10}\i\.\i\)\(.{0,10}\]\)/,replace:"$self.renderTimestamp(arguments[0].timestamp,'ariaLabel')"},{match:/\i\.useMemo\(.{0,50}"LT".{0,30}\]\)/,replace:"$self.renderTimestamp(arguments[0].timestamp,arguments[0].compact?'compact':'cozy')"},{match:/(__unsupportedReactNodeAsText:).{0,25}"LLLL"\)/,replace:"$1$self.renderTimestamp(arguments[0].timestamp,'tooltip')"}]},{find:/.full,.{0,15}children:/,replacement:{match:/(__unsupportedReactNodeAsText:)\i.full/,replace:"$1$self.renderTimestamp(new Date(arguments[0].node.timestamp*1000),'tooltip')"}}],renderTimestamp:(e,t)=>{let o=Vo(),n;switch(t){case"cozy":n=_f.store.formats?.cozyFormat||$c.cozyFormat.default;break;case"compact":n=_f.store.formats?.compactFormat||$c.compactFormat.default;break;case"tooltip":n=_f.store.formats?.tooltipFormat||$c.tooltipFormat.default;break;case"ariaLabel":n=_f.store.formats?.ariaLabelFormat||$c.ariaLabelFormat.default}return se(()=>{if(n.includes("calendar")||n.includes("relative")){let i=setInterval(o,1e3);return()=>clearInterval(i)}},[]),sat(e,n)}})});var gM,g8e=x(()=>{"use strict";d();H();$();gM=k({name:"DisableCameras",description:"Disables cameras in a call by default",authors:[w.Joona],patches:[{find:".identifyStartTime));",replacement:{match:/\i\.self_video\|\|!1/g,replace:"false"}}]})});var h8e=x(()=>{});var d2,x8e,y8e,b8e=x(()=>{"use strict";d();Q();$();Y4();d2=R({format:{component:({setValue:e})=>v8e(e),type:6,default:"{buildChannel} {buildNumber} ({buildHash}) | {equicordName} {equicordVersion} ({equicordHash})",restartNeeded:!0}}),x8e={stable:"Stable",ptb:"PTB",canary:"Canary",staging:"Staging"},y8e=["Discord Variables:","{discordIcon} - Discord icon","{devbannerIcon} - Dev banner icon","{buildChannel} - Discord build channel (e.g. Stable)","{buildNumber} - Discord build number (e.g. 123456)","{buildHash} - Discord build hash (e.g. 123456789)","","Equicord Variables:","{equicordIcon} - Equicord icon","{equicordVersion} - Version of Equicord (e.g. 1.0.0)","{equicordHash} - Equicord build hash (e.g. 123456789)","{equicordPlatform} - Platform Equicord is running on (e.g. Dev Build)","","Equibop Specific Variables:","{equibopHash} - Equibop build hash (e.g. 123456789)","{equibopPlatform} - Platform Equibop is running on (e.g. Dev Build)","","Client Variables:","{clientIcon} - Desktop icon","{clientName} - The name of your current client","{clientVersion} - Version of your client (e.g. 1.0.0)","","Electron Variables:","{electronIcon} - Electron icon","{electronVersion} - Electron runtime version (e.g. 25.0.0)","","Chromium Variables:","{chromiumIcon} - Chromium icon","{chromiumVersion} - Chromium engine version (e.g. 125.0.0.0)","","Miscellaneous Variables:","{newline} or \\n - Newline character",""]});function v8e(e){let{format:t}=d2.store,[o,n]=L(t??"{buildChannel} {buildNumber} ({buildHash}) | {equicordName} {equicordVersion} ({equicordHash})"),[i,s]=L(null);function a(c){if(!c.trim()){s("Format cannot be empty.");return}s(null),n(c),e(c)}let l=hM(o);return r("section",null,r(W,{className:"vc-discord-dev-banner-text"},"The format for the Discord Dev Banner. You can use the following variables:",`

`,y8e.join(`
`)),r(W,{className:"vc-discord-dev-banner-text"},"Preview:"),r(W,{style:{padding:"2px"}},l),r("textarea",{className:"vc-discord-dev-banner-input",value:o,onChange:c=>a(c.target.value),placeholder:"{buildChannel} {buildNumber} ({buildHash}) | {equicordName} {equicordVersion} ({equicordHash})",rows:1,ref:c=>{c&&(c.style.height="auto",c.style.height=c.scrollHeight+"px")},onInput:c=>{let u=c.currentTarget;u.style.height="auto",u.style.height=u.scrollHeight+"px"}}),i&&r(W,{className:"vc-discord-dev-banner-error"},i))}var S8e=x(()=>{"use strict";d();wt();B();Y4()});var w8e,k8e,E8e,A8e,C8e,T8e,I8e=x(()=>{"use strict";d();w8e=e=>r("svg",{...e,fill:"currentColor",viewBox:"0 0 512 512",width:"14px",height:"14px"},r("path",{d:"M188.8,255.93A67.2,67.2,0,1,0,256,188.75,67.38,67.38,0,0,0,188.8,255.93Z"}),r("path",{d:"M476.75,217.79s0,0,0,.05a206.63,206.63,0,0,0-7-28.84h-.11a202.16,202.16,0,0,1,7.07,29h0a203.5,203.5,0,0,0-7.07-29H314.24c19.05,17,31.36,40.17,31.36,67.05a86.55,86.55,0,0,1-12.31,44.73L231,478.45a2.44,2.44,0,0,1,0,.27V479h0v-.26A224,224,0,0,0,256,480c6.84,0,13.61-.39,20.3-1a222.91,222.91,0,0,0,29.78-4.74C405.68,451.52,480,362.4,480,255.94A225.25,225.25,0,0,0,476.75,217.79Z"}),r("path",{d:"M256,345.5c-33.6,0-61.6-17.91-77.29-44.79L76,123.05l-.14-.24A224,224,0,0,0,207.4,474.55l0-.05,77.69-134.6A84.13,84.13,0,0,1,256,345.5Z"}),r("path",{d:"M91.29,104.57l77.35,133.25A89.19,89.19,0,0,1,256,166H461.17a246.51,246.51,0,0,0-25.78-43.94l.12.08A245.26,245.26,0,0,1,461.17,166h.17a245.91,245.91,0,0,0-25.66-44,2.63,2.63,0,0,1-.35-.26A223.93,223.93,0,0,0,91.14,104.34l.14.24Z"})),k8e=e=>r("svg",{...e,fill:"currentColor",viewBox:"0 0 24 24",width:"14px",height:"14px"},r("path",{d:"M4 2.5c-1.103 0-2 .897-2 2v11c0 1.104.897 2 2 2h7v2H7v2h10v-2h-4v-2h7c1.103 0 2-.896 2-2v-11c0-1.103-.897-2-2-2H4Zm16 2v9H4v-9h16Z"})),E8e=e=>r("svg",{...e,fill:"currentColor",viewBox:"0 0 14 14",width:"14px",height:"14px"},r("path",{d:"M6.99471698,9.67522659 C8.47108874,9.67522659 9.66792453,8.47748685 9.66792453,7 C9.66792453,5.52251315 8.47108874,4.32477341 6.99471698,4.32477341 C5.51834522,4.32477341 4.32150943,5.52251315 4.32150943,7 C4.32150943,8.47748685 5.51834522,9.67522659 6.99471698,9.67522659 Z M6.99471698,2.67522659 C8.18867925,2.67522659 9.26641509,3.16163142 10.0483019,3.94410876 L11.9396226,2.05135952 C10.6822642,0.782477341 8.92830189,0 6.99471698,0 C3.12754717,0 0,3.14048338 0,7 L2.67320755,7 C2.67320755,4.6102719 4.60679245,2.67522659 6.99471698,2.67522659 Z M11.3267925,7 C11.3267925,9.3897281 9.39320755,11.3247734 7.00528302,11.3247734 C5.81132075,11.3247734 4.73358491,10.8383686 3.94113208,10.0558912 L2.04981132,11.9486405 C3.31773585,13.2175227 5.06113208,14 6.99471698,14 C10.8618868,14 14,10.8595166 14,7 L11.3267925,7 Z"})),A8e=e=>r("svg",{...e,fill:"currentColor",viewBox:"0 0 16 16",width:"14px",height:"14px"},r("path",{d:"M13.545 2.907a13.227 13.227 0 0 0-3.257-1.011.05.05 0 0 0-.052.025c-.141.25-.297.577-.406.833a12.19 12.19 0 0 0-3.658 0 8.258 8.258 0 0 0-.412-.833.051.051 0 0 0-.052-.025c-1.125.194-2.22.534-3.257 1.011a.041.041 0 0 0-.021.018C.356 6.024-.213 9.047.066 12.032c.001.014.01.028.021.037a13.276 13.276 0 0 0 3.995 2.02.05.05 0 0 0 .056-.019c.308-.42.582-.863.818-1.329a.05.05 0 0 0-.01-.059.051.051 0 0 0-.018-.011 8.875 8.875 0 0 1-1.248-.595.05.05 0 0 1-.02-.066.051.051 0 0 1 .015-.019c.084-.063.168-.129.248-.195a.05.05 0 0 1 .051-.007c2.619 1.196 5.454 1.196 8.041 0a.052.052 0 0 1 .053.007c.08.066.164.132.248.195a.051.051 0 0 1-.004.085 8.254 8.254 0 0 1-1.249.594.05.05 0 0 0-.03.03.052.052 0 0 0 .003.041c.24.465.515.909.817 1.329a.05.05 0 0 0 .056.019 13.235 13.235 0 0 0 4.001-2.02.049.049 0 0 0 .021-.037c.334-3.451-.559-6.449-2.366-9.106a.034.034 0 0 0-.02-.019Zm-8.198 7.307c-.789 0-1.438-.724-1.438-1.612 0-.889.637-1.613 1.438-1.613.807 0 1.45.73 1.438 1.613 0 .888-.637 1.612-1.438 1.612Zm5.316 0c-.788 0-1.438-.724-1.438-1.612 0-.889.637-1.613 1.438-1.613.807 0 1.451.73 1.438 1.613 0 .888-.631 1.612-1.438 1.612Z"})),C8e=e=>r("svg",{...e,fill:"currentColor",viewBox:"0 0 24 24",width:"14px",height:"14px"},r("path",{d:"M2.648 11.678c-1.038-1.81-1.249-3.504-.511-4.781.988-1.712 3.468-2.31 6.604-1.739a.322.322 0 1 1-.115.633c-2.9-.528-5.111.005-5.932 1.428-.605 1.047-.423 2.509.512 4.14a.322.322 0 1 1-.558.32zm14.92-6.069c1.835.024 3.156.596 3.751 1.626.82 1.419.18 3.595-1.718 5.837a.322.322 0 1 0 .49.416c2.054-2.426 2.771-4.866 1.785-6.575-.726-1.257-2.26-1.92-4.299-1.947a.322.322 0 1 0-.008.643zm-1.854 15.239a.322.322 0 0 0-.442.11c-.934 1.553-2.08 2.399-3.26 2.399-1.642 0-3.208-1.647-4.2-4.418a.322.322 0 1 0-.606.217C8.279 22.154 10.036 24 12.01 24c1.44 0 2.773-.982 3.813-2.71a.322.322 0 0 0-.11-.442zm7.356-2.594a1.54 1.54 0 0 1-2.436 1.25c-2.455 1.445-7.146.71-11.56-1.84-1.88-1.085-3.527-2.392-4.795-3.785a.322.322 0 1 1 .476-.433c1.222 1.343 2.817 2.609 4.64 3.661 4.167 2.406 8.553 3.12 10.797 1.906a1.54 1.54 0 1 1 2.878-.759zm-19.062 0a1.54 1.54 0 1 1-2.285-1.345c-.233-2.877 2.79-6.734 7.36-9.372 1.898-1.096 3.874-1.874 5.731-2.271a.322.322 0 0 1 .135.628c-1.79.384-3.703 1.137-5.545 2.2-4.304 2.485-7.148 6.067-7.048 8.627.038-.003.075-.006.113-.006.85 0 1.54.69 1.54 1.54zM10.472 1.54a1.54 1.54 0 0 1 3.078 0c0 .023-.002.045-.003.067 2.549 1.317 4.32 5.81 4.32 11.003 0 2.135-.298 4.184-.854 5.96a.322.322 0 1 1-.614-.192c.536-1.712.825-3.697.825-5.768 0-4.89-1.626-9.095-3.847-10.363a1.538 1.538 0 0 1-2.905-.707zm1.304 9.981a1.114 1.114 0 1 0 .47 2.178 1.114 1.114 0 0 0-.47-2.178z"}),"    "),T8e=e=>r("svg",{...e,fill:"currentColor",viewBox:"0 0 930 930",width:"14px",height:"14px"},r("path",{d:"M836 465.5C836 670.121 670.121 836 465.5 836C260.879 836 95 670.121 95 465.5C95 260.879 260.879 95 465.5 95C670.121 95 836 260.879 836 465.5ZM242.322 465.5C242.322 588.758 342.242 688.678 465.5 688.678C588.758 688.678 688.678 588.758 688.678 465.5C688.678 342.242 588.758 242.322 465.5 242.322C342.242 242.322 242.322 342.242 242.322 465.5Z"}),r("path",{d:"M584.219 465.898C584.219 531.245 531.245 584.219 465.898 584.219C440.35 584.219 416.693 576.122 397.353 562.354L260.937 644.321C451.4 528.542 329.698 492.311 204.538 566.663L348.433 480.202C347.868 475.513 347.577 470.74 347.577 465.898C347.577 400.552 400.552 347.577 465.898 347.577C491.108 347.577 514.477 355.462 533.673 368.899L627.819 312.331C610.898 294.399 591.056 279.324 569.045 267.796C534.72 249.819 496.306 241.088 457.582 242.462C418.858 243.837 381.16 255.27 348.196 275.637C315.232 296.003 288.138 324.6 269.581 358.616C262.856 370.943 257.336 383.828 253.065 397.091C240.595 435.815 209.386 470.244 168.712 470.997C128.037 471.751 93.7099 439.084 101.005 399.061C108.06 360.359 121.262 322.87 140.254 288.06C171.06 231.591 216.039 184.116 270.763 150.306C325.486 116.495 388.07 97.5155 452.356 95.2335C516.641 92.9515 580.413 107.446 637.397 137.29C694.38 167.134 742.612 211.301 777.345 265.444C812.079 319.586 832.118 381.839 835.491 446.076C838.863 510.313 825.452 574.322 796.579 631.804C778.78 667.239 755.483 699.439 727.687 727.279C698.944 756.068 652.543 746.455 629.998 712.591C607.453 678.727 617.982 633.466 642.711 601.164C651.181 590.1 658.628 578.224 664.932 565.676C682.324 531.051 690.402 492.494 688.371 453.799C687.303 433.462 683.462 413.454 677.02 394.312L583.246 450.657C583.889 455.647 584.219 460.734 584.219 465.898ZM260.937 644.321C258.599 645.742 256.214 647.175 253.783 648.619L260.937 644.321Z"}),r("path",{d:"M470.711 406.73C493.342 393.132 522.712 400.455 536.311 423.086C549.909 445.718 542.587 475.088 519.955 488.687L253.783 648.619L204.538 566.663L470.711 406.73Z"}))});function hM(e){let{RELEASE_CHANNEL:t,BUILD_NUMBER:o,VERSION_HASH:n}=window.GLOBAL_ENV,i=x8e[t]||t.charAt(0).toUpperCase()+t.slice(1),{chromiumVersion:s,electronVersion:a,getVersionInfo:l}=vi,c=d2.store.format??"{devbannerIcon} {buildChannel} {buildNumber} ({buildHash}) | {equicordIcon} {equicordName} {equicordVersion} ({equicordHash})",u=e??c,p=X$(),m=u.replace(/{buildChannel}/g,i).replace(/{buildNumber}/g,o).replace(/{buildHash}/g,n.slice(0,9)).replace(/{equicordVersion}/g,"1.14.2.0").replace(/{equicordHash}/g,P0).replace(/{equicordPlatform}/g,l(!1)).replace(/{electronVersion}/g,a).replace(/{chromiumVersion}/g,s).replace(/{clientName}/g,p.name).replace(/{clientVersion}/g,`v${p?.version??"0.0.0"}`).replace(/{equibopHash}/g,p.shortHash??"Not Supported").replace(/{equibopPlatform}/g,`v${p?.dev?"Dev Build":"Standalone"}`).replace(/\\n|{newline}/g,"__NEWLINE__");if(!m.includes("__NEWLINE__")&&!/{.*Icon}/.test(u))return m;let g=m.split(/({.*?}|__NEWLINE__)/).filter(Boolean).map((y,b)=>{switch(y){case"{discordIcon}":return r("span",{key:`icon-discord-${b}`,className:"vc-discord-dev-banner-icons"},r(A8e,null));case"{equicordIcon}":return r("span",{key:`icon-equicord-${b}`,className:"vc-discord-dev-banner-icons"},r(T8e,null));case"{electronIcon}":return r("span",{key:`icon-electron-${b}`,className:"vc-discord-dev-banner-icons"},r(C8e,null));case"{chromiumIcon}":return r("span",{key:`icon-chromium-${b}`,className:"vc-discord-dev-banner-icons"},r(w8e,null));case"{devbannerIcon}":return r("span",{key:`icon-dev-${b}`,className:"vc-discord-dev-banner-icons"},r(E8e,null));case"{clientIcon}":return r("span",{key:`icon-dev-${b}`,className:"vc-discord-dev-banner-icons"},r(k8e,null));case"__NEWLINE__":return r("br",{key:`br-${b}`});default:return r(X.Fragment,{key:`text-${b}`},y)}});return r("div",{style:{display:"inline"}},g)}var D8e=x(()=>{"use strict";d();J$();Zh();B();Xm();Y4()});var Y4=x(()=>{"use strict";d();b8e();S8e();I8e();D8e()});var xM,M8e=x(()=>{"use strict";d();h8e();H();$();Y4();xM=k({name:"DiscordDevBanner",description:"Enables the Discord developer banner, in which displays the build-ID",authors:[j.KrystalSkull,w.thororen],settings:d2,patches:[{find:'"isHideDevBanner"',replacement:[{match:'"staging"===window.GLOBAL_ENV.RELEASE_CHANNEL',replace:"true"},{match:/children:\[.*?\{\}\)\]/g,replace:"children:$self.makeDevBanner()"}]}],makeDevBanner:hM})});var N8e=x(()=>{});var lat,cat,yM,EQ,bM,B8e=x(()=>{"use strict";d();N8e();H();nt();xt();$();fe();B();lat=He("INFREQUENT_USER_ACTION"),cat=et("image","imageLoading"),yM=et("wrapper","target","autoPointerEvents","dragOver"),EQ=de("vc-drag-favorite-emotes-"),bM=k({name:"DragFavoriteEmotes",authors:[j.PWall],description:"Adds the ability to change the order of your favourite emotes",patches:[{find:"#{intl::EMOJI_FAVORITE_TOOLTIP}",replacement:[{match:/(ref:\i,children:)(\(0,\i.jsx\)\(\i.\i)/,replace:"$1arguments[0]?.collected?.isDragging?$self.dragItem():$2"},{match:/\[(\i\.\i)\](?=.{0,5}\[\i\?\?)/,replace:'[arguments[0].collected.isDragging?"":$1]'},{match:/(\[\i,\i\]=\i\.useState\(""\))/,replace:"$1,[collected,drag]=$self.drag(arguments[0])"},{match:/(onFocus:.{0,50}\(\i,{ref:)(\i),/,replace:'$1arguments[0]?.descriptor?.category==="FAVORITES"?drag:$2,collected:collected,'},{match:/(key:\i,ref:\i)(?=\},\i)/,replace:'$1,style:{position:"relative"}'},{match:/(delay:200,children:)(\i)/,replace:"$1[$2,$self.wrapper(arguments[0]?.descriptor)]"},{match:/(delay:200,children:.{0,100}\}\):)(\i)\)/,replace:"$1[$2,$self.wrapper(arguments[0]?.descriptor)])"}]}],drag(e){return y0(()=>({type:"emoji",collect:t=>({isDragging:!!t.isDragging()}),canDrag:()=>e?.descriptor?.category==="FAVORITES",item:{id:e?.descriptor?.emoji?.uniqueName??e?.descriptor?.emoji?.id}}),[e?.descriptor])},drop({emoji:e,category:t}){return Rm(()=>({accept:"emoji",canDrop(){return t==="FAVORITES"},collect:o=>({canDrop:!!o.canDrop(),isOver:!!o.isOver()}),drop(o){let n=o.id,i=e?.uniqueName??e?.id;function s(a){if(this.source===this.target)return!1;let l=a.emojis.findIndex(p=>p===this.source),c=a.emojis.findIndex(p=>p===this.target),u=c<l?c:c-1;if(l===u)return!1;a.emojis.splice(l,1),a.emojis.splice(u,0,this.source)}al.FrecencyUserSettingsActionCreators.updateAsync("favoriteEmojis",s.bind({source:n,target:i}),lat.INFREQUENT_USER_ACTION)}}),[e])},dragItem(){return r("span",{className:me(EQ("item"),cat.imageLoading)})},wrapper(e){let[t,o]=this.drop(e),n=kt(null);if(gu(()=>{if(e?.category!=="FAVORITES")return;let i=requestAnimationFrame(()=>{if(n.current){if(t.canDrop){n.current.classList.add(yM.autoPointerEvents);return}n.current.classList.remove(yM.autoPointerEvents)}});return()=>cancelAnimationFrame(i)},[t,n]),e?.category==="FAVORITES")return r("div",{className:me(EQ("wrapper"),yM.wrapper),"aria-hidden":"true"},r("div",{className:me(t.isOver?EQ("indicator"):"",yM.target),ref:i=>{n.current=i,o(i)}}))}})});var P8e=x(()=>{});function dat(){AQ.forEach(e=>e())}function g2(e){f2={...f2,...e},dat()}function _8e(){return f2.visible}function CQ(e,t){p2={x:e,y:t},m2===null&&(g2({x:e,y:t}),m2=requestAnimationFrame(()=>{p2&&g2({x:p2.x,y:p2.y}),p2=null,m2=null}))}function Z4(){f2.visible&&(Wd!==null&&(clearTimeout(Wd),Wd=null),g2({exiting:!0}),Wd=window.setTimeout(()=>{Wd=null,g2({visible:!1,exiting:!1})},200))}function R8e(e,t){Wd!==null&&(clearTimeout(Wd),Wd=null),t&&CQ(t.x,t.y),g2({...e,visible:!0,exiting:!1})}function L8e(){if(typeof document>"u")return;let{body:e}=document;if(e){if(Q4){em&&!em.isConnected&&e.appendChild(em);return}em||(em=document.createElement("div")),em.isConnected||e.appendChild(em),Q4=Ms(em),Q4.render(r("div",{className:Ea("ghost-container")},r(ee,{noop:!0},r(pat,null))))}}function O8e(){Q4?.unmount(),Q4=null,em?.remove(),em=null,m2!==null&&(cancelAnimationFrame(m2),m2=null),p2=null,Wd!==null&&(clearTimeout(Wd),Wd=null),g2({visible:!1,exiting:!1})}function mat({className:e,size:t=14}){return r("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",width:t,height:t,fill:"none",viewBox:"0 0 24 24"},r("path",{fill:"currentColor",d:"M7 2a1 1 0 0 0-1 1v18a1 1 0 1 0 2 0V3a1 1 0 0 0-1-1ZM11 6a1 1 0 1 1 2 0v12a1 1 0 1 1-2 0V6ZM1 8a1 1 0 0 1 2 0v8a1 1 0 1 1-2 0V8ZM16 5a1 1 0 1 1 2 0v14a1 1 0 1 1-2 0V5ZM22 8a1 1 0 0 0-1 1v6a1 1 0 1 0 2 0V9a1 1 0 0 0-1-1Z"}))}function fat({className:e,size:t=14}){return r("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",width:t,height:t,fill:"none",viewBox:"0 0 24 24"},r("path",{fill:"currentColor",d:"M22.7 2.7a1 1 0 0 0-1.4-1.4l-20 20a1 1 0 1 0 1.4 1.4l20-20ZM6.85 13.15a.5.5 0 0 1-.85-.36V3a1 1 0 0 1 2 0v8.8a.5.5 0 0 1-.15.35l-1 1ZM11 17.2v.8a1 1 0 1 0 2 0v-1.8a.5.5 0 0 0-.85-.35l-1 1a.5.5 0 0 0-.15.36ZM11 7.8V6a1 1 0 1 1 2 0v.8a.5.5 0 0 1-.15.35l-1 1a.5.5 0 0 1-.85-.36ZM17.15 10.85a.5.5 0 0 1 .85.36V19a1 1 0 1 1-2 0v-6.8a.5.5 0 0 1 .15-.35l1-1ZM2 7a1 1 0 0 0-1 1v8a1 1 0 1 0 2 0V8a1 1 0 0 0-1-1ZM21 9a1 1 0 1 1 2 0v6a1 1 0 1 1-2 0V9Z"}))}var uat,Ea,Q4,em,m2,p2,Wd,f2,AQ,pat,F8e=x(()=>{"use strict";d();tt();nt();xt();fe();B();uat=De("3V5Zm16"),Ea=de("vc-dragify-"),Q4=null,em=null,m2=null,p2=null,Wd=null,f2={visible:!1,x:0,y:0,kind:"channel",title:"",exiting:!1},AQ=new Set;pat=()=>{let[e,t]=L(f2);se(()=>{let a=()=>t({...f2});return AQ.add(a),()=>{AQ.delete(a)}},[]);let o=Je([lo],()=>e.kind==="user"&&e.entityId?lo.getVoiceStateForUser(e.entityId):null),n=o?.channelId,i=o&&(o.selfMute||o.mute||o.selfDeaf||o.deaf),s=o?.selfStream;return e.visible?r("div",{className:me(Ea("ghost"),e.exiting?Ea("ghost-exit"):""),style:{transform:`translate3d(${e.x}px, ${e.y}px, 0)`}},r("div",{className:Ea("card")},r("div",{className:Ea("icon")},e.iconUrl?r("img",{className:Ea("icon-image"),src:e.iconUrl,alt:""}):r("span",{className:Ea("icon-text")},e.symbol??"#")),r("div",{className:Ea("body")},r("div",{className:Ea("title-row")},r("div",{className:Ea("title")},e.title),e.kind==="user"&&n?i?r(fat,{className:me(Ea("voice-icon"),Ea("voice-icon-muted"))}):r(mat,{className:Ea("voice-icon")}):null,e.kind==="user"&&n&&s?r(uat,{className:me(Ea("voice-icon"),Ea("voice-icon-stream")),size:14,width:14,height:14}):null),e.subtitle&&r("div",{className:Ea("subtitle")},e.subtitle)),r("div",{className:Ea("badge")},e.badge??e.kind))):null}});function vM(e){if(!e||e.length<2||e[0]!=="{"&&e[0]!=="[")return null;try{let t=JSON.parse(e);return typeof t=="object"&&t?t:null}catch{return null}}function kl(e){return e.match(/\d{17,20}/)?.[0]??null}function bat(e){let t=new Set,o=/\d{17,20}/g;for(let n of e){let i=n.match(o);i&&i.forEach(s=>t.add(s))}return Array.from(t)}function vat(e){let t=new Set,o=i=>i&&t.add(i);o(e.getData("text/plain")),o(e.getData("text/uri-list")),o(e.getData("text/html")),o(e.getData("text/x-moz-url")),o(e.getData("application/json"));for(let i of e.types??[])o(e.getData(i));let n=[];for(let i of t)n.push(i),i.includes(`
`)&&n.push(...i.split(/\s+/).filter(Boolean));return Array.from(new Set(n))}async function G8e(e){let t=vat(e),o=[],n=Array.from(e.items??[]).filter(i=>i.kind==="string").map(i=>new Promise(s=>i.getAsString(a=>{a&&o.push(a),s()})));return await Promise.all(n),Array.from(new Set([...t,...o]))}function q8e(e,t){if(e.length===0)return null;for(let n of e){let i=vM(n);if(i){let s=i.id??i.userId??i.channelId??i.guildId,a=(i.type??i.kind??i.itemType??"").toLowerCase();if(s){if(a.includes("user"))return{kind:"user",id:s};if(a.includes("channel"))return{kind:"channel",id:s,guildId:i.guildId};if(a.includes("guild")||a.includes("server"))return{kind:"guild",id:s}}}}for(let n of e){let i=n.trim();if(!i)continue;let s=gat.exec(i);if(s)return{kind:"user",id:s[1]};let a=U8e.exec(i);if(a)return{kind:"user",id:a[1]};let l=H8e.exec(i);if(l)return{kind:"user",id:l[1]};let c=$8e.exec(i);if(c)return{kind:"user",id:c[1]}}for(let n of e){let i=n.trim();if(!i)continue;let s=hat.exec(i);if(s)return{kind:"channel",id:s[1]};let a=z8e.exec(i);if(a){let l=a[1]==="@me"?"@me":a[2];return{kind:"channel",id:a[3],guildId:l??void 0}}}for(let n of e){let i=n.trim();if(!i)continue;let s=yat.exec(i);if(s)return{kind:"guild",id:s[1]}}let o=bat(e);for(let n of o){if(t.ChannelStore.getChannel(n))return{kind:"channel",id:n};if(t.GuildStore.getGuild(n))return{kind:"guild",id:n};if(t.UserStore.getUser(n))return{kind:"user",id:n}}return null}function j8e(e){let t=xat.exec(e);return t?{guildId:t[1]==="@me"?"@me":t[1],channelId:t[2]}:null}function W8e(e){let t=z8e.exec(e);if(!t)return null;let o=t[1]??t[2];return{guildId:o==="@me"?"@me":o,channelId:t[3]}}function SM(e){let t=H8e.exec(e);if(t?.[1])return t[1];let o=$8e.exec(e);return o?.[1]?o[1]:null}function K8e(e){return U8e.exec(e)?.[1]??null}var gat,U8e,$8e,H8e,hat,z8e,xat,yat,Y8e=x(()=>{"use strict";d();gat=/<@!?(\d{17,20})>/,U8e=/discord(?:(?:app)?\.com|:\/\/-?)\/users\/(\d{17,20})/,$8e=/cdn\.discordapp\.com\/(?:avatars|users)\/(\d{17,20})\//,H8e=/cdn\.discordapp\.com\/guilds\/\d{17,20}\/users\/(\d{17,20})\/avatars\//,hat=/<#(\d{17,20})>/,z8e=/discord(?:(?:app)?\.com|:\/\/-?)\/channels\/(?:(@me)|(\d{17,20}))\/(\d{17,20})/,xat=/\/channels\/(@me|\d{17,20})\/(\d{17,20})/,yat=/cdn\.discordapp\.com\/icons\/(\d{17,20})\//});function wat(){if(typeof document>"u")return null;if(DQ)return DQ;let e=document.createElement("canvas");return e.width=1,e.height=1,DQ=e,e}function kM(e){let t=wat();!t||!e.dataTransfer?.setDragImage||e.dataTransfer.setDragImage(t,0,0)}function Q8e(e){let t=Date.now();return IQ.key===e&&t-IQ.at<Sat?!0:(IQ={key:e,at:t},!1)}function Cy(){Rf=null,Kd=null,Hc=null,Rg=!1,y2=!1}function EM(e,t){e&&(e.clearData&&(e.clearData("text/plain"),e.clearData("text/uri-list"),e.clearData("text/html")),e.setData("application/json",t),e.setData("application/dragify",t),e.setData("text/plain",""))}function kat(e){return e?.types?.includes("application/dragify")}var wM,X4,Kd,Rf,Hc,TQ,IQ,h2,x2,Rg,J4,y2,Sat,DQ,ju,V4,AM,Z8e=x(()=>{"use strict";d();P8e();Q();H();mt();At();$();hr();B();F8e();Y8e();wM=new ke("Dragify"),X4=null,Kd=null,Rf=null,Hc=null,TQ=0,IQ={at:0,key:""},h2=0,x2=null,Rg=!1,J4=null,y2=!1,Sat=150,DQ=null;ju=R({userOutput:{type:4,description:"User drop output.",options:[{label:"Mention user",value:"mention",default:!0},{label:"User ID",value:"id"}]},channelOutput:{type:4,description:"Channel drop output.",options:[{label:"#channel mention",value:"mention",default:!0},{label:"Channel link",value:"link"}]},inviteExpireAfter:{type:4,description:"Invite expiration.",options:[{label:"30 minutes",value:1800},{label:"1 hour",value:3600},{label:"6 hours",value:21600},{label:"12 hours",value:43200},{label:"1 day",value:86400},{label:"7 days",value:604800},{label:"Never",value:0,default:!0}]},inviteMaxUses:{type:4,description:"Invite max uses.",options:[{label:"No limit",value:0,default:!0},{label:"1 use",value:1},{label:"5 uses",value:5},{label:"10 uses",value:10},{label:"25 uses",value:25},{label:"50 uses",value:50},{label:"100 uses",value:100}]},inviteTemporaryMembership:{type:3,default:!1,description:"Grant temporary membership."},reuseExistingInvites:{type:3,default:!1,description:"Reuse existing invite instead of creating a new one."},allowChatBodyDrop:{type:3,default:!1,restartNeeded:!0,description:"Allow dropping into the main chat body to insert text."}});V4=new Map,AM=k({name:"Dragify",description:"Drop users, channels, or servers into chat to insert mentions or invites.",authors:[j.justjxke],settings:ju,patches:[{find:'location:"VoiceUser"',replacement:{match:/(?<=previewIsOpen:.{0,100})"data-dnd-name":(\i)\.name,/,replace:'$&"data-dragify-user":!0,"data-user-id":arguments[0].user?.id,draggable:!0,onDragStart:e=>$self.onUserDragStart(e,arguments[0].user),'}},{find:'tutorialId:"voice-conversations"',replacement:[{match:/(?<=this.getTooltipText\(\),.{0,100})iconClassName:/,replace:"draggable:!0,onDragStart:e=>$self.onChannelDragStart(e,{id:this?.props?.channel?.id,guild_id:this?.props?.channel?.guild_id}),$&"},{match:/(?<=getModeClass\(\),.{0,50})"data-dnd-name":(\i)\.name,children:\[/,replace:"draggable:!0,onDragStart:e=>$self.onChannelDragStart(e,{id:this?.props?.channel?.id,guild_id:this?.props?.channel?.guild_id}),$&"}]},{find:"handleClickChat",replacement:{match:/(?<=getModeClass\(\),.{0,50})"data-dnd-name":(\i)\.name,/,replace:"$&draggable:!0,onDragStart:t=>$self.onChannelDragStart(t,{id:this?.props?.channel?.id,guild_id:this?.props?.channel?.guild_id}),"}},{find:"__invalid_threadMainContent",replacement:{match:/className:\i\.\i,onClick:\i,"aria-label":(?=.{0,100}__invalid_threadMainContent)/,replace:"draggable:!0,onDragStart:e=>$self.onChannelDragStart(e),$&"}},{find:"shouldShowThreadsPopout",replacement:{match:/(?<=getClassName\(\).{0,50})"data-dnd-name":(\i)\.name,/,replace:"$&draggable:!0,onDragStart:e=>$self.onChannelDragStart(e,{id:this?.props?.channel?.id,guild_id:this?.props?.channel?.guild_id}),"}},{find:"POPOUT)},children:",replacement:{match:/(?<=getUser\(\i\.ownerId\).{0,100})className:\i\.\i,onClick:\i=>\{\(0,\i\.\i\)\((\i),/,replace:"draggable:!0,onDragStart:e=>$self.onChannelDragStart(e,{id:arguments[0]?.thread?.id,guild_id:arguments[0]?.thread?.guild_id}),$&"}},{find:"MemberListItem",replacement:{match:/(?<=useRawTargetDimensions.{0,250})onContextMenu:\i,(?=onMouseEnter:)/,replace:'$&draggable:!0,onDragStart:e=>$self.onUserDragStart(e,{id:arguments[0].user?.id}),"data-dragify-user":!0,"data-user-id":arguments[0].user?.id,'}},{find:']="BADGES"',replacement:{match:/(?<=textDecorationColor:.{0,300})(?=onClick:\i,onContextMenu:\i,)/,replace:'draggable:!0,onDragStart:e=>$self.onUserDragStart(e,arguments[0].author),"data-dragify-user":!0,"data-user-id":arguments[0].author.id,'}},{find:".VOICE_CHANNEL_TILE,children:",replacement:{match:/(?<=\.VOICE_USER,.{0,250})className:\i\.\i,onDoubleClick:\i,/,replace:'draggable:!0,onDragStart:e=>$self.onUserDragStart(e,{id:arguments[0].participantUserId}),"data-dragify-user":!0,"data-user-id":arguments[0].participantUserId,$&'}},{find:"PrivateChannel.renderAvatar: Invalid prop configuration - no user or channel",replacement:{match:/\.CHANNEL\(\i\.\i,\i\.\i\),(?=.{0,150}\.isMultiUserDM\(\))/,replace:"$&draggable:!0,onDragStart:e=>$self.onDmDragStart(e,arguments[0].channel),"}},{find:"[aria-owns=folder-items-",replacement:{match:/"data-dnd-name":(\i)\.name,(?="data-drop-hovering".{0,100}formatToPlainString\()/,replace:"$&draggable:!0,onDragStart:e=>$self.onGuildDragStart(e,$1.id),"}}],async onDrop(e,t){if(y2)return;let{dataTransfer:o}=e;if(!o||o.files?.length)return;let n=o.getData("application/dragify");(n||(Hc||Rf||Kd))&&(TQ=Date.now(),e.preventDefault(),e.stopPropagation());let s=t??(st?.getChannelId?.()?ne.getChannel(st.getChannelId()):null);if(!s)return;if(n){let u=vM(n);if(u?.kind&&u.id){let p=null;switch(u.kind){case"user":p={kind:"user",id:u.id};break;case"channel":p={kind:"channel",id:u.id,guildId:u.guildId};break;case"guild":p={kind:"guild",id:u.id};break}if(p){let m=`${p.kind}:${p.id}:${s.id}`;if(Q8e(m))return;await this.handleDropEntity(p,s);return}}}let a=await G8e(o),l=q8e(a,{ChannelStore:ne,GuildStore:ct,UserStore:z});if(!l&&Hc?l=Hc:!l&&Rf?l={kind:"user",id:Rf}:!l&&Kd&&(l={kind:"guild",id:Kd}),!l)return;let c=`${l.kind}:${l.id}:${s.id}`;Q8e(c)||await this.handleDropEntity(l,s)},async handleDropEntity(e,t){try{let o=await this.buildText(e,t);if(!o){Cy();return}let n=!1;if(e.kind==="user"?n=this.insertText(t.id,o,{removeUnknownUser:!0}):n=this.insertText(t.id,o),!n)throw new Error("Unable to insert drag content");Cy()}catch(o){wM.error("Failed handling drop",o),Re("Dragify failed to handle drop.",D.Type.FAILURE)}},async buildText(e,t){switch(e.kind){case"user":return ju.store.userOutput==="id"?e.id:`<@${e.id}>`;case"channel":return this.formatChannel(e.id,e.guildId);case"guild":return await this.createInvite(e.id,t);default:return null}},formatChannel(e,t){let o=ne.getChannel(e);return o?o.isGroupDM()||o.isMultiUserDM()?ju.store.userOutput==="id"?e:`https://discord.com/channels/@me/${e}`:ju.store.channelOutput==="link"?`https://discord.com/channels/${t??o?.guild_id??"@me"}/${e}`:`<#${e}>`:null},async createInvite(e,t){let o=this.findInviteChannel(e,t),n=o?null:await this.fetchInviteChannelId(e);if(ju.store.reuseExistingInvites){let s=V4.get(e);if(s&&s.maxUses===null&&!this.isInviteExpired(s))return`https://discord.gg/${s.code}`;let a=await this.fetchReusableInvite(e,o??null);if(a)return`https://discord.gg/${a}`}let i=o?.id??n;if(!i)return Re("No channel available for invites.",D.Type.FAILURE),null;if(o&&o.guild_id!==e)return Re("No channel available for invites.",D.Type.FAILURE),null;try{let s=ju.store.inviteExpireAfter??0,a=ju.store.inviteMaxUses??0,{body:l}=await Ht.post({url:`/channels/${i}/invites`,body:{max_age:s,max_uses:a,temporary:ju.store.inviteTemporaryMembership,unique:!0}}),c=typeof l=="object"&&l?l.code:null;if(!c)throw new Error("Invite response missing code");return V4.set(e,{code:c,expiresAt:s>0?Date.now()+s*1e3:null,maxUses:a===0?null:a,uses:0}),Re("Invite created.",D.Type.SUCCESS),`https://discord.gg/${c}`}catch(s){return wM.error("Failed to create invite",s),Re("Unable to create invite.",D.Type.FAILURE),null}},async fetchInviteChannelId(e){try{let{body:t}=await Ht.get({url:`/guilds/${e}/channels`});return Array.isArray(t)?t.filter(n=>n&&n?.id).filter(n=>{let{type:i}=n;return i===0||i===5||i===15||i===16}).sort((n,i)=>(n.position??0)-(i.position??0))[0]?.id??null:null}catch{return null}},async fetchReusableInvite(e,t){let o=V4.get(e);if(o&&o.maxUses===null&&!this.isInviteExpired(o))return o.code;try{let n=t?.id??null,i=n?`/channels/${n}/invites`:`/guilds/${e}/invites`,{body:s}=await Ht.get({url:i});if(!Array.isArray(s))return null;let a=Date.now(),l=s.find(c=>{let u=c.expires_at?Date.parse(c.expires_at):null,p=c.max_uses??null,m=p===0?null:p,g=c.uses??null,y=u===null||u>a,b=m===null||g===null||g<m;return y&&b&&typeof c.code=="string"});if(l?.code)return V4.set(e,{code:l.code,expiresAt:l.expires_at?Date.parse(l.expires_at):null,maxUses:l.max_uses===0?null:l.max_uses??null,uses:l.uses??null}),l.code}catch{return null}return null},isInviteExpired(e){let t=Date.now(),o=e.expiresAt!==null&&e.expiresAt<=t,n=e.maxUses!==null&&e.uses!==null&&e.uses>=e.maxUses;return o||n},findInviteChannel(e,t){if(t.guild_id===e&&this.canCreateInvite(t))return t;let o=ct.getGuild(e),n=[o?.systemChannelId,o?.rulesChannelId,o?.publicUpdatesChannelId].filter(Boolean);for(let c of n){let u=ne.getChannel(c);if(this.canCreateInvite(u))return u}let i=(rl.getSelectableChannels?.(e)??[]).map(c=>c.channel).filter(Boolean),s=(()=>{let c=rl.getChannels(e);if(!c?.SELECTABLE)return[];let u=[];for(let p of Object.values(c.SELECTABLE)){let m=p&&p?.channel?p.channel:p;m&&u.push(m)}return u})(),a=new Map;for(let c of[...i,...s])!c||c.guild_id!==e||a.has(c.id)||a.set(c.id,c);let l=[...a.values()].sort((c,u)=>{let p=typeof c.position=="number"?c.position:0,m=typeof u.position=="number"?u.position:0;return p===m?c.id.localeCompare(u.id):p-m});for(let c of l)if(this.canCreateInvite(c))return c;return null},canCreateInvite(e){return!e||!e.guild_id||e.isDM()||e.isGroupDM()||e.isMultiUserDM()||e.isCategory()||e.isThread()?!1:Kt.can(Nt.CREATE_INSTANT_INVITE,e)},insertText(e,t,o){let n=!1,i=!1;try{xu(t),n=!0}catch(s){wM.error("Failed to insert text into input",s)}try{let s=g0.getDraft(e,sn.ChannelMessage)??"";o?.removeUnknownUser&&(s=s.replace(/@unknown[- ]user/gi,"").trim());let l=s.length>0&&!s.endsWith(" ")?`${s} ${t}`:`${s}${t}`;s?VE.changeDraft(e,l,sn.ChannelMessage):VE.saveDraft(e,l,sn.ChannelMessage),i=!0}catch(s){wM.error("Failed to update draft",s)}return n||i},onChannelDragStart(e,t){if(Rf)return;let o=e.dataTransfer?.getData("application/dragify")??"";if(o&&vM(o)?.kind==="user"||e.target?.closest?.("[data-dragify-user]"))return;let i=this.extractChannelIdFromTarget(e.target),s=t&&"id"in t&&t.id?t:i;if(!s?.id)return;let a=ne.getChannel(s.id);if(!a)return;let c=(s?"guild_id"in s?s.guild_id:s.guildId:void 0)??i?.guildId??a?.guild_id;if(a.isDM()){let m=this.getDmRecipientId(a);if(m){this.onUserDragStart(e,{id:m});return}}kM(e),this.showGhost({kind:"channel",id:a.id,guildId:c},e);let p=JSON.stringify({kind:"channel",id:a.id,guildId:c});Hc={kind:"channel",id:a.id,guildId:c},Rg=!0,h2=Date.now(),EM(e.dataTransfer??null,p)},onUserDragStart(e,t){if(this.isAttachmentElement(e.target))return;let o=e.target;if(o?.closest){let m=o.closest("[data-author-id]");if(m){let g=m.getAttribute("data-author-id"),y=g?kl(g):null;y&&(t={id:y})}}let n=e.currentTarget,i=e.target??null,s=t?.id??t?.userId??t?.user?.id??null,a=this.extractUserIdFromTarget(n)??this.extractUserIdFromTarget(i)??null,l=this.extractUserIdFromEvent(e),c=s??a??l??e.dataTransfer?.getData("data-user-id")??null,u=c?kl(c)??c:null;if(!u)return;let p=JSON.stringify({kind:"user",id:u});Rf=u,Hc={kind:"user",id:u},Rg=!0,h2=Date.now(),kM(e),this.showGhost({kind:"user",id:u},e),EM(e.dataTransfer??null,p),e.dataTransfer?.setData("data-user-id",u)},onDmDragStart(e,t){let o=t??null;if(!o){let i=this.extractChannelIdFromTarget(e.target);i?.id&&(o=ne.getChannel(i.id)??null)}if(!o)return;if(!(o.isGroupDM()&&o.isMultiUserDM())){let i=this.getDmRecipientId(o);if(i){this.onUserDragStart(e,{id:i});return}}this.onChannelDragStart(e,o)},onGuildDragStart(e,t){kM(e),this.showGhost({kind:"guild",id:t},e);let o=JSON.stringify({kind:"guild",id:t});e.dataTransfer&&(e.dataTransfer.effectAllowed="copyMove"),Kd=t,Hc={kind:"guild",id:t},Rg=!0,h2=Date.now(),EM(e.dataTransfer??null,o)},start(){X4=this,this.mountGhost(),window.addEventListener("dragover",this.globalDragOver,!0),window.addEventListener("drop",this.globalDrop,!0),window.addEventListener("dragstart",this.globalDragStart,!0),window.addEventListener("drag",this.globalDragMove,!0),window.addEventListener("dragover",this.globalDragMove,!0),window.addEventListener("dragend",this.globalDragEnd,!0),J4===null&&(J4=window.setInterval(()=>{Rg&&(Date.now()-h2<1200||(Rf=null,Kd=null,Hc=null,Rg=!1,Z4()))},500))},stop(){window.removeEventListener("dragover",this.globalDragOver,!0),window.removeEventListener("drop",this.globalDrop,!0),window.removeEventListener("dragstart",this.globalDragStart,!0),window.removeEventListener("drag",this.globalDragMove,!0),window.removeEventListener("dragover",this.globalDragMove,!0),window.removeEventListener("dragend",this.globalDragEnd,!0),Cy(),V4.clear(),x2!==null&&(clearTimeout(x2),x2=null),J4!==null&&(clearInterval(J4),J4=null),this.unmountGhost(),X4=null},globalDragOver:e=>{let t=X4;!t||!t.isMessageInputEvent(e)||y2||e.dataTransfer?.files?.length||!(Kd!==null||(Hc||Rf)||Rg||kat(e.dataTransfer))||(e.preventDefault(),e.stopPropagation(),e.dataTransfer&&(e.dataTransfer.dropEffect="copy"))},globalDrop:async e=>{let t=X4;if(!t||!t.isMessageInputEvent(e)||y2)return;if(e.dataTransfer?.files?.length){Cy();return}let o=st.getChannelId(),n=ne.getChannel(o);!n||!(e.dataTransfer?.types??[]).includes("application/dragify")&&!(Kd!==null||Rf!==null||Hc!==null||Rg)||(TQ=Date.now(),e.preventDefault(),e.stopPropagation(),await t.onDrop(e,n),Z4())},globalDragStart:e=>{let t=X4;if(!t||!e.dataTransfer)return;let o=e.target;if(!o)return;let n=e.dataTransfer.types?.includes("application/dragify")??!1,i=e.composedPath?.()??[];if(t.isAttachmentElement(o))return;if(t.isMessageInputElement(o)){Cy(),y2=!0;return}for(let u of i){let p=u;if(p){if(t.isAttachmentElement(p))return;if(t.isMessageInputElement(p)){Cy(),y2=!0;return}}}if(!n)for(let u of i){let p=u;if(!p)continue;let m=p.closest?.("[data-dragify-user]");if(!m)continue;let g=t.extractUserIdFromTarget(m);g&&t.onUserDragStart(e,{id:g});return}let a=o.closest?.("[data-author-id]")?.getAttribute?.("data-author-id")??null;if(a&&o.getAttribute?.("data-text")&&!n){t.onUserDragStart(e,{id:a});return}if(!n){let u=o.closest?.("[data-dragify-user]");if(u){let p=t.extractUserIdFromEvent(e)??t.extractUserIdFromTarget(u);if(p){t.onUserDragStart(e,{id:p});return}}}if(!n&&t.extractAvatarUserIdFromTarget(o)){let m=o.closest?.("[data-author-id]")?.getAttribute("data-author-id")??null;if(m){t.onUserDragStart(e,{id:m});return}let g=t.extractChannelIdFromTarget(o);if(g){t.onChannelDragStart(e,g);return}}let l=t.extractChannelIdFromTarget(o);if(l&&!n){if(o.closest?.("[data-user-id]"))return;t.onChannelDragStart(e,l);return}let c=t.extractGuildIdFromTarget(o);c&&(n||(e.dataTransfer.effectAllowed="copyMove",kM(e),Kd=c,EM(e.dataTransfer,JSON.stringify({kind:"guild",id:c})),t.showGhost({kind:"guild",id:c},e)))},globalDragEnd:e=>{setTimeout(()=>{Date.now()-TQ<100||(Cy(),Z4())},0)},globalDragMove:e=>{_8e()&&(e?.clientX==null||e?.clientY==null||(e instanceof DragEvent&&(h2=Date.now(),(Kd!==null||Hc?.kind==="guild")&&(x2!==null&&clearTimeout(x2),x2=window.setTimeout(()=>{Date.now()-h2<200||(Kd=null,Hc?.kind==="guild"&&(Hc=null),Z4())},300))),CQ(e.clientX+16,e.clientY+20)))},isMessageInputEvent(e){let t=e.target;if(this.isMessageInputElement(t)||ju.store.allowChatBodyDrop&&this.isChatBodyElement(t))return!0;let o=e.composedPath?.()??[];for(let n of o){let i=n;if(this.isMessageInputElement(i)||ju.store.allowChatBodyDrop&&this.isChatBodyElement(i))return!0}if(typeof document<"u"&&e?.clientX!=null&&e?.clientY!=null){let n=document.elementsFromPoint?.(e.clientX,e.clientY);if(n&&n.length){for(let i of n)if(this.isMessageInputElement(i)||ju.store.allowChatBodyDrop&&this.isChatBodyElement(i))return!0}else{let i=document.elementFromPoint(e.clientX,e.clientY);if(this.isMessageInputElement(i)||ju.store.allowChatBodyDrop&&this.isChatBodyElement(i))return!0}}return!1},isMessageInputElement(e){return e?!!e.closest?.('[data-slate-editor],[role="textbox"],[contenteditable="true"],[aria-label^="Message "]'):!1},isChatBodyElement(e){return e?!!e.closest?.('[role="log"],[data-list-id^="chat-messages"]'):!1},isAttachmentElement(e){let t=e;for(;t;){if(!(t instanceof HTMLElement)){t=t.parentElement??null;continue}let o=t.getAttribute("href")??"",n=t.getAttribute("src")??"",i=t.style?.backgroundImage??"";if(t.getAttribute("data-attachment-id")??t.getAttribute("data-attachment-type")??t.getAttribute("data-attachment-item-id")??"")return!0;let a=`${o} ${n} ${i}`;if(/(?:cdn|media)\.discordapp\.(?:com|net)\/attachments\//i.test(a)||/discord\.com\/attachments\//i.test(a)||/cdn\.discordapp\.com\/ephemeral-attachments\//i.test(a))return!0;t=t.parentElement}return!1},extractGuildIdFromTarget(e){let t=e;for(;t;){let o=t.getAttribute("data-list-id"),n=t.getAttribute("data-list-item-id")??"";if(!(o&&/guild/i.test(o)||/guild/i.test(n))){t=t.parentElement;continue}let s=n.split("___"),a=s[s.length-1]??n;if(/^\d{17,20}$/.test(a))return a;let l=kl(n)??kl(o??"")??kl(t.getAttribute("data-guild-id")??"");if(l)return l;t=t.parentElement}return null},extractChannelIdFromTarget(e){let t=e;for(;t;){let o=t.getAttribute("data-list-id")??"",n=t.getAttribute("data-list-item-id")??"",i=t.getAttribute("data-channel-id")??t.getAttribute("data-item-id")??"",s=t.getAttribute("data-thread-id")??"",a=t.getAttribute("href")??"",l=/(channel|thread|private|forum)/i.test(o)||/(channel|thread|private|forum)/i.test(n),c=j8e(a);if(c?.channelId){let m=c.guildId==="@me"?void 0:c.guildId;return{id:c.channelId,guildId:m}}let u=W8e(a);if(u?.channelId){let m=u.guildId==="@me"?void 0:u.guildId;return{id:u.channelId,guildId:m}}let p=l?kl(s)??kl(i)??kl(n)??kl(o):null;if(p){let m=kl(t.getAttribute("data-guild-id")??"")??void 0;return{id:p,guildId:m}}t=t.parentElement}return null},extractUserIdFromTarget(e){let t=e;for(;t;){if(!(t instanceof HTMLElement)){t=t.parentElement??null;continue}let o=t.getAttribute("data-user-id")??t.getAttribute("data-userid")??"",n=t.getAttribute("data-author-id")??"",i=t.getAttribute("data-list-item-id")??t.getAttribute("data-item-id")??"",s=t.getAttribute("href")??"",a=t.getAttribute("src")??"",l=t.getAttribute("aria-label")??"",c=kl(o)??kl(n);if(c)return c;let u=kl(i);if(u){if(z.getUser(u))return u;let E=ne.getChannel(u);if(E&&E.isDM()&&!E.isGroupDM()&&!E.isMultiUserDM()){let A=this.getDmRecipientId(E);if(A)return A}}let p=K8e(s);if(p)return p;let m=SM(a);if(m)return m;let g=t.getAttribute("style")??"",y=t.style?.backgroundImage??"",b=SM(g+" "+y);if(b)return b;let v=kl(l);if(v&&z.getUser(v))return v;t=t.parentElement}return null},extractAvatarUserIdFromTarget(e){let t=e;for(;t;){if(!(t instanceof HTMLElement)){t=t.parentElement??null;continue}let o=t.getAttribute("src")??"",n=t.getAttribute("style")??"",i=t.style?.backgroundImage??"",s=SM(`${o} ${n} ${i}`);if(s)return s;t=t.parentElement}return null},extractUserIdFromEvent(e){let t=e.composedPath?.()??[];for(let n of t){let i=n instanceof HTMLElement?this.extractUserIdFromTarget(n):null;if(i)return i}let o=e.target;if(o){let n=o.closest?.("[data-author-id],[data-user-id]");if(n)return this.extractUserIdFromTarget(n)}if(typeof document<"u"&&e?.clientX!=null&&e?.clientY!=null){let n=document.elementsFromPoint?.(e.clientX,e.clientY);if(n&&n.length)for(let i of n){let s=i instanceof HTMLElement?this.extractUserIdFromTarget(i):null;if(s)return s}}return null},mountGhost(){L8e()},unmountGhost(){O8e()},showGhost(e,t){let o=this.buildGhost(e);if(!o)return;let n=t&&t?.clientX!=null&&t?.clientY!=null?{x:t.clientX+16,y:t.clientY+20}:void 0;R8e({...o,entityId:e.id},n)},buildGhost(e){if(e.kind==="user"){let a=z.getUser(e.id);if(!a)return null;let l=a.globalName??a.username,c=a.username?`@${a.username}`:"User",u=a.getAvatarURL(void 0,80,!0)??void 0;return{kind:"user",title:l,subtitle:c,iconUrl:u,symbol:"@",badge:"user",entityId:e.id,exiting:!1}}if(e.kind==="channel"){let a=ne.getChannel(e.id);if(!a)return null;let l=a.isThread(),c=a.type===3,u=this.getGroupDmDisplayName(a)||a.name,p=`${l||c?"":"#"}${u}`,m=a?.guild_id?ct.getGuild(a.guild_id):null,g=m?.name??(e.guildId?"Server":"Direct Messages"),y;if(m?.icon?y=To.getGuildIconURL({id:m.id,icon:m.icon,size:64})??void 0:a.type===3&&(y=To.getChannelIconURL?.({id:a.id,icon:a.icon??void 0,size:64})??void 0),!y&&(a.isDM()||a.type===3)){let v=this.getDmRecipientId(a),E=v?z.getUser(v):null;y=E?E.getAvatarURL(void 0,80,!0):void 0}let b="channel";if(l)b="thread";else switch(a.type){case 2:case 13:b="voice";break;case 15:b="forum";break;case 16:b="media";break;case 5:b="announcement";break;case 1:case 3:b="dm";break;default:b="channel"}return{kind:"channel",title:p,subtitle:g,iconUrl:y,badge:b,entityId:e.id,exiting:!1}}let t=ct.getGuild(e.id),o=t?.name??"Server",n="Server",i=t?.icon?To.getGuildIconURL({id:t.id,icon:t.icon,size:64})??void 0:void 0,s=t?Ba(t):"S";return{kind:"guild",title:o,subtitle:n,iconUrl:i,symbol:s,badge:"server",entityId:e.id,exiting:!1}},getDmRecipientId(e){return e?e.getRecipientId()??e.recipients?.[0]??e.rawRecipients?.[0]??null:null},getGroupDmDisplayName(e){if(!e||e.type!==3)return null;let t=z.getCurrentUser()?.id??null,o=(e.recipients??e.rawRecipients??[]).filter(Boolean);if(o.length===0)return null;let n=o.filter(i=>i!==t).map(i=>{let s=z.getUser(i);return Tt?.getNickname?.(i)??s?.globalName??s?.username??null}).filter(Boolean);return n.length>1?n.join(", "):null}})});var X8e,J8e=x(()=>{"use strict";d();Wo();tt();At();xt();B();g9();X8e=ee.wrap(function({message:t}){let o=[],n=t.content?.toLowerCase()??"",i=(n.match(/`\w+`/g)??[]).map(g=>g.slice(1,-1)),a=Object.keys(pt).filter(g=>i.includes(g.toLowerCase())).sort((g,y)=>y.length-g.length)[0],l=a?pt[a]:null,c=l0(t.channel_id)&&bh(t.author.id),u=n.startsWith("enable"),p=n.startsWith("disable");if(l&&c&&(u||p)){if(l.required||l.name.endsWith("API"))return;let g=yt(a),y=`${a} is already ${g?"enabled":"disabled"}`,b=!0;(p&&g||u&&!g)&&(y=`${g?"Disable":"Enable"} ${a}`,b=!1),o.push(r(U,{key:"vc-plugin-toggle",color:b?U.Colors.PRIMARY:g?U.Colors.RED:U.Colors.GREEN,disabled:b,size:U.Sizes.SMALL,onClick:async()=>{try{await r8(a)&&Re(`${y}`,D.Type.SUCCESS)}catch(v){new ke("EquicordHelper").error("Error while toggling:",v),Re(`Failed to ${y.toLowerCase()}`,D.Type.FAILURE)}}},y))}return o.length===0?null:r("div",{className:"vc-plugins-action-buttons",style:{marginTop:"0px"}},o)},{noop:!0})});var V8e=x(()=>{});function e5e({url:e,description:t}){let o=new URL(e).pathname.split("/")[2],i=Object.keys(pt).find(m=>m.toLowerCase()===o?.toLowerCase())||o;if(tn([`plugins.${i??""}.enabled`]),!i)return null;let s=pt[i],a=jw[i];if(a||!s){let m=a?`${i} is only available on the ${x$[jw[i]]}`:"This plugin is not on this version of Equicord. Try updating!",g=r(jh,{name:i,description:t||m,enabled:!1,setEnabled:()=>{},disabled:!0,infoButton:r(UL,null)});return t?r(ii,{text:m},g):g}let l=()=>Re("A restart is required for the change to take effect!"),c=rt(()=>{let m={};for(let g in pt){let y=pt[g].dependencies;if(y)for(let b of y)m[b]??=[],m[b].push(g)}return m},[]),u=lU(i),p=c[s.name]?.filter(m=>yt(m));if(u){let m=s.required||!p.length?"This plugin is required for Equicord to function.":r(qw,{deps:p});return r(Ue,{text:m,key:s.name},({onMouseLeave:g,onMouseEnter:y})=>r($l,{key:s.name,onMouseLeave:g,onMouseEnter:y,onRestartNeeded:l,plugin:s,disabled:!0}))}return r($l,{key:s.name,onRestartNeeded:l,plugin:s})}var t5e,o5e=x(()=>{"use strict";d();V8e();Wo();Q();tt();ao();fa();KA();j1();du();H();xt();B();Ps();t5e=ee.wrap(function({message:t}){let o=new Set,n=[];t.embeds?.forEach(s=>{if(!s.url?.startsWith("https://equicord.org/plugins/")&&!s.url?.startsWith("https://vencord.dev/plugins/")||!(l0(t.channel_id)&&bh(t.author.id)))return;let l=new URL(s.url).pathname.split("/")[2],u=Object.keys(pt).find(p=>p.toLowerCase()===l?.toLowerCase())||l;!u||o.has(u)||(o.add(u),s.rawDescription.startsWith("A fork that has")&&(s.rawDescription=""),n.push(r(e5e,{key:s.url,url:s.url,description:s.rawDescription})))});let i=t.components?.[0]?.components;if(t.author.id===RS&&i?.length>=4){let s=i[1]?.content,a=i.find(l=>l?.components)?.components[0]?.url;if(a?.startsWith("https://equicord.org/plugins/")||a?.startsWith("https://vencord.dev/plugins/")){let l=new URL(a).pathname.split("/")[2],u=Object.keys(pt).find(p=>p.toLowerCase()===l?.toLowerCase())||l;u&&!o.has(u)&&(o.add(u),n.push(r(e5e,{key:a,url:a,description:s})))}}return n.length===0?null:r("div",{className:"vc-plugins-management-cards vc-plugins-grid",style:{marginTop:"0px"}},n)},{noop:!0})});var n5e,Lf,CM,r5e=x(()=>{"use strict";d();yi();Wo();Q();e3();H();xt();$();B();J8e();o5e();n5e=!1,Lf=R({noMirroredCamera:{type:3,description:"Prevents the camera from being mirrored on your screen",restartNeeded:!0,default:!1},removeActivitySection:{type:3,description:"Removes the activity section above member list",restartNeeded:!0,default:!1},showYourOwnActivityButtons:{type:3,description:"Discord hides your own activity buttons for some reason",restartNeeded:!0,default:!1},noDefaultHangStatus:{type:3,description:"Disable the default hang status when joining voice channels",restartNeeded:!0,default:!1},refreshSlashCommands:{type:3,description:"Refreshes Slash Commands to show newly added commands without restarting your client.",default:!1},forceRoleIcon:{type:3,description:"Forces role icons to display next to messages in compact mode",restartNeeded:!0,default:!1}}),CM=k({name:"EquicordHelper",description:"Used to provide support, fix discord caused crashes, and other misc features.",authors:[w.thororen,j.nyx,j.Naibuu,j.keyages,j.SerStars,j.mart],required:!0,settings:Lf,patches:[{find:"Unknown resolution:",replacement:[{match:/throw Error\(`Unknown resolution: \$\{(\i)\}`\)/,replace:"return $1;"},{match:/throw Error\(`Unknown frame rate: \$\{(\i)\}`\)/,replace:"return $1;"}]},{find:".STATUS_WARNING_BACKGROUND})})",predicate:()=>Lf.store.noMirroredCamera,replacement:{match:/mirror:\i/,replace:"mirror:!1"}},{find:"this.handleReady})",all:!0,predicate:()=>Lf.store.noMirroredCamera,replacement:{match:/(\[\i\.\i\]:)\i/,replace:"$1!1"}},{find:".PREVIEW_CAMERA_MODAL,",replacement:{match:/className:\i.\i,(?=children:\()/,replace:'$&style:{transform: "scalex(1)"},'},predicate:()=>Lf.store.noMirroredCamera},{find:".MEMBERLIST_CONTENT_FEED_TOGGLED,",predicate:()=>Lf.store.removeActivitySection,replacement:{match:/null==\i\|\|/,replace:"true||$&"}},{find:".USER_PROFILE_ACTIVITY_BUTTONS),",predicate:()=>Lf.store.showYourOwnActivityButtons&&!yt(rg.name),replacement:{match:/.getId\(\)===\i.id/,replace:"$& && false"}},{find:".CHILLING)",predicate:()=>Lf.store.noDefaultHangStatus,replacement:{match:/{enableHangStatus:(\i),/,replace:"{_enableHangStatus:$1=false,"}},{find:".DEVELOPER_SECTION,",replacement:[{match:/\i\.\i\.isDeveloper/,replace:"true"}]},{find:"Message Username",predicate:()=>Lf.store.forceRoleIcon,replacement:{match:/(?<=\}\):null\].{0,150}\?2:)0(?=\})/,replace:"1"}}],renderMessageAccessory(e){return r(f,null,r(X8e,{message:e.message}),r(t5e,{message:e.message}))},flux:{async CHANNEL_SELECT({channelId:e}){if(!LS.includes(e))return;let o=z.getCurrentUser()?.id;if(!(!o||lu(o))&&IL.includes(e)&&!n5e)return go.show({title:"Vencord Support Channel Warning",body:"Before asking for help. Check updates and if this issue is actually caused by Equicord!",confirmText:"Equicord Support",onConfirm(){ho.transitionTo(`/channels/${au}/${ip}`)},cancelText:"Okay continue",onCancel(){n5e=!0}})}},commands:[{name:"refresh-commands",description:"Refresh Slash Commands",inputType:0,predicate:()=>Lf.store.refreshSlashCommands,execute:async(e,t)=>{try{fw.indices={},Vt(t.channel.id,{content:"Slash Commands refreshed successfully."})}catch(o){console.error("[refreshSlashCommands] Failed to refresh commands:",o),Vt(t.channel.id,{content:"Failed to refresh commands. Check console for details."})}}}]})});function i5e(){let e=s5e.store.amount;MQ++,MQ%e===0&&(NQ?.play(),MQ=0)}var MQ,NQ,s5e,TM,a5e=x(()=>{"use strict";d();Ol();Q();H();$();MQ=0,NQ=null;s5e=R({amount:{type:1,description:"amount of clicks to trigger crossant",default:10}}),TM=k({name:"Equissant",description:"Crossant every specified amount of clicks :trolley:",authors:[j.SomeAspy,w.thororen],dependencies:["AudioPlayerAPI"],settings:s5e,start(){NQ=fd("https://github.com/Equicord/Equibored/raw/main/sounds/equissant/croissant.mp3",{persistent:!0}),document.addEventListener("click",i5e)},stop(){NQ?.delete(),document.removeEventListener("click",i5e)}})});var l5e=x(()=>{});function Aat(){let{soundGuildId:e}=Lg.use(["soundGuildId"]),t=Object.values(ct.getGuilds()).map(o=>({value:o.id,label:o.name}));return r(Ii,{options:t,value:t.find(o=>o.value===e),placeholder:"Select a server...",maxVisibleItems:6,closeOnSelect:!0,onChange:o=>Lg.store.soundGuildId=o,renderOptionPrefix:o=>{let n=ct.getGuild(o?.value);return n?.icon?r("img",{className:PQ("guild-icon"),src:To.getGuildIconURL({id:n.id,icon:n.icon,size:32})}):null}})}function Cat(){let{soundId:e}=Lg.use(["soundId"]);return r("div",{className:PQ("input-row")},r("div",{className:PQ("input-wrapper")},r(qe,{value:e,onChange:t=>Lg.store.soundId=t,placeholder:"Enter sound ID..."})),r(Me,{onClick:()=>_s(`https://${window.GLOBAL_ENV.CDN_HOST}/soundboard-sounds/${e}`,{volume:50}),disabled:!e},r(Eat,{color:"currentColor"})))}var PQ,Eat,Lg,Tat,BQ,IM,c5e=x(()=>{"use strict";d();l5e();Ol();Q();Co();H();nt();$();fe();B();PQ=de("vc-exitsounds-"),Eat=De("4.96v14.08c0");Lg=R({soundGuildId:{type:6,description:"Select the server containing the sound.",component:Aat},soundId:{type:6,description:"Enter the ID of the sound you want to play.",component:Cat}}),Tat=(e,{sound:t})=>{e.splice(1,0,r(M.MenuGroup,null,r(M.MenuItem,{id:"set-global-exit-sound",label:"Set as global exit sound",action:()=>{Lg.store.soundGuildId=t.guildId,Lg.store.soundId=t.soundId}})))},IM=k({name:"ExitSounds",description:"Play soundboard sounds when you disconnect from voice.",authors:[w.prism],dependencies:["AudioPlayerAPI"],settings:Lg,contextMenus:{"sound-button-context":Tat},start(){BQ=Dh.selectVoiceChannel,Dh.selectVoiceChannel=async(e,...t)=>{let{soundGuildId:o,soundId:n}=Lg.store,i=st.getVoiceChannelId();if(o&&n&&i!==e&&!On.isDeaf())try{await Ht.post({url:jo.Endpoints.SEND_SOUNDBOARD_SOUND(i),body:{sound_id:n,source_guild_id:o}}),await new Promise(s=>setTimeout(s,500))}catch{D.show({message:"Oops! Something went wrong.",id:D.genId(),type:D.Type.FAILURE})}return BQ(e,...t)}},stop(){Dh.selectVoiceChannel=BQ}})});var u5e=x(()=>{});function Dat(e){let{author:t}=e,n=`[${new Date(e.timestamp.toString()).toLocaleString()}] ${t.username}`;return t.discriminator!=="0"&&(n+=`#${t.discriminator}`),n+=`: ${e.content}`,e.attachments?.length>0&&(n+=`
  Attachments:`,e.attachments.forEach(i=>{n+=`
    - ${i.filename} (${i.url})`})),e.embeds?.length>0&&(n+=`
  Embeds:`,e.embeds.forEach(i=>{i.rawTitle&&(n+=`
    Title: ${i.rawTitle}`),i.rawDescription&&(n+=`
    Description: ${i.rawDescription}`),i.url&&(n+=`
    URL: ${i.url}`)})),n}async function Mat(e){let t=new Date(e.timestamp.toString()).toISOString().split("T")[0],o=`message-${e.id}-${t}.txt`,n=Dat(e);try{{let i=new File([n],o,{type:"text/plain"});su(i)}qt({title:"Export Messages",body:`Message exported successfully as ${o}`,icon:"\u{1F4C4}"})}catch{qt({title:"Export Messages",body:"Failed to export message",icon:"\u274C"})}}function DM(e,t){return e.filter(o=>o.type===t).map(o=>o.user.discriminator==="0"?o.user.username:o.user.username+"#"+o.user.discriminator)}var Iat,Nat,MM,d5e=x(()=>{"use strict";d();u5e();_a();Q();tt();cs();H();yd();$();rd();B();Iat=R({openFileAfterExport:{type:3,description:"Open the exported file in the default file handler after export",default:!0},exportContacts:{type:3,description:"Export a list of friends to your clipboard. Adds a new button to the menu bar for the friends tab.",default:!1}});Nat=(e,t)=>{let{message:o}=t;o&&e.push(r(M.MenuItem,{id:"export-message",label:"Export Message",icon:()=>r("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor"},r("path",{d:"M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"})),action:()=>Mat(o)}))};MM=k({name:"ExportMessages",description:"Allows you to export any message to a file",authors:[j.veygax,j.dat_insanity],settings:Iat,contextMenus:{message:Nat},patches:[{find:"fetchRelationships(){",replacement:{match:/(\.then\(\i)=>(\i\.\i\.dispatch\({type:"LOAD_RELATIONSHIPS_SUCCESS",relationships:(\i\.body)}\))/,replace:"$1=>{$2; $self.getContacts($3)}"}},{find:'[role="tab"][aria-disabled="false"]',replacement:{match:/("aria-label":(\i).{0,25})(\i)\.Children\.map\((\i),this\.renderChildren\)/,replace:"$1($3 && $3.Children? ($2 === 'Friends'? [...$3.Children.map($4, this.renderChildren), $self.addExportButton()]: [...$3.Children.map($4, this.renderChildren)]): $3.map($4, this.renderChildren))"}}],getContacts(e){this.contactList={friendsAdded:[...DM(e,1)],blockedUsers:[...DM(e,2)],incomingFriendRequests:[...DM(e,3)],outgoingFriendRequests:[...DM(e,4)]}},addExportButton(){return r(ee,{noop:!0,key:".2"},r("button",{className:"export-contacts-button",onClick:()=>{this.copyContactToClipboard(),console.log("clicked")}},"Export"))},copyContactToClipboard(){if(this.contactList){Oo(JSON.stringify(this.contactList)),D.show({message:"Contacts copied to clipboard successfully.",type:D.Type.SUCCESS,id:D.genId(),options:{duration:3e3,position:D.Position.BOTTOM}});return}D.show({message:'Contact list is undefined. Click on the "All" tab before exporting.',type:D.Type.FAILURE,id:D.genId(),options:{duration:3e3,position:D.Position.BOTTOM}})}})});function Pat(){let[e,t]=L(!1),{keyBind:o,reqCtrl:n,reqShift:i,reqAlt:s}=p5e.store,a=gn(l=>{let c=l.code===o&&(!n||l.ctrlKey)&&(!i||l.shiftKey)&&(!s||l.altKey);t(c)},[o,n,i,s]);return se(()=>(window.addEventListener("keydown",a),window.addEventListener("keyup",a),()=>{window.removeEventListener("keydown",a),window.removeEventListener("keyup",a)}),[a]),e}var Bat,p5e,NM,m5e=x(()=>{"use strict";d();Q();H();$();B();Bat=["Backspace","Tab","Enter","ShiftLeft","ShiftRight","ControlLeft","ControlRight","AltLeft","AltRight","Pause","CapsLock","Escape","Space","PageUp","PageDown","End","Home","ArrowLeft","ArrowUp","ArrowRight","ArrowDown","PrintScreen","Insert","Delete","Digit0","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","KeyA","KeyB","KeyC","KeyD","KeyE","KeyF","KeyG","KeyH","KeyI","KeyJ","KeyK","KeyL","KeyM","KeyN","KeyO","KeyP","KeyQ","KeyR","KeyS","KeyT","KeyU","KeyV","KeyW","KeyX","KeyY","KeyZ","MetaLeft","MetaRight","ContextMenu","Numpad0","Numpad1","Numpad2","Numpad3","Numpad4","Numpad5","Numpad6","Numpad7","Numpad8","Numpad9","NumpadMultiply","NumpadAdd","NumpadSubtract","NumpadDecimal","NumpadDivide","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","NumLock","ScrollLock"];p5e=R({keyBind:{description:"The key to toggle trash when pressed.",type:0,default:"KeyZ",isValid:e=>Bat.includes(e)},reqCtrl:{description:"Require control to be held.",type:3,default:!0},reqShift:{description:"Require shift to be held.",type:3,default:!0},reqAlt:{description:"Require alt to be held.",type:3,default:!1}}),NM=k({name:"FastDeleteChannels",description:"Adds a trash icon to delete channels",authors:[w.thororen],settings:p5e,patches:[{find:"UNREAD_IMPORTANT:",replacement:{match:/\.Children\.count.+?:null(?<=,channel:(\i).+?)/,replace:"$&,$self.TrashIcon($1)"}},{find:"18V16H9v2H6Zm3",replacement:{match:/mentionsCount:\i.+?null(?<=channel:(\i).+?)/,replace:"$&,$self.TrashIcon($1)"}}],TrashIcon:e=>!Pat()||!Kt.can(Nt.MANAGE_CHANNELS,e)?null:r("span",{onClick:()=>Ht.del({url:jo.Endpoints.CHANNEL(e.id)})},r("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 24 24",color:"#ed4245"},r("path",{fill:"currentColor",d:"M14.25 1c.41 0 .75.34.75.75V3h5.25c.41 0 .75.34.75.75v.5c0 .41-.34.75-.75.75H3.75A.75.75 0 0 1 3 4.25v-.5c0-.41.34-.75.75-.75H9V1.75c0-.41.34-.75.75-.75h4.5Z"}),r("path",{fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd",d:"M5.06 7a1 1 0 0 0-1 1.06l.76 12.13a3 3 0 0 0 3 2.81h8.36a3 3 0 0 0 3-2.81l.75-12.13a1 1 0 0 0-1-1.06H5.07ZM11 12a1 1 0 1 0-2 0v6a1 1 0 1 0 2 0v-6Zm3-1a1 1 0 1 1 1 1v6a1 1 0 1 1-2 0v-6a1 1 0 0 1 1-1Z"})))})});var _at,Rat,f5e,BM,g5e=x(()=>{"use strict";d();H();$();fe();B();_at=De("#{intl::GIF_TOOLTIP_ADD_TO_FAVORITES}"),Rat=et("gifFavoriteButton","ctaButtonContainer"),f5e=fr(()=>X.createContext(null)),BM=k({name:"FavouriteAnything",description:"Favourite any image",authors:[w.nin0dev,j.davri],patches:[{find:"static isAnimated",replacement:[{match:/static isAnimated\((\i)\)\{/,replace:"static isAnimated($1,override){if(!override)return true;"},{match:/(?<=this\.props\.renderAccessory\(\):)null/,replace:"$self.Accessory({...this.props,url:this.props.proxyUrl,video:true})"},{match:/getSrc\(\i\)\{.*?let \i=/,replace:"$&!this.constructor.isAnimated(this.props,true)||"},{match:"return this.props.shouldRenderAccessory?",replace:"$&!this.constructor.isAnimated(this.props,true)||"}]},{find:"#{intl::SUPPRESS_ALL_EMBEDS}",replacement:{match:"render()",replace:"$&{return $self.renderEmbed.call(this)}__render()"}},{find:"renderComponentAccessories",replacement:{match:/\i=>\(\)=>\{.{200,300}?null\}/,replace:"props=>()=>$self.Accessory({...props,video:false})"}},{find:/disableArrowKeySeek:\i\}\)\}/,replacement:{match:/src:\i(?=,\.\.\.\i)/,replace:"$&,proxyUrl:this.props.src"}}],renderEmbed(){return r(f5e.Provider,{value:this.props.embed},this.__render())},Accessory(e){let t=X.useContext(f5e),o=t?.image??t?.video,{url:n,proxyUrl:i,width:s,height:a,video:l}=t&&o?{...o,url:t.type==="gifv"&&t.url||o.url,proxyUrl:o.proxyURL,video:!!t.video}:e;return!s||!a||!n?null:r(_at,{format:l?2:1,className:Rat?.gifFavoriteButton,src:i??n,url:n,width:s,height:a})}})});var _Q,PM=x(()=>{"use strict";d();_Q={zipline:"Zipline",nest:"Nest",ezhost:"E-Z Host"}});function x5e(){let e=Vo(),{store:t}=El,o=t.serviceType==="nest",n=t.serviceType==="ezhost",i=t.serviceType==="zipline",s=[{label:"Zipline",value:"zipline"},{label:"E-Z Host",value:"ezhost"}];return r(f,null,r(ci,{name:"Service Type",description:"The upload service to use"},r(to,{options:s,isSelected:a=>a===t.serviceType,select:a=>{t.serviceType=a,e()},serialize:a=>a,placeholder:"Select a service"})),i&&r(ci,{name:"Service URL",description:"The URL of your Zipline instance"},r(qe,{value:t.serviceUrl,onChange:a=>t.serviceUrl=a,placeholder:"https://your-zipline-instance.com"})),i&&r(ci,{name:"Zipline Token",description:"Your Zipline API authorization token"},r(qe,{value:t.ziplineToken,onChange:a=>t.ziplineToken=a,placeholder:"Your Zipline API token"})),n&&r(ci,{name:"E-Z Host API Key",description:"Your E-Z Host API key"},r(qe,{value:t.ezHostKey||"",onChange:a=>t.ezHostKey=a,placeholder:"Your E-Z Host API key"})),o&&r(ci,{name:"Nest Token",description:"Your Nest API authorization token"},r(qe,{value:t.nestToken,onChange:a=>t.nestToken=a,placeholder:"Your Nest API token"})),i&&r(ci,{name:"Folder ID",description:"Folder ID for uploads (leave empty for no folder)"},r(qe,{value:t.folderId,onChange:a=>t.folderId=a,placeholder:"Leave empty for no folder"})),r(ci,{tag:"label",name:"Strip Query Parameters",description:"Strip query parameters from the uploaded file URL",inlineSetting:!0},r(os,{checked:t.stripQueryParams,onChange:a=>t.stripQueryParams=a})),r(ci,{tag:"label",name:"Convert APNG to GIF",description:"Convert APNG files to GIF format",inlineSetting:!0},r(os,{checked:t.apngToGif,onChange:a=>t.apngToGif=a})),r(ci,{tag:"label",name:"Auto Copy URL",description:"Automatically copy the uploaded file URL to clipboard",inlineSetting:!0},r(os,{checked:t.autoCopy,onChange:a=>t.autoCopy=a})))}var y5e=x(()=>{"use strict";d();xp();Im();qo();B();_M();PM()});function RQ(e){let t=e.split(";")[0].trim().toLowerCase();return Uat[t]}function v5e(e){return $at[e.toLowerCase()]||"application/octet-stream"}async function S5e(e){let t=await e.slice(0,12).arrayBuffer(),o=new Uint8Array(t);if(o[0]===71&&o[1]===73&&o[2]===70&&o[3]===56)return"gif";if(o[0]===137&&o[1]===80&&o[2]===78&&o[3]===71){let n=await e.slice(0,4096).arrayBuffer(),i=new Uint8Array(n);for(let s=0;s<i.length-4;s++)if(i[s]===97&&i[s+1]===99&&i[s+2]===84&&i[s+3]===76)return"apng";return"png"}if(o[0]===82&&o[1]===73&&o[2]===70&&o[3]===70&&o[8]===87&&o[9]===69&&o[10]===66&&o[11]===80)return"webp";if(o[0]===255&&o[1]===216&&o[2]===255)return"jpg"}function LQ(e){!e.startsWith("https:")&&!e.startsWith("http:")&&(e="https:"+e);try{let{pathname:t}=new URL(e);t=t.replace(/\/+$/,"");let o=t.split("/").pop()||"";if(!o.includes("."))return;let n=o.split(".").pop()?.toLowerCase();return!n||n.length===0||n.length>10?void 0:n}catch{return}}function b5e(e){let t=LQ(e);return t?Fat.includes(t):!1}function OQ(e){let t=e.src||e.href||e.itemSrc||e.itemHref;if(t&&b5e(t))return t;if(e.target?.closest){let o=e.target.closest("img")||e.target.querySelector?.("img"),n=e.target.closest("video")||e.target.querySelector?.("video"),i=o?.src||n?.src;if(i&&b5e(i))return i}return null}var Lat,Oat,Fat,Uat,$at,FQ=x(()=>{"use strict";d();Lat=["png","jpg","jpeg","gif","webp","bmp","ico","tiff","avif","svg"],Oat=["mp4","webm","ogg","avi","wmv","flv","mov","mkv","m4v"],Fat=[...Lat,...Oat],Uat={"image/png":"png","image/jpeg":"jpg","image/gif":"gif","image/webp":"webp","image/bmp":"bmp","image/x-icon":"ico","image/tiff":"tiff","image/avif":"avif","image/svg+xml":"svg","video/mp4":"mp4","video/webm":"webm","video/ogg":"ogg","video/x-msvideo":"avi","video/x-ms-wmv":"wmv","video/x-flv":"flv","video/quicktime":"mov","video/x-matroska":"mkv"};$at={png:"image/png",apng:"image/apng",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",webp:"image/webp",bmp:"image/bmp",ico:"image/x-icon",tiff:"image/tiff",avif:"image/avif",svg:"image/svg+xml",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",avi:"video/x-msvideo",wmv:"video/x-ms-wmv",flv:"video/x-flv",mov:"video/quicktime",mkv:"video/x-matroska"}});var Hat,wLo,br,w5e=x(()=>{d();Hat="0.12.6",wLo=`https://unpkg.com/@ffmpeg/core@${Hat}/dist/umd/ffmpeg-core.js`;(function(e){e.LOAD="LOAD",e.EXEC="EXEC",e.WRITE_FILE="WRITE_FILE",e.READ_FILE="READ_FILE",e.DELETE_FILE="DELETE_FILE",e.RENAME="RENAME",e.CREATE_DIR="CREATE_DIR",e.LIST_DIR="LIST_DIR",e.DELETE_DIR="DELETE_DIR",e.ERROR="ERROR",e.DOWNLOAD="DOWNLOAD",e.PROGRESS="PROGRESS",e.LOG="LOG",e.MOUNT="MOUNT",e.UNMOUNT="UNMOUNT"})(br||(br={}))});var k5e,E5e=x(()=>{d();k5e=(()=>{let e=0;return()=>e++})()});var TLo,A5e,C5e,ILo,T5e=x(()=>{d();TLo=new Error("unknown message type"),A5e=new Error("ffmpeg is not loaded, call `await ffmpeg.load()` first"),C5e=new Error("called FFmpeg.terminate()"),ILo=new Error("failed to import ffmpeg-core.js")});var I5e,Og,D5e=x(()=>{d();w5e();E5e();T5e();I5e={},Og=class{#e=null;#t={};#o={};#n=[];#r=[];loaded=!1;#a=()=>{this.#e&&(this.#e.onmessage=({data:{id:t,type:o,data:n}})=>{switch(o){case br.LOAD:this.loaded=!0,this.#t[t](n);break;case br.MOUNT:case br.UNMOUNT:case br.EXEC:case br.WRITE_FILE:case br.READ_FILE:case br.DELETE_FILE:case br.RENAME:case br.CREATE_DIR:case br.LIST_DIR:case br.DELETE_DIR:this.#t[t](n);break;case br.LOG:this.#n.forEach(i=>i(n));break;case br.PROGRESS:this.#r.forEach(i=>i(n));break;case br.ERROR:this.#o[t](n);break}delete this.#t[t],delete this.#o[t]})};#i=({type:t,data:o},n=[],i)=>this.#e?new Promise((s,a)=>{let l=k5e();this.#e&&this.#e.postMessage({id:l,type:t,data:o},n),this.#t[l]=s,this.#o[l]=a,i?.addEventListener("abort",()=>{a(new DOMException(`Message # ${l} was aborted`,"AbortError"))},{once:!0})}):Promise.reject(A5e);on(t,o){t==="log"?this.#n.push(o):t==="progress"&&this.#r.push(o)}off(t,o){t==="log"?this.#n=this.#n.filter(n=>n!==o):t==="progress"&&(this.#r=this.#r.filter(n=>n!==o))}load=({classWorkerURL:t,...o}={},{signal:n}={})=>(this.#e||(this.#e=t?new Worker(new URL(t,I5e.url),{type:"module"}):new Worker(new URL("./worker.js",I5e.url),{type:"module"}),this.#a()),this.#i({type:br.LOAD,data:o},void 0,n));exec=(t,o=-1,{signal:n}={})=>this.#i({type:br.EXEC,data:{args:t,timeout:o}},void 0,n);terminate=()=>{let t=Object.keys(this.#o);for(let o of t)this.#o[o](C5e),delete this.#o[o],delete this.#t[o];this.#e&&(this.#e.terminate(),this.#e=null,this.loaded=!1)};writeFile=(t,o,{signal:n}={})=>{let i=[];return o instanceof Uint8Array&&i.push(o.buffer),this.#i({type:br.WRITE_FILE,data:{path:t,data:o}},i,n)};mount=(t,o,n)=>{let i=[];return this.#i({type:br.MOUNT,data:{fsType:t,options:o,mountPoint:n}},i)};unmount=t=>{let o=[];return this.#i({type:br.UNMOUNT,data:{mountPoint:t}},o)};readFile=(t,o="binary",{signal:n}={})=>this.#i({type:br.READ_FILE,data:{path:t,encoding:o}},void 0,n);deleteFile=(t,{signal:o}={})=>this.#i({type:br.DELETE_FILE,data:{path:t}},void 0,o);rename=(t,o,{signal:n}={})=>this.#i({type:br.RENAME,data:{oldPath:t,newPath:o}},void 0,n);createDir=(t,{signal:o}={})=>this.#i({type:br.CREATE_DIR,data:{path:t}},void 0,o);listDir=(t,{signal:o}={})=>this.#i({type:br.LIST_DIR,data:{path:t}},void 0,o);deleteDir=(t,{signal:o}={})=>this.#i({type:br.DELETE_DIR,data:{path:t}},void 0,o)}});var RM=x(()=>{d();D5e()});async function Gat(){return M5e&&b2?b2:LM||(LM=(async()=>{b2=new Og;let e="https://cdn.jsdelivr.net/npm/@ffmpeg/core@0.12.6/dist/esm",t=`/// <reference no-default-lib="true" />
/// <reference lib="esnext" />
/// <reference lib="webworker" />
const MIME_TYPE_JAVASCRIPT = "text/javascript";
const MIME_TYPE_WASM = "application/wasm";
const CORE_VERSION = "0.12.6";
const CORE_URL = \`https://cdn.jsdelivr.net/npm/@ffmpeg/core@\${CORE_VERSION}/dist/umd/ffmpeg-core.js\`;
var FFMessageType;
(function(FFMessageType) {
  FFMessageType["LOAD"] = "LOAD";
  FFMessageType["EXEC"] = "EXEC";
  FFMessageType["WRITE_FILE"] = "WRITE_FILE";
  FFMessageType["READ_FILE"] = "READ_FILE";
  FFMessageType["DELETE_FILE"] = "DELETE_FILE";
  FFMessageType["RENAME"] = "RENAME";
  FFMessageType["CREATE_DIR"] = "CREATE_DIR";
  FFMessageType["LIST_DIR"] = "LIST_DIR";
  FFMessageType["DELETE_DIR"] = "DELETE_DIR";
  FFMessageType["ERROR"] = "ERROR";
  FFMessageType["DOWNLOAD"] = "DOWNLOAD";
  FFMessageType["PROGRESS"] = "PROGRESS";
  FFMessageType["LOG"] = "LOG";
  FFMessageType["MOUNT"] = "MOUNT";
  FFMessageType["UNMOUNT"] = "UNMOUNT";
})(FFMessageType || (FFMessageType = {}));


const ERROR_UNKNOWN_MESSAGE_TYPE = new Error("unknown message type");
const ERROR_NOT_LOADED = new Error("ffmpeg is not loaded, call \`await ffmpeg.load()\` first");
const ERROR_TERMINATED = new Error("called FFmpeg.terminate()");
const ERROR_IMPORT_FAILURE = new Error("failed to import ffmpeg-core.js");

let ffmpeg;
const load = async ({ coreURL: _coreURL, wasmURL: _wasmURL, workerURL: _workerURL, }) => {
  const first = !ffmpeg;
  try {
    if (!_coreURL)
      _coreURL = CORE_URL;
    // when web worker type is \`classic\`.
    importScripts(_coreURL);
  }
  catch {
    if (!_coreURL)
      _coreURL = CORE_URL.replace('/umd/', '/esm/');
    // when web worker type is \`module\`.
    self.createFFmpegCore = (await import(
        /* webpackIgnore: true */ /* @vite-ignore */ _coreURL)).default;
    if (!self.createFFmpegCore) {
      throw ERROR_IMPORT_FAILURE;
    }
  }
  const coreURL = _coreURL;
  const wasmURL = _wasmURL ? _wasmURL : _coreURL.replace(/.js$/g, ".wasm");
  const workerURL = _workerURL
    ? _workerURL
    : _coreURL.replace(/.js$/g, ".worker.js");
  ffmpeg = await self.createFFmpegCore({
    // Fix \`Overload resolution failed.\` when using multi-threaded ffmpeg-core.
    // Encoded wasmURL and workerURL in the URL as a hack to fix locateFile issue.
    mainScriptUrlOrBlob: \`\${coreURL}#\${btoa(JSON.stringify({ wasmURL, workerURL }))}\`,
  });
  ffmpeg.setLogger((data) => self.postMessage({ type: FFMessageType.LOG, data }));
  ffmpeg.setProgress((data) => self.postMessage({
    type: FFMessageType.PROGRESS,
    data,
  }));
  return first;
};
const exec = ({ args, timeout = -1 }) => {
  ffmpeg.setTimeout(timeout);
  ffmpeg.exec(...args);
  const ret = ffmpeg.ret;
  ffmpeg.reset();
  return ret;
};
const writeFile = ({ path, data }) => {
  ffmpeg.FS.writeFile(path, data);
  return true;
};
const readFile = ({ path, encoding }) => ffmpeg.FS.readFile(path, { encoding });
// TODO: check if deletion works.
const deleteFile = ({ path }) => {
  ffmpeg.FS.unlink(path);
  return true;
};
const rename = ({ oldPath, newPath }) => {
  ffmpeg.FS.rename(oldPath, newPath);
  return true;
};
// TODO: check if creation works.
const createDir = ({ path }) => {
  ffmpeg.FS.mkdir(path);
  return true;
};
const listDir = ({ path }) => {
  const names = ffmpeg.FS.readdir(path);
  const nodes = [];
  for (const name of names) {
    const stat = ffmpeg.FS.stat(\`\${path}/\${name}\`);
    const isDir = ffmpeg.FS.isDir(stat.mode);
    nodes.push({ name, isDir });
  }
  return nodes;
};
// TODO: check if deletion works.
const deleteDir = ({ path }) => {
  ffmpeg.FS.rmdir(path);
  return true;
};
const mount = ({ fsType, options, mountPoint }) => {
  const str = fsType;
  const fs = ffmpeg.FS.filesystems[str];
  if (!fs)
    return false;
  ffmpeg.FS.mount(fs, options, mountPoint);
  return true;
};
const unmount = ({ mountPoint }) => {
  ffmpeg.FS.unmount(mountPoint);
  return true;
};
self.onmessage = async ({ data: { id, type, data: _data }, }) => {
  const trans = [];
  let data;
  try {
    if (type !== FFMessageType.LOAD && !ffmpeg)
      throw ERROR_NOT_LOADED; // eslint-disable-line
    switch (type) {
      case FFMessageType.LOAD:
        data = await load(_data);
        break;
      case FFMessageType.EXEC:
        data = exec(_data);
        break;
      case FFMessageType.WRITE_FILE:
        data = writeFile(_data);
        break;
      case FFMessageType.READ_FILE:
        data = readFile(_data);
        break;
      case FFMessageType.DELETE_FILE:
        data = deleteFile(_data);
        break;
      case FFMessageType.RENAME:
        data = rename(_data);
        break;
      case FFMessageType.CREATE_DIR:
        data = createDir(_data);
        break;
      case FFMessageType.LIST_DIR:
        data = listDir(_data);
        break;
      case FFMessageType.DELETE_DIR:
        data = deleteDir(_data);
        break;
      case FFMessageType.MOUNT:
        data = mount(_data);
        break;
      case FFMessageType.UNMOUNT:
        data = unmount(_data);
        break;
      default:
        throw ERROR_UNKNOWN_MESSAGE_TYPE;
    }
  }
  catch (e) {
    self.postMessage({
      id,
      type: FFMessageType.ERROR,
      data: e.toString(),
    });
    return;
  }
  if (data instanceof Uint8Array) {
    trans.push(data.buffer);
  }
  self.postMessage({ id, type, data }, trans);
};

`,o=new Blob([new TextEncoder().encode(t)],{type:"text/javascript"}),n=URL.createObjectURL(o);return await b2.load({coreURL:`${e}/ffmpeg-core.js`,wasmURL:`${e}/ffmpeg-core.wasm`,workerURL:`${e}/ffmpeg-core.worker.js`,classWorkerURL:n}),M5e=!0,console.log("[FileUpload] FFmpeg loaded"),b2})(),LM)}async function N5e(e){let t=zat++,o=`input_${t}.png`,n=`output_${t}.gif`;try{let i=await Gat(),s=await e.arrayBuffer();await i.writeFile(o,new Uint8Array(s)),await i.exec(["-i",o,"-filter_complex","split[s0][s1];[s0]palettegen=stats_mode=single:transparency_color=000000[p];[s1][p]paletteuse=new=1:alpha_threshold=10",n]);let a=await i.readFile(n);return typeof a=="string"?(console.error("[FileUpload] FFmpeg returned string instead of Uint8Array"),null):new Blob([new Uint8Array(a)],{type:"image/gif"})}catch(i){return console.error("[FileUpload] APNG to GIF conversion error:",i),null}finally{try{let i=b2;i&&(await i.deleteFile(o),await i.deleteFile(n))}catch{}}}var b2,M5e,LM,zat,B5e=x(()=>{"use strict";d();RM();b2=null,M5e=!1,LM=null,zat=0});async function qat(e,t){let{serviceUrl:o,ziplineToken:n,folderId:i}=El.store;if(!o||!n)throw new Error("Service URL and auth token are required");let s=o.replace(/\/+$/,""),a=new FormData;a.append("file",e,t);let l={Authorization:n};i&&(l["x-zipline-folder"]=i);let c=await fetch(`${s}/api/upload`,{method:"POST",headers:l,body:a}),u=c.headers.get("content-type")||"";if(!c.ok){let m=await c.text();throw new Error(`Upload failed: ${c.status} ${m}`)}if(!u.includes("application/json"))throw new Error("Server returned invalid response (not JSON)");let p=await c.json();if(p.files&&p.files.length>0&&p.files[0].url)return p.files[0].url;throw new Error("No URL returned from upload")}async function jat(e,t){if(!v2)throw new Error("Nest upload is only available on desktop");let{nestToken:o}=El.store;if(!o)throw new Error("Auth token is required");let n=await e.arrayBuffer(),i=await v2.uploadToNest(n,t,o);if(!i.success)throw new Error(i.error||"Upload failed");if(!i.url)throw new Error("No URL returned from upload");return i.url}function Wat(){let{serviceType:e,serviceUrl:t,ziplineToken:o,nestToken:n}=El.store;switch(e){case"nest":return!!n;case"ezhost":return!!El.store.ezHostKey;case"zipline":default:return!!(t&&o)}}async function Kat(e,t){let{ezHostKey:o}=El.store;if(!o)throw new Error("E-Z Host API key is required");if(v2){let l=await e.arrayBuffer(),c=await v2.uploadToEzHost(l,t,o);if(!c.success)throw new Error(c.error||"Upload failed");if(!c.url)throw new Error("No URL returned from upload");return c.url}let n=new FormData;n.append("file",e,t);let s=await fetch("https://api.e-z.host/files",{method:"POST",headers:{key:o},body:n});if(!s.ok){let l=await s.text();throw new Error(`Upload failed: ${s.status} ${l}`)}let a=await s.json();if(!a||!a.success)throw new Error(a?.error||"Upload failed");return a.imageUrl||a.rawUrl}async function $Q(e){if(UQ){Re("Upload already in progress",D.Type.MESSAGE);return}if(!Wat()){Re("Please configure FileUpload settings first",D.Type.FAILURE);return}let t=El.store.serviceType;UQ=!0;try{let o=e;e.includes("/stickers/")&&e.includes("passthrough=false")&&(o=e.replace("passthrough=false","passthrough=true"));let n,i;if(v2){let m=await v2.fetchFile(o);if(m.success&&m.data)i=m.contentType||"",n=new Blob([m.data],{type:i});else{let g=await fetch(o);if(!g.ok)throw new Error(`Failed to fetch file: ${g.status}`);i=g.headers.get("content-type")||"",n=await g.blob()}}else{let m=await fetch(o);if(!m.ok)throw new Error(`Failed to fetch file: ${m.status}`);i=m.headers.get("content-type")||"",n=await m.blob()}let s=await S5e(n)||RQ(i)||RQ(n.type)||LQ(e)||"png";if(s==="apng"&&El.store.apngToGif){let m=await N5e(n);m?(n=m,s="gif"):Re("APNG to GIF conversion failed, uploading as APNG",D.Type.FAILURE)}let a=v5e(s),l=new Blob([n],{type:a}),c=`upload.${s}`,u;switch(t){case"zipline":u=await qat(l,c);break;case"nest":u=await jat(l,c);break;case"ezhost":u=await Kat(l,c);break;default:throw new Error("Unknown service type")}let p=u;if(El.store.stripQueryParams)try{let m=new URL(u);m.search="",p=m.href}catch{p=u}El.store.autoCopy?(Oo(p),Re("Upload successful, URL copied to clipboard",D.Type.SUCCESS)):Re("Upload successful",D.Type.SUCCESS)}catch(o){let n=o instanceof Error?o.message:"Unknown error";Re(`Upload failed: ${n}`,D.Type.FAILURE),console.error("[FileUpload] Upload error:",o)}finally{UQ=!1}}var v2,UQ,P5e=x(()=>{"use strict";d();_M();PM();cs();B();B5e();FQ();v2=null,UQ=!1});var El,Yat,Qat,OM,_M=x(()=>{"use strict";d();Un();Q();H();$();B();y5e();PM();FQ();P5e();El=R({serviceType:{type:4,description:"",options:[{label:"Zipline",value:"zipline",default:!0},{label:"E-Z Host",value:"ezhost"}],hidden:!0},serviceUrl:{type:0,description:"",default:"",hidden:!0},ezHostKey:{type:0,description:"E-Z Host API key",default:"",hidden:!0},ziplineToken:{type:0,description:"",default:"",hidden:!0},nestToken:{type:0,description:"",default:"",hidden:!0},folderId:{type:0,description:"",default:"",hidden:!0},stripQueryParams:{type:3,description:"",default:!1,hidden:!0},apngToGif:{type:3,description:"",default:!1,hidden:!0},autoCopy:{type:3,description:"",default:!0,hidden:!0},settingsComponent:{type:6,description:"Settings",component:x5e}}),Yat=(e,t)=>{if(!t)return;let{itemSrc:o,itemHref:n,target:i}=t,s=OQ({src:o,href:n,target:i});if(!s)return;let a=Qt("open-native-link",e)??Qt("copy-link",e);if(a&&!a.some(l=>l?.props?.id==="file-upload")){let l=El.store.serviceType,c=_Q[l];a.push(r(M.MenuItem,{label:`Upload to ${c}`,key:"file-upload",id:"file-upload",action:()=>$Q(s)}))}},Qat=(e,t)=>{if(!t||"href"in t&&!t.src)return;let o=OQ(t);if(!o||e.some(s=>s?.props?.id==="file-upload-group"))return;let n=El.store.serviceType,i=_Q[n];e.push(r(M.MenuGroup,{id:"file-upload-group"},r(M.MenuItem,{label:`Upload to ${i}`,key:"file-upload",id:"file-upload",action:()=>$Q(o)})))},OM=k({name:"FileUpload",description:"Upload images and videos to file hosting services like Zipline and Nest",authors:[j.creations],settings:El,contextMenus:{message:Yat,"image-context":Qat}})});var _5e=x(()=>{});function HQ({replies:e}){let[t,o]=L(1),[n,i]=L(!0),s=kt(null);return X.useEffect(()=>{o(1),i(!0)},[e]),X.useEffect(()=>{function l(c){s.current&&c.target instanceof Element&&!s.current.contains(c.target)&&i(!1)}return document.addEventListener("mousedown",l),()=>{document.removeEventListener("mousedown",l)}},[s]),r(ee,null,r("div",{ref:s,className:Zat.containerBottom+" vc-findreply-div",style:{display:n?"flex":"none"}},r(aw,{className:"vc-findreply-paginator",currentPage:t,maxVisiblePages:5,pageSize:1,totalCount:e.length,onPageChange:a}),r(Ut,{className:"vc-findreply-close",onClick:()=>i(!1)})));function a(l){o(l),zQ.jumpToMessage({channelId:e[l-1].channel_id,messageId:e[l-1].id,flash:!0,jumpType:"INSTANT"})}}var Zat,R5e=x(()=>{"use strict";d();_5e();tt();at();fe();B();GQ();Zat=et("containerBottom","containerTop")});var qQ,L5e=x(()=>{d();(window.VencordStyles??=new Map).set("src/equicordplugins/findReply/styles.css",{name:"src/equicordplugins/findReply/styles.css",source:`.vc-findreply-paginator {
    margin-top: inherit !important;
}

.vc-findreply-close {
    align-items: inherit !important;
    line-height: 0 !important;
}

.vc-findreply-div {
    background-color: var(--background-base-lowest);
    display: flex;
    flex-direction: row;
    align-items: center;
    width: fit-content;
    padding: 10px;
    gap: 10px;
}`,classNames:{},dom:null});qQ="src/equicordplugins/findReply/styles.css"});function Xat(e){let t=[...Rt.getMessages(e.channel_id)?._array??[]].filter(n=>!n.deleted).sort((n,i)=>n.timestamp.toString().localeCompare(i.timestamp.toString())),o=[];for(let n of t)n.timestamp.toString().localeCompare(e.timestamp.toString())<=0||(n.messageReference?.message_id===e.id&&o.push(n),$M.store.includePings&&n.content?.includes(`<@${e.author.id}>`)&&o.push(n),$M.store.includeAuthor&&t.find(i=>i.id===n.messageReference?.message_id)?.author.id===e.author.id&&o.push(n));return o}var zQ,O5e,FM,UM,F5e,$M,HM,GQ=x(()=>{"use strict";d();Q();ps();H();$();fe();B();R5e();L5e();zQ=He("jumpToMessage"),O5e=()=>r("svg",{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",width:"18",height:"18"},r("path",{d:"M 7 3 L 7 11 C 7 11 7 12 6 12 L 5 12 C 4 12 4 12 4.983 13.115 L 8.164 17.036 C 9 18 9 18 9.844 17.018 L 12.991 13.277 C 14 12 14 12 13.006 11.985 L 12 12 C 12 12 11 12 11 11 L 11 3 C 11 2 11 2 10 2 L 8 2 C 7 2 7 2 7 3"})),FM=null,UM=null,F5e=!1;$M=R({includePings:{type:3,description:"Will also search for messages that @ the author directly",default:!1,restartNeeded:!1},includeAuthor:{type:3,description:"Will also search for messages that reply to the author in general, not just that exact message",default:!1,restartNeeded:!1},hideButtonIfNoReply:{type:3,description:"Hides the button if there are no replies to the message",default:!0,restartNeeded:!0}}),HM=k({name:"FindReply",description:"Jumps to the earliest reply to a message in a channel (lets you follow past conversations more easily).",authors:[w.newwares],settings:$M,messagePopoverButton:{icon:O5e,render(e){if(!e.id)return null;let t=Xat(e);return $M.store.hideButtonIfNoReply&&!t.length?null:{label:"Jump to Reply",icon:O5e,message:e,channel:ne.getChannel(e.channel_id),onClick:async()=>{if(t.length){let o=t[0].channel_id,n=t[0].id;if(zQ.jumpToMessage({channelId:o,messageId:n,flash:!0,jumpType:"INSTANT"}),t.length>1){D.show({id:D.genId(),message:"Use the bottom panel to navigate between replies.",type:D.Type.MESSAGE});let i=document.querySelector("[class*=channelBottomBarArea_]");if(!i){D.show({id:D.genId(),message:"Couldn't find the container element.",type:D.Type.FAILURE});return}F5e||(F5e=!0,UM=document.createElement("div"),i.appendChild(UM),FM=Ms(UM)),FM.render(r(HQ,{replies:t}))}}else D.show({id:D.genId(),message:"Couldn't find a reply.",type:D.Type.FAILURE})}}}},start(){Or(qQ)},stop(){FM&&FM.unmount(),UM?.remove(),Fr(qQ)}})});var Yd,U5e,WQ,$5e,jQ,Jat,zM,H5e=x(()=>{"use strict";d();Q();gd();H();$();fe();B();Yd=null,U5e=He("selectVoiceChannel"),WQ=Ft("UserStore"),$5e=Ft("RelationshipStore"),jQ=R({onlyWhenInVoice:{type:3,default:!0,description:"Only follow the user when you are in a voice channel"},leaveWhenUserLeaves:{type:3,default:!1,description:"Leave the voice channel when the user leaves. (That can cause you to sometimes enter infinite leave/join loop)"}}),Jat=(e,{channel:t,user:o})=>{if(WQ.getCurrentUser().id===o.id||!$5e.getFriendIDs().includes(o.id))return;let[n,i]=X.useState(Yd?.userId===o.id);e.push(r(M.MenuSeparator,null),r(M.MenuCheckboxItem,{id:"fvu-follow-user",label:"Follow User",checked:n,action:()=>{if(Yd?.userId===o.id){Yd=null,i(!1);return}Yd={lastChannelId:WQ.getCurrentUser().id,userId:o.id},i(!0)}}))},zM=k({name:"FollowVoiceUser",description:"Follow a friend in voice chat.",authors:[j.TheArmagan],settings:jQ,settingsAboutComponent:()=>r(ur.Info,null,"This Plugin is used to follow a Friend/Friends into voice chat(s)."),flux:{async VOICE_STATE_UPDATES({voiceStates:e}){Yd&&$5e.getFriendIDs().includes(Yd.userId)&&(jQ.store.onlyWhenInVoice&&!lo.getVoiceStateForUser(WQ.getCurrentUser().id)||e.forEach(t=>{t.userId===Yd.userId&&t.channelId&&t.channelId!==Yd.lastChannelId?(Yd.lastChannelId=t.channelId,U5e.selectVoiceChannel(Yd.lastChannelId)):t.userId===Yd.userId&&!t.channelId&&jQ.store.leaveWhenUserLeaves&&U5e.selectVoiceChannel(null)}))}},contextMenus:{"user-context":Jat}})});var z5e=x(()=>{});async function Vat(e){try{let o=await(await fetch("https://fonts.google.com/$rpc/fonts.fe.catalog.actions.metadata.MetadataService/FontSearch",{method:"POST",headers:{"content-type":"application/json+protobuf","x-user-agent":"grpc-web-javascript/0.1"},body:JSON.stringify([[e,null,null,null,null,null,1],[5],null,16])})).json();return o?.[1]?o[1].map(([n,i])=>({family:i[0],displayName:i[1],authors:i[2],category:i[3],variants:i[6].map(s=>({axes:s[0].map(([a,l,c])=>({tag:a,min:l,max:c}))}))})):[]}catch(t){return console.error("Failed to fetch fonts:",t),[]}}function tlt({onSelect:e}){let[t,o]=X.useState(""),[n,i]=X.useState([]),[s,a]=X.useState(!1),l=X.useRef([]);X.useEffect(()=>()=>{l.current.forEach(p=>p.remove())},[]);let c=rn(async p=>{if(a(!0),!p){i([]),a(!1);return}let m=await Vat(p);l.current.forEach(g=>g.remove()),l.current=await Promise.all(m.map(g=>elt(g.family))),i(m),a(!1)},300),u=p=>{o(p),c(p)};return r("section",null,r(so,null,"Search Google Fonts"),r(W,null,"Click on any font to apply it."),r(qe,{value:t,onChange:p=>u(p),placeholder:"Search fonts...",disabled:s,className:Z.bottom16}),n.length>0&&r("div",{className:me(Z.top8,"eq-googlefonts-results")},n.map(p=>r(cn,{key:p.family,className:me("eq-googlefonts-card",Z.bottom8),onClick:()=>e(p)},r("div",{className:"eq-googlefonts-preview",style:{fontFamily:p.family}},r(Vn,null,p.displayName),r(W,null,"The quick brown fox jumps over the lazy dog")),p.authors?.length&&r(W,{className:Z.top8,style:{opacity:.7}},"by ",p.authors.join(", "))))))}var G5e,q5e,elt,Of,j5e,GM,qM,W5e=x(()=>{"use strict";d();z5e();Q();fs();ut();wt();la();H();co();xt();$();B();G5e=(e,t="")=>`https://fonts.googleapis.com/css2?family=${encodeURIComponent(e)}${t}&display=swap`,q5e=e=>(document.head.insertAdjacentHTML("beforeend",`<link rel="stylesheet" href="${e}">`),document.createElement("style"));elt=e=>q5e(G5e(e,"&text=The quick brown fox jumps over the lazy dog")),Of=null,j5e=async e=>{if(!e){Of?.remove(),Of=null;return}try{Of||(Of=document.createElement("style"),document.head.appendChild(Of)),q5e(G5e(e,":wght@300;400;500;600;700")),Of.textContent=`
            * {
                --font-primary: '${e}', sans-serif !important;
                --font-display: '${e}', sans-serif !important;
                --font-headline: '${e}', sans-serif !important;
                ${GM.store.applyOnCodeBlocks?"--font-code: '${fontFamily}', monospace !important;":""}
            }
        `}catch(t){console.error("Failed to load font:",t)}};pp("FontLoader","applyOnCodeBlocks","applyOnClodeBlocks");GM=R({selectedFont:{type:0,description:"Currently selected font",default:"",hidden:!0},fontSearch:{type:6,description:"Search and select Google Fonts",component:()=>r(tlt,{onSelect:e=>{GM.store.selectedFont=e.family,j5e(e.family)}})},applyOnCodeBlocks:{type:3,description:"Apply the font to code blocks",default:!1}}),qM=k({name:"FontLoader",description:"Loads any font from Google Fonts",authors:[j.vmohammad],settings:GM,async start(){let e=GM.store.selectedFont;e&&await j5e(e)},stop(){Of&&(Of.remove(),Of=null)}})});var KQ,jM,K5e=x(()=>{"use strict";d();Q();H();mt();$();KQ=R({forwardPreface:{description:"What should forwarded from be prefaced with",type:4,options:[{label:">",value:">",default:!0},{label:"-#",value:"-#"}]}}),jM=k({name:"ForwardAnywhere",description:"If a forward fails send it as a normal message also allows nsfw forwards",authors:[w.thororen],settings:KQ,patches:[{find:"#{intl::MESSAGE_FORWARDING_NSFW_NOT_ALLOWED}",replacement:{match:/(\{if\().{0,50}(\)return.{0,25}#{intl::MESSAGE_FORWARDING_NSFW_NOT_ALLOWED})/,replace:"$1false$2"}},{find:"#{intl::MESSAGE_ACTION_FORWARD_TO}",replacement:{match:/(?<=let (\i)=.{0,25}rejected.{0,25}\);)(?=.{0,25}message:(\i))/,replace:"if ($1) return $self.sendForward($1,$2);"}}],sendForward(e,t){e.forEach(n=>{if(t.attachments.length)for(let i=0;i<t.attachments.length;i+=5){let s=t.attachments.slice(i,i+5),a=`${t.content}
Attachments:
${s.map(l=>l.url).join(`
`)}
${KQ.store.forwardPreface} Forwarded from <#${t.channel_id}>`;Na(n.id,{content:a})}else Na(n.id,{content:`${t.content}
${KQ.store.forwardPreface} Forwarded from <#${t.channel_id}>`})})}})});function olt(e){return Object.entries(al.FrecencyUserSettingsActionCreators.getCurrentValue().guildAndChannelFrecency.guildAndChannels).map(([o,n])=>o).filter(o=>ne.getChannel(o)!=null).filter(o=>ne.getChannel(o).name.includes(e)).sort((o,n)=>{let i=al.FrecencyUserSettingsActionCreators.getCurrentValue().guildAndChannelFrecency.guildAndChannels[o];return al.FrecencyUserSettingsActionCreators.getCurrentValue().guildAndChannelFrecency.guildAndChannels[n].totalUses-i.totalUses}).slice(0,20).map(o=>({type:"TEXT_CHANNEL",record:ne.getChannel(o),score:20,comparator:e,sortable:e}))}var WM,Y5e=x(()=>{"use strict";d();H();$();B();WM=k({name:"FrequentQuickSwitcher",description:"Rewrites and filters the quick switcher results to be your most frequent channels",authors:[w.Samwich],generateSearchResults:olt,patches:[{find:"#{intl::QUICKSWITCHER_PLACEHOLDER}",replacement:{match:/let{selectedIndex:\i,results:\i}/,replace:"this.props.results = $self.generateSearchResults(this.state.query);$&"}}]})});function rlt(e){let t={friend:.15,dm:.3,vc:.25,serverMsg:.2,communication:.1},o=0;return e.isFriend&&(o+=t.friend*100),o+=e.dmProbability*t.dm*100,o+=e.vcProbability*t.vc*100,o+=e.serverMessageProbability*t.serverMsg*100,o+=e.communicationProbability*t.communication*100,Math.round(Math.min(100,Math.max(0,o))*100)/100}function ilt(e){let t=e instanceof File,o=t?URL.createObjectURL(e):e;return new Promise((n,i)=>{let s=new Image;s.onload=()=>{t&&URL.revokeObjectURL(o),n(s)},s.onerror=(a,l,c,u,p)=>i(p||a),s.crossOrigin="anonymous",s.src=o})}function slt(e,t,o,n){let s=n*1.5,a=60,l=30;function c(u,p){return u<10||u+n>t-10||p<10||p+n>o-a-10?!1:!e.some(m=>{let g=m.x-u,y=m.y-p,b=Math.hypot(g,y),v=(m.size+n)/2+(s-n);return b<v})}if(e.length===0)return{x:t/2-n/2,y:o/2-n/2};for(let u=0;u<100;u++){let p=e[Math.floor(Math.random()*e.length)];for(let m=0;m<l;m++){let g=Math.random()*Math.PI*2,y=s+Math.random()*s,b=p.x+Math.cos(g)*y,v=p.y+Math.sin(g)*y;if(c(b,v))return{x:Math.max(10,Math.min(b,t-n-10)),y:Math.max(10,Math.min(v,o-n-a-10))}}}for(let u=0;u<100;u++){let p=Math.random()*(t-n-20)+10,m=Math.random()*(o-n-a-20)+10;if(c(p,m))return{x:Math.max(10,Math.min(p,t-n-10)),y:Math.max(10,Math.min(m,o-n-a-10))}}return{x:10,y:10}}function alt(e,t){let i=t+50,s=t+60+50,a=16/9,l=Math.ceil(Math.sqrt(e*a)),c=Math.ceil(e/l);return{width:Math.max(1e3,l*i+50),height:Math.max(700,c*s+50)}}var nlt,KM,Q5e=x(()=>{"use strict";d();yi();H();At();$();fe();B();nlt=new ke("FriendCloud"),KM=k({name:"FriendCloud",description:"Adds a /friendcloud command to visualize the users you most interact with",authors:[j.Fafa],commands:[{inputType:0,name:"friendcloud",description:"Display user you most interact with in a cloud",options:[{name:"count",description:"Number of users to display",type:10,required:!1}],execute:async(e,t)=>{let o=Pt(e,"count",25);if(!o)return Vt(t.channel.id,{content:"The count must be 1 or higher!"});try{let n=cd("UserAffinitiesV2Store").getUserAffinities();if(!n?.length)return Vt(t.channel.id,{content:"No affinities found. Check your [privacy settings](<https://support.discord.com/hc/en-us/articles/21864805694999-Data-Used-to-Improve-Discord>)."});let i=n.map(N=>({member:z.getUser(N.otherUserId),affinity:rlt(N)})).filter(N=>N.member?.id).sort((N,_)=>_.affinity-N.affinity).slice(0,o);if(!i.length)return Vt(t.channel.id,{content:"No valid users found in affinities. Check your [privacy settings](<https://support.discord.com/hc/en-us/articles/21864805694999-Data-Used-to-Improve-Discord>)."});let s=Math.min(...i.map(N=>N.affinity)),a=Math.max(...i.map(N=>N.affinity)),l=120,c=240,u=N=>a===s?(l+c)/2:l+(N-s)/(a-s)*(c-l),p=(l+c)/2,{width:m,height:g}=alt(i.length,p),y=document.createElement("canvas");y.width=m,y.height=g;let b=y.getContext("2d"),v=[],E=i.map(N=>{let _=u(N.affinity),O=slt(v,m,g,_);return v.push({x:O.x,y:O.y,size:_}),{...N,x:O.x,y:O.y,size:_}}),A=0,C=E.length,I=async N=>{try{let _=N.member?.avatar?`https://cdn.discordapp.com/avatars/${N.member.id}/${N.member?.avatar}.webp?size=256`:`https://cdn.discordapp.com/embed/avatars/${N.member.id%5}.png`,O=await ilt(_),F=N.x+N.size/2,J=N.y+N.size/2;b.save(),b.beginPath(),b.arc(F,J,N.size/2,0,Math.PI*2),b.clip(),b.drawImage(O,N.x,N.y,N.size,N.size),b.restore(),b.strokeStyle="#808080",b.lineWidth=3,b.beginPath(),b.arc(F,J,N.size/2+1,0,Math.PI*2),b.stroke()}catch{}finally{A++,A===C&&y.toBlob(_=>{if(!_){Vt(t.channel.id,{content:"Couldn't generate the image :c"});return}let O=new File([_],"affinities-cloud.png",{type:"image/png"});ls.promptToUpload([O],t.channel,sn.ChannelMessage)},"image/png")}};E.forEach(I)}catch(n){n instanceof Error?Vt(t.channel.id,{content:n.message}):nlt.error(n)}}}]})});var Z5e=x(()=>{});function dlt({copyText:e,copiedText:t,onClick:o}){let[n,i]=L(!1);return r(U,{onClick:a=>{i(!0),setTimeout(()=>i(!1),1e3),o(a)},color:n?U.Colors.GREEN:U.Colors.BRAND,size:U.Sizes.SMALL,look:U.Looks.FILLED},n?t:e)}function plt({invite:e}){return r("div",{className:"vc-friend-codes-card"},r(Be,{justifyContent:"start"},r("div",{className:"vc-friend-codes-card-title"},r(Vn,{style:{textTransform:"none"}},e.code),r("span",null,"Expires ",Jt.parse(`<t:${new Date(e.expires_at).getTime()/1e3}:R>`)," \u2022 ",e.uses,"/",e.max_uses," uses")),r(Be,{justifyContent:"end"},r(dlt,{copyText:"Copy",copiedText:"Copied!",onClick:()=>Oo(`https://discord.gg/${e.code}`)}))))}function YQ(){let[e,t]=L([]),[o,n]=L(!1);return se(()=>{n(!0),clt().then(t).then(()=>n(!1))},[]),r(f,null,r("header",{className:X5e.header},r(er.FormTitle,{tag:"h2",className:X5e.title},"Your Friend Codes"),r(Be,{style:{marginBottom:"16px"},justifyContent:"space-between"},r("h2",{className:"vc-friend-codes-info-header"},`Friend Codes - ${e.length}`),r(Be,{justifyContent:"end"},r(U,{color:U.Colors.GREEN,look:U.Looks.FILLED,onClick:()=>llt().then(i=>t([...e,i]))},"Create Friend Code"),r(U,{style:{marginLeft:"8px"},color:U.Colors.RED,look:U.Looks.FILLED,disabled:!e.length,onClick:()=>ult().then(t([]))},"Revoke all Friend Codes")))),o?r(Y,{size:"md",weight:"semibold",className:"vc-friend-codes-text"},"Loading..."):e.length===0?r(Y,{size:"md",weight:"semibold",className:"vc-friend-codes-text"},"You don't have any friend codes yet"):r("div",{style:{marginTop:"16px",display:"flex",flexWrap:"wrap",gap:"16px",justifyContent:"space-evenly"}},e.map(i=>r(plt,{key:i.code,invite:i}))))}var X5e,llt,clt,ult,J5e=x(()=>{"use strict";d();Z5e();Et();eo();ut();cs();fe();B();X5e=et("header","title","emptyState"),{createFriendInvite:llt,getAllFriendInvites:clt,revokeFriendInvites:ult}=He("createFriendInvite")});var YM,V5e=x(()=>{"use strict";d();H();$();J5e();YM=k({name:"FriendCodes",description:"Generate FriendCodes to easily add friends",authors:[w.HypedDomi],patches:[{find:"#{intl::ADD_FRIEND})}),(",replacement:{match:/"header",.{0,30}children:\[.*?\{\}\)/,replace:"$&,$self.FriendCodesPanel"},noWarn:!0}],get FriendCodesPanel(){return r(YQ,null)}})});var e4e=x(()=>{});function mlt(e){let t=new Date(e),i=(new Date().getTime()-t.getTime())/(1e3*60*60*24);return Math.floor(i)}function flt(e){Ee(t=>r(ee,null,r(Pe,{...t,size:"dynamic"},r(je,null,r(Be,{className:QQ("flex")},r(er.FormTitle,{className:QQ("img"),tag:"h2"},r("img",{src:e.iconSrc,alt:"rank icon"}),e.title))),r($e,null,r("div",{className:QQ("text")},r(W,null,e.description))))))}function glt(e,t,o){if(!Tt.isFriend(e))return!1;let n=mlt(Tt.getSince(e));return ZQ[o+1]==null?n>t:n>t&&n<ZQ[o+1].requirement}function t4e(){return ZQ.map((t,o)=>({description:t.title,iconSrc:t.iconSrc,position:1,onClick:()=>flt(t),shouldShow:n=>glt(n.userId,t.requirement,o),props:{style:{borderRadius:"50%",transform:"scale(0.9)"}}}))}var QQ,ZQ,QM,o4e=x(()=>{"use strict";d();e4e();A1();dr();tt();eo();wt();H();nt();at();$();B();QQ=de("vc-friendship-ranks-");ZQ=[{title:"Sprout",description:"Your friendship is just starting",requirement:0,iconSrc:"https://equicord.org/assets/plugins/friendshipRanks/sprout.png"},{title:"Blooming",description:"Your friendship is getting there! (1 Month)",requirement:30,iconSrc:"https://equicord.org/assets/plugins/friendshipRanks/blooming.png"},{title:"Burning",description:"Your friendship has reached terminal velocity (3 Months)",requirement:90,iconSrc:"https://equicord.org/assets/plugins/friendshipRanks/burning.png"},{title:"Fighter",description:"Your friendship is strong (6 Months)",requirement:182.5,iconSrc:"https://equicord.org/assets/plugins/friendshipRanks/fighter.png"},{title:"Star",description:"Your friendship has been going on for a WHILE (1 Year)",requirement:365,iconSrc:"https://equicord.org/assets/plugins/friendshipRanks/star.png"},{title:"Royal",description:"Your friendship has gone through thick and thin- a whole 2 years!",requirement:730,iconSrc:"https://equicord.org/assets/plugins/friendshipRanks/royal.png"},{title:"Besties",description:"How do you even manage this??? (5 Years)",requirement:1826.25,iconSrc:"https://equicord.org/assets/plugins/friendshipRanks/besties.png"}];QM=k({name:"FriendshipRanks",description:"Adds badges showcasing how long you have been friends with a user for",authors:[w.Samwich],start(){t4e().forEach(e=>RA.addProfileBadge(e))},stop(){t4e().forEach(e=>RA.removeProfileBadge(e))}})});var n4e=x(()=>{d();(window.VencordStyles??=new Map).set("src/equicordplugins/friendTags/styles.css",{name:"src/equicordplugins/friendTags/styles.css",source:`.vc-permviewer-user-header-container {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;
}

.vc-permviewer-user-header-btns {
    display: flex;
    gap: 8px;
}`,classNames:{},dom:null})});function hlt(e){let t=e.match(/&([^&]+)/g);return t?t.map(n=>n.substring(1).trim()).filter(n=>n!==""):[]}function xlt(e){let t=hlt(e);if(!t.length)return[];let o=za.filter(i=>i.tagName.length&&i.userIds.length).filter(i=>t.some(s=>s.toLowerCase()===i.tagName.toLowerCase()));return o.length?Array.from(new Set([...ne.getDMUserIds(),...Tt.getFriendIDs()])).filter(i=>o.some(s=>s.userIds.includes(i))).map(i=>{let s=z.getUser(i);return{type:"USER",record:s,score:20,comparator:s.globalName||s.username,sortable:s.globalName||s.username}}):[]}async function ek(){let e=await Oe.get(ZM);return za!==e&&await Oe.set(ZM,JSON.stringify(za)),!0}async function ylt(){let e=await Oe.get(ZM);if(!e){Oe.set(ZM,JSON.stringify([])),za=[];return}za=JSON.parse(e)}function blt(e){let{tag:t}=e,[o,n]=L(t.tagName),[i,s]=L(t.userIds.join(", ")),a=Vo();return se(()=>{let l=za.find(c=>c.tagName===t.tagName);l&&(l.tagName=o),ek(),a()},[o]),se(()=>{let l=za.find(c=>c.userIds===t.userIds);l&&(l.userIds=i.split(", ")),ek(),a()},[i]),r(f,null,r(Y,{size:"md",tag:"h5"},"Name"),r(qe,{value:o,onChange:n}),r(Y,{size:"md",tag:"h5"},"Users (Seperated by comma)"),r(qe,{value:i,onChange:s}),r("div",{className:"vc-friend-tags-user-header-container"},r(Y,null,"User List (Click A User To Remove)"),r("div",{className:"vc-friend-tags-user-header-btns"},i.split(", ").map(l=>{let c=z.getUser(l);return c?r("div",{style:{display:"flex"},key:l.id},r("img",{src:c.getAvatarURL(),style:{height:"20px",borderRadius:"50%",marginRight:"5px"}}),r(Y,{style:{cursor:"pointer"},size:"md",onClick:()=>s(i.replace(`, ${l}`,"").replace(l,""))},c.globalName||c.username)):null}))),r(U,{onClick:async()=>{za=za.filter(l=>l.tagName!==o),await ek(),a()},color:U.Colors.RED},"Remove"))}function vlt(){let e=Vo();return r(f,null,r(Bt,null),za?.map(t=>r(f,null,r(blt,{tag:t}),r(Bt,null))),r(U,{onClick:()=>{za.push({tagName:"",userIds:[]}),ek(),e()}},"Add"))}function wlt(e,t,o){o?za.filter(n=>n.tagName===t)[0].userIds=za.filter(n=>n.tagName===t)[0].userIds.filter(n=>n!==e):za.filter(n=>n.tagName===t)[0]?.userIds.push(e),ek()}var za,ZM,Slt,klt,XM,r4e=x(()=>{"use strict";d();n4e();dr();Q();Et();Ar();H();qo();$();B();za=[],ZM="vc-friendtags-tags";Slt=R({tagConfiguration:{type:6,description:"The tag configuration component",component:()=>r(vlt,null)}});klt=(e,{user:t})=>{let o=r(M.MenuItem,{id:"vc-tag-group",label:"Tag"},za.map(n=>{let i=za.filter(s=>s.tagName===n.tagName)[0].userIds.includes(t.id);return r(M.MenuItem,{label:`${i?"Remove from":"Add to"} ${n.tagName}`,key:`vc-tag-${n.tagName}`,id:`vc-tag-${n.tagName}`,action:()=>{wlt(t.id,n.tagName,i)}})}));e.push({...o})},XM=k({name:"FriendTags",description:"Allows you to filter by custom tags in the quick switcher by starting a search with &",authors:[w.Samwich],settings:Slt,contextMenus:{"user-context":klt},patches:[{find:"#{intl::QUICKSWITCHER_PLACEHOLDER}",replacement:{match:/let{selectedIndex:\i,results:\i}/,replace:'if(this.state.query.includes("&")){ this.props.results = $self.queryFriendTags(this.state.query); }$&'}}],async start(){ylt()},queryFriendTags:xlt})});var XQ,i4e=x(()=>{d();(window.VencordStyles??=new Map).set("src/equicordplugins/fullVcPfp/style.css",{name:"src/equicordplugins/fullVcPfp/style.css",source:`div[data-selenium-video-tile] div[role="img"] {
    width: 100% !important;
    height: 100% !important;
    border-radius: unset !important;
    background: center / contain no-repeat;
    background-image: var(--full-res-avatar);

    > * {
        display: none;
    }
}`,classNames:{},dom:null});XQ="src/equicordplugins/fullVcPfp/style.css"});var JM,s4e=x(()=>{"use strict";d();ps();H();$();B();i4e();JM=k({name:"FullVCPFP",description:"Makes avatars take up the entire vc tile",authors:[j.mochienya],patches:[{find:'"data-selenium-video-tile":',replacement:{match:/(?<=function\((\i),\i\)\{)/,replace:"Object.assign($1.style=$1.style||{},$self.getVoiceBackgroundStyles($1));"}}],getVoiceBackgroundStyles({className:e,participantUserId:t}){if(!e.includes("tile")||!t)return;let o=z.getUser(t),n=lo.getVoiceStateForUser(t)?.channelId,i=h0.getSpeakingParticipants(n).some(a=>a.user.id===t&&a.speaking);return{"--full-res-avatar":`url(${To.getUserAvatarURL(o,i,1024)})`}},start(){Or(XQ)},stop(){Fr(XQ)}})});function Alt(e){V.dispatch({type:"LOCAL_ACTIVITY_UPDATE",activity:e,socketId:"GensokyoRadio"})}function a4e(e){return zi.fetchAssetIds(c4e,[e]).then(t=>t[0])}var Elt,c4e,l4e,JQ,VM,u4e=x(()=>{"use strict";d();Q();wt();H();$();hr();B();Elt=VencordNative.pluginHelpers.GensokyoRadioRPC,c4e="1253772057926303804";l4e=R({refreshInterval:{type:5,description:"The interval between activity refreshes (seconds)",markers:[1,2,2.5,3,5,10,15],default:15,restartNeeded:!0}}),VM=k({name:"GensokyoRadioRPC",description:"Discord rich presence for Gensokyo Radio!",authors:[w.RyanCaoDev,j.Prince527],reporterTestable:2,settingsAboutComponent(){return r(W,null,"Discord rich presence for Gensokyo Radio!")},settings:l4e,start(){this.updatePresence(),JQ=setInterval(()=>{this.updatePresence()},l4e.store.refreshInterval*1e3)},stop(){clearInterval(JQ),JQ=void 0,V.dispatch({type:"LOCAL_ACTIVITY_UPDATE",activity:null})},updatePresence(){this.getActivity().then(e=>{Alt(e)})},async getActivity(){let e=await Elt.fetchTrackData();return e?{application_id:c4e,name:"Gensokyo Radio",details:e.title,state:e.artist,timestamps:{start:e.position*1e3,end:e.duration*1e3},assets:{large_image:await a4e(e.artwork),large_text:e.album,small_image:await a4e("logo"),small_text:"Gensokyo Radio"},buttons:void 0,metadata:{button_urls:void 0},type:2,flags:1}:null}})});var d4e=x(()=>{});function eN({fill:e}){return r("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.5em",height:"1.5em",viewBox:"0 0 24 24"},r("path",{fill:e,d:"M12 4a7 7 0 0 0-7 7v8.62a.4.4 0 0 0 .594.35l.943-.523a4 4 0 0 1 3.927.023l.544.311a2 2 0 0 0 1.984 0l.544-.31a4 4 0 0 1 3.927-.024l.943.523a.4.4 0 0 0 .594-.35V11a7 7 0 0 0-7-7m-9 7a9 9 0 0 1 18 0v8.62c0 1.83-1.966 2.987-3.565 2.099l-.943-.524a2 2 0 0 0-1.964.012l-.543.31a4 4 0 0 1-3.97 0l-.543-.31a2 2 0 0 0-1.964-.012l-.942.524C4.966 22.607 3 21.45 3 19.62zm7.5-.5a1.5 1.5 0 1 1-3 0a1.5 1.5 0 0 1 3 0M15 12a1.5 1.5 0 1 0 0-3a1.5 1.5 0 0 0 0 3"}))}var VQ=x(()=>{"use strict";d()});function p4e(e){let t=Uf.store.exemptedChannels.split(",").map(n=>n.trim()).filter(n=>n.length>0),o=Uf.store.ignoreGroupDms&&e.isGroupDM();return t.includes(e.id)||o}function S2(){return eZ}function tN(e){eZ=e;for(let t of tZ)t(eZ)}function m4e(e){return tZ.add(e),()=>{tZ.delete(e)}}function Clt(e){return oN.add(e),()=>{oN.delete(e)}}function oZ(){return Array.from(Ff)}function nZ(e){if(!Ff.has(e))return;Ff.delete(e),tN(S2()-1);let t=Rt.getMessages(e)?.last();t&&Fg.set(e,t.id);for(let o of oN)o(e)}function f4e({channel:e}){let{id:t}=e,o=Je([z],()=>z.getCurrentUser()?.id),n=Je([Rt],()=>Rt.getMessages(t)?.last()),[i,s]=L({isCurrentUser:null,containsQuestionMark:!1,isDataProcessed:!1}),[a,l]=L(!1);return se(()=>{if(!n||!o)return;let c=n.author.id===o,u=!c&&n.content.includes("?");s({isCurrentUser:c,containsQuestionMark:u,isDataProcessed:!0})},[n,o]),se(()=>(l(Fg.has(t)),Clt(u=>{u===t&&l(Fg.has(t))})),[t,n?.id]),se(()=>{if(!i.isDataProcessed)return;let c=p4e(e),u=Fg.has(t);if(u&&!i.isCurrentUser){let p=Fg.get(t),m=n?.id;if(p===m)return;if(m!==p){Fg.delete(t),u=!1;for(let g of oN)g(t)}}if(i.isCurrentUser){Ff.has(t)&&(Ff.delete(t),tN(S2()-1)),Fg.has(t)&&Fg.delete(t);return}if(c||Uf.store.ignoreBots&&n.author.bot){Ff.has(t)&&(Ff.delete(t),tN(S2()-1));return}u||i.isCurrentUser||Ff.has(t)||(Ff.add(t),tN(S2()+1))},[i.isCurrentUser,i.isDataProcessed,t,n?.id]),!i.isDataProcessed||!o||!n||i.isCurrentUser||p4e(e)||a||Uf.store.ignoreBots&&n.author.bot||!Uf.store.showDmIcons?null:r("div",{className:tk("icon",Tlt.wrapper)},r(eN,{fill:i.containsQuestionMark?"#ff8000":"currentColor"}))}var Ff,Fg,oN,eZ,tZ,Tlt,g4e=x(()=>{"use strict";d();fe();B();rZ();VQ();Ff=new Set,Fg=new Map,oN=new Set,eZ=0,tZ=new Set;Tlt=et("muted","wrapper")});function Ilt(e){let t=new Date(e),o=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0"),i=String(t.getFullYear()).slice(-2);return`${o}/${n}/${i}`}function Nlt({channel:e}){return e.icon?r(Bl,{src:`https://cdn.discordapp.com/channel-icons/${e.id}/${e.icon}.png`,size:"SIZE_40","aria-label":e?.name||"Unnamed Group"}):r(Dlt,{recipients:e?.recipients??[],channel:e,size:"SIZE_40",isTyping:null})}function iZ(e){let t=ne.getChannel(e);if(!t)return"Unknown";if(t.isGroupDM())return t?.name||"Unnamed Group";let o=t?.recipients?.[0]??"";return z.getUser(o)?.username||"Unknown User"}function h4e({modalProps:e,ghostedChannels:t,onClose:o,onClearGhost:n}){let[i,s]=X.useState(t),a=u=>{ne.getChannel(u)&&(Mlt.selectPrivateChannel(u),o())},l=(u,p)=>{u.stopPropagation(),n(p),s(m=>m.filter(g=>g!==p))},c=()=>{for(let u of t)n(u);s([])};return r(Pe,{...e,size:"medium"},r(je,null,r(Zs,{variant:"heading-lg/semibold",className:w2("modal-header")},"Ghosted Users (",i.length,")"),i.length>0&&r(U,{size:U.Sizes.SMALL,color:U.Colors.PRIMARY,onClick:c,className:w2("clear")},"Clear All"),r(Ut,{onClick:o})),r($e,null,r("div",{className:w2("modal-content")},i.length===0?r(Zs,{variant:"text-md/normal"},"No ghosts here!"):i.map(u=>{let p=ne.getChannel(u);if(!p)return null;let m=Rt.getMessages(u)?.last(),g=m?.timestamp?Ilt(m.timestamp):"",y=iZ(p.id),b=p?.recipients?.[0]??"";return r("div",{key:u,onClick:()=>a(u),className:w2("ghosted-entry")},p.isGroupDM()?r(Nlt,{channel:p}):r(Bl,{src:z.getUser(b)?.getAvatarURL(void 0,128,!0),size:"SIZE_40","aria-label":y}),r("div",{className:w2("user-info")},r(Zs,{variant:"text-md/normal"},y),g&&r(Zs,{variant:"text-xs/normal",className:w2("modal-text")},g)),r(U,{size:U.Sizes.SMALL,color:U.Colors.PRIMARY,onClick:v=>l(v,u)},"Clear"))}))))}var w2,Dlt,Mlt,x4e=x(()=>{"use strict";d();nt();at();fe();B();w2=de("vc-boo-");Dlt=De('["aria-hidden"],"aria-label":'),Mlt=He("selectPrivateChannel")});function Blt(){let[e,t]=L(S2()),[o,n]=L(!1);if(se(()=>{let a=m4e(l=>{t(l)});return()=>{a()}},[]),!Uf.store.showIndicator&&!o)return null;let i=()=>{let a=oZ(),l=Ee(c=>r(ee,null,r(h4e,{modalProps:c,ghostedChannels:a,onClose:()=>vo(l),onClearGhost:nZ})))},s=()=>{let a=oZ();return a.length===0?"No Ghosted Users":a.length<=5?a.map(l=>iZ(l)).join(", "):`${a.length} Ghosted Users`};return r(f,null,Uf.store.showIndicator&&r("div",{id:tk("container")},r(Ue,{text:s(),position:"right"},({onMouseEnter:a,onMouseLeave:l})=>r("div",{id:tk("container"),className:tk("clickable"),onMouseEnter:a,onMouseLeave:l,onClick:i},e," ",r(eN,{fill:"currentColor"})))))}function y4e(e){return r(M.MenuItem,{id:"ec-ghosted-clear",key:"ec-ghosted-clear",label:"unghost",action:()=>{nZ(e.channel.id)}})}var tk,Uf,nN,rZ=x(()=>{"use strict";d();d4e();Un();B0();Q();tt();H();nt();at();$();B();g4e();x4e();VQ();tk=de("vc-boo-"),Uf=R({showIndicator:{type:3,description:"Show the ghost counter at the top of the server list",default:!0,restartNeeded:!1},showDmIcons:{type:3,description:"Show ghost icons next to individual DMs",default:!0,restartNeeded:!1},ignoreGroupDms:{type:3,description:"Exclude all group dms from ghosting",default:!1},exemptedChannels:{type:0,description:"Comma-separated list of channel IDs to exempt from ghosting (right-click a DM channel to copy its ID)",default:"",restartNeeded:!1},ignoreBots:{type:3,description:"Ignore DMs from bots",default:!0,restartNeeded:!1}});nN=k({name:"Ghosted",description:"A cute ghost will appear if you don't answer their DMs",authors:[j.vei,w.sadan,j.justjxke,j.iamme],settings:Uf,dependencies:["AudioPlayerAPI","ServerListAPI"],contextMenus:{"gdm-context":(e,t)=>{Qt("leave",e,!0)?.unshift(y4e(t))},"user-context":(e,t)=>{Qt("close-dm",e)?.push(y4e(t))}},patches:[{find:"PrivateChannel.renderAvatar",replacement:{match:/\]:\i\|\|\i.{0,50}children:\[/,replace:"$&$self.renderBoo(arguments[0]),"}}],renderBoo(e){return r(ee,{noop:!0},r(f4e,{...e}))},renderIndicator(){return r(ee,{noop:!0},r(Blt,null))},start(){kc(0,this.renderIndicator)},stop(){Ec(0,this.renderIndicator)}})});var b4e=x(()=>{});var v4e=x(()=>{"use strict";d()});function rN(e){return e.startsWith("https:")||(e="https:"+e),new URL(e).pathname.split(".").pop()}var sZ=x(()=>{"use strict";d()});function Ug(e){let t=rN(e);return e.startsWith("https://media.tenor")||t==null||Plt.includes(t)?2:1}var Plt,aZ=x(()=>{"use strict";d();v4e();sZ();Plt=["mp4","ogg","webm","avi","wmv","flv","mov","mkv","m4v"]});var zc,$f,Gc,S4e,lZ,w4e,cZ,uZ,sc,dZ,k2,iN,k4e,E4e,pZ=x(()=>{"use strict";d();dr();sN();B();aZ();zc="gif-collections-collections",$f=[],Gc=async()=>await Oe.get(zc)??[],S4e=async(e,t)=>{let o=await Gc();if(o.find(a=>a.name===`${ir.store.collectionPrefix}${e}`))return D.show({message:"That collection already exists",type:D.Type.FAILURE,id:D.genId(),options:{duration:3e3,position:D.Position.BOTTOM}});let i=t[t.length-1]?.src??ir.store.defaultEmptyCollectionImage,s={name:`${ir.store.collectionPrefix}${e}`,src:i,format:Ug(i),type:"Category",gifs:t,createdAt:Date.now(),lastUpdated:Date.now()};return await Oe.set(zc,[...o,s]),await sc()},lZ=async(e,t)=>{let o=await Gc(),n=o.findIndex(i=>i.name===e);return n===-1?console.warn("collection not found"):ir.store.preventDuplicates&&o[n].gifs.some(s=>s.url===t.url)?D.show({message:"This GIF is already in the collection",type:D.Type.FAILURE,id:D.genId(),options:{duration:3e3,position:D.Position.BOTTOM}}):(o[n].gifs.push(t),o[n].src=t.src,o[n].format=Ug(t.src),o[n].lastUpdated=Date.now(),t.addedAt=Date.now(),await Oe.set(zc,o),await sc())},w4e=async(e,t)=>{let o=await Gc(),n=o.findIndex(i=>i.name===e);return n===-1?console.warn("collection not found"):(o[n].name=`${ir.store.collectionPrefix}${t}`,o[n].lastUpdated=Date.now(),await Oe.set(zc,o),await sc())},cZ=async e=>{let t=await Gc(),o=t.findIndex(s=>s.gifs.some(a=>a.id===e));if(o===-1)return console.warn("collection not found");t[o].gifs=t[o].gifs.filter(s=>s.id!==e);let n=t[o],i=n.gifs.length?n.gifs[n.gifs.length-1].src:ir.store.defaultEmptyCollectionImage;return t[o].src=i,t[o].format=Ug(i),t[o].lastUpdated=Date.now(),await Oe.set(zc,t),await sc()},uZ=async e=>{let o=(await Gc()).filter(n=>n.name!==e);await Oe.set(zc,o),await sc()},sc=async()=>{$f=await Gc()},dZ=async e=>{let t=e.replace(/:+$/,"")+":",o=await Gc();o.forEach(n=>{let i=n.name.split(":");n.name=`${t}${i[i.length-1]}`}),await Oe.set(zc,o),await sc()},k2=e=>$f.find(n=>n.gifs.some(i=>i.id===e))?.name,iN=e=>$f.flatMap(n=>n.gifs).find(n=>n.id===e),k4e=async(e,t,o)=>{let n=await Gc(),i=n.findIndex(p=>p.name===t),s=n.findIndex(p=>p.name===o);if(i===-1||s===-1)return console.warn("collection not found");let a=n[i].gifs.findIndex(p=>p.id===e);if(a===-1)return console.warn("gif not found");let l=n[i].gifs[a];l.addedAt=Date.now(),n[i].gifs.splice(a,1),n[s].gifs.push(l);let c=n[i].gifs.length?n[i].gifs[n[i].gifs.length-1].src:ir.store.defaultEmptyCollectionImage;n[i].src=c,n[i].format=Ug(c),n[i].lastUpdated=Date.now();let u=n[s].gifs.length?n[s].gifs[n[s].gifs.length-1].src:ir.store.defaultEmptyCollectionImage;return n[s].src=u,n[s].format=Ug(u),n[s].lastUpdated=Date.now(),await Oe.set(zc,n),await sc()},E4e=async(e,t)=>{let o=await Gc(),n=o.findIndex(s=>s.gifs.some(a=>a.id===e));if(n===-1)return console.warn("collection not found");let i=o[n].gifs.findIndex(s=>s.id===e);return i===-1?console.warn("gif not found"):(o[n].gifs[i]=t,o[n].lastUpdated=Date.now(),await Oe.set(zc,o),await sc())}});var ok,A4e=x(()=>{"use strict";d();ok=e=>{let t=new URL(e);return t.search="",t.href}});function C4e(e){let t=rN(e);return t&&_lt.includes(t)}var _lt,T4e=x(()=>{"use strict";d();sZ();_lt=["mp3","wav","ogg","aac","m4a","wma","flac"]});function Ty(e){let t=new Date().getTime();return t+=performance.now(),`${e}xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx`.replace(/[xy]/g,o=>{let n=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),o==="x"?n.toString(16):(n&3|8).toString(16)})}var mZ=x(()=>{"use strict";d()});function Rlt(e,t){let o=t?.closest("li");if(!t||!o||!o.id)return null;let[n,i]=o.id.split("-").slice(2);if(!n||!i||!I4e(n)||!I4e(i))return null;let s=Rt.getMessage(n,i);return!s||!s.embeds.length&&!s.attachments.length?null:fZ(e,s)}function Llt(e,t){let o=e.closest('[class*="imageWrapper"]')?.querySelector("video")?.src??e.closest('[class*="imageWrapper"]')?.querySelector("img")?.src;return o?fZ(o,t):null}function fZ(e,t){if(!t.embeds.length&&!t.attachments.length||C4e(e))return null;let o=ok(e),n=t.embeds.find(s=>{let a=s.url&&ok(s.url)===o,l=s.image&&ok(s.image.url)===o,c=s.image?.proxyURL===o,u=s.video?.proxyURL===o,p=s.thumbnail?.proxyURL===o;return a||l||c||u||p});if(n){if(n.image)return{id:Ty(ir.store.itemPrefix),height:n.image.height,width:n.image.width,src:n.image.proxyURL,url:n.image.url};if(n.video&&n.video.proxyURL)return{id:Ty(ir.store.itemPrefix),height:n.video.height,width:n.video.width,src:n.video.proxyURL,url:n.provider?.name==="Tenor"?n.url??n.video.url:n.video.url};if(n.thumbnail&&n.thumbnail.proxyURL)return{id:Ty(ir.store.itemPrefix),height:n.thumbnail.height,width:n.thumbnail.width,src:n.thumbnail.proxyURL,url:n.thumbnail.url}}let i=t.attachments.find(s=>ok(s.url)===o||s.proxy_url===o);return i?{id:Ty(ir.store.itemPrefix),height:i.height??50,width:i.width??50,src:i.proxy_url,url:i.url,channelId:t.channel_id,messageId:t.id,attachmentId:i.id}:null}function I4e(e){return!Number.isNaN(ai.extractTimestamp(e))}var D4e,M4e=x(()=>{"use strict";d();sN();B();A4e();T4e();mZ();D4e=(e,t,o)=>{if(e&&t){let n=fZ(t,e);return n||null}if(e&&o&&!t){let n=Llt(o,e);return n||null}if(t&&o&&!e){let n=Rlt(t.startsWith("https://discord.com/")?o.parentElement?.querySelector("img")?.src??t:t,o);return n||null}}});async function Olt(e,t){try{let o=await Ht.get({url:`/channels/${e}/messages`,query:{limit:1,around:t}});if(o.ok&&o.body.length>0)return o.body.find(n=>n.id===t)}catch(o){console.error("Failed to fetch message for GIF refresh:",o)}return null}async function N4e(e){if(!e.channelId||!e.messageId||!e.attachmentId)return null;let t=await Olt(e.channelId,e.messageId);if(!t)return null;let o=t.attachments?.find(n=>n.id===e.attachmentId);return o?{...e,src:o.proxy_url,url:o.url}:null}var B4e=x(()=>{"use strict";d();B()});async function P4e(){let e="gif-collections.json",t=await Flt(),o=new TextEncoder().encode(t);{let n=new File([o],e,{type:"application/json"}),i=document.createElement("a");i.href=URL.createObjectURL(n),i.download=e,document.body.appendChild(i),i.click(),setImmediate(()=>{URL.revokeObjectURL(i.href),document.body.removeChild(i)})}}async function Flt(){let e=await Gc();return JSON.stringify({collections:e},null,4)}async function Ult(e){try{var t=JSON.parse(e)}catch(o){throw console.log(e),new Error("Failed to parse JSON: "+String(o))}if("collections"in t)await Oe.set(zc,t.collections),await sc();else throw new Error("Invalid Collections")}async function gZ(e=!0){{let t=document.createElement("input");t.type="file",t.style.display="none",t.accept="application/json",t.onchange=async()=>{let o=t.files?.[0];if(!o)return;let n=new FileReader;n.onload=async()=>{try{await Ult(n.result),e&&$lt()}catch(i){console.error(i),e&&Hlt(i)}},n.readAsText(o)},document.body.appendChild(t),t.click(),setImmediate(()=>document.body.removeChild(t))}}var $lt,Hlt,_4e=x(()=>{"use strict";d();dr();B();pZ();$lt=()=>D.show({type:D.Type.SUCCESS,message:"Settings successfully imported.",id:D.genId()}),Hlt=e=>D.show({type:D.Type.FAILURE,message:`Failed to import settings: ${String(e)}`,id:D.genId()})});function L4e({gif:e,onClose:t,modalProps:o}){let[n,i]=L(""),s=gn(a=>{a.preventDefault(),n.length&&(S4e(n,[e]),t())},[n]);return r(Pe,{...o},r("form",{onSubmit:s},r(je,null,r(W,null,"Create Collection")),r($e,null,r(re,{style:{marginTop:"10px"}},"Collection Name"),r(qe,{onChange:a=>i(a)})),r("div",{style:{marginTop:"1rem"}},r(ht,null,r(U,{type:"submit",color:U.Colors.GREEN,disabled:!n.length,onClick:s},"Create")))))}function qlt({name:e,onClose:t,modalProps:o}){let n=ir.store.collectionPrefix,i=e.startsWith(n)?e.slice(n.length):e,[s,a]=L(i),l=gn(async c=>{c.preventDefault(),!(!s.length||s.length>=25)&&(await w4e(e,s),t())},[s,e,t]);return r(Pe,{...o},r("form",{onSubmit:l},r(je,null,r(W,null,"Rename Collection")),r($e,null,r(W,{className:"rename-collection-text"},"New Collection Name"),r(qe,{value:s,className:`rename-collection-input ${s.length>=25?"input-warning":""}`,onChange:c=>a(c)}),s.length>=25&&r(W,{className:"warning-text"},"Name can't be longer than 24 characters")),r("div",{style:{marginTop:"1rem"}},r(ht,null,r(U,{type:"submit",color:U.Colors.GREEN,disabled:!s.length||s.length>=25,onClick:l},"Rename")))))}var E2,A2,ac,zlt,ir,aN,R4e,Glt,sN=x(()=>{"use strict";d();b4e();Un();dr();Q();Ar();eo();ut();wt();cs();H();at();$();B();pZ();aZ();M4e();B4e();_4e();mZ();ac={NAME:1,CREATION_DATE:2,MODIFIED_DATE:3},zlt=(e,t)=>{if(!t)return;let{message:o,itemSrc:n,itemHref:i,target:s}=t,a=D4e(o,n??i,s);if(!a)return;let l=Qt("open-native-link",e)??Qt("copy-link",e);if(l&&!l.some(c=>c?.props?.id==="add-to-collection")){let c=$f;ir.store.showCopyImageLink&&l.push(r(M.MenuItem,{label:"Copy Image Link",key:"copy-image-link",id:"copy-image-link",action:()=>{Oo(a.url),Re("Image link copied to clipboard",D.Type.SUCCESS)}})),l.push(r(M.MenuItem,{label:"Add To Collection",key:"add-to-collection",id:"add-to-collection"},c.length>0&&c.map(u=>r(M.MenuItem,{key:u.name,id:u.name,label:u.name.replace(/.+?:/,""),action:()=>lZ(u.name,a)})),c.length>0&&r(M.MenuSeparator,{key:"separator"}),r(M.MenuItem,{key:"create-collection",id:"create-collection",label:"Create Collection",action:()=>{Ee(u=>r(L4e,{onClose:u.onClose,gif:a,modalProps:u}))}})))}},ir=R({itemPrefix:{description:"The prefix for gif items",type:0,default:"gc-item:",onChange:e=>{let t=e.replace(/:+$/,"")+":";t!==A2&&(A2=t,ir.store.itemPrefix=t,dZ(t))},restartNeeded:!0},collectionPrefix:{description:"The prefix for collections",type:0,default:"gc:",onChange:e=>{let t=e.replace(/:+$/,"")+":";t!==E2&&(E2=t,ir.store.collectionPrefix=t,dZ(t))},restartNeeded:!0},onlyShowCollections:{description:"Only show collections",type:3,default:!1,restartNeeded:!0},stopWarnings:{description:"Stop deletion warnings",type:3,default:!1},showCopyImageLink:{description:"Show 'Copy Image Link' option in context menus",type:3,default:!1},preventDuplicates:{description:"Prevent adding the same GIF to a collection multiple times",type:3,default:!1},defaultEmptyCollectionImage:{description:"The image / gif that will be shown when a collection has no images / gifs",type:0,default:"https://c.tenor.com/YEG33HsLEaIAAAAC/parksandrec-oops.gif"},collectionsSortType:{description:"The type of sorting for collections",type:1,default:ac.NAME,hidden:!0},collectionsSortOrder:{description:"The order of sorting for collections",type:0,default:"asc",hidden:!0},collectionsSort:{type:6,description:"Decide how to sort collections",component:()=>{let[e,t]=L(ir.store.collectionsSortType||ac.NAME),[o,n]=L(ir.store.collectionsSortOrder||"asc"),i=a=>{t(a),ir.store.collectionsSortType=a},s=a=>{n(a),ir.store.collectionsSortOrder=a};return r("div",{className:"collections-sort-container"},r(re,{className:"collections-sort-title"},"Sort Collections"),r(Bt,{className:"collections-sort-divider"}),r(W,{className:"collections-sort-description"},"Choose a sorting criteria for your collections"),r(Bt,{className:"collections-sort-divider"}),r("div",{className:"collections-sort-section"},r(W,{className:"collections-sort-section-title"},"Sort By"),r("div",{className:"collections-sort-option"},r("label",{className:"collections-sort-label"},r("input",{type:"radio",name:"sortType",value:ac.NAME,checked:e===ac.NAME,onChange:()=>i(ac.NAME),className:"collections-sort-input"}),"Name")),r("div",{className:"collections-sort-option"},r("label",{className:"collections-sort-label"},r("input",{type:"radio",name:"sortType",value:ac.CREATION_DATE,checked:e===ac.CREATION_DATE,onChange:()=>i(ac.CREATION_DATE),className:"collections-sort-input"}),"Creation Date")),r("div",{className:"collections-sort-option"},r("label",{className:"collections-sort-label"},r("input",{type:"radio",name:"sortType",value:ac.MODIFIED_DATE,checked:e===ac.MODIFIED_DATE,onChange:()=>i(ac.MODIFIED_DATE),className:"collections-sort-input"}),"Modified Date"))),r(Bt,{className:"collections-sort-divider"}),r("div",{className:"collections-sort-section"},r(W,{className:"collections-sort-section-title"},"Order"),r("div",{className:"collections-sort-option"},r("label",{className:"collections-sort-label"},r("input",{type:"radio",name:"sortOrder",value:"asc",checked:o==="asc",onChange:()=>s("asc"),className:"collections-sort-input"}),"Ascending")),r("div",{className:"collections-sort-option"},r("label",{className:"collections-sort-label"},r("input",{type:"radio",name:"sortOrder",value:"desc",checked:o==="desc",onChange:()=>s("desc"),className:"collections-sort-input"}),"Descending"))))}},importGifs:{type:6,description:"Import Collections",component:()=>r(U,{onClick:async()=>(await Gc()).length?go.show({title:"Are you sure?",body:"Importing collections will overwrite your current collections.",confirmText:"Import",confirmColor:U.Colors.RED,cancelText:"Nevermind",onConfirm:async()=>gZ()}):gZ()},"Import Collections")},exportGifs:{type:6,description:"Export Collections",component:()=>r(U,{onClick:P4e},"Export Collections")},resetCollections:{type:6,description:"Reset Collections",component:()=>r(U,{onClick:()=>go.show({title:"Are you sure?",body:"Resetting collections will remove all your collections.",confirmText:"Reset",confirmColor:U.Colors.RED,cancelText:"Nevermind",onConfirm:async()=>{await Oe.set(zc,[]),sc()}})},"Reset Collections")}}),aN=k({name:"GifCollections",description:"Allows you to create collections of gifs",authors:[w.Aria,j.creations],patches:[{find:"renderCategoryExtras",replacement:[{match:/(render\(\){)(.{1,50}getItemGrid)/,replace:"$1;$self.insertCollections(this);$2"},{match:/("span",\{className:\i\.\i,children:)(\i)/,replace:"$1$self.hidePrefix($2),"}]},{find:"renderEmptyFavorite",replacement:{match:/render\(\){.{1,500}onClick:this\.handleClick,/,replace:"$&onContextMenu: (e) => $self.collectionContextMenu(e, this),"}},{find:"renderHeaderContent()",replacement:[{match:/(renderContent\(\){)(.{1,50}resultItems)/,replace:"$1$self.renderContent(this);$2"}]},{find:'type:"GIF_PICKER_QUERY"',replacement:{match:/(function \i\(.{1,10}\){)(.{1,100}.GIFS_SEARCH,query:)/,replace:"$1if($self.shouldStopFetch(arguments[0])) return;$2"}}],settings:ir,contextMenus:{message:zlt},start(){sc(),E2=ir.store.collectionPrefix,A2=ir.store.itemPrefix},get collections(){return sc(),this.sortedCollections()},sortedCollections(){return $f.sort((e,t)=>{let o=ir.store.collectionsSortType,n=ir.store.collectionsSortOrder==="asc"?1:-1;switch(o){case ac.NAME:return e.name.localeCompare(t.name)*n;case ac.CREATION_DATE:return((e.createdAt??0)-(t.createdAt??0))*n;case ac.MODIFIED_DATE:return((e.lastUpdated??0)-(t.lastUpdated??0))*n;default:return 0}})},renderContent(e){if(e.props.query.startsWith(E2)){let t=this.collections.find(o=>o.name===e.props.query);t&&(e.props.resultItems=t.gifs.map(o=>({id:o.id,format:Ug(o.src),src:o.src,url:o.url,width:o.width,height:o.height})).reverse())}},hidePrefix(e){return e.split(!1)?e.replace(/.+?:/,""):e},insertCollections(e){let t=ir.store.onlyShowCollections;try{e.props.trendingCategories.length&&e.props.trendingCategories[0].type==="Trending"&&(this.oldTrendingCat=e.props.trendingCategories),t?e.props.trendingCategories=this.sortedCollections().concat(e.props.favorites):this.oldTrendingCat!=null&&(e.props.trendingCategories=this.sortedCollections().concat(this.oldTrendingCat))}catch(o){console.error(o)}},shouldStopFetch(e){return e.startsWith(E2)&&this.collections.find(t=>t.name===e)!=null},collectionContextMenu(e,t){let{item:o}=t.props;if(o?.name?.startsWith(E2))return Dt.openContextMenu(e,()=>r(R4e,{type:"collection",nameOrId:o.name,instance:t}));if(o?.id?.startsWith(A2))return Dt.openContextMenu(e,()=>r(R4e,{type:"gif",nameOrId:o.id,instance:t}));let{src:n,url:i,height:s,width:a}=o;return n&&i&&s!=null&&a!=null&&!o.id?.startsWith(A2)?Dt.openContextMenu(e,()=>r(M.Menu,{navId:"gif-collection-id",onClose:()=>V.dispatch({type:"CONTEXT_MENU_CLOSE"}),"aria-label":"Gif Collections"},Glt({gif:{...o,id:Ty(A2)}}))):null}}),R4e=({type:e,nameOrId:t,instance:o})=>r(M.Menu,{navId:"gif-collection-id",onClose:()=>V.dispatch({type:"CONTEXT_MENU_CLOSE"}),"aria-label":e==="collection"?"Delete Collection":"Remove"},e==="collection"&&r(f,null,r(M.MenuItem,{key:"collection-information",id:"collection-information",label:"Collection Information",action:()=>{let n=$f.find(i=>i.name===t);n&&Ee(i=>r(Pe,{...i,size:"small",transitionState:i.transitionState,className:"custom-modal"},r(je,{separator:!1,className:"custom-modal-header"},r(W,{className:"custom-modal-title"},"Collection Information")),r($e,{className:"custom-modal-content"},r("section",null,r(Be,{className:"collection-info"},r(re,{className:"collection-info-title"},"Name"),r(W,{className:"collection-info-text"},n.name.replace(/.+?:/,""))),r(Be,{className:"collection-info"},r(re,{className:"collection-info-title"},"Gifs"),r(W,{className:"collection-info-text"},n.gifs.length)),r(Be,{className:"collection-info"},r(re,{className:"collection-info-title"},"Created At"),r(W,{className:"collection-info-text"},n.createdAt?new Date(n.createdAt).toLocaleString():"Unknown")),r(Be,{className:"collection-info"},r(re,{className:"collection-info-title"},"Last Updated"),r(W,{className:"collection-info-text"},n.lastUpdated?new Date(n.lastUpdated).toLocaleString():"Unknown")))),r(ht,{className:"custom-modal-footer"},r(U,{onClick:i.onClose,className:"custom-modal-button"},"Close"))))}}),r(M.MenuSeparator,null),r(M.MenuItem,{key:"rename-collection",id:"rename-collection",label:"Rename",action:()=>Ee(n=>r(qlt,{onClose:n.onClose,name:t,modalProps:n}))})),e==="gif"&&r(f,null,r(M.MenuItem,{key:"gif-information",id:"gif-information",label:"Information",action:()=>{let n=iN(t);n&&Ee(i=>r(Pe,{...i,size:"small",transitionState:i.transitionState,className:"custom-modal"},r(je,{separator:!1,className:"custom-modal-header"},r(W,{className:"custom-modal-title"},"Information")),r($e,{className:"custom-modal-content"},r("section",null,r(Be,{className:"gif-info"},r(re,{className:"gif-info-title"},"Added At"),r(W,{className:"gif-info-text"},n.addedAt?new Date(n.addedAt).toLocaleString():"Unknown")),r(Be,{className:"gif-info"},r(re,{className:"gif-info-title"},"Width"),r(W,{className:"gif-info-text"},n.width)),r(Be,{className:"gif-info"},r(re,{className:"gif-info-title"},"Height"),r(W,{className:"gif-info-text"},n.height)))),r(ht,{className:"custom-modal-footer"},r(U,{onClick:i.onClose,className:"custom-modal-button"},"Close"))))}}),r(M.MenuSeparator,null),r(M.MenuItem,{key:"refresh-url",id:"refresh-url",label:"Refresh URL",action:async()=>{let n=iN(t);if(!n)return;if(!n.channelId||!n.messageId||!n.attachmentId){Re("Cannot refresh: GIF missing metadata (re-add to collection)",D.Type.FAILURE);return}Re("Refreshing URL...",D.Type.MESSAGE);let i=await N4e(n);if(i){await E4e(t,i);let s=k2(t);V.dispatch({type:"GIF_PICKER_QUERY",query:`${s} `}),V.dispatch({type:"GIF_PICKER_QUERY",query:`${s}`}),Re("URL refreshed successfully",D.Type.SUCCESS)}else Re("Failed to refresh URL",D.Type.FAILURE)}}),r(M.MenuSeparator,null),r(M.MenuItem,{key:"copy-url",id:"copy-url",label:"Copy URL",action:()=>{let n=iN(t);n&&(Oo(n.url),Re("URL copied to clipboard",D.Type.SUCCESS))}}),r(M.MenuItem,{key:"move-to-collection",id:"move-to-collection",label:"Move To Collection",action:()=>{Ee(n=>r(Pe,{...n,size:"small",transitionState:n.transitionState,className:"custom-modal"},r(je,{separator:!1,className:"custom-modal-header"},r(W,{className:"custom-modal-title"},"Move To Collection")),r($e,{className:"custom-modal-content"},r(re,{className:"custom-modal-text"},"Select a collection to move the item to"),r("div",{className:"collection-buttons"},$f.filter(i=>i.name!==k2(t)).map(i=>r(U,{key:i.name,id:i.name,onClick:async()=>{let s=k2(t);s&&(await k4e(t,s,i.name),V.dispatch({type:"GIF_PICKER_QUERY",query:`${s} `}),V.dispatch({type:"GIF_PICKER_QUERY",query:`${s}`}),n.onClose())},className:"collection-button"},i.name.replace(/.+?:/,""))))),r(ht,{className:"custom-modal-footer"},r(U,{onClick:n.onClose,className:"custom-modal-button"},"Close"))))}}),r(M.MenuSeparator,null)),r(M.MenuItem,{key:"delete-collection",id:"delete-collection",label:e==="collection"?"Delete Collection":"Remove",action:async()=>{if(ir.store.stopWarnings){let n=k2(t);e==="collection"?(uZ(t),o.forceUpdate()):(await cZ(t),V.dispatch({type:"GIF_PICKER_QUERY",query:`${n} `}),V.dispatch({type:"GIF_PICKER_QUERY",query:`${n}`}));return}go.show({title:"Are you sure?",body:`Do you really want to ${e==="collection"?"delete this collection":"remove this item"}?`,confirmText:e==="collection"?"Delete":"Remove",confirmColor:U.Colors.RED,cancelText:"Nevermind",onConfirm:async()=>{let n=e==="collection"?t:k2(t);e==="collection"?(uZ(t),o.forceUpdate()):(await cZ(t),V.dispatch({type:"GIF_PICKER_QUERY",query:`${n} `}),V.dispatch({type:"GIF_PICKER_QUERY",query:`${n}`}))}})}})),Glt=({gif:e})=>{let t=$f,o=[];return ir.store.showCopyImageLink&&o.push(r(M.MenuItem,{label:"Copy Image Link",key:"copy-image-link",id:"copy-image-link",action:()=>{Oo(e.url),Re("Image link copied to clipboard",D.Type.SUCCESS)}})),o.push(r(M.MenuItem,{label:"Add To Collection",key:"add-to-collection",id:"add-to-collection"},t.map(n=>r(M.MenuItem,{key:n.name,id:n.name,label:n.name.replace(/.+?:/,""),action:()=>lZ(n.name,e)})),t.length>0&&r(M.MenuSeparator,null),r(M.MenuItem,{key:"create-collection",id:"create-collection",label:"Create Collection",action:()=>Ee(n=>r(L4e,{onClose:n.onClose,gif:e,modalProps:n}))}))),r(f,null,o)}});function jlt(e,t){let o=al.FrecencyUserSettingsActionCreators.getCurrentValue(),n=Object.keys(o.favoriteGifs.gifs),i=n[Math.floor(Math.random()*n.length)],s="";return t.guild!=null&&t.guild.ownerId!=null&&O4e.store.pingOwnerChance&&Math.random()<=.1&&(s=`<@${t.guild.ownerId}>`),`${i} ${s}`}var O4e,lN,F4e=x(()=>{"use strict";d();Q();H();$();B();O4e=R({pingOwnerChance:{type:3,description:"If there should be a 1 in 10 change to ping the owner of the guild (oh no)",default:!0}}),lN=k({name:"GifRoulette",description:"Adds a command to send a random gif from your favourites, and a one in ten chance to ping the owner of the server",authors:[w.Samwich],settings:O4e,commands:[{name:"gifroulette",description:"Tempt fate and send a gif",execute:(e,t)=>({content:jlt(e,t)})}]})});var U4e=x(()=>{});async function H4e(e){try{let t=`https://api.github.com/users/${e}`,o=await fetch(t);if(!o.ok)return null;let n=await o.json();return{username:n.login,totalRepos:n.public_repos}}catch(t){return $4e.error("Error fetching user info",t),null}}async function z4e(e,t=30){try{let o=`https://api.github.com/user/${e}/repos?sort=stars&direction=desc&per_page=${t}`,n=await fetch(o);if(!n.ok)return null;let i=await n.json();return q4e(i)}catch(o){return $4e.error("Error fetching repos by ID",o),null}}async function G4e(e,t=30){let o=`https://api.github.com/users/${e}/repos?sort=stars&direction=desc&per_page=${t}`,n=await fetch(o);if(!n.ok)throw new Error(`Error fetching repos by username: ${n.status}`);let i=await n.json();return q4e(i)}function q4e(e){return e.sort((t,o)=>o.stargazers_count-t.stargazers_count)}var $4e,j4e=x(()=>{"use strict";d();At();$4e=new ke("GitHubRepos")});function cN(e){return{JavaScript:"#f1e05a",TypeScript:"#3178c6",Python:"#3572A5",Java:"#b07219","C#":"#178600","C++":"#f34b7d",C:"#555555",HTML:"#e34c26",CSS:"#563d7c",PHP:"#4F5D95",Ruby:"#701516",Go:"#00ADD8",Rust:"#dea584",Swift:"#ffac45",Kotlin:"#A97BFF",Dart:"#00B4AB",Shell:"#89e051",PowerShell:"#012456",Lua:"#000080",Perl:"#0298c3",R:"#198CE7",Scala:"#c22d40",Haskell:"#5e5086",Elixir:"#6e4a7e",Clojure:"#db5855",Vue:"#41b883",Svelte:"#ff3e00","Jupyter Notebook":"#DA5B0B",Assembly:"#6E4C13",COBOL:"#004B85",CoffeeScript:"#244776",Crystal:"#000100",D:"#BA595E","F#":"#B845FC",Fortran:"#4d41b1",GLSL:"#5686A5",Groovy:"#e69f56",Julia:"#a270ba",Markdown:"#083fa1",MATLAB:"#bb92ac","Objective-C":"#438eff",OCaml:"#3be133",Pascal:"#E3F171",Prolog:"#74283c",PureScript:"#1D222D",Racket:"#3c5caa",Raku:"#0000fb",Reason:"#ff5847",SCSS:"#c6538c",Solidity:"#AA6746",Tcl:"#e4cc98",Verilog:"#b2b7f8",VHDL:"#adb2cb",WebAssembly:"#04133b",Zig:"#ec915c"}[e]||"#858585"}var hZ=x(()=>{"use strict";d()});function uN({className:e,width:t=16,height:o=16}){return r("svg",{className:e,width:t,height:o,viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},r("path",{d:"M8 .25a.75.75 0 01.673.418l1.882 3.815 4.21.612a.75.75 0 01.416 1.279l-3.046 2.97.719 4.192a.75.75 0 01-1.088.791L8 12.347l-3.766 1.98a.75.75 0 01-1.088-.79l.72-4.194L.818 6.374a.75.75 0 01.416-1.28l4.21-.611L7.327.668A.75.75 0 018 .25z"}))}var xZ=x(()=>{"use strict";d()});function W4e({repo:e,showStars:t,showLanguage:o,variant:n}){let i=()=>window.open(e.html_url,"_blank"),s=()=>t?r("div",{className:zo("stars")},r(uN,{className:zo("star-icon")}),r(Y,{size:"sm"},e.stargazers_count.toLocaleString())):null,a=()=>r("div",{onClick:i},r("svg",{className:zo("link"),"aria-hidden":"true",role:"img",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 24 24"},r("path",{d:"M8 5a1 1 0 0 0 0 2h7.59L5.29 17.3a1 1 0 1 0 1.42 1.4L17 8.42V16a1 1 0 1 0 2 0V6a1 1 0 0 0-1-1H8Z"}))),l=()=>!o||!e.language?null:r("div",{className:zo("language")},r("span",{className:zo("language-color"),style:{backgroundColor:cN(e.language)}}),r(Y,{size:"sm",className:zo("lang-name")},e.language),s()),c=n==="tab"?{onClick:i}:{};return r(f,null,e.description?r(Ue,{text:e.description,key:e.id},({onMouseLeave:u,onMouseEnter:p})=>r("div",{className:zo("card"),onMouseLeave:u,onMouseEnter:p,...c},r("div",{className:zo("header")},r(Y,{size:"sm",weight:"medium",className:zo("name")},e.name),a()),l())):r("div",{className:zo("card"),...c},r("div",{className:zo("header")},r(Y,{size:"sm",weight:"medium",className:zo("name")},e.name),a()),l()))}var K4e=x(()=>{"use strict";d();Et();hZ();B();nk();xZ()});function Y4e({repos:e,username:t,rootProps:o}){let n=()=>r("thead",null,r("tr",null,r("th",null,"Repository"),r("th",null,"Description"),r("th",null,"Language"),r("th",null,"Stars"))),i=s=>r("tr",{key:s.id,onClick:()=>window.open(s.html_url,"_blank")},r("td",null,r("div",{className:zo("table-name")},s.name)),r("td",null,r("div",{className:zo("table-description")},s.description||"")),r("td",null,s.language&&r("div",{className:zo("table-language")},r("span",{className:zo("table-language-color"),style:{backgroundColor:cN(s.language)}}),r("span",null,s.language))),r("td",null,r("div",{className:zo("table-stars")},r(uN,{className:zo("star-icon")}),r("span",null,s.stargazers_count.toLocaleString()))));return r(Pe,{className:zo("modal"),size:"large",...o},r(je,null,r(Jo,{className:zo("modal-title")},t,"'s GitHub Repositories")),r($e,{className:zo("modal-content")},r("div",{className:zo("table-container")},r("table",{className:zo("table")},r("colgroup",null,r("col",{className:zo("header-repo")}),r("col",{className:zo("header-description")}),r("col",{className:zo("header-language")}),r("col",{className:zo("header-stars")})),n(),r("tbody",null,e.map(i))))),r(ht,{className:zo("modal-footer")},r(Me,{className:zo("modal-footer-github"),variant:"link",onClick:()=>window.open(`https://github.com/${t}?tab=repositories`,"_blank")},"View on GitHub"),r(Me,{className:zo("modal-footer-close"),variant:"secondary",onClick:o.onClose},"Close")))}var Q4e=x(()=>{"use strict";d();Co();ut();hZ();at();nk();xZ()});function yZ({id:e,theme:t,variant:o="popout"}){let[n,i]=L([]),[s,a]=L(!0),[l,c]=L(null),[u,p]=L(null),[m,g]=L(!1),y=()=>{if(!u)return;let v=[...n].sort((E,A)=>A.stargazers_count-E.stargazers_count);Ee(E=>r(Y4e,{repos:v,username:u.username,rootProps:E}))};if(se(()=>{(async()=>{try{let E=gr.getUserProfile(e);if(!E){a(!1);return}let A=E.connectedAccounts;if(!A?.length){a(!1);return}let C=A.find(J=>J.type==="github");if(!C){a(!1);return}let I=C.name,N=await H4e(I);N&&p(N);let _=C.id;!Iy.store.showInMiniProfile&&o!=="tab"&&g(!0);let O=await z4e(_);if(O){i(O),a(!1);return}let F=await G4e(I);i(F),a(!1)}catch(E){let A=E instanceof Error?E.message:"Failed to fetch repositories";c(A),a(!1)}})()},[e]),s||(Y,zo("loading"),l))return;if(Y,zo("error"),!n.length)return null;if(m)return r(Me,{className:zo("button"),size:"small",variant:"secondary",onClick:y},"Show GitHub Repositories");let b=o==="tab"?n:n.slice(0,4);return r("div",{className:o==="tab"?`${zo("container")} ${zo("tab")}`:zo("container")},r(Y,{size:"xs",weight:"semibold",className:zo("header")},"GitHub Repositories",u&&r("span",{className:zo("count")},o==="tab"?` (${n.length})`:` (Showing only top ${b.length}/${u.totalRepos})`)),r("div",{className:zo("list")},b.map(v=>r(W4e,{key:v.id,repo:v,showStars:Iy.store.showStars,showLanguage:Iy.store.showLanguage,variant:o}))),o!=="tab"&&r("div",{className:zo("footer")},r(Ia,{className:zo("show-more"),color:"secondary",onClick:y},"Show More")))}var Z4e=x(()=>{"use strict";d();Et();Co();j4e();at();B();nk();K4e();Q4e()});var zo,Iy,X4e,Wlt,Klt,dN,nk=x(()=>{"use strict";d();U4e();Q();Et();tt();H();nt();$();fe();Z4e();zo=de("vc-github-repos-"),Iy=R({showStars:{type:3,description:"Show repository stars",default:!0},showLanguage:{type:3,description:"Show repository language",default:!0},showInMiniProfile:{type:3,description:"Show full ui in the mini profile instead of just a button",default:!0},showRepositoryTab:{type:3,description:"Show repositories tab in profile modal (hides button in connections when enabled)",default:!0}}),X4e=vt(".getPreviewThemeColors","primaryColor:"),Wlt=ee.wrap(e=>r(yZ,{...e,id:e.user.id,theme:X4e(e).theme}),{noop:!0,fallback:()=>r(Y,{size:"xs",weight:"semibold",className:"vc-github-repos-error",style:{color:"var(--text-feedback-critical)"}},"Error, Failed to render GithubRepos")}),Klt=ee.wrap(e=>r(yZ,{...e,id:e.user.id,theme:X4e(e).theme,variant:"tab"}),{noop:!0}),dN=k({name:"GitHubRepos",description:"Displays a user's public GitHub repositories in their profile",authors:[j.talhakf,j.Panniku,j.benjii],settings:Iy,patches:[{find:/onOpenUserProfileModal:\i\}\),\i/,replacement:{match:/userId:\i\.id,guild:\i.{0,15}\}\).{0,100}(?=\])/,replace:"$&,$self.ProfilePopoutComponent(arguments[0])"}},{find:".MODAL_V2,onClose:",replacement:{match:/displayProfile:(\i).*?connections:\i.{0,25}\i.\i\}\)\}\)/,replace:"$&,$self.ProfilePopoutComponent({ user: arguments[0].user, displayProfile: $1 }),",predicate:()=>!Iy.store.showRepositoryTab}},{find:"#{intl::USER_PROFILE_ACTIVITY}",replacement:{match:/\.MUTUAL_GUILDS\}\)\)(?=,(\i))/,replace:'$&,$1.push({text:"GitHub",section:"GITHUB"})',predicate:()=>Iy.store.showRepositoryTab}},{find:".WIDGETS?",replacement:{match:/(\i)===\i\.\i\.WISHLIST/,replace:'$1==="GITHUB"?$self.ProfileRepositoriesTab(arguments[0]):$&'}}],ProfilePopoutComponent:Wlt,ProfileRepositoriesTab:Klt})});function Ylt(e){let t=Pt(e,"input",""),o=""+J4e[rk.store.defaultEngine]+encodeURIComponent(t);return rk.store.customEngineURL&&(o=""+[rk.store.customEngineURL]+encodeURIComponent(t)),rk.store.hyperlink?`[${t}](${o})`:o}var J4e,rk,pN,V4e=x(()=>{"use strict";d();yi();Q();H();$();J4e={Google:"https://www.google.com/search?q=",Bing:"https://www.bing.com/search?q=",Yahoo:"https://search.yahoo.com/search?p=",DuckDuckGo:"https://duckduckgo.com/?q=",Baidu:"https://www.baidu.com/s?wd=",Yandex:"https://yandex.com/search/?text=",Ecosia:"https://www.ecosia.org/search?q=",Ask:"https://www.ask.com/web?q=",AOL:"https://search.aol.com/aol/search?q=",LetMeGoogleThatForYou:"https://letmegooglethat.com/?q="},rk=R({hyperlink:{type:3,description:"If the sent link should hyperlink with the query as the label",default:!1},defaultEngine:{type:4,description:"The search engine to use",options:Object.keys(J4e).map((e,t)=>({label:e,value:e,default:t===0}))},customEngineURL:{description:"The URL of the Engine you wish to use",type:0,placeholder:""}}),pN=k({name:"GoogleThat",description:"Adds a command to send a internet search link",authors:[w.Samwich,j.KrystalSkull],tags:["search","google","query","duckduckgo","command"],settings:rk,commands:[{name:"googlethat",description:"send a search engine link",options:[{name:"input",description:"The search query",type:3,required:!0}],execute:e=>({content:Ylt(e)})}]})});async function tke(e,t){let o=t==="emojis",n=o?Hi.getGuilds()[e.id]?.emojis:Xs.getStickersByGuildId(e.id);if(!n)return console.log("Server not found!");let i=()=>{let l=window.GLOBAL_ENV.MEDIA_PROXY_ENDPOINT;return l.startsWith("//")?l.slice(2):l},s=async l=>{let c,u,p=i();if(o)c=l.animated?".gif":".png",u=`https://${p}/emojis/${l.id}${c}?size=512&quality=lossless`;else{c="."+Qlt[l.format_type];let E=l.format_type===2?".png":c;u=`https://${p}/stickers/${l.id}${E}?size=4096&lossless=true`}let m=l.name.replace(/[<>:"/\\|?*]/g,"_"),g=`${m}_${l.id}${c}`,y=await fetch(u);if(!o&&l.format_type===2&&(!y.ok||y.headers.get("content-type")?.includes("text"))){let E=`https://${p}/stickers/${l.id}.gif?size=4096&lossless=true`,A=await fetch(E);A.ok&&!A.headers.get("content-type")?.includes("text")&&(y=A,c=".gif",g=`${m}_${l.id}${c}`)}let v=await(await y.blob()).arrayBuffer();return{file:new Uint8Array(v),filename:g}},a=n.map(l=>s(l));Promise.all(a).then(l=>{let c=ox(Object.fromEntries(l.map(({file:m,filename:g})=>[g,m]))),u=new Blob([new Uint8Array(c)],{type:"application/zip"}),p=document.createElement("a");p.href=URL.createObjectURL(u),p.download=`${e.name}-${t}.zip`,p.click(),p.remove()}).catch(console.error)}var Qlt,eke,mN,oke=x(()=>{"use strict";d();Un();H();$();B();e8();Qlt=[,"png","apng","json","gif"],eke=(e,{guild:t})=>{let o=Qt("privacy",e);o&&o.push(r(f,null,r(M.MenuItem,{id:"emoji.download",label:"Download Emojis",action:()=>tke(t,"emojis")}),r(M.MenuItem,{id:"sticker.download",label:"Download Stickers",action:()=>tke(t,"stickers")})))};mN=k({name:"GuildPickerDumper",description:"Context menu to dump and download a server's emojis and stickers.",authors:[j.Cortex,w.Samwich,j.Synth,w.thororen],contextMenus:{"guild-context":eke,"guild-header-popout":eke}})});var ik,nke=x(()=>{d();(window.VencordStyles??=new Map).set("src/equicordplugins/guildTagSettings/styles.css",{name:"src/equicordplugins/guildTagSettings/styles.css",source:`[class*="chipletContainerInner"]:has([src *="/clan-badges/"]) {
    display: none;
}`,classNames:{},dom:null});ik="src/equicordplugins/guildTagSettings/styles.css"});var fN,gN,rke=x(()=>{"use strict";d();Q();ps();H();$();nke();fN=R({hideTags:{type:3,description:"Hide tags",default:!1,onChange:e=>{e?Or(ik):Fr(ik)}},disableAdoptTagPrompt:{type:3,description:"Disable the prompt to adopt tags",default:!0,restartNeeded:!0}}),gN=k({name:"GuildTagSettings",description:"Settings for Guild Tags",authors:[w.thororen],settings:fN,patches:[{find:"GuildTagAvailableCoachmark",replacement:{match:/return.{0,100}shouldShow/g,replace:"return null;$&"},predicate:()=>fN.store.disableAdoptTagPrompt}],start(){fN.store.hideTags&&Or(ik)},stop(){fN.store.hideTags&&Fr(ik)}})});function Zlt(e){return r(Lr,{onClick:e.onClick,tooltip:e.open?"Close":"Open"},r("svg",{fill:bZ.store.Color&&e.open?"#c32a32":"currentColor",fillRule:"evenodd",width:"20",height:"20",viewBox:"0 0 24 24",style:{scale:"1.096",translate:"0 -1px"}},e.open?r(f,null,r("path",{d:"M1.3 21.3a1 1 0 1 0 1.4 1.4l20-20a1 1 0 0 0-1.4-1.4l-20 20ZM3.16 16.05c.18.24.53.26.74.05l.72-.72c.18-.18.2-.45.05-.66a15.7 15.7 0 0 1-1.43-2.52.48.48 0 0 1 0-.4c.4-.9 1.18-2.37 2.37-3.72C7.13 6.38 9.2 5 12 5c.82 0 1.58.12 2.28.33.18.05.38 0 .52-.13l.8-.8c.25-.25.18-.67-.15-.79A9.79 9.79 0 0 0 12 3C4.89 3 1.73 10.11 1.11 11.7a.83.83 0 0 0 0 .6c.25.64.9 2.15 2.05 3.75Z"}),r("path",{d:"M8.18 10.81c-.13.43.36.65.67.34l2.3-2.3c.31-.31.09-.8-.34-.67a4 4 0 0 0-2.63 2.63ZM12.85 15.15c-.31.31-.09.8.34.67a4.01 4.01 0 0 0 2.63-2.63c.13-.43-.36-.65-.67-.34l-2.3 2.3Z"})," ",r("path",{d:"M9.72 18.67a.52.52 0 0 0-.52.13l-.8.8c-.25.25-.18.67.15.79 1.03.38 2.18.61 3.45.61 7.11 0 10.27-7.11 10.89-8.7a.83.83 0 0 0 0-.6c-.25-.64-.9-2.15-2.05-3.75a.49.49 0 0 0-.74-.05l-.72.72a.51.51 0 0 0-.05.66 15.7 15.7 0 0 1 1.43 2.52c.06.13.06.27 0 .4-.4.9-1.18 2.37-2.37 3.72C16.87 17.62 14.8 19 12 19c-.82 0-1.58-.12-2.28-.33Z"})):r("path",{d:"M22.89 11.7c.07.2.07.4 0 .6C22.27 13.9 19.1 21 12 21c-7.11 0-10.27-7.11-10.89-8.7a.83.83 0 0 1 0-.6C1.73 10.1 4.9 3 12 3c7.11 0 10.27 7.11 10.89 8.7Zm-4.5-3.62A15.11 15.11 0 0 1 20.85 12c-.38.88-1.18 2.47-2.46 3.92C16.87 17.62 14.8 19 12 19c-2.8 0-4.87-1.38-6.39-3.08A15.11 15.11 0 0 1 3.15 12c.38-.88 1.18-2.47 2.46-3.92C7.13 6.38 9.2 5 12 5c2.8 0 4.87 1.38 6.39 3.08ZM15.56 11.77c.2-.1.44.02.44.23a4 4 0 1 1-4-4c.21 0 .33.25.23.44a2.5 2.5 0 0 0 3.32 3.32Z"})))}function Xlt({buttons:e}){if(!e||e.every(n=>n?.props?.disabled===!0))return null;let[t,o]=L(sk);return se(()=>{sk=t},[t]),r("div",{key:"chat-bar-buttons-menu",id:"chat-bar-buttons-menu",style:{display:"flex",flexWrap:"nowrap",overflowX:"auto",overflowY:"hidden"}},t&&e.map((n,i)=>r(X.Fragment,{key:i},n)),r(Zlt,{onClick:()=>o(!t),open:t}))}var sk,bZ,hN,ike=x(()=>{"use strict";d();ma();Q();H();$();B();bZ=R({Color:{type:3,description:"Color it red on open",default:!1},Open:{type:3,description:"opened by default",default:!1,onChange:e=>{sk=e.open}}});hN=k({name:"HideChatButtons",description:"able to hide the chat buttons",settings:bZ,authors:[j.iamme],patches:[{find:'"sticker")',replacement:{match:/(?<="div",\{.{0,15}children:)(.+?)\}/,replace:"$self.buttonsInner($1)}"}}],startAt:"Init",buttonsInner(e){return r(Xlt,{buttons:e})},start(){sk=bZ.store.Open},stop(){sk=void 0}})});var ske=x(()=>{});var vr,ak=x(()=>{"use strict";d();vn();fe();B();vr=fr(()=>{let{Store:e}=is,t=Ft("SortedGuildStore"),o="HideServers_servers";class n extends e{_hiddenGuilds=new Set;get hiddenGuilds(){return this._hiddenGuilds}async load(){let s=await zt(o);s&&s instanceof Set&&(this._hiddenGuilds=s)}unload(){this._hiddenGuilds.clear()}save(){Gt(o,this._hiddenGuilds)}addHiddenGuild(s){this._hiddenGuilds.add(s),this.save(),this.emitChange()}removeHiddenGuild(s){this._hiddenGuilds.delete(s),this.save(),this.emitChange()}addHiddenFolder(s,a){this._hiddenGuilds.add(`folder-${s}`),a.forEach(l=>this._hiddenGuilds.add(l)),this.save(),this.emitChange()}removeHiddenFolder(s,a){this._hiddenGuilds.delete(`folder-${s}`),a.forEach(l=>this._hiddenGuilds.delete(l)),this.save(),this.emitChange()}clearHidden(){this._hiddenGuilds.clear(),Ta(o),this.emitChange()}hiddenGuildsDetail(){return t.getFlattenedGuildIds().filter(a=>this._hiddenGuilds.has(a)).map(a=>ct.getGuild(a))}}return new n(V)})});function Jlt({modalProps:e,close:t}){let o=Je([vr],()=>vr.hiddenGuildsDetail());return r(Pe,{...e,size:"large"},r(je,null,r(Y,{size:"lg",weight:"semibold",style:{flexGrow:1}},"Hidden Servers"),r(Ut,{onClick:t})),r($e,null,r(vZ,{guilds:o})))}function Vlt(e,t){let o=t.getGuildFolders().find(n=>n.guildIds.includes(e.id));return o&&vr.hiddenGuilds.has("folder-"+o.folderId)?!0:vr.hiddenGuilds.has(e.id)}function cke(e,t){return e.getGuildFolders().filter(o=>o.folderId!==void 0).find(o=>o.guildIds.includes(t))}function uke(e,t){vr.removeHiddenGuild(e.id);let o=cke(t,e.id);o&&vr.removeHiddenGuild("folder-"+o.folderId)}function lke({guild:e}){return r("div",{key:e.id,className:Dy("row")},r("div",{className:Dy("guildicon")},e.icon?r("img",{alt:"",height:"48",width:"48",src:To.getGuildIconURL({id:e.id,icon:e.icon,canAnimate:!0,size:240})}):r("div",{"aria-hidden":!0,className:me(ake.childWrapper,ake.acronym)},Ba(e))),r(re,{className:Dy("name")},e.name),r(U,{className:"row-button",color:U.Colors.PRIMARY,onClick:()=>uke(e,My)},"Remove"))}function vZ({guilds:e}){let t=e.filter(i=>Vlt(i,My)),o={},n=[];return t.forEach(i=>{let s=cke(My,i.id);s?(o[s.folderId]||(o[s.folderId]=[]),o[s.folderId].push(i)):n.push(i)}),r("div",{className:Dy("list")},Object.entries(o).map(([i,s])=>{let a=My.getGuildFolders().find(l=>l.folderId===Number(i));return a?r("div",{key:i,className:Dy("folder")},r("div",{className:Dy("folder-header")},r(Y,{size:"sm",weight:"medium"},a.folderName||"Folder"),r(U,{color:U.Colors.PRIMARY,onClick:()=>{s.forEach(l=>uke(l,My))},size:U.Sizes.SMALL,className:Dy("restore-all")},"Remove All")),s.map(l=>r(lke,{key:l.id,guild:l}))):null}),r(Y,{size:"sm",weight:"medium"},"Guilds"),n.map(i=>r(lke,{key:i.id,guild:i})),t.length===0&&r(Y,{size:"sm",weight:"medium"},"No hidden servers"))}function dke(){let e=Ee(t=>r(Jlt,{modalProps:t,close:()=>vo(e)}))}var Dy,ake,SZ=x(()=>{"use strict";d();Et();ut();ak();nt();mt();xt();at();fe();B();xN();Dy=de("vc-hideservers-"),ake=et("icon","acronym","childWrapper")});function ect(){let e=Je([vr],()=>vr.hiddenGuilds,void 0,(o,n)=>o.size===n.size),t=Array.from(e).filter(o=>ct.getGuild(o)).length;return r("div",{className:pke("button-wrapper")},t>0?r(U,{className:pke("button"),look:U.Looks.FILLED,size:U.Sizes.MIN,onClick:()=>dke()},t," Hidden"):null)}var pke,wZ,mke=x(()=>{"use strict";d();ske();ak();nt();B();SZ();pke=de("vc-hideservers-");wZ=()=>r(ect,null)});var kZ,fke=x(()=>{"use strict";d();Q();$();B();xN();SZ();ak();kZ=R({showIndicator:{type:3,description:"Show menu to unhide servers at the bottom of the list",default:!0,onChange:e=>{e?EZ():AZ()}},guildsList:{type:6,description:"Remove hidden servers",component:()=>{let e=Je([vr],()=>vr.hiddenGuildsDetail());return r(vZ,{guilds:e})}},resetHidden:{type:6,description:"Remove all hidden guilds from the list",component:()=>r("div",null,r(U,{size:U.Sizes.SMALL,color:U.Colors.RED,onClick:()=>vr.clearHidden()},"Reset Hidden Servers"))}})});function EZ(){kc(2,wZ)}function AZ(){Ec(2,wZ)}var My,gke,yN,xN=x(()=>{"use strict";d();Un();B0();H();$();fe();B();mke();ak();fke();My=Ft("SortedGuildStore"),gke=(e,{guild:t})=>{let o=Qt("privacy",e);if(!o)return;let n=vr.hiddenGuilds.has(t.id.toString());o.push(r(M.MenuItem,{id:"vc-hide-server",label:n?"Unhide Server":"Hide Server",action:()=>{n?vr.removeHiddenGuild(t.id):vr.addHiddenGuild(t.id)}}))};yN=k({name:"HideServers",description:"Allows you to hide servers from the guild list and quick switcher by right clicking them",authors:[j.bep],tags:["guild","server","hide","folder"],dependencies:["ServerListAPI"],contextMenus:{"guild-header-popout":gke,"guild-context":(e,t)=>{if("guild"in t&&gke(e,t),"folderId"in t){let{folderId:o}=t,n=My.getGuildFolderById(o),{guildIds:i}=n,s=i.every(a=>vr.hiddenGuilds.has(a));e.push(r(M.MenuItem,{id:"vc-hide-folder",label:s?"Unhide Folder":"Hide Folder",action:()=>{s?vr.removeHiddenFolder(o,i):vr.addHiddenFolder(o,i)}}))}}},patches:[{find:'("guildsnav")',replacement:[{match:/(\i)(\.map\(.{0,30}\}\),\i)/,replace:"$self.useFilteredGuilds($1)$2"},{match:/let{disableAppDownload.{0,10}isPlatformEmbedded/,replace:"$self.useStore();$&"}]},{find:"#{intl::QUICKSWITCHER_PROTIP}",replacement:{match:/(?<=renderResults\(\){.{0,100})let{query/,replace:"this.props.results = $self.filteredGuildResults(this.props.results);$&"}}],settings:kZ,useStore:()=>{Je([vr],()=>vr.hiddenGuilds,void 0,(e,t)=>e.size===t.size)},async start(){kZ.store.showIndicator&&EZ(),await vr.load()},async stop(){AZ(),vr.unload()},useFilteredGuilds(e){let t=Je([vr],()=>vr.hiddenGuilds,void 0,(o,n)=>o.size===n.size);return e.flatMap(o=>{if(!(t instanceof Set))return[o];if(o.type==="guild"&&t.has(o.id.toString()))return[];if(o.type==="folder"&&t.has("folder-"+o.id.toString()))return[];let n=Object.assign({},o);return n.children=o.children.filter(i=>!t.has(i.id.toString())&&!(i.type==="folder"&&t.has("folder-"+i.id.toString()))),[n]})},filteredGuildResults(e){let{hiddenGuilds:t}=vr;return e.filter(o=>!(o?.record?.guild_id&&t.has(o.record.guild_id)||o.type==="GUILD"&&t.has(o.record.id)))}})});var hke=x(()=>{});function $g(e,t){Oe.set(e,t,C2)}function xke(e){Oe.del(e,C2)}async function yke(){let e=await Oe.entries(C2);for(let[t,o]of e)Ga.set(String(t),o)}async function bke(){await Oe.clear(C2),ei.newNoteBook("Main",!0)}async function vke(){let e="notes.json",t=JSON.stringify(ei.exportNotes(),null,2);{let o=new File([t],e,{type:"application/json"}),n=document.createElement("a");n.href=URL.createObjectURL(o),n.download=e,document.body.appendChild(n),n.click(),setTimeout(()=>{URL.revokeObjectURL(n.href),document.body.removeChild(n)},0)}}async function Ske(){{let e=document.createElement("input");e.type="file",e.accept="application/json",e.style.display="none",e.onchange=()=>{let t=e.files?.[0];if(!t)return;let o=new FileReader;o.onload=()=>{try{ei.importNotes(o.result)}catch{D.show({id:D.genId(),message:"Failed to import notes",type:D.Type.FAILURE})}},o.readAsText(t)},document.body.appendChild(e),e.click(),setTimeout(()=>document.body.removeChild(e),0)}}var C2,bN=x(()=>{"use strict";d();vn();dr();B();Hg();C2=i0("HolyNoteData","HolyNoteStore")});function tm(e,t=D.Type.SUCCESS){D.show({id:D.genId(),message:e,type:t})}function tct(e,t){return{id:t.id,channel_id:t.channel_id,guild_id:e.guild_id,content:t.content,author:{id:t.author.id,avatar:t.author.avatar,discriminator:t.author.discriminator,username:t.author.username},flags:t.flags,timestamp:t.timestamp.toString(),attachments:t.attachments,embeds:t.embeds,reactions:t.reactions,stickerItems:t.stickerItems}}var Ga,ei,Hg=x(()=>{"use strict";d();fe();B();bN();Ga=new Map;ei=fr(()=>({getNotes(e){return Ga.get(e)},getAllNotes(){return Object.fromEntries(Ga.entries())},addNote(e,t){let o=this.getNotes(t)??{},n=ne.getChannel(e.channel_id),i={[e.id]:tct(n,e),...o};Ga.set(t,i),$g(t,i),tm(`Added note to ${t}`)},deleteNote(e,t){let o=this.getNotes(t);if(!o)return;let{[e]:n,...i}=o;Ga.set(t,i),$g(t,i),tm(`Deleted note from ${t}`)},moveNote(e,t,o){let n=this.getNotes(t),i=this.getNotes(o);if(!n||!i)return;let{[e.id]:s,...a}=n,l={[e.id]:e,...i};Ga.set(t,a),Ga.set(o,l),$g(t,a),$g(o,l),tm(`Moved note from ${t} to ${o}`)},newNoteBook(e,t){if(Ga.has(e)){tm(`Notebook ${e} already exists`,D.Type.FAILURE);return}Ga.set(e,{}),$g(e,{}),t||tm(`Created notebook ${e}`)},deleteNotebook(e){Ga.delete(e),xke(e),tm(`Deleted notebook ${e}`)},refreshAvatars(){let e=this.getAllNotes();for(let t in e){let o=e[t];for(let n in o){let i=o[n],s=z.getUser(i.author.id);s&&(i.author.avatar=s.avatar,i.author.discriminator=s.discriminator,i.author.username=s.username)}Ga.set(t,o),$g(t,o)}tm("Refreshed avatars")},async deleteEverything(){Ga.clear(),await bke(),tm("Deleted all notes")},exportNotes(){return this.getAllNotes()},importNotes(e){let t;try{t=JSON.parse(e)}catch{tm("Invalid JSON",D.Type.FAILURE);return}for(let o in t)Ga.set(o,t[o]),$g(o,t[o]);tm("Imported notes")}}))});function lk({error:e}={}){if(e)return console.error("[HolyNotes] Error:",e),r("div",{className:om.emptyResultsWrap},r("div",{className:om.emptyResultsContent,style:{paddingBottom:0}},r("div",{className:om.errorImage}),r("div",{className:om.emptyResultsText},"There was an error parsing your notes. Check the console for details.")));let t=Math.random()<.1;return r("div",{className:om.emptyResultsWrap},r("div",{className:om.emptyResultsContent,style:{paddingBottom:0}},r("div",{className:`${om.noResultsImage}${t?` ${om.alt}`:""}`}),r("div",{className:om.emptyResultsText},t?"No notes were found. Empathy banana is here for you.":"No notes were found in this notebook.")))}var CZ=x(()=>{"use strict";d();zg()});function vN({title:e,children:t}){return r(f,null,r(Y,{size:"md",weight:"semibold",color:"text-strong"},e),r(Y,{size:"sm",color:"text-default",style:{marginTop:4}},t),r("hr",null))}function TZ({onClose:e,transitionState:t}){return r(Pe,{transitionState:t,size:"medium"},r(je,{separator:!1,className:Nn("header")},r("div",{className:Nn("header-content")},r(Y,{tag:"h2",size:"lg",weight:"semibold",className:Nn("title")},"Help"),r(Y,{size:"sm",className:Nn("description")},"Learn how to use Holy Notes")),r("div",{className:Nn("header-trailing")},r(yc,{onClick:e}))),r($e,{className:Nn("content")},r("div",{className:"vc-help-markdown"},r(vN,{title:"Adding Notes"},'Right-click a message, hover over "Note Message", and select the notebook.'),r(vN,{title:"Deleting Notes"},'Right-click a note and select "Delete Note", or hold DELETE and click a note.'),r(vN,{title:"Moving Notes"},'Right-click a note, hover over "Move Note", and select the destination notebook.'),r(vN,{title:"Jump To Message"},'Right-click a note and select "Jump to Message" to go to the original message.'))),r(ht,null,r(Be,{style:{gap:8,flexWrap:"wrap"}},r(Me,{size:"small",variant:"primary",onClick:()=>ei.refreshAvatars()},"Refresh Avatars"),r(Me,{size:"small",variant:"secondary",onClick:Ske},"Import Notes"),r(Me,{size:"small",variant:"secondary",onClick:vke},"Export Notes"),r(Me,{size:"small",variant:"dangerSecondary",onClick:()=>ei.deleteEverything()},"Delete All Notes"))))}var wke=x(()=>{"use strict";d();Et();Co();eo();zg();Hg();bN();at()});function IZ({onClose:e,transitionState:t}){let[o,n]=L(""),i=()=>{o.trim()&&(ei.newNoteBook(o.trim()),e())};return r(Pe,{transitionState:t,size:"small",className:Nn("create-modal")},r(je,{separator:!1,className:Nn("header")},r("div",{className:Nn("header-content")},r(Y,{tag:"h2",size:"lg",weight:"semibold",className:Nn("title")},"Create Notebook"),r(Y,{size:"sm",className:Nn("description")},"Enter a name for your new notebook")),r("div",{className:Nn("header-trailing")},r(yc,{onClick:e}))),r($e,{className:Nn("content")},r(qe,{value:o,placeholder:"Notebook Name",onChange:n})),r(ht,null,r(Me,{variant:"primary",onClick:i},"Create"),r(Me,{variant:"secondary",onClick:e},"Cancel")))}var kke=x(()=>{"use strict";d();Et();Co();zg();Hg();at();B()});function wN({note:e,notebook:t,updateParent:o,fromDeleteModal:n,closeModal:i}){let s=kt(!1),[,a]=f0(m=>m+1,0);se(()=>{z.getUser(e.author.id)||dp(e.author.id)},[e.author.id]),se(()=>{let m=g=>{if(g.key!=="Delete")return;let y=g.type==="keydown";s.current!==y&&(s.current=y,a())};return document.addEventListener("keydown",m),document.addEventListener("keyup",m),()=>{document.removeEventListener("keydown",m),document.removeEventListener("keyup",m)}},[]);let l=z.getUser(e.author.id)??e.author,c=()=>{s.current&&!n&&(ei.deleteNote(e.id,t),o?.())},u=m=>{n||Dt.openContextMenu(m,()=>r(nct,{note:e,notebook:t,updateParent:o,closeModal:i}))},p=new Eke({...e,author:new oct({...l,bot:!0}),timestamp:new Date(e.timestamp),embeds:e.embeds?.map(m=>m.timestamp?{...m,timestamp:new Date(m.timestamp)}:m)});return r("div",{className:"vc-holy-note",style:{margin:"8px 0",padding:"4px 0"},onClick:c,onContextMenu:u},r(Cke,{className:me("vc-holy-render",SN?.message,SN?.groupStart,SN?.cozyMessage),key:e.id,groupId:e.id,id:e.id,compact:!1,isHighlight:!1,isLastItem:!1,renderContentOnly:!1,channel:new Ake({id:"holy-notes"}),message:p}))}function nct({note:e,notebook:t,updateParent:o,closeModal:n}){let i=Object.keys(ei.getAllNotes());return r(M.Menu,{navId:"holynotes",onClose:()=>V.dispatch({type:"CONTEXT_MENU_CLOSE"}),"aria-label":"Holy Notes"},r(M.MenuItem,{label:"Jump To Message",id:"jump",icon:_r,action:()=>{ho.transitionTo(`/channels/${e.guild_id||"@me"}/${e.channel_id}/${e.id}`),n?.()}}),r(M.MenuItem,{label:"Copy Text",id:"copy-text",icon:ol,action:()=>Oo(e.content)}),e.attachments.length>0&&r(M.MenuItem,{label:"Copy Attachment URL",id:"copy-url",icon:hc,action:()=>Oo(e.attachments[0].url)}),r(M.MenuItem,{label:"Copy ID",id:"copy-id",icon:YL,action:()=>Oo(e.id)}),i.length>1&&r(M.MenuItem,{label:"Move Note",id:"move-note"},i.filter(s=>s!==t).map(s=>r(M.MenuItem,{key:s,label:`Move to ${s}`,id:s,action:()=>{ei.moveNote(e,t,s),o?.()}}))),r(M.MenuItem,{color:"danger",label:"Delete Note",id:"delete",icon:$i,action:()=>{ei.deleteNote(e.id,t),o?.()}}))}var oct,DZ=x(()=>{"use strict";d();ao();zg();Hg();cs();mt();Is();xt();B();oct=_n(()=>z.getCurrentUser().constructor)});function MZ({onClose:e,transitionState:t,notebook:o,onChangeTab:n}){let i=ei.getNotes(o),s=()=>{e(),n("Main"),ei.deleteNotebook(o)},a=i?Object.values(i):[];return r(Pe,{transitionState:t,size:"large"},r(je,{separator:!1,className:Nn("header")},r("div",{className:Nn("header-content")},r(Y,{tag:"h2",size:"lg",weight:"semibold",className:Nn("title")},'Delete "',o,'"?'),r(Y,{size:"sm",className:Nn("description")},a.length," ",a.length===1?"note":"notes"," will be deleted")),r("div",{className:Nn("header-trailing")},r(yc,{onClick:e}))),r($e,{className:Nn("content")},r(ee,null,a.length?a.map(l=>r(wN,{key:l.id,note:l,notebook:o,fromDeleteModal:!0})):r(lk,null))),r(ht,null,r(Me,{variant:"dangerPrimary",onClick:s},"Delete Notebook")))}var Tke=x(()=>{"use strict";d();Et();Co();tt();zg();Hg();at();CZ();DZ()});function rct({notebooks:e,selected:t,onSelect:o}){let n=[...e].sort((i,s)=>i==="Main"?-1:s==="Main"?1:i.localeCompare(s));return r("div",{className:Nn("tabs")},n.map(i=>r(en,{key:i,className:Nn("tab",t===i&&"tab-selected"),onClick:()=>o(i)},i)))}function ict(e,t){let o=[...e];switch(t){case 0:return o;case 1:return o.reverse();case 2:return o.sort((n,i)=>new Date(i.timestamp).getTime()-new Date(n.timestamp).getTime());case 3:return o.sort((n,i)=>new Date(n.timestamp).getTime()-new Date(i.timestamp).getTime())}}function sct(e,t){let o=Object.values(e);if(!t)return o;let n=t.toLowerCase();return o.filter(i=>i.content?.toLowerCase().includes(n))}function NZ({onClose:e,transitionState:t}){let[o,n]=L(0),[i,s]=L(""),[a,l]=L("Main"),[,c]=X.useReducer(b=>b+1,0),u=ei.getNotes(a);if(!u)return null;let p=sct(u,i),m=ict(p,o),g=Object.keys(u).length,y=a==="Main";return r(Pe,{transitionState:t,size:"large"},r(je,{separator:!1,className:Nn("header")},r("div",{className:Nn("header-content")},r(Be,{alignItems:"center",style:{gap:"12px"}},r(T2,{size:"md"}),r(Y,{tag:"h2",size:"lg",weight:"semibold",className:Nn("title")},"Notebook")),r(Y,{size:"sm",className:Nn("description")},i?`${p.length} of ${g}`:g," ",g===1?"note":"notes")),r("div",{className:Nn("header-trailing")},r(yc,{onClick:e}))),r("div",{className:Nn("controls")},r(qe,{placeholder:"Search notes...",value:i,onChange:s}),r(to,{options:[{label:"Newest First",value:0,default:!0},{label:"Oldest First",value:1},{label:"Newest Msg",value:2},{label:"Oldest Msg",value:3}],serialize:String,select:n,isSelected:b=>b===o,closeOnSelect:!0})),r(rct,{notebooks:Object.keys(ei.getAllNotes()),selected:a,onSelect:l}),r($e,{className:Nn("content")},r(ee,null,m.length?m.map(b=>r(wN,{key:b.id,note:b,notebook:a,updateParent:c,fromDeleteModal:!1,closeModal:e})):r(lk,null))),r(ht,null,r(Be,{style:{justifyContent:"space-between",alignItems:"center",width:"100%"}},r(Ue,{text:"Help"},({onMouseEnter:b,onMouseLeave:v})=>r(en,{className:Nn("icon-button"),onClick:()=>Ee(E=>r(TZ,{...E})),onMouseEnter:b,onMouseLeave:v},r(Dke,{size:"sm"}))),r(Me,{variant:y?"primary":"dangerPrimary",onClick:()=>y?Ee(b=>r(IZ,{...b})):Ee(b=>r(MZ,{...b,notebook:a,onChangeTab:l}))},y?"Create Notebook":"Delete Notebook"))))}var Ike=x(()=>{"use strict";d();Et();Co();tt();eo();zg();Hg();at();B();CZ();wke();kke();Tke();DZ()});function cct(){return r(ul,{tooltip:"Holy Notes",position:"bottom",icon:T2,onClick:()=>Ee(e=>r(NZ,{...e}))})}var Nn,Dke,act,T2,Eke,SN,om,Ake,Cke,lct,kN,zg=x(()=>{"use strict";d();hke();Hm();dr();H();nt();at();$();fe();B();Ike();Hg();bN();Nn=de("vc-notebook-"),Dke=fu("CircleQuestionIcon"),act=fu("BookmarkIcon"),T2=e=>r(act,{...e}),Eke=vt("isEdited(){"),SN=et("message","groupStart","cozyMessage"),om=et("emptyResultsWrap","emptyResultsContent","errorImage","emptyResultsText","noResultsImage","alt"),Ake=vt("computeLurkerPermissionsAllowList(){"),Cke=De("Message must not be a thread"),lct=(e,{message:t})=>{e.push(r(M.MenuItem,{label:"Note Message",id:"note-message"},Object.keys(ei.getAllNotes()).map(o=>r(M.MenuItem,{key:o,label:o,id:o,action:()=>ei.addNote(t,o)}))))};kN=k({name:"HolyNotes",description:"Save messages as notes to revisit later",authors:[j.Wolfie],toolboxActions:{"Open Notes"(){Ee(e=>r(NZ,{...e}))}},contextMenus:{message:lct},headerBarButton:{icon:T2,render:cct},messagePopoverButton:{icon:T2,render(e){return{label:"Save Note",icon:T2,message:e,channel:ne.getChannel(e.channel_id),onClick:()=>ei.addNote(e,"Main")}}},async start(){if(!(await Oe.keys(C2)).includes("Main")){ei.newNoteBook("Main");return}Ga.has("Main")||await yke()}})});var uct,dct,EN,Mke=x(()=>{"use strict";d();H();$();fe();B();uct=De("Math.min(1,Math.max(","dotRadius:"),dct=Ft("PrivateChannelSortStore"),EN=k({name:"HomeTyping",description:"Changes the home button to a typing indicator if someone in your dms is typing",authors:[w.Samwich],TypingIcon(){return r(uct,{dotRadius:3,themed:!0})},isTyping(){return Je([il],()=>dct.getPrivateChannelIds().some(e=>Object.keys(il.getTypingUsers(e)).some(t=>t!==z.getCurrentUser().id)))},patches:[{find:"#{intl::DISCODO_DISABLED}",replacement:[{match:/(\(0,\i.jsx\)\(\i.\i,{}\))/,replace:"arguments[0].user == null ? null : (vcIsTyping ? $self.TypingIcon() : $1)"},{match:/if\(null==\i\)return null;/,replace:"let vcIsTyping = $self.isTyping();$&"}],group:!0}]})});var BZ,AN,Nke=x(()=>{"use strict";d();Q();H();$();B();BZ=R({regex:{type:0,description:"Regex to trigger on",default:"hop on (?:fortnite|fn)"},url:{type:0,description:"URL to open",default:"com.epicgames.launcher://apps/fn%3A4fe75bbc5a674f4f9b356b5c90567da5%3AFortnite?action=launch&silent=true"}}),AN=k({name:"HopOn",description:"Hop on Fortnite or Hop on bloons :3",authors:[w.ImLvna],settings:BZ,flux:{async MESSAGE_CREATE({optimistic:e,type:t,message:o,channelId:n}){e||t!=="MESSAGE_CREATE"||o.state!=="SENDING"&&(Tt.isBlocked(o.author?.id)||n===st.getChannelId()&&o.content?.match(new RegExp(BZ.store.regex,"i"))&&VencordNative.native.openExternal(BZ.store.url))}}})});function pct({height:e=24,width:t=24,className:o,children:n,viewBox:i,...s}){return r("svg",{className:me(o,"vc-icon"),role:"img",width:t,height:e,viewBox:i,...s},n)}function Bke(e){return r(pct,{...e,className:me(e.className,"vc-husk"),viewBox:"0 0 24 24"},r("path",{fill:"currentColor",d:"M12,2C6.47,2 2,6.47 2,12C2,17.53 6.47,22 12,22A10,10 0 0,0 22,12C22,6.47 17.5,2 12,2M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M16.18,7.76L15.12,8.82L14.06,7.76L13,8.82L14.06,9.88L13,10.94L14.06,12L15.12,10.94L16.18,12L17.24,10.94L16.18,9.88L17.24,8.82L16.18,7.76M7.82,12L8.88,10.94L9.94,12L11,10.94L9.94,9.88L11,8.82L9.94,7.76L8.88,8.82L7.82,7.76L6.76,8.82L7.82,9.88L6.76,10.94L7.82,12M12,14C9.67,14 7.69,15.46 6.89,17.5H17.11C16.31,15.46 14.33,14 12,14Z"}))}function mct(e){if(!I2.store.findInServer||e==="")return I2.store.emojiID;let t="";return Hi.getGuildEmoji(e).forEach(o=>{o.name===I2.store.emojiName&&(t=o.id)}),t!==""?t:I2.store.emojiID}var I2,CN,Pke=x(()=>{"use strict";d();Q();H();xt();$();B();I2=R({findInServer:{description:"Attempt to find emoji of same name in server before using ID in settings (useful if no nitro)",type:3,default:!0},emojiName:{description:"Emoji name (default (from Vencord Server): husk)",type:0,default:"husk"},emojiID:{description:"Emoji ID (default (from Vencord Server): 1026532993923293184)",type:2,default:1026532993923293184n}});CN=k({name:"Husk",description:"Adds Husk button (check settings to change used emoji)",authors:[w.nin0dev],settings:I2,messagePopoverButton:{icon:Bke,render(e){return{label:"Husk",icon:Bke,message:e,channel:ne.getChannel(e.channel_id),onClick:()=>{let t=ne.getChannel(e.channel_id).guild_id!==null?ne.getChannel(e.channel_id).guild_id:"";Ht.put({url:`/channels/${e.channel_id}/messages/${e.id}/reactions/${I2.store.emojiName}:${mct(t)}/@me`})}}}}})});var _ke=x(()=>{});function TN(){return PZ}function Fke(){return fct}var PZ,Rke,fct,Lke,Oke,IN,_Z=x(()=>{"use strict";d();fe();PZ=[],Rke=He("colors","layout"),fct=He("AngleBracketsIcon","StaffBadgeIcon"),Lke=He("md","lg","xxs"),Oke=["xxs","xs","sm","md","lg"];IN=new Proxy({},{get:(e,t)=>{let o=Number(t);if(isNaN(o))return;if(e[o])return e[o];let n=PZ[o];if(!n||!Rke.colors[n]?.css)return;let i=n.split("_").map(s=>s[0].toUpperCase()+s.toLowerCase().slice(1)).join(" ");return e[o]={name:i,css:Rke.colors[n].css,key:n},e[o]}});Ln(["colors","layout"],e=>{PZ=Object.keys(e.colors)})});function yct(e){let[t,o]=L(e),n=gn(s=>{(s.key==="ArrowLeft"||s.key==="ArrowRight")&&(s.preventDefault(),o(a=>{let l=a+(s.key==="ArrowLeft"?-1:1),c=TN().length;return l<0?c-1:l>=c?0:l}))},[]),i=gn(s=>{let l=TN().indexOf(s.color);l!==-1&&o(l)},[]);return se(()=>(document.addEventListener("keydown",n),V.subscribe("ICONVIEWER_COLOR_CHANGE",i),()=>{document.removeEventListener("keydown",n),V.unsubscribe("ICONVIEWER_COLOR_CHANGE",i)}),[n,i]),[t,o]}function bct({colorKeys:e}){let[t,o]=L(""),n=e.filter(i=>!t||i.toLowerCase().includes(t.toLowerCase()));return r(M.Menu,{navId:"vc-ic-colors-menu",onClose:()=>V.dispatch({type:"CONTEXT_MENU_CLOSE"}),"aria-label":"Icon Viewer Colors"},r(M.MenuControlItem,{id:"vc-ic-colors-search",control:(i,s)=>r(M.MenuSearchControl,{...i,query:t,onChange:o,ref:s,placeholder:St("SEARCH"),autoFocus:!0})}),r(M.MenuSeparator,null),n.map(i=>r(M.MenuItem,{key:i,id:i,label:i,action:()=>V.dispatch({type:"ICONVIEWER_COLOR_CHANGE",color:i})})))}function vct(e){let t=document.createElement("div"),o=Ms(t);CO.flushSync(()=>o.render(e));let n=t.innerHTML;return o.unmount(),n}function Sct(e,t,o,n,i){let s=IN[o]?.name??"unknown",a=xct[i]??"png",l=`${e}-${s}-${n}px.${a}`;if(typeof t=="string"){su(new File([t],l,{type:"text/plain"}));return}for(let m of t.children){let g=m.getAttribute("fill");g?.startsWith("var(")&&m.setAttribute("fill",getComputedStyle(t).getPropertyValue(g.slice(4,-1)))}let c=document.createElement("canvas");c.width=n,c.height=n;let u=c.getContext("2d");if(!u)return;let p=new Image;p.onload=()=>{u.drawImage(p,0,0,n,n);let m=document.createElement("a");m.download=l,m.href=c.toDataURL(i),m.click()},p.src=`data:image/svg+xml;base64,${btoa(t.outerHTML)}`}function wct({iconName:e,Icon:t,color:o}){let n=IN[o],i=s=>{let a=Lke.lg,l=s==="image/svg+xml"?vct(r(t,{className:"vc-ic-save-icon",color:n?.css})):document.querySelector(".vc-ic-icon-preview .vc-ic-icon-large");l&&Sct(e,l,o,a,s)};return r(M.Menu,{navId:"vc-ic-other-menu",onClose:()=>V.dispatch({type:"CONTEXT_MENU_CLOSE"}),"aria-label":"Icon Options"},r(M.MenuItem,{id:"log-console",label:"Log to Console",icon:hct,action:()=>gct.info(t)}),r(M.MenuItem,{id:"save",label:"Save As..."},r(M.MenuItem,{id:"save-png",label:"PNG",action:()=>i("image/png")}),r(M.MenuItem,{id:"save-svg",label:"SVG",action:()=>i("image/svg+xml")}),r(M.MenuItem,{id:"save-jpeg",label:"JPEG",action:()=>i("image/jpeg")}),r(M.MenuItem,{id:"save-webp",label:"WEBP",action:()=>i("image/webp")}),r(M.MenuItem,{id:"save-gif",label:"GIF",action:()=>i("image/gif")}),r(M.MenuItem,{id:"save-avif",label:"AVIF",action:()=>i("image/avif")})))}function kct({iconName:e,Icon:t,onClose:o,transitionState:n}){let[i,s]=yct(209),a=IN[i],l=rt(()=>TN(),[]),c=e==="CircleShieldIcon"?"var(--background-base-low)":a?.css,u=`const ${e} = findExportedComponentLazy("${e}")`,p=y=>{Dt.openContextMenu(y,()=>r(bct,{colorKeys:l}))},m=gn(y=>{y.preventDefault();let b=l.length;s(v=>{let E=v+(y.deltaY>0?1:-1);return E<0?b-1:E>=b?0:E})},[l.length,s]),g=y=>{Dt.openContextMenu(y,()=>r(wct,{iconName:e,Icon:t,color:i}))};return r(Pe,{transitionState:n,size:"medium"},r(je,{separator:!1,className:"vc-ic-modal-header"},r("div",{className:"vc-ic-modal-header-content"},r(Y,{size:"lg",weight:"semibold",className:"vc-ic-modal-title"},e)),r("div",{className:"vc-ic-modal-header-trailing"},r(yc,{onClick:o}))),r($e,{className:"vc-ic-modal-content"},r(Be,{className:"vc-ic-modal-main"},r("div",{className:"vc-ic-icon-preview","aria-label":a?.name,onContextMenu:p,onWheel:m},r(t,{className:"vc-ic-icon-large",color:a?.css,fill:c})),r(Be,{flexDirection:"column",className:"vc-ic-icon-info"},r(Be,{className:"vc-ic-icon-sizes"},Oke.map(y=>r(ii,{text:y,key:y},r(t,{size:y,color:a?.css,fill:c})))),r(ii,{text:"Right-click icon to change"},r(Y,{size:"sm",color:"text-muted",className:"vc-ic-color-label"},a?.name)))),r("div",{className:"vc-ic-use-as"},r(Y,{size:"md",weight:"semibold"},"Usage"),r(Y,{size:"sm",color:"text-muted"},"Click to copy")),r(en,{className:"vc-ic-codeblock-wrapper",onClick:()=>$t(u,"Copied!")},r(Hl,{content:u,lang:"ts"}))),r(ht,{className:"vc-ic-modal-footer"},r(Me,{variant:"primary",onClick:g},"Actions")))}function Uke(e,t){Ee(o=>r(kct,{iconName:e,Icon:t,...o}))}function $ke(){return r(f,null,r(so,null,"Features"),r(W,null,r("ul",{className:"vc-ic-unordered-list"},r("li",null,"Preview icons"),r("li",null,"Copy icon names and CSS variables"),r("li",null,"Download icons in different formats (SVG, PNG, GIF, etc.)"),r("li",null,"Copy pre-made icon finds for your plugins"),r("li",null,"Find icons by function context"),r("li",null,"Search for colors by right-clicking the color name"))),r(so,null,"Special thanks"),r(W,null,r("ul",{className:"vc-ic-unordered-list"},r("li",null,"krystalskullofficial._."),r("li",null,"davr1"),r("li",null,"suffocate"))))}var gct,hct,xct,RZ=x(()=>{"use strict";d();Et();Co();_0();eo();ut();wt();du();mt();At();at();rd();fe();B();_Z();gct=new ke("IconViewer"),hct=De("1.1.27.1.37 0a6.66 6.6"),xct={"image/png":"png","image/jpeg":"jpeg","image/gif":"gif","image/webp":"webp","image/svg+xml":"svg","image/avif":"avif"}});function Ect(){if(DN)return DN;let e=Fke();return DN=Object.fromEntries(Object.entries(e).filter(([t,o])=>typeof o=="function"&&t.endsWith("Icon"))),DN}function Act(e,t,o,n){if(!e)return!0;if(n)return String(o).includes(e);let i=t.replace(/([A-Z]([a-z]+)?)/g," $1").toLowerCase().split(" "),s=e.toLowerCase().split(" ");return s.every(a=>i.includes(a))||i.every(a=>s.includes(a))||t.toLowerCase().includes(e.toLowerCase())}function Cct({iconName:e,Icon:t}){return r("div",{className:"vc-icon-box"},r(en,{onClick:()=>Uke(e,t)},r("div",{className:"vc-icon-container"},r(t,{className:"vc-icon-icon",size:"lg",width:32,height:32,color:"var(--interactive-icon-default)",fill:e==="CircleShieldIcon"?"var(--background-base-low)":"var(--interactive-icon-default)"}))),r(re,{className:"vc-icon-title",tag:"h3"},e))}function Tct(){let[e,t]=L(""),[o,n]=L(""),[i,s]=L(!1),a=rt(()=>Ect(),[]),l=rt(()=>rn(A=>n(A),150),[]),c=gn(A=>{t(A),l(A)},[l]),u=rt(()=>Object.entries(a).filter(([A,C])=>Act(o,A,C,i)),[a,o,i]),p=120,[m,g]=L(p);se(()=>{g(p)},[o,i]);let y=gn(()=>{g(A=>Math.min(A+p,u.length))},[u.length]),[b,v]=rw();se(()=>{v&&m<u.length&&y()},[v,m,u.length,y]);let E=u.slice(0,m);return r(bi,null,r("div",{className:me(Z.top16,"vc-icon-tab-search-bar-grid")},r(qe,{autoFocus:!0,value:e,placeholder:`Search ${Object.keys(a).length} icons...`,onChange:c}),r(ii,{text:"Search by function context"},r(Me,{size:"small","aria-label":"Search by function context",className:"vc-icon-search-func-btn",variant:i?"positive":"primary",onClick:()=>s(!i)},"Func"))),r("div",{className:"vc-icons-tab-grid-container"},E.map(([A,C])=>r(Cct,{key:A,iconName:A,Icon:C}))),m<u.length&&r("div",{ref:b,className:"vc-icon-sentinel"}))}var DN,LZ,Hke=x(()=>{"use strict";d();Co();ut();fa();du();la();co();xt();qo();B();_Z();RZ();DN=null;LZ=Bi(Tct,"IconsTab")});var MN,zke=x(()=>{"use strict";d();_ke();ao();Xm();H();$();B();Hke();RZ();MN=k({name:"IconViewer",description:"Adds a new tab to settings to preview all icons.",authors:[j.iamme],dependencies:["Settings"],startAt:"WebpackReady",toolboxActions:{"Open Icons Tab"(){xi("equicord_icon_viewer")}},settingsAboutComponent:$ke,start(){let{customEntries:e,customSections:t}=vi;e.push({key:"equicord_icon_viewer",title:"Icon Finder",Component:LZ,Icon:nO}),t.push(()=>({section:"EquicordDiscordIcons",label:"Icon Finder",element:LZ,className:"vc-discord-icons",id:"EquicordIconViewer"})),hs.push(["EquicordDiscordIcons","equicord_icon_viewer"])},stop(){let{customEntries:e,customSections:t}=vi,o=e.findIndex(s=>s.key==="equicord_icon_viewer");o!==-1&&e.splice(o,1);let n=t.findIndex(s=>s({}).id==="EquicordIconViewer");n!==-1&&t.splice(n,1);let i=hs.findIndex(s=>s[1]==="equicord_icon_viewer");i!==-1&&hs.splice(i,1)}})});function Gg(){OZ=Date.now()}var Ict,OZ,D2,M2,NN,Gke=x(()=>{"use strict";d();Q();H();At();$();B();Ict=new ke("IdleAutoRestart"),OZ=0,D2=null,M2=R({isEnabled:{description:"Enable automatic restart after idle",type:3,default:!0},idleMinutes:{description:"Minutes of inactivity before restarting (when not in VC)",type:5,markers:[5,10,15,30,60,120],default:30,stickToMarkers:!1}});NN=k({name:"IdleAutoRestart",description:"Automatically restarts the client after being idle for a configurable amount of time, but avoids restarting while you are in VC.",authors:[j.SteelTech],settings:M2,toolboxActions(){return r(M.MenuItem,{id:"auto-idle-restart-toggle-toolbox",label:M2.store.isEnabled?"Disable Auto Idle Restart":"Enable Auto Idle Restart",action:()=>{M2.store.isEnabled=!M2.store.isEnabled}})},start(){OZ=Date.now(),document.addEventListener("mousemove",Gg),document.addEventListener("keydown",Gg),document.addEventListener("mousedown",Gg),document.addEventListener("wheel",Gg,{passive:!0}),D2&&clearInterval(D2),D2=setInterval(()=>{if(!M2.store.isEnabled||lo.isCurrentClientInVoiceChannel())return;let e=M2.store.idleMinutes*6e4;Date.now()-OZ>=e&&(Ict.info("Idle timeout reached, reloading client"),location.reload())},3e4)},stop(){D2&&(clearInterval(D2),D2=null),document.removeEventListener("mousemove",Gg),document.removeEventListener("keydown",Gg),document.removeEventListener("mousedown",Gg),document.removeEventListener("wheel",Gg)}})});var qke=x(()=>{});var BN,Dct,Mct,jke,PN,Hf,_N,Wke=x(()=>{"use strict";d();qke();Q();Co();Ad();H();nt();$();fe();B();BN=new Set,Dct=de("vc-ignore-calls-"),Mct=De("0-1.02-.1H3.05a9"),jke=(e,{channel:t})=>{if(!t||!t.isDM()&&!t.isGroupDM())return;let o=PN.store.permanentlyIgnoredUsers.split(",").map(l=>l.trim()).filter(Boolean),[n,i]=X.useState(BN.has(t.id)),[s,a]=X.useState(o.includes(t.id));e.push(r(f,null,r(M.MenuSeparator,null),r(M.MenuCheckboxItem,{id:"vc-ignore-calls-temp",label:"Temporarily Ignore Calls",checked:n,action:()=>{n?BN.delete(t.id):BN.add(t.id),i(!n)}}),r(M.MenuCheckboxItem,{id:"vc-ignore-calls-perm",label:"Permanently Ignore Calls",checked:s,action:()=>{let l=o.slice();s?l=l.filter(c=>c!==t.id):l.push(t.id),PN.store.permanentlyIgnoredUsers=l.join(", "),a(!s)}})))},PN=R({permanentlyIgnoredUsers:{type:0,description:"User IDs (comma + space) who should be permanetly ignored",restartNeeded:!0,default:""}}),Hf={ringing:[],messageId:"",region:""},_N=k({name:"IgnoreCalls",description:"Allows you to ignore calls from specific users or dm groups.",authors:[j.TheArmagan,w.thororen],settings:PN,patches:[{find:"#{intl::INCOMING_CALL_ELLIPSIS}",replacement:{match:/(?<=onCallJoined:\(\).{0,150})\(\i\)\}\),className:\i\.\i\}\)/,replace:"$&,$self.renderIgnore(arguments[0].channel)"}}],contextMenus:{"user-context":jke,"gdm-context":jke},flux:{async CALL_UPDATE({ringing:e,messageId:t,region:o}){Hf.ringing=e,Hf.messageId=t,Hf.region=o}},renderIgnore(e){let t=z.getCurrentUser().id,o=PN.store.permanentlyIgnoredUsers.split(",").map(n=>n.trim()).filter(Boolean);return BN.has(e.id)||o.includes(e.id)?(V.dispatch({type:"CALL_UPDATE",channelId:e.id,ringing:Hf.ringing.filter(n=>n!==t),messageId:Hf.messageId,region:Hf.region}),null):r(ee,null,r(Ue,{text:"Ignore"},({onMouseEnter:n,onMouseLeave:i})=>r(Me,{className:Dct("button"),size:"small",onMouseEnter:n,onMouseLeave:i,onClick:()=>{V.dispatch({type:"CALL_UPDATE",channelId:e.id,ringing:Hf.ringing.filter(s=>s!==t),messageId:Hf.messageId,region:Hf.region})}},r(Mct,{color:"var(--interactive-icon-active)"}))))}})});var RN,Kke=x(()=>{"use strict";d();H();$();RN=k({name:"IgnoreTerms",description:"Ignore Discord's new terms of service",authors:[w.D3SOX],patches:[{find:"#{intl::NEW_TERMS_TITLE}",replacement:{match:/function (\i)\((\i)\)\{let\{transitionState:(\i)\}=(\i)/g,replace:"function $1($2){return $self.closeModal($2);let{transitionState:$3}=$4"}}],closeModal(e){return e.transitionState=null,e.onClose(),null}})});function Bct(e){let t=e instanceof File,o=t?URL.createObjectURL(e):e;return new Promise((n,i)=>{let s=new Image;s.onload=()=>{t&&URL.revokeObjectURL(o),n(s)},s.onerror=(a,l,c,u,p)=>i(p||a),s.crossOrigin="Anonymous",s.src=o})}async function Pct(e,t){let o=null,n=null,i=null;for(let s of e)switch(s.name){case"image":let a=up.getUpload(t.channel.id,s.name,sn.SlashCommand);if(a){if(!a.isImage)throw _l.clearAll(t.channel.id,sn.SlashCommand),"Upload is not an image";o=a.item.file}break;case"width":n=Number(s.value);break;case"height":i=Number(s.value);break}return _l.clearAll(t.channel.id,sn.SlashCommand),{image:o,width:n,height:i}}var N2,Nct,LN,Yke=x(()=>{"use strict";d();yi();H();$();B();N2=Ml(T5()),Nct=1;LN=k({name:"ImgToGif",description:"Adds a /imgtogif slash command to create a gif from any image",authors:[j.zyqunix],commands:[{inputType:0,name:"imgtogif",description:"Allows you to turn an image to a gif",options:[{name:"image",description:"Image attachment to use",type:11},{name:"width",description:"Width of the gif",type:4},{name:"height",description:"Height of the gif",type:4}],execute:async(e,t)=>{try{let{image:o,width:n,height:i}=await Pct(e,t);if(!o)throw"No Image specified!";let s=await Bct(o),a,l;n&&i?(a=n,l=i):n?(a=n,l=Math.round(s.height/s.width*n)):i?(l=i,a=Math.round(s.width/s.height*i)):(a=s.width,l=s.height);let c=(0,N2.GIFEncoder)(),u=document.createElement("canvas");u.width=a,u.height=l;let p=u.getContext("2d");_l.clearAll(t.channel.id,sn.SlashCommand);for(let y=0;y<Nct;y++){p.clearRect(0,0,u.width,u.height),p.drawImage(s,0,0,s.width,s.height,0,0,u.width,u.height);let{data:b}=p.getImageData(0,0,u.width,u.height),v=(0,N2.quantize)(b,256),E=(0,N2.applyPalette)(b,v);c.writeFrame(E,u.width,u.height,{transparent:!0,palette:v})}c.finish();let m=o.name?o.name.replace(/\.[^/.]+$/,""):"converted",g=new File([new Uint8Array(c.bytesView())],`${m}.gif`,{type:"image/gif"});setTimeout(()=>ls.promptToUpload([g],t.channel,sn.ChannelMessage),10)}catch(o){_l.clearAll(t.channel.id,sn.SlashCommand),Vt(t.channel.id,{content:String(o)})}}}]})});function Uct(){return r("svg",{width:"20",height:"20",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256"},r("path",{transform:"translate(351 -153)",fill:"currentcolor",d:"M-177.7,334.5c6.3-2.3,12.6-5.2,19.8-8.6c31.9-16.4,51.7-41.7,51.7-41.7s-32.5,0.6-64.4,17 c-4,1.7-7.5,4-10.9,5.7c5.7-7.5,12.1-16.4,18.7-25c25-37.1,31.3-77.3,31.3-77.3s-34.8,21-59.2,58.6c-5.2,7.5-9.8,14.9-13.8,22.7 c1.1-10.3,1.1-22.1,1.1-33.6c0-50-19.8-91.1-19.8-91.1s-19.8,40.5-19.8,91.1c0,12.1,0.6,23.3,1.1,33.6c-4-7.5-8.6-14.9-13.8-22.7 c-25-37.1-59.2-58.6-59.2-58.6s6.3,40,31.3,77.3c6.3,9.2,12.1,17.5,18.7,25c-3.4-2.3-7.5-4-10.9-5.7c-31.9-16.4-64.4-17-64.4-17 s19.8,25.6,51.7,41.7c6.9,3.4,13.2,6.3,19.8,8.6c-4,0.6-8,1.1-12.1,2.3c-30.5,6.4-53.2,23.9-53.2,23.9s27.3,7.5,58.6,1.1 c9.8-2.3,19.8-4.6,27.3-7.5c-1.1,1.1,15.8-8.6,21.6-14.4v60.4h8.6v-61.8c6.3,6.3,22.7,16.4,22.1,14.9c8,2.9,17.5,5.2,27.3,7.5 c30.8,6.3,58.6-1.1,58.6-1.1s-22.1-17.5-53.4-23.8C-169.6,335.7-173.7,335.1-177.7,334.5z"}))}function Zke(){return r("svg",{width:"20",height:"20",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256"},r("path",{transform:"translate(351 -153)",fill:"var(--status-danger)",d:"M-177.7,334.5c6.3-2.3,12.6-5.2,19.8-8.6c31.9-16.4,51.7-41.7,51.7-41.7s-32.5,0.6-64.4,17 c-4,1.7-7.5,4-10.9,5.7c5.7-7.5,12.1-16.4,18.7-25c25-37.1,31.3-77.3,31.3-77.3s-34.8,21-59.2,58.6c-5.2,7.5-9.8,14.9-13.8,22.7 c1.1-10.3,1.1-22.1,1.1-33.6c0-50-19.8-91.1-19.8-91.1s-19.8,40.5-19.8,91.1c0,12.1,0.6,23.3,1.1,33.6c-4-7.5-8.6-14.9-13.8-22.7 c-25-37.1-59.2-58.6-59.2-58.6s6.3,40,31.3,77.3c6.3,9.2,12.1,17.5,18.7,25c-3.4-2.3-7.5-4-10.9-5.7c-31.9-16.4-64.4-17-64.4-17 s19.8,25.6,51.7,41.7c6.9,3.4,13.2,6.3,19.8,8.6c-4,0.6-8,1.1-12.1,2.3c-30.5,6.4-53.2,23.9-53.2,23.9s27.3,7.5,58.6,1.1 c9.8-2.3,19.8-4.6,27.3-7.5c-1.1,1.1,15.8-8.6,21.6-14.4v60.4h8.6v-61.8c6.3,6.3,22.7,16.4,22.1,14.9c8,2.9,17.5,5.2,27.3,7.5 c30.8,6.3,58.6-1.1,58.6-1.1s-22.1-17.5-53.4-23.8C-169.6,335.7-173.7,335.1-177.7,334.5z"}))}var ck,_ct,Rct,Lct,Oct,Qke,Fct,ON,Xke=x(()=>{"use strict";d();ma();vu();Q();H();$();ck=R({showIcon:{type:3,default:!0,description:"Show a button to toggle the Ingtoninator plugin",restartNeeded:!0},isEnabled:{type:3,default:!0,description:"Enable or disable the Ingtoninator"}}),_ct=e=>{if(e==="i"||e==="I")return!1;let t=e.slice(-1).toLowerCase();return!["a","e","o","u","y"].includes(t)},Rct=e=>{let t=/https?:\/\/[^\s]+\.[^\s]+/g,o=new Set;for(let n of e.matchAll(t)){let i=n.index,s=i+n[0].length;for(let a=i;a<s;a++)o.add(a)}return Array.from(e.matchAll(/[\p{L}]+/gu),n=>({word:n[0],startIndex:n.index})).filter(n=>!o.has(n.startIndex))},Lct=e=>{let t=Rct(e);for(;t.length>0;){let o=Math.floor(Math.random()*t.length),n=t[o];if(!_ct(n.word)){t.splice(o,1);continue}return n}return null},Oct=e=>e.endsWith("INGTON")?"":e.endsWith("INGTO")?"N":e.endsWith("INGT")?"ON":e.endsWith("ING")?"TON":e.endsWith("IN")?"GTON":e.endsWith("I")?"NGTON":"INGTON",Qke=((e,t)=>{if(!ck.store.isEnabled)return;let o=t.content;if(!o||!o.trim())return;let n=Lct(o);if(n===null)return;let{word:i}=n,s=i.toUpperCase(),a=i===s,l=Oct(s);a||(l=l.toLowerCase());let c=n.startIndex+i.length;t.content=o.slice(0,c)+l+o.slice(c)}),Fct=({isMainChat:e})=>{let{isEnabled:t,showIcon:o}=ck.use(["isEnabled","showIcon"]),n=()=>ck.store.isEnabled=!ck.store.isEnabled;return!e||!o?null:r(Lr,{tooltip:t?"Ingtoninator Enabled":"Ingtoninator Disabled",onClick:n},t?Uct():Zke())};ON=k({name:"Ingtoninator",description:"Suffixes 'ington' to a random word in your message",authors:[j.zyqunix,j.BioTomateDE],settings:ck,chatBarButton:{icon:Zke,render:Fct},start(){qi(Qke)},stop(){ji(Qke)}})});var Jke=x(()=>{});function UN(e,t,o){Ee(n=>r(f,null,r(ee,null,r(Pe,{...n,size:"dynamic",fullscreenOnMobile:!0},r(je,{className:FN("header")},r(W,{style:{fontSize:"1.2rem",fontWeight:"bold",marginRight:"7px"}},"Members of role ",Jt.parse(`<@&${t}>`,!0,{channelId:o,viewingChannelId:o})," (",e.length,")"),r(Ut,{onClick:n.onClose,className:FN("close")})),r($e,null,r("div",{style:{padding:"13px 20px"},className:FN("member-list")},e.length!==0?e.map(i=>r(f,null,r(W,{className:FN("modal-member")},Jt.parse(`<@${i.userId}>`,!0,{channelId:o,viewingChannelId:o})))):r(W,null,"Looks like no online cached members with that role were found. Try scrolling down on your member list to cache more users!")))))))}var FN,Vke=x(()=>{"use strict";d();tt();wt();nt();at();B();FN=de("vc-inrole-")});function FZ(e,t){let o=Lt.getMembers(t),n=[];return o.forEach(i=>{i.roles.includes(e)&&n.push(i)}),n}var $ct,$N,eEe=x(()=>{"use strict";d();Jke();yi();Ra();ao();wt();H();mt();$();B();Vke();$ct=nr("appearance","developerMode");$N=k({name:"InRole",description:"Know who is in a role with the role context menu or /inrole command (read plugin info!)",authors:[w.nin0dev],dependencies:["UserSettingsAPI"],start(){$ct.updateSetting(!0)},settingsAboutComponent:()=>r(f,null,r(W,{style:{fontSize:"1.2rem",marginTop:"15px",fontWeight:"bold"}},Jt.parse(":warning:")," Limitations"),r(W,{style:{marginTop:"10px",fontWeight:"500"}},"If you don't have mod permissions on the server, and that server is large (over 100 members), the plugin may be limited in the following ways:"),r(W,null,"\u2022 Offline members won't be listed"),r(W,null,"\u2022 Up to 100 members will be listed by default. To get more, scroll down in the member list to load more members."),r(W,null,"\u2022 However, friends will always be shown regardless of their status.")),commands:[{name:"inrole",description:"Know who is in a role",inputType:0,options:[{name:"role",description:"The role",type:8,required:!0}],execute:(e,t)=>{if(!t.guild)return Vt(t.channel.id,{content:"Make sure that you are in a server."});let o=e[0].value;UN(FZ(o,t.guild.id),o,t.channel.id)}}],contextMenus:{"dev-context"(e,{id:t}){let o=bc();if(!o)return;let n=Cn();if(!n)return;let i=tr.getRole(o.id,t);i&&e.push(r(M.MenuItem,{id:"vc-view-inrole",label:"View Members in Role",action:()=>{UN(FZ(i.id,o.id),i.id,n.id)},icon:cu}))},message(e,{message:t}){let o=bc();if(!o)return;let n=t.content.match(/<@&(\d+)>/g);if(!n?.length)return;let i=Cn();if(!i)return;let s=n.map(l=>l.match(/<@&(\d+)>/)[1]),a=tr.getRole(o.id,s);a&&e.push(r(M.MenuItem,{id:"vc-view-inrole",label:"View Members in Role",action:()=>{UN(FZ(a.id,o.id),a.id,i.id)},icon:cu}))}}})});async function nEe(){let e=On.getMediaEngine(),t=await tEe(e,["screen","window"],null)??[];if(ra.store.includeVideoDevices)try{let i=Object.values(oEe.getVideoDevices()||{}).map(s=>({id:s.id,name:s.name,type:"video_device"}));t.push(...i)}catch(n){new UZ.warn("Failed to get video devices:",n)}let o=t.find(n=>n.id===ra.store.streamMedia);return o||(UZ.error(`Stream Media "${ra.store.streamMedia}" not found. Resetting to default.`),ra.store.streamMedia=t[0],t[0])}function Hct({streamMediaSelection:e,streamMedia:t}){let o=e.map(n=>({label:n.name,value:n.id,default:e[0]}));return r(Ii,{placeholder:"Select a media source to stream ",maxVisibleItems:5,options:o,value:o.find(n=>n.value===t),onChange:n=>ra.store.streamMedia=n,closeOnSelect:!0})}function zct(){let{streamMedia:e,includeVideoDevices:t}=ra.use(["streamMedia","includeVideoDevices"]),o=On.getMediaEngine(),[n,i]=L([]),[s,a]=L(!0);return se(()=>{let l=!0;async function c(){a(!0);let u=await tEe(o,["screen","window"],null)??[];if(t)try{let m=Object.values(oEe.getVideoDevices()||{}).map(g=>({id:g.id,name:g.name,type:"video_device"}));u.push(...m)}catch(p){UZ.warn("Failed to get video devices:",p)}l&&(i(u),a(!1))}return c(),()=>{l=!1}},[t]),s?r(W,null,"Loading media sources..."):n.length?r(Hct,{streamMediaSelection:n,streamMedia:e}):r(W,null,"No Media found.")}function Gct(){return r("section",null,r(re,null,"Media source to stream"),r(W,{className:Z.bottom20},"Resets to main screen if not found"),r(zct,null))}var tEe,oEe,UZ,ra,rEe=x(()=>{"use strict";d();Q();ut();w0();wt();At();$();fe();B();tEe=vt("desktop sources"),oEe=He("getOutputVolume"),UZ=new ke("InstantScreenShare"),ra=R({streamMedia:{type:6,component:Gct},includeVideoDevices:{type:3,description:"Include video input devices (cameras, capture cards) in the source list",default:!1},autoMute:{type:3,description:"Automatically mute your microphone when joining a voice channel",default:!1},autoDeafen:{type:3,description:"Automatically deafen when joining a voice channel (also mutes you)",default:!1},instantScreenshare:{type:3,description:"Enables automatic screenshare feature",default:!0},keybindScreenshare:{type:3,description:"Screenshare by keybind in discord keybind settings",restartNeeded:!0,default:!1},focusDiscord:{type:3,description:"Only start screenshare with keybind when Discord is focused",default:!0},toolboxManagement:{type:3,description:"Enable/Disable Instant Screenshare",default:!0,hidden:!0}})});async function iEe(e=!0){if(!e&&!Pl.isFocused()&&ra.store.focusDiscord)return;let t=st.getVoiceChannelId();if(!t)return;let o=ne.getChannel(t);if(!o)return;let n=!o.isDM()&&!o.isGroupDM();if(o.type===13||n&&!Kt.can(Nt.STREAM,o))return;ra.store.autoDeafen&&!On.isSelfDeaf()&&e?Ir.toggleSelfDeaf():ra.store.autoMute&&!On.isSelfMute()&&e&&Ir.toggleSelfMute();let i=await nEe(),s=jct.getSetting(),{soundshareEnabled:a}=Wct.getState(),l=i.id;i.type==="video_device"&&(l=`camera:${i.id}`),qct(o.guild_id??null,t,{pid:null,sourceId:l,sourceName:i.name,audioSourceId:i.name,sound:a,previewDisabled:s})}var $Z,qct,jct,Wct,HN,sEe=x(()=>{"use strict";d();Ra();ut();wt();H();$();fe();B();rEe();qct=vt('type:"STREAM_START"'),jct=nr("voiceAndVideo","disableStreamPreviews"),Wct=Ft("ApplicationStreamingSettingsStore");HN=k({name:"InstantScreenshare",description:"Instantly screenshare when joining a voice channel with support for desktop sources, windows, and video input devices (cameras, capture cards)",authors:[w.HAHALOSAH,w.thororen,j.mart],dependencies:["EquicordToolbox"],tags:["ScreenshareKeybind"],autoStartStream:iEe,settings:ra,settingsAboutComponent:()=>r(f,null,r(so,null,"For Linux"),r(W,null,"For Wayland it only pops up the screenshare select",r("br",null),"For X11 it may or may not work :shrug:"),r("br",null),r(so,null,"Video Devices"),r(W,null,"Supports cameras and capture cards (like Elgato HD60X) when enabled in settings"),r("br",null),r(so,null,"Regarding Sound & Preview Settings"),r(W,null,"We use the settings set and used by discord to decide if stream preview and sound should be enabled or not")),patches:[{find:"DISCONNECT_FROM_VOICE_CHANNEL]",predicate:()=>ra.store.keybindScreenshare,replacement:{match:/\[\i\.\i\.DISCONNECT_FROM_VOICE_CHANNEL/,replace:'["INSTANT_SCREEN_SHARE"]:{onTrigger(){$self.autoStartStream(false)},keyEvents:{keyUp:!1,keyDown:!0}},$&'}},{find:"keybindActionTypes()",predicate:()=>ra.store.keybindScreenshare,replacement:{match:/=\[(\{id:.{0,25}value:\i\.\i\.UNASSIGNED)/,replace:'=[{id:"instant-screen-share",value:"INSTANT_SCREEN_SHARE",label:"Instant Screenshare"},$1'}}],flux:{async VOICE_STATE_UPDATES({voiceStates:e}){if(!ra.store.toolboxManagement||!ra.store.instantScreenshare)return;let t=z.getCurrentUser().id;for(let o of e){let{userId:n,channelId:i}=o;if(n===t){i&&!$Z&&($Z=!0,await iEe()),i||($Z=!1);break}}}},toolboxActions:{"Instant Screenshare"(){ra.store.toolboxManagement=!ra.store.toolboxManagement,Re(`Instant Screenshare ${ra.store.toolboxManagement?"Enabled":"Disabled"}`,D.Type.SUCCESS)}}})});var Kct,zN,aEe=x(()=>{"use strict";d();Q();H();$();Kct=R({inviteDuration:{type:4,description:"Invite Duration",options:[{label:"30 minutes",value:1800},{label:"1 hour",value:3600},{label:"6 hours",value:21600},{label:"12 hours",value:43200},{label:"1 day",value:86400},{label:"7 days",value:604800},{label:"Forever",value:0,default:!0}]},maxUses:{type:4,description:"Invite Use Count",options:[{label:"Infinite",value:0,default:!0},{label:"1",value:1},{label:"5",value:5},{label:"10",value:10},{label:"25",value:25},{label:"50",value:50},{label:"100",value:100}]},temporaryMembership:{type:3,default:!1,description:"Temporary Membership"}}),zN=k({name:"InviteDefaults",description:"Allows you to edit the default values when creating server invites.",authors:[j.VillainsRule],settings:Kct,patches:[{find:".GUILD_CREATE_INVITE_SUGGESTION,defaultMaxAge",replacement:[{match:/(?<=maxAge:)\i\?\?\i\?\?\i\.\i/,replace:"$self.settings.store.inviteDuration"},{match:/(?<=maxUses:)null!=\i&&0!==\i\?\i:\i.value/,replace:"$self.settings.store.maxUses"},{match:/(?<=temporary:)\i\?\?!1/,replace:"$self.settings.store.temporaryMembership"}]}]})});var lEe=x(()=>{});var GN,cEe=x(()=>{"use strict";d();dr();B();GN=class{withStart(){return this}onMessagePreSend(t,o,n){let i=new Set,s=Date.now(),{replyOptions:a}=n,l=(()=>{let c=ne.getChannel(t);return ct.getGuild(c.guild_id)||void 0})();if(a.messageReference){let{channel_id:c,message_id:u}=a.messageReference,p=Rt.getMessage(c,u);if(!p)return;let{author:m}=p;i.add({user:m,source:l,extra:{updatedAt:s}})}if(o.content){let{content:c}=o,p=[...c.matchAll(/<@!?(?<id>\d{17,23})>/g)].map(({groups:m})=>m.id).map(m=>z.getUser(m)).filter(Boolean);for(let m of p)i.add({user:m,source:l,extra:{updatedAt:s}})}this.processUsersToCollection([...i])}async processUsersToCollection(t){let o=this.usersCollection,n=new Set;for(let{user:i,source:s,extra:a}of t){if(i.bot)continue;let l=s?.id??"dm",u=(o[l]||={name:s?.name||"dm",id:s?.id||i.id,users:{},inviteLink:void 0}).users,p=u[i.id]?.extra??{},{id:m,username:g}=i;u[m]={id:m,username:g,tag:i.discriminator==="0"?i.username:i.tag,extra:{...p,...a},iconURL:i.getAvatarURL()},s&&!n.has(s.id)&&this.hasInvitePermissions(s.id)&&(this.collectInviteLink(s.id),n.add(s.id))}}async updateStorage(){await Oe.set("irememberyou.data",this.usersCollection)}async initializeUsersCollection(){let t=await Oe.get("irememberyou.data");this.usersCollection=t??{}}writeMembersFromUserGuildsToCollection(){let t=new Set,o=Date.now(),n=1e3,i=z.getCurrentUser().id;if(i)for(let s of Object.values(ct.getGuilds())){let{ownerId:a}=s;if(a!==i)continue;let l=Lt.getMembers(s.id);l.length>n&&(l.length=n);for(let c of l){let u=z.getUser(c.userId);t.add({user:u,source:s,extra:{updatedAt:o}})}this.processUsersToCollection([...t]),s&&this.hasInvitePermissions(s.id)&&this.collectInviteLink(s.id)}}writeGuildsOwnersToCollection(){let t=new Set,o=Date.now();for(let n of Object.values(ct.getGuilds())){let{ownerId:i}=n,s=z.getUser(i);s&&t.add({user:s,source:n,extra:{isOwner:!0,updatedAt:o}})}this.processUsersToCollection([...t])}hasInvitePermissions(t){let o=ct.getGuild(t);if(!o)return!1;let n=z.getCurrentUser();return n?o.ownerId===n.id?!0:Lt.getMember(t,n.id)?Kt.can(Nt.CREATE_INSTANT_INVITE,o):!1:!1}async collectInviteLink(t){try{let o=await gw.getInvites(t);if(o&&o.length>0){let s=`https://discord.gg/${o[0].code}`;this.usersCollection[t]&&(this.usersCollection[t].inviteLink=s)}}catch(o){console.warn("Failed to collect invite link for guild:",t,o)}}storageAutoSaveProtocol(){this._storageAutoSaveProtocol_interval=setInterval(this.updateStorage.bind(this),6e4*3)}}});function Yct(e){let{updatedAt:t}=e.extra||{},o=t?new Intl.DateTimeFormat().format(t):null;return`${e.username??e.tag}, updated at ${o}`}function Qct({usersCollection:e}){return Object.keys(e).length===0?r(Y,null,"It's empty right now"):r(f,null,Object.entries(e).map(([t,{users:o,name:n}])=>({name:n,users:Object.values(o)})).sort((t,o)=>o.users.length-t.users.length).map(({name:t,users:o})=>r("aside",{key:t},r("div",{className:Wu("header-container")},r(Jo,{className:Wu("header-name")},t),r("div",{className:Wu("header-btns")},o.map(n=>r(uEe,{key:n.id,user:n})))))))}function uEe({user:e,allowOwner:t=!0}){return r("div",{key:e.id,className:Wu("user-row")},r("div",{className:Wu("user")},r(en,{onClick:()=>or(e.id)},r("span",{className:Wu("user-avatar")},r(Bl,{src:e.iconURL,size:"SIZE_24"}))),r("div",{className:Wu("user-tooltip")},r(Ue,{text:Yct(e)},o=>r(W,{...o,className:Wu("user-username")},e.tag," ",t&&e.extra?.isOwner&&"(owner)")),r("span",{className:Wu("user-id"),onContextMenu:o=>{o.preventDefault(),z.getUser(e.id)&&Dt.openContextMenu(o,()=>r(M.Menu,{navId:"user-context-menu",onClose:Dt.closeContextMenu,"aria-label":"User Options"},r(M.MenuItem,{id:"copy-user-id",label:"Copy User ID",action:()=>$t(e.id,"User ID copied to clipboard")}),r(M.MenuItem,{id:"view-profile",label:"View Profile",action:()=>or(e.id)})))}},r(en,{onClick:()=>$t(e.id,"User ID copied to clipboard")},r(W,null,e.id))))))}function Zct({usersCollection:e}){let[t,o]=X.useState(""),n=Object.values(e).flatMap(i=>Object.values(i.users));return r("section",{className:Wu("search")},r(qe,{placeholder:"Filter by tag, username",name:"Filter",onChange:o}),t&&r("div",{className:Wu("search-user")},n.filter(i=>i.tag.includes(t)||i.username.includes(t)).map(i=>r(uEe,{key:i.id,user:i,allowOwner:!1}))))}function Xct({usersCollection:e}){return r(bi,null,r(cn,null,r(W,null,"Provides a list of users you have mentioned or replied to, or those who own the servers you belong to (owner*), or are members of your guild"),r(Zct,{usersCollection:e})),r("div",{className:Wu("rows")},r(Qct,{usersCollection:e})))}var Wu,HZ,dEe=x(()=>{"use strict";d();Et();fs();ut();wt();fa();nt();mt();B();Wu=de("vc-i-remember-you-");HZ=Bi(Xct,"IRememberYouTab")});var qN,pEe=x(()=>{"use strict";d();lEe();vu();ao();Xm();H();$();cEe();dEe();qN=k({name:"IRememberYou",description:"Locally saves everyone you've been communicating with (including servers), in case of lose",authors:[j.zoodogood,j.keyages],dependencies:["MessageEventsAPI"],patches:[],async start(){let{customEntries:e,customSections:t}=vi;e.push({key:"equicord_i_remember_you",title:"I Remember You",Component:()=>r(HZ,{usersCollection:o.usersCollection}),Icon:tO}),t.push(()=>({section:"EquicordIRememberYou",label:"IRememberYou",element:()=>r(HZ,{plugin:this,usersCollection:o.usersCollection}),id:"EquicordIRememberYou"})),hs.push(["EquicordIRememberYou","equicord_i_remember_you"]);let o=this.dataManager=await new GN().withStart();await o.initializeUsersCollection(),o.writeGuildsOwnersToCollection(),o.writeMembersFromUserGuildsToCollection(),o._onMessagePreSend_preSend=qi(o.onMessagePreSend.bind(o)),o.storageAutoSaveProtocol()},stop(){let e=this.dataManager,{customEntries:t,customSections:o}=vi,n=t.findIndex(a=>a.key==="equicord_i_remember_you");n!==-1&&t.splice(n,1);let i=o.findIndex(a=>a({}).id==="EquicordIRememberYou");i!==-1&&o.splice(i,1);let s=hs.findIndex(a=>a[1]==="equicord_i_remember_you");s!==-1&&hs.splice(s,1),ji(e._onMessagePreSend_preSend),clearInterval(e._storageAutoSaveProtocol_interval)}})});async function Jct(e){return(await zi.fetchAssetIds(fEe,[e]))[0]}function Vct(e){V.dispatch({type:"LOCAL_ACTIVITY_UPDATE",activity:e,socketId:"Jellyfin"})}var ti,fEe,mEe,zZ,jN,gEe=x(()=>{"use strict";d();Q();ut();wt();H();At();$();B();ti=R({serverUrl:{description:"Jellyfin server URL (e.g., https://jellyfin.example.com)",type:0},apiKey:{description:"Jellyfin API key obtained from your Jellyfin administration dashboard",type:0},userId:{description:"Jellyfin user ID obtained from your user profile URL",type:0},nameDisplay:{description:"Choose how the application name should appear in Rich Presence",type:4,options:[{label:"Series/Movie Name",value:"default",default:!0},{label:"Series - Episode/Track/Movie Name",value:"full"},{label:"Custom",value:"custom"}]},customName:{description:`Custom Rich Presence name (only used if 'Custom' is selected).
Options: {name}, {series}, {season}, {episode}, {artist}, {album}, {year}`,type:0},coverType:{description:"Choose which cover to display when watching a TV show",type:4,options:[{label:"Series Cover",value:"series",default:!0},{label:"Episode Cover",value:"episode"}]},episodeFormat:{description:"Episode number format",type:4,options:[{label:"S01E01",value:"long",default:!0},{label:"1x01",value:"short"},{label:"Season 1 Episode 1",value:"fulltext"}]},showEpisodeName:{description:"Show episode name after season/episode info",type:3,default:!1},overrideRichPresenceType:{description:"Override the rich presence type",type:4,options:[{label:"Off",value:!1,default:!0},{label:"Listening",value:2},{label:"Playing",value:0},{label:"Streaming",value:1},{label:"Watching",value:3}]},showPausedState:{description:"Show Rich Presence when media is paused",type:3,default:!0},privacyMode:{description:"Privacy Mode (Hide media details like Episode/Song Name)",type:3,default:!1}}),fEe="1381368130164625469",mEe=new ke("JellyfinRichPresence");jN=k({name:"JellyfinRichPresence",description:"Rich presence for Jellyfin media server",authors:[j.vmohammad,w.SerStars,j.ZcraftElite],settingsAboutComponent:()=>r(f,null,r(so,null,"How to get an API key"),r(W,null,"Auth token can be found by following these steps:",r("ol",{style:{marginTop:8,marginBottom:8,paddingLeft:20}},r("li",null,"1. Log into your Jellyfin instance"),r("li",null,"2. Open your browser's Developer Tools (usually F12 or right-click then Inspect)"),r("li",null,"3. Go to the ",r("b",null,"Network")," tab in Developer Tools"),r("li",null,"4. Look for requests to your Jellyfin server"),r("li",null,"5. In the request headers, find ",r("code",null,"X-MediaBrowser-Token")," or ",r("code",null,"Authorization"),r("br",null),r("i",null,"Easiest way: press ",r("b",null,"Ctrl+F")," in the Developer Tools and search for ",r("code",null,"X-MediaBrowser-Token")))),r("br",null),"You'll also need your User ID, which can be found in the url of your user profile page.")),settings:ti,start(){this.updatePresence(),zZ=setInterval(()=>{this.updatePresence()},1e4)},stop(){clearInterval(zZ),zZ=void 0},async fetchMediaData(){if(!ti.store.serverUrl||!ti.store.apiKey||!ti.store.userId)return mEe.warn("Jellyfin server URL, API key, or user ID is not set in settings."),Re("JellyfinRPC is not configured.","failure",{duration:15e3}),null;try{let e=ti.store.serverUrl.replace(/\/$/,""),t=`${e}/Sessions?api_key=${ti.store.apiKey}`,o=await fetch(t);if(!o.ok)throw`${o.status} ${o.statusText}`;let i=(await o.json()).find(c=>c.UserId===ti.store.userId&&c.NowPlayingItem);if(!i||!i.NowPlayingItem)return null;let s=i.NowPlayingItem,a=i.PlayState;if(a?.IsPaused&&!ti.store.showPausedState)return null;let l=s.ImageTags?.Primary?`${e}/Items/${s.Type==="Episode"&&s.SeriesId&&ti.store.coverType==="series"?s.SeriesId:s.Id}/Images/Primary`:void 0;return{name:s.Name||"Unknown",type:s.Type,artist:s.Artists?.[0]||s.AlbumArtist,album:s.Album,seriesName:s.SeriesName,seasonNumber:s.ParentIndexNumber,episodeNumber:s.IndexNumber,year:s.ProductionYear,url:`${e}/web/#!/details?id=${s.Id}`,imageUrl:l,duration:s.RunTimeTicks?Math.floor(s.RunTimeTicks/1e7):void 0,position:a?.PositionTicks?Math.floor(a.PositionTicks/1e7):void 0,isPaused:!!a?.IsPaused}}catch(e){return mEe.error("Failed to query Jellyfin API",e),null}},async updatePresence(){Vct(await this.getActivity())},async getActivity(){let e,t,o=ti.store.nameDisplay||"default",n=await this.fetchMediaData();if(!n)return null;if(ti.store.overrideRichPresenceType)e=ti.store.overrideRichPresenceType;else switch(n.type){case"Audio":e=2;break;default:e=3;break}let i=p=>p.replace(/\{name\}/g,n.name||"").replace(/\{series\}/g,n.seriesName||"").replace(/\{season\}/g,n.seasonNumber?.toString()||"").replace(/\{episode\}/g,n.episodeNumber?.toString()||"").replace(/\{artist\}/g,n.artist||"").replace(/\{album\}/g,n.album||"").replace(/\{year\}/g,n.year?.toString()||"");switch(o){case"full":n.type==="Episode"&&n.seriesName?t=ti.store.privacyMode?`${n.seriesName} - [Episode Hidden]`:`${n.seriesName} - ${n.name}`:n.type==="Audio"?t=ti.store.privacyMode?"[Track Hidden]":`${n.artist||"Unknown Artist"} - ${n.name}`:t=ti.store.privacyMode?"[Movie Hidden]":n.name||"Jellyfin";break;case"custom":t=i(ti.store.customName||"{name} on Jellyfin"),ti.store.privacyMode&&(t=t.replace(n.name||"","[Title Hidden]").replace(n.seriesName||"","[Series Hidden]").replace(n.artist||"","[Artist Hidden]").replace(n.album||"","[Album Hidden]"));break;case"default":default:n.type==="Episode"&&n.seriesName?t=n.seriesName:t=ti.store.privacyMode?"[Media Hidden]":n.name||"Jellyfin";break}let s={large_image:n.imageUrl?await Jct(n.imageUrl):void 0,large_text:n.seriesName||n.album||void 0};ti.store.privacyMode&&(s.large_image=void 0);let a=[],l=()=>n.type==="Episode"&&n.seriesName?ti.store.privacyMode?"Watching a TV Show":n.seriesName:ti.store.privacyMode?"Watching Something":n.name,c=()=>{if(n.isPaused)return"Paused";if(n.type==="Episode"&&n.seriesName){let p="",m=n.seasonNumber,g=n.episodeNumber,y=ti.store.episodeFormat||"long";if(m!=null&&g!=null)switch(y){case"long":p=`S${m.toString().padStart(2,"0")}E${g.toString().padStart(2,"0")}`;break;case"short":p=`${m}x${g.toString().padStart(2,"0")}`;break;case"fulltext":p=`Season ${m} Episode ${g}`;break}else m!=null?p=y==="fulltext"?`Season ${m}`:`S${m.toString().padStart(2,"0")}`:g!=null&&(p=y==="fulltext"?`Episode ${g}`:`E${g.toString().padStart(2,"0")}`);return ti.store.showEpisodeName&&n.name&&!ti.store.privacyMode?`${p} - ${n.name}`:p}return ti.store.privacyMode?n.type==="Audio"?"Listening to music":n.year?"(????)":void 0:n.artist||(n.year?`(${n.year})`:void 0)},u=!n.isPaused&&n.position!=null&&n.duration!=null?{start:Date.now()-n.position*1e3,end:Date.now()+(n.duration-n.position)*1e3}:void 0;return{application_id:fEe,name:t,details:l(),state:c()||"something",assets:s,timestamps:u,buttons:a.length?a.map(p=>p.label):void 0,metadata:{button_urls:a.map(p=>p.url)},type:e,flags:1}}})});var hEe=x(()=>{});function eut(){if(!uk){let e=document.createElement("div");e.id="jumpscare-root",e.classList.add("jumpscare-root"),document.body.append(e),uk=Ms(e)}return uk}var uk,WN,KN,xEe=x(()=>{"use strict";d();hEe();Ol();Q();H();$();B();WN=R({imageSource:{type:0,description:"Sets the image url of the jumpscare",default:"https://github.com/Equicord/Equibored/blob/main/icons/jumpscare/troll.gif?raw=true"},audioSource:{type:0,description:"Sets the audio url of the jumpscare",default:"https://github.com/Equicord/Equibored/raw/main/sounds/jumpscare/trollolol.mp3?raw=true"},chance:{type:1,description:"The chance of a jumpscare happening (1 in X so: 100 = 1/100 or 1%, 50 = 1/50 or 2%, etc.)",default:1e3}});KN=k({name:"Jumpscare",description:"Adds a configurable chance of jumpscaring you whenever you open a channel. Inspired by Geometry Dash Mega Hack",authors:[w.surgedevs],dependencies:["AudioPlayerAPI"],settings:WN,start(){eut().render(r(this.JumpscareComponent,null))},stop(){uk?.unmount(),uk=void 0},JumpscareComponent(){let[e,t]=L(!1),o=fd(WN.store.audioSource,{volume:100,onEnded:()=>{t(!1)}}),n=gn(i=>{if(e)return;let s=1/WN.store.chance;Math.random()>s||(t(!0),o.play())},[e]);return se(()=>(V.subscribe("CHANNEL_SELECT",n),()=>{V.unsubscribe("CHANNEL_SELECT",n)}),[n]),r("img",{className:`jumpscare-img ${e?"jumpscare-animate":""}`,src:WN.store.imageSource})}})});function bEe(e,t){let o=`/channels/${t??"@me"}/${e}/0`;ho.transitionTo(o)}async function vEe(e,t){let n=(await Ht.get({url:jo.Endpoints.MESSAGES(e),query:{limit:1}})).body?.[0]?.id;if(!n)return;let i=`/channels/${t??"@me"}/${e}/${n}`;ho.transitionTo(i)}async function yEe(e,t,o,n){try{let s=(await Ht.get({url:jo.Endpoints.SEARCH_GUILD(t),query:{author_id:o,channel_id:e,sort_by:"timestamp",sort_order:n?"asc":"desc"}})).body?.messages?.[0]?.[0]?.id;if(!s){D.show({type:D.Type.FAILURE,message:"No messages found from this user in this channel.",id:D.genId()});return}let a=`/channels/${t}/${e}/${s}`;ho.transitionTo(a)}catch{D.show({type:D.Type.FAILURE,message:"Failed to search for messages.",id:D.genId()})}}var GZ,tut,out,YN,SEe=x(()=>{"use strict";d();H();$();B();GZ=(e,{channel:t})=>{t&&e.push(r(M.MenuItem,{id:"vc-jump-to-first",label:"Jump To First Message",action:()=>bEe(t.id,t.guild_id)}),r(M.MenuItem,{id:"vc-jump-to-last",label:"Jump To Last Message",action:()=>vEe(t.id,t.guild_id)}))},tut=(e,{user:t,channel:o})=>{t&&(!o||o.guild_id||e.push(r(M.MenuItem,{id:"vc-jump-to-first",label:"Jump To First Message",action:()=>bEe(o.id,null)}),r(M.MenuItem,{id:"vc-jump-to-last",label:"Jump To Last Message",action:()=>vEe(o.id,null)})))},out=(e,{message:t})=>{if(!t)return;let o=st.getChannelId(),n=hn.getGuildId();!o||!n||e.push(r(M.MenuItem,{id:"vc-jump-to-first-user",label:"Jump To First Message",action:()=>yEe(o,n,t.author.id,!0)}),r(M.MenuItem,{id:"vc-jump-to-last-user",label:"Jump To Last Message",action:()=>yEe(o,n,t.author.id,!1)}))},YN=k({name:"JumpTo",description:"Adds context menu options to jump to the start or bottom of a channel/DM.",authors:[w.Samwich,w.thororen],contextMenus:{"channel-context":GZ,"gdm-context":GZ,"thread-context":GZ,"user-context":tut,message:out}})});var QN=x(()=>{});function nut({modalProps:e,onSelect:t,choices:o}){let n=de("vc-command-palette-"),[i,s]=L(""),[a,l]=L(null),[c,u]=L(0),p=qg.store.allowMouseControl,g=o.slice().sort((C,I)=>C.label.localeCompare(I.label)).filter(C=>C.label.toLowerCase().includes(i.toLowerCase())),y=g.slice(c,c+20),b=g.length,v=(C,I)=>{let N=g.find(_=>_.id===C);N&&t(N),li()},E=C=>{let I=a!==null?a:-1,N;switch(C.key){case"ArrowUp":C.preventDefault(),N=I>0?I-1:y.length-1,l(N),I===0&&b>20&&(u(_=>Math.max(_-1,0)),l(0));break;case"ArrowDown":C.preventDefault(),N=I<y.length-1?I+1:0,l(N),I===y.length-1&&b>20&&(u(_=>Math.min(_+1,g.length-20)),l(19));break;case"Enter":I!==null&&I>=0&&I<y.length&&v(y[I].id,I);break;default:break}},A=C=>{p&&g.length>20&&(C.deltaY>0?u(I=>Math.min(I+2,g.length-20)):u(I=>Math.max(I-2,0)))};return se(()=>{l(0),u(0)},[i]),r(Pe,{className:n("root"),...e,size:"medium",onKeyDown:E,onWheel:A},r("div",null,r(qe,{value:i,onChange:C=>s(C),style:{width:"100%",borderBottomLeftRadius:"0",borderBottomRightRadius:"0",paddingLeft:"0.9rem"},placeholder:"Search the Command Palette"}),r("div",{className:n("option-container")},y.map((C,I)=>r("button",{key:C.id,className:n("option",{"key-hover":I===a}),onClick:()=>{p&&v(C.id,I)},onMouseMove:()=>{p&&l(I)},style:p?{cursor:"pointer"}:{cursor:"default"}},C.label,C.registrar&&r("span",{className:n("registrar")},C.registrar))))))}function ZN(e){return new Promise(t=>{Ee(o=>r(nut,{modalProps:o,onSelect:n=>{li(),t(n)},choices:e}))})}var wEe=x(()=>{"use strict";d();QN();nt();at();B();XN()});function rut({modalProps:e,onSelect:t,placeholder:o,info:n}){let[i,s]=L(""),a=l=>{switch(l.key){case"Enter":t(i),li();break;default:break}};return se(()=>{s("")},[]),r(Pe,{className:"vc-command-palette-simple-text",...e,size:"dynamic",onKeyDown:a},r(qe,{value:i,onChange:l=>s(l),style:{width:"30vw",borderRadius:"5px"},placeholder:o??"Type and press Enter"}),n&&r("div",{className:"vc-command-palette-textinfo"},n))}function qZ(e,t){return new Promise(o=>{Ee(n=>r(rut,{modalProps:n,onSelect:i=>o(i),placeholder:e,info:t}))})}var kEe=x(()=>{"use strict";d();QN();at();B()});function iut(e,t){Ge.plugins[e.id].enabled=t,D.show({message:`Successfully ${t?"enabled":"disabled"} ${e.id}`,type:D.Type.SUCCESS,id:D.genId(),options:{position:D.Position.BOTTOM}})}var EEe,jZ=x(()=>{"use strict";d();_a();Q();Zh();cs();yd();wu();B();l$();Ps();wEe();kEe();EEe=[{id:"openEquicordSettings",label:"Open Equicord tab",callback:async()=>await xi("equicord_main"),registrar:"Equicord"},{id:"openPluginSettings",label:"Open Plugin tab",callback:()=>xi("equicord_plugins"),registrar:"Equicord"},{id:"openThemesSettings",label:"Open Themes tab",callback:()=>xi("equicord_themes"),registrar:"Equicord"},{id:"openUpdaterSettings",label:"Open Updater tab",callback:()=>xi("equicord_updater"),registrar:"Equicord"},{id:"openEquicordCloudSettings",label:"Open Cloud tab",callback:()=>xi("equicord_cloud"),registrar:"Equicord"},{id:"openBackupSettings",label:"Open Backup & Restore tab",callback:()=>xi("equicord_backup_restore"),registrar:"Equicord"},{id:"restartClient",label:"Restart Client",callback:()=>xd(),registrar:"Equicord"},{id:"openQuickCSSFile",label:"Open Quick CSS File",callback:()=>VencordNative.quickCss.openEditor(),registrar:"Equicord"},{id:"openSettingsFolder",label:"Open Settings Folder",callback:async()=>Sne(await VencordNative.settings.getSettingsDir()),registrar:"Equicord"},{id:"openInGithub",label:"Open in Github",callback:async()=>VencordNative.native.openExternal(await U1()),registrar:"Equicord"},{id:"openInBrowser",label:"Open in Browser",callback:async()=>{let t=(await qZ("Enter a URL")).replace(/(https?:\/\/)?([a-zA-Z0-9-]+)\.([a-zA-Z0-9-]+)/,"https://$2.$3");try{new URL(t),VencordNative.native.openExternal(t)}catch{D.show({message:"Invalid URL",type:D.Type.FAILURE,id:D.genId(),options:{position:D.Position.BOTTOM}})}},registrar:"Equicord"},{id:"togglePlugin",label:"Toggle Plugin",callback:async()=>{let e=Object.keys(pt),t=[];for(let i of e)t.push({id:i,label:i});let o=await ZN(t),n=await ZN([{id:"enable",label:"Enable"},{id:"disable",label:"Disable"}]);if(o&&n)return iut(o,n.id==="enable")},registrar:"Equicord"},{id:"quickFetch",label:"Quick Fetch",callback:async()=>{try{let t=(await qZ("Enter URL to fetch (GET only)")).replace(/(https?:\/\/)?([a-zA-Z0-9-]+)\.([a-zA-Z0-9-]+)/,"https://$2.$3"),n=await(await fetch(t)).text();Oo(n),D.show({message:"Copied response to clipboard!",type:D.Type.SUCCESS,id:D.genId(),options:{position:D.Position.BOTTOM}})}catch{D.show({message:"Issue fetching URL",type:D.Type.FAILURE,id:D.genId(),options:{position:D.Position.BOTTOM}})}},registrar:"Equicord"},{id:"copyGitInfo",label:"Copy Git Info",callback:async()=>{Oo(`gitHash: ${P0}
gitRemote: ${Sd}`),D.show({message:"Copied git info to clipboard!",type:D.Type.SUCCESS,id:D.genId(),options:{position:D.Position.BOTTOM}})},registrar:"Equicord"},{id:"checkForUpdates",label:"Check for Updates",callback:async()=>{await vd()?setTimeout(()=>qt({title:"A Equicord update is available!",body:"Click here to view the update",permanent:!0,noPersist:!0,onClick(){xi("equicord_updater")}}),1e4):D.show({message:"No updates available",type:D.Type.MESSAGE,id:D.genId(),options:{position:D.Position.BOTTOM}})},registrar:"Equicord"},{id:"navToServer",label:"Navigate to Server",callback:async()=>{let e=Object.values(ct.getGuilds()),t=[];for(let n of e)t.push({id:n.id,label:n.name});let o=await ZN(t);o&&ho.transitionToGuild(o.id)},registrar:"Equicord"}]});function aut({modalProps:e}){let t=de("vc-command-palette-"),[o,n]=L(null),[i,s]=L(0),a=qg.store.allowMouseControl,l=EEe.slice().sort((E,A)=>E.label.localeCompare(A.label)),[c,u]=L(""),p=l.filter(E=>E.label.toLowerCase().includes(c.toLowerCase())),m=p.slice(i,i+20),g=p.length,y=E=>{a&&p.length>20&&(E.deltaY>0?s(A=>Math.min(A+2,p.length-20)):s(A=>Math.max(A-2,0)))},b=(E,A)=>{let C=p.find(I=>I.id===E);C&&sut.log(`${C.id}'s action was triggered.`),li(),C?.callback?.(),n(A)},v=E=>{let A=o!==null?o:-1,C;switch(E.key){case"ArrowUp":E.preventDefault(),C=A>0?A-1:m.length-1,n(C),A===0&&g>20&&(s(I=>Math.max(I-1,0)),n(0));break;case"ArrowDown":E.preventDefault(),C=A<m.length-1?A+1:0,n(C),A===m.length-1&&g>20&&(s(I=>Math.min(I+1,p.length-20)),n(19));break;case"Enter":A!==null&&A>=0&&A<m.length&&b(m[A].id,A);break;default:break}};return se(()=>{n(0),s(0)},[c]),r(Pe,{className:t("root"),...e,size:"medium",onKeyDown:v,onWheel:y},r("div",null,r(qe,{value:c,onChange:E=>u(E),style:{width:"100%",borderBottomLeftRadius:"0",borderBottomRightRadius:"0",paddingLeft:"0.9rem"},placeholder:"Search the Command Palette"}),r("div",{className:t("option-container")},m.map((E,A)=>r("button",{key:E.id,className:t("option",{"key-hover":A===o}),onClick:()=>{a&&b(E.id,A)},onMouseMove:()=>{a&&n(A)},style:a?{cursor:"pointer"}:{cursor:"default"}},E.label,E.registrar&&r("span",{className:t("registrar")},E.registrar))))))}var sut,AEe,CEe=x(()=>{"use strict";d();QN();jZ();nt();At();at();B();XN();sut=new ke("CommandPalette","#e5c890");AEe=()=>Ee(e=>r(aut,{modalProps:e}))});var Ny,WZ,qg,JN,XN=x(()=>{"use strict";d();Q();H();nt();at();$();B();jZ();CEe();Ny=de("vc-command-palette-"),WZ=!1,qg=R({hotkey:{description:"The hotkey to open the command palette.",type:6,default:["Control","Shift","P"],component:()=>{let[e,t]=L(!1),o=n=>{let i=new Set,s=[];n(!0),WZ=!0;let a=()=>{if(i.size===0||!document.querySelector(`.${Ny("key-recorder-button")}`)){let u=s.reduce((p,m)=>p.length>m.length?p:m);u.length>0&&(qg.store.hotkey=u.map(p=>p.toLowerCase())),n(!1),WZ=!1,document.removeEventListener("keydown",l),document.removeEventListener("keyup",c)}s.push(Array.from(i))},l=u=>{let{key:p}=u;i.has(p)||i.add(p),a()},c=u=>{i.delete(u.key),a()};document.addEventListener("keydown",l),document.addEventListener("keyup",c)};return r(f,null,r("div",{className:Ny("key-recorder-container"),onClick:()=>o(t)},r("div",{className:`${Ny("key-recorder")} ${e?Ny("recording"):""}`},qg.store.hotkey.map(n=>n.charAt(0).toUpperCase()+n.slice(1)).join(" + "),r("button",{className:`${Ny("key-recorder-button")} ${e?Ny("recording-button"):""}`,disabled:e},e?"Recording...":"Record keybind"))))}},allowMouseControl:{description:"Allow the mouse to control the command palette.",type:3,default:!0}}),JN=k({name:"KeyboardNavigation",description:"Allows you to navigate the UI with a keyboard.",authors:[w.Ethan],settings:qg,start(){document.addEventListener("keydown",this.event)},stop(){document.removeEventListener("keydown",this.event)},event(e){let t;(c=>(c.control="ctrlKey",c.shift="shiftKey",c.alt="altKey",c.meta="metaKey"))(t||={});let{hotkey:o}=qg.store,n=e.key.toLowerCase();if(!WZ){for(let i=0;i<o.length;i++){let s=o[i].toLowerCase();if(s in t&&!e[t[s]]||!(s in t)&&n!==s)return}li(),!document.querySelector(`.${Ny("root")}`)&&AEe()}}})});var TEe,IEe,DEe=x(()=>{"use strict";d();TEe={operagx:{others:["https://github.com/Equicord/Equibored/raw/main/sounds/keyboardSounds/operagx/click1.wav","https://github.com/Equicord/Equibored/raw/main/sounds/keyboardSounds/operagx/click2.wav","https://github.com/Equicord/Equibored/raw/main/sounds/keyboardSounds/operagx/click3.wav"],backspaces:["https://github.com/Equicord/Equibored/raw/main/sounds/keyboardSounds/operagx/backspace.wav"]},osu:{others:["https://github.com/Equicord/Equibored/raw/main/sounds/keyboardSounds/osu/key-press-1.mp3","https://github.com/Equicord/Equibored/raw/main/sounds/keyboardSounds/osu/key-press-2.mp3","https://github.com/Equicord/Equibored/raw/main/sounds/keyboardSounds/osu/key-press-3.mp3","https://github.com/Equicord/Equibored/raw/main/sounds/keyboardSounds/osu/key-press-4.mp3"],backspaces:["https://github.com/Equicord/Equibored/raw/main/sounds/keyboardSounds/osu/key-delete.mp3"],caps:["https://github.com/Equicord/Equibored/raw/main/sounds/keyboardSounds/osu/key-caps.mp3"],enters:["https://github.com/Equicord/Equibored/raw/main/sounds/keyboardSounds/osu/key-confirm.mp3"],arrows:["https://github.com/Equicord/Equibored/raw/main/sounds/keyboardSounds/osu/key-movement.mp3"],allowedIgnored:["CapsLock","ArrowUp","ArrowRight","ArrowLeft","ArrowDown"]}},IEe=["CapsLock","ShiftLeft","ShiftRight","ControlLeft","ControlRight","AltLeft","AltRight","MetaLeft","MetaRight","ArrowUp","ArrowRight","ArrowLeft","ArrowDown","MediaPlayPause","MediaStop","MediaTrackNext","MediaTrackPrevious","MediaSelect","MediaEject","MediaVolumeUp","MediaVolumeDown","AudioVolumeUp","AudioVolumeDown"]});function BEe(){Array.from(Object.values(Al)).forEach(e=>{e.forEach(t=>t.player.delete())}),Object.keys(Al).forEach(e=>{Al[e]=[]})}function YZ(e,t){if(BEe(),Qd=TEe[t],!Qd)return;function o(n){if(!Qd[n])return;let i=-1;for(let s=0;s<3;s++)for(let a of Qd[n])i++,Al[n].push({playing:!1,player:fd(a,{volume:e,preload:!0,persistent:!0,onEnded:()=>{Al[n][i].playing=!1}})})}Qd.backspaces&&o("backspaces"),Qd.caps&&o("caps"),Qd.enters&&o("enters"),Qd.arrows&&o("arrows"),Qd.others&&o("others")}var Al,Qd,KZ,MEe,NEe,dk,VN,PEe=x(()=>{"use strict";d();Ol();Q();H();$();DEe();Al={backspaces:[],caps:[],enters:[],arrows:[],others:[]},KZ=new Set,MEe=e=>{KZ.delete(e.code)},NEe=e=>{if(!Qd||IEe.includes(e.code)&&!Qd.allowedIgnored?.includes(e.key)||KZ.has(e.code))return;KZ.add(e.code);function t(o){let n=o.filter(a=>!a?.playing),i,s;n.length?(i=Math.floor(Math.random()*n.length),s=n[i]):(i=Math.floor(Math.random()*o.length),s=o[i]),s&&(s.playing=!0,s.player.restart())}e.code==="Backspace"&&Al.backspaces.length?t(Al.backspaces):e.code==="CapsLock"&&Al.caps.length?t(Al.caps):e.code==="Enter"&&Al.enters.length?t(Al.enters):["ArrowUp","ArrowRight","ArrowLeft","ArrowDown"].includes(e.code)&&Al.arrows.length?t(Al.arrows):Al.others.length&&t(Al.others)};dk=R({volume:{description:"Volume of the keyboard sounds.",type:5,markers:[0,25,50,75,100],stickToMarkers:!1,default:100,onChange:e=>{YZ(e,dk.store.soundPack)}},soundPack:{description:"Sound pack to use.",type:4,options:[{label:"OperaGX",value:"operagx",default:!0},{label:"osu!",value:"osu"}],onChange:e=>{YZ(dk.store.volume,e)}}}),VN=k({name:"KeyboardSounds",description:"Adds OperaGX or osu! sound effects when typing on your keyboard.",authors:[w.HypedDomi,j.Etorix],dependencies:["AudioPlayerAPI"],settings:dk,start(){YZ(dk.store.volume,dk.store.soundPack),document.addEventListener("keyup",MEe),document.addEventListener("keydown",NEe)},stop:()=>{BEe(),document.removeEventListener("keyup",MEe),document.removeEventListener("keydown",NEe)}})});var _Ee=x(()=>{});async function dut(e){ia.push({regex:"",listIds:[],listType:"BlackList",ignoreCase:!1}),await Oe.set(jg,ia),e()}async function put(e,t){ia.splice(e,1),await Oe.set(jg,ia),t()}function pk(e,t,o){try{return e.match(new RegExp(t,o))}catch{return!1}}function mut(e,t){let o;try{o=t.map(s=>new RegExp(s.regex,"g"+(s.ignoreCase?"i":"")))}catch{return[e]}let n=o.map(s=>e.match(s)).flat().filter(s=>s!==null);if(n.length===0)return[e];let i=e.indexOf(n[0]);return r(f,null,r("span",null,e.substring(0,i)),r("span",{className:"highlight"},n[0]),r("span",null,e.substring(i+n[0].length)))}function fut({title:e,children:t}){let[o,n]=L(!1);return r("div",null,r(Ia,{onClick:()=>n(!o),className:eB("collapsible")},r("div",{style:{display:"flex",alignItems:"center"}},r("div",{style:{marginLeft:"auto",color:"var(--text-muted)",paddingRight:"5px"}},o?"\u25BC":"\u25B6"),r(re,{tag:"h4"},e))),o&&t)}function gut({listIds:e,setListIds:t}){let o=Vo(),[n]=L(e);async function i(a,l){n[l]=a.trim(),t(n),o()}let s=n.map((a,l)=>r(Be,{key:l,flexDirection:"row",style:{marginBottom:"5px"}},r("div",{style:{flexGrow:1}},r(qe,{placeholder:"ID",spellCheck:!1,value:a,onChange:c=>i(c,l)})),r(Me,{onClick:()=>{n.splice(l,1),t(n),o()},variant:"none",size:"iconOnly",className:eB("delete")},r($i,null))));return r(f,null,s)}function hut({listType:e,setListType:t}){return r(to,{options:[{label:"Whitelist",value:"Whitelist"},{label:"Blacklist",value:"BlackList"}],placeholder:"Select a list type",isSelected:o=>o===e,closeOnSelect:!0,select:t,serialize:o=>o})}function xut(){let e=Vo(),[t]=L(ia);async function o(l,c){ia[l].regex=c,await Oe.set(jg,ia),e()}async function n(l,c){ia[l].listType=c,await Oe.set(jg,ia),e()}async function i(l,c){ia[l].listIds=c??[],await Oe.set(jg,ia),e()}async function s(l,c){ia[l].ignoreCase=c,await Oe.set(jg,ia),e()}let a=ia.map((l,c)=>r(f,null,r(fut,{title:`Keyword Entry ${c+1}`},r(Be,{flexDirection:"row"},r("div",{style:{flexGrow:1}},r(qe,{placeholder:"example|regex",spellCheck:!1,value:t[c].regex,onChange:u=>o(c,u)})),r(Me,{onClick:()=>put(c,e),variant:"none",size:"iconOnly",className:eB("delete")},r($i,null))),r(fn,{title:"Ignore Case",className:eB("ignoreCaseSwitch"),value:t[c].ignoreCase,onChange:()=>{s(c,!t[c].ignoreCase)}}),r(re,{tag:"h5"},"Whitelist/Blacklist"),r(Be,{flexDirection:"row"},r("div",{style:{flexGrow:1}},r(gut,{listIds:t[c].listIds,setListIds:u=>i(c,u)}))),r("div",{className:[Z.top8,Z.bottom8].join(" ")}),r(Be,{flexDirection:"row"},r(Me,{onClick:()=>{t[c].listIds.push(""),e()}},"Add ID"),r("div",{style:{flexGrow:1}},r(hut,{listType:t[c].listType,setListType:u=>n(c,u)}))))));return r(f,null,a,r("div",null,r(Me,{onClick:()=>dut(e)},"Add Keyword Entry")))}function yut({height:e=24,width:t=24,className:o,children:n,viewBox:i,...s}){return r("svg",{className:me(o,"vc-icon"),role:"img",width:t,height:e,viewBox:i,...s},n)}function but(e){return r(yut,{...e,className:me(e.className,"vc-double-checkmark-icon"),viewBox:"0 0 24 24",width:16,height:16},r("path",{fill:"currentColor",d:"M16.7 8.7a1 1 0 0 0-1.4-1.4l-3.26 3.24a1 1 0 0 0 1.42 1.42L16.7 8.7ZM3.7 11.3a1 1 0 0 0-1.4 1.4l4.5 4.5a1 1 0 0 0 1.4-1.4l-4.5-4.5Z"}),r("path",{fill:"currentColor",d:"M21.7 9.7a1 1 0 0 0-1.4-1.4L13 15.58l-3.3-3.3a1 1 0 0 0-1.4 1.42l4 4a1 1 0 0 0 1.4 0l8-8Z"}))}var ia,nm,QZ,REe,lut,cut,uut,jg,B2,eB,mk,tB,LEe=x(()=>{"use strict";d();_Ee();dr();Q();Co();eo();Qs();ut();ao();H();nt();co();xt();qo();$();fe();B();ia=[],nm=[],REe=et("recentMentionsPopout","scroller"),lut=et("inboxTitle","tab"),cut=vt("getProTip","canCloseAllMessages:"),uut=vt(".createFromServer(",".isBlockedForMessage","messageReference:"),jg="KeywordNotify_keywordEntries",B2="KeywordNotify_log",eB=de("vc-keywordnotify-");mk=R({ignoreBots:{type:3,description:"Ignore messages from bots",default:!0},amountToKeep:{type:1,description:"Amount of messages to keep in the log",default:50},keywords:{type:6,description:"Manage keywords",component:()=>r(xut,null)}}),tB=k({name:"KeywordNotify",authors:[j.camila314,j.x3rt],description:"Sends a notification if a given message matches certain keywords or regexes",settings:mk,patches:[{find:"#{intl::UNREADS_TAB_LABEL})}",replacement:[{match:/,(\i\?\(0,\i\.jsxs?\)\(\i\.\i\i\.Item)/,replace:",$self.keywordTabBar()$&"},{match:/:(\i)===\i\.\i\.MENTIONS\?/,replace:": $1 === 8 ? $self.keywordClearButton() $&"}]},{find:".MENTIONS)});",replacement:{match:/:(\i)===\i\.\i\.MENTIONS\?\(0,.+?onJump:(\i)}\)/,replace:": $1 === 8 ? $self.tryKeywordMenu($2) $&"}},{find:".guildFilter:null",replacement:[{match:/function (\i)\(\i\){let{message:\i,gotoMessage/,replace:"$self.renderMsg = $1; $&"},{match:/onClick:\(\)=>(\i\.\i\.deleteRecentMention\((\i)\.id\))/,replace:"onClick: () => $2._keyword ? $self.deleteKeyword($2.id) : $1"}]}],async start(){this.onUpdate=()=>null,ia=await Oe.get(jg)??[],await Oe.set(jg,ia),(await Oe.get(B2)??[]).map(e=>JSON.parse(e)).forEach(e=>{try{this.addToLog(e)}catch(t){console.error(t)}}),QZ=e=>this.modify(e),V.addInterceptor(QZ)},stop(){let e=V._interceptors.indexOf(QZ);e>-1&&V._interceptors.splice(e,1)},applyKeywordEntries(e){let t=!1;for(let o of ia){if(o.regex==="")continue;let n=o.listIds.some(a=>a.trim()===e.channel_id||a===e.author.id);if(!n){let a=ne.getChannel(e.channel_id);a!=null&&(n=o.listIds.some(l=>l.trim()===a.guild_id))}let i=o.listType==="Whitelist";if(!i&&n||i&&!n||mk.store.ignoreBots&&e.author.bot&&(!i||!o.listIds.includes(e.author.id)))continue;let s=o.ignoreCase?"i":"";if(pk(e.content,o.regex,s))t=!0;else for(let a of e.embeds)if(pk(a.description,o.regex,s)||pk(a.title,o.regex,s)){t=!0;break}else if(a.fields!=null){for(let l of a.fields)if(pk(l.value,o.regex,s)||pk(l.name,o.regex,s)){t=!0;break}}}if(t){let o=z.getCurrentUser()?.id;o!==null&&e.mentions.push({id:o}),e.author.id!==o&&(this.storeMessage(e),this.addToLog(e))}},storeMessage(e){e!=null&&Oe.get(B2).then(t=>{t=t?t.map(o=>JSON.parse(o)):[],t.push(e),t.length>mk.store.amountToKeep&&(t=t.slice(-mk.store.amountToKeep)),Oe.set(B2,t.map(o=>JSON.stringify(o)))})},discardMessage(e){Oe.get(B2).then(t=>{let o=t?t.map(n=>JSON.parse(n)):[];o=o.filter(n=>n.id!==e),Oe.set(B2,o.map(n=>JSON.stringify(n)))})},addToLog(e){if(e==null||nm.some(o=>o.id===e.id))return;let t;try{t=uut(e)}catch(o){console.error(o);return}for(nm.push(t),nm.sort((o,n)=>n.timestamp-o.timestamp);nm.length>mk.store.amountToKeep;)nm.pop();this.onUpdate()},deleteKeyword(e){nm=nm.filter(t=>t.id!==e),this.onUpdate()},keywordTabBar(){return r(Rr.Item,{className:me(lut.tab),id:8},"Keywords")},keywordClearButton(){return r(Ue,{text:"Clear All"},({onMouseLeave:e,onMouseEnter:t})=>r(Me,{variant:"secondary",size:"iconOnly",onMouseLeave:e,onMouseEnter:t,onClick:()=>{nm=[],Oe.set(B2,[]),this.onUpdate()}},r(but,null)))},tryKeywordMenu(e){let t=ne.getChannel(st.getChannelId()),[o,n]=L(nm);this.onUpdate=()=>{let s=Array.from(nm);n(s)};let i=(s,a)=>(s._keyword=!0,s.customRenderedContent={content:mut(s.content,ia)},[this.renderMsg({message:s,gotoMessage:a,dismissible:!0})]);return r(f,null,r(cut,{className:me(REe.recentMentionsPopout),scrollerClassName:me(REe.scroller),renderHeader:()=>null,renderMessage:i,channel:t,onJump:e,onFetch:()=>null,onCloseMessage:s=>{this.deleteKeyword(s),this.discardMessage(s)},loadMore:()=>null,messages:o,renderEmptyState:()=>null,canCloseAllMessages:!0}))},modify(e){if(e.type==="MESSAGE_CREATE"||e.type==="MESSAGE_UPDATE")this.applyKeywordEntries(e.message);else if(e.type==="LOAD_MESSAGES_SUCCESS")for(let t=0;t<e.messages.length;++t)this.applyKeywordEntries(e.messages[t])}})});async function vut(e,t,o){try{let s=((await Ht.get({url:`/guilds/${e}/messages/search?author_id=${o}&channel_id=${t}&sort_by=timestamp&sort_order=desc&offset=0`})).body.messages?.flat()||[]).find(a=>a&&a.id);return s?s.id:(D.show({type:D.Type.FAILURE,message:"Couldn't find any recent messages from this user.",id:D.genId()}),null)}catch(n){return console.error("Error finding last message:",n),D.show({type:D.Type.FAILURE,message:"Failed to find messages. Check console for details.",id:D.genId()}),null}}async function FEe(e,t){try{if(!e){D.show({type:D.Type.FAILURE,message:"Channel information not available.",id:D.genId()});return}let o=e.guild_id!==null?e.guild_id:"@me",n=e.id,i;t?i=t:i=z.getCurrentUser().id;let s=await vut(o,n,i);if(s){let a=`/channels/${o}/${n}/${s}`;ho.transitionTo(a)}}catch(o){console.error("Error in jumpToLastActive:",o),D.show({type:D.Type.FAILURE,message:"Failed to jump to message. Check console for details.",id:D.genId()})}}function wut(){return r("svg",{viewBox:"0 0 52 52",width:"20",height:"20",fill:"#aa6746"},r("g",null,r("path",{d:`M11.4,21.6L24.9,7.9c0.6-0.6,1.6-0.6,2.2,0l13.5,13.7c0.6,0.6,0.6,1.6,0,2.2L38.4,26
                c-0.6,0.6-1.6,0.6-2.2,0l-9.1-9.4c-0.6-0.6-1.6-0.6-2.2,0l-9.1,9.3c-0.6,0.6-1.6,0.6-2.2,0l-2.2-2.2C10.9,23.1,10.9,22.2,11.4,21.6
                z`}),r("path",{d:`M11.4,39.7L24.9,26c0.6-0.6,1.6-0.6,2.2,0l13.5,13.7c0.6,0.6,0.6,1.6,0,2.2l-2.2,2.2
                c-0.6,0.6-1.6,0.6-2.2,0l-9.1-9.4c-0.6-0.6-1.6-0.6-2.2,0L15.8,44c-0.6,0.6-1.6,0.6-2.2,0l-2.2-2.2C10.9,41.2,10.9,40.2,11.4,39.7z
                `})))}function kut(){return r("svg",{viewBox:"0 0 24 24",width:"20",height:"20",fill:"#aa6746",xmlns:"http://www.w3.org/2000/svg"},r("path",{fillRule:"evenodd",d:"M12,2 C17.5228475,2 22,6.4771525 22,12 C22,17.5228475 17.5228475,22 12,22 C6.4771525,22 2,17.5228475 2,12 C2,6.4771525 6.4771525,2 12,2 Z M12,4 C7.581722,4 4,7.581722 4,12 C4,16.418278 7.581722,20 12,20 C16.418278,20 20,16.418278 20,12 C20,7.581722 16.418278,4 12,4 Z M12,6 C12.5128358,6 12.9355072,6.38604019 12.9932723,6.88337887 L13,7 L13,11.5857864 L14.7071068,13.2928932 C15.0976311,13.6834175 15.0976311,14.3165825 14.7071068,14.7071068 C14.3466228,15.0675907 13.7793918,15.0953203 13.3871006,14.7902954 L13.2928932,14.7071068 L11.2928932,12.7071068 C11.1366129,12.5508265 11.0374017,12.3481451 11.0086724,12.131444 L11,12 L11,7 C11,6.44771525 11.4477153,6 12,6 Z"}))}var OEe,Sut,oB,UEe=x(()=>{"use strict";d();H();$();B();OEe=(e,{channel:t})=>{e.push(r(M.MenuItem,{id:"LastActive",label:r("span",{style:{color:"#aa6746"}},"Your Last Message"),icon:kut,action:()=>{FEe(t)}}))},Sut=(e,{user:t,channel:o})=>{!o||!t?.id||e.push(r(M.MenuItem,{id:"LastActive",label:r("span",{style:{color:"#aa6746"}},"User's Last Message"),icon:wut,action:()=>{FEe(o,t.id)}}))};oB=k({name:"LastActive",description:"A plugin to jump to last active message from yourself or another user in a channel/server.",authors:[j.Crxa],contextMenus:{"channel-context":OEe,"user-context":Sut,"thread-context":OEe}})});function Eut(e){if(e.button!==HEe)return!1;let t=e.target;if(!t?.closest)return!1;let o=t.closest("a[href]");if(!o)return!1;let n=o.getAttribute("href");return!!n&&n!=="#"}function nB(e){Eut(e)&&(e.preventDefault(),e.stopPropagation())}var HEe,$Ee,fk,rB,zEe=x(()=>{"use strict";d();Q();dv();$();HEe=1,$Ee=0,fk=R({scope:{type:4,description:"Situations in which to prevent middle click from pasting.",options:[{label:"Always Prevent Middle Click Pasting",value:"always",default:!0},{label:"Only Prevent When Text Area Not Focused",value:"focus"}]},threshold:{type:1,description:"Milliseconds until pasting is enabled again after a middle click.",default:100,onChange(e){e<1&&(fk.store.threshold=1)}},preventLinkOpen:{type:3,description:"Prevent middle-click on links from opening new tabs while preserving autoscroll.",default:!1,onChange(e){e?document.addEventListener("auxclick",nB,!0):document.removeEventListener("auxclick",nB,!0)}}});rB=k({name:"LimitMiddleClickPaste",description:"Prevent middle click pasting either always or just when a text area is not focused.",authors:[j.Etorix,j.korzi],settings:fk,isPastingDisabled(e){let t=Date.now()-$Ee<Math.max(fk.store.threshold,1),{scope:o}=fk.store;return t?o==="always"||o==="focus"&&!e:!1},onMouseUp:e=>{e.button===HEe&&($Ee=Date.now())},start(){document.addEventListener("mouseup",this.onMouseUp),fk.store.preventLinkOpen&&document.addEventListener("auxclick",nB,!0)},stop(){document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("auxclick",nB,!0)},patches:[{find:'document.addEventListener("paste",',replacement:{match:/(?<=paste",(\i)=>{)/,replace:'if($1.target.tagName==="BUTTON"||$self.isPastingDisabled(false)){$1.preventDefault?.();$1.stopPropagation?.();return;};'}},{find:',origin:"clipboard"});',replacement:{match:/(?<=handlePaste=(\i)=>{)(?=let)/,replace:"if($self.isPastingDisabled(true)){$1.preventDefault?.();$1.stopPropagation?.();return;}"}},{find:"props.handlePastedText&&",replacement:{match:/(?<=clipboardData\);)/,replace:"if($self.isPastingDisabled(true)){arguments[1].preventDefault?.();arguments[1].stopPropagation?.();return;};"}}]})});async function XZ(e){return(await zi.fetchAssetIds(iB,[e]))[0]}function Cut(e){V.dispatch({type:"LOCAL_ACTIVITY_UPDATE",activity:e,socketId:"ListenBrainz"})}var iB,Aut,GEe,qEe,ZZ,qa,jEe,JZ,sB,WEe=x(()=>{"use strict";d();Q();ut();ts();wt();H();At();$();hr();fe();B();iB="1090155131007406132",Aut="2a96cbd8b46e442fc41c2b86b821562f",GEe=new ke("ListenBrainzRPC"),qEe=He("getLocalPresence");qa=R({username:{description:"ListenBrainz username",type:0},mbContact:{description:"ListenBrainz contact",type:0},shareUsername:{description:"show link to ListenBrainz profile (may only be visible to other users)",type:3,default:!1},shareSong:{description:"show link to song on ListenBrainz (may only be visible to other users)",type:3,default:!0},hideWithSpotify:{description:"hide ListenBrainz presence if Spotify is running",type:3,default:!0},hideWithActivity:{description:"hide ListenBrainz presence if you have any other presence",type:3,default:!1},useTimeBar:{description:"use track duration to display a time bar (must be using Listening status)",type:3,default:!0},statusName:{description:"custom status text",type:0,default:"some music"},nameFormat:{description:"Show name of song and artist in status name",type:4,options:[{label:"Use custom status name",value:"status-name",default:!0},{label:"Use format 'artist - song'",value:"artist-first"},{label:"Use format 'song - artist'",value:"song-first"},{label:"Use artist name only",value:"artist"},{label:"Use song name only",value:"song"},{label:"Use album name (falls back to custom status text if song has no album)",value:"album"}]},useListeningStatus:{description:'show "Listening to" status instead of "Playing"',type:3,default:!0},missingArt:{description:"When album or album art is missing",type:4,options:[{label:"Use large ListenBrainz logo",value:"listenbrainzLogo",default:!0},{label:"Use generic placeholder",value:"placeholder"}]},useLogo:{description:"Show ListenBrainz logo on album art",type:3,default:!0}}),jEe="",JZ=0,sB=k({name:"ListenBrainzRPC",description:"Little plugin for ListenBrainz rich presence",authors:[j.qouesm],settingsAboutComponent:()=>r(f,null,r(so,null,"About MusicBrainz API"),r(W,null,"The MusicBrainz API does not require an API key, but it does require a"," ",r(Go,{href:"https://musicbrainz.org/doc/MusicBrainz_API/Rate_Limiting#Provide_meaningful_User-Agent_strings"}," ","meaningful user-agent string")," ",". For most, an email address should suffice.")),settings:qa,start(){this.updatePresence(),ZZ=setInterval(()=>{this.updatePresence()},16e3)},stop(){clearInterval(ZZ),ZZ=void 0},async fetchTrackData(){if(!qa.store.username)return null;try{let e=await fetch(`https://api.listenbrainz.org/1/user/${qa.store.username}/playing-now`);if(!e.ok)throw`${e.status} ${e.statusText}`;let t=await e.json();if(t.error)return GEe.error("Error from ListenBrainz API",`${t.error}: ${t.message}`),null;let o=t.payload?.listens?.[0];if(!o?.playing_now)return null;let n=o.track_metadata,i=n.release_name||"Unknown",s=n.artist_name||"Unknown",a=await fetch(`https://musicbrainz.org/ws/2/release/?query=release:${encodeURIComponent(i)}%20AND%20artist:${encodeURIComponent(s)}&fmt=json`);if(!a.ok)throw`${a.status} ${a.statusText}`;let u=((await a.json()).releases||[])[0]["release-group"].id,p=await fetch(`https://coverartarchive.org/release-group/${u}`);if(!p.ok)throw`${p.status} ${p.statusText}`;let m=await p.json(),g=m.release,{images:y}=m,b="";for(let v of y)if(b=v.thumbnails.large||"",!!b)break;return{name:n.track_name||"Unknown",album:i,artist:s,durationMs:n.additional_info.duration_ms,recordingMBID:n.additional_info.recording_mbid,url:g,imageUrl:b}}catch(e){return GEe.error("Failed to query ListenBrainz API",e),null}},async updatePresence(){Cut(await this.getActivity())},getLargeImage(e){if(e.imageUrl&&!e.imageUrl.includes(Aut))return e.imageUrl;if(qa.store.missingArt==="placeholder")return"placeholder"},async getActivity(){if(qa.store.hideWithActivity&&qEe.getActivities().some(s=>s.application_id!==iB)||qa.store.hideWithSpotify&&qEe.getActivities().some(s=>s.type===2&&s.application_id!==iB))return null;let e=await this.fetchTrackData();if(!e)return null;let t=this.getLargeImage(e),o=t?{large_image:await XZ(t),large_text:e.album||void 0,small_image:qa.store.useLogo?await XZ("listenbrainz"):void 0,small_text:"ListenBrainz"}:{large_image:await XZ("listenbrainz"),large_text:e.album||void 0},n=[];qa.store.shareUsername&&n.push({label:"ListenBrainz Profile",url:`https://www.listenbrainz.org/user/${qa.store.username}`}),qa.store.shareSong&&n.push({label:"View Song",url:e.url});let i=(()=>{switch(qa.store.nameFormat){case"artist-first":return e.artist+" - "+e.name;case"song-first":return e.name+" - "+e.artist;case"artist":return e.artist;case"song":return e.name;case"album":return e.album||qa.store.statusName;default:return qa.store.statusName}})();return e.recordingMBID&&e.recordingMBID!==jEe&&(jEe=e.recordingMBID,JZ=Date.now()),{application_id:iB,name:i,details:e.name,state:e.artist,assets:o,timestamps:{start:qa.store.useTimeBar?JZ:void 0,end:qa.store.useTimeBar?JZ+(e.durationMs??0):void 0},buttons:n.length?n.map(s=>s.label):void 0,metadata:{button_urls:n.map(s=>s.url)},type:qa.store.useListeningStatus?2:0,flags:1}}})});function KEe(){let e=new Array,t=o=>{for(let n of Object.values(o))if(typeof n=="string"){let i=new Image;i.setAttribute("data-purpose","prefetch"),i.setAttribute("data-added-by","LoginWithQR"),i.src=n,document.head.appendChild(i),e.push(i)}else typeof n=="object"&&t(n)};t(By),VZ=()=>e.forEach(o=>o.remove())}var By,VZ,aB=x(()=>{"use strict";d();By={cross:"https://github.com/Equicord/Equibored/raw/main/icons/loginwithqr/cross.png",deviceImage:{success:"https://github.com/Equicord/Equibored/raw/main/icons/loginwithqr/success.png",notFound:"https://github.com/Equicord/Equibored/raw/main/icons/loginwithqr/not-found.png",loading:"https://github.com/Equicord/Equibored/raw/main/icons/loginwithqr/loaded.png"}}});var YEe=x(()=>{});var QEe,lB,js,cB=x(()=>{"use strict";d();YEe();nt();fe();QEe=De('"pulsingEllipsis"'),lB=De("0v3ZM20"),js=de("qrlogin-")});var ZEe=Ro((gk,eX)=>{d();(function(t,o){typeof gk=="object"&&typeof eX=="object"?eX.exports=o():typeof define=="function"&&define.amd?define([],o):typeof gk=="object"?gk.jsQR=o():t.jsQR=o()})(typeof self<"u"?self:gk,function(){return(function(e){var t={};function o(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,o),i.l=!0,i.exports}return o.m=e,o.c=t,o.d=function(n,i,s){o.o(n,i)||Object.defineProperty(n,i,{configurable:!1,enumerable:!0,get:s})},o.n=function(n){var i=n&&n.__esModule?function(){return n.default}:function(){return n};return o.d(i,"a",i),i},o.o=function(n,i){return Object.prototype.hasOwnProperty.call(n,i)},o.p="",o(o.s=3)})([(function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(function(){function i(s,a){this.width=a,this.height=s.length/a,this.data=s}return i.createEmpty=function(s,a){return new i(new Uint8ClampedArray(s*a),s)},i.prototype.get=function(s,a){return s<0||s>=this.width||a<0||a>=this.height?!1:!!this.data[a*this.width+s]},i.prototype.set=function(s,a,l){this.data[a*this.width+s]=l?1:0},i.prototype.setRegion=function(s,a,l,c,u){for(var p=a;p<a+c;p++)for(var m=s;m<s+l;m++)this.set(m,p,!!u)},i})();t.BitMatrix=n}),(function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(2);function i(a,l){return a^l}t.addOrSubtractGF=i;var s=(function(){function a(l,c,u){this.primitive=l,this.size=c,this.generatorBase=u,this.expTable=new Array(this.size),this.logTable=new Array(this.size);for(var p=1,m=0;m<this.size;m++)this.expTable[m]=p,p=p*2,p>=this.size&&(p=(p^this.primitive)&this.size-1);for(var m=0;m<this.size-1;m++)this.logTable[this.expTable[m]]=m;this.zero=new n.default(this,Uint8ClampedArray.from([0])),this.one=new n.default(this,Uint8ClampedArray.from([1]))}return a.prototype.multiply=function(l,c){return l===0||c===0?0:this.expTable[(this.logTable[l]+this.logTable[c])%(this.size-1)]},a.prototype.inverse=function(l){if(l===0)throw new Error("Can't invert 0");return this.expTable[this.size-this.logTable[l]-1]},a.prototype.buildMonomial=function(l,c){if(l<0)throw new Error("Invalid monomial degree less than 0");if(c===0)return this.zero;var u=new Uint8ClampedArray(l+1);return u[0]=c,new n.default(this,u)},a.prototype.log=function(l){if(l===0)throw new Error("Can't take log(0)");return this.logTable[l]},a.prototype.exp=function(l){return this.expTable[l]},a})();t.default=s}),(function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(1),i=(function(){function s(a,l){if(l.length===0)throw new Error("No coefficients.");this.field=a;var c=l.length;if(c>1&&l[0]===0){for(var u=1;u<c&&l[u]===0;)u++;if(u===c)this.coefficients=a.zero.coefficients;else{this.coefficients=new Uint8ClampedArray(c-u);for(var p=0;p<this.coefficients.length;p++)this.coefficients[p]=l[u+p]}}else this.coefficients=l}return s.prototype.degree=function(){return this.coefficients.length-1},s.prototype.isZero=function(){return this.coefficients[0]===0},s.prototype.getCoefficient=function(a){return this.coefficients[this.coefficients.length-1-a]},s.prototype.addOrSubtract=function(a){var l;if(this.isZero())return a;if(a.isZero())return this;var c=this.coefficients,u=a.coefficients;c.length>u.length&&(l=[u,c],c=l[0],u=l[1]);for(var p=new Uint8ClampedArray(u.length),m=u.length-c.length,g=0;g<m;g++)p[g]=u[g];for(var g=m;g<u.length;g++)p[g]=n.addOrSubtractGF(c[g-m],u[g]);return new s(this.field,p)},s.prototype.multiply=function(a){if(a===0)return this.field.zero;if(a===1)return this;for(var l=this.coefficients.length,c=new Uint8ClampedArray(l),u=0;u<l;u++)c[u]=this.field.multiply(this.coefficients[u],a);return new s(this.field,c)},s.prototype.multiplyPoly=function(a){if(this.isZero()||a.isZero())return this.field.zero;for(var l=this.coefficients,c=l.length,u=a.coefficients,p=u.length,m=new Uint8ClampedArray(c+p-1),g=0;g<c;g++)for(var y=l[g],b=0;b<p;b++)m[g+b]=n.addOrSubtractGF(m[g+b],this.field.multiply(y,u[b]));return new s(this.field,m)},s.prototype.multiplyByMonomial=function(a,l){if(a<0)throw new Error("Invalid degree less than 0");if(l===0)return this.field.zero;for(var c=this.coefficients.length,u=new Uint8ClampedArray(c+a),p=0;p<c;p++)u[p]=this.field.multiply(this.coefficients[p],l);return new s(this.field,u)},s.prototype.evaluateAt=function(a){var l=0;if(a===0)return this.getCoefficient(0);var c=this.coefficients.length;if(a===1)return this.coefficients.forEach(function(p){l=n.addOrSubtractGF(l,p)}),l;l=this.coefficients[0];for(var u=1;u<c;u++)l=n.addOrSubtractGF(this.field.multiply(a,l),this.coefficients[u]);return l},s})();t.default=i}),(function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(4),i=o(5),s=o(11),a=o(12);function l(p){var m=a.locate(p);if(!m)return null;for(var g=0,y=m;g<y.length;g++){var b=y[g],v=s.extract(p,b),E=i.decode(v.matrix);if(E)return{binaryData:E.bytes,data:E.text,chunks:E.chunks,version:E.version,location:{topRightCorner:v.mappingFunction(b.dimension,0),topLeftCorner:v.mappingFunction(0,0),bottomRightCorner:v.mappingFunction(b.dimension,b.dimension),bottomLeftCorner:v.mappingFunction(0,b.dimension),topRightFinderPattern:b.topRight,topLeftFinderPattern:b.topLeft,bottomLeftFinderPattern:b.bottomLeft,bottomRightAlignmentPattern:b.alignmentPattern}}}return null}var c={inversionAttempts:"attemptBoth"};function u(p,m,g,y){y===void 0&&(y={});var b=c;Object.keys(b||{}).forEach(function(_){b[_]=y[_]||b[_]});var v=b.inversionAttempts==="attemptBoth"||b.inversionAttempts==="invertFirst",E=b.inversionAttempts==="onlyInvert"||b.inversionAttempts==="invertFirst",A=n.binarize(p,m,g,v),C=A.binarized,I=A.inverted,N=l(E?I:C);return!N&&(b.inversionAttempts==="attemptBoth"||b.inversionAttempts==="invertFirst")&&(N=l(E?C:I)),N}u.default=u,t.default=u}),(function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(0),i=8,s=24;function a(u,p,m){return u<p?p:u>m?m:u}var l=(function(){function u(p,m){this.width=p,this.data=new Uint8ClampedArray(p*m)}return u.prototype.get=function(p,m){return this.data[m*this.width+p]},u.prototype.set=function(p,m,g){this.data[m*this.width+p]=g},u})();function c(u,p,m,g){if(u.length!==p*m*4)throw new Error("Malformed data passed to binarizer.");for(var y=new l(p,m),b=0;b<p;b++)for(var v=0;v<m;v++){var E=u[(v*p+b)*4+0],A=u[(v*p+b)*4+1],C=u[(v*p+b)*4+2];y.set(b,v,.2126*E+.7152*A+.0722*C)}for(var I=Math.ceil(p/i),N=Math.ceil(m/i),_=new l(I,N),O=0;O<N;O++)for(var F=0;F<I;F++){for(var J=0,G=1/0,te=0,v=0;v<i;v++)for(var b=0;b<i;b++){var K=y.get(F*i+b,O*i+v);J+=K,G=Math.min(G,K),te=Math.max(te,K)}var oe=J/Math.pow(i,2);if(te-G<=s&&(oe=G/2,O>0&&F>0)){var le=(_.get(F,O-1)+2*_.get(F-1,O)+_.get(F-1,O-1))/4;G<le&&(oe=le)}_.set(F,O,oe)}var he=n.BitMatrix.createEmpty(p,m),Ae=null;g&&(Ae=n.BitMatrix.createEmpty(p,m));for(var O=0;O<N;O++)for(var F=0;F<I;F++){for(var Ce=a(F,2,I-3),ye=a(O,2,N-3),J=0,ce=-2;ce<=2;ce++)for(var pe=-2;pe<=2;pe++)J+=_.get(Ce+ce,ye+pe);for(var xe=J/25,ce=0;ce<i;ce++)for(var pe=0;pe<i;pe++){var b=F*i+ce,v=O*i+pe,Ze=y.get(b,v);he.set(b,v,Ze<=xe),g&&Ae.set(b,v,!(Ze<=xe))}}return g?{binarized:he,inverted:Ae}:{binarized:he}}t.binarize=c}),(function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(0),i=o(6),s=o(9),a=o(10);function l(C,I){for(var N=C^I,_=0;N;)_++,N&=N-1;return _}function c(C,I){return I<<1|C}var u=[{bits:21522,formatInfo:{errorCorrectionLevel:1,dataMask:0}},{bits:20773,formatInfo:{errorCorrectionLevel:1,dataMask:1}},{bits:24188,formatInfo:{errorCorrectionLevel:1,dataMask:2}},{bits:23371,formatInfo:{errorCorrectionLevel:1,dataMask:3}},{bits:17913,formatInfo:{errorCorrectionLevel:1,dataMask:4}},{bits:16590,formatInfo:{errorCorrectionLevel:1,dataMask:5}},{bits:20375,formatInfo:{errorCorrectionLevel:1,dataMask:6}},{bits:19104,formatInfo:{errorCorrectionLevel:1,dataMask:7}},{bits:30660,formatInfo:{errorCorrectionLevel:0,dataMask:0}},{bits:29427,formatInfo:{errorCorrectionLevel:0,dataMask:1}},{bits:32170,formatInfo:{errorCorrectionLevel:0,dataMask:2}},{bits:30877,formatInfo:{errorCorrectionLevel:0,dataMask:3}},{bits:26159,formatInfo:{errorCorrectionLevel:0,dataMask:4}},{bits:25368,formatInfo:{errorCorrectionLevel:0,dataMask:5}},{bits:27713,formatInfo:{errorCorrectionLevel:0,dataMask:6}},{bits:26998,formatInfo:{errorCorrectionLevel:0,dataMask:7}},{bits:5769,formatInfo:{errorCorrectionLevel:3,dataMask:0}},{bits:5054,formatInfo:{errorCorrectionLevel:3,dataMask:1}},{bits:7399,formatInfo:{errorCorrectionLevel:3,dataMask:2}},{bits:6608,formatInfo:{errorCorrectionLevel:3,dataMask:3}},{bits:1890,formatInfo:{errorCorrectionLevel:3,dataMask:4}},{bits:597,formatInfo:{errorCorrectionLevel:3,dataMask:5}},{bits:3340,formatInfo:{errorCorrectionLevel:3,dataMask:6}},{bits:2107,formatInfo:{errorCorrectionLevel:3,dataMask:7}},{bits:13663,formatInfo:{errorCorrectionLevel:2,dataMask:0}},{bits:12392,formatInfo:{errorCorrectionLevel:2,dataMask:1}},{bits:16177,formatInfo:{errorCorrectionLevel:2,dataMask:2}},{bits:14854,formatInfo:{errorCorrectionLevel:2,dataMask:3}},{bits:9396,formatInfo:{errorCorrectionLevel:2,dataMask:4}},{bits:8579,formatInfo:{errorCorrectionLevel:2,dataMask:5}},{bits:11994,formatInfo:{errorCorrectionLevel:2,dataMask:6}},{bits:11245,formatInfo:{errorCorrectionLevel:2,dataMask:7}}],p=[function(C){return(C.y+C.x)%2===0},function(C){return C.y%2===0},function(C){return C.x%3===0},function(C){return(C.y+C.x)%3===0},function(C){return(Math.floor(C.y/2)+Math.floor(C.x/3))%2===0},function(C){return C.x*C.y%2+C.x*C.y%3===0},function(C){return(C.y*C.x%2+C.y*C.x%3)%2===0},function(C){return((C.y+C.x)%2+C.y*C.x%3)%2===0}];function m(C){var I=17+4*C.versionNumber,N=n.BitMatrix.createEmpty(I,I);N.setRegion(0,0,9,9,!0),N.setRegion(I-8,0,8,9,!0),N.setRegion(0,I-8,9,8,!0);for(var _=0,O=C.alignmentPatternCenters;_<O.length;_++)for(var F=O[_],J=0,G=C.alignmentPatternCenters;J<G.length;J++){var te=G[J];F===6&&te===6||F===6&&te===I-7||F===I-7&&te===6||N.setRegion(F-2,te-2,5,5,!0)}return N.setRegion(6,9,1,I-17,!0),N.setRegion(9,6,I-17,1,!0),C.versionNumber>6&&(N.setRegion(I-11,0,3,6,!0),N.setRegion(0,I-11,6,3,!0)),N}function g(C,I,N){for(var _=p[N.dataMask],O=C.height,F=m(I),J=[],G=0,te=0,K=!0,oe=O-1;oe>0;oe-=2){oe===6&&oe--;for(var le=0;le<O;le++)for(var he=K?O-1-le:le,Ae=0;Ae<2;Ae++){var Ce=oe-Ae;if(!F.get(Ce,he)){te++;var ye=C.get(Ce,he);_({y:he,x:Ce})&&(ye=!ye),G=c(ye,G),te===8&&(J.push(G),te=0,G=0)}}K=!K}return J}function y(C){var I=C.height,N=Math.floor((I-17)/4);if(N<=6)return a.VERSIONS[N-1];for(var _=0,O=5;O>=0;O--)for(var F=I-9;F>=I-11;F--)_=c(C.get(F,O),_);for(var J=0,F=5;F>=0;F--)for(var O=I-9;O>=I-11;O--)J=c(C.get(F,O),J);for(var G=1/0,te,K=0,oe=a.VERSIONS;K<oe.length;K++){var le=oe[K];if(le.infoBits===_||le.infoBits===J)return le;var he=l(_,le.infoBits);he<G&&(te=le,G=he),he=l(J,le.infoBits),he<G&&(te=le,G=he)}if(G<=3)return te}function b(C){for(var I=0,N=0;N<=8;N++)N!==6&&(I=c(C.get(N,8),I));for(var _=7;_>=0;_--)_!==6&&(I=c(C.get(8,_),I));for(var O=C.height,F=0,_=O-1;_>=O-7;_--)F=c(C.get(8,_),F);for(var N=O-8;N<O;N++)F=c(C.get(N,8),F);for(var J=1/0,G=null,te=0,K=u;te<K.length;te++){var oe=K[te],le=oe.bits,he=oe.formatInfo;if(le===I||le===F)return he;var Ae=l(I,le);Ae<J&&(G=he,J=Ae),I!==F&&(Ae=l(F,le),Ae<J&&(G=he,J=Ae))}return J<=3?G:null}function v(C,I,N){var _=I.errorCorrectionLevels[N],O=[],F=0;if(_.ecBlocks.forEach(function(ye){for(var ce=0;ce<ye.numBlocks;ce++)O.push({numDataCodewords:ye.dataCodewordsPerBlock,codewords:[]}),F+=ye.dataCodewordsPerBlock+_.ecCodewordsPerBlock}),C.length<F)return null;C=C.slice(0,F);for(var J=_.ecBlocks[0].dataCodewordsPerBlock,G=0;G<J;G++)for(var te=0,K=O;te<K.length;te++){var oe=K[te];oe.codewords.push(C.shift())}if(_.ecBlocks.length>1)for(var le=_.ecBlocks[0].numBlocks,he=_.ecBlocks[1].numBlocks,G=0;G<he;G++)O[le+G].codewords.push(C.shift());for(;C.length>0;)for(var Ae=0,Ce=O;Ae<Ce.length;Ae++){var oe=Ce[Ae];oe.codewords.push(C.shift())}return O}function E(C){var I=y(C);if(!I)return null;var N=b(C);if(!N)return null;var _=g(C,I,N),O=v(_,I,N.errorCorrectionLevel);if(!O)return null;for(var F=O.reduce(function(Ae,Ce){return Ae+Ce.numDataCodewords},0),J=new Uint8ClampedArray(F),G=0,te=0,K=O;te<K.length;te++){var oe=K[te],le=s.decode(oe.codewords,oe.codewords.length-oe.numDataCodewords);if(!le)return null;for(var he=0;he<oe.numDataCodewords;he++)J[G++]=le[he]}try{return i.decode(J,I.versionNumber)}catch{return null}}function A(C){if(C==null)return null;var I=E(C);if(I)return I;for(var N=0;N<C.width;N++)for(var _=N+1;_<C.height;_++)C.get(N,_)!==C.get(_,N)&&(C.set(N,_,!C.get(N,_)),C.set(_,N,!C.get(_,N)));return E(C)}t.decode=A}),(function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(7),i=o(8),s;(function(y){y.Numeric="numeric",y.Alphanumeric="alphanumeric",y.Byte="byte",y.Kanji="kanji",y.ECI="eci"})(s=t.Mode||(t.Mode={}));var a;(function(y){y[y.Terminator=0]="Terminator",y[y.Numeric=1]="Numeric",y[y.Alphanumeric=2]="Alphanumeric",y[y.Byte=4]="Byte",y[y.Kanji=8]="Kanji",y[y.ECI=7]="ECI"})(a||(a={}));function l(y,b){for(var v=[],E="",A=[10,12,14][b],C=y.readBits(A);C>=3;){var I=y.readBits(10);if(I>=1e3)throw new Error("Invalid numeric value above 999");var N=Math.floor(I/100),_=Math.floor(I/10)%10,O=I%10;v.push(48+N,48+_,48+O),E+=N.toString()+_.toString()+O.toString(),C-=3}if(C===2){var I=y.readBits(7);if(I>=100)throw new Error("Invalid numeric value above 99");var N=Math.floor(I/10),_=I%10;v.push(48+N,48+_),E+=N.toString()+_.toString()}else if(C===1){var I=y.readBits(4);if(I>=10)throw new Error("Invalid numeric value above 9");v.push(48+I),E+=I.toString()}return{bytes:v,text:E}}var c=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function u(y,b){for(var v=[],E="",A=[9,11,13][b],C=y.readBits(A);C>=2;){var I=y.readBits(11),N=Math.floor(I/45),_=I%45;v.push(c[N].charCodeAt(0),c[_].charCodeAt(0)),E+=c[N]+c[_],C-=2}if(C===1){var N=y.readBits(6);v.push(c[N].charCodeAt(0)),E+=c[N]}return{bytes:v,text:E}}function p(y,b){for(var v=[],E="",A=[8,16,16][b],C=y.readBits(A),I=0;I<C;I++){var N=y.readBits(8);v.push(N)}try{E+=decodeURIComponent(v.map(function(_){return"%"+("0"+_.toString(16)).substr(-2)}).join(""))}catch{}return{bytes:v,text:E}}function m(y,b){for(var v=[],E="",A=[8,10,12][b],C=y.readBits(A),I=0;I<C;I++){var N=y.readBits(13),_=Math.floor(N/192)<<8|N%192;_<7936?_+=33088:_+=49472,v.push(_>>8,_&255),E+=String.fromCharCode(i.shiftJISTable[_])}return{bytes:v,text:E}}function g(y,b){for(var v,E,A,C,I=new n.BitStream(y),N=b<=9?0:b<=26?1:2,_={text:"",bytes:[],chunks:[],version:b};I.available()>=4;){var O=I.readBits(4);if(O===a.Terminator)return _;if(O===a.ECI)I.readBits(1)===0?_.chunks.push({type:s.ECI,assignmentNumber:I.readBits(7)}):I.readBits(1)===0?_.chunks.push({type:s.ECI,assignmentNumber:I.readBits(14)}):I.readBits(1)===0?_.chunks.push({type:s.ECI,assignmentNumber:I.readBits(21)}):_.chunks.push({type:s.ECI,assignmentNumber:-1});else if(O===a.Numeric){var F=l(I,N);_.text+=F.text,(v=_.bytes).push.apply(v,F.bytes),_.chunks.push({type:s.Numeric,text:F.text})}else if(O===a.Alphanumeric){var J=u(I,N);_.text+=J.text,(E=_.bytes).push.apply(E,J.bytes),_.chunks.push({type:s.Alphanumeric,text:J.text})}else if(O===a.Byte){var G=p(I,N);_.text+=G.text,(A=_.bytes).push.apply(A,G.bytes),_.chunks.push({type:s.Byte,bytes:G.bytes,text:G.text})}else if(O===a.Kanji){var te=m(I,N);_.text+=te.text,(C=_.bytes).push.apply(C,te.bytes),_.chunks.push({type:s.Kanji,bytes:te.bytes,text:te.text})}}if(I.available()===0||I.readBits(I.available())===0)return _}t.decode=g}),(function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(function(){function i(s){this.byteOffset=0,this.bitOffset=0,this.bytes=s}return i.prototype.readBits=function(s){if(s<1||s>32||s>this.available())throw new Error("Cannot read "+s.toString()+" bits");var a=0;if(this.bitOffset>0){var l=8-this.bitOffset,c=s<l?s:l,u=l-c,p=255>>8-c<<u;a=(this.bytes[this.byteOffset]&p)>>u,s-=c,this.bitOffset+=c,this.bitOffset===8&&(this.bitOffset=0,this.byteOffset++)}if(s>0){for(;s>=8;)a=a<<8|this.bytes[this.byteOffset]&255,this.byteOffset++,s-=8;if(s>0){var u=8-s,p=255>>u<<u;a=a<<s|(this.bytes[this.byteOffset]&p)>>u,this.bitOffset+=s}}return a},i.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},i})();t.BitStream=n}),(function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shiftJISTable={32:32,33:33,34:34,35:35,36:36,37:37,38:38,39:39,40:40,41:41,42:42,43:43,44:44,45:45,46:46,47:47,48:48,49:49,50:50,51:51,52:52,53:53,54:54,55:55,56:56,57:57,58:58,59:59,60:60,61:61,62:62,63:63,64:64,65:65,66:66,67:67,68:68,69:69,70:70,71:71,72:72,73:73,74:74,75:75,76:76,77:77,78:78,79:79,80:80,81:81,82:82,83:83,84:84,85:85,86:86,87:87,88:88,89:89,90:90,91:91,92:165,93:93,94:94,95:95,96:96,97:97,98:98,99:99,100:100,101:101,102:102,103:103,104:104,105:105,106:106,107:107,108:108,109:109,110:110,111:111,112:112,113:113,114:114,115:115,116:116,117:117,118:118,119:119,120:120,121:121,122:122,123:123,124:124,125:125,126:8254,33088:12288,33089:12289,33090:12290,33091:65292,33092:65294,33093:12539,33094:65306,33095:65307,33096:65311,33097:65281,33098:12443,33099:12444,33100:180,33101:65344,33102:168,33103:65342,33104:65507,33105:65343,33106:12541,33107:12542,33108:12445,33109:12446,33110:12291,33111:20189,33112:12293,33113:12294,33114:12295,33115:12540,33116:8213,33117:8208,33118:65295,33119:92,33120:12316,33121:8214,33122:65372,33123:8230,33124:8229,33125:8216,33126:8217,33127:8220,33128:8221,33129:65288,33130:65289,33131:12308,33132:12309,33133:65339,33134:65341,33135:65371,33136:65373,33137:12296,33138:12297,33139:12298,33140:12299,33141:12300,33142:12301,33143:12302,33144:12303,33145:12304,33146:12305,33147:65291,33148:8722,33149:177,33150:215,33152:247,33153:65309,33154:8800,33155:65308,33156:65310,33157:8806,33158:8807,33159:8734,33160:8756,33161:9794,33162:9792,33163:176,33164:8242,33165:8243,33166:8451,33167:65509,33168:65284,33169:162,33170:163,33171:65285,33172:65283,33173:65286,33174:65290,33175:65312,33176:167,33177:9734,33178:9733,33179:9675,33180:9679,33181:9678,33182:9671,33183:9670,33184:9633,33185:9632,33186:9651,33187:9650,33188:9661,33189:9660,33190:8251,33191:12306,33192:8594,33193:8592,33194:8593,33195:8595,33196:12307,33208:8712,33209:8715,33210:8838,33211:8839,33212:8834,33213:8835,33214:8746,33215:8745,33224:8743,33225:8744,33226:172,33227:8658,33228:8660,33229:8704,33230:8707,33242:8736,33243:8869,33244:8978,33245:8706,33246:8711,33247:8801,33248:8786,33249:8810,33250:8811,33251:8730,33252:8765,33253:8733,33254:8757,33255:8747,33256:8748,33264:8491,33265:8240,33266:9839,33267:9837,33268:9834,33269:8224,33270:8225,33271:182,33276:9711,33359:65296,33360:65297,33361:65298,33362:65299,33363:65300,33364:65301,33365:65302,33366:65303,33367:65304,33368:65305,33376:65313,33377:65314,33378:65315,33379:65316,33380:65317,33381:65318,33382:65319,33383:65320,33384:65321,33385:65322,33386:65323,33387:65324,33388:65325,33389:65326,33390:65327,33391:65328,33392:65329,33393:65330,33394:65331,33395:65332,33396:65333,33397:65334,33398:65335,33399:65336,33400:65337,33401:65338,33409:65345,33410:65346,33411:65347,33412:65348,33413:65349,33414:65350,33415:65351,33416:65352,33417:65353,33418:65354,33419:65355,33420:65356,33421:65357,33422:65358,33423:65359,33424:65360,33425:65361,33426:65362,33427:65363,33428:65364,33429:65365,33430:65366,33431:65367,33432:65368,33433:65369,33434:65370,33439:12353,33440:12354,33441:12355,33442:12356,33443:12357,33444:12358,33445:12359,33446:12360,33447:12361,33448:12362,33449:12363,33450:12364,33451:12365,33452:12366,33453:12367,33454:12368,33455:12369,33456:12370,33457:12371,33458:12372,33459:12373,33460:12374,33461:12375,33462:12376,33463:12377,33464:12378,33465:12379,33466:12380,33467:12381,33468:12382,33469:12383,33470:12384,33471:12385,33472:12386,33473:12387,33474:12388,33475:12389,33476:12390,33477:12391,33478:12392,33479:12393,33480:12394,33481:12395,33482:12396,33483:12397,33484:12398,33485:12399,33486:12400,33487:12401,33488:12402,33489:12403,33490:12404,33491:12405,33492:12406,33493:12407,33494:12408,33495:12409,33496:12410,33497:12411,33498:12412,33499:12413,33500:12414,33501:12415,33502:12416,33503:12417,33504:12418,33505:12419,33506:12420,33507:12421,33508:12422,33509:12423,33510:12424,33511:12425,33512:12426,33513:12427,33514:12428,33515:12429,33516:12430,33517:12431,33518:12432,33519:12433,33520:12434,33521:12435,33600:12449,33601:12450,33602:12451,33603:12452,33604:12453,33605:12454,33606:12455,33607:12456,33608:12457,33609:12458,33610:12459,33611:12460,33612:12461,33613:12462,33614:12463,33615:12464,33616:12465,33617:12466,33618:12467,33619:12468,33620:12469,33621:12470,33622:12471,33623:12472,33624:12473,33625:12474,33626:12475,33627:12476,33628:12477,33629:12478,33630:12479,33631:12480,33632:12481,33633:12482,33634:12483,33635:12484,33636:12485,33637:12486,33638:12487,33639:12488,33640:12489,33641:12490,33642:12491,33643:12492,33644:12493,33645:12494,33646:12495,33647:12496,33648:12497,33649:12498,33650:12499,33651:12500,33652:12501,33653:12502,33654:12503,33655:12504,33656:12505,33657:12506,33658:12507,33659:12508,33660:12509,33661:12510,33662:12511,33664:12512,33665:12513,33666:12514,33667:12515,33668:12516,33669:12517,33670:12518,33671:12519,33672:12520,33673:12521,33674:12522,33675:12523,33676:12524,33677:12525,33678:12526,33679:12527,33680:12528,33681:12529,33682:12530,33683:12531,33684:12532,33685:12533,33686:12534,33695:913,33696:914,33697:915,33698:916,33699:917,33700:918,33701:919,33702:920,33703:921,33704:922,33705:923,33706:924,33707:925,33708:926,33709:927,33710:928,33711:929,33712:931,33713:932,33714:933,33715:934,33716:935,33717:936,33718:937,33727:945,33728:946,33729:947,33730:948,33731:949,33732:950,33733:951,33734:952,33735:953,33736:954,33737:955,33738:956,33739:957,33740:958,33741:959,33742:960,33743:961,33744:963,33745:964,33746:965,33747:966,33748:967,33749:968,33750:969,33856:1040,33857:1041,33858:1042,33859:1043,33860:1044,33861:1045,33862:1025,33863:1046,33864:1047,33865:1048,33866:1049,33867:1050,33868:1051,33869:1052,33870:1053,33871:1054,33872:1055,33873:1056,33874:1057,33875:1058,33876:1059,33877:1060,33878:1061,33879:1062,33880:1063,33881:1064,33882:1065,33883:1066,33884:1067,33885:1068,33886:1069,33887:1070,33888:1071,33904:1072,33905:1073,33906:1074,33907:1075,33908:1076,33909:1077,33910:1105,33911:1078,33912:1079,33913:1080,33914:1081,33915:1082,33916:1083,33917:1084,33918:1085,33920:1086,33921:1087,33922:1088,33923:1089,33924:1090,33925:1091,33926:1092,33927:1093,33928:1094,33929:1095,33930:1096,33931:1097,33932:1098,33933:1099,33934:1100,33935:1101,33936:1102,33937:1103,33951:9472,33952:9474,33953:9484,33954:9488,33955:9496,33956:9492,33957:9500,33958:9516,33959:9508,33960:9524,33961:9532,33962:9473,33963:9475,33964:9487,33965:9491,33966:9499,33967:9495,33968:9507,33969:9523,33970:9515,33971:9531,33972:9547,33973:9504,33974:9519,33975:9512,33976:9527,33977:9535,33978:9501,33979:9520,33980:9509,33981:9528,33982:9538,34975:20124,34976:21782,34977:23043,34978:38463,34979:21696,34980:24859,34981:25384,34982:23030,34983:36898,34984:33909,34985:33564,34986:31312,34987:24746,34988:25569,34989:28197,34990:26093,34991:33894,34992:33446,34993:39925,34994:26771,34995:22311,34996:26017,34997:25201,34998:23451,34999:22992,35e3:34427,35001:39156,35002:32098,35003:32190,35004:39822,35005:25110,35006:31903,35007:34999,35008:23433,35009:24245,35010:25353,35011:26263,35012:26696,35013:38343,35014:38797,35015:26447,35016:20197,35017:20234,35018:20301,35019:20381,35020:20553,35021:22258,35022:22839,35023:22996,35024:23041,35025:23561,35026:24799,35027:24847,35028:24944,35029:26131,35030:26885,35031:28858,35032:30031,35033:30064,35034:31227,35035:32173,35036:32239,35037:32963,35038:33806,35039:34915,35040:35586,35041:36949,35042:36986,35043:21307,35044:20117,35045:20133,35046:22495,35047:32946,35048:37057,35049:30959,35050:19968,35051:22769,35052:28322,35053:36920,35054:31282,35055:33576,35056:33419,35057:39983,35058:20801,35059:21360,35060:21693,35061:21729,35062:22240,35063:23035,35064:24341,35065:39154,35066:28139,35067:32996,35068:34093,35136:38498,35137:38512,35138:38560,35139:38907,35140:21515,35141:21491,35142:23431,35143:28879,35144:32701,35145:36802,35146:38632,35147:21359,35148:40284,35149:31418,35150:19985,35151:30867,35152:33276,35153:28198,35154:22040,35155:21764,35156:27421,35157:34074,35158:39995,35159:23013,35160:21417,35161:28006,35162:29916,35163:38287,35164:22082,35165:20113,35166:36939,35167:38642,35168:33615,35169:39180,35170:21473,35171:21942,35172:23344,35173:24433,35174:26144,35175:26355,35176:26628,35177:27704,35178:27891,35179:27945,35180:29787,35181:30408,35182:31310,35183:38964,35184:33521,35185:34907,35186:35424,35187:37613,35188:28082,35189:30123,35190:30410,35191:39365,35192:24742,35193:35585,35194:36234,35195:38322,35196:27022,35197:21421,35198:20870,35200:22290,35201:22576,35202:22852,35203:23476,35204:24310,35205:24616,35206:25513,35207:25588,35208:27839,35209:28436,35210:28814,35211:28948,35212:29017,35213:29141,35214:29503,35215:32257,35216:33398,35217:33489,35218:34199,35219:36960,35220:37467,35221:40219,35222:22633,35223:26044,35224:27738,35225:29989,35226:20985,35227:22830,35228:22885,35229:24448,35230:24540,35231:25276,35232:26106,35233:27178,35234:27431,35235:27572,35236:29579,35237:32705,35238:35158,35239:40236,35240:40206,35241:40644,35242:23713,35243:27798,35244:33659,35245:20740,35246:23627,35247:25014,35248:33222,35249:26742,35250:29281,35251:20057,35252:20474,35253:21368,35254:24681,35255:28201,35256:31311,35257:38899,35258:19979,35259:21270,35260:20206,35261:20309,35262:20285,35263:20385,35264:20339,35265:21152,35266:21487,35267:22025,35268:22799,35269:23233,35270:23478,35271:23521,35272:31185,35273:26247,35274:26524,35275:26550,35276:27468,35277:27827,35278:28779,35279:29634,35280:31117,35281:31166,35282:31292,35283:31623,35284:33457,35285:33499,35286:33540,35287:33655,35288:33775,35289:33747,35290:34662,35291:35506,35292:22057,35293:36008,35294:36838,35295:36942,35296:38686,35297:34442,35298:20420,35299:23784,35300:25105,35301:29273,35302:30011,35303:33253,35304:33469,35305:34558,35306:36032,35307:38597,35308:39187,35309:39381,35310:20171,35311:20250,35312:35299,35313:22238,35314:22602,35315:22730,35316:24315,35317:24555,35318:24618,35319:24724,35320:24674,35321:25040,35322:25106,35323:25296,35324:25913,35392:39745,35393:26214,35394:26800,35395:28023,35396:28784,35397:30028,35398:30342,35399:32117,35400:33445,35401:34809,35402:38283,35403:38542,35404:35997,35405:20977,35406:21182,35407:22806,35408:21683,35409:23475,35410:23830,35411:24936,35412:27010,35413:28079,35414:30861,35415:33995,35416:34903,35417:35442,35418:37799,35419:39608,35420:28012,35421:39336,35422:34521,35423:22435,35424:26623,35425:34510,35426:37390,35427:21123,35428:22151,35429:21508,35430:24275,35431:25313,35432:25785,35433:26684,35434:26680,35435:27579,35436:29554,35437:30906,35438:31339,35439:35226,35440:35282,35441:36203,35442:36611,35443:37101,35444:38307,35445:38548,35446:38761,35447:23398,35448:23731,35449:27005,35450:38989,35451:38990,35452:25499,35453:31520,35454:27179,35456:27263,35457:26806,35458:39949,35459:28511,35460:21106,35461:21917,35462:24688,35463:25324,35464:27963,35465:28167,35466:28369,35467:33883,35468:35088,35469:36676,35470:19988,35471:39993,35472:21494,35473:26907,35474:27194,35475:38788,35476:26666,35477:20828,35478:31427,35479:33970,35480:37340,35481:37772,35482:22107,35483:40232,35484:26658,35485:33541,35486:33841,35487:31909,35488:21e3,35489:33477,35490:29926,35491:20094,35492:20355,35493:20896,35494:23506,35495:21002,35496:21208,35497:21223,35498:24059,35499:21914,35500:22570,35501:23014,35502:23436,35503:23448,35504:23515,35505:24178,35506:24185,35507:24739,35508:24863,35509:24931,35510:25022,35511:25563,35512:25954,35513:26577,35514:26707,35515:26874,35516:27454,35517:27475,35518:27735,35519:28450,35520:28567,35521:28485,35522:29872,35523:29976,35524:30435,35525:30475,35526:31487,35527:31649,35528:31777,35529:32233,35530:32566,35531:32752,35532:32925,35533:33382,35534:33694,35535:35251,35536:35532,35537:36011,35538:36996,35539:37969,35540:38291,35541:38289,35542:38306,35543:38501,35544:38867,35545:39208,35546:33304,35547:20024,35548:21547,35549:23736,35550:24012,35551:29609,35552:30284,35553:30524,35554:23721,35555:32747,35556:36107,35557:38593,35558:38929,35559:38996,35560:39e3,35561:20225,35562:20238,35563:21361,35564:21916,35565:22120,35566:22522,35567:22855,35568:23305,35569:23492,35570:23696,35571:24076,35572:24190,35573:24524,35574:25582,35575:26426,35576:26071,35577:26082,35578:26399,35579:26827,35580:26820,35648:27231,35649:24112,35650:27589,35651:27671,35652:27773,35653:30079,35654:31048,35655:23395,35656:31232,35657:32e3,35658:24509,35659:35215,35660:35352,35661:36020,35662:36215,35663:36556,35664:36637,35665:39138,35666:39438,35667:39740,35668:20096,35669:20605,35670:20736,35671:22931,35672:23452,35673:25135,35674:25216,35675:25836,35676:27450,35677:29344,35678:30097,35679:31047,35680:32681,35681:34811,35682:35516,35683:35696,35684:25516,35685:33738,35686:38816,35687:21513,35688:21507,35689:21931,35690:26708,35691:27224,35692:35440,35693:30759,35694:26485,35695:40653,35696:21364,35697:23458,35698:33050,35699:34384,35700:36870,35701:19992,35702:20037,35703:20167,35704:20241,35705:21450,35706:21560,35707:23470,35708:24339,35709:24613,35710:25937,35712:26429,35713:27714,35714:27762,35715:27875,35716:28792,35717:29699,35718:31350,35719:31406,35720:31496,35721:32026,35722:31998,35723:32102,35724:26087,35725:29275,35726:21435,35727:23621,35728:24040,35729:25298,35730:25312,35731:25369,35732:28192,35733:34394,35734:35377,35735:36317,35736:37624,35737:28417,35738:31142,35739:39770,35740:20136,35741:20139,35742:20140,35743:20379,35744:20384,35745:20689,35746:20807,35747:31478,35748:20849,35749:20982,35750:21332,35751:21281,35752:21375,35753:21483,35754:21932,35755:22659,35756:23777,35757:24375,35758:24394,35759:24623,35760:24656,35761:24685,35762:25375,35763:25945,35764:27211,35765:27841,35766:29378,35767:29421,35768:30703,35769:33016,35770:33029,35771:33288,35772:34126,35773:37111,35774:37857,35775:38911,35776:39255,35777:39514,35778:20208,35779:20957,35780:23597,35781:26241,35782:26989,35783:23616,35784:26354,35785:26997,35786:29577,35787:26704,35788:31873,35789:20677,35790:21220,35791:22343,35792:24062,35793:37670,35794:26020,35795:27427,35796:27453,35797:29748,35798:31105,35799:31165,35800:31563,35801:32202,35802:33465,35803:33740,35804:34943,35805:35167,35806:35641,35807:36817,35808:37329,35809:21535,35810:37504,35811:20061,35812:20534,35813:21477,35814:21306,35815:29399,35816:29590,35817:30697,35818:33510,35819:36527,35820:39366,35821:39368,35822:39378,35823:20855,35824:24858,35825:34398,35826:21936,35827:31354,35828:20598,35829:23507,35830:36935,35831:38533,35832:20018,35833:27355,35834:37351,35835:23633,35836:23624,35904:25496,35905:31391,35906:27795,35907:38772,35908:36705,35909:31402,35910:29066,35911:38536,35912:31874,35913:26647,35914:32368,35915:26705,35916:37740,35917:21234,35918:21531,35919:34219,35920:35347,35921:32676,35922:36557,35923:37089,35924:21350,35925:34952,35926:31041,35927:20418,35928:20670,35929:21009,35930:20804,35931:21843,35932:22317,35933:29674,35934:22411,35935:22865,35936:24418,35937:24452,35938:24693,35939:24950,35940:24935,35941:25001,35942:25522,35943:25658,35944:25964,35945:26223,35946:26690,35947:28179,35948:30054,35949:31293,35950:31995,35951:32076,35952:32153,35953:32331,35954:32619,35955:33550,35956:33610,35957:34509,35958:35336,35959:35427,35960:35686,35961:36605,35962:38938,35963:40335,35964:33464,35965:36814,35966:39912,35968:21127,35969:25119,35970:25731,35971:28608,35972:38553,35973:26689,35974:20625,35975:27424,35976:27770,35977:28500,35978:31348,35979:32080,35980:34880,35981:35363,35982:26376,35983:20214,35984:20537,35985:20518,35986:20581,35987:20860,35988:21048,35989:21091,35990:21927,35991:22287,35992:22533,35993:23244,35994:24314,35995:25010,35996:25080,35997:25331,35998:25458,35999:26908,36e3:27177,36001:29309,36002:29356,36003:29486,36004:30740,36005:30831,36006:32121,36007:30476,36008:32937,36009:35211,36010:35609,36011:36066,36012:36562,36013:36963,36014:37749,36015:38522,36016:38997,36017:39443,36018:40568,36019:20803,36020:21407,36021:21427,36022:24187,36023:24358,36024:28187,36025:28304,36026:29572,36027:29694,36028:32067,36029:33335,36030:35328,36031:35578,36032:38480,36033:20046,36034:20491,36035:21476,36036:21628,36037:22266,36038:22993,36039:23396,36040:24049,36041:24235,36042:24359,36043:25144,36044:25925,36045:26543,36046:28246,36047:29392,36048:31946,36049:34996,36050:32929,36051:32993,36052:33776,36053:34382,36054:35463,36055:36328,36056:37431,36057:38599,36058:39015,36059:40723,36060:20116,36061:20114,36062:20237,36063:21320,36064:21577,36065:21566,36066:23087,36067:24460,36068:24481,36069:24735,36070:26791,36071:27278,36072:29786,36073:30849,36074:35486,36075:35492,36076:35703,36077:37264,36078:20062,36079:39881,36080:20132,36081:20348,36082:20399,36083:20505,36084:20502,36085:20809,36086:20844,36087:21151,36088:21177,36089:21246,36090:21402,36091:21475,36092:21521,36160:21518,36161:21897,36162:22353,36163:22434,36164:22909,36165:23380,36166:23389,36167:23439,36168:24037,36169:24039,36170:24055,36171:24184,36172:24195,36173:24218,36174:24247,36175:24344,36176:24658,36177:24908,36178:25239,36179:25304,36180:25511,36181:25915,36182:26114,36183:26179,36184:26356,36185:26477,36186:26657,36187:26775,36188:27083,36189:27743,36190:27946,36191:28009,36192:28207,36193:28317,36194:30002,36195:30343,36196:30828,36197:31295,36198:31968,36199:32005,36200:32024,36201:32094,36202:32177,36203:32789,36204:32771,36205:32943,36206:32945,36207:33108,36208:33167,36209:33322,36210:33618,36211:34892,36212:34913,36213:35611,36214:36002,36215:36092,36216:37066,36217:37237,36218:37489,36219:30783,36220:37628,36221:38308,36222:38477,36224:38917,36225:39321,36226:39640,36227:40251,36228:21083,36229:21163,36230:21495,36231:21512,36232:22741,36233:25335,36234:28640,36235:35946,36236:36703,36237:40633,36238:20811,36239:21051,36240:21578,36241:22269,36242:31296,36243:37239,36244:40288,36245:40658,36246:29508,36247:28425,36248:33136,36249:29969,36250:24573,36251:24794,36252:39592,36253:29403,36254:36796,36255:27492,36256:38915,36257:20170,36258:22256,36259:22372,36260:22718,36261:23130,36262:24680,36263:25031,36264:26127,36265:26118,36266:26681,36267:26801,36268:28151,36269:30165,36270:32058,36271:33390,36272:39746,36273:20123,36274:20304,36275:21449,36276:21766,36277:23919,36278:24038,36279:24046,36280:26619,36281:27801,36282:29811,36283:30722,36284:35408,36285:37782,36286:35039,36287:22352,36288:24231,36289:25387,36290:20661,36291:20652,36292:20877,36293:26368,36294:21705,36295:22622,36296:22971,36297:23472,36298:24425,36299:25165,36300:25505,36301:26685,36302:27507,36303:28168,36304:28797,36305:37319,36306:29312,36307:30741,36308:30758,36309:31085,36310:25998,36311:32048,36312:33756,36313:35009,36314:36617,36315:38555,36316:21092,36317:22312,36318:26448,36319:32618,36320:36001,36321:20916,36322:22338,36323:38442,36324:22586,36325:27018,36326:32948,36327:21682,36328:23822,36329:22524,36330:30869,36331:40442,36332:20316,36333:21066,36334:21643,36335:25662,36336:26152,36337:26388,36338:26613,36339:31364,36340:31574,36341:32034,36342:37679,36343:26716,36344:39853,36345:31545,36346:21273,36347:20874,36348:21047,36416:23519,36417:25334,36418:25774,36419:25830,36420:26413,36421:27578,36422:34217,36423:38609,36424:30352,36425:39894,36426:25420,36427:37638,36428:39851,36429:30399,36430:26194,36431:19977,36432:20632,36433:21442,36434:23665,36435:24808,36436:25746,36437:25955,36438:26719,36439:29158,36440:29642,36441:29987,36442:31639,36443:32386,36444:34453,36445:35715,36446:36059,36447:37240,36448:39184,36449:26028,36450:26283,36451:27531,36452:20181,36453:20180,36454:20282,36455:20351,36456:21050,36457:21496,36458:21490,36459:21987,36460:22235,36461:22763,36462:22987,36463:22985,36464:23039,36465:23376,36466:23629,36467:24066,36468:24107,36469:24535,36470:24605,36471:25351,36472:25903,36473:23388,36474:26031,36475:26045,36476:26088,36477:26525,36478:27490,36480:27515,36481:27663,36482:29509,36483:31049,36484:31169,36485:31992,36486:32025,36487:32043,36488:32930,36489:33026,36490:33267,36491:35222,36492:35422,36493:35433,36494:35430,36495:35468,36496:35566,36497:36039,36498:36060,36499:38604,36500:39164,36501:27503,36502:20107,36503:20284,36504:20365,36505:20816,36506:23383,36507:23546,36508:24904,36509:25345,36510:26178,36511:27425,36512:28363,36513:27835,36514:29246,36515:29885,36516:30164,36517:30913,36518:31034,36519:32780,36520:32819,36521:33258,36522:33940,36523:36766,36524:27728,36525:40575,36526:24335,36527:35672,36528:40235,36529:31482,36530:36600,36531:23437,36532:38635,36533:19971,36534:21489,36535:22519,36536:22833,36537:23241,36538:23460,36539:24713,36540:28287,36541:28422,36542:30142,36543:36074,36544:23455,36545:34048,36546:31712,36547:20594,36548:26612,36549:33437,36550:23649,36551:34122,36552:32286,36553:33294,36554:20889,36555:23556,36556:25448,36557:36198,36558:26012,36559:29038,36560:31038,36561:32023,36562:32773,36563:35613,36564:36554,36565:36974,36566:34503,36567:37034,36568:20511,36569:21242,36570:23610,36571:26451,36572:28796,36573:29237,36574:37196,36575:37320,36576:37675,36577:33509,36578:23490,36579:24369,36580:24825,36581:20027,36582:21462,36583:23432,36584:25163,36585:26417,36586:27530,36587:29417,36588:29664,36589:31278,36590:33131,36591:36259,36592:37202,36593:39318,36594:20754,36595:21463,36596:21610,36597:23551,36598:25480,36599:27193,36600:32172,36601:38656,36602:22234,36603:21454,36604:21608,36672:23447,36673:23601,36674:24030,36675:20462,36676:24833,36677:25342,36678:27954,36679:31168,36680:31179,36681:32066,36682:32333,36683:32722,36684:33261,36685:33311,36686:33936,36687:34886,36688:35186,36689:35728,36690:36468,36691:36655,36692:36913,36693:37195,36694:37228,36695:38598,36696:37276,36697:20160,36698:20303,36699:20805,36700:21313,36701:24467,36702:25102,36703:26580,36704:27713,36705:28171,36706:29539,36707:32294,36708:37325,36709:37507,36710:21460,36711:22809,36712:23487,36713:28113,36714:31069,36715:32302,36716:31899,36717:22654,36718:29087,36719:20986,36720:34899,36721:36848,36722:20426,36723:23803,36724:26149,36725:30636,36726:31459,36727:33308,36728:39423,36729:20934,36730:24490,36731:26092,36732:26991,36733:27529,36734:28147,36736:28310,36737:28516,36738:30462,36739:32020,36740:24033,36741:36981,36742:37255,36743:38918,36744:20966,36745:21021,36746:25152,36747:26257,36748:26329,36749:28186,36750:24246,36751:32210,36752:32626,36753:26360,36754:34223,36755:34295,36756:35576,36757:21161,36758:21465,36759:22899,36760:24207,36761:24464,36762:24661,36763:37604,36764:38500,36765:20663,36766:20767,36767:21213,36768:21280,36769:21319,36770:21484,36771:21736,36772:21830,36773:21809,36774:22039,36775:22888,36776:22974,36777:23100,36778:23477,36779:23558,36780:23567,36781:23569,36782:23578,36783:24196,36784:24202,36785:24288,36786:24432,36787:25215,36788:25220,36789:25307,36790:25484,36791:25463,36792:26119,36793:26124,36794:26157,36795:26230,36796:26494,36797:26786,36798:27167,36799:27189,36800:27836,36801:28040,36802:28169,36803:28248,36804:28988,36805:28966,36806:29031,36807:30151,36808:30465,36809:30813,36810:30977,36811:31077,36812:31216,36813:31456,36814:31505,36815:31911,36816:32057,36817:32918,36818:33750,36819:33931,36820:34121,36821:34909,36822:35059,36823:35359,36824:35388,36825:35412,36826:35443,36827:35937,36828:36062,36829:37284,36830:37478,36831:37758,36832:37912,36833:38556,36834:38808,36835:19978,36836:19976,36837:19998,36838:20055,36839:20887,36840:21104,36841:22478,36842:22580,36843:22732,36844:23330,36845:24120,36846:24773,36847:25854,36848:26465,36849:26454,36850:27972,36851:29366,36852:30067,36853:31331,36854:33976,36855:35698,36856:37304,36857:37664,36858:22065,36859:22516,36860:39166,36928:25325,36929:26893,36930:27542,36931:29165,36932:32340,36933:32887,36934:33394,36935:35302,36936:39135,36937:34645,36938:36785,36939:23611,36940:20280,36941:20449,36942:20405,36943:21767,36944:23072,36945:23517,36946:23529,36947:24515,36948:24910,36949:25391,36950:26032,36951:26187,36952:26862,36953:27035,36954:28024,36955:28145,36956:30003,36957:30137,36958:30495,36959:31070,36960:31206,36961:32051,36962:33251,36963:33455,36964:34218,36965:35242,36966:35386,36967:36523,36968:36763,36969:36914,36970:37341,36971:38663,36972:20154,36973:20161,36974:20995,36975:22645,36976:22764,36977:23563,36978:29978,36979:23613,36980:33102,36981:35338,36982:36805,36983:38499,36984:38765,36985:31525,36986:35535,36987:38920,36988:37218,36989:22259,36990:21416,36992:36887,36993:21561,36994:22402,36995:24101,36996:25512,36997:27700,36998:28810,36999:30561,37e3:31883,37001:32736,37002:34928,37003:36930,37004:37204,37005:37648,37006:37656,37007:38543,37008:29790,37009:39620,37010:23815,37011:23913,37012:25968,37013:26530,37014:36264,37015:38619,37016:25454,37017:26441,37018:26905,37019:33733,37020:38935,37021:38592,37022:35070,37023:28548,37024:25722,37025:23544,37026:19990,37027:28716,37028:30045,37029:26159,37030:20932,37031:21046,37032:21218,37033:22995,37034:24449,37035:24615,37036:25104,37037:25919,37038:25972,37039:26143,37040:26228,37041:26866,37042:26646,37043:27491,37044:28165,37045:29298,37046:29983,37047:30427,37048:31934,37049:32854,37050:22768,37051:35069,37052:35199,37053:35488,37054:35475,37055:35531,37056:36893,37057:37266,37058:38738,37059:38745,37060:25993,37061:31246,37062:33030,37063:38587,37064:24109,37065:24796,37066:25114,37067:26021,37068:26132,37069:26512,37070:30707,37071:31309,37072:31821,37073:32318,37074:33034,37075:36012,37076:36196,37077:36321,37078:36447,37079:30889,37080:20999,37081:25305,37082:25509,37083:25666,37084:25240,37085:35373,37086:31363,37087:31680,37088:35500,37089:38634,37090:32118,37091:33292,37092:34633,37093:20185,37094:20808,37095:21315,37096:21344,37097:23459,37098:23554,37099:23574,37100:24029,37101:25126,37102:25159,37103:25776,37104:26643,37105:26676,37106:27849,37107:27973,37108:27927,37109:26579,37110:28508,37111:29006,37112:29053,37113:26059,37114:31359,37115:31661,37116:32218,37184:32330,37185:32680,37186:33146,37187:33307,37188:33337,37189:34214,37190:35438,37191:36046,37192:36341,37193:36984,37194:36983,37195:37549,37196:37521,37197:38275,37198:39854,37199:21069,37200:21892,37201:28472,37202:28982,37203:20840,37204:31109,37205:32341,37206:33203,37207:31950,37208:22092,37209:22609,37210:23720,37211:25514,37212:26366,37213:26365,37214:26970,37215:29401,37216:30095,37217:30094,37218:30990,37219:31062,37220:31199,37221:31895,37222:32032,37223:32068,37224:34311,37225:35380,37226:38459,37227:36961,37228:40736,37229:20711,37230:21109,37231:21452,37232:21474,37233:20489,37234:21930,37235:22766,37236:22863,37237:29245,37238:23435,37239:23652,37240:21277,37241:24803,37242:24819,37243:25436,37244:25475,37245:25407,37246:25531,37248:25805,37249:26089,37250:26361,37251:24035,37252:27085,37253:27133,37254:28437,37255:29157,37256:20105,37257:30185,37258:30456,37259:31379,37260:31967,37261:32207,37262:32156,37263:32865,37264:33609,37265:33624,37266:33900,37267:33980,37268:34299,37269:35013,37270:36208,37271:36865,37272:36973,37273:37783,37274:38684,37275:39442,37276:20687,37277:22679,37278:24974,37279:33235,37280:34101,37281:36104,37282:36896,37283:20419,37284:20596,37285:21063,37286:21363,37287:24687,37288:25417,37289:26463,37290:28204,37291:36275,37292:36895,37293:20439,37294:23646,37295:36042,37296:26063,37297:32154,37298:21330,37299:34966,37300:20854,37301:25539,37302:23384,37303:23403,37304:23562,37305:25613,37306:26449,37307:36956,37308:20182,37309:22810,37310:22826,37311:27760,37312:35409,37313:21822,37314:22549,37315:22949,37316:24816,37317:25171,37318:26561,37319:33333,37320:26965,37321:38464,37322:39364,37323:39464,37324:20307,37325:22534,37326:23550,37327:32784,37328:23729,37329:24111,37330:24453,37331:24608,37332:24907,37333:25140,37334:26367,37335:27888,37336:28382,37337:32974,37338:33151,37339:33492,37340:34955,37341:36024,37342:36864,37343:36910,37344:38538,37345:40667,37346:39899,37347:20195,37348:21488,37349:22823,37350:31532,37351:37261,37352:38988,37353:40441,37354:28381,37355:28711,37356:21331,37357:21828,37358:23429,37359:25176,37360:25246,37361:25299,37362:27810,37363:28655,37364:29730,37365:35351,37366:37944,37367:28609,37368:35582,37369:33592,37370:20967,37371:34552,37372:21482,37440:21481,37441:20294,37442:36948,37443:36784,37444:22890,37445:33073,37446:24061,37447:31466,37448:36799,37449:26842,37450:35895,37451:29432,37452:40008,37453:27197,37454:35504,37455:20025,37456:21336,37457:22022,37458:22374,37459:25285,37460:25506,37461:26086,37462:27470,37463:28129,37464:28251,37465:28845,37466:30701,37467:31471,37468:31658,37469:32187,37470:32829,37471:32966,37472:34507,37473:35477,37474:37723,37475:22243,37476:22727,37477:24382,37478:26029,37479:26262,37480:27264,37481:27573,37482:30007,37483:35527,37484:20516,37485:30693,37486:22320,37487:24347,37488:24677,37489:26234,37490:27744,37491:30196,37492:31258,37493:32622,37494:33268,37495:34584,37496:36933,37497:39347,37498:31689,37499:30044,37500:31481,37501:31569,37502:33988,37504:36880,37505:31209,37506:31378,37507:33590,37508:23265,37509:30528,37510:20013,37511:20210,37512:23449,37513:24544,37514:25277,37515:26172,37516:26609,37517:27880,37518:34411,37519:34935,37520:35387,37521:37198,37522:37619,37523:39376,37524:27159,37525:28710,37526:29482,37527:33511,37528:33879,37529:36015,37530:19969,37531:20806,37532:20939,37533:21899,37534:23541,37535:24086,37536:24115,37537:24193,37538:24340,37539:24373,37540:24427,37541:24500,37542:25074,37543:25361,37544:26274,37545:26397,37546:28526,37547:29266,37548:30010,37549:30522,37550:32884,37551:33081,37552:33144,37553:34678,37554:35519,37555:35548,37556:36229,37557:36339,37558:37530,37559:38263,37560:38914,37561:40165,37562:21189,37563:25431,37564:30452,37565:26389,37566:27784,37567:29645,37568:36035,37569:37806,37570:38515,37571:27941,37572:22684,37573:26894,37574:27084,37575:36861,37576:37786,37577:30171,37578:36890,37579:22618,37580:26626,37581:25524,37582:27131,37583:20291,37584:28460,37585:26584,37586:36795,37587:34086,37588:32180,37589:37716,37590:26943,37591:28528,37592:22378,37593:22775,37594:23340,37595:32044,37596:29226,37597:21514,37598:37347,37599:40372,37600:20141,37601:20302,37602:20572,37603:20597,37604:21059,37605:35998,37606:21576,37607:22564,37608:23450,37609:24093,37610:24213,37611:24237,37612:24311,37613:24351,37614:24716,37615:25269,37616:25402,37617:25552,37618:26799,37619:27712,37620:30855,37621:31118,37622:31243,37623:32224,37624:33351,37625:35330,37626:35558,37627:36420,37628:36883,37696:37048,37697:37165,37698:37336,37699:40718,37700:27877,37701:25688,37702:25826,37703:25973,37704:28404,37705:30340,37706:31515,37707:36969,37708:37841,37709:28346,37710:21746,37711:24505,37712:25764,37713:36685,37714:36845,37715:37444,37716:20856,37717:22635,37718:22825,37719:23637,37720:24215,37721:28155,37722:32399,37723:29980,37724:36028,37725:36578,37726:39003,37727:28857,37728:20253,37729:27583,37730:28593,37731:3e4,37732:38651,37733:20814,37734:21520,37735:22581,37736:22615,37737:22956,37738:23648,37739:24466,37740:26007,37741:26460,37742:28193,37743:30331,37744:33759,37745:36077,37746:36884,37747:37117,37748:37709,37749:30757,37750:30778,37751:21162,37752:24230,37753:22303,37754:22900,37755:24594,37756:20498,37757:20826,37758:20908,37760:20941,37761:20992,37762:21776,37763:22612,37764:22616,37765:22871,37766:23445,37767:23798,37768:23947,37769:24764,37770:25237,37771:25645,37772:26481,37773:26691,37774:26812,37775:26847,37776:30423,37777:28120,37778:28271,37779:28059,37780:28783,37781:29128,37782:24403,37783:30168,37784:31095,37785:31561,37786:31572,37787:31570,37788:31958,37789:32113,37790:21040,37791:33891,37792:34153,37793:34276,37794:35342,37795:35588,37796:35910,37797:36367,37798:36867,37799:36879,37800:37913,37801:38518,37802:38957,37803:39472,37804:38360,37805:20685,37806:21205,37807:21516,37808:22530,37809:23566,37810:24999,37811:25758,37812:27934,37813:30643,37814:31461,37815:33012,37816:33796,37817:36947,37818:37509,37819:23776,37820:40199,37821:21311,37822:24471,37823:24499,37824:28060,37825:29305,37826:30563,37827:31167,37828:31716,37829:27602,37830:29420,37831:35501,37832:26627,37833:27233,37834:20984,37835:31361,37836:26932,37837:23626,37838:40182,37839:33515,37840:23493,37841:37193,37842:28702,37843:22136,37844:23663,37845:24775,37846:25958,37847:27788,37848:35930,37849:36929,37850:38931,37851:21585,37852:26311,37853:37389,37854:22856,37855:37027,37856:20869,37857:20045,37858:20970,37859:34201,37860:35598,37861:28760,37862:25466,37863:37707,37864:26978,37865:39348,37866:32260,37867:30071,37868:21335,37869:26976,37870:36575,37871:38627,37872:27741,37873:20108,37874:23612,37875:24336,37876:36841,37877:21250,37878:36049,37879:32905,37880:34425,37881:24319,37882:26085,37883:20083,37884:20837,37952:22914,37953:23615,37954:38894,37955:20219,37956:22922,37957:24525,37958:35469,37959:28641,37960:31152,37961:31074,37962:23527,37963:33905,37964:29483,37965:29105,37966:24180,37967:24565,37968:25467,37969:25754,37970:29123,37971:31896,37972:20035,37973:24316,37974:20043,37975:22492,37976:22178,37977:24745,37978:28611,37979:32013,37980:33021,37981:33075,37982:33215,37983:36786,37984:35223,37985:34468,37986:24052,37987:25226,37988:25773,37989:35207,37990:26487,37991:27874,37992:27966,37993:29750,37994:30772,37995:23110,37996:32629,37997:33453,37998:39340,37999:20467,38e3:24259,38001:25309,38002:25490,38003:25943,38004:26479,38005:30403,38006:29260,38007:32972,38008:32954,38009:36649,38010:37197,38011:20493,38012:22521,38013:23186,38014:26757,38016:26995,38017:29028,38018:29437,38019:36023,38020:22770,38021:36064,38022:38506,38023:36889,38024:34687,38025:31204,38026:30695,38027:33833,38028:20271,38029:21093,38030:21338,38031:25293,38032:26575,38033:27850,38034:30333,38035:31636,38036:31893,38037:33334,38038:34180,38039:36843,38040:26333,38041:28448,38042:29190,38043:32283,38044:33707,38045:39361,38046:40614,38047:20989,38048:31665,38049:30834,38050:31672,38051:32903,38052:31560,38053:27368,38054:24161,38055:32908,38056:30033,38057:30048,38058:20843,38059:37474,38060:28300,38061:30330,38062:37271,38063:39658,38064:20240,38065:32624,38066:25244,38067:31567,38068:38309,38069:40169,38070:22138,38071:22617,38072:34532,38073:38588,38074:20276,38075:21028,38076:21322,38077:21453,38078:21467,38079:24070,38080:25644,38081:26001,38082:26495,38083:27710,38084:27726,38085:29256,38086:29359,38087:29677,38088:30036,38089:32321,38090:33324,38091:34281,38092:36009,38093:31684,38094:37318,38095:29033,38096:38930,38097:39151,38098:25405,38099:26217,38100:30058,38101:30436,38102:30928,38103:34115,38104:34542,38105:21290,38106:21329,38107:21542,38108:22915,38109:24199,38110:24444,38111:24754,38112:25161,38113:25209,38114:25259,38115:26e3,38116:27604,38117:27852,38118:30130,38119:30382,38120:30865,38121:31192,38122:32203,38123:32631,38124:32933,38125:34987,38126:35513,38127:36027,38128:36991,38129:38750,38130:39131,38131:27147,38132:31800,38133:20633,38134:23614,38135:24494,38136:26503,38137:27608,38138:29749,38139:30473,38140:32654,38208:40763,38209:26570,38210:31255,38211:21305,38212:30091,38213:39661,38214:24422,38215:33181,38216:33777,38217:32920,38218:24380,38219:24517,38220:30050,38221:31558,38222:36924,38223:26727,38224:23019,38225:23195,38226:32016,38227:30334,38228:35628,38229:20469,38230:24426,38231:27161,38232:27703,38233:28418,38234:29922,38235:31080,38236:34920,38237:35413,38238:35961,38239:24287,38240:25551,38241:30149,38242:31186,38243:33495,38244:37672,38245:37618,38246:33948,38247:34541,38248:39981,38249:21697,38250:24428,38251:25996,38252:27996,38253:28693,38254:36007,38255:36051,38256:38971,38257:25935,38258:29942,38259:19981,38260:20184,38261:22496,38262:22827,38263:23142,38264:23500,38265:20904,38266:24067,38267:24220,38268:24598,38269:25206,38270:25975,38272:26023,38273:26222,38274:28014,38275:29238,38276:31526,38277:33104,38278:33178,38279:33433,38280:35676,38281:36e3,38282:36070,38283:36212,38284:38428,38285:38468,38286:20398,38287:25771,38288:27494,38289:33310,38290:33889,38291:34154,38292:37096,38293:23553,38294:26963,38295:39080,38296:33914,38297:34135,38298:20239,38299:21103,38300:24489,38301:24133,38302:26381,38303:31119,38304:33145,38305:35079,38306:35206,38307:28149,38308:24343,38309:25173,38310:27832,38311:20175,38312:29289,38313:39826,38314:20998,38315:21563,38316:22132,38317:22707,38318:24996,38319:25198,38320:28954,38321:22894,38322:31881,38323:31966,38324:32027,38325:38640,38326:25991,38327:32862,38328:19993,38329:20341,38330:20853,38331:22592,38332:24163,38333:24179,38334:24330,38335:26564,38336:20006,38337:34109,38338:38281,38339:38491,38340:31859,38341:38913,38342:20731,38343:22721,38344:30294,38345:30887,38346:21029,38347:30629,38348:34065,38349:31622,38350:20559,38351:22793,38352:29255,38353:31687,38354:32232,38355:36794,38356:36820,38357:36941,38358:20415,38359:21193,38360:23081,38361:24321,38362:38829,38363:20445,38364:33303,38365:37610,38366:22275,38367:25429,38368:27497,38369:29995,38370:35036,38371:36628,38372:31298,38373:21215,38374:22675,38375:24917,38376:25098,38377:26286,38378:27597,38379:31807,38380:33769,38381:20515,38382:20472,38383:21253,38384:21574,38385:22577,38386:22857,38387:23453,38388:23792,38389:23791,38390:23849,38391:24214,38392:25265,38393:25447,38394:25918,38395:26041,38396:26379,38464:27861,38465:27873,38466:28921,38467:30770,38468:32299,38469:32990,38470:33459,38471:33804,38472:34028,38473:34562,38474:35090,38475:35370,38476:35914,38477:37030,38478:37586,38479:39165,38480:40179,38481:40300,38482:20047,38483:20129,38484:20621,38485:21078,38486:22346,38487:22952,38488:24125,38489:24536,38490:24537,38491:25151,38492:26292,38493:26395,38494:26576,38495:26834,38496:20882,38497:32033,38498:32938,38499:33192,38500:35584,38501:35980,38502:36031,38503:37502,38504:38450,38505:21536,38506:38956,38507:21271,38508:20693,38509:21340,38510:22696,38511:25778,38512:26420,38513:29287,38514:30566,38515:31302,38516:37350,38517:21187,38518:27809,38519:27526,38520:22528,38521:24140,38522:22868,38523:26412,38524:32763,38525:20961,38526:30406,38528:25705,38529:30952,38530:39764,38531:40635,38532:22475,38533:22969,38534:26151,38535:26522,38536:27598,38537:21737,38538:27097,38539:24149,38540:33180,38541:26517,38542:39850,38543:26622,38544:40018,38545:26717,38546:20134,38547:20451,38548:21448,38549:25273,38550:26411,38551:27819,38552:36804,38553:20397,38554:32365,38555:40639,38556:19975,38557:24930,38558:28288,38559:28459,38560:34067,38561:21619,38562:26410,38563:39749,38564:24051,38565:31637,38566:23724,38567:23494,38568:34588,38569:28234,38570:34001,38571:31252,38572:33032,38573:22937,38574:31885,38575:27665,38576:30496,38577:21209,38578:22818,38579:28961,38580:29279,38581:30683,38582:38695,38583:40289,38584:26891,38585:23167,38586:23064,38587:20901,38588:21517,38589:21629,38590:26126,38591:30431,38592:36855,38593:37528,38594:40180,38595:23018,38596:29277,38597:28357,38598:20813,38599:26825,38600:32191,38601:32236,38602:38754,38603:40634,38604:25720,38605:27169,38606:33538,38607:22916,38608:23391,38609:27611,38610:29467,38611:30450,38612:32178,38613:32791,38614:33945,38615:20786,38616:26408,38617:40665,38618:30446,38619:26466,38620:21247,38621:39173,38622:23588,38623:25147,38624:31870,38625:36016,38626:21839,38627:24758,38628:32011,38629:38272,38630:21249,38631:20063,38632:20918,38633:22812,38634:29242,38635:32822,38636:37326,38637:24357,38638:30690,38639:21380,38640:24441,38641:32004,38642:34220,38643:35379,38644:36493,38645:38742,38646:26611,38647:34222,38648:37971,38649:24841,38650:24840,38651:27833,38652:30290,38720:35565,38721:36664,38722:21807,38723:20305,38724:20778,38725:21191,38726:21451,38727:23461,38728:24189,38729:24736,38730:24962,38731:25558,38732:26377,38733:26586,38734:28263,38735:28044,38736:29494,38737:29495,38738:30001,38739:31056,38740:35029,38741:35480,38742:36938,38743:37009,38744:37109,38745:38596,38746:34701,38747:22805,38748:20104,38749:20313,38750:19982,38751:35465,38752:36671,38753:38928,38754:20653,38755:24188,38756:22934,38757:23481,38758:24248,38759:25562,38760:25594,38761:25793,38762:26332,38763:26954,38764:27096,38765:27915,38766:28342,38767:29076,38768:29992,38769:31407,38770:32650,38771:32768,38772:33865,38773:33993,38774:35201,38775:35617,38776:36362,38777:36965,38778:38525,38779:39178,38780:24958,38781:25233,38782:27442,38784:27779,38785:28020,38786:32716,38787:32764,38788:28096,38789:32645,38790:34746,38791:35064,38792:26469,38793:33713,38794:38972,38795:38647,38796:27931,38797:32097,38798:33853,38799:37226,38800:20081,38801:21365,38802:23888,38803:27396,38804:28651,38805:34253,38806:34349,38807:35239,38808:21033,38809:21519,38810:23653,38811:26446,38812:26792,38813:29702,38814:29827,38815:30178,38816:35023,38817:35041,38818:37324,38819:38626,38820:38520,38821:24459,38822:29575,38823:31435,38824:33870,38825:25504,38826:30053,38827:21129,38828:27969,38829:28316,38830:29705,38831:30041,38832:30827,38833:31890,38834:38534,38835:31452,38836:40845,38837:20406,38838:24942,38839:26053,38840:34396,38841:20102,38842:20142,38843:20698,38844:20001,38845:20940,38846:23534,38847:26009,38848:26753,38849:28092,38850:29471,38851:30274,38852:30637,38853:31260,38854:31975,38855:33391,38856:35538,38857:36988,38858:37327,38859:38517,38860:38936,38861:21147,38862:32209,38863:20523,38864:21400,38865:26519,38866:28107,38867:29136,38868:29747,38869:33256,38870:36650,38871:38563,38872:40023,38873:40607,38874:29792,38875:22593,38876:28057,38877:32047,38878:39006,38879:20196,38880:20278,38881:20363,38882:20919,38883:21169,38884:23994,38885:24604,38886:29618,38887:31036,38888:33491,38889:37428,38890:38583,38891:38646,38892:38666,38893:40599,38894:40802,38895:26278,38896:27508,38897:21015,38898:21155,38899:28872,38900:35010,38901:24265,38902:24651,38903:24976,38904:28451,38905:29001,38906:31806,38907:32244,38908:32879,38976:34030,38977:36899,38978:37676,38979:21570,38980:39791,38981:27347,38982:28809,38983:36034,38984:36335,38985:38706,38986:21172,38987:23105,38988:24266,38989:24324,38990:26391,38991:27004,38992:27028,38993:28010,38994:28431,38995:29282,38996:29436,38997:31725,38998:32769,38999:32894,39e3:34635,39001:37070,39002:20845,39003:40595,39004:31108,39005:32907,39006:37682,39007:35542,39008:20525,39009:21644,39010:35441,39011:27498,39012:36036,39013:33031,39014:24785,39015:26528,39016:40434,39017:20121,39018:20120,39019:39952,39020:35435,39021:34241,39022:34152,39023:26880,39024:28286,39025:30871,39026:33109,39071:24332,39072:19984,39073:19989,39074:20010,39075:20017,39076:20022,39077:20028,39078:20031,39079:20034,39080:20054,39081:20056,39082:20098,39083:20101,39084:35947,39085:20106,39086:33298,39087:24333,39088:20110,39089:20126,39090:20127,39091:20128,39092:20130,39093:20144,39094:20147,39095:20150,39096:20174,39097:20173,39098:20164,39099:20166,39100:20162,39101:20183,39102:20190,39103:20205,39104:20191,39105:20215,39106:20233,39107:20314,39108:20272,39109:20315,39110:20317,39111:20311,39112:20295,39113:20342,39114:20360,39115:20367,39116:20376,39117:20347,39118:20329,39119:20336,39120:20369,39121:20335,39122:20358,39123:20374,39124:20760,39125:20436,39126:20447,39127:20430,39128:20440,39129:20443,39130:20433,39131:20442,39132:20432,39133:20452,39134:20453,39135:20506,39136:20520,39137:20500,39138:20522,39139:20517,39140:20485,39141:20252,39142:20470,39143:20513,39144:20521,39145:20524,39146:20478,39147:20463,39148:20497,39149:20486,39150:20547,39151:20551,39152:26371,39153:20565,39154:20560,39155:20552,39156:20570,39157:20566,39158:20588,39159:20600,39160:20608,39161:20634,39162:20613,39163:20660,39164:20658,39232:20681,39233:20682,39234:20659,39235:20674,39236:20694,39237:20702,39238:20709,39239:20717,39240:20707,39241:20718,39242:20729,39243:20725,39244:20745,39245:20737,39246:20738,39247:20758,39248:20757,39249:20756,39250:20762,39251:20769,39252:20794,39253:20791,39254:20796,39255:20795,39256:20799,39257:20800,39258:20818,39259:20812,39260:20820,39261:20834,39262:31480,39263:20841,39264:20842,39265:20846,39266:20864,39267:20866,39268:22232,39269:20876,39270:20873,39271:20879,39272:20881,39273:20883,39274:20885,39275:20886,39276:20900,39277:20902,39278:20898,39279:20905,39280:20906,39281:20907,39282:20915,39283:20913,39284:20914,39285:20912,39286:20917,39287:20925,39288:20933,39289:20937,39290:20955,39291:20960,39292:34389,39293:20969,39294:20973,39296:20976,39297:20981,39298:20990,39299:20996,39300:21003,39301:21012,39302:21006,39303:21031,39304:21034,39305:21038,39306:21043,39307:21049,39308:21071,39309:21060,39310:21067,39311:21068,39312:21086,39313:21076,39314:21098,39315:21108,39316:21097,39317:21107,39318:21119,39319:21117,39320:21133,39321:21140,39322:21138,39323:21105,39324:21128,39325:21137,39326:36776,39327:36775,39328:21164,39329:21165,39330:21180,39331:21173,39332:21185,39333:21197,39334:21207,39335:21214,39336:21219,39337:21222,39338:39149,39339:21216,39340:21235,39341:21237,39342:21240,39343:21241,39344:21254,39345:21256,39346:30008,39347:21261,39348:21264,39349:21263,39350:21269,39351:21274,39352:21283,39353:21295,39354:21297,39355:21299,39356:21304,39357:21312,39358:21318,39359:21317,39360:19991,39361:21321,39362:21325,39363:20950,39364:21342,39365:21353,39366:21358,39367:22808,39368:21371,39369:21367,39370:21378,39371:21398,39372:21408,39373:21414,39374:21413,39375:21422,39376:21424,39377:21430,39378:21443,39379:31762,39380:38617,39381:21471,39382:26364,39383:29166,39384:21486,39385:21480,39386:21485,39387:21498,39388:21505,39389:21565,39390:21568,39391:21548,39392:21549,39393:21564,39394:21550,39395:21558,39396:21545,39397:21533,39398:21582,39399:21647,39400:21621,39401:21646,39402:21599,39403:21617,39404:21623,39405:21616,39406:21650,39407:21627,39408:21632,39409:21622,39410:21636,39411:21648,39412:21638,39413:21703,39414:21666,39415:21688,39416:21669,39417:21676,39418:21700,39419:21704,39420:21672,39488:21675,39489:21698,39490:21668,39491:21694,39492:21692,39493:21720,39494:21733,39495:21734,39496:21775,39497:21780,39498:21757,39499:21742,39500:21741,39501:21754,39502:21730,39503:21817,39504:21824,39505:21859,39506:21836,39507:21806,39508:21852,39509:21829,39510:21846,39511:21847,39512:21816,39513:21811,39514:21853,39515:21913,39516:21888,39517:21679,39518:21898,39519:21919,39520:21883,39521:21886,39522:21912,39523:21918,39524:21934,39525:21884,39526:21891,39527:21929,39528:21895,39529:21928,39530:21978,39531:21957,39532:21983,39533:21956,39534:21980,39535:21988,39536:21972,39537:22036,39538:22007,39539:22038,39540:22014,39541:22013,39542:22043,39543:22009,39544:22094,39545:22096,39546:29151,39547:22068,39548:22070,39549:22066,39550:22072,39552:22123,39553:22116,39554:22063,39555:22124,39556:22122,39557:22150,39558:22144,39559:22154,39560:22176,39561:22164,39562:22159,39563:22181,39564:22190,39565:22198,39566:22196,39567:22210,39568:22204,39569:22209,39570:22211,39571:22208,39572:22216,39573:22222,39574:22225,39575:22227,39576:22231,39577:22254,39578:22265,39579:22272,39580:22271,39581:22276,39582:22281,39583:22280,39584:22283,39585:22285,39586:22291,39587:22296,39588:22294,39589:21959,39590:22300,39591:22310,39592:22327,39593:22328,39594:22350,39595:22331,39596:22336,39597:22351,39598:22377,39599:22464,39600:22408,39601:22369,39602:22399,39603:22409,39604:22419,39605:22432,39606:22451,39607:22436,39608:22442,39609:22448,39610:22467,39611:22470,39612:22484,39613:22482,39614:22483,39615:22538,39616:22486,39617:22499,39618:22539,39619:22553,39620:22557,39621:22642,39622:22561,39623:22626,39624:22603,39625:22640,39626:27584,39627:22610,39628:22589,39629:22649,39630:22661,39631:22713,39632:22687,39633:22699,39634:22714,39635:22750,39636:22715,39637:22712,39638:22702,39639:22725,39640:22739,39641:22737,39642:22743,39643:22745,39644:22744,39645:22757,39646:22748,39647:22756,39648:22751,39649:22767,39650:22778,39651:22777,39652:22779,39653:22780,39654:22781,39655:22786,39656:22794,39657:22800,39658:22811,39659:26790,39660:22821,39661:22828,39662:22829,39663:22834,39664:22840,39665:22846,39666:31442,39667:22869,39668:22864,39669:22862,39670:22874,39671:22872,39672:22882,39673:22880,39674:22887,39675:22892,39676:22889,39744:22904,39745:22913,39746:22941,39747:20318,39748:20395,39749:22947,39750:22962,39751:22982,39752:23016,39753:23004,39754:22925,39755:23001,39756:23002,39757:23077,39758:23071,39759:23057,39760:23068,39761:23049,39762:23066,39763:23104,39764:23148,39765:23113,39766:23093,39767:23094,39768:23138,39769:23146,39770:23194,39771:23228,39772:23230,39773:23243,39774:23234,39775:23229,39776:23267,39777:23255,39778:23270,39779:23273,39780:23254,39781:23290,39782:23291,39783:23308,39784:23307,39785:23318,39786:23346,39787:23248,39788:23338,39789:23350,39790:23358,39791:23363,39792:23365,39793:23360,39794:23377,39795:23381,39796:23386,39797:23387,39798:23397,39799:23401,39800:23408,39801:23411,39802:23413,39803:23416,39804:25992,39805:23418,39806:23424,39808:23427,39809:23462,39810:23480,39811:23491,39812:23495,39813:23497,39814:23508,39815:23504,39816:23524,39817:23526,39818:23522,39819:23518,39820:23525,39821:23531,39822:23536,39823:23542,39824:23539,39825:23557,39826:23559,39827:23560,39828:23565,39829:23571,39830:23584,39831:23586,39832:23592,39833:23608,39834:23609,39835:23617,39836:23622,39837:23630,39838:23635,39839:23632,39840:23631,39841:23409,39842:23660,39843:23662,39844:20066,39845:23670,39846:23673,39847:23692,39848:23697,39849:23700,39850:22939,39851:23723,39852:23739,39853:23734,39854:23740,39855:23735,39856:23749,39857:23742,39858:23751,39859:23769,39860:23785,39861:23805,39862:23802,39863:23789,39864:23948,39865:23786,39866:23819,39867:23829,39868:23831,39869:23900,39870:23839,39871:23835,39872:23825,39873:23828,39874:23842,39875:23834,39876:23833,39877:23832,39878:23884,39879:23890,39880:23886,39881:23883,39882:23916,39883:23923,39884:23926,39885:23943,39886:23940,39887:23938,39888:23970,39889:23965,39890:23980,39891:23982,39892:23997,39893:23952,39894:23991,39895:23996,39896:24009,39897:24013,39898:24019,39899:24018,39900:24022,39901:24027,39902:24043,39903:24050,39904:24053,39905:24075,39906:24090,39907:24089,39908:24081,39909:24091,39910:24118,39911:24119,39912:24132,39913:24131,39914:24128,39915:24142,39916:24151,39917:24148,39918:24159,39919:24162,39920:24164,39921:24135,39922:24181,39923:24182,39924:24186,39925:40636,39926:24191,39927:24224,39928:24257,39929:24258,39930:24264,39931:24272,39932:24271,4e4:24278,40001:24291,40002:24285,40003:24282,40004:24283,40005:24290,40006:24289,40007:24296,40008:24297,40009:24300,40010:24305,40011:24307,40012:24304,40013:24308,40014:24312,40015:24318,40016:24323,40017:24329,40018:24413,40019:24412,40020:24331,40021:24337,40022:24342,40023:24361,40024:24365,40025:24376,40026:24385,40027:24392,40028:24396,40029:24398,40030:24367,40031:24401,40032:24406,40033:24407,40034:24409,40035:24417,40036:24429,40037:24435,40038:24439,40039:24451,40040:24450,40041:24447,40042:24458,40043:24456,40044:24465,40045:24455,40046:24478,40047:24473,40048:24472,40049:24480,40050:24488,40051:24493,40052:24508,40053:24534,40054:24571,40055:24548,40056:24568,40057:24561,40058:24541,40059:24755,40060:24575,40061:24609,40062:24672,40064:24601,40065:24592,40066:24617,40067:24590,40068:24625,40069:24603,40070:24597,40071:24619,40072:24614,40073:24591,40074:24634,40075:24666,40076:24641,40077:24682,40078:24695,40079:24671,40080:24650,40081:24646,40082:24653,40083:24675,40084:24643,40085:24676,40086:24642,40087:24684,40088:24683,40089:24665,40090:24705,40091:24717,40092:24807,40093:24707,40094:24730,40095:24708,40096:24731,40097:24726,40098:24727,40099:24722,40100:24743,40101:24715,40102:24801,40103:24760,40104:24800,40105:24787,40106:24756,40107:24560,40108:24765,40109:24774,40110:24757,40111:24792,40112:24909,40113:24853,40114:24838,40115:24822,40116:24823,40117:24832,40118:24820,40119:24826,40120:24835,40121:24865,40122:24827,40123:24817,40124:24845,40125:24846,40126:24903,40127:24894,40128:24872,40129:24871,40130:24906,40131:24895,40132:24892,40133:24876,40134:24884,40135:24893,40136:24898,40137:24900,40138:24947,40139:24951,40140:24920,40141:24921,40142:24922,40143:24939,40144:24948,40145:24943,40146:24933,40147:24945,40148:24927,40149:24925,40150:24915,40151:24949,40152:24985,40153:24982,40154:24967,40155:25004,40156:24980,40157:24986,40158:24970,40159:24977,40160:25003,40161:25006,40162:25036,40163:25034,40164:25033,40165:25079,40166:25032,40167:25027,40168:25030,40169:25018,40170:25035,40171:32633,40172:25037,40173:25062,40174:25059,40175:25078,40176:25082,40177:25076,40178:25087,40179:25085,40180:25084,40181:25086,40182:25088,40183:25096,40184:25097,40185:25101,40186:25100,40187:25108,40188:25115,40256:25118,40257:25121,40258:25130,40259:25134,40260:25136,40261:25138,40262:25139,40263:25153,40264:25166,40265:25182,40266:25187,40267:25179,40268:25184,40269:25192,40270:25212,40271:25218,40272:25225,40273:25214,40274:25234,40275:25235,40276:25238,40277:25300,40278:25219,40279:25236,40280:25303,40281:25297,40282:25275,40283:25295,40284:25343,40285:25286,40286:25812,40287:25288,40288:25308,40289:25292,40290:25290,40291:25282,40292:25287,40293:25243,40294:25289,40295:25356,40296:25326,40297:25329,40298:25383,40299:25346,40300:25352,40301:25327,40302:25333,40303:25424,40304:25406,40305:25421,40306:25628,40307:25423,40308:25494,40309:25486,40310:25472,40311:25515,40312:25462,40313:25507,40314:25487,40315:25481,40316:25503,40317:25525,40318:25451,40320:25449,40321:25534,40322:25577,40323:25536,40324:25542,40325:25571,40326:25545,40327:25554,40328:25590,40329:25540,40330:25622,40331:25652,40332:25606,40333:25619,40334:25638,40335:25654,40336:25885,40337:25623,40338:25640,40339:25615,40340:25703,40341:25711,40342:25718,40343:25678,40344:25898,40345:25749,40346:25747,40347:25765,40348:25769,40349:25736,40350:25788,40351:25818,40352:25810,40353:25797,40354:25799,40355:25787,40356:25816,40357:25794,40358:25841,40359:25831,40360:33289,40361:25824,40362:25825,40363:25260,40364:25827,40365:25839,40366:25900,40367:25846,40368:25844,40369:25842,40370:25850,40371:25856,40372:25853,40373:25880,40374:25884,40375:25861,40376:25892,40377:25891,40378:25899,40379:25908,40380:25909,40381:25911,40382:25910,40383:25912,40384:30027,40385:25928,40386:25942,40387:25941,40388:25933,40389:25944,40390:25950,40391:25949,40392:25970,40393:25976,40394:25986,40395:25987,40396:35722,40397:26011,40398:26015,40399:26027,40400:26039,40401:26051,40402:26054,40403:26049,40404:26052,40405:26060,40406:26066,40407:26075,40408:26073,40409:26080,40410:26081,40411:26097,40412:26482,40413:26122,40414:26115,40415:26107,40416:26483,40417:26165,40418:26166,40419:26164,40420:26140,40421:26191,40422:26180,40423:26185,40424:26177,40425:26206,40426:26205,40427:26212,40428:26215,40429:26216,40430:26207,40431:26210,40432:26224,40433:26243,40434:26248,40435:26254,40436:26249,40437:26244,40438:26264,40439:26269,40440:26305,40441:26297,40442:26313,40443:26302,40444:26300,40512:26308,40513:26296,40514:26326,40515:26330,40516:26336,40517:26175,40518:26342,40519:26345,40520:26352,40521:26357,40522:26359,40523:26383,40524:26390,40525:26398,40526:26406,40527:26407,40528:38712,40529:26414,40530:26431,40531:26422,40532:26433,40533:26424,40534:26423,40535:26438,40536:26462,40537:26464,40538:26457,40539:26467,40540:26468,40541:26505,40542:26480,40543:26537,40544:26492,40545:26474,40546:26508,40547:26507,40548:26534,40549:26529,40550:26501,40551:26551,40552:26607,40553:26548,40554:26604,40555:26547,40556:26601,40557:26552,40558:26596,40559:26590,40560:26589,40561:26594,40562:26606,40563:26553,40564:26574,40565:26566,40566:26599,40567:27292,40568:26654,40569:26694,40570:26665,40571:26688,40572:26701,40573:26674,40574:26702,40576:26803,40577:26667,40578:26713,40579:26723,40580:26743,40581:26751,40582:26783,40583:26767,40584:26797,40585:26772,40586:26781,40587:26779,40588:26755,40589:27310,40590:26809,40591:26740,40592:26805,40593:26784,40594:26810,40595:26895,40596:26765,40597:26750,40598:26881,40599:26826,40600:26888,40601:26840,40602:26914,40603:26918,40604:26849,40605:26892,40606:26829,40607:26836,40608:26855,40609:26837,40610:26934,40611:26898,40612:26884,40613:26839,40614:26851,40615:26917,40616:26873,40617:26848,40618:26863,40619:26920,40620:26922,40621:26906,40622:26915,40623:26913,40624:26822,40625:27001,40626:26999,40627:26972,40628:27e3,40629:26987,40630:26964,40631:27006,40632:26990,40633:26937,40634:26996,40635:26941,40636:26969,40637:26928,40638:26977,40639:26974,40640:26973,40641:27009,40642:26986,40643:27058,40644:27054,40645:27088,40646:27071,40647:27073,40648:27091,40649:27070,40650:27086,40651:23528,40652:27082,40653:27101,40654:27067,40655:27075,40656:27047,40657:27182,40658:27025,40659:27040,40660:27036,40661:27029,40662:27060,40663:27102,40664:27112,40665:27138,40666:27163,40667:27135,40668:27402,40669:27129,40670:27122,40671:27111,40672:27141,40673:27057,40674:27166,40675:27117,40676:27156,40677:27115,40678:27146,40679:27154,40680:27329,40681:27171,40682:27155,40683:27204,40684:27148,40685:27250,40686:27190,40687:27256,40688:27207,40689:27234,40690:27225,40691:27238,40692:27208,40693:27192,40694:27170,40695:27280,40696:27277,40697:27296,40698:27268,40699:27298,40700:27299,40768:27287,40769:34327,40770:27323,40771:27331,40772:27330,40773:27320,40774:27315,40775:27308,40776:27358,40777:27345,40778:27359,40779:27306,40780:27354,40781:27370,40782:27387,40783:27397,40784:34326,40785:27386,40786:27410,40787:27414,40788:39729,40789:27423,40790:27448,40791:27447,40792:30428,40793:27449,40794:39150,40795:27463,40796:27459,40797:27465,40798:27472,40799:27481,40800:27476,40801:27483,40802:27487,40803:27489,40804:27512,40805:27513,40806:27519,40807:27520,40808:27524,40809:27523,40810:27533,40811:27544,40812:27541,40813:27550,40814:27556,40815:27562,40816:27563,40817:27567,40818:27570,40819:27569,40820:27571,40821:27575,40822:27580,40823:27590,40824:27595,40825:27603,40826:27615,40827:27628,40828:27627,40829:27635,40830:27631,40832:40638,40833:27656,40834:27667,40835:27668,40836:27675,40837:27684,40838:27683,40839:27742,40840:27733,40841:27746,40842:27754,40843:27778,40844:27789,40845:27802,40846:27777,40847:27803,40848:27774,40849:27752,40850:27763,40851:27794,40852:27792,40853:27844,40854:27889,40855:27859,40856:27837,40857:27863,40858:27845,40859:27869,40860:27822,40861:27825,40862:27838,40863:27834,40864:27867,40865:27887,40866:27865,40867:27882,40868:27935,40869:34893,40870:27958,40871:27947,40872:27965,40873:27960,40874:27929,40875:27957,40876:27955,40877:27922,40878:27916,40879:28003,40880:28051,40881:28004,40882:27994,40883:28025,40884:27993,40885:28046,40886:28053,40887:28644,40888:28037,40889:28153,40890:28181,40891:28170,40892:28085,40893:28103,40894:28134,40895:28088,40896:28102,40897:28140,40898:28126,40899:28108,40900:28136,40901:28114,40902:28101,40903:28154,40904:28121,40905:28132,40906:28117,40907:28138,40908:28142,40909:28205,40910:28270,40911:28206,40912:28185,40913:28274,40914:28255,40915:28222,40916:28195,40917:28267,40918:28203,40919:28278,40920:28237,40921:28191,40922:28227,40923:28218,40924:28238,40925:28196,40926:28415,40927:28189,40928:28216,40929:28290,40930:28330,40931:28312,40932:28361,40933:28343,40934:28371,40935:28349,40936:28335,40937:28356,40938:28338,40939:28372,40940:28373,40941:28303,40942:28325,40943:28354,40944:28319,40945:28481,40946:28433,40947:28748,40948:28396,40949:28408,40950:28414,40951:28479,40952:28402,40953:28465,40954:28399,40955:28466,40956:28364,161:65377,162:65378,163:65379,164:65380,165:65381,166:65382,167:65383,168:65384,169:65385,170:65386,171:65387,172:65388,173:65389,174:65390,175:65391,176:65392,177:65393,178:65394,179:65395,180:65396,181:65397,182:65398,183:65399,184:65400,185:65401,186:65402,187:65403,188:65404,189:65405,190:65406,191:65407,192:65408,193:65409,194:65410,195:65411,196:65412,197:65413,198:65414,199:65415,200:65416,201:65417,202:65418,203:65419,204:65420,205:65421,206:65422,207:65423,208:65424,209:65425,210:65426,211:65427,212:65428,213:65429,214:65430,215:65431,216:65432,217:65433,218:65434,219:65435,220:65436,221:65437,222:65438,223:65439,57408:28478,57409:28435,57410:28407,57411:28550,57412:28538,57413:28536,57414:28545,57415:28544,57416:28527,57417:28507,57418:28659,57419:28525,57420:28546,57421:28540,57422:28504,57423:28558,57424:28561,57425:28610,57426:28518,57427:28595,57428:28579,57429:28577,57430:28580,57431:28601,57432:28614,57433:28586,57434:28639,57435:28629,57436:28652,57437:28628,57438:28632,57439:28657,57440:28654,57441:28635,57442:28681,57443:28683,57444:28666,57445:28689,57446:28673,57447:28687,57448:28670,57449:28699,57450:28698,57451:28532,57452:28701,57453:28696,57454:28703,57455:28720,57456:28734,57457:28722,57458:28753,57459:28771,57460:28825,57461:28818,57462:28847,57463:28913,57464:28844,57465:28856,57466:28851,57467:28846,57468:28895,57469:28875,57470:28893,57472:28889,57473:28937,57474:28925,57475:28956,57476:28953,57477:29029,57478:29013,57479:29064,57480:29030,57481:29026,57482:29004,57483:29014,57484:29036,57485:29071,57486:29179,57487:29060,57488:29077,57489:29096,57490:29100,57491:29143,57492:29113,57493:29118,57494:29138,57495:29129,57496:29140,57497:29134,57498:29152,57499:29164,57500:29159,57501:29173,57502:29180,57503:29177,57504:29183,57505:29197,57506:29200,57507:29211,57508:29224,57509:29229,57510:29228,57511:29232,57512:29234,57513:29243,57514:29244,57515:29247,57516:29248,57517:29254,57518:29259,57519:29272,57520:29300,57521:29310,57522:29314,57523:29313,57524:29319,57525:29330,57526:29334,57527:29346,57528:29351,57529:29369,57530:29362,57531:29379,57532:29382,57533:29380,57534:29390,57535:29394,57536:29410,57537:29408,57538:29409,57539:29433,57540:29431,57541:20495,57542:29463,57543:29450,57544:29468,57545:29462,57546:29469,57547:29492,57548:29487,57549:29481,57550:29477,57551:29502,57552:29518,57553:29519,57554:40664,57555:29527,57556:29546,57557:29544,57558:29552,57559:29560,57560:29557,57561:29563,57562:29562,57563:29640,57564:29619,57565:29646,57566:29627,57567:29632,57568:29669,57569:29678,57570:29662,57571:29858,57572:29701,57573:29807,57574:29733,57575:29688,57576:29746,57577:29754,57578:29781,57579:29759,57580:29791,57581:29785,57582:29761,57583:29788,57584:29801,57585:29808,57586:29795,57587:29802,57588:29814,57589:29822,57590:29835,57591:29854,57592:29863,57593:29898,57594:29903,57595:29908,57596:29681,57664:29920,57665:29923,57666:29927,57667:29929,57668:29934,57669:29938,57670:29936,57671:29937,57672:29944,57673:29943,57674:29956,57675:29955,57676:29957,57677:29964,57678:29966,57679:29965,57680:29973,57681:29971,57682:29982,57683:29990,57684:29996,57685:30012,57686:30020,57687:30029,57688:30026,57689:30025,57690:30043,57691:30022,57692:30042,57693:30057,57694:30052,57695:30055,57696:30059,57697:30061,57698:30072,57699:30070,57700:30086,57701:30087,57702:30068,57703:30090,57704:30089,57705:30082,57706:30100,57707:30106,57708:30109,57709:30117,57710:30115,57711:30146,57712:30131,57713:30147,57714:30133,57715:30141,57716:30136,57717:30140,57718:30129,57719:30157,57720:30154,57721:30162,57722:30169,57723:30179,57724:30174,57725:30206,57726:30207,57728:30204,57729:30209,57730:30192,57731:30202,57732:30194,57733:30195,57734:30219,57735:30221,57736:30217,57737:30239,57738:30247,57739:30240,57740:30241,57741:30242,57742:30244,57743:30260,57744:30256,57745:30267,57746:30279,57747:30280,57748:30278,57749:30300,57750:30296,57751:30305,57752:30306,57753:30312,57754:30313,57755:30314,57756:30311,57757:30316,57758:30320,57759:30322,57760:30326,57761:30328,57762:30332,57763:30336,57764:30339,57765:30344,57766:30347,57767:30350,57768:30358,57769:30355,57770:30361,57771:30362,57772:30384,57773:30388,57774:30392,57775:30393,57776:30394,57777:30402,57778:30413,57779:30422,57780:30418,57781:30430,57782:30433,57783:30437,57784:30439,57785:30442,57786:34351,57787:30459,57788:30472,57789:30471,57790:30468,57791:30505,57792:30500,57793:30494,57794:30501,57795:30502,57796:30491,57797:30519,57798:30520,57799:30535,57800:30554,57801:30568,57802:30571,57803:30555,57804:30565,57805:30591,57806:30590,57807:30585,57808:30606,57809:30603,57810:30609,57811:30624,57812:30622,57813:30640,57814:30646,57815:30649,57816:30655,57817:30652,57818:30653,57819:30651,57820:30663,57821:30669,57822:30679,57823:30682,57824:30684,57825:30691,57826:30702,57827:30716,57828:30732,57829:30738,57830:31014,57831:30752,57832:31018,57833:30789,57834:30862,57835:30836,57836:30854,57837:30844,57838:30874,57839:30860,57840:30883,57841:30901,57842:30890,57843:30895,57844:30929,57845:30918,57846:30923,57847:30932,57848:30910,57849:30908,57850:30917,57851:30922,57852:30956,57920:30951,57921:30938,57922:30973,57923:30964,57924:30983,57925:30994,57926:30993,57927:31001,57928:31020,57929:31019,57930:31040,57931:31072,57932:31063,57933:31071,57934:31066,57935:31061,57936:31059,57937:31098,57938:31103,57939:31114,57940:31133,57941:31143,57942:40779,57943:31146,57944:31150,57945:31155,57946:31161,57947:31162,57948:31177,57949:31189,57950:31207,57951:31212,57952:31201,57953:31203,57954:31240,57955:31245,57956:31256,57957:31257,57958:31264,57959:31263,57960:31104,57961:31281,57962:31291,57963:31294,57964:31287,57965:31299,57966:31319,57967:31305,57968:31329,57969:31330,57970:31337,57971:40861,57972:31344,57973:31353,57974:31357,57975:31368,57976:31383,57977:31381,57978:31384,57979:31382,57980:31401,57981:31432,57982:31408,57984:31414,57985:31429,57986:31428,57987:31423,57988:36995,57989:31431,57990:31434,57991:31437,57992:31439,57993:31445,57994:31443,57995:31449,57996:31450,57997:31453,57998:31457,57999:31458,58e3:31462,58001:31469,58002:31472,58003:31490,58004:31503,58005:31498,58006:31494,58007:31539,58008:31512,58009:31513,58010:31518,58011:31541,58012:31528,58013:31542,58014:31568,58015:31610,58016:31492,58017:31565,58018:31499,58019:31564,58020:31557,58021:31605,58022:31589,58023:31604,58024:31591,58025:31600,58026:31601,58027:31596,58028:31598,58029:31645,58030:31640,58031:31647,58032:31629,58033:31644,58034:31642,58035:31627,58036:31634,58037:31631,58038:31581,58039:31641,58040:31691,58041:31681,58042:31692,58043:31695,58044:31668,58045:31686,58046:31709,58047:31721,58048:31761,58049:31764,58050:31718,58051:31717,58052:31840,58053:31744,58054:31751,58055:31763,58056:31731,58057:31735,58058:31767,58059:31757,58060:31734,58061:31779,58062:31783,58063:31786,58064:31775,58065:31799,58066:31787,58067:31805,58068:31820,58069:31811,58070:31828,58071:31823,58072:31808,58073:31824,58074:31832,58075:31839,58076:31844,58077:31830,58078:31845,58079:31852,58080:31861,58081:31875,58082:31888,58083:31908,58084:31917,58085:31906,58086:31915,58087:31905,58088:31912,58089:31923,58090:31922,58091:31921,58092:31918,58093:31929,58094:31933,58095:31936,58096:31941,58097:31938,58098:31960,58099:31954,58100:31964,58101:31970,58102:39739,58103:31983,58104:31986,58105:31988,58106:31990,58107:31994,58108:32006,58176:32002,58177:32028,58178:32021,58179:32010,58180:32069,58181:32075,58182:32046,58183:32050,58184:32063,58185:32053,58186:32070,58187:32115,58188:32086,58189:32078,58190:32114,58191:32104,58192:32110,58193:32079,58194:32099,58195:32147,58196:32137,58197:32091,58198:32143,58199:32125,58200:32155,58201:32186,58202:32174,58203:32163,58204:32181,58205:32199,58206:32189,58207:32171,58208:32317,58209:32162,58210:32175,58211:32220,58212:32184,58213:32159,58214:32176,58215:32216,58216:32221,58217:32228,58218:32222,58219:32251,58220:32242,58221:32225,58222:32261,58223:32266,58224:32291,58225:32289,58226:32274,58227:32305,58228:32287,58229:32265,58230:32267,58231:32290,58232:32326,58233:32358,58234:32315,58235:32309,58236:32313,58237:32323,58238:32311,58240:32306,58241:32314,58242:32359,58243:32349,58244:32342,58245:32350,58246:32345,58247:32346,58248:32377,58249:32362,58250:32361,58251:32380,58252:32379,58253:32387,58254:32213,58255:32381,58256:36782,58257:32383,58258:32392,58259:32393,58260:32396,58261:32402,58262:32400,58263:32403,58264:32404,58265:32406,58266:32398,58267:32411,58268:32412,58269:32568,58270:32570,58271:32581,58272:32588,58273:32589,58274:32590,58275:32592,58276:32593,58277:32597,58278:32596,58279:32600,58280:32607,58281:32608,58282:32616,58283:32617,58284:32615,58285:32632,58286:32642,58287:32646,58288:32643,58289:32648,58290:32647,58291:32652,58292:32660,58293:32670,58294:32669,58295:32666,58296:32675,58297:32687,58298:32690,58299:32697,58300:32686,58301:32694,58302:32696,58303:35697,58304:32709,58305:32710,58306:32714,58307:32725,58308:32724,58309:32737,58310:32742,58311:32745,58312:32755,58313:32761,58314:39132,58315:32774,58316:32772,58317:32779,58318:32786,58319:32792,58320:32793,58321:32796,58322:32801,58323:32808,58324:32831,58325:32827,58326:32842,58327:32838,58328:32850,58329:32856,58330:32858,58331:32863,58332:32866,58333:32872,58334:32883,58335:32882,58336:32880,58337:32886,58338:32889,58339:32893,58340:32895,58341:32900,58342:32902,58343:32901,58344:32923,58345:32915,58346:32922,58347:32941,58348:20880,58349:32940,58350:32987,58351:32997,58352:32985,58353:32989,58354:32964,58355:32986,58356:32982,58357:33033,58358:33007,58359:33009,58360:33051,58361:33065,58362:33059,58363:33071,58364:33099,58432:38539,58433:33094,58434:33086,58435:33107,58436:33105,58437:33020,58438:33137,58439:33134,58440:33125,58441:33126,58442:33140,58443:33155,58444:33160,58445:33162,58446:33152,58447:33154,58448:33184,58449:33173,58450:33188,58451:33187,58452:33119,58453:33171,58454:33193,58455:33200,58456:33205,58457:33214,58458:33208,58459:33213,58460:33216,58461:33218,58462:33210,58463:33225,58464:33229,58465:33233,58466:33241,58467:33240,58468:33224,58469:33242,58470:33247,58471:33248,58472:33255,58473:33274,58474:33275,58475:33278,58476:33281,58477:33282,58478:33285,58479:33287,58480:33290,58481:33293,58482:33296,58483:33302,58484:33321,58485:33323,58486:33336,58487:33331,58488:33344,58489:33369,58490:33368,58491:33373,58492:33370,58493:33375,58494:33380,58496:33378,58497:33384,58498:33386,58499:33387,58500:33326,58501:33393,58502:33399,58503:33400,58504:33406,58505:33421,58506:33426,58507:33451,58508:33439,58509:33467,58510:33452,58511:33505,58512:33507,58513:33503,58514:33490,58515:33524,58516:33523,58517:33530,58518:33683,58519:33539,58520:33531,58521:33529,58522:33502,58523:33542,58524:33500,58525:33545,58526:33497,58527:33589,58528:33588,58529:33558,58530:33586,58531:33585,58532:33600,58533:33593,58534:33616,58535:33605,58536:33583,58537:33579,58538:33559,58539:33560,58540:33669,58541:33690,58542:33706,58543:33695,58544:33698,58545:33686,58546:33571,58547:33678,58548:33671,58549:33674,58550:33660,58551:33717,58552:33651,58553:33653,58554:33696,58555:33673,58556:33704,58557:33780,58558:33811,58559:33771,58560:33742,58561:33789,58562:33795,58563:33752,58564:33803,58565:33729,58566:33783,58567:33799,58568:33760,58569:33778,58570:33805,58571:33826,58572:33824,58573:33725,58574:33848,58575:34054,58576:33787,58577:33901,58578:33834,58579:33852,58580:34138,58581:33924,58582:33911,58583:33899,58584:33965,58585:33902,58586:33922,58587:33897,58588:33862,58589:33836,58590:33903,58591:33913,58592:33845,58593:33994,58594:33890,58595:33977,58596:33983,58597:33951,58598:34009,58599:33997,58600:33979,58601:34010,58602:34e3,58603:33985,58604:33990,58605:34006,58606:33953,58607:34081,58608:34047,58609:34036,58610:34071,58611:34072,58612:34092,58613:34079,58614:34069,58615:34068,58616:34044,58617:34112,58618:34147,58619:34136,58620:34120,58688:34113,58689:34306,58690:34123,58691:34133,58692:34176,58693:34212,58694:34184,58695:34193,58696:34186,58697:34216,58698:34157,58699:34196,58700:34203,58701:34282,58702:34183,58703:34204,58704:34167,58705:34174,58706:34192,58707:34249,58708:34234,58709:34255,58710:34233,58711:34256,58712:34261,58713:34269,58714:34277,58715:34268,58716:34297,58717:34314,58718:34323,58719:34315,58720:34302,58721:34298,58722:34310,58723:34338,58724:34330,58725:34352,58726:34367,58727:34381,58728:20053,58729:34388,58730:34399,58731:34407,58732:34417,58733:34451,58734:34467,58735:34473,58736:34474,58737:34443,58738:34444,58739:34486,58740:34479,58741:34500,58742:34502,58743:34480,58744:34505,58745:34851,58746:34475,58747:34516,58748:34526,58749:34537,58750:34540,58752:34527,58753:34523,58754:34543,58755:34578,58756:34566,58757:34568,58758:34560,58759:34563,58760:34555,58761:34577,58762:34569,58763:34573,58764:34553,58765:34570,58766:34612,58767:34623,58768:34615,58769:34619,58770:34597,58771:34601,58772:34586,58773:34656,58774:34655,58775:34680,58776:34636,58777:34638,58778:34676,58779:34647,58780:34664,58781:34670,58782:34649,58783:34643,58784:34659,58785:34666,58786:34821,58787:34722,58788:34719,58789:34690,58790:34735,58791:34763,58792:34749,58793:34752,58794:34768,58795:38614,58796:34731,58797:34756,58798:34739,58799:34759,58800:34758,58801:34747,58802:34799,58803:34802,58804:34784,58805:34831,58806:34829,58807:34814,58808:34806,58809:34807,58810:34830,58811:34770,58812:34833,58813:34838,58814:34837,58815:34850,58816:34849,58817:34865,58818:34870,58819:34873,58820:34855,58821:34875,58822:34884,58823:34882,58824:34898,58825:34905,58826:34910,58827:34914,58828:34923,58829:34945,58830:34942,58831:34974,58832:34933,58833:34941,58834:34997,58835:34930,58836:34946,58837:34967,58838:34962,58839:34990,58840:34969,58841:34978,58842:34957,58843:34980,58844:34992,58845:35007,58846:34993,58847:35011,58848:35012,58849:35028,58850:35032,58851:35033,58852:35037,58853:35065,58854:35074,58855:35068,58856:35060,58857:35048,58858:35058,58859:35076,58860:35084,58861:35082,58862:35091,58863:35139,58864:35102,58865:35109,58866:35114,58867:35115,58868:35137,58869:35140,58870:35131,58871:35126,58872:35128,58873:35148,58874:35101,58875:35168,58876:35166,58944:35174,58945:35172,58946:35181,58947:35178,58948:35183,58949:35188,58950:35191,58951:35198,58952:35203,58953:35208,58954:35210,58955:35219,58956:35224,58957:35233,58958:35241,58959:35238,58960:35244,58961:35247,58962:35250,58963:35258,58964:35261,58965:35263,58966:35264,58967:35290,58968:35292,58969:35293,58970:35303,58971:35316,58972:35320,58973:35331,58974:35350,58975:35344,58976:35340,58977:35355,58978:35357,58979:35365,58980:35382,58981:35393,58982:35419,58983:35410,58984:35398,58985:35400,58986:35452,58987:35437,58988:35436,58989:35426,58990:35461,58991:35458,58992:35460,58993:35496,58994:35489,58995:35473,58996:35493,58997:35494,58998:35482,58999:35491,59e3:35524,59001:35533,59002:35522,59003:35546,59004:35563,59005:35571,59006:35559,59008:35556,59009:35569,59010:35604,59011:35552,59012:35554,59013:35575,59014:35550,59015:35547,59016:35596,59017:35591,59018:35610,59019:35553,59020:35606,59021:35600,59022:35607,59023:35616,59024:35635,59025:38827,59026:35622,59027:35627,59028:35646,59029:35624,59030:35649,59031:35660,59032:35663,59033:35662,59034:35657,59035:35670,59036:35675,59037:35674,59038:35691,59039:35679,59040:35692,59041:35695,59042:35700,59043:35709,59044:35712,59045:35724,59046:35726,59047:35730,59048:35731,59049:35734,59050:35737,59051:35738,59052:35898,59053:35905,59054:35903,59055:35912,59056:35916,59057:35918,59058:35920,59059:35925,59060:35938,59061:35948,59062:35960,59063:35962,59064:35970,59065:35977,59066:35973,59067:35978,59068:35981,59069:35982,59070:35988,59071:35964,59072:35992,59073:25117,59074:36013,59075:36010,59076:36029,59077:36018,59078:36019,59079:36014,59080:36022,59081:36040,59082:36033,59083:36068,59084:36067,59085:36058,59086:36093,59087:36090,59088:36091,59089:36100,59090:36101,59091:36106,59092:36103,59093:36111,59094:36109,59095:36112,59096:40782,59097:36115,59098:36045,59099:36116,59100:36118,59101:36199,59102:36205,59103:36209,59104:36211,59105:36225,59106:36249,59107:36290,59108:36286,59109:36282,59110:36303,59111:36314,59112:36310,59113:36300,59114:36315,59115:36299,59116:36330,59117:36331,59118:36319,59119:36323,59120:36348,59121:36360,59122:36361,59123:36351,59124:36381,59125:36382,59126:36368,59127:36383,59128:36418,59129:36405,59130:36400,59131:36404,59132:36426,59200:36423,59201:36425,59202:36428,59203:36432,59204:36424,59205:36441,59206:36452,59207:36448,59208:36394,59209:36451,59210:36437,59211:36470,59212:36466,59213:36476,59214:36481,59215:36487,59216:36485,59217:36484,59218:36491,59219:36490,59220:36499,59221:36497,59222:36500,59223:36505,59224:36522,59225:36513,59226:36524,59227:36528,59228:36550,59229:36529,59230:36542,59231:36549,59232:36552,59233:36555,59234:36571,59235:36579,59236:36604,59237:36603,59238:36587,59239:36606,59240:36618,59241:36613,59242:36629,59243:36626,59244:36633,59245:36627,59246:36636,59247:36639,59248:36635,59249:36620,59250:36646,59251:36659,59252:36667,59253:36665,59254:36677,59255:36674,59256:36670,59257:36684,59258:36681,59259:36678,59260:36686,59261:36695,59262:36700,59264:36706,59265:36707,59266:36708,59267:36764,59268:36767,59269:36771,59270:36781,59271:36783,59272:36791,59273:36826,59274:36837,59275:36834,59276:36842,59277:36847,59278:36999,59279:36852,59280:36869,59281:36857,59282:36858,59283:36881,59284:36885,59285:36897,59286:36877,59287:36894,59288:36886,59289:36875,59290:36903,59291:36918,59292:36917,59293:36921,59294:36856,59295:36943,59296:36944,59297:36945,59298:36946,59299:36878,59300:36937,59301:36926,59302:36950,59303:36952,59304:36958,59305:36968,59306:36975,59307:36982,59308:38568,59309:36978,59310:36994,59311:36989,59312:36993,59313:36992,59314:37002,59315:37001,59316:37007,59317:37032,59318:37039,59319:37041,59320:37045,59321:37090,59322:37092,59323:25160,59324:37083,59325:37122,59326:37138,59327:37145,59328:37170,59329:37168,59330:37194,59331:37206,59332:37208,59333:37219,59334:37221,59335:37225,59336:37235,59337:37234,59338:37259,59339:37257,59340:37250,59341:37282,59342:37291,59343:37295,59344:37290,59345:37301,59346:37300,59347:37306,59348:37312,59349:37313,59350:37321,59351:37323,59352:37328,59353:37334,59354:37343,59355:37345,59356:37339,59357:37372,59358:37365,59359:37366,59360:37406,59361:37375,59362:37396,59363:37420,59364:37397,59365:37393,59366:37470,59367:37463,59368:37445,59369:37449,59370:37476,59371:37448,59372:37525,59373:37439,59374:37451,59375:37456,59376:37532,59377:37526,59378:37523,59379:37531,59380:37466,59381:37583,59382:37561,59383:37559,59384:37609,59385:37647,59386:37626,59387:37700,59388:37678,59456:37657,59457:37666,59458:37658,59459:37667,59460:37690,59461:37685,59462:37691,59463:37724,59464:37728,59465:37756,59466:37742,59467:37718,59468:37808,59469:37804,59470:37805,59471:37780,59472:37817,59473:37846,59474:37847,59475:37864,59476:37861,59477:37848,59478:37827,59479:37853,59480:37840,59481:37832,59482:37860,59483:37914,59484:37908,59485:37907,59486:37891,59487:37895,59488:37904,59489:37942,59490:37931,59491:37941,59492:37921,59493:37946,59494:37953,59495:37970,59496:37956,59497:37979,59498:37984,59499:37986,59500:37982,59501:37994,59502:37417,59503:38e3,59504:38005,59505:38007,59506:38013,59507:37978,59508:38012,59509:38014,59510:38017,59511:38015,59512:38274,59513:38279,59514:38282,59515:38292,59516:38294,59517:38296,59518:38297,59520:38304,59521:38312,59522:38311,59523:38317,59524:38332,59525:38331,59526:38329,59527:38334,59528:38346,59529:28662,59530:38339,59531:38349,59532:38348,59533:38357,59534:38356,59535:38358,59536:38364,59537:38369,59538:38373,59539:38370,59540:38433,59541:38440,59542:38446,59543:38447,59544:38466,59545:38476,59546:38479,59547:38475,59548:38519,59549:38492,59550:38494,59551:38493,59552:38495,59553:38502,59554:38514,59555:38508,59556:38541,59557:38552,59558:38549,59559:38551,59560:38570,59561:38567,59562:38577,59563:38578,59564:38576,59565:38580,59566:38582,59567:38584,59568:38585,59569:38606,59570:38603,59571:38601,59572:38605,59573:35149,59574:38620,59575:38669,59576:38613,59577:38649,59578:38660,59579:38662,59580:38664,59581:38675,59582:38670,59583:38673,59584:38671,59585:38678,59586:38681,59587:38692,59588:38698,59589:38704,59590:38713,59591:38717,59592:38718,59593:38724,59594:38726,59595:38728,59596:38722,59597:38729,59598:38748,59599:38752,59600:38756,59601:38758,59602:38760,59603:21202,59604:38763,59605:38769,59606:38777,59607:38789,59608:38780,59609:38785,59610:38778,59611:38790,59612:38795,59613:38799,59614:38800,59615:38812,59616:38824,59617:38822,59618:38819,59619:38835,59620:38836,59621:38851,59622:38854,59623:38856,59624:38859,59625:38876,59626:38893,59627:40783,59628:38898,59629:31455,59630:38902,59631:38901,59632:38927,59633:38924,59634:38968,59635:38948,59636:38945,59637:38967,59638:38973,59639:38982,59640:38991,59641:38987,59642:39019,59643:39023,59644:39024,59712:39025,59713:39028,59714:39027,59715:39082,59716:39087,59717:39089,59718:39094,59719:39108,59720:39107,59721:39110,59722:39145,59723:39147,59724:39171,59725:39177,59726:39186,59727:39188,59728:39192,59729:39201,59730:39197,59731:39198,59732:39204,59733:39200,59734:39212,59735:39214,59736:39229,59737:39230,59738:39234,59739:39241,59740:39237,59741:39248,59742:39243,59743:39249,59744:39250,59745:39244,59746:39253,59747:39319,59748:39320,59749:39333,59750:39341,59751:39342,59752:39356,59753:39391,59754:39387,59755:39389,59756:39384,59757:39377,59758:39405,59759:39406,59760:39409,59761:39410,59762:39419,59763:39416,59764:39425,59765:39439,59766:39429,59767:39394,59768:39449,59769:39467,59770:39479,59771:39493,59772:39490,59773:39488,59774:39491,59776:39486,59777:39509,59778:39501,59779:39515,59780:39511,59781:39519,59782:39522,59783:39525,59784:39524,59785:39529,59786:39531,59787:39530,59788:39597,59789:39600,59790:39612,59791:39616,59792:39631,59793:39633,59794:39635,59795:39636,59796:39646,59797:39647,59798:39650,59799:39651,59800:39654,59801:39663,59802:39659,59803:39662,59804:39668,59805:39665,59806:39671,59807:39675,59808:39686,59809:39704,59810:39706,59811:39711,59812:39714,59813:39715,59814:39717,59815:39719,59816:39720,59817:39721,59818:39722,59819:39726,59820:39727,59821:39730,59822:39748,59823:39747,59824:39759,59825:39757,59826:39758,59827:39761,59828:39768,59829:39796,59830:39827,59831:39811,59832:39825,59833:39830,59834:39831,59835:39839,59836:39840,59837:39848,59838:39860,59839:39872,59840:39882,59841:39865,59842:39878,59843:39887,59844:39889,59845:39890,59846:39907,59847:39906,59848:39908,59849:39892,59850:39905,59851:39994,59852:39922,59853:39921,59854:39920,59855:39957,59856:39956,59857:39945,59858:39955,59859:39948,59860:39942,59861:39944,59862:39954,59863:39946,59864:39940,59865:39982,59866:39963,59867:39973,59868:39972,59869:39969,59870:39984,59871:40007,59872:39986,59873:40006,59874:39998,59875:40026,59876:40032,59877:40039,59878:40054,59879:40056,59880:40167,59881:40172,59882:40176,59883:40201,59884:40200,59885:40171,59886:40195,59887:40198,59888:40234,59889:40230,59890:40367,59891:40227,59892:40223,59893:40260,59894:40213,59895:40210,59896:40257,59897:40255,59898:40254,59899:40262,59900:40264,59968:40285,59969:40286,59970:40292,59971:40273,59972:40272,59973:40281,59974:40306,59975:40329,59976:40327,59977:40363,59978:40303,59979:40314,59980:40346,59981:40356,59982:40361,59983:40370,59984:40388,59985:40385,59986:40379,59987:40376,59988:40378,59989:40390,59990:40399,59991:40386,59992:40409,59993:40403,59994:40440,59995:40422,59996:40429,59997:40431,59998:40445,59999:40474,6e4:40475,60001:40478,60002:40565,60003:40569,60004:40573,60005:40577,60006:40584,60007:40587,60008:40588,60009:40594,60010:40597,60011:40593,60012:40605,60013:40613,60014:40617,60015:40632,60016:40618,60017:40621,60018:38753,60019:40652,60020:40654,60021:40655,60022:40656,60023:40660,60024:40668,60025:40670,60026:40669,60027:40672,60028:40677,60029:40680,60030:40687,60032:40692,60033:40694,60034:40695,60035:40697,60036:40699,60037:40700,60038:40701,60039:40711,60040:40712,60041:30391,60042:40725,60043:40737,60044:40748,60045:40766,60046:40778,60047:40786,60048:40788,60049:40803,60050:40799,60051:40800,60052:40801,60053:40806,60054:40807,60055:40812,60056:40810,60057:40823,60058:40818,60059:40822,60060:40853,60061:40860,60062:40864,60063:22575,60064:27079,60065:36953,60066:29796,60067:20956,60068:29081}}),(function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(1),i=o(2);function s(u,p,m,g){var y;p.degree()<m.degree()&&(y=[m,p],p=y[0],m=y[1]);for(var b=p,v=m,E=u.zero,A=u.one;v.degree()>=g/2;){var C=b,I=E;if(b=v,E=A,b.isZero())return null;v=C;for(var N=u.zero,_=b.getCoefficient(b.degree()),O=u.inverse(_);v.degree()>=b.degree()&&!v.isZero();){var F=v.degree()-b.degree(),J=u.multiply(v.getCoefficient(v.degree()),O);N=N.addOrSubtract(u.buildMonomial(F,J)),v=v.addOrSubtract(b.multiplyByMonomial(F,J))}if(A=N.multiplyPoly(E).addOrSubtract(I),v.degree()>=b.degree())return null}var G=A.getCoefficient(0);if(G===0)return null;var te=u.inverse(G);return[A.multiply(te),v.multiply(te)]}function a(u,p){var m=p.degree();if(m===1)return[p.getCoefficient(1)];for(var g=new Array(m),y=0,b=1;b<u.size&&y<m;b++)p.evaluateAt(b)===0&&(g[y]=u.inverse(b),y++);return y!==m?null:g}function l(u,p,m){for(var g=m.length,y=new Array(g),b=0;b<g;b++){for(var v=u.inverse(m[b]),E=1,A=0;A<g;A++)b!==A&&(E=u.multiply(E,n.addOrSubtractGF(1,u.multiply(m[A],v))));y[b]=u.multiply(p.evaluateAt(v),u.inverse(E)),u.generatorBase!==0&&(y[b]=u.multiply(y[b],v))}return y}function c(u,p){var m=new Uint8ClampedArray(u.length);m.set(u);for(var g=new n.default(285,256,0),y=new i.default(g,m),b=new Uint8ClampedArray(p),v=!1,E=0;E<p;E++){var A=y.evaluateAt(g.exp(E+g.generatorBase));b[b.length-1-E]=A,A!==0&&(v=!0)}if(!v)return m;var C=new i.default(g,b),I=s(g,g.buildMonomial(p,1),C,p);if(I===null)return null;var N=a(g,I[0]);if(N==null)return null;for(var _=l(g,I[1],N),O=0;O<N.length;O++){var F=m.length-1-g.log(N[O]);if(F<0)return null;m[F]=n.addOrSubtractGF(m[F],_[O])}return m}t.decode=c}),(function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VERSIONS=[{infoBits:null,versionNumber:1,alignmentPatternCenters:[],errorCorrectionLevels:[{ecCodewordsPerBlock:7,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:13,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:13}]},{ecCodewordsPerBlock:17,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:9}]}]},{infoBits:null,versionNumber:2,alignmentPatternCenters:[6,18],errorCorrectionLevels:[{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:34}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:28}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]}]},{infoBits:null,versionNumber:3,alignmentPatternCenters:[6,22],errorCorrectionLevels:[{ecCodewordsPerBlock:15,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:55}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:13}]}]},{infoBits:null,versionNumber:4,alignmentPatternCenters:[6,26],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:80}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:32}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:9}]}]},{infoBits:null,versionNumber:5,alignmentPatternCenters:[6,30],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:43}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:11},{numBlocks:2,dataCodewordsPerBlock:12}]}]},{infoBits:null,versionNumber:6,alignmentPatternCenters:[6,34],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:27}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:31892,versionNumber:7,alignmentPatternCenters:[6,22,38],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:78}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:31}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:13},{numBlocks:1,dataCodewordsPerBlock:14}]}]},{infoBits:34236,versionNumber:8,alignmentPatternCenters:[6,24,42],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:97}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:38},{numBlocks:2,dataCodewordsPerBlock:39}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:18},{numBlocks:2,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:14},{numBlocks:2,dataCodewordsPerBlock:15}]}]},{infoBits:39577,versionNumber:9,alignmentPatternCenters:[6,26,46],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:12},{numBlocks:4,dataCodewordsPerBlock:13}]}]},{infoBits:42195,versionNumber:10,alignmentPatternCenters:[6,28,50],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68},{numBlocks:2,dataCodewordsPerBlock:69}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:43},{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]}]},{infoBits:48118,versionNumber:11,alignmentPatternCenters:[6,30,54],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:81}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:50},{numBlocks:4,dataCodewordsPerBlock:51}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:22},{numBlocks:4,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:12},{numBlocks:8,dataCodewordsPerBlock:13}]}]},{infoBits:51042,versionNumber:12,alignmentPatternCenters:[6,32,58],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:92},{numBlocks:2,dataCodewordsPerBlock:93}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:20},{numBlocks:6,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:55367,versionNumber:13,alignmentPatternCenters:[6,34,62],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:37},{numBlocks:1,dataCodewordsPerBlock:38}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:20},{numBlocks:4,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:11},{numBlocks:4,dataCodewordsPerBlock:12}]}]},{infoBits:58893,versionNumber:14,alignmentPatternCenters:[6,26,46,66],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:40},{numBlocks:5,dataCodewordsPerBlock:41}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:16},{numBlocks:5,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:5,dataCodewordsPerBlock:13}]}]},{infoBits:63784,versionNumber:15,alignmentPatternCenters:[6,26,48,70],errorCorrectionLevels:[{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:87},{numBlocks:1,dataCodewordsPerBlock:88}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:41},{numBlocks:5,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:7,dataCodewordsPerBlock:13}]}]},{infoBits:68472,versionNumber:16,alignmentPatternCenters:[6,26,50,74],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:98},{numBlocks:1,dataCodewordsPerBlock:99}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:70749,versionNumber:17,alignmentPatternCenters:[6,30,54,78],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:1,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22},{numBlocks:15,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:17,dataCodewordsPerBlock:15}]}]},{infoBits:76311,versionNumber:18,alignmentPatternCenters:[6,30,56,82],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:120},{numBlocks:1,dataCodewordsPerBlock:121}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:43},{numBlocks:4,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:1,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:19,dataCodewordsPerBlock:15}]}]},{infoBits:79154,versionNumber:19,alignmentPatternCenters:[6,30,58,86],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:113},{numBlocks:4,dataCodewordsPerBlock:114}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:44},{numBlocks:11,dataCodewordsPerBlock:45}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:21},{numBlocks:4,dataCodewordsPerBlock:22}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:13},{numBlocks:16,dataCodewordsPerBlock:14}]}]},{infoBits:84390,versionNumber:20,alignmentPatternCenters:[6,34,62,90],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:41},{numBlocks:13,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:5,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:15},{numBlocks:10,dataCodewordsPerBlock:16}]}]},{infoBits:87683,versionNumber:21,alignmentPatternCenters:[6,28,50,72,94],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:116},{numBlocks:4,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:16},{numBlocks:6,dataCodewordsPerBlock:17}]}]},{infoBits:92361,versionNumber:22,alignmentPatternCenters:[6,26,50,74,98],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:111},{numBlocks:7,dataCodewordsPerBlock:112}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:13}]}]},{infoBits:96236,versionNumber:23,alignmentPatternCenters:[6,30,54,74,102],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:121},{numBlocks:5,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:47},{numBlocks:14,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:16,dataCodewordsPerBlock:15},{numBlocks:14,dataCodewordsPerBlock:16}]}]},{infoBits:102084,versionNumber:24,alignmentPatternCenters:[6,28,54,80,106],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:45},{numBlocks:14,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:30,dataCodewordsPerBlock:16},{numBlocks:2,dataCodewordsPerBlock:17}]}]},{infoBits:102881,versionNumber:25,alignmentPatternCenters:[6,32,58,84,110],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:106},{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:47},{numBlocks:13,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:110507,versionNumber:26,alignmentPatternCenters:[6,30,58,86,114],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:114},{numBlocks:2,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:46},{numBlocks:4,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:28,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:33,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]}]},{infoBits:110734,versionNumber:27,alignmentPatternCenters:[6,34,62,90,118],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:23},{numBlocks:26,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:117786,versionNumber:28,alignmentPatternCenters:[6,26,50,74,98,122],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:117},{numBlocks:10,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:45},{numBlocks:23,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:24},{numBlocks:31,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:31,dataCodewordsPerBlock:16}]}]},{infoBits:119615,versionNumber:29,alignmentPatternCenters:[6,30,54,78,102,126],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:116},{numBlocks:7,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:21,dataCodewordsPerBlock:45},{numBlocks:7,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:23},{numBlocks:37,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:26,dataCodewordsPerBlock:16}]}]},{infoBits:126325,versionNumber:30,alignmentPatternCenters:[6,26,52,78,104,130],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:115},{numBlocks:10,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:47},{numBlocks:10,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:25,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:25,dataCodewordsPerBlock:16}]}]},{infoBits:127568,versionNumber:31,alignmentPatternCenters:[6,30,56,82,108,134],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:3,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:46},{numBlocks:29,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:24},{numBlocks:1,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:133589,versionNumber:32,alignmentPatternCenters:[6,34,60,86,112,138],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:24},{numBlocks:35,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:35,dataCodewordsPerBlock:16}]}]},{infoBits:136944,versionNumber:33,alignmentPatternCenters:[6,30,58,86,114,142],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:21,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:24},{numBlocks:19,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:141498,versionNumber:34,alignmentPatternCenters:[6,34,62,90,118,146],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:6,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:44,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:59,dataCodewordsPerBlock:16},{numBlocks:1,dataCodewordsPerBlock:17}]}]},{infoBits:145311,versionNumber:35,alignmentPatternCenters:[6,30,54,78,102,126,150],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:121},{numBlocks:7,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:47},{numBlocks:26,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:39,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:41,dataCodewordsPerBlock:16}]}]},{infoBits:150283,versionNumber:36,alignmentPatternCenters:[6,24,50,76,102,128,154],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:121},{numBlocks:14,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:47},{numBlocks:34,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:46,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:64,dataCodewordsPerBlock:16}]}]},{infoBits:152622,versionNumber:37,alignmentPatternCenters:[6,28,54,80,106,132,158],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:46},{numBlocks:14,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:49,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:24,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:158308,versionNumber:38,alignmentPatternCenters:[6,32,58,84,110,136,162],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:122},{numBlocks:18,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:46},{numBlocks:32,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:48,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:15},{numBlocks:32,dataCodewordsPerBlock:16}]}]},{infoBits:161089,versionNumber:39,alignmentPatternCenters:[6,26,54,82,110,138,166],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:40,dataCodewordsPerBlock:47},{numBlocks:7,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:43,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:15},{numBlocks:67,dataCodewordsPerBlock:16}]}]},{infoBits:167017,versionNumber:40,alignmentPatternCenters:[6,30,58,86,114,142,170],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:118},{numBlocks:6,dataCodewordsPerBlock:119}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:18,dataCodewordsPerBlock:47},{numBlocks:31,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:24},{numBlocks:34,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:15},{numBlocks:61,dataCodewordsPerBlock:16}]}]}]}),(function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(0);function i(c,u,p,m){var g=c.x-u.x+p.x-m.x,y=c.y-u.y+p.y-m.y;if(g===0&&y===0)return{a11:u.x-c.x,a12:u.y-c.y,a13:0,a21:p.x-u.x,a22:p.y-u.y,a23:0,a31:c.x,a32:c.y,a33:1};var b=u.x-p.x,v=m.x-p.x,E=u.y-p.y,A=m.y-p.y,C=b*A-v*E,I=(g*A-v*y)/C,N=(b*y-g*E)/C;return{a11:u.x-c.x+I*u.x,a12:u.y-c.y+I*u.y,a13:I,a21:m.x-c.x+N*m.x,a22:m.y-c.y+N*m.y,a23:N,a31:c.x,a32:c.y,a33:1}}function s(c,u,p,m){var g=i(c,u,p,m);return{a11:g.a22*g.a33-g.a23*g.a32,a12:g.a13*g.a32-g.a12*g.a33,a13:g.a12*g.a23-g.a13*g.a22,a21:g.a23*g.a31-g.a21*g.a33,a22:g.a11*g.a33-g.a13*g.a31,a23:g.a13*g.a21-g.a11*g.a23,a31:g.a21*g.a32-g.a22*g.a31,a32:g.a12*g.a31-g.a11*g.a32,a33:g.a11*g.a22-g.a12*g.a21}}function a(c,u){return{a11:c.a11*u.a11+c.a21*u.a12+c.a31*u.a13,a12:c.a12*u.a11+c.a22*u.a12+c.a32*u.a13,a13:c.a13*u.a11+c.a23*u.a12+c.a33*u.a13,a21:c.a11*u.a21+c.a21*u.a22+c.a31*u.a23,a22:c.a12*u.a21+c.a22*u.a22+c.a32*u.a23,a23:c.a13*u.a21+c.a23*u.a22+c.a33*u.a23,a31:c.a11*u.a31+c.a21*u.a32+c.a31*u.a33,a32:c.a12*u.a31+c.a22*u.a32+c.a32*u.a33,a33:c.a13*u.a31+c.a23*u.a32+c.a33*u.a33}}function l(c,u){for(var p=s({x:3.5,y:3.5},{x:u.dimension-3.5,y:3.5},{x:u.dimension-6.5,y:u.dimension-6.5},{x:3.5,y:u.dimension-3.5}),m=i(u.topLeft,u.topRight,u.alignmentPattern,u.bottomLeft),g=a(m,p),y=n.BitMatrix.createEmpty(u.dimension,u.dimension),b=function(N,_){var O=g.a13*N+g.a23*_+g.a33;return{x:(g.a11*N+g.a21*_+g.a31)/O,y:(g.a12*N+g.a22*_+g.a32)/O}},v=0;v<u.dimension;v++)for(var E=0;E<u.dimension;E++){var A=E+.5,C=v+.5,I=b(A,C);y.set(E,v,c.get(Math.floor(I.x),Math.floor(I.y)))}return{matrix:y,mappingFunction:b}}t.extract=l}),(function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=4,i=.5,s=1.5,a=function(A,C){return Math.sqrt(Math.pow(C.x-A.x,2)+Math.pow(C.y-A.y,2))};function l(A){return A.reduce(function(C,I){return C+I})}function c(A,C,I){var N,_,O,F,J=a(A,C),G=a(C,I),te=a(A,I),K,oe,le;return G>=J&&G>=te?(N=[C,A,I],K=N[0],oe=N[1],le=N[2]):te>=G&&te>=J?(_=[A,C,I],K=_[0],oe=_[1],le=_[2]):(O=[A,I,C],K=O[0],oe=O[1],le=O[2]),(le.x-oe.x)*(K.y-oe.y)-(le.y-oe.y)*(K.x-oe.x)<0&&(F=[le,K],K=F[0],le=F[1]),{bottomLeft:K,topLeft:oe,topRight:le}}function u(A,C,I,N){var _=(l(m(A,I,N,5))/7+l(m(A,C,N,5))/7+l(m(I,A,N,5))/7+l(m(C,A,N,5))/7)/4;if(_<1)throw new Error("Invalid module size");var O=Math.round(a(A,C)/_),F=Math.round(a(A,I)/_),J=Math.floor((O+F)/2)+7;switch(J%4){case 0:J++;break;case 2:J--;break}return{dimension:J,moduleSize:_}}function p(A,C,I,N){var _=[{x:Math.floor(A.x),y:Math.floor(A.y)}],O=Math.abs(C.y-A.y)>Math.abs(C.x-A.x),F,J,G,te;O?(F=Math.floor(A.y),J=Math.floor(A.x),G=Math.floor(C.y),te=Math.floor(C.x)):(F=Math.floor(A.x),J=Math.floor(A.y),G=Math.floor(C.x),te=Math.floor(C.y));for(var K=Math.abs(G-F),oe=Math.abs(te-J),le=Math.floor(-K/2),he=F<G?1:-1,Ae=J<te?1:-1,Ce=!0,ye=F,ce=J;ye!==G+he;ye+=he){var pe=O?ce:ye,xe=O?ye:ce;if(I.get(pe,xe)!==Ce&&(Ce=!Ce,_.push({x:pe,y:xe}),_.length===N+1))break;if(le+=oe,le>0){if(ce===te)break;ce+=Ae,le-=K}}for(var Ze=[],ge=0;ge<N;ge++)_[ge]&&_[ge+1]?Ze.push(a(_[ge],_[ge+1])):Ze.push(0);return Ze}function m(A,C,I,N){var _,O=C.y-A.y,F=C.x-A.x,J=p(A,C,I,Math.ceil(N/2)),G=p(A,{x:A.x-F,y:A.y-O},I,Math.ceil(N/2)),te=J.shift()+G.shift()-1;return(_=G.concat(te)).concat.apply(_,J)}function g(A,C){var I=l(A)/l(C),N=0;return C.forEach(function(_,O){N+=Math.pow(A[O]-_*I,2)}),{averageSize:I,error:N}}function y(A,C,I){try{var N=m(A,{x:-1,y:A.y},I,C.length),_=m(A,{x:A.x,y:-1},I,C.length),O={x:Math.max(0,A.x-A.y)-1,y:Math.max(0,A.y-A.x)-1},F=m(A,O,I,C.length),J={x:Math.min(I.width,A.x+A.y)+1,y:Math.min(I.height,A.y+A.x)+1},G=m(A,J,I,C.length),te=g(N,C),K=g(_,C),oe=g(F,C),le=g(G,C),he=Math.sqrt(te.error*te.error+K.error*K.error+oe.error*oe.error+le.error*le.error),Ae=(te.averageSize+K.averageSize+oe.averageSize+le.averageSize)/4,Ce=(Math.pow(te.averageSize-Ae,2)+Math.pow(K.averageSize-Ae,2)+Math.pow(oe.averageSize-Ae,2)+Math.pow(le.averageSize-Ae,2))/Ae;return he+Ce}catch{return 1/0}}function b(A,C){for(var I=Math.round(C.x);A.get(I,Math.round(C.y));)I--;for(var N=Math.round(C.x);A.get(N,Math.round(C.y));)N++;for(var _=(I+N)/2,O=Math.round(C.y);A.get(Math.round(_),O);)O--;for(var F=Math.round(C.y);A.get(Math.round(_),F);)F++;var J=(O+F)/2;return{x:_,y:J}}function v(A){for(var C=[],I=[],N=[],_=[],O=function(pe){for(var xe=0,Ze=!1,ge=[0,0,0,0,0],ae=function(Fe){var Xe=A.get(Fe,pe);if(Xe===Ze)xe++;else{ge=[ge[1],ge[2],ge[3],ge[4],xe],xe=1,Ze=Xe;var It=l(ge)/7,Ve=Math.abs(ge[0]-It)<It&&Math.abs(ge[1]-It)<It&&Math.abs(ge[2]-3*It)<3*It&&Math.abs(ge[3]-It)<It&&Math.abs(ge[4]-It)<It&&!Xe,_t=l(ge.slice(-3))/3,Wt=Math.abs(ge[2]-_t)<_t&&Math.abs(ge[3]-_t)<_t&&Math.abs(ge[4]-_t)<_t&&Xe;if(Ve){var po=Fe-ge[3]-ge[4],no=po-ge[2],mo={startX:no,endX:po,y:pe},Sn=I.filter(function(Qe){return no>=Qe.bottom.startX&&no<=Qe.bottom.endX||po>=Qe.bottom.startX&&no<=Qe.bottom.endX||no<=Qe.bottom.startX&&po>=Qe.bottom.endX&&ge[2]/(Qe.bottom.endX-Qe.bottom.startX)<s&&ge[2]/(Qe.bottom.endX-Qe.bottom.startX)>i});Sn.length>0?Sn[0].bottom=mo:I.push({top:mo,bottom:mo})}if(Wt){var Br=Fe-ge[4],be=Br-ge[3],mo={startX:be,y:pe,endX:Br},Sn=_.filter(function(we){return be>=we.bottom.startX&&be<=we.bottom.endX||Br>=we.bottom.startX&&be<=we.bottom.endX||be<=we.bottom.startX&&Br>=we.bottom.endX&&ge[2]/(we.bottom.endX-we.bottom.startX)<s&&ge[2]/(we.bottom.endX-we.bottom.startX)>i});Sn.length>0?Sn[0].bottom=mo:_.push({top:mo,bottom:mo})}}},Ne=-1;Ne<=A.width;Ne++)ae(Ne);C.push.apply(C,I.filter(function(Fe){return Fe.bottom.y!==pe&&Fe.bottom.y-Fe.top.y>=2})),I=I.filter(function(Fe){return Fe.bottom.y===pe}),N.push.apply(N,_.filter(function(Fe){return Fe.bottom.y!==pe})),_=_.filter(function(Fe){return Fe.bottom.y===pe})},F=0;F<=A.height;F++)O(F);C.push.apply(C,I.filter(function(pe){return pe.bottom.y-pe.top.y>=2})),N.push.apply(N,_);var J=C.filter(function(pe){return pe.bottom.y-pe.top.y>=2}).map(function(pe){var xe=(pe.top.startX+pe.top.endX+pe.bottom.startX+pe.bottom.endX)/4,Ze=(pe.top.y+pe.bottom.y+1)/2;if(A.get(Math.round(xe),Math.round(Ze))){var ge=[pe.top.endX-pe.top.startX,pe.bottom.endX-pe.bottom.startX,pe.bottom.y-pe.top.y+1],ae=l(ge)/ge.length,Ne=y({x:Math.round(xe),y:Math.round(Ze)},[1,1,3,1,1],A);return{score:Ne,x:xe,y:Ze,size:ae}}}).filter(function(pe){return!!pe}).sort(function(pe,xe){return pe.score-xe.score}).map(function(pe,xe,Ze){if(xe>n)return null;var ge=Ze.filter(function(Ne,Fe){return xe!==Fe}).map(function(Ne){return{x:Ne.x,y:Ne.y,score:Ne.score+Math.pow(Ne.size-pe.size,2)/pe.size,size:Ne.size}}).sort(function(Ne,Fe){return Ne.score-Fe.score});if(ge.length<2)return null;var ae=pe.score+ge[0].score+ge[1].score;return{points:[pe].concat(ge.slice(0,2)),score:ae}}).filter(function(pe){return!!pe}).sort(function(pe,xe){return pe.score-xe.score});if(J.length===0)return null;var G=c(J[0].points[0],J[0].points[1],J[0].points[2]),te=G.topRight,K=G.topLeft,oe=G.bottomLeft,le=E(A,N,te,K,oe),he=[];le&&he.push({alignmentPattern:{x:le.alignmentPattern.x,y:le.alignmentPattern.y},bottomLeft:{x:oe.x,y:oe.y},dimension:le.dimension,topLeft:{x:K.x,y:K.y},topRight:{x:te.x,y:te.y}});var Ae=b(A,te),Ce=b(A,K),ye=b(A,oe),ce=E(A,N,Ae,Ce,ye);return ce&&he.push({alignmentPattern:{x:ce.alignmentPattern.x,y:ce.alignmentPattern.y},bottomLeft:{x:ye.x,y:ye.y},topLeft:{x:Ce.x,y:Ce.y},topRight:{x:Ae.x,y:Ae.y},dimension:ce.dimension}),he.length===0?null:he}t.locate=v;function E(A,C,I,N,_){var O,F,J;try{O=u(N,I,_,A),F=O.dimension,J=O.moduleSize}catch{return null}var G={x:I.x-N.x+_.x,y:I.y-N.y+_.y},te=(a(N,_)+a(N,I))/2/J,K=1-3/te,oe={x:N.x+K*(G.x-N.x),y:N.y+K*(G.y-N.y)},le=C.map(function(Ae){var Ce=(Ae.top.startX+Ae.top.endX+Ae.bottom.startX+Ae.bottom.endX)/4,ye=(Ae.top.y+Ae.bottom.y+1)/2;if(A.get(Math.floor(Ce),Math.floor(ye))){var ce=[Ae.top.endX-Ae.top.startX,Ae.bottom.endX-Ae.bottom.startX,Ae.bottom.y-Ae.top.y+1],pe=l(ce)/ce.length,xe=y({x:Math.floor(Ce),y:Math.floor(ye)},[1,1,1],A),Ze=xe+a({x:Ce,y:ye},oe);return{x:Ce,y:ye,score:Ze}}}).filter(function(Ae){return!!Ae}).sort(function(Ae,Ce){return Ae.score-Ce.score}),he=te>=15&&le.length?le[0]:oe;return{alignmentPattern:he,dimension:F}}})]).default})});function Iut({token:e,onAbort:t,...o}){let[n,i]=L(e?0:2);se(()=>()=>void(n!==1&&t()),[]);let[s,a]=L(!1),l=kt(null),c=kt(new Tut({progress:"0%"})).current,u=1e3,p,m=()=>{l.current&&(c.start({progress:"100%",config:{duration:u,easing:y=>-(Math.cos(Math.PI*y)-1)/2}}),p=setTimeout(()=>{n===0&&(a(!0),Ht.post({url:"/users/@me/remote-auth/finish",body:{handshake_token:e}}).then(()=>{i(1)}).catch(()=>i(2)).finally(()=>a(!1)))},u+250))},g=()=>{l.current&&(c.start({progress:"0%",config:{duration:696,easing:y=>1-Math.pow(1-y,3)}}),clearTimeout(p))};return se(()=>{let y,b=()=>{l.current?.style.setProperty("--progress",c.get().progress),y=requestAnimationFrame(b)};return n===0&&requestAnimationFrame(b),()=>cancelAnimationFrame(y)},[n]),r(Pe,{size:"dynamic",...o},r($e,{scrollbarType:"none",className:js("device-content")},n===1?r(f,null,r("img",{className:js("device-image"),src:By.deviceImage.success,key:"img-success",draggable:!1}),r(Y,{size:"xl",weight:"bold",color:"text-strong",tag:"h1",className:js("device-header")},St("QR_CODE_LOGIN_SUCCESS")),r(Y,{size:"md",weight:"semibold",color:"text-default",style:{width:"30rem",textAlign:"center"}},St("QR_CODE_LOGIN_SUCCESS_FLAVOR"))):n===2?r(f,null,r("img",{className:js("device-image"),src:By.deviceImage.notFound,key:"img-not_found",draggable:!1}),r(Y,{size:"xl",weight:"bold",color:"text-strong",tag:"h1",className:js("device-header")},St("QR_CODE_NOT_FOUND")),r(Y,{size:"md",weight:"semibold",color:"text-default",style:{width:"30rem"}},St("QR_CODE_NOT_FOUND_DESCRIPTION"))):r(f,null,r("img",{className:js("device-image"),src:By.deviceImage.loading,key:"img-loaded",draggable:!1}),r(Y,{size:"xl",weight:"bold",color:"text-strong",tag:"h1",className:js("device-header")},St("QR_CODE_LOGIN_CONFIRM")),r(Y,{size:"md",weight:"semibold",color:"text-danger"},"Never scan a login QR code from another user or application."),r(Me,{size:"medium",variant:"dangerPrimary",className:js("device-confirm"),style:{"--duration":`${u}ms`},onPointerDown:m,onPointerUp:g,ref:l,disabled:s},"Hold to confirm login"))),r(ht,{className:js("device-footer")},n===1?r(Me,{onClick:o.onClose},St("QR_CODE_LOGIN_FINISH_BUTTON")):r(Ia,{variant:"link",onClick:o.onClose},n===2?St("CLOSE"):St("CANCEL"))))}function tX(e,t){return Ee(o=>r(Iut,{...o,token:e,onAbort:t}))}var Tut,XEe=x(()=>{"use strict";d();Et();Co();aB();mt();at();fe();B();cB();({Controller:Tut}=He("Controller"))});function Mut(e){let[t,o]=L(0),[n,i]=L(null),s=kt(null),a=kt(null),l=kt({exit:c=>{s.current=c,o(0),i(null)},setPreview:(c,u)=>new Promise(p=>{if(!c)return p(i(null));let m={};c.width>c.height?(m.width=34,m.height=c.height/c.width*34):(m.height=34,m.width=c.width/c.height*34);let g;if(c instanceof HTMLImageElement?g=r("img",{src:c.src,style:{width:"100%",height:"100%"}}):g=r("video",{controls:!1,style:{width:"100%",height:"100%"},ref:y=>{y&&(y.srcObject=c.srcObject,c.paused||y.play().catch(b=>{console.error("Error playing the video:",b)}))}}),u){let y=[[u.topLeftCorner,u.bottomRightCorner],[u.topRightCorner,u.bottomLeftCorner]],b=(Math.sqrt(Math.abs(u.topLeftCorner.x-u.topRightCorner.x)**2+Math.abs(u.topLeftCorner.y-u.topRightCorner.y)**2)+Math.sqrt(Math.abs(u.topRightCorner.x-u.bottomRightCorner.x)**2+Math.abs(u.topRightCorner.y-u.bottomRightCorner.y)**2))/3/c.height,v=[];for(let E of y)for(let A=0;A<2;A++){let C=E[A],I=E[1-A],N=(Math.atan2(I.y-C.y,I.x-C.x)-Math.PI/4)*(180/Math.PI);v.push({x:C.x/c.width*100,y:C.y/c.height*100,rot:N,size:Math.min(b*m.height,7)})}i({source:g,size:m,crosses:v}),setTimeout(p,1100)}else return p(i({source:g,size:m}))})});return se(()=>(Py.qrModalOpen=!0,()=>void(Py.qrModalOpen=!1)),[]),se(()=>{let c=u=>{if(u.preventDefault(),!(t!==0||!u.clipboardData)){for(let p of u.clipboardData.items)if(p.kind==="file"&&p.type.startsWith("image/")){o(1),oX(p.getAsFile(),l);break}else if(p.kind==="string"&&p.type==="text/plain"){p.getAsString(m=>{o(1);let g=m.match(VEe)?.[1];g?eAe(g,l).catch(y=>l.current.exit(y?.message)):l.current.exit(null)});break}}};return t===0&&document.addEventListener("paste",c),()=>document.removeEventListener("paste",c)},[t]),r("div",{className:js("modal-container")},r("div",{className:js("modal-filepaste",n?.source&&"modal-filepaste-preview",n?.crosses&&"modal-filepaste-crosses"),onClick:()=>t===0&&a.current?.click(),onDragEnter:c=>c.currentTarget.classList.add(js("modal-filepaste-drop")),onDragLeave:c=>c.currentTarget.classList.remove(js("modal-filepaste-drop")),onDrop:c=>{if(c.preventDefault(),c.currentTarget.classList.remove(js("modal-filepaste-drop")),t===0){for(let u of c.dataTransfer.files)if(u.type.startsWith("image/")){o(1),oX(u,l);break}}},role:"button",style:n?.size?{width:`${n.size.width}rem`,height:`${n.size.height}rem`}:{}},n?.source?r("div",{style:{width:"100%",height:"100%",position:"relative","--scale":n.crosses?Math.max(n.crosses[0].size*.9,1):void 0,"--offset-x":n.crosses?`${-(n.crosses.reduce((c,{x:u})=>c+u,0)/n.crosses.length-50)}%`:void 0,"--offset-y":n.crosses?`${-(n.crosses.reduce((c,{y:u})=>c+u,0)/n.crosses.length-50)}%`:void 0},className:js(n?.crosses&&"preview-crosses")},n.source,n.crosses?.map(({x:c,y:u,rot:p,size:m})=>r("span",{key:js("preview-cross"),className:js("preview-cross"),style:{left:`${c}%`,top:`${u}%`,"--size":`${m}rem`,"--rot":`${p}deg`}},r("img",{src:By.cross,draggable:!1})))):t===1?r(QEe,{type:"wanderingCubes"}):s.current?r(Y,{size:"md",weight:"semibold",color:"text-danger"},s.current):r(f,null,r(Y,{size:"md",weight:"semibold",color:"text-strong"},"Drag and drop an image here, or click to select an image"),r(Y,{size:"sm",weight:"medium",color:"text-muted"},"Or paste an image from your clipboard!"),r("br",null),r(lB,null))),r("input",{type:"file",accept:"image/*",onChange:c=>{if(!(!c.target.files||t!==0)){for(let u of c.target.files)if(u.type.startsWith("image/")){o(1),oX(u,l);break}}},ref:a,style:{display:"none"}}))}var JEe,Dut,CXo,VEe,eAe,oX,uB,tAe=x(()=>{"use strict";d();Et();fa();nX();aB();fe();B();JEe=Ml(ZEe());cB();XEe();Dut=(e,t)=>{if(e>t){let o=Math.min(e,1280);return{w:o,h:t/e*o}}else{let o=Math.min(t,1280);return{h:o,w:e/t*o}}},{getVideoDeviceId:CXo}=He("getVideoDeviceId"),VEe=/^https:\/\/discord\.com\/ra\/([\w-]+)$/,eAe=async(e,{current:t})=>{let o=null;try{let n=await Ht.post({url:"/users/@me/remote-auth",body:{fingerprint:e}});n.ok&&n.status===200&&(o=n.body?.handshake_token)}catch{}t.setPreview(null),tX(o,()=>{t.exit(null),Ht.post({url:"/users/@me/remote-auth/cancel",body:{handshake_token:o}})})},oX=(e,t)=>{let{current:o}=t,n=new FileReader;n.addEventListener("load",()=>{if(!n.result)return;let i=new Image;i.addEventListener("load",()=>{o.setPreview(i);let{w:s,h:a}=Dut(i.width,i.height);i.width=s,i.height=a;let l=document.createElement("canvas");l.width=i.width,l.height=i.height;let c=l.getContext("2d");c.drawImage(i,0,0,l.width,l.height);let{data:u,width:p,height:m}=c.getImageData(0,0,l.width,l.height),g=(0,JEe.default)(u,p,m),y=g?.data.match(VEe)?.[1];y?o.setPreview(i,g.location).then(()=>eAe(y,t).catch(b=>o.exit(b?.message))):o.exit(null),l.remove()}),i.src=n.result}),n.readAsDataURL(e)};uB=Bi(Mut,"Scan QR Code")});var Nut,Py,nX=x(()=>{"use strict";d();Wo();Q();wt();Xm();H();mt();$();B();aB();cB();tAe();Nut=R({scanQr:{type:6,description:"Scan a QR code",component(){return pt.LoginWithQR.started?r(U,{size:U.Sizes.SMALL,onClick:uB},St("USER_SETTINGS_SCAN_QR_CODE")):r(W,null,"Enable the plugin and restart your client to scan a login QR code")}}}),Py=k({name:"LoginWithQR",description:"Allows you to login to another device by scanning a login QR code, just like on mobile!",authors:[j.nexpid],settings:Nut,patches:[{find:".clipboardData&&(",replacement:{match:/handleGlobalPaste:(\i)/,replace:"handleGlobalPaste:(...args)=>!$self.qrModalOpen&&$1(...args)"}}],qrModalOpen:!1,start(){let{customEntries:e,customSections:t}=vi;e.push({key:"equicord_login_with_qr",title:St("USER_SETTINGS_SCAN_QR_CODE"),Component:uB,Icon:lB}),t.push(()=>({section:"EquicordLoginWithQR",label:St("USER_SETTINGS_SCAN_QR_CODE"),searchableTitles:[St("USER_SETTINGS_SCAN_QR_CODE")],element:uB,id:"EquicordLoginWithQR"})),hs.push(["EquicordLoginWithQR","equicord_login_with_qr"]),KEe()},stop(){let{customEntries:e,customSections:t}=vi,o=e.findIndex(s=>s.key==="equicord_login_with_qr");o!==-1&&e.splice(o,1);let n=t.findIndex(s=>s({}).id==="EquicordLoginWithQR");n!==-1&&t.splice(n,1);let i=hs.findIndex(s=>s[1]==="equicord_login_with_qr");i!==-1&&hs.splice(i,1),VZ()}})});var oAe=x(()=>{});function But(){return r("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",viewBox:"0 -960 960 960"},r("path",{d:"M418-340q24 24 62 23.5t56-27.5l224-336-336 224q-27 18-28.5 55t22.5 61zm62-460q59 0 113.5 16.5T696-734l-76 48q-33-17-68.5-25.5T480-720q-133 0-226.5 93.5T160-400q0 42 11.5 83t32.5 77h552q23-38 33.5-79t10.5-85q0-36-8.5-70T766-540l48-76q30 47 47.5 100T880-406q1 57-13 109t-41 99q-11 18-30 28t-40 10H204q-21 0-40-10t-30-28q-26-45-40-95.5T80-400q0-83 31.5-155.5t86-127Q252-737 325-768.5T480-800zm7 313z"}))}var nAe,rAe=x(()=>{"use strict";d();nAe=But});var Put,_ut,Rut,pB,dB,mB,iAe=x(()=>{"use strict";d();oAe();Q();tt();H();nt();$();B();rAe();Put=de("vc-media-playback-speed-"),_ut=.25,Rut=3.5,pB=uo(_ut,Rut,.25),dB=R({defaultVoiceMessageSpeed:{type:5,default:1,description:"Voice messages",markers:pB},defaultVideoSpeed:{type:5,default:1,description:"Videos",markers:pB},defaultAudioSpeed:{type:5,default:1,description:"Audios",markers:pB}}),mB=k({name:"MediaPlaybackSpeed",description:"Allows changing the (default) playback speed of media embeds",authors:[w.D3SOX],settings:dB,patches:[{find:'"--:--"',replacement:{match:/\(0,\i\.jsxs?\)\(.{0,50}\.\i,onClick:\(\).+?\}\)\}\)(?<=playbackCacheKey:\i\}=\i,(\i).+?)/,replace:"$self.renderPlaybackSpeedComponent({mediaRef:$1})"}},{find:"renderControls(){",replacement:{match:/onToggleMuted:this.toggleMuted,/,replace:"$&mediaRef:this.mediaRef,"}},{find:'AUDIO:"AUDIO"',replacement:{match:/sliderWrapperClassName:\i.\i\}\)\}\),/,replace:"$&$self.renderPlaybackSpeedComponent({mediaRef:this?.props?.mediaRef}),"}}],renderPlaybackSpeedComponent:ee.wrap(({mediaRef:e})=>{let t=o=>{let n=e?.current;n&&(n.playbackRate=o)};return se(()=>{let o=e?.current;o&&(o.tagName==="AUDIO"?o.className.includes("audioElement")?o.addEventListener("play",()=>{t(dB.store.defaultVoiceMessageSpeed)},{once:!0}):t(dB.store.defaultAudioSpeed):o.tagName==="VIDEO"&&t(dB.store.defaultVideoSpeed))},[e]),r(Ue,{text:"Playback speed"},o=>r("button",{...o,className:Put("icon"),onClick:n=>{Dt.openContextMenu(n,()=>r(M.Menu,{navId:"vc-playback-speed",onClose:()=>V.dispatch({type:"CONTEXT_MENU_CLOSE"}),"aria-label":"Playback speed control"},r(M.MenuGroup,{label:"Playback speed"},pB.map(i=>r(M.MenuItem,{key:i,id:"speed-"+i,label:`${i}x`,action:()=>t(i)})))))}},r(nAe,null)))})})});function Lut(e,t,o,n){let i=!0;e.isGroupDM()&&e.name===t.content&&(i=!1),t.author.id!==z.getCurrentUser().id&&(i=!1),document.querySelector('[class*="replyBar"]')&&(i=!1),t.attachments.length>0&&!n&&(i=!1);let s=new Date(t.timestamp);return new Date().getTime()-s.getTime()>o*1e3&&(i=!1),{should:i,content:t.content}}var sAe,fB,aAe=x(()=>{"use strict";d();Q();H();$();B();sAe=R({timePeriod:{type:1,description:"The duration of bursts (in seconds).",default:3},shouldMergeWithAttachment:{type:3,description:"Should the message be merged if the last message has an attachment?",default:!1},useSpace:{type:3,description:"Whether to add a space between messages when merging instead of new lines.",default:!1}}),fB=k({name:"MessageBurst",description:"Merges messages sent within a time period with your previous sent message if no one else sends a message before you.",authors:[j.port22exposed],settings:sAe,onBeforeMessageSend(e,t){let o=Rt.getMessages(e)._map;if(!o)return;let n=Object.entries(o),[i,s]=n[n.length-1],a=ne.getChannel(e),{should:l,content:c}=Lut(a,s,this.settings.store.timePeriod,this.settings.store.shouldMergeWithAttachment);if(l){let u=sAe.store.useSpace?" ":`
`,p=c+u+t.content;Fn.editMessage(e,i,{content:p}),t.content=""}}})});var lAe=x(()=>{});var _y,rX,iX,cAe=x(()=>{"use strict";d();Q();$();_y=R({renderType:{type:4,description:"How to render colors",options:[{label:"Text color",value:1,default:!0},{label:"Block nearby",value:0},{label:"Background color",value:2}]},enableShortHexCodes:{type:3,description:"Enable 3 char hex-code like #39f",default:!0,restartNeeded:!0},blockView:{type:4,disabled:()=>_y.store.renderType!==0,description:"Where to display colored block",options:[{label:"Right side",value:1,default:!0},{label:"Left side",value:0},{label:"Both sides",value:2}]}}),rX=e=>new RegExp(e.replaceAll("\\f","[+-]?([0-9]*[.])?[0-9]+").replaceAll("\\c","(?:,|\\s)").replaceAll("\\v","\\s*?\\d+?\\s*?"),"g"),iX=[{reg:/rgb\(\v\c\v\c\v\)/g,type:0},{reg:/rgba\(\v\c\v\c\v(\c|\/?)\s*\f\)/g,type:1},{reg:/hsl\(\v?\c\s*?\d+%?\s*?\c\s*?\d+%?\s*?\)/g,type:3}].map(e=>(e.reg=rX(e.reg.source),e))});function Uut(e,t){switch(e=e.toLowerCase().trim().replaceAll(/(\s|,)+/g," "),t){case 0:return e;case 1:return e.includes("/")?e:e.replaceAll(rX(/\f(?=\s*?\))/.source),"/$&");case 2:return e[0]==="#"?e:`#${e}`;case 3:return e.replace("\xB0","")}}var uAe,gB,dAe,Out,Fut,pAe=x(()=>{"use strict";d();lAe();tt();H();$();cAe();uAe=["r","h","#"].flatMap(e=>[e,e.toUpperCase()]),gB=k({authors:[j.Hen],name:"MessageColors",description:"Displays color codes like #FF0042 inside of messages",settings:_y,patches:[{find:"roleMention:{order:",group:!0,replacement:{match:/roleMention:\{order:(\i\.\i\.order)/,replace:"color:$self.getColor($1),$&"}},{find:".defaultRules.text,match",replacement:{match:/\$\)\//,replace:uAe.join("|")+"|$&"}},{find:"parseInlineCodeChildContent:",replacement:{match:/parseInlineCodeChildContent:/,replace:"isInsideOfLink:true,$&"}},{find:"Unknown markdown rule:",group:!0,replacement:{match:/roleMention:{type:/,replace:'color:{type:"inlineObject"},$&'}}],start(){let e=_y.store.enableShortHexCodes?"{1,2}":"{2}";iX.push({reg:new RegExp("#(?:[0-9a-fA-F]{3})"+e,"g"),type:2})},startAt:"Init",getColor(e){let t=iX.map(n=>n.reg.source).join("|"),o=new RegExp(`^(${t})`,"i");return{order:e,requiredFirstCharacters:uAe,match(n){return o.exec(n)},parse(n,i,s){if(!s.messageId||s.isInsideOfLink)return{type:"text",content:n[0]};let a=n[0];try{let l=Fut(a);return{type:"color",colorType:l,color:Uut(a,l),text:a}}catch(l){return console.error(l),{type:"text",content:n[0]}}},react:ee.wrap(({text:n,colorType:i,color:s})=>{if(_y.store.renderType===1)return r("span",{style:{color:s}},n);let a={"--color":s};if(_y.store.renderType===2){let u=`vc-color-bg ${Out(s,i)?"":"vc-color-bg-invert"}`;return r("span",{className:u,style:a},n)}let l="2px";switch(_y.store.blockView){case 0:return a.marginRight=l,r(f,null,r("span",{className:"vc-color-block",style:a}),n);case 1:return a.marginLeft=l,r(f,null,n,r("span",{className:"vc-color-block",style:a}));case 2:return a.marginLeft=l,a.marginRight=l,r(f,null,r("span",{className:"vc-color-block",style:a}),n,r("span",{className:"vc-color-block",style:a}))}},{fallback:n=>{let i=n.children;return r(f,null,i.props?.text)}})}}}),dAe=(e,t,o)=>.2126*e+.7152*t+.0722*o,Out=(e,t)=>{switch(t){case 1:case 0:{let n=e.match(/\d+/g);return dAe(+n[0],+n[1],+n[2])<115}case 2:{e=e.substring(1),e.length===3&&(e=e.split("").flatMap(c=>[c,c]).join(""));let n=parseInt(e,16),i=n>>16&255,s=n>>8&255,a=n>>0&255;return dAe(i,s,a)<115}case 3:return+e.match(/\d+/g)[2]<115/255*100}},Fut=e=>{if(e=e.toLowerCase().trim(),e.startsWith("#"))return 2;if(e.startsWith("hsl"))return 3;if(e.startsWith("rgba"))return 1;if(e.startsWith("rgb"))return 0;throw new Error(`Can't resolve color type of ${e}`)}});function fAe(){return r("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor"},r("path",{d:"M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4M12.5,7V12.25L17,14.92L16.25,16.15L11,13V7H12.5Z"}))}function Hut(e){let o=new Date().getTime()-e.getTime(),n=Math.floor(o/1e3),i=Math.floor(n/60),s=Math.floor(i/60),a=Math.floor(s/24);return a>0?`${a} day${a>1?"s":""} ago`:s>0?`${s} hour${s>1?"s":""} ago`:i>0?`${i} minute${i>1?"s":""} ago`:"just now"}function mAe(e){e.channelId&&e.channelId!==P2&&(P2=e.channelId,Wg={channelId:e.channelId,startTime:performance.now()})}function hB(e){if(!Wg||e.channelId!==Wg.channelId||xB.get(Wg.channelId))return;let n=performance.now()-Wg.startTime;xB.set(Wg.channelId,{time:n,timestamp:new Date}),Wg=null}var Wg,P2,xB,sX,$ut,yB,gAe=x(()=>{"use strict";d();ma();Q();H();mt();$();B();Wg=null,P2=null,xB=new Map,sX=R({showIcon:{type:3,description:"Show fetch time icon in message bar",default:!0},showMs:{type:3,description:"Show milliseconds in timing",default:!0},iconColor:{type:0,description:"Icon color (CSS color value)",default:"#00d166"}}),$ut=({isMainChat:e})=>{let{showMs:t,iconColor:o}=sX.use(["showMs","iconColor"]);if(!e||!sX.store.showIcon||!P2)return null;let n=xB.get(P2);if(!n)return null;let{time:i,timestamp:s}=n,a=t?`${Math.round(i)}ms`:`${Math.round(i/1e3)}s`;if(!t&&Math.round(i/1e3)===0)return null;let l=Hut(s);return r(Lr,{tooltip:`Messages loaded in ${Math.round(i)}ms (${l})`,onClick:()=>{}},r("div",{style:{display:"flex",alignItems:"center",gap:"4px"}},fAe(),r("span",{style:{fontSize:"12px",color:o,fontWeight:"500"}},a)))};yB=k({name:"MessageFetchTimer",description:"Shows how long it took to fetch messages for the current channel",authors:[j.GroupXyz],settings:sX,chatBarButton:{icon:fAe,render:$ut},start(){V.subscribe("CHANNEL_SELECT",mAe),V.subscribe("LOAD_MESSAGES_SUCCESS",hB),V.subscribe("MESSAGE_CREATE",hB);let e=Cn();e&&(P2=e.id)},stop(){V.unsubscribe("CHANNEL_SELECT",mAe),V.unsubscribe("LOAD_MESSAGES_SUCCESS",hB),V.unsubscribe("MESSAGE_CREATE",hB),Wg=null,xB.clear(),P2=null}})});var hAe=x(()=>{});function aX(e,t,o,n){return o?r(Ue,{tooltipClassName:"c98-message-link-tooltip",text:r(ee,null,r(qut,{channelId:n,messageId:o}))},({onMouseEnter:i,onMouseLeave:s})=>r(e,{...t,onMouseEnter:i,onMouseLeave:s})):r(e,{...t})}function qut({channelId:e,messageId:t}){let o=ne.getChannel(e),n=jut(e,t),i=zut.useSetting(),s=_2.store.display==="compact"?!0:_2.store.display==="cozy"?!1:i;return n?r(Gut,{id:`message-link-tooltip-${t}`,message:n,channel:o,subscribeToComponentDispatch:!1,compact:s}):r("span",null,"Loading...")}function jut(e,t){let o=Je([Rt],()=>Rt.getMessage(e,t)),[n,i]=L(o);return se(()=>{n==null&&(async()=>{let a=(await Ht.get({url:jo.Endpoints.MESSAGES(e),query:{limit:1,around:t},retries:2})).body[0],l=Rt.getMessages(e).receiveMessage(a).get(t);i(l)})()}),n}var zut,Gut,_2,bB,xAe=x(()=>{"use strict";d();hAe();Q();Ra();tt();H();$();fe();B();zut=nr("textAndImages","messageDisplayCompact"),Gut=De("isFirstMessageInForumPost","trackAnnouncementViews"),_2=R({onLink:{description:"Show tooltip when hovering over message links",type:3,default:!0,restartNeeded:!0},onReply:{description:"Show tooltip when hovering over message replies",type:3,default:!0,restartNeeded:!0},onForward:{description:"Show tooltip when hovering over forwarded messages",type:3,default:!0,restartNeeded:!0},display:{description:"Display style",type:4,options:[{label:"Same as message",value:"auto",default:!0},{label:"Compact",value:"compact"},{label:"Cozy",value:"cozy"}]}}),bB=k({name:"MessageLinkTooltip",description:"Like MessageLinkEmbed but without taking space",authors:[w.Kyuuhachi],settings:_2,patches:[{find:'"channelMention",children:[null',replacement:{match:/(?<=\.jsxs\)\()(\i\.\i),\{(?=role:"link")/,replace:"$self.MentionTooltip,{Component:$1,vcProps:arguments[0],"},predicate:()=>_2.store.onLink},{find:"#{intl::REPLY_QUOTE_MESSAGE_NOT_LOADED}",replacement:{match:/(\i\.\i),\{(?=className:\i\(\)\(\i\.\i,\i\.\i)/g,replace:"$self.ReplyTooltip,{Component:$1,vcProps:arguments[0],"},predicate:()=>_2.store.onReply},{find:"#{intl::MESSAGE_FORWARDED}",replacement:{match:/(\i\.\i),\{(?=className:\i\.\i,onClick:\i)/g,replace:"$self.ForwardTooltip,{Component:$1,vcProps:arguments[0],"},predicate:()=>_2.store.onForward}],MentionTooltip({Component:e,vcProps:t,...o}){return aX(e,o,t.messageId,t.channelId)},ReplyTooltip({Component:e,vcProps:t,...o}){let n=t.baseMessage.messageReference;return aX(e,o,n?.message_id,n?.channel_id)},ForwardTooltip({Component:e,vcProps:t,...o}){let n=t.message.messageReference;return aX(e,o,n?.message_id,n?.channel_id)}})});var yAe=x(()=>{});function Wut(){return bAe||(bAe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Kut(){return vAe||(vAe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}function Yut(e){let t=new Promise((o,n)=>{let i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",a)},s=()=>{o(Ry(e.result)),i()},a=()=>{n(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",a)});return vB.set(t,e),t}function Qut(e){if(dX.has(e))return;let t=new Promise((o,n)=>{let i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",a),e.removeEventListener("abort",a)},s=()=>{o(),i()},a=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",a),e.addEventListener("abort",a)});dX.set(e,t)}function EAe(e){pX=e(pX)}function Zut(e){return Kut().includes(e)?function(...t){return e.apply(mX(this),t),Ry(this.request)}:function(...t){return Ry(e.apply(mX(this),t))}}function Xut(e){return typeof e=="function"?Zut(e):(e instanceof IDBTransaction&&Qut(e),uX(e,Wut())?new Proxy(e,pX):e)}function Ry(e){if(e instanceof IDBRequest)return Yut(e);if(lX.has(e))return lX.get(e);let t=Xut(e);return t!==e&&(lX.set(e,t),vB.set(t,e)),t}function AAe(e,t,{blocked:o,upgrade:n,blocking:i,terminated:s}={}){let a=indexedDB.open(e,t),l=Ry(a);return n&&a.addEventListener("upgradeneeded",c=>{n(Ry(a.result),c.oldVersion,c.newVersion,Ry(a.transaction),c)}),o&&a.addEventListener("blocked",c=>o(c.oldVersion,c.newVersion,c)),l.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}function SAe(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(cX.get(t))return cX.get(t);let o=t.replace(/FromIndex$/,""),n=t!==o,i=Vut.includes(o);if(!(o in(n?IDBIndex:IDBObjectStore).prototype)||!(i||Jut.includes(o)))return;let s=async function(a,...l){let c=this.transaction(a,i?"readwrite":"readonly"),u=c.store;return n&&(u=u.index(l.shift())),(await Promise.all([u[o](...l),i&&c.done]))[0]};return cX.set(t,s),s}async function*odt(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;t=t;let o=new Proxy(t,tdt);for(CAe.set(o,t),vB.set(o,mX(t));t;)yield o,t=await(fX.get(o)||t.continue()),fX.delete(o)}function kAe(e,t){return t===Symbol.asyncIterator&&uX(e,[IDBIndex,IDBObjectStore,IDBCursor])||t==="iterate"&&uX(e,[IDBIndex,IDBObjectStore])}var uX,bAe,vAe,dX,lX,vB,pX,mX,Jut,Vut,cX,edt,wAe,fX,CAe,tdt,TAe=x(()=>{d();uX=(e,t)=>t.some(o=>e instanceof o);dX=new WeakMap,lX=new WeakMap,vB=new WeakMap;pX={get(e,t,o){if(e instanceof IDBTransaction){if(t==="done")return dX.get(e);if(t==="store")return o.objectStoreNames[1]?void 0:o.objectStore(o.objectStoreNames[0])}return Ry(e[t])},set(e,t,o){return e[t]=o,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};mX=e=>vB.get(e);Jut=["get","getKey","getAll","getAllKeys","count"],Vut=["put","add","delete","clear"],cX=new Map;EAe(e=>({...e,get:(t,o,n)=>SAe(t,o)||e.get(t,o,n),has:(t,o)=>!!SAe(t,o)||e.has(t,o)}));edt=["continue","continuePrimaryKey","advance"],wAe={},fX=new WeakMap,CAe=new WeakMap,tdt={get(e,t){if(!edt.includes(t))return e[t];let o=wAe[t];return o||(o=wAe[t]=function(...n){fX.set(this,CAe.get(this)[t](...n))}),o}};EAe(e=>({...e,get(t,o,n){return kAe(t,o)?odt:e.get(t,o,n)},has(t,o){return kAe(t,o)||e.has(t,o)}}))});var Kg,IAe,R2=x(()=>{"use strict";d();Kg="savedImages",IAe="MessageLoggerIDB"});function L2(e){let t=new Map,o=(...n)=>{let i=JSON.stringify(n);if(t.has(i))return t.get(i);let s=e(...n);return t.set(i,s),s};return o.clear=()=>t.clear(),o}var SB=x(()=>{"use strict";d()});function O2(e){return ne.getChannel(e)?.guild_id}function NAe(e,t){let o=e.length;for(;o--;)if(t(e[o],o,e))return o;return-1}function BAe(){return{writeLogs:async()=>{},getDefaultNativeImageDir:async()=>Kg,getDefaultNativeDataDir:async()=>"",deleteFileNative:async()=>{},chooseDir:async t=>"",getSettings:async()=>({imageCacheDir:Kg,logsDir:""}),init:async()=>{},initDirs:async()=>{},getImageNative:async t=>new Uint8Array(0),getNativeSavedImages:async()=>new Map,messageLoggerEnhancedUniqueIdThingyIdkMan:async()=>{},showItemInFolder:async()=>{},writeImageNative:async()=>{},chooseFile:async()=>"",downloadAttachment:async()=>({error:"web",path:null})}}var ndt,rdt,DAe,F2,idt,MAe,hk,wB,kB,gX=x(()=>{"use strict";d();zf();fe();B();R2();rm();SB();ndt=An(e=>e?.prototype?.isEdited),rdt=An(e=>e?.prototype?.getAvatarURL),DAe=vt('"embed_"),');F2=e=>e?.ghostPinged||e?.deleted&&idt(e),idt=e=>e&&!!(e.mention_everyone||e.mentions?.find(t=>(typeof t=="string"?t:t.id)===z.getCurrentUser().id)),MAe=e=>{if(F2(e))return"GHOST_PINGED";if(e.deleted)return"DELETED";if(e.editHistory?.length)return"EDITED";throw new Error("Unknown message status")};hk=e=>new Date(e),wB=e=>(e.timestamp&&(e.timestamp=hk(e.timestamp)),e.editedTimestamp&&(e.editedTimestamp=hk(e.editedTimestamp)),e.embeds&&(e.embeds=e.embeds.map(t=>DAe(e.channel_id,e.id,t))),e),kB=L2(e=>{if(!e?.message)return null;let t=new ndt(e.message);t.timestamp=hk(t.timestamp);let o=t.editHistory?.map(wB);return o&&o.length>0&&(t.editHistory=o),t.editedTimestamp&&(t.editedTimestamp=hk(t.editedTimestamp)),t.firstEditTimestamp&&(t.firstEditTimestamp=hk(t.firstEditTimestamp)),t.author=z.getUser(t.author.id)??new rdt(t.author),t.author.nick=t.author.globalName??t.author.username,t.embeds=t.embeds.map(n=>DAe(t.channel_id,t.id,n)),t.poll&&(t.poll.expiry=ll(t.poll.expiry)),t.messageSnapshots&&t.messageSnapshots.map(n=>wB(n.message)),t})});function xk(e,t=!0){let o=typeof e.toJS=="function"?JSON.parse(JSON.stringify(e.toJS())):{...e};return t&&(o.author.phone=void 0,o.author.email=void 0),o.ghostPinged=o.mentioned??F2(e),o.guildId=o.guild_id??O2(o.channel_id),o.embeds=(o.embeds??[]).map(sdt),o.deleted=o.deleted??!1,o.deletedTimestamp=o.deleted?new Date().toISOString():void 0,o.editHistory=o.editHistory??[],o.type===19&&(o.message_reference=e.message_reference||e.messageReference,o.message_reference&&(e.referenced_message?o.referenced_message=xk(e.referenced_message):Rt.getMessage(o.message_reference.channel_id,o.message_reference.message_id)&&(o.referenced_message=xk(Rt.getMessage(o.message_reference.channel_id,o.message_reference.message_id))))),o}function PAe(e){let t=xk(e,!1);return t.ourCache=!0,t}function sdt(e){if(!e.id)return e;let t={};return typeof e.rawTitle=="string"&&(t.title=e.rawTitle),typeof e.rawDescription=="string"&&(t.description=e.rawDescription),typeof e.referenceId<"u"&&(t.reference_id=e.referenceId),typeof e.type<"u"&&(t.type=e.type),typeof e.url<"u"&&(t.url=e.url),typeof e.provider=="object"&&(t.provider={name:e.provider.name,url:e.provider.url}),typeof e.footer=="object"&&(t.footer={text:e.footer.text,icon_url:e.footer.iconURL,proxy_icon_url:e.footer.iconProxyURL}),typeof e.author=="object"&&(t.author={name:e.author.name,url:e.author.url,icon_url:e.author.iconURL,proxy_icon_url:e.author.iconProxyURL}),typeof e.timestamp=="object"&&e.timestamp._isAMomentObject&&(t.timestamp=e.timestamp.milliseconds()),typeof e.thumbnail=="object"&&(typeof e.thumbnail.proxyURL=="string"||typeof e.thumbnail.url=="string"&&!e.thumbnail.url.endsWith("?format=jpeg"))&&(t.thumbnail={url:e.thumbnail.url,proxy_url:typeof e.thumbnail.proxyURL=="string"?e.thumbnail.proxyURL.split("?format")[0]:void 0,width:e.thumbnail.width,height:e.thumbnail.height}),typeof e.image=="object"&&(t.image={url:e.image.url,proxy_url:e.image.proxyURL,width:e.image.width,height:e.image.height}),typeof e.video=="object"&&(t.video={url:e.video.url,proxy_url:e.video.proxyURL,width:e.video.width,height:e.video.height}),Array.isArray(e.fields)&&e.fields.length&&(t.fields=e.fields.map(o=>({name:o.rawName,value:o.rawValue,inline:o.inline}))),t}function xX(e){return{discriminator:e.discriminator,username:e.username,avatar:e.avatar,id:e.id,bot:e.bot,public_flags:(typeof e.publicFlags<"u",e.publicFlags)}}var _Ae=x(()=>{"use strict";d();B();rm()});function bX(e,t,o,n){if(!e.length||!t?.length)return;let i=[],s=[];for(let m=0,g=e.length;m<g;m++){let{id:y}=e[m];i.push({id:y,time:parseInt(y)/4194304+hX})}for(let m=0,g=t.length;m<g;m++){let y=t[m];y&&s.push({id:y.id,time:parseInt(y.id)/4194304+hX,message:y})}if(s.sort((m,g)=>m.time-g.time),!s.length)return;let{time:a}=i[i.length-1],[{time:l}]=i,c=n?0:s.findIndex(m=>m.time>a);if(c===-1)return;let u=o?s.length-1:NAe(s,m=>m.time<l);if(u===-1)return;let p=s.slice(c,u+1);p.push(...i),p.sort((m,g)=>g.time-m.time);for(let m=0,g=p.length;m<g;m++){let{id:y,message:b}=p[m];e.findIndex(v=>v.id===y)===-1&&b&&e.splice(m,0,b)}}function vX({channelId:e,authorId:t,guildId:o,flags:n,bot:i,ghostPinged:s,isCachedByUs:a,webhookId:l}){if(((n??0)&RAe)===RAe)return!0;e&&o==null&&(o=O2(e));let u=z.getCurrentUser().id,{ignoreUsers:p,ignoreChannels:m,ignoreGuilds:g}=Ge.plugins.MessageLogger,{ignoreBots:y,ignoreSelf:b,ignoreWebhooks:v}=Yt.store;if(b&&t===u)return!0;if(Yt.store.alwaysLogDirectMessages&&ne.getChannel(e??"-1")?.isDM?.())return!1;let E=Yt.store.alwaysLogCurrentChannel&&st.getChannelId()===e,A=[t,e,o],C=Yt.store.whitelistedIds.split(","),I=Yt.store.whitelistedIds.split(",").some(he=>A.includes(he)),N=C.includes(t),_=C.includes(e),O=C.includes(o),F=[...Yt.store.blacklistedIds.split(","),...(p??[]).split(","),...(m??[]).split(","),...(g??[]).split(",")],J=F.some(he=>A.includes(he)),G=F.includes(t),te=F.includes(e),K=Yt.store.ignoreMutedGuilds,oe=Yt.store.ignoreMutedCategories,le=Yt.store.ignoreMutedChannels;return y&&i&&!N||v&&l&&!N?!0:s||N?!1:G?!0:_?!1:te?!0:E||I?!1:!!(a&&!Yt.store.cacheMessagesFromServers&&o!=null&&!O||J&&(!N||!_)||o!=null&&K&&yX.isMuted(o)||e!=null&&oe&&yX.isCategoryMuted(o,e)||e!=null&&le&&yX.isChannelMuted(o,e))}function LAe(e,t){SX(e==="blacklistedIds"?"whitelistedIds":"blacklistedIds",t),adt(e,t)}function adt(e,t){let o=Yt.store[e]?Yt.store[e].split(","):[];o.push(t),Yt.store[e]=o.join(",")}function SX(e,t){let o=Yt.store[e]?Yt.store[e].split(","):[],n=o.indexOf(t);n!==-1&&o.splice(n,1),Yt.store[e]=o.join(",")}var hX,RAe,yX,rm=x(()=>{"use strict";d();Q();Ku();fe();B();gX();_Ae();gX();hX=14200704e5;RAe=64,yX=Ft("UserGuildSettingsStore")});var AX={};Ao(AX,{deleteImage:()=>EX,downloadAttachment:()=>kX,getImage:()=>wX});async function wX(e,t){let o=AB.get(e)?.path;return o?zt(o,EB):null}async function kX(e){return await OAe(e)}async function EX(e){let t=AB.get(e)?.path;if(t)return await Ta(t,EB)}async function OAe(e,t=0){if(!e?.url||!e?.id||!e?.fileExtension){sa.error("Invalid attachment",e);return}let o=await fetch(e.url);if(o.status!==200){if(o.status===404||o.status===403)return;if(t++,t>3){sa.warn(`Failed to get attachment ${e.id} for caching, error code ${o.status}`);return}return await tl(1e3),OAe(e,t)}let n=await o.arrayBuffer(),i=`${Kg}/${e.id}${e.fileExtension}`;return await Gt(i,new Uint8Array(n),EB),AB.set(e.id,{attachmentId:e.id,path:i}),i}var EB,AB,CX=x(()=>{"use strict";d();vn();Ku();R2();xt();EB=i0("MessageLoggerImageData","MessageLoggerImageStore"),AB=new Map;(async()=>{try{(await bL(EB)).forEach(t=>{let o=t.toString();o.startsWith(Kg)&&AB.set(o.split("/")?.[1]?.split(".")?.[0],{attachmentId:o.split("/")?.[1]?.split(".")?.[0],path:o})})}catch(e){sa.error("Failed to get idb images",e)}})()});var DX={};Ao(DX,{cacheMessageImages:()=>TX,deleteMessageImages:()=>ldt,getAttachmentBlobUrl:()=>IX,getFileExtension:()=>FAe,isAttachmentGoodToCache:()=>UAe});function FAe(e){let t=e.match(/(\.[a-zA-Z0-9]+)(?:\?.*)?$/);return t?t[1]:null}function UAe(e,t){if(e.size>Yt.store.attachmentSizeLimitInMegabytes*1024*1024)return sa.log("Attachment too large to cache",e.filename),!1;let o=Yt.store.attachmentFileExtensions.trim();if(o==="")return!0;let n=o.split(",");return t.startsWith(".")&&(t=t.slice(1)),!t||!n.includes(t)?(sa.log("Attachment not in allowed file extensions",e.filename),!1):!0}async function TX(e){try{for(let t of e.attachments){let o=FAe(t.filename??t.url)??t?.content_type?.split("/")?.[1]??".png";if(!UAe(t,o)){sa.log("skipping",t.filename);continue}t.oldUrl=t.url,t.oldProxyUrl=t.proxy_url,t?.content_type?.includes(";")||(t.url=t.proxy_url),t.proxy_url=t.url,t.fileExtension=o;let n=await kX(t);if(!n){sa.error("Failed to cache attachment",t);continue}t.path=n}}catch(t){sa.error("Error caching message images:",t)}}async function ldt(e){for(let t=0;t<e.attachments.length;t++){let o=e.attachments[t];await EX(o.id)}}var IX,CB=x(()=>{"use strict";d();Ku();SB();CX();IX=L2(async e=>{let t=await wX(e.id,e.fileExtension);if(!t)return null;let o=new Blob([t]);return URL.createObjectURL(o)})});var LX={};Ao(LX,{DBMessageStatus:()=>U2,addMessageIDB:()=>RX,addMessagesBulkIDB:()=>bk,cachedMessages:()=>im,clearMessagesIDB:()=>Sk,countMessagesByStatusIDB:()=>NX,countMessagesIDB:()=>MX,db:()=>Ts,deleteMessageIDB:()=>vk,deleteMessagesBulkIDB:()=>Yg,getAllMessagesIDB:()=>BX,getDateStortedMessagesByStatusIDB:()=>TB,getMessageIDB:()=>pdt,getMessagesByChannelAndAfterTimestampIDB:()=>_X,getMessagesByStatusIDB:()=>mdt,getMessagesForChannelIDB:()=>ddt,getOlderThanTimestampForGuildsIDB:()=>yk,getOlderThanTimestampIDB:()=>zAe,getOldestMessagesIDB:()=>PX,hasMessageIDB:()=>udt,initIDB:()=>HAe});async function Ly(e){for(let t of e){$Ae(t);for(let o of t.message.attachments){let n=await IX(o);n&&(o.url=n+"#",o.proxy_url=n+"#")}}return e}async function $Ae(e){return e&&(im.set(e.message_id,e.message),e)}async function HAe(){Ts=await AAe(IAe,1,{upgrade(e){let t=e.createObjectStore("messages",{keyPath:"message_id"});t.createIndex("by_channel_id","channel_id"),t.createIndex("by_status","status"),t.createIndex("by_timestamp","message.timestamp"),t.createIndex("by_timestamp_and_message_id",["channel_id","message.timestamp"])}})}async function udt(e){return im.has(e)||await Ts.count("messages",e)>0}async function MX(){return Ts.count("messages")}async function NX(e){return Ts.countFromIndex("messages","by_status",e)}async function BX(){return Ly(await Ts.getAll("messages"))}async function ddt(e){return Ly(await Ts.getAllFromIndex("messages","by_channel_id",e))}async function pdt(e){return $Ae(await Ts.get("messages",e))}async function mdt(e){return Ly(await Ts.getAllFromIndex("messages","by_status",e))}async function PX(e){return Ly(await Ts.getAllFromIndex("messages","by_timestamp",void 0,e))}async function zAe(e){let t=Ts.transaction("messages","readonly"),{store:o}=t,i=await o.index("by_timestamp").openCursor(IDBKeyRange.upperBound(e));if(!i)return[];let s=[];for await(let a of i)s.push(a.value);return Ly(s)}async function yk(e,t,o){return(await zAe(e)).filter(i=>{let{message:s}=i,l=ne.getChannel(s.channel_id)?.guild_id!=null,c=o&&t&&s.channel_id===t;return l&&!c})}async function TB(e,t,o){let n=Ts.transaction("messages","readonly"),{store:i}=n,s=i.index("by_status"),a=e?"prev":"next",l=await s.openCursor(IDBKeyRange.only(o),a);if(!l)return console.log("No messages found"),[];let c=[];for await(let u of l)if(c.push(u.value),c.length>=t)break;return Ly(c)}async function _X(e,t){let o=Ts.transaction("messages","readonly"),{store:n}=o,s=await n.index("by_timestamp_and_message_id").openCursor(IDBKeyRange.bound([e,t],[e,"\uFFFF"]));if(!s)return console.log("No messages found in range"),[];let a=[];for await(let l of s)a.push(l.value);return Ly(a)}async function RX(e,t){await Ts.put("messages",{channel_id:e.channel_id,message_id:e.id,status:t,message:e}),im.set(e.id,e)}async function bk(e,t){let o=Ts.transaction("messages","readwrite"),{store:n}=o;await Promise.all([...e.map(i=>n.add({channel_id:i.channel_id,message_id:i.id,status:t??MAe(i),message:i})),o.done]),e.forEach(i=>im.set(i.id,i))}async function vk(e){await Ts.delete("messages",e),im.delete(e)}async function Yg(e){let t=Ts.transaction("messages","readwrite"),{store:o}=t;await Promise.all([...e.map(n=>o.delete(n)),t.done]),e.forEach(n=>im.delete(n))}async function Sk(){await Ts.clear("messages"),im.clear()}var U2,Ts,im,zf=x(()=>{"use strict";d();B();TAe();rm();R2();CB();U2=(n=>(n.DELETED="DELETED",n.EDITED="EDITED",n.GHOST_PINGED="GHOST_PINGED",n))(U2||{}),im=new Map;HAe()});async function fdt(){{let t=await i1(".json");return new Promise((o,n)=>{if(!t)return n("No file selected");let i=new FileReader;i.onload=()=>o(i.result),i.onerror=n,i.readAsText(t)})}let e=await qc.getSettings();return qc.chooseFile("Logs",[{extensions:["json"],name:"logs"}],e.logsDir)}async function IB(){try{let e=await fdt(),t=JSON.parse(e),o=[];if(t.deletedMessages||t.editedMessages?o=Object.values(t).filter(n=>n.message).map(n=>n.message):o=t.messages.map(n=>n.message),!Array.isArray(o))throw new Error("Invalid log file format");if(!o.length)throw new Error("No messages found in log file");if(!o.every(n=>n.id&&n.channel_id&&n.timestamp))throw new Error("Invalid message format");await bk(o),D.show({id:D.genId(),message:"Successfully imported logs",type:D.Type.SUCCESS})}catch(e){console.error(e),D.show({id:D.genId(),message:"Error importing logs. Check the console for more information",type:D.Type.FAILURE})}}async function GAe(){let e="message-logger-logs-idb.json",t=await BX(),o=JSON.stringify({messages:t},null,2);{let n=new File([o],e,{type:"application/json"}),i=document.createElement("a");i.href=URL.createObjectURL(n),i.download=e,document.body.appendChild(i),i.click(),setImmediate(()=>{URL.revokeObjectURL(i.href),document.body.removeChild(i)})}}var OX=x(()=>{"use strict";d();zf();rd();B();Ku()});var gdt,hdt,qAe,xdt,DB,FX=x(()=>{"use strict";d();B();rm();SB();gdt=["server","guild","channel","in","user","from","message","has","before","after","around","near","during"],hdt=L2((e="")=>{let t=e.trim();if(!t)return e;let o=!1;t.startsWith("!")&&(o=!0,t=t.substring(t.length,1));let[n,i]=t.split(" ",2);if(!n)return e;let[s,a]=n.split(":");return!s||!a||!gdt.includes(s)?e:{key:s,value:a,negate:o}}),qAe=e=>{let t=e.split(" ").map(hdt),o=t.filter(i=>typeof i!="string"),n=t.filter(i=>typeof i=="string");return{queries:o,rest:n}},xdt=/[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/,DB=(e,t,o)=>{switch(e){case"in":case"channel":let n=ne.getChannel(o.channel_id);if(!n)return o.channel_id===t;let{name:i,id:s}=n;return s===t||i.toLowerCase().includes(t.toLowerCase());case"message":return o.id===t;case"from":case"user":return o.author.id===t||o.author?.username?.toLowerCase().includes(t.toLowerCase())||o.author?.globalName?.toLowerCase()?.includes(t.toLowerCase());case"guild":case"server":{let a=o.guildId??O2(o.channel_id);if(!a)return!1;let l=ct.getGuild(a);return l?l.id===t||l.name.toLowerCase().includes(t.toLowerCase()):a===t}case"before":return new Date(o.timestamp)<new Date(t);case"after":return new Date(o.timestamp)>new Date(t);case"around":case"near":case"during":return Math.abs(new Date(o.timestamp)?.getTime()-new Date(t)?.getTime())<1e3*60*60*24;case"has":switch(t){case"attachment":return o.attachments.length>0;case"image":return o.attachments.some(a=>a?.content_type?.startsWith("image"))||o.embeds.some(a=>a.image||a.thumbnail);case"video":return o.attachments.some(a=>a?.content_type?.startsWith("video"))||o.embeds.some(a=>a.video);case"embed":return o.embeds.length>0;case"link":return o.content.match(xdt);default:return!1}default:return!1}}});function ydt(e,t){let[o,n]=L(e);return se(()=>{let i=setTimeout(()=>{n(e)},t);return()=>{clearTimeout(i)}},[e,t]),o}function jAe(e,t,o,n){let[i,s]=L(!0),[a,l]=L([]),[c,u]=L(0),[p,m]=L(0),g=ydt(e,300);return se(()=>{MX().then(y=>m(y))},[i]),se(()=>{let y=!0;return(async()=>{let v=bdt(t);if(g===""){let[E,A]=await Promise.all([TB(o,n,v),NX(v)]);y&&(l(E),u(A)),s(!1)}else{let E=await TB(o,Number.MAX_SAFE_INTEGER,v),{queries:A,rest:C}=qAe(g),I=E.filter(N=>{for(let _ of A){let O=DB(_.key,_.value,N.message);if(_.negate?O:!O)return!1}return C.every(_=>N.message.content.toLowerCase().includes(_.toLowerCase()))});y&&(l(I),u(Number.MAX_SAFE_INTEGER)),s(!1)}})(),()=>{y=!1}},[g,o,n,t,i]),{messages:a,statusTotal:c,total:p,pending:i,reset:()=>s(!0)}}function bdt(e){switch(e){case"Deleted":return"DELETED";case"Edited":return"EDITED";default:return"GHOST_PINGED"}}var WAe=x(()=>{"use strict";d();zf();FX();B();$2()});function kdt({modalProps:e,initalQuery:t}){let[o,n]=L("Deleted"),[i,s]=L(t??""),[a,l]=L(Yt.store.sortNewest),[c,u]=L(Yt.store.messagesToDisplayAtOnceInLogs),p=kt(null),{messages:m,total:g,statusTotal:y,pending:b,reset:v}=jAe(i,o,a,c);return r(Pe,{className:Oi("root"),...e,size:"large"},r(je,{className:Oi("header")},r(qe,{value:i,onChange:E=>s(E),style:{width:"100%"},placeholder:"Filter Messages"}),r(Rr,{type:"top",look:"brand",className:Oi("tab-bar"),selectedItem:o,onItemSelect:E=>{n(E),u(Yt.store.messagesToDisplayAtOnceInLogs),p.current?.firstElementChild?.scrollTo(0,0)}},r(Rr.Item,{className:Oi("tab-bar-item"),id:"Deleted"},"Deleted"),r(Rr.Item,{className:Oi("tab-bar-item"),id:"Edited"},"Edited"),r(Rr.Item,{className:Oi("tab-bar-item"),id:"Ghost Pinged"},"Ghost Pinged"))),r("div",{style:{opacity:e.transitionState===1?"1":"0"},className:Oi("content-container"),ref:p},e.transitionState===1&&r($e,{className:Oi("content")},m!=null&&g===0&&r(Tdt,{hasQuery:i.length!==0,reset:v}),!b&&m!=null&&r(Adt,{visibleMessages:m,canLoadMore:m.length<y&&m.length>=Yt.store.messagesToDisplayAtOnceInLogs,tab:o,sortNewest:a,reset:v,handleLoadMore:()=>u(E=>E+Yt.store.messagesToDisplayAtOnceInLogs)}))),r(ht,null,r(U,{color:U.Colors.RED,onClick:()=>go.show({title:"Clear Logs",body:"Are you sure you want to clear all the logs",confirmText:"Clear",confirmColor:U.Colors.RED,cancelText:"Cancel",onConfirm:async()=>{await Sk(),v()}})},"Clear All Logs"),r(U,{style:{marginRight:"16px"},color:U.Colors.BRAND,disabled:m?.length===0,onClick:()=>go.show({title:"Clear Logs",body:`Are you sure you want to clear ${m.length} logs`,confirmText:"Clear",confirmColor:U.Colors.RED,cancelText:"Cancel",onConfirm:async()=>{await Yg(m.map(E=>E.message_id)),v()}})},"Clear Visible Logs"),r(U,{style:{marginRight:"16px"},color:U.Colors.PRIMARY,onClick:()=>{l(E=>{let A=!E;return Yt.store.sortNewest=A,A}),p.current?.firstElementChild?.scrollTo(0,0)}},"Sort ",a?"Oldest First":"Newest First")))}function Edt({visibleMessages:e,canLoadMore:t,sortNewest:o,tab:n,reset:i,handleLoadMore:s}){return e.length===0?r(Cdt,{tab:n}):r("div",{className:Oi("content-inner")},e.map(({message:a},l)=>r(Idt,{key:a.id,log:{message:a},reset:i,isGroupStart:Ddt(a,e[l-1]?.message,o)})),t&&r(U,{style:{marginTop:"1rem",width:"100%"},size:U.Sizes.SMALL,onClick:()=>s()},"Load More"))}function Cdt({tab:e}){let t=i=>{switch(i){case"Deleted":return{nextTab:"Edited",lastTab:"Ghost Pinged"};case"Edited":return{nextTab:"Ghost Pinged",lastTab:"Deleted"};case"Ghost Pinged":return{nextTab:"Deleted",lastTab:"Edited"};default:return{nextTab:"",lastTab:""}}},{nextTab:o,lastTab:n}=t(e);return r("div",{className:Oi("empty-logs","content-inner"),style:{textAlign:"center"}},r(Y,{size:"lg"},"No results in ",r("b",null,e),"."),r(Y,{size:"lg",style:{marginTop:"0.2rem"}},"Maybe try ",r("b",null,o)," or ",r("b",null,n)))}function Tdt({hasQuery:e,reset:t}){return r("div",{className:Oi("empty-logs","content-inner"),style:{textAlign:"center"}},r(Be,{flexDirection:"column",style:{position:"relative"}},r(Y,{size:"lg"},"Empty eh"),!e&&r(f,null,r(Ue,{text:"ML Enhanced now stores logs in indexeddb. You need to import your old logs from the logs directory. Importing wont overwrite existing logs"},({onMouseEnter:o,onMouseLeave:n})=>r("div",{className:Oi("info-icon"),onMouseEnter:o,onMouseLeave:n},r(cu,null))),r(U,{onClick:()=>IB().then(()=>t())},"Import Logs"))))}function Idt({log:e,isGroupStart:t,reset:o}){let n=rt(()=>kB(e),[e]);if(!n)return null;let i=ne.getChannel(n?.channel_id),s=ct.getGuild(i?.guild_id);return r("div",{onContextMenu:a=>{Dt.openContextMenu(a,()=>r(M.Menu,{navId:"message-logger",onClose:()=>V.dispatch({type:"CONTEXT_MENU_CLOSE"}),"aria-label":"Message Logger"},r(M.MenuItem,{key:"jump-to-message",id:"jump-to-message",label:"Jump To Message",action:()=>{ho.transitionTo(`/channels/${ne.getChannel(n.channel_id)?.guild_id??"@me"}/${n.channel_id}${n.id?"/"+n.id:""}`),li()}}),r(M.MenuItem,{key:"open-user-profile",id:"open-user-profile",label:"Open user profile",action:()=>{li(),or(n.author.id)}}),r(M.MenuItem,{key:"copy-content",id:"copy-content",label:"Copy Content",action:()=>$t(n.content)}),r(M.MenuItem,{key:"copy-user-id",id:"copy-user-id",label:"Copy User ID",action:()=>$t(n.author.id)}),r(M.MenuItem,{key:"copy-message-id",id:"copy-message-id",label:"Copy Message ID",action:()=>$t(n.id)}),r(M.MenuItem,{key:"copy-channel-id",id:"copy-channel-id",label:"Copy Channel ID",action:()=>$t(n.channel_id)}),e.message.guildId!=null&&r(M.MenuItem,{key:"copy-server-id",id:"copy-server-id",label:"Copy Server ID",action:()=>$t(e.message.guildId)}),r(M.MenuItem,{key:"delete-log",id:"delete-log",label:"Delete Log",color:"danger",action:()=>vk(e.message.id).then(()=>o())})))}},r(Sdt,{className:`${Oi("msg-preview")} ${n.deleted?"messagelogger-deleted":""}`,author:n.author,message:n,compact:!1,isGroupStart:t,hideSimpleEmbedContent:!1,childrenAccessories:r(wdt,{channelMessageProps:{channel:ne.getChannel(n.channel_id)||new vdt({id:""}),message:n,compact:!1,groupId:"1",id:n.id,isLastItem:!1,isHighlight:!1,renderContentOnly:!1},hasSpoilerEmbeds:!1,isInteracting:!1,showClydeAiEmbeds:!0,isAutomodBlockedMessage:!1})}),Yt.store.ShowWhereMessageIsFrom&&i?.isDM()&&n?.author&&r("span",{className:`${Oi("from")} ${n.deleted?Oi("from-deleted"):Oi("from-edited")}`},"From ",n.author.username,"'s DMs"),Yt.store.ShowWhereMessageIsFrom&&i?.isGroupDM()&&i?.name&&r("span",{className:`${Oi("from")} ${n.deleted?Oi("from-deleted"):Oi("from-edited")}`},"From ",i.name," Group DM"),Yt.store.ShowWhereMessageIsFrom&&!i?.isDM()&&!i?.isGroupDM()&&i?.name&&s?.name&&r("span",{className:`${Oi("from")} ${n.deleted?Oi("from-deleted"):Oi("from-edited")}`},"From ",i.name," in ",s.name))}function Ddt(e,t,o){if(!e||!t||e.id===t.id)return!0;let[n,i]=o?[t,e]:[e,t];return n.author.id!==i.author.id?!0:Math.abs((new Date(n.timestamp)?.getTime()-new Date(i.timestamp)?.getTime())/(1e3*60))>=5}var vdt,Sdt,wdt,Oi,Adt,sm,$2=x(()=>{"use strict";d();Et();eo();ao();zf();Ku();rm();OX();nt();mt();at();qo();fe();B();WAe();vdt=vt(".is_message_request_timestamp,"),Sdt=Rn(()=>da(e=>e?.type?.toString().includes("previewLinkTarget:")&&!e?.type?.toString().includes("HAS_THREAD"))),wdt=Rn(()=>ap("channelMessageProps:{message:")),Oi=de("msg-logger-modal-");Adt=Rn(()=>X.memo(Edt));sm=e=>Ee(t=>r(kdt,{modalProps:t,initalQuery:e}))});function KAe(){return r(ul,{className:"vc-log-toolbox-btn",onClick:()=>sm(),tooltip:"Open Logs",icon:UX})}var UX,YAe=x(()=>{"use strict";d();Hm();fe();$2();UX=De("0-1.27-.97l-2.5.7a3")});var $X={};Ao($X,{addMessage:()=>MB});var QAe,Mdt,MB,HX=x(()=>{"use strict";d();Ku();zf();rm();CB();QAe=0,Mdt=60*1e3,MB=async(e,t,o)=>{Yt.store.saveImages&&t==="DELETED"&&await TX(e);let n=xk(e);if(await RX(n,t),Yt.store.timeBasedCleanupMinutes>0){let i=Date.now();if(i-QAe>Mdt){QAe=i;let s=new Date(i-Yt.store.timeBasedCleanupMinutes*60*1e3).toISOString(),a=await yk(s,o,Yt.store.preserveCurrentChannel);a.length>0&&(sa.info(`Deleting ${a.length} old server messages older than ${Yt.store.timeBasedCleanupMinutes} minutes`),await Yg(a.map(l=>l.message_id)))}}if(Yt.store.messageLimit>0){let i=await Ts.count("messages");if(i>Yt.store.messageLimit){let s=i-Yt.store.messageLimit;if(s<=0||s>=Yt.store.messageLimit)return;let a=await PX(s);sa.info(`Deleting ${s} oldest messages`),await Yg(a.map(l=>l.message_id))}}}});function ZAe(e,t){return function({option:n}){return null}}function Ndt({settingsKey:e,successMessage:t}){let o=Yt.store[e];function n(s){let a=s.split("\\").length>1?s.split("\\"):s.split("/");return a.slice(a.length-2,a.length).join("\\")}async function i(){try{let s=await qc.chooseDir(e);return Yt.store[e]=s,D.show({id:D.genId(),type:D.Type.SUCCESS,message:t})}catch{D.show({id:D.genId(),type:D.Type.FAILURE,message:"Failed to update directory"})}}return r("div",{className:zX("-container")},r("div",{onClick:()=>$t(o),className:zX("-input")},o==null||o===Kg?"Choose Folder":n(o)),r(U,{className:zX("-button"),size:U.Sizes.SMALL,onClick:i},"Browse"))}var zX,XAe,JAe,VAe=x(()=>{"use strict";d();ut();R2();nt();mt();B();Ku();zX=de("folder-upload");XAe=ZAe("imageCacheDir","Successfully updated Image Cache Dir"),JAe=ZAe("logsDir","Successfully updated Logs Dir")});var GX,e9e=x(()=>{"use strict";d();GX=["com","exe","dll","ocx","ps1","ps1xml","ps2","ps2xml","psc1","psc2","msh","msh1","msh2","mshxml","msh1xml","msh2xml","js","jse","vbs","vb","vbe","cmd","bat","hta","inf","reg","pif","scr","cpl","scf","msc","pol","hlp","chm","ws","wsf","wsc","wsh","jar","z","bz2","cab","tar","ace","msi","msp","mst","msu","ppkg","bak","tmp","ost","pst","pkg","iso","img","vhd","vhdx","application","lock","lck","sln","cs","csproj","resx","config","resources","pdb","manifest","doc","dot","wbk","xls","xlt","xlm","xla","ppt","pot","pps","ade","adp","mdb","cdb","mda","mdn","mdt","mdf","mde","ldb","wps","xlsb","xlam","xll","xlw","ppam"]});var Yt,t9e=x(()=>{"use strict";d();Q();tt();$();B();Jh();Ku();VAe();$2();zf();e9e();R2();OX();Yt=R({saveMessages:{default:!0,type:3,description:"Whether to save the deleted and edited messages."},saveImages:{type:3,description:"Save deleted attachments.",default:!1},sortNewest:{default:!0,type:3,description:"Sort logs by newest."},cacheMessagesFromServers:{default:!1,type:3,description:"Usually message logger only logs from whitelisted ids and dms, enabling this would mean it would log messages from all servers as well. Note that this may cause the cache to exceed its limit, resulting in some messages being missed. If you are in a lot of servers, this may significantly increase the chances of messages being logged, which can result in a large message record and the inclusion of irrelevant messages."},ignoreBots:{type:3,description:"Whether to ignore messages by bots",default:!1,onChange(){Ge.plugins.MessageLogger.ignoreBots=!1}},ignoreWebhooks:{type:3,description:"Whether to ignore messages by webhooks",default:!1},ignoreSelf:{type:3,description:"Whether to ignore messages by yourself",default:!1,onChange(){Ge.plugins.MessageLogger.ignoreSelf=!1}},ignoreMutedGuilds:{default:!1,type:3,description:"Messages in muted guilds will not be logged. Whitelisted users/channels in muted guilds will still be logged."},ignoreMutedCategories:{default:!1,type:3,description:"Messages in channels belonging to muted categories will not be logged. Whitelisted users/channels in muted guilds will still be logged."},ignoreMutedChannels:{default:!1,type:3,description:"Messages in muted channels will not be logged. Whitelisted users/channels in muted guilds will still be logged."},alwaysLogDirectMessages:{default:!0,type:3,description:"Always log DMs"},alwaysLogCurrentChannel:{default:!0,type:3,description:"Always log current selected channel. Blacklisted channels/users will still be ignored."},hideMessageFromMessageLoggers:{default:!1,type:3,description:"When enabled, a context menu button will be added to messages to allow you to delete messages without them being logged by other loggers. Might not be safe, use at your own risk."},ShowLogsButton:{default:!0,type:3,description:"Toggle to whenever show the toolbox or not",restartNeeded:!0},ShowWhereMessageIsFrom:{default:!1,type:3,description:"Show message channel/author name and server name"},messagesToDisplayAtOnceInLogs:{default:100,type:1,description:"Number of messages to display at once in logs & number of messages to load when loading more messages in logs."},hideMessageFromMessageLoggersDeletedMessage:{default:"redacted eh",type:0,description:"The message content to replace the message with when using the hide message from message loggers feature."},messageLimit:{default:200,type:1,description:"Maximum number of messages to save. Older messages are deleted when the limit is reached. 0 means there is no limit"},attachmentSizeLimitInMegabytes:{default:12,type:1,description:"Maximum size of an attachment in megabytes to save. Attachments larger than this size will not be saved."},attachmentFileExtensions:{default:"png,jpg,jpeg,gif,webp,mp4,webm,mp3,ogg,wav",type:0,description:"Comma separated list of file extensions to save. Attachments with file extensions not in this list will not be saved. Leave empty to save all attachments.",onChange:e=>{if(!e)return;let t=e.split(",").map(n=>n.trim().toLowerCase()),o=t.filter(n=>GX.includes(n));return o.length>0?(console.warn("Rejected invalid file extensions:",o),t.filter(n=>!GX.includes(n)).join(",")):t.join(",")}},cacheLimit:{default:1e3,type:1,description:"Maximum number of messages to store in the cache. Older messages are deleted when the limit is reached. This helps reduce memory usage and improve performance. 0 means there is no limit"},timeBasedCleanupMinutes:{default:0,type:1,description:"Automatically remove messages from servers that are older than this many minutes. Set to 0 to disable time-based cleanup."},preserveCurrentChannel:{default:!0,type:3,description:"When enabled, messages in your currently selected channel are not affected by time-based cleanup."},whitelistedIds:{default:"",type:0,description:"Whitelisted server, channel, or user IDs."},blacklistedIds:{default:"",type:0,description:"Blacklisted server, channel, or user IDs."},imageCacheDir:{type:6,description:"Select saved images directory",component:ee.wrap(XAe)},logsDir:{type:6,description:"Select logs directory",component:ee.wrap(JAe)},importLogs:{type:6,description:"Import Logs From File",component:()=>r(U,{onClick:IB},"Import Logs")},exportLogs:{type:6,description:"Export Logs From IndexedDB",component:()=>r(U,{onClick:GAe},"Export Logs")},openLogs:{type:6,description:"Open Logs",component:()=>r(U,{onClick:()=>sm()},"Open Logs")},openImageCacheFolder:{type:6,description:"Opens the image cache directory",component:()=>r(U,{disabled:!0,onClick:()=>qc.showItemInFolder(Yt.store.imageCacheDir)},"Open Image Cache Folder")},clearLogs:{type:6,description:"Clear Logs",component:()=>r(U,{color:U.Colors.RED,onClick:()=>go.show({title:"Clear Logs",body:"Are you sure you want to clear all logs?",confirmColor:U.Colors.RED,confirmText:"Clear",cancelText:"Cancel",onConfirm:()=>{Sk()}})},"Clear Logs")}})});function o9e(e,t,o){let n=NB[t](o);if(!n)return null;let i=Yt.store[e].includes(n),s=e==="blacklistedIds"?"whitelistedIds":"blacklistedIds",a=Yt.store[s].includes(n),l=e==="blacklistedIds"?"Blacklist":"Whitelist",c=()=>LAe(e,n),u=()=>SX(e,n);return r(M.MenuItem,{id:`${e}-${t}-${n}`,label:a?`Move ${t} to ${l}`:i?`Remove ${t} From ${l}`:`${l} ${t}`,action:i?u:c})}function Bdt(e,t){let o=NB[e](t);return o?r(M.MenuItem,{id:`open-logs-for-${e.toLowerCase()}`,label:`Open Logs For ${e}`,action:()=>sm(`${e.toLowerCase()}:${o}`)}):null}var NB,am,n9e,r9e,i9e=x(()=>{"use strict";d();Un();$2();zf();Ku();B();rm();NB={Server:e=>e?.guild?.id,User:e=>e?.message?.author?.id||e?.user?.id,Channel:e=>e.message?.channel_id||e.channel?.id};am=(e,t)=>{t&&(e.some(o=>o?.props?.id==="message-logger")||(t.navId==="message"&&(t.message?.deleted||t.message?.editHistory?.length>0)&&e.push(r(M.MenuItem,{id:"remove-message",label:t.message?.deleted?"Remove Message (Permanent)":"Remove Message History (Permanent)",color:"danger",action:()=>vk(t.message.id).then(()=>{t.message.deleted?V.dispatch({type:"MESSAGE_DELETE",channelId:t.message.channel_id,id:t.message.id,mlDeleted:!0}):t.message.editHistory=[]}).catch(()=>D.show({type:D.Type.FAILURE,message:"Failed to remove message",id:D.genId()}))})),e.push(r(M.MenuItem,{id:"message-logger",label:"Message Logger"},r(M.MenuItem,{id:"open-logs",label:"Open Logs",action:()=>sm()}),Object.keys(NB).map(o=>Bdt(o,t)),r(M.MenuSeparator,null),Object.keys(NB).map(o=>r(X.Fragment,{key:o},o9e("blacklistedIds",o,t),o9e("whitelistedIds",o,t))),Yt.store.hideMessageFromMessageLoggers&&t.navId==="message"&&t.message?.author?.id===z.getCurrentUser().id&&t.message?.deleted===!1&&r(f,null,r(M.MenuSeparator,null),r(M.MenuItem,{id:"hide-from-message-loggers",label:"Delete Message (Hide From Message Loggers)",color:"danger",action:async()=>{await Fn.deleteMessage(t.message.channel_id,t.message.id),Fn._sendMessage(t.message.channel_id,{content:Yt.store.hideMessageFromMessageLoggersDeletedMessage,tts:!1,invalidEmojis:[],validNonShortcutEmojis:[]},{nonce:t.message.id})}}))))))},n9e=()=>{Ll("message",am),Ll("channel-context",am),Ll("user-context",am),Ll("guild-context",am),Ll("gdm-context",am)},r9e=()=>{bu("message",am),bu("channel-context",am),bu("user-context",am),bu("guild-context",am),bu("gdm-context",am)}});var BB,s9e=x(()=>{"use strict";d();Ku();BB=class{map=new Map;constructor(){}set(t,o){if(Yt.store.cacheLimit>0&&this.map.size>=Yt.store.cacheLimit){let n=this.map.keys().next().value;n!==void 0&&this.map.delete(n)}this.map.set(t,o)}get(t){return this.map.get(t)}}});async function l9e(e){if(!e.mlDeleted&&!qX.has(e.id))try{qX.add(e.id);let t=jX?.(e.channelId,e.id);if(t==null){if(!H2.get(`${e.channelId},${e.id}`))return;t={...H2.get(`${e.channelId},${e.id}`),deleted:!0}}let o=F2(t);if(vX({channelId:t?.channel_id??e.channelId,guildId:e.guildId??t.guildId??t.guild_id,authorId:t?.author?.id,bot:t?.bot||t?.author?.bot,flags:t?.flags,ghostPinged:o,isCachedByUs:t.ourCache,webhookId:t?.webhookId}))return V.dispatch({type:"MESSAGE_DELETE",channelId:e.channelId,id:e.id,mlDeleted:!0});if(t==null||t.channel_id==null||!t.deleted)return;if(e.isBulk)return t;let n=st.getChannelId();await MB(t,o?"GHOST_PINGED":"DELETED",n)}finally{qX.delete(e.id)}}async function Pdt({channelId:e,guildId:t,ids:o}){let n=[];for(let i of o){let s=await l9e({type:"MESSAGE_DELETE",channelId:e,guildId:t,id:i,isBulk:!0});s&&n.push(s)}if(await bk(n),n.length>0&&Yt.store.timeBasedCleanupMinutes>0){let i=st.getChannelId(),s=new Date(Date.now()-Yt.store.timeBasedCleanupMinutes*60*1e3).toISOString(),a=await yk(s,i,Yt.store.preserveCurrentChannel);a.length>0&&(sa.info(`Deleting ${a.length} old server messages older than ${Yt.store.timeBasedCleanupMinutes} minutes (bulk cleanup)`),await Yg(a.map(l=>l.message_id)))}}async function _dt(e){let t=H2.get(`${e.message.channel_id},${e.message.id}`);if(vX({channelId:e.message?.channel_id,guildId:e.guildId??e.guild_id,authorId:e.message?.author?.id,bot:e.message?.author?.bot,flags:e.message?.flags,ghostPinged:F2(e.message),isCachedByUs:t?.ourCache??!1})){let i=a9e.getOrCreate(e.message.channel_id),s=i.get(e.message.id);s&&(s.editHistory=[],a9e.commit(i));return}let o=jX?.(e.message.channel_id,e.message.id);if(o==null&&t!=null&&e.message.content!=null&&t.content!==e.message.content&&(o={...t,content:e.message.content,editHistory:[...t.editHistory??[],{content:t.content,timestamp:new Date().toISOString()}]},H2.set(`${e.message.channel_id},${e.message.id}`,o)),o==null||o.channel_id==null||o.editHistory==null||o.editHistory.length===0)return;let n=st.getChannelId();await MB(o,"EDITED",n)}function Rdt(e){if(!Yt.store.cacheMessagesFromServers&&e.guildId!=null){let t=[e.channelId,e.message?.author?.id,e.guildId];if(!Yt.store.whitelistedIds.split(",").some(n=>t.includes(n)))return}H2.set(`${e.message.channel_id},${e.message.id}`,PAe(e.message))}async function Ldt(e){try{if(!e.ok||e.body.length===0){sa.error("Failed to fetch messages",e);return}let t=e.body[e.body.length-1],o=await _X(t.channel_id,t.timestamp);if(!o.length)return;let n=o.filter(s=>s.status==="DELETED");for(let s of e.body){let a=o.find(l=>l.message_id===s.id);a!=null&&a.message.editHistory&&a.message.editHistory.length>0&&(s.editHistory=a.message.editHistory)}let i=s=>z.getUser(s)||e.body.find(a=>a.author.id===s);for(let s=0,a=o.length;s<a;s++){let l=o[s];if(!l)continue;let{message:c}=l;for(let p=0,m=c.mentions.length;p<m;p++){let g=c.mentions[p],y=i(g);y&&(c.mentions[p]=xX(y))}let u=i(c.author.id);u&&(c.author=xX(u))}e.body.extra=n.map(s=>s.message)}catch(t){sa.error("Failed to fetch messages",t)}}var qc,sa,H2,a9e,jX,qX,PB,Ku=x(()=>{"use strict";d();yAe();H();At();$();fe();B();YAe();$2();zf();HX();HX();t9e();rm();i9e();rm();s9e();FX();CB();CX();qc=BAe(),sa=new ke("MessageLoggerEnhanced","#f26c6c"),H2=new BB,a9e=He("commit","getOrCreate"),qX=new Set;PB=k({name:"MessageLoggerEnhanced",authors:[w.Aria,j.keyages],description:"G'day",dependencies:["MessageLogger"],patches:[{find:"_tryFetchMessagesCached",replacement:[{match:/(?<=\.get\({url.+?then\()(\i)=>\(/,replace:"async $1=>(await $self.processMessageFetch($1),"},{match:/(?<=type:"LOAD_MESSAGES_SUCCESS",.{1,100})messages:(\i)/,replace:"get messages() {return $self.coolReAddDeletedMessages($1, this);}"}]},{find:".PREMIUM_REFERRAL&&(",replacement:{match:/deleted:\i\.deleted, editHistory:\i\.editHistory,/,replace:"deleted:$self.getDeleted(...arguments), editHistory:$self.getEdited(...arguments),"}},{find:"childrenMessageContent:null",replacement:{match:/(\i\]:!\i.{1,50},)childrenHeader:/,replace:"$1childrenAccessories:arguments[0].childrenAccessories || null,childrenHeader:"}},{find:".handleImageLoad)",replacement:{match:/(componentDidMount\(\){)(.{1,150}===(.+?)\.LOADING)/,replace:"$1if(this.props?.src?.startsWith('blob:') && this.props?.item?.type === 'VIDEO')return this.setState({readyState: $3.READY});$2"}},{find:"Using PollReferenceMessageContext without",replacement:{match:/(?:\i\.)?\i\.(?:default\.)?focusMessage\(/,replace:"!(arguments[0]?.message?.deleted || arguments[0]?.message?.editHistory?.length > 0) && $&"}},{find:'"/ephemeral-attachments/"',replacement:{match:/\i\.attachments\.some\(\i\)\|\|\i\.embeds\.some/,replace:"!arguments[0].deleted && $&"}}],settings:Yt,toolboxActions:{"Message Logger"(){sm()}},headerBarButton:{icon:UX,render(){return Yt.store.ShowLogsButton?KAe():null}},processMessageFetch:Ldt,openLogModal:sm,doesMatch:DB,reAddDeletedMessages:bX,LoggedMessageManager:$X,ImageManager:AX,imageUtils:DX,idb:LX,coolReAddDeletedMessages:(e,t)=>{try{e.extra&&bX(e,e.extra,!t.hasMoreAfter&&!t.isBefore,!t.hasMoreBefore&&!t.isAfter)}catch(o){sa.error("Failed to re-add deleted messages",o)}finally{return e}},isDeletedMessage:e=>H2.get(e)?.deleted??!1,getDeleted(e,t){let o=t?.deleted;return o==null&&e?.deleted!=null?e.deleted:o},getEdited(e,t){let o=t?.editHistory;return o==null&&e?.editHistory!=null&&e.editHistory.length>0?e.editHistory.map(wB):o},flux:{MESSAGE_DELETE:l9e,MESSAGE_DELETE_BULK:Pdt,MESSAGE_UPDATE:_dt,MESSAGE_CREATE:Rdt},async start(){this.oldGetMessage=jX=Rt.getMessage,Rt.getMessage=(o,n)=>{let i=im.get(n);return i?kB({message:i}):this.oldGetMessage(o,n)},qc.init();let{imageCacheDir:e,logsDir:t}=await qc.getSettings();Yt.store.imageCacheDir=e,Yt.store.logsDir=t,n9e()},stop(){r9e(),Rt.getMessage=this.oldGetMessage}})});var c9e,_B,u9e=x(()=>{"use strict";d();dr();Q();H();mt();$();hr();B();c9e=R({users:{type:0,description:"Comma separated list of user ids to get message toasts for",default:"",isValid(e){if(e==="")return!0;let t=e.split(",").map(o=>o.trim());for(let o of t)if(!/\d+/.test(o))return`${o} isn't a valid user id`;return!0}}}),_B=k({authors:[j.cassie,j.mochienya],name:"MessageNotifier",description:"Get toasts for when chosen users send a message",settings:c9e,flux:{MESSAGE_CREATE({message:e,channelId:t,guildId:o}){if(e.type!==0||Cn()?.id===t||!c9e.store.users.split(",").map(c=>c.trim()).includes(e.author.id))return;let i=Tt.getNickname(e.author.id)??e.author.globalName??e.author.username,s=ct.getGuild(o),a=ne.getChannel(t),l=s?`${s.name}#${a.name}`:a?.name??"their dms";$w.showNotification({title:`${i} sent a message`,body:`Click to jump to ${l}`,onClick(){ho.transitionTo(`/channels/${s?.id??"@me"}/${a.id}/${e.id}`)}})}}})});var d9e=x(()=>{});function qdt(e,t){return!e?.length||!yt(my.name)?null:my.patchActivityList({activities:e,user:t,hideTooltip:!1})}function jdt(e=""){return e==="image/gif"?"gif":e.startsWith("image/")?"image":e.startsWith("video/")?"video":"file"}function Wdt(e){let t=Date.now()-e,o=Math.floor(t/6e4),n=Math.floor(t/36e5),i=Math.floor(t/864e5);return i>=365?`${Math.floor(i/365)}y`:i>=30?`${Math.floor(i/30)}mo`:i>0?`${i}d`:n>0?`${n}h`:`${Math.max(1,o)}m`}function m9e(e,t,o=t+"s"){return e===1?`1 ${t}`:`${e} ${o}`}function Kdt(e){if(e.content)return/https?:\/\/(\S+\.gif|tenor\.com|giphy\.com)/i.test(e.content)?{text:"sent a GIF",icon:"gif"}:{text:e.content};if(e.flags&8192)return{text:"voice message",icon:"voice"};if(e.attachments?.length){let t=e.attachments.map(s=>jdt(s.content_type)),o=t.length,n=t[0];return t.every(s=>s===n)?{text:m9e(o,Gdt[n]),icon:n}:{text:m9e(o,"file"),icon:"file"}}return e.stickerItems?.length?{text:e.stickerItems[0].name,icon:"sticker"}:null}function f9e({channel:e}){let t=Je([Rt],()=>Rt.getLastMessage(e.id));if(e.isSystemDM())return r(f,null,"Official Discord Message");if(e.isMultiUserDM())return r(f,null,e.recipients.length+1," Members");if(!t)return null;let o=Kdt(t);if(!o)return null;let n=z.getCurrentUser()?.id,s=t.author.id===n?"You":t.author.globalName??t.author.username,a=o.icon?zdt[o.icon]:null;return r("div",{className:me(RB.container,RB.textXs,LB("preview"))},r("span",{className:RB.truncated},s,": ",o.text),a&&r("span",{className:LB("icon")},r(a,{size:"xxs",className:RB.icon})))}function Ydt({channel:e,user:t,activities:o,applicationStream:n,voiceChannel:i,showActivity:s}){if(s)return r($dt,{user:t,activities:o,voiceChannel:i,applicationStream:n});let a=qdt(o,t);return a?r("div",{className:p9e.subtext},r("div",{className:LB("activity-row")},r(f9e,{channel:e}),a)):r("div",{className:p9e.subtext},r(f9e,{channel:e}))}function Qdt({channel:e}){let t=Je([Rt],()=>Rt.getLastMessage(e.id));if(!t)return null;let o=ai.extractTimestamp(t.id);return r("span",{className:LB("timestamp")},Wdt(o))}function Zdt(e,t){if(!t)return!1;if(!e)return!0;let o=ai.extractTimestamp(e.id);return Date.now()-o>Hdt}var LB,p9e,RB,Fdt,Udt,$dt,Hdt,zdt,Gdt,OB,g9e=x(()=>{"use strict";d();d9e();Wo();zK();H();nt();xt();$();hr();fe();B();LB=de("vc-message-peek-"),p9e=et("subtext","channel","interactive"),RB=et("textWithIconContainer","icon","truncated","container","textXs"),Fdt=He("fetchMessages","sendMessage"),Udt=vt(".OFFLINE||",".INVISIBLE)return!1"),$dt=De("hasQuest:","hideEmoji:"),Hdt=3600*1e3,zdt={image:fu("ImageIcon"),file:fu("AttachmentIcon"),voice:fu("MicrophoneIcon"),sticker:fu("StickerIcon"),gif:fu("GifIcon"),video:fu("VideoIcon")},Gdt={gif:"GIF",image:"image",video:"video",file:"file"};OB=k({name:"MessagePeek",description:"Shows the last message preview and timestamp in the Direct Messages list.",authors:[w.prism,j.justjxke],patches:[{find:"PrivateChannel.renderAvatar",replacement:{match:/,subText:(\i)\.isSystemDM\(\).{0,500}:null,(?=name:)/,replace:",subText:$self.getSubText(arguments[0]),"}}],async start(){let e=ne.getSortedPrivateChannels();for(let t of e)Rt.getLastMessage(t.id)||await Fdt.fetchMessages({channelId:t.id,limit:1})},renderMemberListDecorator({channel:e}){return e?r(Qdt,{channel:e}):null},getSubText(e){let{channel:t,user:o,activities:n,status:i,applicationStream:s,voiceChannel:a}=e,l=Rt.getLastMessage(t.id),c=Udt({activities:n,status:i,applicationStream:s,voiceChannel:a}),u=Zdt(l,c);return r(Ydt,{channel:t,user:o,activities:n,status:i,applicationStream:s,voiceChannel:a,showActivity:u})}})});async function Xdt(e,t,o){let n=`https://translate.googleapis.com/translate_a/single?client=gtx&sl=${e}&tl=${t}&dt=t&dj=1&q=${encodeURIComponent(o)}`,i=await fetch(n);if(!i.ok)throw new Error(`Failed to translate "${o}" from ${e} to ${t}: ${i.status} ${i.statusText}`);return await i.json()}async function Jdt(e){if(e.includes("(Translated)"))return e;let t=await Xdt("auto",FB.store.targetLanguage,e);if(t.src===FB.store.targetLanguage||t.confidence<FB.store.confidenceRequirement)return e;let{sentences:o}=await t;return`${o.map(i=>i?.trans).filter(Boolean).join("")} *(Translated)*`}var FB,UB,h9e=x(()=>{"use strict";d();Q();H();$();FB=R({targetLanguage:{type:0,description:"The language messages should be translated to",default:"en",restartNeeded:!0},confidenceRequirement:{type:0,description:"The confidence required to translated the message. Best not to edit unless you know what you're doing",default:"0.8",restartNeeded:!0}});UB=k({name:"MessageTranslate",description:"Auto translate messages to your language",authors:[w.Samwich],settings:FB,TranslateMessage:Jdt,patches:[{find:'.CUSTOM_GIFT?""',replacement:{match:/renderContentOnly:\i}=\i;/,replace:"$&$self.TranslateMessage(arguments[0].message.content).then(response => arguments[0].message.content = response);"}}]})});function Vdt(){let e=z.getCurrentUser()?.id;return e?!!lo.getVoiceStateForUser(e)?.channelId:!1}async function ept(){try{return await Ir.setLoopback("mic_test",!0),Oy=!0,Vdt()&&!On.isSelfDeaf()?(await Ir.toggleSelfDeaf(),wk=!0):wk=!1,!0}catch{return!1}}async function x9e(){try{await Ir.setLoopback("mic_test",!1),Oy=!1,wk&&On.isSelfDeaf()&&await Ir.toggleSelfDeaf(),wk=!1}catch{}}function y9e({active:e=!1,className:t=""}){return r("svg",{className:t,width:"20",height:"20",viewBox:"0 0 24 24"},r("path",{fill:e?"currentColor":"var(--status-danger)",mask:e?void 0:"url(#radarmask)",fillRule:"evenodd",clipRule:"evenodd",d:"M12 3a1 1 0 0 0-1-1h-.06a1 1 0 0 0-.74.32L5.92 7H3a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h2.92l4.28 4.68a1 1 0 0 0 .74.32H11a1 1 0 0 0 1-1V3ZM15.1 20.75c-.58.14-1.1-.33-1.1-.92v-.03c0-.5.37-.92.85-1.05a7 7 0 0 0 0-13.5A1.11 1.11 0 0 1 14 4.2v-.03c0-.6.52-1.06 1.1-.92a9 9 0 0 1 0 17.5Z"}),r("path",{fill:e?"currentColor":"var(--status-danger)",mask:e?void 0:"url(#radarmask)",fillRule:"evenodd",clipRule:"evenodd",d:"M15.16 16.51c-.57.28-1.16-.2-1.16-.83v-.14c0-.43.28-.8.63-1.02a3 3 0 0 0 0-5.04c-.35-.23-.63-.6-.63-1.02v-.14c0-.63.59-1.1 1.16-.83a5 5 0 0 1 0 9.02Z"}),!e&&r(f,null,r("path",{fill:"var(--status-danger)",d:"M22.7 2.7a1 1 0 0 0-1.4-1.4l-20 20a1 1 0 1 0 1.4 1.4Z"}),r("mask",{id:"radarmask"},r("rect",{fill:"white",x:"0",y:"0",width:"24",height:"24"}),r("path",{fill:"black",d:"M23.27 4.73 19.27 .73 -.27 20.27 3.73 24.27Z"}))))}function tpt({iconForeground:e,hideTooltips:t,nameplate:o}){let[,n]=X.useReducer(s=>s+1,0),i=X.useCallback(async()=>{Oy?await x9e():await ept(),n()},[]);return r(zm,{tooltipText:t?void 0:"Mic Test Loopback",icon:r(y9e,{active:Oy,className:e}),role:"switch","aria-checked":!Oy,redGlow:!Oy,plated:o!=null,onClick:i})}var Oy,wk,opt,$B,b9e=x(()=>{"use strict";d();Gh();H();$();B();Oy=!1,wk=!1;opt=e=>r(tpt,{...e}),$B=k({name:"MicLoopbackTester",description:"Adds mic loopback test icon to the user panel",authors:[j.benjii],dependencies:["UserSettingsAPI","UserAreaAPI"],userAreaButton:{icon:y9e,render:opt},stop(){x9e(),Oy=!1,wk=!1}})});function npt(e,t){return Math.floor(Math.random()*(t-e+1))+e}async function S9e(e){let t=await fetch(`https://www.reddit.com/r/${e}/top.json?limit=100&t=all`),{children:o}=(await t.json()).data,n=npt(0,o.length-1);return o[n].data.url??""}async function w9e(){return(await(await fetch("https://nekos.best/api/v2/neko")).json()).results[0].url??""}async function k9e(){return(await(await fetch("https://api.waifu.pics/sfw/pat")).json()).url??""}function E9e(e){let t="";for(let o=0;o<e.length;o++)t+=o%2?e[o].toUpperCase():e[o].toLowerCase();return t}function A9e(e){return e=ipt(e.trim()||"freaky",rpt),kk.store.addFreakyEnding&&(e+=Math.random()<.25?" \u{1F445}":" \u2764\uFE0F"),e}function lpt(e){let t=Math.floor(Math.random()*e.length);return e[t]}function v9e(e){let t=!1;for(let o of apt){let n=new RegExp(`\\b${o[0]}\\b`,"gi");n.test(e)&&(e=e.replace(n,o[1]),t=!0)}return t?e:!1}function Ek(e){let t=/\S+|\s+/g,o=e.match(t),n="";if(o===null)return"";for(let i=0;i<o.length;i++){if(cpt(o[i])||o[i].startsWith("https://")){n+=o[i];continue}v9e(o[i])?n+=v9e(o[i]):n+=o[i].replace(/n(?=[aeo])/g,"ny").replace(/l|r/g,"w")}return n+=" "+lpt(spt),n}function WX(e){let t=[...e];return t.forEach((o,n)=>{Array.isArray(o)?t[n]=WX(o):typeof o=="string"&&(t[n]=Ek(o))}),t}var kk,rpt,ipt,C9e,T9e,I9e,D9e,spt,apt,cpt,M9e=x(()=>{"use strict";d();Q();$();kk=R({addFreakyEnding:{type:3,description:"Add \u{1F445} or \u2764\uFE0F at the end",default:!0},uwuEveryMessage:{description:"Make every single message uwuified",type:3,default:!1,restartNeeded:!1},uwuEverything:{description:"Makes *all* text uwuified - really bad idea",type:3,default:!1,restartNeeded:!0}});rpt={q:"\u{1D4FA}",w:"\u{1D500}",e:"\u{1D4EE}",r:"\u{1D4FB}",t:"\u{1D4FD}",y:"\u{1D502}",u:"\u{1D4FE}",i:"\u{1D4F2}",o:"\u{1D4F8}",p:"\u{1D4F9}",a:"\u{1D4EA}",s:"\u{1D4FC}",d:"\u{1D4ED}",f:"\u{1D4EF}",g:"\u{1D4F0}",h:"\u{1D4F1}",j:"\u{1D4F3}",k:"\u{1D4F4}",l:"\u{1D4F5}",z:"\u{1D503}",x:"\u{1D501}",c:"\u{1D4EC}",v:"\u{1D4FF}",b:"\u{1D4EB}",n:"\u{1D4F7}",m:"\u{1D4F6}",Q:"\u{1D4E0}",W:"\u{1D4E6}",E:"\u{1D4D4}",R:"\u{1D4E1}",T:"\u{1D4E3}",Y:"\u{1D4E8}",U:"\u{1D4E4}",I:"\u{1D4D8}",O:"\u{1D4DE}",P:"\u{1D4DF}",A:"\u{1D4D0}",S:"\u{1D4E2}",D:"\u{1D4D3}",F:"\u{1D4D5}",G:"\u{1D4D6}",H:"\u{1D4D7}",J:"\u{1D4D9}",K:"\u{1D4DA}",L:"\u{1D4DB}",Z:"\u{1D4E9}",X:"\u{1D4E7}",C:"\u{1D4D2}",V:"\u{1D4E5}",B:"\u{1D4D1}",N:"\u{1D4DD}",M:"\u{1D4DC}"},ipt=(e,t)=>e.split("").map(o=>t[o]||o).join("");C9e={A:".-",B:"-...",C:"-.-.",D:"-..",E:".",F:"..-.",G:"--.",H:"....",I:"..",J:".---",K:"-.-",L:".-..",M:"--",N:"-.",O:"---",P:".--.",Q:"--.-",R:".-.",S:"...",T:"-",U:"..-",V:"...-",W:".--",X:"-..-",Y:"-.--",Z:"--..",0:"-----",1:".----",2:"..---",3:"...--",4:"....-",5:".....",6:"-....",7:"--...",8:"---..",9:"----."," ":"/"},T9e=e=>e.toUpperCase().split("").map(t=>C9e[t]??"").join(" "),I9e=e=>{let t=Object.fromEntries(Object.entries(C9e).map(([n,i])=>[i,n])),o=e.split(" ").map(n=>t[n]??"").join("").toLowerCase();return o.charAt(0).toUpperCase()+o.slice(1)},D9e=e=>/^[.\-/ ]+$/.test(e),spt=["rawr x3","OwO","UwU","o.O","-.-",">w<","(\u2445\u02D8\uA4B3\u02D8)","(\uA20D\u1D17\uA20D)","(\u02D8\u03C9\u02D8)","(U \u1D55 U\u2741)","\u03C3\u03C9\u03C3","\xF2\u03C9\xF3","(///\u02EC///\u273F)","(U \uFE4F U)","( \u0361o \u03C9 \u0361o )","\u0298w\u0298",":3",":3",":3","XD","nyaa~~","mya",">_<","\u{1F633}","\u{1F97A}","\u{1F633}\u{1F633}\u{1F633}","rawr","^^","^^;;","(\u02C6 \uFECC \u02C6)\u2661","^\u2022\uFECC\u2022^","/(^\u2022\u03C9\u2022^)","(\u273Fo\u03C9o)"],apt=[["small","smol"],["cute","kawaii"],["fluff","floof"],["love","luv"],["stupid","baka"],["what","nani"],["meow","nya"],["hello","hewwo"]];cpt=e=>e.split("").every(t=>t===e[0])});var HB,N9e=x(()=>{"use strict";d();yi();vu();H();mt();$();B();M9e();HB=k({name:"MoreCommands",description:"Adds various fun and useful commands",authors:[w.Arjix,w.amy,w.Samu,j.zyqunix,j.ShadyGoat,w.thororen,w.Korbo,w.nyx,w.amy],settings:kk,commands:[{name:"systeminfo",description:"Shows system information",options:[],execute:async(e,t)=>{try{let{userAgent:o,hardwareConcurrency:n,onLine:i,languages:s}=navigator,{width:a,height:l,colorDepth:c}=window.screen,{deviceMemory:u,connection:p}=navigator,m=o.includes("Windows")?"Windows":o.includes("Mac")?"MacOS":o.includes("Linux")?"Linux":"Unknown",y=/Mobile|Android|iPhone/i.test(o)?"Mobile":"Desktop",b=o.match(/(?:chrome|firefox|safari|edge|opr)\/?\s*(\d+)/i)?.[0]||"Unknown",v=p?`${p.effectiveType||"Unknown"}`:"Unknown";return{content:[`> **Platform**: ${m}`,`> **Device Type**: ${y}`,`> **Browser**: ${b}`,`> **CPU Cores**: ${n||"N/A"}`,`> **Memory**: ${u?`${u}GB`:"N/A"}`,`> **Screen**: ${a}x${l} (${c}bit)`,`> **Languages**: ${s?.join(", ")}`,`> **Network**: ${v} (${i?"Online":"Offline"})`].join(`
`)}}catch{Vt(t.channel.id,{content:"Failed to fetch system information"})}}},{name:"getuptime",description:"Returns the system uptime",execute:async()=>{let e=performance.now()/1e3;return{content:`> **System Uptime**: ${Math.floor(e/60)} minutes`}}},{name:"gettime",description:"Returns the current server time",execute:async()=>({content:`> **Current Time**: ${new Date().toLocaleString()}`})},{name:"choose",description:"Randomly chooses from provided options",options:[{name:"choices",description:"Comma-separated list of choices",type:3,required:!0}],execute:e=>{let t=Pt(e,"choices","").split(",").map(n=>n.trim());return{content:`I choose: ${t[Math.floor(Math.random()*t.length)]}`}}},{name:"rolldice",description:"Roll a die with the specified number of sides",options:[Um],execute:e=>{let t=parseInt(Pt(e,"message","6"));return{content:`You rolled a ${Math.floor(Math.random()*t)+1}!`}}},{name:"flipcoin",description:"Flips a coin and returns heads or tails",options:[],execute:(e,t)=>({content:`The coin landed on: ${Math.random()<.5?"Heads":"Tails"}`})},{name:"ask",description:"Ask a yes/no question and get an answer",options:[Um],execute:e=>{let t=Pt(e,"message",""),o=["Yes","No","Maybe","Ask again later","Definitely not","It is certain"],n=o[Math.floor(Math.random()*o.length)];return{content:`${t} - ${n}`}}},{name:"randomanimal",description:"Get a random cat picture",options:[{name:"animal",description:"pick your animal",type:3,required:!0,choices:[{name:"cat",value:"cat",label:"cat"},{name:"dog",value:"dog",label:"dog"}]}],execute:(e,t)=>(async()=>{let o=Pt(e,"animal"),n;o==="cat"?n="https://api.thecatapi.com/v1/images/search":o==="dog"&&(n="https://api.thedogapi.com/v1/images/search");try{let i=await fetch(n);if(!i.ok)throw new Error(`Failed to fetch ${o} image`);return{content:(await i.json())[0].url}}catch{Vt(t.channel.id,{content:"Sorry, couldn't fetch a cat picture right now \u{1F63F}"})}})()},{name:"randomnumber",description:"Generates a random number between two values",options:[{name:"min",description:"Minimum value",type:4,required:!0},{name:"max",description:"Maximum value",type:4,required:!0}],execute:e=>{let t=parseInt(Pt(e,"min","0")),o=parseInt(Pt(e,"max","100")),n=Math.floor(Math.random()*(o-t+1))+t;return{content:`Random number between ${t} and ${o}: ${n}`}}},{name:"transform",description:"Transform your text with the specified option",options:[{name:"text",description:"TEXT TO UPPERCASE",type:3,required:!0},{name:"transformation",description:"transformation to apply to your text",type:3,required:!0,choices:[{name:"toLowerCase",value:"toLowerCase",label:"toLowerCase"},{name:"toUpperCase",value:"toUpperCase",label:"toUpperCase"},{name:"toLocaleLowerCase",value:"toLocaleLowerCase",label:"toLocaleLowerCase"},{name:"toLocaleUpperCase",value:"toLocaleUpperCase",label:"toLocaleUpperCase"},{name:"stay the same",value:"same",label:"stay the same"}]},{name:"repeat",description:"how many times to repeat",type:4,required:!1},{name:"reverse",description:"reverse your text",type:5,required:!1},{name:"normalize",description:"which normailze option to use",type:3,required:!1,choices:[{name:"NFC",value:"NFC",label:"NFC"},{name:"NFD",value:"NFD",label:"NFD"},{name:"NFKC",value:"NFKC",label:"NFKC"},{name:"NFKD",value:"NFKD",label:"NFKD"}]}],execute:e=>{let t=Pt(e,"text"),o=Pt(e,"transformation"),n=Pt(e,"repeat")??1,i=Pt(e,"normalize"),s=Pt(e,"reverse");return o!=="same"&&(t=t[o]?.call(t)??t),i&&(t=t.normalize(i)),s&&(t=t.split("").reverse().join("")),{content:t.repeat(n)}}},{name:"wordcount",description:"Counts the number of words in a message",options:[Um],inputType:3,execute:(e,t)=>{let n=Pt(e,"message","").trim().split(/\s+/).length;Vt(t.channel.id,{content:`The message contains ${n} words.`})}},{name:"countdown",description:"Starts a countdown from a specified number",options:[{name:"number",description:"Number to countdown from (max 10)",type:4,required:!0}],inputType:3,execute:async(e,t)=>{let o=Math.min(parseInt(Pt(e,"number","5")),10);if(isNaN(o)||o<1){Vt(t.channel.id,{content:"Please provide a valid number between 1 and 10!"});return}Vt(t.channel.id,{content:`Starting countdown from ${o}...`});for(let n=o;n>=0;n--)await new Promise(i=>setTimeout(i,1e3)),Vt(t.channel.id,{content:n===0?"\u{1F389} Go! \u{1F389}":`${n}...`})}},{name:"pat",description:"Sends a headpat gif",execute:async()=>({content:await k9e()})},{name:"nekos",description:"Send Neko",execute:async()=>({content:await w9e()})},{name:"anime-boys",description:"Send cute anime boys",options:[{name:"cat",description:"If set, this will send exclusively cute anime cat boys",type:5,required:!1}],execute:async e=>{let t="cuteanimeboys";return Pt(e,"cat")&&(t="animecatboys"),{content:await S9e(t)}}},{name:"ping",description:"Pings the bot to check if it's responding",options:[],inputType:3,execute:(e,t)=>{Vt(t.channel.id,{content:"Pong!"})}},{name:"echo",description:"Sends a message as Clyde (locally)",options:[$n],inputType:3,execute:(e,t)=>{let o=Pt(e,"message","");Vt(t.channel.id,{content:o})}},{name:"lenny",description:"Sends a lenny face",options:[$n],execute:e=>({content:Pt(e,"message","")+" ( \u0361\xB0 \u035C\u0296 \u0361\xB0)"})},{name:"mock",description:"mOcK PeOpLe",options:[Um],execute:e=>({content:E9e(Pt(e,"message",""))})},{inputType:1,name:"slap",description:"Slap someone/something.",options:[{name:"victim",description:"Thing to slap",required:!0,type:3}],execute:e=>{let t=Pt(e,"victim");return{content:`<@${z.getCurrentUser().id}> slaps ${t} around a bit with a large trout`}}},{name:"freaky",description:"it's freaky.",inputType:0,options:[{name:"message",description:"yoooo freaky",type:3,required:!0}],execute:(e,t)=>{Na(t.channel.id,{content:A9e(Pt(e,"message",""))})}},{inputType:1,name:"morse",description:"Translate to or from Morse code",options:[{name:"text",description:"Text to convert",type:3,required:!0}],execute:e=>{let t=e.find(n=>n.name==="text")?.value;return{content:`${D9e(t)?I9e(t):T9e(t)}`}}},{name:"uwuify",description:"uwuifies your messages",options:[Um],execute:e=>({content:Ek(Pt(e,"message",""))})}],patches:[{find:".isPureReactComponent=!0;",predicate:()=>kk.store.uwuEverything,replacement:{match:/(?<=.defaultProps\)void 0.{0,60})(\i)\)/,replace:"$self.uwuifyProps($1))"}}],uwuifyProps(e){return e.children&&(typeof e.children=="string"?e.children=Ek(e.children):Array.isArray(e.children)&&(e.children=WX(e.children))),e},onSend(e){kk.store.uwuEveryMessage&&(e.content=Ek(e.content))},start(){this.preSend=qi((e,t)=>this.onSend(t)),this.preEdit=Fh((e,t,o)=>this.onSend(o))},stop(){ji(this.preSend),Uh(this.preEdit)}})});var zB,B9e=x(()=>{"use strict";d();yi();H();$();zB=k({name:"MoreKaomoji",description:"Adds more Kaomoji to discord. \u30FD(\xB4\u25BD`)/",authors:[w.JacobTm,j.voidbbg],commands:[{name:"dissatisfaction",description:" \uFF1E\uFE4F\uFF1C",options:[$n],execute:e=>({content:Pt(e,"message","")+"  \uFF1E\uFE4F\uFF1C"})},{name:"smug",description:"\u0CA0_\u0CA0",options:[$n],execute:e=>({content:Pt(e,"message","")+" \u0CA0_\u0CA0"})},{name:"happy",description:"\u30FD(\xB4\u25BD`)/",options:[$n],execute:e=>({content:Pt(e,"message","")+" \u30FD(\xB4\u25BD`)/"})},{name:"crying",description:"\u0CA5_\u0CA5",options:[$n],execute:e=>({content:Pt(e,"message","")+" \u0CA5_\u0CA5"})},{name:"angry",description:"\u30FD(\uFF40\u0414\xB4)\uFF89",options:[$n],execute:e=>({content:Pt(e,"message","")+" \u30FD(\uFF40\u0414\xB4)\uFF89"})},{name:"anger",description:"\u30FD(\uFF4F`\u76BF\u2032\uFF4F)\uFF89",options:[$n],execute:e=>({content:Pt(e,"message","")+" \u30FD(\uFF4F`\u76BF\u2032\uFF4F)\uFF89"})},{name:"joy",description:"<(\uFFE3\uFE36\uFFE3)>",options:[$n],execute:e=>({content:Pt(e,"message","")+" <(\uFFE3\uFE36\uFFE3)>"})},{name:"blush",description:"\u0AEE \u02F6\u1D54 \u1D55 \u1D54\u02F6 \u10D0",options:[$n],execute:e=>({content:Pt(e,"message","")+" \u0AEE \u02F6\u1D54 \u1D55 \u1D54\u02F6 \u10D0"})},{name:"confused",description:"(\u2022\u0E34_\u2022\u0E34)?",options:[$n],execute:e=>({content:Pt(e,"message","")+" (\u2022\u0E34_\u2022\u0E34)?"})},{name:"sleeping",description:"(\u1D17_\u1D17)",options:[$n],execute:e=>({content:Pt(e,"message","")+" (\u1D17_\u1D17)"})},{name:"laughing",description:"o(\u2267\u25BD\u2266)o",options:[$n],execute:e=>({content:Pt(e,"message","")+" o(\u2267\u25BD\u2266)o"})},{name:"giving",description:"(\uFF89\u25D5\u30EE\u25D5)\uFF89*:\uFF65\uFF9F\u2727",options:[$n],execute:e=>({content:Pt(e,"message","")+" (\uFF89\u25D5\u30EE\u25D5)\uFF89*:\uFF65\uFF9F\u2727"})},{name:"peace",description:"\u270C(\u25D5\u203F-)\u270C",options:[$n],execute:e=>({content:Pt(e,"message","")+" \u270C(\u25D5\u203F-)\u270C"})},{name:"ending1",description:"\u13EA \u08EA\u05B8 \u06F0 \u0359\u22B9",options:[$n],execute:e=>({content:Pt(e,"message","")+" \u13EA \u08EA\u05B8 \u06F0 \u0359\u22B9"})},{name:"uwu",description:"(>\u2A4A<)",options:[$n],execute:e=>({content:Pt(e,"message","")+" (>\u2A4A<)"})},{name:"comfy",description:"(\u2500\u203F\u203F\u2500)\u2661",options:[$n],execute:e=>({content:Pt(e,"message","")+" (\u2500\u203F\u203F\u2500)\u2661"})},{name:"lovehappy",description:"(*\u2267\u03C9\u2266*)",options:[$n],execute:e=>({content:Pt(e,"message","")+" (*\u2267\u03C9\u2266*)"})},{name:"loveee",description:"(\u2044 \u2044>\u2044 \u25BD \u2044<\u2044 \u2044)",options:[$n],execute:e=>({content:Pt(e,"message","")+" (\u2044 \u2044>\u2044 \u25BD \u2044<\u2044 \u2044)"})},{name:"give",description:"(\u30CE= \u2A4A = )\u30CE",options:[$n],execute:e=>({content:Pt(e,"message","")+" (\u30CE= \u2A4A = )\u30CE"})},{name:"lovegive",description:"\u10E6\u309D\u25E1\u2579)\u30CE\u2661",options:[$n],execute:e=>({content:Pt(e,"message","")+" \u10E6\u309D\u25E1\u2579)\u30CE\u2661"})},{name:"music",description:"(\uFFE3\u25BD\uFFE3)/\u266B\u2022\xA8\u2022.\xB8\xB8\u266A",options:[$n],execute:e=>({content:Pt(e,"message","")+" (\uFFE3\u25BD\uFFE3)/\u266B\u2022\xA8\u2022.\xB8\xB8\u266A"})},{name:"stars",description:".\u{16954} \u0741 \u02D6\u0E4B \u08ED \u2B51",options:[$n],execute:e=>({content:Pt(e,"message","")+" .\u{16954} \u0741 \u02D6\u0E4B \u08ED \u2B51"})},{name:"lovegiving",description:"\u2E1C(\uFF61\u02C3 \u1D55 \u02C2 )\u2E1D\u2661",options:[$n],execute:e=>({content:Pt(e,"message","")+" \u2E1C(\uFF61\u02C3 \u1D55 \u02C2 )\u2E1D\u2661"})}]})});var P9e=x(()=>{});function dpt(e){return upt+encodeURIComponent(e.toString())}function GB(e,t){return fetch(dpt(e),t)}async function _9e(e,t){console.log("Loading FFmpeg...");let o="https://cdn.jsdelivr.net/npm/@ffmpeg/core@0.12.6/dist/esm",n=`/// <reference no-default-lib="true" />
/// <reference lib="esnext" />
/// <reference lib="webworker" />
const MIME_TYPE_JAVASCRIPT = "text/javascript";
const MIME_TYPE_WASM = "application/wasm";
const CORE_VERSION = "0.12.6";
const CORE_URL = \`https://cdn.jsdelivr.net/npm/@ffmpeg/core@\${CORE_VERSION}/dist/umd/ffmpeg-core.js\`;
var FFMessageType;
(function(FFMessageType) {
  FFMessageType["LOAD"] = "LOAD";
  FFMessageType["EXEC"] = "EXEC";
  FFMessageType["WRITE_FILE"] = "WRITE_FILE";
  FFMessageType["READ_FILE"] = "READ_FILE";
  FFMessageType["DELETE_FILE"] = "DELETE_FILE";
  FFMessageType["RENAME"] = "RENAME";
  FFMessageType["CREATE_DIR"] = "CREATE_DIR";
  FFMessageType["LIST_DIR"] = "LIST_DIR";
  FFMessageType["DELETE_DIR"] = "DELETE_DIR";
  FFMessageType["ERROR"] = "ERROR";
  FFMessageType["DOWNLOAD"] = "DOWNLOAD";
  FFMessageType["PROGRESS"] = "PROGRESS";
  FFMessageType["LOG"] = "LOG";
  FFMessageType["MOUNT"] = "MOUNT";
  FFMessageType["UNMOUNT"] = "UNMOUNT";
})(FFMessageType || (FFMessageType = {}));


const ERROR_UNKNOWN_MESSAGE_TYPE = new Error("unknown message type");
const ERROR_NOT_LOADED = new Error("ffmpeg is not loaded, call \`await ffmpeg.load()\` first");
const ERROR_TERMINATED = new Error("called FFmpeg.terminate()");
const ERROR_IMPORT_FAILURE = new Error("failed to import ffmpeg-core.js");

let ffmpeg;
const load = async ({ coreURL: _coreURL, wasmURL: _wasmURL, workerURL: _workerURL, }) => {
  const first = !ffmpeg;
  try {
    if (!_coreURL)
      _coreURL = CORE_URL;
    // when web worker type is \`classic\`.
    importScripts(_coreURL);
  }
  catch {
    if (!_coreURL)
      _coreURL = CORE_URL.replace('/umd/', '/esm/');
    // when web worker type is \`module\`.
    self.createFFmpegCore = (await import(
        /* webpackIgnore: true */ /* @vite-ignore */ _coreURL)).default;
    if (!self.createFFmpegCore) {
      throw ERROR_IMPORT_FAILURE;
    }
  }
  const coreURL = _coreURL;
  const wasmURL = _wasmURL ? _wasmURL : _coreURL.replace(/.js$/g, ".wasm");
  const workerURL = _workerURL
    ? _workerURL
    : _coreURL.replace(/.js$/g, ".worker.js");
  ffmpeg = await self.createFFmpegCore({
    // Fix \`Overload resolution failed.\` when using multi-threaded ffmpeg-core.
    // Encoded wasmURL and workerURL in the URL as a hack to fix locateFile issue.
    mainScriptUrlOrBlob: \`\${coreURL}#\${btoa(JSON.stringify({ wasmURL, workerURL }))}\`,
  });
  ffmpeg.setLogger((data) => self.postMessage({ type: FFMessageType.LOG, data }));
  ffmpeg.setProgress((data) => self.postMessage({
    type: FFMessageType.PROGRESS,
    data,
  }));
  return first;
};
const exec = ({ args, timeout = -1 }) => {
  ffmpeg.setTimeout(timeout);
  ffmpeg.exec(...args);
  const ret = ffmpeg.ret;
  ffmpeg.reset();
  return ret;
};
const writeFile = ({ path, data }) => {
  ffmpeg.FS.writeFile(path, data);
  return true;
};
const readFile = ({ path, encoding }) => ffmpeg.FS.readFile(path, { encoding });
// TODO: check if deletion works.
const deleteFile = ({ path }) => {
  ffmpeg.FS.unlink(path);
  return true;
};
const rename = ({ oldPath, newPath }) => {
  ffmpeg.FS.rename(oldPath, newPath);
  return true;
};
// TODO: check if creation works.
const createDir = ({ path }) => {
  ffmpeg.FS.mkdir(path);
  return true;
};
const listDir = ({ path }) => {
  const names = ffmpeg.FS.readdir(path);
  const nodes = [];
  for (const name of names) {
    const stat = ffmpeg.FS.stat(\`\${path}/\${name}\`);
    const isDir = ffmpeg.FS.isDir(stat.mode);
    nodes.push({ name, isDir });
  }
  return nodes;
};
// TODO: check if deletion works.
const deleteDir = ({ path }) => {
  ffmpeg.FS.rmdir(path);
  return true;
};
const mount = ({ fsType, options, mountPoint }) => {
  const str = fsType;
  const fs = ffmpeg.FS.filesystems[str];
  if (!fs)
    return false;
  ffmpeg.FS.mount(fs, options, mountPoint);
  return true;
};
const unmount = ({ mountPoint }) => {
  ffmpeg.FS.unmount(mountPoint);
  return true;
};
self.onmessage = async ({ data: { id, type, data: _data }, }) => {
  const trans = [];
  let data;
  try {
    if (type !== FFMessageType.LOAD && !ffmpeg)
      throw ERROR_NOT_LOADED; // eslint-disable-line
    switch (type) {
      case FFMessageType.LOAD:
        data = await load(_data);
        break;
      case FFMessageType.EXEC:
        data = exec(_data);
        break;
      case FFMessageType.WRITE_FILE:
        data = writeFile(_data);
        break;
      case FFMessageType.READ_FILE:
        data = readFile(_data);
        break;
      case FFMessageType.DELETE_FILE:
        data = deleteFile(_data);
        break;
      case FFMessageType.RENAME:
        data = rename(_data);
        break;
      case FFMessageType.CREATE_DIR:
        data = createDir(_data);
        break;
      case FFMessageType.LIST_DIR:
        data = listDir(_data);
        break;
      case FFMessageType.DELETE_DIR:
        data = deleteDir(_data);
        break;
      case FFMessageType.MOUNT:
        data = mount(_data);
        break;
      case FFMessageType.UNMOUNT:
        data = unmount(_data);
        break;
      default:
        throw ERROR_UNKNOWN_MESSAGE_TYPE;
    }
  }
  catch (e) {
    self.postMessage({
      id,
      type: FFMessageType.ERROR,
      data: e.toString(),
    });
    return;
  }
  if (data instanceof Uint8Array) {
    trans.push(data.buffer);
  }
  self.postMessage({ id, type, data }, trans);
};

`,i=new Blob([new TextEncoder().encode(n)],{type:"text/javascript"}),s=URL.createObjectURL(i);await e.load({coreURL:`${o}/ffmpeg-core.js`,wasmURL:`${o}/ffmpeg-core.wasm`,workerURL:`${o}/ffmpeg-core.worker.js`,classWorkerURL:s}),t(),console.log("FFmpeg loaded!")}var ja,mn,upt,z2,Fy,Qg=x(()=>{"use strict";d();nt();fe();B();ja=de("vc-more-stickers-"),mn=(e,...t)=>ja("picker-"+e,...t),upt="https://corsproxy.io/?url=";z2=class{current=Promise.resolve();lock(){let t,o=new Promise(i=>{t=()=>i()}),n=this.current.then(()=>t);return this.current=o,n}};Ln("createContext",()=>{Fy=X.createContext(void 0)})});function R9e({src:e,alt:t,isActive:o}){return r("div",null,r("svg",{width:32,height:32,style:{display:"block",contain:"paint",overflow:"hidden",overflowClipMargin:"content-box"}},r("foreignObject",{className:ja("foreign-object")+(o?` ${ja("foreign-object-active")}`:""),x:0,y:0,width:32,height:32,overflow:"visible"},r("img",{src:e,alt:t,width:32,height:32}))))}function L9e(e){let t=Array.isArray(e.children)?e.children:[e.children];return r("div",{className:ja("category-scroller")},r("div",null,t.map(o=>r("div",{role:"listitem",key:ja("category-scroller")},o))),r("div",{style:{height:`${Math.round(41.75*(e.categoryLength+1))}px`}}),r("div",{"aria-hidden":"true"}))}function O9e(e){return r("div",{className:ja("category-wrapper")},e.children)}function KX(e){return r("div",{style:e.style,className:ja("sticker-category")+(e.isActive?` ${ja("sticker-category-active")}`:""),tabIndex:0,role:"button",onClick:e.onClick},e.children)}var YX=x(()=>{"use strict";d();Qg()});function F9e(e){return r("div",{style:{width:"20px",height:"20px",boxSizing:"border-box",position:"relative",cursor:"text"}},e.children)}function U9e({width:e,height:t,color:o}){return r("svg",{role:"img",width:e,height:t,viewBox:"0 0 24 24"},r("path",{fill:o,d:"M21.707 20.293L16.314 14.9C17.403 13.504 18 11.799 18 10C18 7.863 17.167 5.854 15.656 4.344C14.146 2.832 12.137 2 10 2C7.863 2 5.854 2.832 4.344 4.344C2.833 5.854 2 7.863 2 10C2 12.137 2.833 14.146 4.344 15.656C5.854 17.168 7.863 18 10 18C11.799 18 13.504 17.404 14.9 16.314L20.293 21.706L21.707 20.293ZM10 16C8.397 16 6.891 15.376 5.758 14.243C4.624 13.11 4 11.603 4 10C4 8.398 4.624 6.891 5.758 5.758C6.891 4.624 8.397 4 10 4C11.603 4 13.109 4.624 14.242 5.758C15.376 6.891 16 8.398 16 10C16 11.603 15.376 13.11 14.242 14.243C13.109 15.376 11.603 16 10 16Z"}))}function $9e({width:e,height:t,className:o,onClick:n}){return r("svg",{role:"img",width:e,height:t,viewBox:"0 0 24 24",className:o,onClick:n},r("path",{fill:"currentColor",d:"M18.4 4L12 10.4L5.6 4L4 5.6L10.4 12L4 18.4L5.6 20L12 13.6L18.4 20L20 18.4L13.6 12L20 5.6L18.4 4Z"}))}function QX({width:e,height:t,color:o}){return r("svg",{role:"img",width:e,height:t,viewBox:"0 0 24 24"},r("path",{d:"M12 2C6.4764 2 2 6.4764 2 12C2 17.5236 6.4764 22 12 22C17.5236 22 22 17.5236 22 12C22 6.4764 17.5236 2 12 2ZM12 5.6C12.4422 5.6 12.8 5.95781 12.8 6.4V11.5376L16.5625 13.7126C16.9453 13.9329 17.0703 14.4173 16.85 14.8001C16.6297 15.183 16.1453 15.3079 15.7625 15.0876L11.6873 12.7376C11.656 12.7251 11.6279 12.7048 11.5998 12.6876C11.3607 12.5486 11.1998 12.2954 11.1998 12.0001V6.4001C11.1998 5.9579 11.5578 5.6 12 5.6Z",fill:o}))}function H9e({width:e,height:t}){return r("svg",{role:"img",width:e,height:t,viewBox:"0 0 24 24"},r("path",{fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd",d:"M19.738 10H22V14H19.739C19.498 14.931 19.1 15.798 18.565 16.564L20 18L18 20L16.565 18.564C15.797 19.099 14.932 19.498 14 19.738V22H10V19.738C9.069 19.498 8.203 19.099 7.436 18.564L6 20L4 18L5.436 16.564C4.901 15.799 4.502 14.932 4.262 14H2V10H4.262C4.502 9.068 4.9 8.202 5.436 7.436L4 6L6 4L7.436 5.436C8.202 4.9 9.068 4.502 10 4.262V2H14V4.261C14.932 4.502 15.797 4.9 16.565 5.435L18 3.999L20 5.999L18.564 7.436C19.099 8.202 19.498 9.069 19.738 10ZM12 16C14.2091 16 16 14.2091 16 12C16 9.79086 14.2091 8 12 8C9.79086 8 8 9.79086 8 12C8 14.2091 9.79086 16 12 16Z"}))}var ZX=x(()=>{"use strict";d()});function qB(e){let o=/^https:\/\/store\.line\.me\/emojishop\/product\/([a-z0-9]+)\/.*$/.exec(e);if(o===null)throw new Error("Invalid URL");return o[1]}function G9e(e){return"MoreStickers:Line:Emoji-Pack:"+e}function ppt(e,t){return"MoreStickers:Line-Emoji:"+t+":"+e}function z9e(e){return{id:ppt(e.id,e.stickerPackId),image:e.animationUrl||e.staticUrl,title:e.id,stickerPackId:G9e(e.stickerPackId),isAnimated:!!e.animationUrl}}function XX(e){return{id:G9e(e.id),title:e.title,author:e.author,logo:z9e(e.mainImage),stickers:e.stickers.map(z9e)}}function JX(e){let t=new DOMParser().parseFromString(e,"text/html"),o=JSON.parse(t.querySelector("[ref=mainImage]")?.dataset?.preview??"null"),{id:n}=o,i=[...t.querySelectorAll(".FnStickerPreviewItem")].map(a=>JSON.parse(a.dataset.preview??"null")).filter(a=>a!==null).map(a=>({...a,stickerPackId:n}));return{title:t.querySelector("[data-test=emoji-name-title]")?.textContent??"null",author:{name:t.querySelector("[data-test=emoji-author]")?.textContent??"null",url:"https://store.line.me/"+(t.querySelector("[data-test=emoji-author]")?.getAttribute("href")??"null")},id:n,mainImage:o,stickers:i}}function q9e(e){return e.includes('data-test="emoji-name-title"')}async function j9e(e,t="en"){let n=await(await GB(`https://store.line.me/emojishop/product/${e}/${t}`)).text();return JX(n)}var W9e=x(()=>{"use strict";d();Qg()});function jB(e){let o=/^https:\/\/store\.line\.me\/stickershop\/product\/([a-z0-9]+)\/.*$/.exec(e);if(o===null)throw new Error("Invalid URL");return o[1]}function Y9e(e){return"MoreStickers:Line:Pack:"+e}function mpt(e,t){return"MoreStickers:Line:Sticker:"+t+":"+e}function K9e(e){return{id:mpt(e.id,e.stickerPackId),image:e.animationUrl||e.staticUrl,title:e.id,stickerPackId:Y9e(e.stickerPackId),isAnimated:!!e.animationUrl}}function VX(e){return{id:Y9e(e.id),title:e.title,author:e.author,logo:K9e(e.mainImage),stickers:e.stickers.map(K9e)}}function eJ(e){let t=new DOMParser().parseFromString(e,"text/html"),o=JSON.parse(t.querySelector("[ref=mainImage]")?.dataset?.preview??"null"),{id:n}=o,i=[...t.querySelectorAll('[data-test="sticker-item"]')].map(a=>JSON.parse(a.dataset.preview??"null")).filter(a=>a!==null).map(a=>({...a,stickerPackId:n}));return{title:t.querySelector('[data-test="sticker-name-title"]')?.textContent??"null",author:{name:t.querySelector('[data-test="sticker-author"]')?.textContent??"null",url:"https://store.line.me/"+(t.querySelector('[data-test="sticker-author"]')?.getAttribute("href")??"null")},id:n,mainImage:o,stickers:i}}function Q9e(e){return e.includes('data-test="sticker-name-title"')}async function Z9e(e,t="en"){let n=await(await GB(`https://store.line.me/stickershop/product/${e}/${t}`)).text();return eJ(n)}var X9e=x(()=>{"use strict";d();Qg()});function fpt(e){return{id:e.id,title:e.title=e.title==="null"?e.id.match(/\d+/)?.[0]??e.id:e.title,author:e.author,logo:e.logo,dynamic:e.dynamic}}async function Zg(e,t=tJ){let o=fpt(e);await Promise.all([Gt(`${e.id}`,e),(async()=>{let n=await J9e.lock();try{let i=await zt(t)??null;i?.some(s=>s.id===e.id)?i=i.map(s=>s.id===e.id?o:s):i=i===null?[o]:[...i,o],await Gt(t,i)}finally{n()}})()])}async function Zd(e=tJ){return await zt(e)??null??[]}async function G2(e){return await zt(e)??null}async function Ak(e,t=tJ){await Promise.all([Ta(e),V9e(e),(async()=>{let o=await J9e.lock();try{let n=await zt(t)??null;if(n===null)return;await Gt(t,n.filter(i=>i.id!==e))}finally{o()}})()])}var J9e,tJ,WB=x(()=>{"use strict";d();vn();oJ();Qg();J9e=new z2,tJ="MoreStickers:Packs"});function hpt(e){return e.startsWith("Vencord-MoreStickers-Line-Pack")?"MoreStickers:Line:Pack:"+e.replace("Vencord-MoreStickers-Line-Pack-",""):e.startsWith("Vencord-MoreStickers-Line-Emoji-Pack")?"MoreStickers:Line:Emoji:Pack:"+e.replace("Vencord-MoreStickers-Line-Emoji-Pack-",""):e}function xpt(e){if(e.startsWith("Vencord-MoreStickers-Line-Sticker")){let[t,o]=e.replace("Vencord-MoreStickers-Line-Sticker","").split("-",2);return"MoreStickers:Line:Sticker:"+t+":"+o}else if(e.startsWith("Vencord-MoreStickers-Line-Emoji")){let[t,o]=e.replace("Vencord-MoreStickers-Line-Emoji","").split("-",2);return"MoreStickers:Line:Emoji:"+t+":"+o}else return e}function nJ(e){return{...e,id:xpt(e.id)}}function ypt(e){return{...e,id:hpt(e.id),logo:nJ(e.logo),stickers:e.stickers.map(nJ)}}async function t6e(){return!((await Zd(KB)).length>0||(await Zd(Ck)).length===0)}async function o6e(){if((await Zd(KB)).length>0){D.show({message:"New sticker packs already exist, migration not needed",type:D.Type.FAILURE,id:D.genId(),options:{duration:1e3}});return}let t=await Zd(Ck);if(t.length===0){D.show({message:"Old sticker packs not found, nothing to migrate",type:D.Type.FAILURE,id:D.genId(),options:{duration:1e3}});return}for(let n of t)try{let i=await G2(n.id);if(i===null)continue;let s=ypt(i);try{await Zg(s,KB),await Ak(n.id,Ck)}catch{await Ak(s.id,KB)}}catch(i){console.error(i),D.show({message:`Migration failed: ${n.title} (${n.id})`,type:D.Type.FAILURE,id:D.genId(),options:{duration:1e3}})}t=await Zd(Ck),t.length===0&&await Oe.del(Ck);let o=await q2(e6e);if(o.length>0){let n=o.map(nJ);await YB(n,gpt),await Oe.del(e6e)}console.log("Migration complete"),D.show({message:"Sticker Pack Migration Complete",type:D.Type.SUCCESS,id:D.genId(),options:{duration:1e3}})}var KB,Ck,gpt,e6e,n6e=x(()=>{"use strict";d();dr();B();QB();WB();KB="MoreStickers:Packs",Ck="Vencord-MoreStickers-Packs",gpt="MoreStickers:RecentStickers",e6e="Vencord-MoreStickers-RecentStickers"});var rJ,r6e=x(()=>{"use strict";d();rJ=(i=>(i.ADD_STICKER_PACK_URL="Add from URL",i.ADD_STICKER_PACK_HTML="Add from HTML",i.ADD_STICKER_PACK_FILE="Add from File",i.MISC="Misc",i))(rJ||{})});function s6e(e){return r("div",{className:ja("header")},e.children)}function a6e(e){return r("div",{style:{position:"relative",display:"grid",gridTemplateColumns:"48px auto",gridTemplateRows:"auto 1fr auto"}},e.children)}async function q2(e=i6e){return await zt(e)??[]}async function YB(e,t=i6e){let o=await bpt.lock();try{await Gt(t,e)}finally{o()}}async function l6e(e){let t=await q2(),o=t.findIndex(n=>n.id===e.id);for(o!==-1&&t.splice(o,1),t.unshift(e);t.length>16;)t.pop();await YB(t)}async function V9e(e){let t=await q2();await YB(t.filter(o=>o.stickerPackId!==e))}var bpt,iJ,sJ,i6e,vpt,Spt,ZB,QB=x(()=>{"use strict";d();vn();Et();X1();Ar();eo();ut();wt();W9e();X9e();n6e();WB();r6e();Qg();B();bpt=new z2,iJ="recent",sJ="Recently Used",i6e="MoreStickers:RecentStickers",vpt={onMouseDown:e=>(e.preventDefault(),!1),onDragStart:e=>(e.preventDefault(),!1)},Spt=({meta:e,hoveredStickerPackId:t,setHoveredStickerPackId:o,refreshStickerPackMetas:n})=>r("div",{className:"sticker-pack",onMouseEnter:()=>o(e.id),onMouseLeave:()=>o(null)},r("div",{className:[mn("content-row-grid-inspected-indicator"),t===e.id?"inspected":""].join(" "),style:{top:"unset",left:"unset",height:"96px",width:"96px"}}),e.logo?.image?r("img",{src:e.logo.image,width:"96",...vpt}):null,r("button",{className:t===e.id?"show":"",onClick:async()=>{try{await Ak(e.id),D.show({message:"Sticker Pack deleted",type:D.Type.SUCCESS,id:D.genId(),options:{duration:1e3}}),await n()}catch(i){D.show({message:i.message,type:D.Type.FAILURE,id:D.genId(),options:{duration:1e3}})}}},r("svg",{width:"24",height:"24",viewBox:"0 0 24 24",style:{fill:"var(--status-danger)"}},r("title",null,"Delete"),r("path",{d:"M15 3.999V2H9V3.999H3V5.999H21V3.999H15Z"}),r("path",{d:"M5 6.99902V18.999C5 20.101 5.897 20.999 7 20.999H17C18.103 20.999 19 20.101 19 18.999V6.99902H5ZM11 17H9V11H11V17ZM15 17H13V11H15V17Z"}))),r(Y,{className:ja("pack-title"),tag:"span"},e.title)),ZB=()=>{let[e,t]=X.useState([]),[o,n]=X.useState(""),[i,s]=X.useState(""),[a,l]=X.useState("Add from URL"),[c,u]=X.useState(null),[p,m]=X.useState(!1);async function g(){t(await Zd())}return X.useEffect(()=>{g()},[]),X.useEffect(()=>{t6e().then(m)},[]),r("div",{className:ja("settings")},r(Rr,{type:"top",look:"brand",selectedItem:a,onItemSelect:l,className:"tab-bar"},Object.values(rJ).map(y=>r(Rr.Item,{key:y,id:y,className:"tab-bar-item"},y))),a==="Add from URL"&&r("div",{className:"section"},r(re,null,"Add Sticker Pack from URL"),r(W,null,r("p",null,"Currently LINE stickers/emojis supported only. ",r("br",null),"Get Telegram stickers with ",r("a",{href:"#",onClick:()=>VencordNative.native.openExternal("https://github.com/lekoOwO/MoreStickersConverter")}," MoreStickersConverter"),".")),r(Be,{flexDirection:"row",style:{alignItems:"center",justifyContent:"center"}},r("span",{style:{flexGrow:1}},r(bp,{value:o,onChange:n,validate:y=>{try{return jB(y),!0}catch{}try{return qB(y),!0}catch{}return"Invalid URL"},placeholder:"Sticker Pack URL"})),r(U,{size:U.Sizes.SMALL,onClick:async y=>{y.preventDefault();let b="";try{jB(o),b="LineStickerPack"}catch{}try{qB(o),b="LineEmojiPack"}catch{}let v="";switch(b){case"LineStickerPack":{try{let E=jB(o),A=await Z9e(E),C=VX(A);await Zg(C)}catch(E){console.error(E),v=E.message}break}case"LineEmojiPack":{try{let E=qB(o),A=await j9e(E),C=XX(A);await Zg(C)}catch(E){console.error(E),v=E.message}break}}n(""),g(),v?D.show({message:v,type:D.Type.FAILURE,id:D.genId(),options:{duration:1e3}}):D.show({message:"Sticker Pack added",type:D.Type.SUCCESS,id:D.genId(),options:{duration:1e3}})}},"Insert"))),a==="Add from HTML"&&r("div",{className:"section"},r(re,null,"Add Sticker Pack from HTML"),r(W,null,r("p",null,"When encountering errors while adding a sticker pack, you can try to add it using the HTML source code of the sticker pack page.",r("br",null),"This applies to stickers which are region locked / OS locked / etc.",r("br",null),"The region LINE recognized may vary from the region you are in due to the CORS proxy we're using.")),r(Be,{flexDirection:"row",style:{alignItems:"center",justifyContent:"center"}},r("span",{style:{flexGrow:1}},r(cp,{value:i,onChange:s,placeholder:"Paste HTML here",rows:1})),r(U,{size:U.Sizes.SMALL,onClick:async y=>{y.preventDefault();let b="";if(q9e(i))try{let v=JX(i),E=XX(v);await Zg(E)}catch(v){console.error(v),b=v.message}else if(Q9e(i))try{let v=eJ(i),E=VX(v);await Zg(E)}catch(v){console.error(v),b=v.message}s(""),g(),b?D.show({message:b,type:D.Type.FAILURE,id:D.genId(),options:{duration:1e3}}):D.show({message:"Sticker Pack added",type:D.Type.SUCCESS,id:D.genId(),options:{duration:1e3}})}},"Insert from HTML"))),a==="Add from File"&&r("div",{className:"section"},r(re,null,"Add Sticker Pack from File"),r(U,{size:U.Sizes.SMALL,onClick:async y=>{let b=document.createElement("input");b.type="file",b.accept=".stickerpack,.stickerpacks,.json",b.onchange=async v=>{try{let E=b.files?.[0];if(!E)return;let A=await E.text(),C=JSON.parse(A),I=[];Array.isArray(C)?I=C:I=[C];for(let N of I)await Zg(N);D.show({message:"Sticker Packs added",type:D.Type.SUCCESS,id:D.genId(),options:{duration:1e3}})}catch(E){console.error(E),D.show({message:E.message,type:D.Type.FAILURE,id:D.genId(),options:{duration:1e3}})}},b.click()}},"Open Sticker Pack File")),a==="Misc"&&r("div",{className:"section"},r(re,null,"Misc tools"),r(Be,{flexDirection:"row",style:{alignItems:"center",justifyContent:"start"}},r(U,{size:U.Sizes.SMALL,onClick:async y=>{let b=[],v=await Zd();for(let A of v){let C=await G2(A.id);C&&b.push(C)}let E=document.createElement("a");E.href=URL.createObjectURL(new Blob([JSON.stringify(b)],{type:"application/json"})),E.download="MoreStickers.stickerpacks",E.click(),D.show({message:"Sticker Packs exported",type:D.Type.SUCCESS,id:D.genId(),options:{duration:1e3}})}},"Export Sticker Packs"),r(U,{size:U.Sizes.SMALL,onClick:async y=>{await o6e()},style:{display:p?"unset":"none"}},"Migrate from v1"))),r(Bt,{style:{marginTop:"8px",marginBottom:"8px"}}),r(re,null,"Stickers Management"),r("div",{className:"section"},r("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:"8px"}},e.map(y=>r(Spt,{key:y.id,meta:y,hoveredStickerPackId:c,setHoveredStickerPackId:u,refreshStickerPackMetas:g})))))}});var wpt,kpt,c6e=x(()=>{d();wpt=new Error("failed to get response body reader"),kpt=new Error("failed to complete download")});var u6e=x(()=>{d()});var Ept,d6e,p6e=x(()=>{d();c6e();u6e();Ept=e=>new Promise((t,o)=>{let n=new FileReader;n.onload=()=>{let{result:i}=n;i instanceof ArrayBuffer?t(new Uint8Array(i)):t(new Uint8Array)},n.onerror=i=>{o(Error(`File could not be read! Code=${i?.target?.error?.code||-1}`))},n.readAsArrayBuffer(e)}),d6e=async e=>{let t;if(typeof e=="string")/data:_data\/([a-zA-Z]*);base64,([^"]*)/.test(e)?t=atob(e.split(",")[1]).split("").map(o=>o.charCodeAt(0)):t=await(await fetch(e)).arrayBuffer();else if(e instanceof URL)t=await(await fetch(e)).arrayBuffer();else if(e instanceof File||e instanceof Blob)t=await Ept(e);else return new Uint8Array;return new Uint8Array(t)}});async function Apt(e){let t=new Image;t.crossOrigin="anonymous",await new Promise((g,y)=>{t.onload=g,t.onerror=y,t.src=e});let n=document.createElement("canvas"),i=n.getContext("2d");if(!i)throw new Error("Could not get canvas context");let s=160,a=Math.min(s/t.width,s/t.height),l=t.width*a,c=t.height*a;n.width=s,n.height=s,i.drawImage(t,0,0,l,c);let u=i.getImageData(0,0,s,s),{data:p}=u,m=await new Promise(g=>{n.toBlob(g,"image/png")});if(!m)throw new Error("Could not convert canvas to blob");return m}async function Cpt(e,t){let o=new URL(e).pathname.split("/").pop()??"image.png";await t.writeFile(o,await d6e(e));let n="output.gif";await t.exec(["-i",o,"-filter_complex",`split[s0][s1];
        [s0]palettegen=
          stats_mode=single:
          transparency_color=000000[p];
        [s1][p]paletteuse=
          new=1:
          alpha_threshold=10`,n]);let i=await t.readFile(n);if(await t.deleteFile(o),await t.deleteFile(n),typeof i=="string")throw new Error("Could not read file");let s=new Uint8Array(i.length);return s.set(i),new File([s],n,{type:"image/gif"})}async function g6e({channelId:e,sticker:t,sendAsLink:o,ctrlKey:n,shiftKey:i,ffmpegState:s}){let a="",{textEditor:l}=j2;f6e&&(a=f6e.getDraft(e,0));let c={};if(m6e){let u=m6e.getPendingReply(e);u&&(c=aJ.getSendMessageOptionsForReply(u))}if((n||!o)&&!i){let u=null;if(t?.isAnimated){if(!s)throw new Error("FFmpeg state is not provided");if(!s?.ffmpeg)throw new Error("FFmpeg is not provided");if(!s?.isLoaded)throw new Error("FFmpeg is not loaded");u=await Cpt(t.image,s.ffmpeg)}else{new URL(t.image).searchParams.set("t",Date.now().toString());let m=await fetch(t.image),g=URL.createObjectURL(await m.blob()),y=await Apt(g),b=t.filename??new URL(t.image).pathname.split("/").pop(),v="image/png";switch(b?.split(".").pop()?.toLowerCase()){case"jpg":case"jpeg":v="image/jpeg";break;case"gif":v="image/gif";break;case"webp":v="image/webp";break;case"svg":v="image/svg+xml";break}u=new File([y],b,{type:v})}ls.promptToUpload([u],ne.getChannel(e),0);return}else i?((!a.endsWith(" ")||!a.endsWith(`
`))&&(a+=" "),a+=t.image,n&&l&&l.insertText&&typeof l.insertText=="function"?l.insertText(a):aJ._sendMessage(e,{content:t.image},c||{})):aJ._sendMessage(e,{content:`${a} ${t.image}`.trim()},c||{})}var m6e,aJ,f6e,Gnn,h6e=x(()=>{"use strict";d();RM();p6e();fe();B();lJ();m6e=He("getPendingReply"),aJ=He("sendMessage"),f6e=He("getDraft","getState"),Gnn=new Og});function cJ({rowIndex:e,colIndex:t,sticker:o,onHover:n,channelId:i,onSend:s=()=>{},isHovered:a=!1}){if(Fy===void 0)return r("div",null,"FFmpegStateContext is undefined");let l=X.useContext(Fy);return r("div",{role:"gridcell","aria-rowindex":e,"aria-colindex":t,id:mn(`content-row-grid-${e}-${t}`),onMouseEnter:()=>n(o),onClick:c=>{i&&(g6e({channelId:i,sticker:o,ctrlKey:c.ctrlKey,shiftKey:c.shiftKey,ffmpegState:l}),l6e(o),s(o,c.ctrlKey))}},r("div",{className:mn("content-row-grid-sticker")},r("span",{className:mn("content-row-grid-hidden-visually")},o.title),r("div",{"aria-hidden":"true"},r("div",{className:[mn("content-row-grid-inspected-indicator"),`${a?"inspected":""}`].join(" ")}),r("div",{className:mn("content-row-grid-sticker-node")},r("div",{className:mn("content-row-grid-asset-wrapper"),style:{height:"96px",width:"96px"}},r("img",{alt:o.title,src:o.image,draggable:"false","data-id":o.id,className:mn("content-row-grid-img"),loading:"lazy"}))))))}function Ipt({rowIndex:e,grid1:t,grid2:o,grid3:n,channelId:i}){return r("div",{className:mn("content-row"),role:"row","aria-rowindex":e},r(cJ,{...t,rowIndex:e,colIndex:1,channelId:i}),o&&r(cJ,{...o,rowIndex:e,colIndex:2,channelId:i}),n&&r(cJ,{...n,rowIndex:e,colIndex:3,channelId:i}))}function Dpt({isExpanded:e}){return r("svg",{className:mn("content-header-collapse-icon"),width:16,height:16,viewBox:"0 0 24 24",style:{transform:`rotate(${e?"0":"-90deg"})`}},r("path",{fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd",d:"M16.59 8.59004L12 13.17L7.41 8.59004L6 10L12 16L18 10L16.59 8.59004Z"}))}function x6e({image:e,title:t,children:o,isSelected:n=!1,afterScroll:i=()=>{},beforeScroll:s=()=>{}}){let[a,l]=X.useState(!0),c=X.useRef(null);return X.useEffect(()=>{n&&c.current&&(s(),c.current.scrollIntoView({behavior:"smooth",block:"start"}),i())},[n]),r("span",null,r("div",{className:mn("content-header-wrapper")},r("div",{className:mn("content-header-header"),ref:c,"aria-expanded":a,"aria-label":`Category, ${t}`,role:"button",tabIndex:0,onClick:()=>{l(u=>!u)}},r("div",{className:mn("content-header-header-icon")},r("div",null,typeof e=="string"?r("svg",{className:mn("content-header-svg"),width:16,height:16,viewBox:"0 0 16 16"},r("foreignObject",{x:0,y:0,width:16,height:16,overflow:"visible",mask:"url(#svg-mask-squircle)"},r("img",{alt:t,src:e,className:mn("content-header-guild-icon"),loading:"lazy"}))):e)),r("span",{className:mn("content-header-header-label")},t),r(Dpt,{isExpanded:a}))),a?o:null)}function b6e({stickerPacks:e,selectedStickerPackId:t,setSelectedStickerPackId:o,channelId:n,closePopout:i,query:s}){let[a,l]=X.useState(e.length&&e[0].stickers.length?e[0].stickers[0]:null),[c,u]=X.useState(e.length?e[0]:null),[p,m]=X.useState([]),g=X.useRef(null),y=X.useRef(null);function b(A){return s?A.filter(C=>C.title.toLowerCase().includes(s.toLowerCase())):A}async function v(){let A=await q2();m(A)}X.useEffect(()=>{v()},[]),X.useEffect(()=>{c?.id!==a?.stickerPackId&&u(e.find(A=>A.id===a?.stickerPackId)??c)},[a]);let E=A=>A.reduce((C,I,N)=>(N%3===0&&C.push([]),C[C.length-1].push(I),C),[]).map((C,I)=>r(Ipt,{key:I,rowIndex:I,channelId:n,grid1:{rowIndex:I,colIndex:1,sticker:C[0],onHover:l,onSend:(N,_)=>{!_&&i()},isHovered:a?.id===C[0].id},grid2:C.length>1?{rowIndex:I,colIndex:2,sticker:C[1],onHover:l,onSend:(N,_)=>{!_&&i()},isHovered:a?.id===C[1].id}:void 0,grid3:C.length>2?{rowIndex:I,colIndex:3,sticker:C[2],onHover:l,onSend:(N,_)=>{!_&&i()},isHovered:a?.id===C[2].id}:void 0}));return r("div",{className:mn("content-list-wrapper")},r("div",{className:mn("content-wrapper")},r("div",{className:mn("content-scroller"),ref:y},r("div",{className:mn("content-list-items"),role:"none presentation"},r("div",{ref:g},r(x6e,{image:r(QX,{width:16,height:16,color:"currentColor"}),title:sJ,isSelected:iJ===t,beforeScroll:()=>{y.current?.scrollTo({top:0})},afterScroll:()=>{o(null)}},...E(b(p))),e.map(A=>{let C=E(b(A.stickers));return r(x6e,{key:A.id,image:A.logo.image,title:A.title,isSelected:A.id===t,beforeScroll:()=>{y.current?.scrollTo({top:0})},afterScroll:()=>{o(null)}},...C)}))),r("div",{style:{height:`${g.current?.clientHeight??0}px`}})),r("div",{className:mn("content-inspector"),style:{visibility:a?"visible":"hidden",...a?{}:{height:"0"}}},r("div",{className:mn("content-inspector-graphic-primary"),"aria-hidden":"true"},r("div",null,r("div",{className:mn("content-row-grid-asset-wrapper"),style:{height:"28px",width:"28px"}},r("img",{alt:a?.title??"",src:a?.image,draggable:"false","data-id":a?.id??"",className:mn("content-inspector-img")})))),r("div",{className:mn("content-inspector-text-wrapper")},r("div",{className:mn("content-inspector-title-primary"),"data-text-variant":"text-md/semibold"},a?.title??""),r("div",{className:mn("content-inspector-title-secondary"),"data-text-variant":"text-md/semibold"},c?.title?"from ":"",r("strong",null,c?.title??""))),r("div",{className:mn("content-inspector-graphic-secondary"),"aria-hidden":"true"},r("div",null,r("svg",{width:32,height:32,viewBox:"0 0 32 32"},r("foreignObject",{x:0,y:0,width:32,height:32,overflow:"visible",mask:"url(#svg-mask-squircle)"},r("img",{alt:c?.title??"",src:c?.logo?.image}))))))))}var Tpt,W2,y6e,v6e,S6e=x(()=>{"use strict";d();ut();h6e();Qg();la();at();B();YX();ZX();QB();Tpt=rn((e,...t)=>e(...t),150),W2={id:iJ,name:sJ},y6e=({packMetas:e,onPackSelect:t})=>{let[o,n]=X.useState(W2),[i,s]=X.useState(!1);return r(O9e,null,r(L9e,{categoryLength:e.length},r(KX,{style:{padding:"4px",boxSizing:"border-box",width:"32px"},isActive:o===W2,onClick:()=>{o!==W2&&(t(W2),n(W2))}},r(QX,{width:24,height:24,color:o===W2?" var(--interactive-icon-active)":"var(--interactive-icon-default)"})),...e.map(a=>r(KX,{key:a.id,onClick:()=>{o?.id!==a.id&&(t(a),n(a))},isActive:o?.id===a.id},r(R9e,{src:a.iconUrl,alt:a.name,isActive:o?.id===a.id})))),r("div",{className:mn("settings-cog-container")},r("button",{className:mn("settings-cog")+(i?` ${mn("settings-cog-active")}`:""),onClick:()=>{Ee(a=>r(Pe,{size:"large",...a},r(je,null,r(Jo,null,"Stickers+")),r($e,null,r(ZB,null))))},onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1)},r(H9e,{width:20,height:20}))))};v6e=({onQueryChange:e})=>{let[t,o]=X.useState(),n=(i,s=!1)=>{o(i),s?e(i):Tpt(e,i)};return r(s6e,null,r("div",{className:mn("container")},r("div",null,r("div",{className:mn("search-box")},r(qe,{style:{height:"30px",border:"none"},placeholder:"Search stickers",autoFocus:!0,value:t,onChange:i=>n(i)})),r("div",{className:mn("search-icon")},r(F9e,null,t&&t.length>0?r($9e,{className:mn("clear-icon"),width:20,height:20,onClick:()=>n("",!0)}):r(U9e,{width:20,height:20,color:"var(--text-muted)"}))))))}});var oJ=x(()=>{"use strict";d();YX();ZX();QB();S6e()});var Mpt,j2,lJ=x(()=>{"use strict";d();P9e();Q();RM();H();$();B();oJ();WB();Qg();Mpt=R({packs:{type:6,description:"Packs",component:ZB}}),j2=k({name:"MoreStickers",description:"Adds sticker packs from other social media platforms. (e.g. LINE)",authors:[j.Leko,w.Arjix],settings:Mpt,patches:[{find:"#{intl::STICKER_BUTTON_LABEL}",replacement:[{match:/(children:\(0,\i\.jsx\)\()(.{0,10})({className:\i\(\)\(\i\.\i,\i\.\i)/,replace:"$1arguments[0]?.stickersType?$self.stickerButton:$2$3"},{match:/(\i=)((\i\.useCallback\(\(\)=>\{\(.*?\)\().*?\.STICKER,(\i.{0,25}\]\)))/,replace:'$1arguments[0]?.stickersType?$3"stickers+",$4:$2'},{match:/(\i)=((\i)===\i\.\i\.STICKER)/,replace:"$1=arguments[0].stickersType?($3===arguments[0].stickersType):($2)"}]},{find:".GIFT_PROMOTION]).",replacement:[{match:/(?<=(,\i\.stickers\?\.button.{0,50}\i\.push\(\(.{0,100})\},"sticker"\)\))/,replace:'$1,stickersType:"stickers+"},"stickers+"))'}]},{find:"#{intl::EXPRESSION_PICKER_CATEGORIES_A11Y_LABEL}",replacement:[{match:/(?<=(\i)\?(\(.{0,15}\))\((\i),\{.{0,150}(\i)===\i\.\i\.STICKER,.{0,150}children:(.{0,30}\.\i,children:.{0,25})\}\)\}\):null)/,replace:',vcStickers=$1?$2($3,{id:"stickers+-picker-tab","aria-controls":"more-stickers-picker-tab-panel","aria-selected":$4==="stickers+",isActive:$4==="stickers+",autoFocus:true,viewType:"stickers+",children:$5+"+"})}):null'},{match:/children:\[\i,\i(?=.{0,150}\.SOUNDBOARD)/g,replace:"$&,vcStickers"},{match:/:null,((.{1,200})===.{1,30}\.STICKER&&\w+\?(\([^()]{1,10}\)).{1,15}?(\{.*?,onSelectSticker:.*?\})\):null)/,replace:':null,$2==="stickers+"?$3($self.moreStickersComponent,$4):null,$1'}]},{find:'==="remove_text"',replacement:{match:/,\i\.insertText=\i=>{[\w ;]*?1===\i\.length&&.+?==="remove_text"/,replace:",$self.textEditor=arguments[0]$&"}}],stickerButton({innerClassName:e,isActive:t,onClick:o}){return r("button",{className:e,onClick:o,style:{backgroundColor:"transparent"}},r("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24",className:ja("icon",{"icon-active":t})},r("path",{d:"M18.5 11c-4.136 0-7.5 3.364-7.5 7.5c0 .871.157 1.704.432 2.482l9.551-9.551A7.462 7.462 0 0 0 18.5 11z"}),r("path",{d:"M12 2C6.486 2 2 6.486 2 12c0 4.583 3.158 8.585 7.563 9.69A9.431 9.431 0 0 1 9 18.5C9 13.262 13.262 9 18.5 9c1.12 0 2.191.205 3.19.563C20.585 5.158 16.583 2 12 2z"})))},moreStickersComponent({channel:e,closePopout:t}){if(Fy===void 0)return r("div",null,"FFmpegStateContext is undefined");let[o,n]=X.useState(),[i,s]=X.useState([]),[a,l]=X.useState([]),[c,u]=X.useState(0),[p,m]=X.useState(null),g=X.useState(!1),y=X.useState(new Og),b=v=>v.map(E=>E.id).sort().join(",");return X.useEffect(()=>{(async()=>{console.log("Updating sticker packs...",c),u(c+1);let v=(await Promise.all(i.map(E=>G2(E.id)))).filter(E=>E!==null);l(v)})()},[i]),X.useEffect(()=>{(async()=>{let v=await Zd();b(v)!==b(i)&&s(v)})()},[]),X.useEffect(()=>{g[0]||_9e(y[0],()=>{g[1](!0)})},[]),r(a6e,null,r("svg",{width:"1",height:"1",viewBox:"0 0 1 1",fill:"none",xmlns:"http://www.w3.org/2000/svg",id:ja("inspectedIndicatorMask")},r("path",{d:"M0 0.26087C0 0.137894 0 0.0764069 0.0382035 0.0382035C0.0764069 0 0.137894 0 0.26087 0H0.73913C0.862106 0 0.923593 0 0.961797 0.0382035C1 0.0764069 1 0.137894 1 0.26087V0.73913C1 0.862106 1 0.923593 0.961797 0.961797C0.923593 1 0.862106 1 0.73913 1H0.26087C0.137894 1 0.0764069 1 0.0382035 0.961797C0 0.923593 0 0.862106 0 0.73913V0.26087Z",fill:"white"})),r(v6e,{onQueryChange:n}),r(Fy.Provider,{value:{ffmpeg:y[0],isLoaded:g[0]}},r(b6e,{stickerPacks:a,selectedStickerPackId:p,setSelectedStickerPackId:m,channelId:e.id,closePopout:t,query:o})),r(y6e,{packMetas:i.map(v=>({id:v.id,name:v.title,iconUrl:v.logo.image})),onPackSelect:v=>{m(v.id)}}))}})});var w6e=x(()=>{});function Npt(){let e=Gf.store.tagSettings??={},{localTags:t}=Y2;return Xg.forEach(o=>{e[o.name]||(e[o.name]={text:o.displayName,showInChat:!0,showInNotChat:!0})}),r(Be,{flexDirection:"column"},r("div",{style:{display:"flex",flexWrap:"wrap",gap:"16px"}},Xg.map(o=>r(cn,{key:o.name,style:{padding:"1em 1em 0",width:"calc(33.333% - 11px)",boxSizing:"border-box"}},r(er.FormTitle,{style:{width:"fit-content"}},r(Ue,{text:o.description},({onMouseEnter:n,onMouseLeave:i})=>r("div",{onMouseEnter:n,onMouseLeave:i},o.displayName," Tag"))),r("div",{style:{marginBottom:"10px"}},r(W,{style:{fontSize:"13px"}},"Example:"),r(K2,{type:t[o.name]})),r(qe,{type:"text",value:e[o.name]?.text??o.displayName,placeholder:`Text on tag (default: ${o.displayName})`,onChange:n=>e[o.name].text=n,className:Z.bottom16}),r(fn,{title:"Show in messages",value:e[o.name]?.showInChat??!0,onChange:n=>e[o.name].showInChat=n,hideBorder:!0}),r(fn,{title:"Show in member list and profiles",value:e[o.name]?.showInNotChat??!0,onChange:n=>e[o.name].showInNotChat=n,hideBorder:!0})))))}var Gf,uJ=x(()=>{"use strict";d();Q();fs();eo();Qs();wt();co();$();B();pJ();dJ();Gf=R({dontShowForBots:{description:"Don't show extra tags for bots (excluding webhooks)",type:3,default:!1},dontShowBotTag:{description:"Only show extra tags for bots / Hide [APP] text",type:3,default:!1,restartNeeded:!0},showWebhookTagFully:{description:"Show Webhook tag in followed channels like announcements",type:3,default:!1},tagSettings:{type:6,component:Npt,description:"fill me"}})});var Bpt,Xg,K2,k6e,dJ=x(()=>{"use strict";d();fe();B();uJ();Bpt=(e,t)=>{let o=e?.type===0&&!!e?.messageReference&&!Gf.store.showWebhookTagFully;return!!e?.webhookId&&t.isNonUserBot()&&!o},Xg=[{name:"WEBHOOK",displayName:"Webhook",description:"Messages sent by webhooks",condition:Bpt},{name:"OWNER",displayName:"Owner",description:"Owns the server",condition:(e,t,o)=>ct.getGuild(o?.guild_id)?.ownerId===t.id},{name:"ADMINISTRATOR",displayName:"Admin",description:"Has the administrator permission",permissions:["ADMINISTRATOR"]},{name:"MODERATOR_STAFF",displayName:"Staff",description:"Can manage the server, channels or roles",permissions:["MANAGE_GUILD","MANAGE_CHANNELS","MANAGE_ROLES"]},{name:"MODERATOR",displayName:"Mod",description:"Can manage messages or kick/ban people",permissions:["MANAGE_MESSAGES","KICK_MEMBERS","BAN_MEMBERS"]},{name:"VOICE_MODERATOR",displayName:"VC Mod",description:"Can manage voice chats",permissions:["MOVE_MEMBERS","MUTE_MEMBERS","DEAFEN_MEMBERS"]},{name:"CHAT_MODERATOR",displayName:"Chat Mod",description:"Can timeout people",permissions:["MODERATE_MEMBERS"]}],K2=An(e=>e.Types?.[0]==="BOT"),k6e=vt(".getCurrentUser()",".computeLurkerPermissionsAllowList()")});var Ppt,_pt,Y2,pJ=x(()=>{"use strict";d();w6e();H();nt();mt();$();B();dJ();uJ();Ppt=de("vc-mut-"),_pt=()=>{let e=100,t={};for(let{name:o}of Xg)t[o]=++e,t[e]=o;return t},Y2=k({name:"MoreUserTags",description:"Adds tags for webhooks and moderative roles (owner, admin, etc.)",authors:[w.Cyn,w.TheSun,w.RyanCaoDev,w.LordElias,w.AutumnVN,j.Hen],settings:Gf,patches:[{find:".STAFF_ONLY_DM:",replacement:[{match:/(?<=type:(\i).*?\.BOT:.{0,25})default:(\i)=/,replace:"default:$2=$self.getTagText($self.localTags[$1]);"},{match:/(?<=type:(\i).*?)\.BOT:(?=default:)/,replace:"$&return null;",predicate:()=>Gf.store.dontShowBotTag}]}],start(){let e=Gf.store.tagSettings||{};for(let t of Object.values(Xg))e[t.name]??={showInChat:!0,showInNotChat:!0,text:t.displayName};Gf.store.tagSettings=e},localTags:_pt(),getChannelId(){return st.getChannelId()},renderNicknameIcon(e){let t=this.getTag({user:z.getUser(e.userId),channel:Cn(),channelId:this.getChannelId(),isChat:!1});return t&&r(K2,{type:t,verified:!1})},renderMessageDecoration(e){let t=this.getTag({message:e.message,user:z.getUser(e.message.author.id),channelId:e.message.channel_id,isChat:!0});return t&&r(K2,{useRemSizes:!0,className:Ppt("message-tag",e.message.author.isVerifiedBot()&&"message-verified"),type:t,verified:!1})},renderMemberListDecorator(e){let t=this.getTag({user:e.user,channel:Cn(),channelId:this.getChannelId(),isChat:!1});return t&&r(K2,{type:t,verified:!1})},getTagText(e){if(!e)return St("APP_TAG");let t=Xg.find(({name:o})=>e===o);return t?Gf.store.tagSettings?.[t.name]?.text||t.displayName:e||St("APP_TAG")},getTag({message:e,user:t,channelId:o,isChat:n,channel:i}){let s=this.settings.store;if(!t||n&&t.id==="1"||t.bot&&s.dontShowForBots||(i??=ne.getChannel(o),!i))return null;let a=this.getPermissions(t,i);for(let l of Xg)if(!(n&&!s.tagSettings[l.name]?.showInChat)&&!(!n&&!s.tagSettings[l.name]?.showInNotChat)&&!(l.name!=="OWNER"&&ct.getGuild(i?.guild_id)?.ownerId===t.id&&n&&!s.tagSettings.OWNER.showInChat||ct.getGuild(i?.guild_id)?.ownerId===t.id&&!n&&!s.tagSettings.OWNER.showInNotChat)&&("permissions"in l?l.permissions.some(c=>a.includes(c)):l.condition(e,t,i)))return this.localTags[l.name];return null},getPermissions(e,t){let o=ct.getGuild(t?.guild_id);if(!o)return[];let n=k6e({user:e,context:o,overwrites:t.permissionOverwrites});return Object.entries(Nt).map(([i,s])=>n&s?i:"").filter(Boolean)}})});function Opt(e,t){let o=0,n=0;for(;(n=e.indexOf(t,n)+1)!==0;)o++;return o}function Fpt(e,t){if(!t.global)throw new Error("pattern must be global");let o=0;for(;t.test(e);)o++;return o}function $pt(e){let t=Opt(e,fJ)+Fpt(e,Upt);return Math.min(t,10)}function mJ(){if(!Jg.store.triggerWhenUnfocused&&!document.hasFocus())return;let e=document.createElement("audio");e.src=Jg.store.quality==="HD"?Lpt:Rpt,e.volume=Jg.store.volume,e.play()}var fJ,Rpt,Lpt,Jg,XB,Upt,E6e=x(()=>{"use strict";d();Q();H();xt();$();B();fJ="\u{1F5FF}",Rpt="https://github.com/Equicord/Equibored/raw/main/sounds/moyai/moyai.mp3",Lpt="https://github.com/Equicord/Equibored/raw/main/sounds/moyai/moyai.wav",Jg=R({volume:{description:"Volume of the \u{1F5FF}\u{1F5FF}\u{1F5FF}",type:5,markers:uo(0,1,.1),default:.5,stickToMarkers:!1},quality:{description:"Quality of the \u{1F5FF}\u{1F5FF}\u{1F5FF}",type:4,options:[{label:"Normal",value:"Normal",default:!0},{label:"HD",value:"HD"}]},triggerWhenUnfocused:{description:"Trigger the \u{1F5FF} even when the window is unfocused",type:3,default:!0},ignoreBots:{description:"Ignore bots",type:3,default:!0},ignoreBlocked:{description:"Ignore blocked users",type:3,default:!0}}),XB=k({name:"Moyai",authors:[w.Megu,w.Nuckyz],description:"\u{1F5FF}\u{1F5FF}\u{1F5FF}\u{1F5FF}\u{1F5FF}\u{1F5FF}\u{1F5FF}\u{1F5FF}",settings:Jg,flux:{async MESSAGE_CREATE({optimistic:e,type:t,message:o,channelId:n}){if(e||t!=="MESSAGE_CREATE"||o.state==="SENDING"||Jg.store.ignoreBots&&o.author?.bot||Jg.store.ignoreBlocked&&Tt.isBlocked(o.author?.id)||!o.content||n!==st.getChannelId())return;let i=$pt(o.content);for(let s=0;s<i;s++)mJ(),await tl(300)},MESSAGE_REACTION_ADD({optimistic:e,type:t,channelId:o,userId:n,messageAuthorId:i,emoji:s}){if(e||t!=="MESSAGE_REACTION_ADD"||Jg.store.ignoreBots&&z.getUser(n)?.bot||Jg.store.ignoreBlocked&&Tt.isBlocked(i)||o!==st.getChannelId())return;let a=s.name.toLowerCase();a!==fJ&&!a.includes("moyai")&&!a.includes("moai")||mJ()},VOICE_CHANNEL_EFFECT_SEND({emoji:e}){if(!e?.name)return;let t=e.name.toLowerCase();t!==fJ&&!t.includes("moyai")&&!t.includes("moai")||mJ()}}});Upt=/<a?:\w*moy?ai\w*:\d{17,20}>/gi});var A6e=x(()=>{});var C6e,T6e=x(()=>{d();(window.VencordStyles??=new Map).set("src/equicordplugins/musicControls/hoverOnly.css",{name:"src/equicordplugins/musicControls/hoverOnly.css",source:`.vc-spotify-button-row {
    height: 0;
    opacity: 0;
    pointer-events: none;
    transition: 0.2s;
    transition-property: height;
}

.eq-tdl-button-row {
    height: 0;
    opacity: 0;
    pointer-events: none;
    transition: 0.2s;
    transition-property: height;
}

.vc-ytm-button-row {
    height: 0;
    opacity: 0;
    pointer-events: none;
    transition: 0.2s;
    transition-property: height;
}

#eq-tdl-player:hover .eq-tdl-button-row,
#vc-spotify-player:hover .vc-spotify-button-row,
#vc-ytm-player:hover .vc-ytm-button-row {
    opacity: 1;
    height: 32px;
    pointer-events: auto;

    /* only transition opacity on show to prevent clipping */
    transition-property: height, opacity;
}`,classNames:{},dom:null});C6e="src/equicordplugins/musicControls/hoverOnly.css"});var Uy=x(()=>{"use strict";d()});function zpt(e){let[t,o]=e.slice(1,-1).split(":").map(Number);return t*60+o}async function I6e(e){let t={track_name:e.name,artist_name:e.artists[0].name,album_name:e.album.name,duration:String(e.duration/1e3)},o=new URLSearchParams(t),n=`${Hpt}?${o.toString()}`,i=await fetch(n,{headers:{"User-Agent":"SpotifyLyrics for Equicord (https://github.com/Masterjoona/vc-spotifylyrics)"}});if(!i.ok)return null;let s=await i.json();if(!s.syncedLyrics)return null;let l=s.syncedLyrics.split(`
`).filter(c=>c.trim()!=="");return{useLyric:"LRCLIB",lyricsVersions:{LRCLIB:l.map(c=>{let[u,p]=c.split("]"),m=p.trim();return{time:zpt(u),text:m===""||m==="\u266A"?null:m}})}}}var Hpt,D6e=x(()=>{"use strict";d();Uy();Hpt="https://lrclib.net/api/get"});async function M6e(e){let t=await fetch("https://spotify-lyrics-api-pi.vercel.app/?trackid="+e);if(!t.ok)return null;let o;try{o=await t.json()}catch{return null}let n=o.lines;return n[0].startTimeMs==="0"&&n[n.length-1].startTimeMs==="0"?null:{useLyric:"Spotify",lyricsVersions:{Spotify:n.map(i=>{let s=i.words.trim();return{time:Number(i.startTimeMs)/1e3,text:s===""||s==="\u266A"?null:s}})}}}var N6e=x(()=>{"use strict";d();Uy()});async function gJ(e){if(!e||!e.id)return null;let t=e.id,o=await Oe.get(Vg);if(o?.[t])return o[t];let n=JB.get(t);if(n){let s=Mr.store.LyricsProvider;if(!Mr.store.FallbackProvider&&n[s]||$y.every(a=>n[a]))return null}let i=[Mr.store.LyricsProvider,...$y.filter(s=>s!==Mr.store.LyricsProvider)];for(let s of i){let a=await VB[s](e);if(a)return await Oe.set(Vg,{...o,[t]:a}),a;let l=JB.get(t)||{};JB.set(t,{...l,[s]:!0})}return null}async function B6e(){JB.clear(),await Oe.set(Vg,{})}async function eP(e,t,o){let n=await Oe.get(Vg),i=n[e];await Oe.set(Vg,{...n,[e]:{...i,useLyric:o,lyricsVersions:{...i?.lyricsVersions,[o]:t}}})}async function P6e(){let e=await Oe.get(Vg),t={};for(let[o,n]of Object.entries(e)){let{Translated:i,...s}=n?.lyricsVersions||{},a=s.Spotify?"Spotify":"LRCLIB";t[o]={lyricsVersions:s,useLyric:a}}await Oe.set(Vg,t)}async function _6e(){let e=await Oe.get("SpotifyLyricsCache");if(!e||!Object.entries(e).length)return;let t=Object.entries(e).filter(n=>n[1]),o={};t.forEach(([n,i])=>{o[n]={lyricsVersions:{LRCLIB:i.map(({time:s,text:a})=>({time:s,text:a}))},useLyric:"LRCLIB"}}),await Oe.set(Vg,o),await Oe.set("SpotifyLyricsCache",{})}var Vg,JB,VB,$y,Ik=x(()=>{"use strict";d();dr();qf();D6e();N6e();Uy();Vg="SpotifyLyricsCacheNew",JB=new Map,VB={Spotify:async e=>await M6e(e.id),LRCLIB:I6e},$y=Object.keys(VB)});var R6e,L6e=x(()=>{"use strict";d();R6e=[{value:"auto",label:"Detect language"},{value:"af",label:"Afrikaans"},{value:"sq",label:"Albanian"},{value:"am",label:"Amharic"},{value:"ar",label:"Arabic"},{value:"hy",label:"Armenian"},{value:"as",label:"Assamese"},{value:"ay",label:"Aymara"},{value:"az",label:"Azerbaijani"},{value:"bm",label:"Bambara"},{value:"eu",label:"Basque"},{value:"be",label:"Belarusian"},{value:"bn",label:"Bengali"},{value:"bho",label:"Bhojpuri"},{value:"bs",label:"Bosnian"},{value:"bg",label:"Bulgarian"},{value:"ca",label:"Catalan"},{value:"ceb",label:"Cebuano"},{value:"ny",label:"Chichewa"},{value:"zh-CN",label:"Chinese (Simplified)"},{value:"zh-TW",label:"Chinese (Traditional)"},{value:"co",label:"Corsican"},{value:"hr",label:"Croatian"},{value:"cs",label:"Czech"},{value:"da",label:"Danish"},{value:"dv",label:"Dhivehi"},{value:"doi",label:"Dogri"},{value:"nl",label:"Dutch"},{value:"en",label:"English",default:!0},{value:"eo",label:"Esperanto"},{value:"et",label:"Estonian"},{value:"ee",label:"Ewe"},{value:"tl",label:"Filipino"},{value:"fi",label:"Finnish"},{value:"fr",label:"French"},{value:"fy",label:"Frisian"},{value:"gl",label:"Galician"},{value:"ka",label:"Georgian"},{value:"de",label:"German"},{value:"el",label:"Greek"},{value:"gn",label:"Guarani"},{value:"gu",label:"Gujarati"},{value:"ht",label:"Haitian Creole"},{value:"ha",label:"Hausa"},{value:"haw",label:"Hawaiian"},{value:"iw",label:"Hebrew"},{value:"hi",label:"Hindi"},{value:"hmn",label:"Hmong"},{value:"hu",label:"Hungarian"},{value:"is",label:"Icelandic"},{value:"ig",label:"Igbo"},{value:"ilo",label:"Ilocano"},{value:"id",label:"Indonesian"},{value:"ga",label:"Irish"},{value:"it",label:"Italian"},{value:"ja",label:"Japanese"},{value:"jw",label:"Javanese"},{value:"kn",label:"Kannada"},{value:"kk",label:"Kazakh"},{value:"km",label:"Khmer"},{value:"rw",label:"Kinyarwanda"},{value:"gom",label:"Konkani"},{value:"ko",label:"Korean"},{value:"kri",label:"Krio"},{value:"ku",label:"Kurdish (Kurmanji)"},{value:"ckb",label:"Kurdish (Sorani)"},{value:"ky",label:"Kyrgyz"},{value:"lo",label:"Lao"},{value:"la",label:"Latin"},{value:"lv",label:"Latvian"},{value:"ln",label:"Lingala"},{value:"lt",label:"Lithuanian"},{value:"lg",label:"Luganda"},{value:"lb",label:"Luxembourgish"},{value:"mk",label:"Macedonian"},{value:"mai",label:"Maithili"},{value:"mg",label:"Malagasy"},{value:"ms",label:"Malay"},{value:"ml",label:"Malayalam"},{value:"mt",label:"Maltese"},{value:"mi",label:"Maori"},{value:"mr",label:"Marathi"},{value:"mni-Mtei",label:"Meiteilon (Manipuri)"},{value:"lus",label:"Mizo"},{value:"mn",label:"Mongolian"},{value:"my",label:"Myanmar (Burmese)"},{value:"ne",label:"Nepali"},{value:"no",label:"Norwegian"},{value:"or",label:"Odia (Oriya)"},{value:"om",label:"Oromo"},{value:"ps",label:"Pashto"},{value:"fa",label:"Persian"},{value:"pl",label:"Polish"},{value:"pt",label:"Portuguese"},{value:"pa",label:"Punjabi"},{value:"qu",label:"Quechua"},{value:"ro",label:"Romanian"},{value:"ru",label:"Russian"},{value:"sm",label:"Samoan"},{value:"sa",label:"Sanskrit"},{value:"gd",label:"Scots Gaelic"},{value:"nso",label:"Sepedi"},{value:"sr",label:"Serbian"},{value:"st",label:"Sesotho"},{value:"sn",label:"Shona"},{value:"sd",label:"Sindhi"},{value:"si",label:"Sinhala"},{value:"sk",label:"Slovak"},{value:"sl",label:"Slovenian"},{value:"so",label:"Somali"},{value:"es",label:"Spanish"},{value:"su",label:"Sundanese"},{value:"sw",label:"Swahili"},{value:"sv",label:"Swedish"},{value:"tg",label:"Tajik"},{value:"ta",label:"Tamil"},{value:"tt",label:"Tatar"},{value:"te",label:"Telugu"},{value:"th",label:"Thai"},{value:"ti",label:"Tigrinya"},{value:"ts",label:"Tsonga"},{value:"tr",label:"Turkish"},{value:"tk",label:"Turkmen"},{value:"ak",label:"Twi"},{value:"uk",label:"Ukrainian"},{value:"ur",label:"Urdu"},{value:"ug",label:"Uyghur"},{value:"uz",label:"Uzbek"},{value:"vi",label:"Vietnamese"},{value:"cy",label:"Welsh"},{value:"xh",label:"Xhosa"},{value:"yi",label:"Yiddish"},{value:"yo",label:"Yoruba"},{value:"zu",label:"Zulu"}]});function hJ(e){(e?Or:Fr)(C6e)}function qpt(){return r("section",null,r(so,null,"How to install"),r(W,null,"Install ",r(uw,{href:"https://github.com/Inrixia/TidaLuna#installation"},"TidaLuna")," from here, then go to TidalLuna settings \u2192 Plugin stores \u2192 Install ",r("code",null,"@vmohammad/api")))}var Gpt,Mr,qf=x(()=>{"use strict";d();Q();ps();ut();wt();$();B();T6e();Ik();L6e();Uy();Gpt={markers:uo(-2500,2500,250),stickToMarkers:!0};Mr=R({hoverControls:{description:"Show controls on hover",type:3,default:!1,onChange:e=>hJ(e)},ShowMusicNoteOnNoLyrics:{description:"Show a music note icon when no lyrics are found",type:3,default:!0},LyricsPosition:{description:"Position of the lyrics",type:4,options:[{value:"above",label:"Above Player(s)"},{value:"below",label:"Below  Player(s)",default:!0}]},LyricsProvider:{description:"Where lyrics are fetched from",type:4,options:[{value:"Spotify",label:"Spotify (Musixmatch)",default:!0},{value:"LRCLIB",label:"LRCLIB"}]},TranslateTo:{description:"Translate lyrics to - Changing this will clear existing translations",type:4,options:R6e,onChange:async()=>{await P6e(),Re("Translations cleared",D.Type.SUCCESS)}},LyricsConversion:{description:"Automatically translate or romanize lyrics",type:4,options:[{value:"None",label:"None",default:!0},{value:"Translated",label:"Translate"},{value:"Romanized",label:"Romanize"}]},FallbackProvider:{description:"When a lyrics provider fails, try other providers",type:3,default:!0},ShowFailedToasts:{description:"Hide toasts when lyrics fail to fetch",type:3,default:!0},LyricDelay:{description:"",type:5,default:0,...Gpt},PurgeLyricsCache:{description:"Purge the lyrics cache",type:6,component:()=>r(U,{color:U.Colors.RED,onClick:()=>{B6e(),Re("Lyrics cache purged",D.Type.SUCCESS)}},"Purge Cache")},SpotifySectionTitle:{type:6,component:()=>r("section",null,r(so,null,"Spotify"))},showSpotifyControls:{description:"Show Spotify Controls",type:3,default:!1},showSpotifyLyrics:{description:"Show Spotify Lyrics",type:3,default:!1},useSpotifyUris:{type:3,description:"Open Spotify URIs instead of Spotify URLs. Will only work if you have Spotify installed and might not work on all platforms",default:!1},previousButtonRestartsTrack:{type:3,description:"Restart currently playing track when pressing the previous button if playtime is >3s",default:!0},TidalSectionTitle:{type:6,component:()=>r("section",null,r(so,null,"Tidal"))},installTidalWithWS:{type:6,component:()=>r(qpt,null)},showTidalControls:{description:"Show Tidal Player",type:3,default:!1},showTidalLyrics:{description:"Show Tidal Controls",type:3,default:!1},YtmSectionTitle:{type:6,component:()=>r("section",null,r(so,null,"Youtube Music"))},showYoutubeMusicControls:{description:"Show Youtube Music Controls",type:3,default:!1},YoutubeMusicApiUrl:{description:"Custom URL for the Api Server plugin",type:0,default:"http://localhost:26538",placeholder:"http://localhost:26538",onChange:e=>{URL.canParse(e)?Mr.store.YoutubeMusicApiUrl=e:(Re("Invalid URL format for Custom Api Server URL: "+e,D.Type.FAILURE),Mr.store.YoutubeMusicApiUrl=Mr.def.YoutubeMusicApiUrl.default)}}})});var ko,Q2=x(()=>{"use strict";d();Wo();Q();RT();fe();B();ko=fr(()=>{let{Store:e}=is,t=Ch("getActiveSocketAndDevice"),o=He("vcSpotifyMarker"),n="https://api.spotify.com/v1/me/player";class i extends e{mPosition=0;_start=0;track=null;device=null;isPlaying=!1;repeat="off";shuffle=!1;volume=0;isSettingPosition=!1;openExternal(l){let c=Ge.plugins.SpotifyControls.useSpotifyUris||yt(xf.name)?"spotify:"+l.replaceAll("/",(u,p)=>p===0?"":":"):"https://open.spotify.com"+l;VencordNative.native.openExternal(c)}get position(){let l=this.mPosition;return this.isPlaying&&(l+=Date.now()-this._start),l}set position(l){this.mPosition=l,this._start=Date.now()}prev(){this._req("post","/previous")}next(){this._req("post","/next")}setVolume(l){this._req("put","/volume",{query:{volume_percent:Math.round(l)}}).then(()=>{this.volume=l,this.emitChange()})}setPlaying(l){this._req("put",l?"/play":"/pause")}setRepeat(l){this._req("put","/repeat",{query:{state:l}})}setShuffle(l){this._req("put","/shuffle",{query:{state:l}}).then(()=>{this.shuffle=l,this.emitChange()})}seek(l){return this.isSettingPosition?Promise.resolve():(this.isSettingPosition=!0,this._req("put","/seek",{query:{position_ms:Math.round(l)}}).catch(c=>{console.error("[VencordSpotifyControls] Failed to seek",c),this.isSettingPosition=!1}))}_req(l,c,u={}){this.device?.is_active&&((u.query??={}).device_id=this.device.id);let{socket:p}=t.getActiveSocketAndDevice();return o[l](p.accountId,p.accessToken,{url:n+c,...u})}}let s=new i(V,{SPOTIFY_PLAYER_STATE(a){s.track=a.track,s.device=a.device??null,s.isPlaying=a.isPlaying??!1,s.volume=a.volumePercent??0,s.repeat=a.actual_repeat||"off",s.shuffle=a.shuffle??!1,s.position=a.position??0,s.isSettingPosition=!1,s.emitChange()},SPOTIFY_SET_DEVICES({devices:a}){s.device=a.find(l=>l.is_active)??a[0]??null,s.emitChange()}});return s})});async function jpt(e,t,o){let n="https://translate.googleapis.com/translate_a/single?"+new URLSearchParams({client:"gtx",sl:"auto",tl:t,dt:o?"rm":"t",dj:"1",source:"input",q:e}),i=await fetch(n);return i.ok?await i.json():null}async function O6e(e,t,o){if(!e)return null;let n=e.filter((s,a,l)=>l.findIndex(c=>c.text===s.text)===a),i=await Promise.all(n.map(async s=>{if(!s.text)return[s.text,null];let a=await jpt(s.text,t,o);return!a||!a.sentences||a.sentences.length===0?[s.text,null]:[s.text,o?a.sentences[0].src_translit:a.sentences[0].trans]}));return i.every(s=>s[1]===null)?null:e.map(s=>({...s,text:i.find(a=>a[0]===s.text)?.[1]??s.text}))}async function Wpt(e){return await O6e(e,Z2.store.TranslateTo,!1)}async function Kpt(e){return await O6e(e,"",!0)}var F6e,U6e=x(()=>{"use strict";d();xJ();Uy();F6e={Translated:Wpt,Romanized:Kpt}});function yJ(e,t){Mr.store.ShowFailedToasts&&qt({color:"#ee2902",title:e,body:t,noPersist:!0})}var bJ,Dk,tP=x(()=>{"use strict";d();_a();qf();Ik();Q2();fe();B();U6e();Uy();bJ=["Translated","Romanized"];Dk=fr(()=>{let e=null,t=[];class o extends is.Store{init(){}get lyricsInfo(){return e}}let n=new o(V,{async SPOTIFY_PLAYER_STATE(i){if(t.includes(i.track?.id??""))return;t.push(i.track?.id??""),e=await gJ(i.track);let{LyricsConversion:s}=Mr.store;s!=="None"&&V.dispatch({type:"SPOTIFY_LYRICS_PROVIDER_CHANGE",provider:s}),t=t.filter(a=>a!==i.track?.id),n.emitChange()},async SPOTIFY_LYRICS_PROVIDER_CHANGE(i){let{track:s}=ko;if(!s)return;let a=await gJ(s),{provider:l}=i;if(a?.useLyric===l)return;if(a?.lyricsVersions[l]){e={...a,useLyric:l},await eP(s.id,a.lyricsVersions[l],l),n.emitChange();return}if(l==="Translated"||l==="Romanized"){let u=a?.lyricsVersions[Mr.store.LyricsProvider]||$y.map(g=>a?.lyricsVersions[g]).find(Boolean);if(!u||!a){yJ("No lyrics",`No lyrics to ${l==="Translated"?"translate":"romanize"}`);return}let p=u.map(g=>g.text).join(" ");if(l==="Romanized"&&!/[^\u0000-\u007F]/.test(p)){e={...a,useLyric:Mr.store.LyricsProvider,lyricsVersions:{...a.lyricsVersions}},n.emitChange();return}let m=await F6e[l](u);if(!m){yJ("Lyrics fetch failed",`Failed to fetch ${l==="Translated"?"translation":"romanization"}`);return}e={...a,useLyric:l,lyricsVersions:{...a.lyricsVersions,[l]:m}},await eP(s.id,m,l),n.emitChange();return}let c=await VB[i.provider](s);if(!c){yJ("Lyrics fetch failed",`Failed to fetch ${i.provider} lyrics`);return}e=c,eP(s.id,c.lyricsVersions[i.provider],i.provider),n.emitChange()}});return n})});function Mk(){return r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 -960 480 720",fill:"currentColor",className:jc("music-note")},r("path",{d:"m160,-240 q -66,0 -113,-47 -47,-47 -47,-113 0,-66 47,-113 47,-47 113,-47 23,0 42.5,5.5 19.5,5.5 37.5,16.5 v -422 h 240 v 160 H 320 v 400 q 0,66 -47,113 -47,47 -113,47 z"}))}function X2({scroll:e=!0}={}){let[t,o,n]=Je([ko],()=>[ko.track,ko.mPosition,ko.isPlaying]),i=Je([Dk],()=>Dk.lyricsInfo),{LyricDelay:s}=Mr.use(["LyricDelay"]),[a,l]=L(null),[c,u]=L(null),[p,m]=L(o),[g,y]=L([]),b=i?.lyricsVersions[i.useLyric];return se(()=>{b&&y(b.map(()=>X.createRef()))},[b]),se(()=>{if(b&&p!=null){let[v,E]=Ypt(b,p,s);l(v),u(E)}else l(null),u(null)},[b,p,s]),se(()=>{e&&a!==null&&(a>=0&&g[a].current?.scrollIntoView({behavior:"smooth",block:"center"}),a<0&&c!==null&&g[c]?.current?.scrollIntoView({behavior:"smooth",block:"center"}))},[a,c,e,g]),se(()=>{if(!n)return;m(ko.position);let v=setInterval(()=>m(E=>E+1e3),1e3);return()=>clearInterval(v)},[o,n]),{track:t,lyricsInfo:i,lyricRefs:g,currLrcIndex:a,nextLyric:c}}var $6e,jc,Ypt,oP=x(()=>{"use strict";d();qf();tP();Q2();nt();fe();B();$6e=et("auto","customTheme"),jc=de("vc-spotify-lyrics-");Ypt=(e,t,o)=>{let n=(t+o)/1e3,i=0,s=e.length-1,a=null;for(;i<=s;){let u=Math.floor((i+s)/2),p=e[u],m=e[u+1];if(p.time<=n&&(!m||m.time>n)){a=u;break}p.time>n?s=u-1:i=u+1}let l=a!==null?a+1:i,c=l<e.length?l:null;return a!==null&&n-e[a].time>8?[null,c]:[a,c]}});function H6e(){let{lyricsInfo:e,currLrcIndex:t}=X2({scroll:!1}),o=e?.lyricsVersions[e.useLyric]?.[t??NaN],n=$y.some(i=>e?.lyricsVersions[i]?.length);return r(M.Menu,{navId:"spotify-lyrics-menu",onClose:()=>V.dispatch({type:"CONTEXT_MENU_CLOSE"}),"aria-label":"Spotify Lyrics Menu"},r(M.MenuItem,{key:"copy-lyric",id:"copy-lyric",label:"Copy current lyric",disabled:!o?.text,action:()=>$t(o.text,"Lyric copied!"),icon:Qpt}),r(M.MenuItem,{navId:"spotify-lyrics-provider",id:"spotify-lyrics-provider",label:"Lyrics Provider"},[...$y,...bJ].map(i=>r(M.MenuRadioItem,{key:`lyrics-provider-${i}`,id:`switch-provider-${i.toLowerCase()}`,group:"vc-spotify-lyrics-switch-provider",label:`${i}${e?.lyricsVersions[i]?" (saved)":""}`,checked:i===e?.useLyric,disabled:bJ.includes(i)&&!n,action:()=>{V.dispatch({type:"SPOTIFY_LYRICS_PROVIDER_CHANGE",provider:i})}}))))}var Qpt,z6e=x(()=>{"use strict";d();Ik();tP();mt();fe();B();oP();Qpt=De(" 1-.5.5H10a6")});function Xpt({track:e}){return e?r(je,null,r("div",{className:jc("header-content")},e?.album?.image?.url&&r("img",{src:e.album.image.url,alt:e.album.name,className:jc("album-image"),onClick:()=>us({url:e.album.image.url,width:e.album.image.width,height:e.album.image.height})}),r("div",null,r(Y,{size:"sm",weight:"semibold"},e.name),r(Y,{size:"sm"},"by ",e.artists.map(t=>t.name).join(", ")),r(Y,{size:"sm"},"on ",e.album.name)))):r(je,null,r(Y,{size:"sm",weight:"semibold"},"No track playing"))}function G6e({props:e}){let{track:t,lyricsInfo:o,currLrcIndex:n}=X2({scroll:!1}),i=o?.lyricsVersions[o.useLyric];return r(Pe,{...e},r(Xpt,{track:t}),r($e,null,r("div",{className:`${jc("lyrics-modal-container")} ${$6e.auto}`},i?i.map((s,a)=>r(Y,{key:a,size:n===a?"md":"sm",weight:n===a?"semibold":"normal",className:n===a?Jpt:Vpt},r("span",{className:jc("modal-timestamp"),onClick:()=>ko.seek(s.time*1e3)},Zpt(s.time)),s.text||Mk())):r(Y,{size:"sm",className:jc("modal-no-lyrics")},"No lyrics available :("))))}var Zpt,Jpt,Vpt,q6e=x(()=>{"use strict";d();Et();Q2();mt();at();oP();Zpt=e=>{let t=Math.floor(e/60),o=Math.floor(e%60);return`${t}:${o.toString().padStart(2,"0")}`};Jpt=jc("modal-line-current"),Vpt=jc("modal-line")});function omt({scroll:e=!0}){let{ShowMusicNoteOnNoLyrics:t}=Mr.use(["ShowMusicNoteOnNoLyrics"]),{lyricsInfo:o,lyricRefs:n,currLrcIndex:i}=X2({scroll:e}),s=o?.lyricsVersions[o.useLyric]||null,a=l=>{if(i==null)return j6e;let c=l-i;return c===0?tmt:c>0?emt:j6e};return r("div",{className:"vc-spotify-lyrics",onClick:()=>Ee(l=>r(G6e,{props:l})),onContextMenu:l=>Dt.openContextMenu(l,()=>r(H6e,null))},s?s.map((l,c)=>r("div",{ref:n[c],key:c},r(Y,{size:i===c?"sm":"xs",className:a(c)},l.text||Mk()))):t?r(ii,{text:"No synced lyrics found"},r(Mk,null)):null)}function vJ({scroll:e=!0}={}){Dk.init();let t=Je([ko],()=>ko.track,null,(a,l)=>a?.id?a.id===l?.id:a?.name===l?.name),o=Je([ko],()=>ko.device,null,(a,l)=>a?.id===l?.id),n=Je([ko],()=>ko.isPlaying),[i,s]=L(!1);return se(()=>{if(s(!1),!n){let a=setTimeout(()=>s(!0),3e5);return()=>clearTimeout(a)}},[n]),!t||!o?.is_active||i?null:r(omt,{scroll:e})}var j6e,emt,tmt,W6e=x(()=>{"use strict";d();Et();du();qf();tP();Q2();at();B();z6e();q6e();oP();j6e=jc("prev"),emt=jc("next"),tmt=jc("current")});var K6e=x(()=>{});var J2,nP=x(()=>{"use strict";d();wh();B();J2=Rn(()=>{let e=Tr.$$vencordGetWrappedComponent();return class extends e{static getDerivedStateFromProps(o,n){let i=super.getDerivedStateFromProps(o,n);return i&&(i.value=o.initialValue),i}}})});function SJ(e){let t=e/1e3/60,o=Math.floor(t),n=Math.floor((t-o)*60);return`${o.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`}function V2(e,t){return()=>r("svg",{className:sr("button-icon",t),height:"24",width:"24",viewBox:"0 0 24 24",fill:"currentColor","aria-label":t,focusable:!1},r("path",{d:e}))}function Nk(e){return r("button",{className:sr("button"),...e},e.children)}function cmt({name:e,type:t,path:o}){return r(M.Menu,{navId:"vc-spotify-menu",onClose:Dt.closeContextMenu,"aria-label":`Spotify ${t} Menu`},r(M.MenuItem,{id:"vc-spotify-copy-name",label:`Copy ${t} Name`,action:()=>$t(e),icon:ol}),r(M.MenuItem,{id:"vc-spotify-copy-link",label:`Copy ${t} Link`,action:()=>$t("https://open.spotify.com"+o),icon:hc}),r(M.MenuItem,{id:"vc-spotify-open",label:`Open ${t} in Spotify`,action:()=>ko.openExternal(o),icon:_r}))}function umt(){let[e,t,o]=Je([ko],()=>[ko.isPlaying,ko.shuffle,ko.repeat]),[n,i]=(()=>{switch(o){case"off":return["context","repeat-off"];case"context":return["track","repeat-context"];case"track":return["off","repeat-track"];default:throw new Error(`Invalid repeat state ${o}`)}})();return r(Be,{className:sr("button-row"),gap:"0"},r(Nk,{className:me(sr("button"),sr("shuffle"),sr(t?"shuffle-on":"shuffle-off")),onClick:()=>ko.setShuffle(!t)},r(lmt,null)),r(Nk,{onClick:()=>{Ge.plugins.MusicControls.previousButtonRestartsTrack&&ko.position>3e3?ko.seek(0):ko.prev()}},r(imt,null)),r(Nk,{onClick:()=>ko.setPlaying(!e)},e?r(rmt,null):r(nmt,null)),r(Nk,{onClick:()=>ko.next()},r(smt,null)),r(Nk,{className:me(sr("button"),sr("repeat"),sr(i)),onClick:()=>ko.setRepeat(n),style:{position:"relative"}},o==="track"&&r("span",{className:sr("repeat-1")},"1"),r(amt,null)))}function pmt(){let{duration:e}=ko.track,[t,o,n]=Je([ko],()=>[ko.mPosition,ko.isSettingPosition,ko.isPlaying]),[i,s]=L(t);se(()=>{if(n&&!o){s(ko.position);let l=setInterval(()=>{s(c=>c+1e3)},1e3);return()=>clearInterval(l)}},[t,o,n]);let a=l=>{o||(s(l),dmt(l))};return r("div",{id:sr("progress-bar")},r(Tm,{size:"xs",weight:"medium",className:sr("progress-time")+" "+sr("time-left"),"aria-label":"Progress"},SJ(i)),r(J2,{initialValue:i,minValue:0,maxValue:e,onValueChange:a,asValueChanges:a,onValueRender:SJ}),r(Tm,{size:"xs",weight:"medium",className:sr("progress-time")+" "+sr("time-right"),"aria-label":"Total Duration"},SJ(e)))}function mmt({track:e}){let t=Je([ko],()=>ko.volume);return r(M.Menu,{navId:"spotify-album-menu",onClose:()=>V.dispatch({type:"CONTEXT_MENU_CLOSE"}),"aria-label":"Spotify Album Menu"},r(M.MenuItem,{key:"open-album",id:"open-album",label:"Open Album",action:()=>ko.openExternal(`/album/${e.album.id}`),icon:_r}),r(M.MenuItem,{key:"view-cover",id:"view-cover",label:"View Album Cover",action:()=>us(e.album.image),icon:nl}),r(M.MenuControlItem,{id:"spotify-volume",key:"spotify-volume",label:"Volume",control:(o,n)=>r(M.MenuSliderControl,{...o,ref:n,value:t,minValue:0,maxValue:100,onChange:rn(i=>ko.setVolume(i))})}))}function wJ(e,t,o,n){return t?{role:"link",onClick:()=>ko.openExternal(n),onContextMenu:i=>Dt.openContextMenu(i,()=>r(cmt,{type:e,name:o,path:n}))}:{}}function fmt({track:e}){let t=e?.album?.image,[o,n]=L(!1),i=r(f,null,t&&r("img",{id:sr("album-image"),src:t.url,alt:"Album Image",onClick:()=>n(!o),onContextMenu:s=>{Dt.openContextMenu(s,()=>r(mmt,{track:e}))}}));return o&&t?r("div",{id:sr("album-expanded-wrapper")},i):r("div",{id:sr("info-wrapper")},i,r("div",{id:sr("titles")},r(W,{weight:"semibold",id:sr("song-title"),className:sr("ellipoverflow"),title:e.name,...wJ("Song",e.id,e.name,`/track/${e.id}`)},e.name),e.artists.some(s=>s.name)&&r(W,{className:sr(["ellipoverflow","secondary-song-info"])},r("span",{className:sr("song-info-prefix")},"by\xA0"),e.artists.map((s,a)=>r(X.Fragment,{key:s.name},r("span",{className:sr("artist"),style:{fontSize:"inherit"},title:s.name,...wJ("Artist",s.id,s.name,`/artist/${s.id}`)},s.name),a!==e.artists.length-1&&r("span",{className:sr("comma")},", ")))),e.album.name&&r(W,{className:sr(["ellipoverflow","secondary-song-info"])},r("span",{className:sr("song-info-prefix")},"on\xA0"),r("span",{id:sr("album-title"),className:sr("album"),style:{fontSize:"inherit"},title:e.album.name,...wJ("Album",e.album.id,e.album.name,`/album/${e.album.id}`)},e.album.name))))}function Y6e(){let e=Je([ko],()=>ko.track,null,(a,l)=>a?.id?a.id===l?.id:a?.name===l?.name),t=Je([ko],()=>ko.device,null,(a,l)=>a?.id===l?.id),o=Je([ko],()=>ko.isPlaying),[n,i]=L(!1);if(X.useEffect(()=>{if(i(!1),!o){let a=setTimeout(()=>i(!0),3e5);return()=>clearTimeout(a)}},[o]),!e||!t?.is_active||n)return null;let s={"--vc-spotify-track-image":`url(${e?.album?.image?.url||""})`};return r("div",{id:sr("player"),style:s},r(fmt,{track:e}),r(pmt,null),r(umt,null))}var sr,nmt,rmt,imt,smt,amt,lmt,dmt,Q6e=x(()=>{"use strict";d();K6e();Q();eo();ao();wt();u1();la();nt();mt();xt();B();nP();Q2();sr=de("vc-spotify-");nmt=V2("M8 6.82v10.36c0 .79.87 1.27 1.54.84l8.14-5.18c.62-.39.62-1.29 0-1.69L9.54 5.98C8.87 5.55 8 6.03 8 6.82z","play"),rmt=V2("M8 19c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2s-2 .9-2 2v10c0 1.1.9 2 2 2zm6-12v10c0 1.1.9 2 2 2s2-.9 2-2V7c0-1.1-.9-2-2-2s-2 .9-2 2z","pause"),imt=V2("M7 6c.55 0 1 .45 1 1v10c0 .55-.45 1-1 1s-1-.45-1-1V7c0-.55.45-1 1-1zm3.66 6.82l5.77 4.07c.66.47 1.58-.01 1.58-.82V7.93c0-.81-.91-1.28-1.58-.82l-5.77 4.07c-.57.4-.57 1.24 0 1.64z","previous"),smt=V2("M7.58 16.89l5.77-4.07c.56-.4.56-1.24 0-1.63L7.58 7.11C6.91 6.65 6 7.12 6 7.93v8.14c0 .81.91 1.28 1.58.82zM16 7v10c0 .55.45 1 1 1s1-.45 1-1V7c0-.55-.45-1-1-1s-1 .45-1 1z","next"),amt=V2("M7 7h10v1.79c0 .45.54.67.85.35l2.79-2.79c.2-.2.2-.51 0-.71l-2.79-2.79c-.31-.31-.85-.09-.85.36V5H6c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1s1-.45 1-1V7zm10 10H7v-1.79c0-.45-.54-.67-.85-.35l-2.79 2.79c-.2.2-.2.51 0 .71l2.79 2.79c.31.31.85.09.85-.36V19h11c.55 0 1-.45 1-1v-4c0-.55-.45-1-1-1s-1 .45-1 1v3z","repeat"),lmt=V2("M10.59 9.17L6.12 4.7c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41l4.46 4.46 1.42-1.4zm4.76-4.32l1.19 1.19L4.7 17.88c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L17.96 7.46l1.19 1.19c.31.31.85.09.85-.36V4.5c0-.28-.22-.5-.5-.5h-3.79c-.45 0-.67.54-.36.85zm-.52 8.56l-1.41 1.41 3.13 3.13-1.2 1.2c-.31.31-.09.85.36.85h3.79c.28 0 .5-.22.5-.5v-3.79c0-.45-.54-.67-.85-.35l-1.19 1.19-3.13-3.14z","shuffle");dmt=rn(e=>{ko.seek(e)})});async function rP(e,t=3){if(!e?.name||!e?.artist)return null;let o=`https://lrclib.net/api/get?track_name=${encodeURIComponent(e.name)}&artist_name=${encodeURIComponent(e.artist)}`;try{let n=await fetch(o);if(!n.ok)return t>1?rP(e,t-1):(console.error("Failed to fetch lyrics:",n.status,n.statusText),null);let i=await n.json(),s=i?.syncedLyrics;if(!s)return console.error("Invalid lyrics data",i),null;let a=s.split(`
`).map(l=>{let c=l.match(/^\[(\d+):(\d+\.\d+)\]\s*(.*)/);if(!c)return null;let[,u,p,m]=c;return{time:parseInt(u)*60+parseFloat(p),text:m}}).filter(Boolean);return a.length?a:null}catch(n){return t>1?rP(e,t-1):(console.error("Error fetching lyrics:",n),null)}}var Z6e=x(()=>{"use strict";d()});function gmt(e){if(!e?.track)return null;let{track:t}=e,o=t.artist?.name||t.artists?.[0]?.name||"Unknown Artist";return{name:t.title||"Unknown Title",artist:o,imageSrc:e.coverUrl||null,songDuration:e.duration||t.duration||0,elapsedSeconds:e.currentTime||0,url:t.url||null,album:t.album?.title||null,id:t.id?.toString()||"0",vibrantColor:t.album.vibrantColor||null}}var Bk,kJ,$o,eS=x(()=>{"use strict";d();At();fe();B();Bk=new ke("TidalControls");kJ=class{onChange;ready=!1;socket;constructor(t){this.reconnect(),this.onChange=t}reconnect(){if(!this.ready){try{this.initWs()}catch(t){Bk.error("Failed to connect to Tidal WebSocket",t);return}this.ready=!0}}get routes(){return{play:()=>this.socket?.send(JSON.stringify({action:"resume"})),pause:()=>this.socket?.send(JSON.stringify({action:"pause"})),toggle:()=>this.socket?.send(JSON.stringify({action:"toggle"})),previous:()=>this.socket?.send(JSON.stringify({action:"previous"})),next:()=>this.socket?.send(JSON.stringify({action:"next"})),seek:t=>this.socket?.send(JSON.stringify({action:"seek",time:t})),shuffle:t=>this.socket?.send(JSON.stringify({action:"setShuffleMode",shuffle:t})),repeat:t=>this.socket?.send(JSON.stringify({action:"setRepeatMode",mode:t})),volume:t=>this.socket?.send(JSON.stringify({action:"volume",volume:t}))}}initWs(){let t="ws://localhost:24123";t&&(this.socket=new WebSocket(t),this.socket.addEventListener("open",()=>{this.ready=!0,this.socket?.send(JSON.stringify({action:"subscribe",all:!0,fields:["currentTime"]}))}),this.socket.addEventListener("error",o=>{this.ready||setTimeout(()=>this.reconnect(),5e3),this.onChange({type:"update",all:!0,fields:{playing:!1,track:null,currentTime:0,repeatMode:0,shuffle:!1,volume:100}})}),this.socket.addEventListener("close",o=>{this.ready=!1,this.ready||setTimeout(()=>this.reconnect(),1e4),this.onChange({type:"update",all:!0,fields:{playing:!1,track:null,currentTime:0,repeatMode:0,shuffle:!1,volume:100}})}),this.socket.addEventListener("message",o=>{let n;try{switch(n=JSON.parse(o.data),n.type){case"update":this.onChange(n);break;case"subscribed":Bk.info("Successfully subscribed to Tidal API updates");break;case"error":Bk.error("Tidal API error:",n);break}}catch(i){Bk.error("Invalid JSON:",i,`
${o.data}`);return}}))}},$o=fr(()=>{let{Store:e}=is;class t extends e{mPosition=0;start=0;track=null;isPlaying=!1;repeat=0;shuffle=!1;volume=100;playerElement=null;socket=new kJ(i=>{if(i.type==="update"&&i.all&&i.fields){let s=i.fields,a=gmt(s);a&&(o.track={...a},o.position=s.currentTime||0,a.vibrantColor&&(this.playerElement?(this.playerElement.style.setProperty("--eq-tdl-slider-gradient",`linear-gradient(to right, ${a.vibrantColor} 80%, #E5E5E5 100%)`),this.playerElement.style.setProperty("--eq-tdl-slider-grabber",a.vibrantColor)):(this.playerElement=document.querySelector("#eq-tdl-player"),Bk.info(this.playerElement?"Player element found":"Player element not found")))),s.playing!==void 0&&(o.isPlaying=s.playing),s.repeatMode!==void 0&&(o.repeat=s.repeatMode),s.shuffle!==void 0&&(o.shuffle=s.shuffle),s.volume!==void 0&&(o.volume=s.volume),o.emitChange()}});openExternal(i){VencordNative.native.openExternal(i.replace("http://www.tidal.com","tidal://"))}set position(i){this.mPosition=i*1e3,this.start=Date.now()}get position(){let i=this.mPosition;return this.isPlaying&&(i+=Date.now()-this.start),i}previous(){this.ensureSocketReady()&&this.socket.routes.previous()}next(){this.ensureSocketReady()&&this.socket.routes.next()}setVolume(i){if(!this.ensureSocketReady())return;let s=Math.max(1,Math.min(100,Math.round(i)));this.socket.routes.volume(s),this.volume=s,this.emitChange()}setPlaying(i){this.ensureSocketReady()&&(this.socket.routes[i?"play":"pause"](),this.isPlaying=i)}setRepeat(i){this.ensureSocketReady()&&(this.socket.routes.repeat(i),this.repeat=i,this.emitChange())}setShuffle(i){this.ensureSocketReady()&&(this.socket.routes.shuffle(i),this.shuffle=i,this.emitChange())}seek(i){this.ensureSocketReady()&&this.socket.routes.seek(Math.round(i/1e3))}ensureSocketReady(){return!(!this.socket||!this.socket.ready)}}let o=new t(V);return o})});function hmt(e,t){Mr.store.ShowFailedToasts&&qt({color:"#ee2902",title:e,body:t,noPersist:!0})}var Pk,EJ=x(()=>{"use strict";d();_a();qf();Z6e();eS();fe();B();Pk=fr(()=>{let e=null,t=null;class o extends is.Store{init(){}get lyrics(){return e}}let n=new o(V);function i(){let{track:s}=$o;!s?.id||t===s.id||(t=s.id,rP(s).then(a=>{e=a,n.emitChange()}).catch(()=>{e=null,hmt("Tidal Lyrics","Failed to fetch lyrics"),n.emitChange()}))}return $o.addChangeListener(i),n})});function iP(e){return r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 -960 480 720",fill:"currentColor",className:e},r("path",{d:"m160,-240 q -66,0 -113,-47 -47,-47 -47,-113 0,-66 47,-113 47,-47 113,-47 23,0 42.5,5.5 19.5,5.5 37.5,16.5 v -422 h 240 v 160 H 320 v 400 q 0,66 -47,113 -47,47 -113,47 z"}))}function tS({scroll:e=!0}={}){let[t,o,n]=Je([$o],()=>[$o.track,$o.mPosition,$o.isPlaying]),i=Je([Pk],()=>Pk.lyrics),{LyricDelay:s}=Mr.use(["LyricDelay"]),[a,l]=L(null),[c,u]=L(null),[p,m]=L(o),[g,y]=L([]),b=i||null;return se(()=>{b&&y(b.map(()=>X.createRef()))},[b]),se(()=>{if(b&&p){let[v,E]=xmt(b,p,s);l(v),u(E)}},[b,p]),se(()=>{e&&a!==null&&(a>=0&&g[a].current?.scrollIntoView({behavior:"smooth",block:"center"}),a<0&&c!==null&&g[c]?.current?.scrollIntoView({behavior:"smooth",block:"center"}))},[a,c,e]),se(()=>{if(n){m($o.position);let v=setInterval(()=>{m(E=>E+1e3)},1e3);return()=>clearInterval(v)}},[o,n]),{track:t,lyrics:i,lyricRefs:g,currLrcIndex:a,nextLyric:c}}var X6e,Yu,xmt,sP=x(()=>{"use strict";d();qf();EJ();eS();nt();fe();B();X6e=et("auto","customTheme"),Yu=de("eq-tidal-lyrics-");xmt=(e,t,o)=>{let n=t/1e3,i=e.findIndex(a=>a.time-o/1e3>n&&a.time<n+8)-1,s=e.findIndex(a=>a.time>=n);return[i,s]}});function AJ(){let{lyrics:e,currLrcIndex:t}=tS({scroll:!1}),o=e?.[t??NaN];return r(M.Menu,{navId:"tidal-lyrics-menu",onClose:()=>V.dispatch({type:"CONTEXT_MENU_CLOSE"}),"aria-label":"Tidal Lyrics Menu"},r(M.MenuItem,{key:"copy-lyric",id:"copy-lyric",label:"Copy current lyric",disabled:!o?.text,action:()=>$t(o.text,"Lyric copied!"),icon:ymt}))}var ymt,J6e=x(()=>{"use strict";d();mt();fe();B();sP();ymt=De(" 1-.5.5H10a6")});function vmt({track:e}){return r(je,null,r("div",{className:Yu("header-content")},e?.imageSrc&&r("img",{src:e.imageSrc,alt:e.album||e.name,className:Yu("album-image")}),r("div",null,r(Y,{size:"sm",weight:"semibold"},e.name),r(Y,{size:"sm"},"by ",e.artist),e.album&&r(Y,{size:"sm"},"on ",e.album))))}function V6e({rootProps:e}){let{track:t,lyrics:o,currLrcIndex:n}=tS({scroll:!1}),i=o||null,s=t?$o.mPosition:0;return r(Pe,{...e},t&&r(vmt,{track:t}),r($e,null,r("div",{className:Yu("lyrics-modal-container")+` ${X6e.auto}`},i?i.map((a,l)=>r(Y,{key:l,size:n===l?"md":"sm",weight:n===l?"semibold":"normal",className:n===l?Yu("modal-line-current"):Yu("modal-line")},r("span",{className:Yu("modal-timestamp"),onClick:()=>$o.seek(a.time*1e3)},bmt(a.time)),a.text||iP(Yu("modal-note")))):r(Y,{size:"sm",className:Yu("modal-no-lyrics")},"No lyrics available :("))))}var bmt,eCe=x(()=>{"use strict";d();Et();eS();at();sP();bmt=e=>{let t=Math.floor(e/60),o=Math.floor(e%60);return`${t}:${o.toString().padStart(2,"0")}`}});function Smt({scroll:e=!0}){let{ShowMusicNoteOnNoLyrics:t}=Mr.use(["ShowMusicNoteOnNoLyrics"]),{lyrics:o,lyricRefs:n}=tS({scroll:e}),i=o||null,s=iP(Yu("music-note")),a=Je([$o],()=>$o.mPosition/1e3),l=i?i.findIndex((u,p)=>{let m=i[p+1]?.time??1/0;return a>=u.time&&a<m}):null,c=u=>{if(l===null)return"";let p=u-l;return Yu(p===0?"current":p>0?"next":"prev")};return i?r("div",{className:"eq-tidal-lyrics",onClick:()=>Ee(u=>r(V6e,{rootProps:u})),onContextMenu:u=>Dt.openContextMenu(u,()=>r(AJ,null))},i.map((u,p)=>r("div",{ref:n[p],key:p},r(Y,{size:l===p?"sm":"xs",className:c(p)},u.text||s)))):t?r("div",{className:"eq-tidal-lyrics",onContextMenu:u=>Dt.openContextMenu(u,()=>r(AJ,null))},r(ii,{text:"No lyrics found"},s)):null}function CJ({scroll:e=!0}={}){Pk.init();let t=Je([$o],()=>$o.track,null,(s,a)=>s?.id?s.id===a?.id:s?.name===a?.name),o=Je([$o],()=>$o.isPlaying),[n,i]=L(!1);return se(()=>{if(i(!1),!o){let s=setTimeout(()=>i(!0),3e5);return()=>clearTimeout(s)}},[o]),!t||n?null:r(Smt,{scroll:e})}var tCe=x(()=>{"use strict";d();Et();du();qf();EJ();eS();at();B();J6e();eCe();sP()});var oCe=x(()=>{});function TJ(e){let t=e/1e3/60,o=Math.floor(t),n=Math.floor((t-o)*60);return`${o.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`}function oS(e,t){return()=>r("svg",{className:me(Nr("button-icon"),Nr(t)),"aria-labelledby":"title",height:"24",width:"24",viewBox:"0 0 24 24",fill:"currentColor","aria-label":t,focusable:!1},r("title",{id:"title"},t),r("path",{d:e}))}function _k(e){return r("button",{className:Nr("button"),...e},e.children)}function Imt({name:e,path:t}){let o=`tdl-copy-${e}`,n=`tdl-open-${e}`;return r(M.Menu,{navId:`tdl-${e}-menu`,onClose:()=>V.dispatch({type:"CONTEXT_MENU_CLOSE"}),"aria-label":`TIdal ${e} Menu`},r(M.MenuItem,{key:o,id:o,label:`Copy ${e} Link`,action:()=>$t(t.replace("http://","https://")),icon:hc}),r(M.MenuItem,{key:n,id:n,label:`Open ${e} in Tidal`,action:()=>$o.openExternal(t),icon:_r}))}function Dmt(e,t){return o=>Dt.openContextMenu(o,()=>r(Imt,{name:e,path:t}))}function Mmt(){let[e,t,o]=Je([$o],()=>[$o.isPlaying,$o.shuffle,$o.repeat]),[n,i]=(()=>{switch(o){case 0:return[1,"repeat-off"];case 1:return[2,"repeat-context"];case 2:return[0,"repeat-track"];default:throw new Error(`Invalid repeat state ${o}`)}})();return r(Be,{className:Nr("button-row"),style:{gap:0}},r(_k,{className:me(Nr("button"),Nr("shuffle"),Nr(t?"shuffle-on":"shuffle-off")),onClick:()=>$o.setShuffle(!t)},r(Tmt,null)),r(_k,{onClick:()=>{Ge.plugins.MusicControls.previousButtonRestartsTrack&&$o.position>3e3?$o.seek(0):$o.previous()}},r(Emt,null)),r(_k,{onClick:()=>$o.setPlaying(!e)},e?r(kmt,null):r(wmt,null)),r(_k,{onClick:()=>$o.next()},r(Amt,null)),r(_k,{className:me(Nr("button"),Nr(i)),onClick:()=>$o.setRepeat(n)},o===2&&r("span",{className:Nr("repeat-1")},"1"),r(Cmt,null)))}function Bmt(){let{songDuration:e,id:t}=$o.track??{songDuration:0,id:0},[o,n]=Je([$o],()=>[$o.mPosition,$o.isPlaying]),[i,s]=L(o);se(()=>{s(o)},[t,e,o]),se(()=>{if(n){s($o.position);let l=setInterval(()=>{s(c=>c+1e3)},1e3);return()=>clearInterval(l)}},[o,n]);let a=l=>{s(l),Nmt(l)};return r("div",{id:Nr("progress-bar")},r(Y,{size:"xs",weight:"medium",className:`${Nr("progress-time")} ${Nr("time-left")}`,"aria-label":"Progress"},TJ(i)),r(J2,{initialValue:i,minValue:0,maxValue:e*1e3,onValueChange:a,asValueChanges:a,onValueRender:TJ}),r(Y,{size:"xs",weight:"medium",className:`${Nr("progress-time")} ${Nr("time-right")}`,"aria-label":"Total Duration"},TJ(e*1e3)))}function Pmt({track:e}){return r(M.Menu,{navId:"tdl-album-menu",onClose:()=>V.dispatch({type:"CONTEXT_MENU_CLOSE"}),"aria-label":"Tidal Album Menu"},r(M.MenuItem,{key:"view-cover",id:"view-cover",label:"View Album Cover",action:()=>e?.imageSrc&&us({url:e.imageSrc}),icon:nl}),r(M.MenuControlItem,{id:"tdl-volume",key:"tdl-volume",label:"Volume",control:(t,o)=>r(M.MenuSliderControl,{...t,ref:o,value:$o.volume,minValue:0,maxValue:100,onChange:rn(n=>$o.setVolume(n))})}))}function _mt(e,t,o){return t?{role:"link",onClick:()=>$o.openExternal(o),onContextMenu:Dmt(e,o)}:{}}function Rmt({track:e}){let t=e?.imageSrc,[o,n]=L(!1),i=r(f,null,t&&r("img",{id:Nr("album-image"),src:t,alt:"Album Image",onClick:()=>n(!o),onContextMenu:s=>{Dt.openContextMenu(s,()=>r(Pmt,{track:e}))}}));return o&&t?r("div",{id:Nr("album-expanded-wrapper")},i):r("div",{id:Nr("info-wrapper")},i,r("div",{id:Nr("titles")},r(Y,{size:"sm",weight:"semibold",id:Nr("song-title"),className:Nr("ellipoverflow"),title:e?.name,..._mt(`"${e.name}"`,e?.id,e?.url||`https://tidal.com/track/${e?.id}`)},e?.name),e.artist&&r(Y,{size:"sm",className:Nr("ellipoverflow")},"by\xA0",r("span",{className:Nr("artist"),style:{fontSize:"inherit"},title:e.artist},e.artist)),e.album&&r(Y,{size:"sm",className:Nr("ellipoverflow")},"on\xA0",r("span",{id:Nr("album-title"),className:Nr("album"),style:{fontSize:"inherit"},title:e.album},e.album))))}function nCe(){let e=Je([$o],()=>$o.track),t=Je([$o],()=>$o.isPlaying),[o,n]=L(!1);if(X.useEffect(()=>{if(n(!1),!t){let s=setTimeout(()=>n(!0),3e5);return()=>clearTimeout(s)}},[t]),!e||o)return;let i={"--eq-tdl-track-image":`url(${e?.imageSrc||""})`};return r("div",{id:Nr("player"),style:i},r(Rmt,{track:e}),r(Bmt,null),r(Mmt,null))}var Nr,wmt,kmt,Emt,Amt,Cmt,Tmt,Nmt,rCe=x(()=>{"use strict";d();oCe();Q();Et();eo();ao();nP();la();mt();xt();B();eS();Nr=e=>`eq-tdl-${e}`;wmt=oS("M8 6.82v10.36c0 .79.87 1.27 1.54.84l8.14-5.18c.62-.39.62-1.29 0-1.69L9.54 5.98C8.87 5.55 8 6.03 8 6.82z","play"),kmt=oS("M8 19c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2s-2 .9-2 2v10c0 1.1.9 2 2 2zm6-12v10c0 1.1.9 2 2 2s2-.9 2-2V7c0-1.1-.9-2-2-2s-2 .9-2 2z","pause"),Emt=oS("M7 6c.55 0 1 .45 1 1v10c0 .55-.45 1-1 1s-1-.45-1-1V7c0-.55.45-1 1-1zm3.66 6.82l5.77 4.07c.66.47 1.58-.01 1.58-.82V7.93c0-.81-.91-1.28-1.58-.82l-5.77 4.07c-.57.4-.57 1.24 0 1.64z","previous"),Amt=oS("M7.58 16.89l5.77-4.07c.56-.4.56-1.24 0-1.63L7.58 7.11C6.91 6.65 6 7.12 6 7.93v8.14c0 .81.91 1.28 1.58.82zM16 7v10c0 .55.45 1 1 1s1-.45 1-1V7c0-.55-.45-1-1-1s-1 .45-1 1z","next"),Cmt=oS("M7 7h10v1.79c0 .45.54.67.85.35l2.79-2.79c.2-.2.2-.51 0-.71l-2.79-2.79c-.31-.31-.85-.09-.85.36V5H6c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1s1-.45 1-1V7zm10 10H7v-1.79c0-.45-.54-.67-.85-.35l-2.79 2.79c-.2.2-.2.51 0 .71l2.79 2.79c.31.31.85.09.85-.36V19h11c.55 0 1-.45 1-1v-4c0-.55-.45-1-1-1s-1 .45-1 1v3z","repeat"),Tmt=oS("M10.59 9.17L6.12 4.7c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41l4.46 4.46 1.42-1.4zm4.76-4.32l1.19 1.19L4.7 17.88c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L17.96 7.46l1.19 1.19c.31.31.85.09.85-.36V4.5c0-.28-.22-.5-.5-.5h-3.79c-.45 0-.67.54-.36.85zm-.52 8.56l-1.41 1.41 3.13 3.13-1.2 1.2c-.31.31-.09.85.36.85h3.79c.28 0 .5-.22.5-.5v-3.79c0-.45-.54-.67-.85-.35l-1.19 1.19-3.13-3.14z","shuffle");Nmt=rn(e=>{$o.seek(e)})});var iCe=x(()=>{});var IJ,DJ,Sr,sCe=x(()=>{"use strict";d();Wo();At();fe();B();Jh();IJ=new ke("MusicControls-Ytm"),DJ=class{onChange;ready=!1;connecting=!1;socket;constructor(t){this.reconnect(),this.onChange=t}scheduleReconnect(t){setTimeout(()=>this.reconnect(),t)}reconnect(){this.ready||this.connecting||(this.connecting=!0,this.initWs())}async initWs(){let t=Ge.plugins.MusicControls.YoutubeMusicApiUrl;if(!t){this.connecting=!1;return}try{this.socket=new WebSocket(new URL("/api/v1/ws",t))}catch{IJ.error("Connection failed");return}this.socket.addEventListener("open",()=>{this.ready=!0,this.connecting=!1}),this.socket.addEventListener("error",o=>{this.ready=!1,this.connecting=!1,this.ready||this.scheduleReconnect(5e3),this.onChange({position:0,isPlaying:!1,song:void 0})}),this.socket.addEventListener("close",o=>{this.ready=!1,this.connecting=!1,this.ready||this.scheduleReconnect(1e4),this.onChange({position:0,isPlaying:!1,song:void 0})}),this.socket.addEventListener("message",o=>{let n;try{n=JSON.parse(o.data),this.onChange(n)}catch(i){IJ.error("Invalid JSON:",i,`
${o.data}`);return}})}},Sr=fr(()=>{let{Store:e}=is;class t extends e{mPosition=0;start=0;song=null;isPlaying=!1;isShuffled=!1;repeat="NONE";volume=0;muted=!1;isSettingPosition=!1;socket=new DJ(i=>{i.song&&(o.song=i.song,o.isPlaying=!(i.song?.isPaused??!1)),i.isPlaying!=null&&!i.song&&(o.isPlaying=i.isPlaying),i.shuffle!=null&&(o.isShuffled=i.shuffle),i.position&&i.position!==o.position&&(o.position=i.position??0),i.volume&&(o.volume=i.volume??0),i.repeat&&(o.repeat=i.repeat),i.muted!=null&&(o.muted=i.muted),o.isSettingPosition=!1,o.emitChange()});openExternal(i){let s=i.match(/watch\?v=([\w-]+)/),a=yt("OpenInApp")&&s?encodeURI("youtubemusic://openVideo "+s[1]):"https://music.youtube.com"+i;IJ.info("Open",a),VencordNative.native.openExternal(a)}set position(i){this.mPosition=i*1e3,this.start=Date.now()}get position(){let i=this.mPosition;return this.isPlaying&&(i+=Date.now()-this.start),i}prev(){this.req("post","/api/v1/previous")}next(){this.req("post","/api/v1/next")}setVolume(i){this.req("post","/api/v1/volume",{body:{volume:Math.floor(i)}})}setPlaying(i){i?this.req("post","/api/v1/play"):this.req("post","/api/v1/pause")}switchRepeat(){this.req("post","/api/v1/switch-repeat",{body:{iteration:1}})}shuffle(){this.req("post","/api/v1/shuffle")}seek(i){this.req("post","/api/v1/seek-to",{body:{seconds:Math.floor(i/1e3)}})}toggleMute(){this.req("post","/api/v1/toggle-mute")}req(i,s,a={}){let l=Ge.plugins.MusicControls.YoutubeMusicApiUrl;if(l==="")return;let c=l+s;fetch(c,{method:i,...a,...a.body&&{body:JSON.stringify(a.body),headers:{"Content-Type":"application/json"}}})}}let o=new t(V);return o})});function MJ(e){let t=e/1e3/60,o=Math.floor(t),n=Math.floor((t-o)*60);return`${o.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`}function nS(e,t){return()=>r("svg",{className:me(wr("button-icon"),wr(t)),"aria-labelledby":"title",height:"24",width:"24",viewBox:"0 0 24 24",fill:"currentColor","aria-label":t,focusable:!1},r("title",{id:"title"},t),r("path",{d:e}))}function Rk(e){return r("button",{className:wr("button"),...e},e.children)}function zmt({name:e,path:t}){let o=`ytm-copy-${e}`,n=`ytm-open-${e}`;return r(M.Menu,{navId:`ytm-${e}-menu`,onClose:()=>V.dispatch({type:"CONTEXT_MENU_CLOSE"}),"aria-label":`YouTube Music ${e} Menu`},r(M.MenuItem,{key:o,id:o,label:`Copy ${e} Link`,action:()=>$t(`https://music.youtube.com${t}`),icon:hc}),r(M.MenuItem,{key:n,id:n,label:`Open ${e} in YouTube Music`,action:()=>Sr.openExternal(t),icon:_r}))}function Gmt(e,t){return o=>Dt.openContextMenu(o,()=>r(zmt,{name:e,path:t}))}function qmt(){let[e,t,o]=Je([Sr],()=>[Sr.isPlaying,Sr.isShuffled,Sr.repeat]),[n,i]=(()=>{switch(o){case"NONE":return["context","repeat-off"];case"ALL":return["track","repeat-context"];case"ONE":return["off","repeat-track"];default:throw new Error(`Invalid repeat state ${o}`)}})();return r(Be,{className:wr("button-row"),style:{gap:0}},r(Rk,{className:me(wr("button"),wr("shuffle"),wr(t?"shuffle-on":"shuffle-off")),onClick:()=>Sr.shuffle()},r(Hmt,null)),r(Rk,{onClick:()=>Sr.prev()},r(Fmt,null)),r(Rk,{onClick:()=>Sr.setPlaying(!e)},e?r(Omt,null):r(Lmt,null)),r(Rk,{onClick:()=>Sr.next()},r(Umt,null)),r(Rk,{className:me(wr("button"),wr(i)),onClick:()=>Sr.switchRepeat(),style:{position:"relative"}},o==="ONE"&&r("span",{className:wr("repeat-1")},"1"),r($mt,null)))}function Wmt(){let{songDuration:e}=Sr.song,[t,o,n]=Je([Sr],()=>[Sr.mPosition,Sr.isSettingPosition,Sr.isPlaying]),[i,s]=L(t);se(()=>{s(Sr.position)},[t]);let a=l=>{o||(s(l),jmt(l))};return r("div",{id:wr("progress-bar")},r(Y,{size:"xs",weight:"medium",className:`${wr("progress-time")} ${wr("time-left")}`,"aria-label":"Progress"},MJ(i)),r(J2,{initialValue:i,minValue:0,maxValue:e*1e3,onValueChange:a,asValueChanges:a,onValueRender:MJ}),r(Y,{size:"xs",weight:"medium",className:`${wr("progress-time")} ${wr("time-right")}`,"aria-label":"Total Duration"},MJ(e*1e3)))}function Kmt({track:e}){let[t,o]=Je([Sr],()=>[Sr.volume,Sr.muted]);return r(M.Menu,{navId:"ytm-album-menu",onClose:()=>V.dispatch({type:"CONTEXT_MENU_CLOSE"}),"aria-label":"YouTube Music Album Menu"},r(M.MenuItem,{key:"view-cover",id:"view-cover",label:"View Album Cover",action:()=>e?.imageSrc&&us({url:e.imageSrc}),icon:nl}),r(M.MenuControlItem,{id:"ytm-volume",key:"ytm-volume",label:"Volume",control:(n,i)=>r(M.MenuSliderControl,{...n,ref:i,value:t,minValue:0,maxValue:100,onChange:rn(s=>Sr.setVolume(s))})}),r(M.MenuCheckboxItem,{id:"ytm-muted",key:"ytm-muted",label:"Muted",checked:o,action:()=>Sr.toggleMute()}))}function Ymt(e,t,o){return t?{role:"link",onClick:()=>Sr.openExternal(o),onContextMenu:Gmt(e,o)}:{}}function Qmt({track:e}){let t=e?.imageSrc,[o,n]=L(!1),i=r(f,null,t&&r("img",{id:wr("album-image"),src:t,alt:"Album Image",onClick:()=>n(!o),onContextMenu:s=>{Dt.openContextMenu(s,()=>r(Kmt,{track:e}))}}));return o&&t?r("div",{id:wr("album-expanded-wrapper")},i):r("div",{id:wr("info-wrapper")},i,r("div",{id:wr("titles")},r(Y,{size:"sm",weight:"semibold",id:wr("song-title"),className:wr("ellipoverflow"),title:e?.title,...Ymt("Song",e?.videoId,`/watch?v=${e?.videoId}`)},e?.title),e.artist&&r(Y,{size:"sm",className:wr("ellipoverflow")},"by\xA0",r("span",{className:wr("artist"),style:{fontSize:"inherit"},title:e.artist},e.artist)),e.album&&r(Y,{size:"sm",className:wr("ellipoverflow")},"on\xA0",r("span",{id:wr("album-title"),className:wr("album"),style:{fontSize:"inherit"},title:e.album},e.album))))}function aCe(){let e=Je([Sr],()=>Sr.song,null,(s,a)=>s?.videoId?s.videoId===a?.videoId:s?.title===a?.title),t=Je([Sr],()=>Sr.isPlaying),[o,n]=L(!1);if(X.useEffect(()=>{if(n(!1),!t){let s=setTimeout(()=>n(!0),3e5);return()=>clearTimeout(s)}},[t]),!e||o)return;let i={"--vc-ytm-track-image":`url(${e?.imageSrc||""})`};return r("div",{id:wr("player"),style:i},r(Qmt,{track:e}),r(Wmt,null),r(qmt,null))}var wr,Lmt,Omt,Fmt,Umt,$mt,Hmt,jmt,lCe=x(()=>{"use strict";d();iCe();Et();eo();ao();nP();la();mt();xt();B();sCe();wr=e=>`vc-ytm-${e}`;Lmt=nS("M8 6.82v10.36c0 .79.87 1.27 1.54.84l8.14-5.18c.62-.39.62-1.29 0-1.69L9.54 5.98C8.87 5.55 8 6.03 8 6.82z","play"),Omt=nS("M8 19c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2s-2 .9-2 2v10c0 1.1.9 2 2 2zm6-12v10c0 1.1.9 2 2 2s2-.9 2-2V7c0-1.1-.9-2-2-2s-2 .9-2 2z","pause"),Fmt=nS("M7 6c.55 0 1 .45 1 1v10c0 .55-.45 1-1 1s-1-.45-1-1V7c0-.55.45-1 1-1zm3.66 6.82l5.77 4.07c.66.47 1.58-.01 1.58-.82V7.93c0-.81-.91-1.28-1.58-.82l-5.77 4.07c-.57.4-.57 1.24 0 1.64z","previous"),Umt=nS("M7.58 16.89l5.77-4.07c.56-.4.56-1.24 0-1.63L7.58 7.11C6.91 6.65 6 7.12 6 7.93v8.14c0 .81.91 1.28 1.58.82zM16 7v10c0 .55.45 1 1 1s1-.45 1-1V7c0-.55-.45-1-1-1s-1 .45-1 1z","next"),$mt=nS("M7 7h10v1.79c0 .45.54.67.85.35l2.79-2.79c.2-.2.2-.51 0-.71l-2.79-2.79c-.31-.31-.85-.09-.85.36V5H6c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1s1-.45 1-1V7zm10 10H7v-1.79c0-.45-.54-.67-.85-.35l-2.79 2.79c-.2.2-.2.51 0 .71l2.79 2.79c.31.31.85.09.85-.36V19h11c.55 0 1-.45 1-1v-4c0-.55-.45-1-1-1s-1 .45-1 1v3z","repeat"),Hmt=nS("M10.59 9.17L6.12 4.7c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41l4.46 4.46 1.42-1.4zm4.76-4.32l1.19 1.19L4.7 17.88c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L17.96 7.46l1.19 1.19c.31.31.85.09.85-.36V4.5c0-.28-.22-.5-.5-.5h-3.79c-.45 0-.67.54-.36.85zm-.52 8.56l-1.41 1.41 3.13 3.13-1.2 1.2c-.31.31-.09.85.36.85h3.79c.28 0 .5-.22.5-.5v-3.79c0-.45-.54-.67-.85-.35l-1.19 1.19-3.13-3.14z","shuffle");jmt=rn(e=>{Sr.seek(e)})});var Z2,xJ=x(()=>{"use strict";d();A6e();tt();H();$();qf();Ik();W6e();Q6e();tCe();rCe();lCe();Z2=k({name:"MusicControls",description:"Music Controls and Lyrics for multiple services ",authors:[w.Ven,w.afn,w.KraXen72,w.Av32000,w.nin0dev,w.thororen,j.vmohammad,w.Joona],settings:Mr,tags:["Spotify","SpotifyControls","SpotifyLyrics","Tidal","TidalControls","TidalLyrics","Youtube","YoutubeMusic","YoutubeMusicControls"],patches:[{find:"#{intl::ACCOUNT_SPEAKING_WHILE_MUTED}",replacement:{match:/(?<=\i\.jsxs?\)\()(\i),{(?=[^}]*?userTag:\i,hidePrivateData:)/,replace:"$self.PanelWrapper,{VencordOriginal:$1,"}},{find:".PLAYER_DEVICES",replacement:[{match:/get:(\i)\.bind\(null,(\i\.\i)\.get\)/,replace:"post:$1.bind(null,$2.post),vcSpotifyMarker:1,$&"},{match:/202===\i\.status/,replace:"false"}]},{find:'repeat:"off"!==',replacement:[{match:/repeat:"off"!==(\i),/,replace:"shuffle:arguments[2]?.shuffle_state??false,actual_repeat:$1,$&"},{match:/(?<=artists.filter\(\i=>).{0,10}\i\.id\)&&/,replace:""}]}],PanelWrapper({VencordOriginal:e,...t}){let{showTidalControls:o,showTidalLyrics:n,showSpotifyLyrics:i,showSpotifyControls:s,LyricsPosition:a,showYoutubeMusicControls:l}=Mr.store;return r(f,null,r(ee,{fallback:()=>r("div",{className:"vc-tidal-fallback"},r("p",null,"Failed to render Modal :("),r("p",null,"Check the console for errors"))},n&&a==="above"&&r(CJ,null),o&&r(nCe,null),n&&a==="below"&&r(CJ,null),i&&a==="above"&&r(vJ,null),s&&r(Y6e,null),i&&a==="below"&&r(vJ,null),l&&r(aCe,null)),r(e,{...t}))},async start(){await _6e(),hJ(Mr.store.hoverControls)}})});var aP,cCe=x(()=>{"use strict";d();gd();H();$();aP=k({name:"NeverPausePreviews",description:"Prevents in-call/PiP previews (screenshare, streams, etc) from pausing even if the client loses focus",authors:[j.vappstar],settingsAboutComponent:()=>r(ur.Warning,null,"This plugin will cause discord to use more resources than normal"),patches:[{find:"streamerPaused()",replacement:{match:/streamerPaused\(\)\{/,replace:"$&return false;"}},{find:"StreamTile",replacement:{match:/\i\.\i\.isFocused\(\)/,replace:"true"}}]})});var RJ={};Ao(RJ,{KNOWN_PLUGINS_LEGACY_DATA_KEY:()=>lP,KNOWN_SETTINGS_DATA_KEY:()=>jf,debugWipeSomeData:()=>Xmt,editRawData:()=>Jmt,getKnownPlugins:()=>uCe,getKnownSettings:()=>Lk,getNewPlugins:()=>PJ,getNewSettings:()=>BJ,writeKnownSettings:()=>_J});function Zmt(e){let t=pt[e]?.settings?.def||{};return new Set(Object.keys(t).filter(o=>o!=="enabled"))}function NJ(e){return new Map(e.map(t=>[t,Zmt(t)]))}async function Lk(){let e=await Oe.get(jf),t;if(e)t=e instanceof Map?e:new Map(e.map(([o,n])=>[o,new Set(n)]));else{let o=await Oe.get(lP)??[],n=[...Object.keys(pt),...o];t=NJ(n),await Oe.set(jf,[...t.entries()].map(([i,s])=>[i,[...s]]))}return t}async function BJ(){let e=NJ(Object.keys(pt)),t=await Lk();return e.forEach((o,n)=>{let i=[...o].filter(s=>!t.get(n)?.has(s));if(!i.length)return e.delete(n);e.set(n,new Set(i))}),e}async function uCe(){let e=await Lk();return new Set(e.keys())}async function PJ(){let e=Object.keys(pt),t=await uCe();return new Set(e.filter(o=>!t.has(o)))}async function _J(){let e=NJ(Object.keys(pt)),t=await Lk(),o=new Map;new Set([...e.keys(),...t.keys()]).forEach(n=>{o.set(n,new Set([...e.get(n)||[],...t.get(n)||[]]))}),await Oe.set(jf,o)}async function Xmt(){let e=await Lk();e.forEach((t,o)=>{if(Math.random()>.8)return Math.random()>.5?e.set(o,new Set([...t].filter(()=>Math.random()>.5))):e.delete(o)}),await Oe.set(jf,e)}async function Jmt(e){if(!e)return;let t=await Oe.get(jf),o=new Map(t);await e(o),await Oe.set(jf,o??t)}var lP,jf,cP=x(()=>{"use strict";d();dr();Ps();lP="NewPluginsManager_KnownPlugins",jf="NewPluginsManager_KnownSettings"});var dCe=x(()=>{});function eft({modalProps:e,newPlugins:t,newSettings:o}){let n=tn(),i=rt(()=>new Wm,[]),s=Vo(),a=rt(()=>{let y={};for(let b in pt){let v=pt[b].dependencies;if(v)for(let E of v)y[E]??=[],y[E].push(b)}return y},[]),l=rt(()=>{let y=b=>b.map(v=>pt[v]).sort((v,E)=>v.name.localeCompare(E.name));return[...y([...t]),...y([...o.keys()].filter(b=>!t.has(b)))]},[]),c=y=>{i.handleChange(y),s()},u=[],p=[];for(let y of l){if(y.hidden)continue;if(y.required||a[y.name]?.some(v=>n.plugins[v].enabled)){let v=y.required?"This plugin is required for Equicord to function.":r(qw,{deps:a[y.name]?.filter(E=>n.plugins[E].enabled)});p.push(r(Ue,{text:v,key:y.name},({onMouseLeave:E,onMouseEnter:A})=>r($l,{onMouseLeave:E,onMouseEnter:A,onRestartNeeded:c,disabled:!0,plugin:y,isNew:t.has(y.name)})))}else u.push(r($l,{onRestartNeeded:c,disabled:!1,plugin:y,key:y.name,isNew:t.has(y.name)}))}let m=u.length+p.length,g=async()=>{await _J(),i.hasChanges?location.reload():e.onClose()};return r(Pe,{...e,size:"medium"},r(je,{separator:!1,className:eh("header")},r("div",{className:eh("header-content")},r(Y,{size:"lg",weight:"semibold",className:eh("title")},"New Plugins and Settings (",m,")"),r(Y,{size:"sm",className:eh("description")},"New plugins have been added since your last visit. Enable any you'd like or continue to dismiss.")),r("div",{className:eh("header-trailing")},r(yc,{onClick:e.onClose}))),r($e,null,r("div",{className:eh("grid")},u,p)),r(ht,null,r(Be,{className:eh("footer")},r(Ue,{text:r(f,null,"The following plugins require a restart:",r("ul",{className:eh("restart-list")},i.map(y=>r("li",{key:y},y)))),shouldShow:i.hasChanges},y=>r(Me,{...y,onClick:g},i.hasChanges?"Restart":"Continue")),r(Vmt,{type:"inverted",value:!n?.plugins?.NewPluginsManager?.enabled,onChange:()=>{Ge.plugins.NewPluginsManager.enabled=!n?.plugins?.NewPluginsManager?.enabled}},"Don't show this again"))))}async function LJ(){let e=await PJ(),t=await BJ();if((e.size||t.size)&&!pCe){pCe=!0;let o=Ee(n=>r(ee,{noop:!0,onError:()=>vo(o)},r(eft,{modalProps:n,newPlugins:e,newSettings:t})))}}var eh,Vmt,pCe,mCe=x(()=>{"use strict";d();dCe();Q();Et();Co();tt();eo();KA();j1();zw();nt();at();qo();fe();B();Ps();cP();eh=de("vc-new-plugins-"),Vmt=De('"data-toggleable-component":"checkbox'),pCe=!1});var uP,fCe=x(()=>{"use strict";d();H();$();cP();cP();mCe();uP=k({name:"NewPluginsManager",description:"Utility that notifies you when new plugins are added to Equicord",authors:[w.Sqaaakoi],enabledByDefault:!0,flux:{async POST_CONNECTION_OPEN(){LJ()}},openNewPluginsModal:LJ,KNOWN_PLUGINS_LEGACY_DATA_KEY:lP,KNOWN_SETTINGS_DATA_KEY:jf,KnownSettings:RJ})});var dP,gCe=x(()=>{"use strict";d();H();$();dP=k({name:"NoAppsAllowed",description:"returns the bot's tag :skulk:",authors:[j.meowabyte],patches:[{find:'"#{intl::APP_TAG::hash}":',replacement:{match:/(#{intl::APP_TAG::hash}":\[").*?("\])/,replace:"$1BOT$2"}}]})});function tft(e){return e.replace(/([*-]) /g,"\\$1 ")}var pP,hCe=x(()=>{"use strict";d();H();$();pP=k({name:"NoBulletPoints",description:"Stops you from typing markdown bullet points (stinky)",authors:[w.Samwich],onBeforeMessageSend(e,t){t.content=tft(t.content)}})});var mP,xCe=x(()=>{"use strict";d();H();$();mP=k({name:"NoModalAnimation",description:"Remove the 300ms long animation when opening or closing modals",authors:[w.AutumnVN],patches:[{find:"DURATION_IN:",replacement:{match:/300,/,replace:"0,"}},{find:'backdropFilter:"blur(0px)"',replacement:{match:/\?0:200/,replace:"?0:0"}},{find:'="ABOVE"',replacement:{match:/\?\?300/,replace:"??0"}},{find:"renderLurkerModeUpsellPopout,position:",replacement:{match:/200:300/g,replace:"0:0"}}]})});var fP,yCe=x(()=>{"use strict";d();H();$();B();fP=k({name:"NoNitroUpsell",description:"Removes ALL of Discord's nitro upsells by tricking the client into thinking you have nitro.",authors:[w.thororen],flux:{CONNECTION_OPEN(){let e=Ma.getState();e.premiumTypeActual!==2||e.premiumTypeOverride===2||(e.premiumTypeOverride=2)}},start(){Ma.getState().premiumTypeOverride=2},stop(){Ma.getState().premiumTypeOverride=void 0}})});var gP,bCe=x(()=>{"use strict";d();H();$();gP=k({name:"NormalizeMessageLinks",description:"Strip canary/ptb from message links",authors:[w.bb010g],patches:[{find:"#{intl::COPY_MESSAGE_LINK}",replacement:{match:/(?<=\/\/\$\{)location\.host/,replace:"$self.normalizeHost(location.host)"}}],normalizeHost(e){return e.replace(/(^|\b)(canary\.|ptb\.)(discord.com)$/,"$1$3")}})});var hP,vCe=x(()=>{"use strict";d();H();$();hP=k({name:"NoRoleHeaders",description:"We are all equal!!",authors:[w.Samwich],patches:[{find:"._areActivitiesExperimentallyHidden=(",replacement:{match:/return \i===\i\.\i\.UNKNOWN/,replace:"return null;$&"}}]})});var OJ,Ei,Hy,SCe,FJ,oft,nft,rft,ift,sft,aft,xP,wCe=x(()=>{"use strict";d();Q();H();$();B();OJ=R({port:{type:1,description:"Port to connect to",default:6888,restartNeeded:!0},isKeybindEnabled:{type:3,description:"Enable/disable the global keybind (Ctrl + `)",default:!0,restartNeeded:!0},messageAlignment:{type:4,description:"Alignment of messages in the overlay",options:[{label:"Top left",value:"topleft",default:!0},{label:"Top right",value:"topright"},{label:"Bottom left",value:"bottomleft"},{label:"Bottom right",value:"bottomright"}],default:"topright",restartNeeded:!0},userAlignment:{type:4,description:"Alignment of users in the overlay",options:[{label:"Top left",value:"topleft",default:!0},{label:"Top right",value:"topright"},{label:"Bottom left",value:"bottomleft"},{label:"Bottom right",value:"bottomright"}],default:"topleft",restartNeeded:!0},voiceSemitransparent:{type:3,description:"Make voice channel members transparent",default:!0,restartNeeded:!0},messagesSemitransparent:{type:3,description:"Make message notifications transparent",default:!1,restartNeeded:!0}}),Ei=null,Hy=null,SCe=async e=>{for(;;){let t=await e();if(t)return t;await new Promise(o=>setTimeout(o,500))}},FJ=(e,t)=>({userId:t.userId,username:Lt.getNick(e,t.userId)||z.getUser(t.userId)?.globalName,avatarUrl:z.getUser(t.userId)?.avatar,channelId:t.channelId,deaf:t.deaf||t.selfDeaf,mute:t.mute||t.selfMute,streaming:t.selfStream,speaking:!1}),oft=e=>{switch(e.cmd){case"TOGGLE_MUTE":V.dispatch({type:"AUDIO_TOGGLE_SELF_MUTE",syncRemote:!0,playSoundEffect:!0,context:"default"});break;case"TOGGLE_DEAF":V.dispatch({type:"AUDIO_TOGGLE_SELF_DEAF",syncRemote:!0,playSoundEffect:!0,context:"default"});break;case"DISCONNECT":V.dispatch({type:"VOICE_CHANNEL_SELECT",channelId:null});break;case"STOP_STREAM":{let t=z.getCurrentUser().id,o=lo.getVoiceStateForUser(t);if(!o?.channelId)return;let n=ne.getChannel(o.channelId);if(!n)return;V.dispatch({type:"STREAM_STOP",streamKey:`guild:${n.guild_id}:${o.channelId}:${t}`,appContext:"APP"});break}case"NAVIGATE":{if(!e.guild_id||!e.channel_id||!e.message_id)break;let{guild_id:t,channel_id:o,message_id:n}=e;V.dispatch({type:"CHANNEL_SELECT",guildId:String(t),channelId:String(o),messageId:String(n)});break}}},nft=e=>{Ei?.send(JSON.stringify({cmd:"VOICE_STATE_UPDATE",state:{userId:e.userId,speaking:e.speakingFlags===1}}))},rft=e=>{Ei?.send(JSON.stringify({cmd:"MESSAGE_NOTIFICATION",message:{title:e.title,body:e.body,icon:e.icon,guildId:e.message.guild_id,channelId:e.message.channel_id,messageId:e.message.id}}))},ift=async e=>{let{id:t}=z.getCurrentUser();for(let o of e.voiceStates){let n=o.userId===t,{guildId:i}=o;if(n){if(o.channelId&&o.channelId!==Hy){let s=await SCe(()=>lo?.getVoiceStatesForChannel(o.channelId));Ei?.send(JSON.stringify({cmd:"CHANNEL_JOINED",states:Object.values(s).map(a=>FJ(i,a))})),Hy=o.channelId;break}else if(!o.channelId){Ei?.send(JSON.stringify({cmd:"CHANNEL_LEFT"})),Hy=null;break}}Hy&&(o.channelId===Hy||o.oldChannelId===Hy)&&Ei?.send(JSON.stringify({cmd:"VOICE_STATE_UPDATE",state:FJ(i,o)}))}},sft=e=>{Ei?.send(JSON.stringify({cmd:"STREAMER_MODE",enabled:e.value}))},aft=()=>{console.log("Attempting to connect to Orbolay server"),Ei?.close&&Ei.close(),setTimeout(()=>{if(Ei?.readyState!==WebSocket.OPEN){D.show({message:"Orbolay websocket could not connect. Is it running?",type:D.Type.FAILURE,id:D.genId()}),Ei=null;return}},1e3),Ei=new WebSocket("ws://127.0.0.1:"+OJ.store.port),Ei.onerror=e=>{throw Ei?.close?.(),Ei=null,e},Ei.onmessage=e=>{oft(JSON.parse(e.data))},Ei.onclose=()=>{Ei=null},Ei.onopen=async()=>{D.show({message:"Connected to Orbolay server",type:D.Type.SUCCESS,id:D.genId()});let e={...OJ.store,userId:null};if(e.userId=await SCe(()=>z.getCurrentUser().id),!e.userId)return;Ei?.send(JSON.stringify({cmd:"REGISTER_CONFIG",...e}));let t=lo.getVoiceStateForUser(e.userId);if(!t||!t.channelId)return;let o=ne.getChannel(t.channelId);if(!o)return;let n=o.guild_id,i=lo.getVoiceStatesForChannel(t.channelId);!n||!i||(Ei?.send(JSON.stringify({cmd:"CHANNEL_JOINED",states:Object.values(i).map(s=>FJ(n,s))})),Ei?.send(JSON.stringify({cmd:"STREAMER_MODE",enabled:sl.enabled})),Hy=t.channelId)}},xP=k({name:"OrbolayBridge",description:"Bridge plugin to connect Orbolay to Discord",authors:[j.SpikeHD],settings:OJ,flux:{SPEAKING:nft,VOICE_STATE_UPDATES:ift,RPC_NOTIFICATION_CREATE:rft,STREAMER_MODE:sft},start(){aft()},stop(){Ei?.close?.(),Ei=null}})});function ECe(e){V.dispatch({type:"POGGERMODE_SETTINGS_UPDATE",settings:{enabled:e,settingsVisible:e}})}function ACe(e){let t={screenshakeEnabledLocations:{0:!0,1:!0,2:!0},shakeIntensity:1,confettiSize:16,confettiCount:5,combosRequiredCount:1};switch(e){case 0:{Object.assign(t,{screenshakeEnabledLocations:{0:!0,1:!1,2:!1},combosRequiredCount:5});break}case 1:{Object.assign(t,{confettiSize:12,confettiCount:8});break}case 2:{Object.assign(t,{shakeIntensity:20,confettiSize:25,confettiCount:15});break}}V.dispatch({type:"POGGERMODE_SETTINGS_UPDATE",settings:t})}var kCe,yP,CCe=x(()=>{"use strict";d();Q();H();$();B();kCe=R({superIntensePartyMode:{description:"Party intensity",type:4,options:[{label:"Normal",value:0,default:!0},{label:"Better",value:1},{label:"Project X",value:2}],restartNeeded:!1,onChange:ACe}}),yP=k({name:"PartyMode",description:"Allows you to use party mode cause the party never ends \u2728",authors:[w.UwUDev],reporterTestable:2,settings:kCe,start(){ECe(!0),ACe(kCe.store.superIntensePartyMode)},stop(){ECe(!1)}})});function lft(e){let t=e.content||"";return e.mentions?.forEach(o=>{t=t.replace(new RegExp(`<@!?${o.id}>`,"g"),`@${o.username}`)}),t.slice(0,200)+(t.length>200?"...":"")}function cft(e){if(!zy.store.ignoreMuted||!e)return!1;if(e.isMuted?.())return!0;if([1,3].includes(e.type)){let o=e.recipients||[];for(let n of o)if(Tt.isBlocked(n))return!0;if(Ok?.getMutedChannels?.()?.includes?.(e.id))return!0}if(e.guild_id){let o=ct.getGuild(e.guild_id);if(Ok.isMuted(e.guild_id)||Ok?.isMuted?.(e.guild_id)||Ok?.isChannelMuted?.(e.guild_id,e.id)||Ok?.isCategoryMuted?.(e.guild_id,e.id))return!0}return!1}function uft(e){return zy.store.ignoreMuted&&Tt.isBlocked?.(e)}var Ok,zy,bP,TCe=x(()=>{"use strict";d();_a();Q();H();$();fe();B();Ok=Ft("UserGuildSettingsStore"),zy=R({friends:{type:3,default:!1,description:"Notify when friends send messages in servers"},mentions:{type:3,default:!0,description:"Notify when someone @mentions you directly"},dms:{type:3,default:!0,description:"Notify for direct messages (DMs)"},showInActive:{type:3,default:!1,description:"Show notifications even for currently active channel"},ignoreMuted:{type:3,default:!0,description:"Skip notifications from muted servers, channels, or users"}});bP=k({name:"PingNotifications",description:"Customizable notifications with improved mention formatting",authors:[j.smuki],settings:zy,flux:{MESSAGE_CREATE({message:e}){try{if(!e?.channel_id||e.state==="SENDING")return;let t=ne.getChannel(e.channel_id),o=z.getCurrentUser();if(!t||!o||e.author?.id===o.id)return;let n=[1,3].includes(t.type);if(cft(t)||uft(e.author.id)||!zy.store.showInActive&&t.id===st.getChannelId()||cr.getStatus(o.id)==="dnd")return;let i=z.getUser(e.author.id)||{username:"Unknown"},s=t.name||(n?"DM":"Group"),a=lft(e),l=!1;(zy.store.mentions&&e.mentions?.some(c=>c.id===o.id)||zy.store.friends&&Tt.isFriend(e.author.id)&&!n||n&&zy.store.dms)&&(l=!0),l&&qt({title:`${i.username} in ${s}`,body:a,icon:i.getAvatarURL?.(void 0,128),onClick:()=>ho.transitionTo(`/channels/${t.guild_id||"@me"}/${t.id}/${e.id}`)})}catch(t){console.error("[PingNotifications] Error:",t)}}}})});var dft,vP,ICe=x(()=>{"use strict";d();H();$();fe();dft=De("1-.06-.63L6.16"),vP=k({name:"PinIcon",description:"Adds a pin icon to pinned messages",authors:[j.iamme],patches:[{find:"isUnsupported})",replacement:{match:/WITH_CONTENT\}\)/,replace:"$&,$self.PinnedIcon(arguments[0].message)"}}],PinnedIcon({pinned:e}){return e?r(dft,{size:"xs",style:{position:"absolute",right:"0",top:"0"}}):null}})});var DCe,SP,MCe=x(()=>{"use strict";d();Q();gd();H();$();B();DCe=R({platform:{type:4,description:"What platform to show up as on",restartNeeded:!0,options:[{label:"Desktop",value:"desktop",default:!0},{label:"Web",value:"web"},{label:"Android",value:"android"},{label:"iOS",value:"ios"},{label:"Xbox",value:"xbox"},{label:"Playstation",value:"playstation"}]}}),SP=k({name:"PlatformSpoofer",description:"Spoof what platform or device you're on",authors:[j.Drag],settingsAboutComponent:()=>r(ur.Warning,null,"We can't guarantee this plugin won't get you warned or banned."),settings:DCe,patches:[{find:"_doIdentify(){",replacement:{match:/(\[IDENTIFY\].*let.{0,5}=\{.*properties:)(.*),presence/,replace:"$1{...$2,...$self.getPlatform(true)},presence"}},{find:"#{intl::POPOUT_STAY_ON_TOP}),icon:",replacement:{match:/(?<=CallTile.{0,15}\.memo\((\i)=>\{)/,replace:"$1.platform = $self.getPlatform(false, $1?.participantUserId)?.vcIcon || $1?.platform;"}},{find:'("AppSkeleton");',replacement:{match:/(?<=\.isPlatformEmbedded.{0,50}\i\)\)\}.{0,30})\i\?\i\.\i\.set\(.{0,10}:/,replace:""}}],getPlatform(e,t){let o=DCe.store.platform??"desktop";if(e||t===z.getCurrentUser().id)switch(o){case"desktop":return{browser:"Discord Client",vcIcon:0};case"web":return{browser:"Discord Web",vcIcon:0};case"ios":return{browser:"Discord iOS",vcIcon:1};case"android":return{browser:"Discord Android",vcIcon:1};case"xbox":return{browser:"Discord Embedded",vcIcon:2};case"playstation":return{browser:"Discord Embedded",vcIcon:3};default:return null}return null}})});function mft(e){if(th.store.quickDisable)return e;let t=e,o=/```[\s\S]*?```|`[\s\S]*?`/g,n=[];return t=t.replace(o,i=>(n.push(i),`__CODE_BLOCK_${n.length-1}__`)),(th.store.fixApostrophes||th.store.expandContractions)&&(t=fft(t)),th.store.fixCapitalization&&(t=xft(t)),th.store.fixPunctuation&&Math.random()*100<th.store.fixPunctuationFrequency&&(t=yft(t)),th.store.expandContractions&&(t=gft(t)),t=t.replace(/__CODE_BLOCK_(\d+)__/g,(i,s)=>n[parseInt(s)]),t}function NCe(e){let t=[];for(let o of e)o.match(/[a-zA-Z]/)&&t.push(o===o.toUpperCase());return t}function BCe(e,t){let o="",n=0;for(let i=0;i<e.length;i++){let s=e[i];if(!s.match(/[a-zA-Z]/)){o+=s;continue}let a=t[n];o+=a?s.toUpperCase():s.toLowerCase(),n<t.length-1&&n++}return o}function fft(e){let t=Object.keys(kP);if(t.length===0)return e;let o=new RegExp(`\\b(${t.join("|")})\\b`,"gi");return e.replace(o,n=>{let i=n.toLowerCase();if(Object.prototype.hasOwnProperty.call(kP,i)){let s=kP[i];return BCe(s,NCe(n))}return n})}function gft(e){let t=new RegExp(`\\b(${Object.keys(wP).join("|")})\\b`,"gi");return e.replace(t,o=>{let n=o.toLowerCase();return Object.prototype.hasOwnProperty.call(wP,n)?BCe(wP[n],NCe(o)):o})}function hft(e){return e.replace(/'/g,"")}function xft(e){let t=/((?<!\w\.\w.)(?<!\b[A-Z][a-z]\.)(?<![A-Z]\.)(?<!\.)(?<=[.?!])\s+|\n+)/,n=e.split(t).filter(a=>a!=null),i=(Ge.plugins.PolishWording.blockedWords||"").split(/,\s?/).filter(a=>a).map(a=>a.toLowerCase()),s="";for(let a=0;a<n.length;a++){let l=n[a];if(!t.test(l)){if(l){if(l.trim()===""){s+=l;continue}}else continue;let u=l.match(/^\s*([\w'-]+)/),p=u?u[1].toLowerCase():"";!(p?i.includes(p):!1)&&!l.startsWith("http")?s+=l.replace(/^(\s*)(\S)/,(g,y,b)=>y+b.toUpperCase()):s+=l}else l&&(s+=l)}return s=s.replace(/\bi\b(?!\s+is\b)(?=['\s]|$)/g,"I"),s}function yft(e){if(!e)return"";let t=e.split(`
`),o=[];for(let n=0;n<t.length;n++){let s=t[n].trimEnd(),a=/https?:\/\/\S+$|www\.\S+$/;if(!s)n<t.length-1&&o.push("");else{let l=s.slice(-1);if(/[A-Za-z0-9]/.test(l)&&!a.test(s)){o.push(s+".");continue}o.push(s)}}return o.join(`
`)}var pft,th,EP,wP,kP,PCe=x(()=>{"use strict";d();Q();H();$();pft=(e,t)=>{t.content=mft(t.content)},th=R({quickDisable:{type:3,description:"Quick disable. Turns off message modifying without requiring a client reload.",default:!1},blockedWords:{type:0,description:"Words that will not be capitalized (comma separated).",default:""},fixApostrophes:{type:3,description:"Ensure contractions contain apostrophes.",default:!0},expandContractions:{type:3,description:"Expand contractions.",default:!1},fixCapitalization:{type:3,description:"Capitalize sentences.",default:!1},fixPunctuation:{type:3,description:"Punctate sentences.",default:!1},fixPunctuationFrequency:{type:5,description:"Percent period frequency (this majorly annoys some people).",markers:uo(0,100,10),stickToMarkers:!1,default:100}}),EP=k({name:"PolishWording",description:"Tweaks your messages to make them look nicer and have better grammar. See settings",authors:[w.Samwich,j.WKoA],onBeforeMessageSend:pft,settings:th});wP={"wasn't":"was not","can't":"cannot","don't":"do not","won't":"will not","isn't":"is not","aren't":"are not","haven't":"have not","hasn't":"has not","hadn't":"had not","doesn't":"does not","didn't":"did not","shouldn't":"should not","wouldn't":"would not","couldn't":"could not","that's":"that is","what's":"what is","there's":"there is","how's":"how is","where's":"where is","when's":"when is","who's":"who is","why's":"why is","you'll":"you will","i'll":"I will","they'll":"they will","it'll":"it will","i'm":"I am","you're":"you are","they're":"they are","he's":"he is","she's":"she is","i've":"I have","you've":"you have","we've":"we have","they've":"they have","you'd":"you would","he'd":"he would","she'd":"she would","it'd":"it would","we'd":"we would","they'd":"they would","y'all":"you all","here's":"here is"},kP={};for(let e in wP){let t=hft(e.toLowerCase());kP[t]=e}});var _Ce=x(()=>{});function lm(e,t){V.dispatch({type:e,...t})}async function vft(e){try{let o=await(await fetch(e)).blob();return new Promise((n,i)=>{let s=new FileReader;s.onloadend=()=>n(s.result),s.onerror=i,s.readAsDataURL(o)})}catch(t){return LCe.error("Failed to convert image to base64",t),null}}async function RCe(e,t,o){if(!e)return null;if(typeof e=="object"&&e.imageUri)return e.imageUri;if(typeof e=="string"){if(e.startsWith("data:"))return e;let n=e.startsWith("a_"),a=`https://cdn.discordapp.com/${o==="banner"?"banners":"avatars"}/${t}/${e}.${n?"gif":"png"}?size=${o==="banner"?1024:512}`;return await vft(a)}return null}async function Fk(e){let t=z.getCurrentUser(),o=gr.getUserProfile(t.id),n=t,i=bft.getPendingChanges(e),s=OCe.getSetting(),a=s?{text:s.text,emojiId:s.emojiId,emojiName:s.emojiName,expiresAtMs:s.expiresAtMs}:null,l=(i.pendingAvatarDecoration!==void 0?i.pendingAvatarDecoration:n.avatarDecorationData)?{asset:(i.pendingAvatarDecoration||n.avatarDecorationData).asset,skuId:(i.pendingAvatarDecoration||n.avatarDecorationData).skuId}:null,c=null,u=i.pendingProfileEffect!==void 0?i.pendingProfileEffect:o?.profileEffect;if(u){if(u.skuId&&u.effects)c={skuId:u.skuId,title:u.title,description:u.description,accessibilityLabel:u.accessibilityLabel,reducedMotionSrc:u.reducedMotionSrc,thumbnailPreviewSrc:u.thumbnailPreviewSrc,effects:u.effects,animationType:u.animationType,staticFrameSrc:u.staticFrameSrc,type:u.type||1};else if(u.skuId){let C=o?.collectibles?.find(I=>I.skuId===u.skuId);C&&(c={skuId:C.skuId,title:C.title,description:C.description,accessibilityLabel:C.accessibilityLabel,reducedMotionSrc:C.reducedMotionSrc,thumbnailPreviewSrc:C.thumbnailPreviewSrc,effects:C.effects,animationType:C.animationType,staticFrameSrc:C.staticFrameSrc,type:C.type||1})}}let p=i.pendingNameplate!==void 0?i.pendingNameplate:n.collectibles?.nameplate,m=p?{skuId:p.skuId,asset:p.asset,label:p.label,palette:p.palette,type:p.type||2}:null,g=i.pendingDisplayNameStyles!==void 0?i.pendingDisplayNameStyles:n.displayNameStyles,y=g?{font_id:g.font_id,effect_id:g.effect_id,colors:Array.isArray(g.colors)?g.colors:[]}:null,b=i.pendingAvatar!==void 0?i.pendingAvatar:t.avatar,v=await RCe(b,t.id,"avatar")||To.getDefaultAvatarURL(t.id),E=i.pendingBanner!==void 0?i.pendingBanner:o?.banner,A=await RCe(E,t.id,"banner");return{avatarDataUrl:v,bannerDataUrl:A,bio:i.pendingBio!==void 0?i.pendingBio:o?.bio||null,accentColor:i.pendingAccentColor!==void 0?i.pendingAccentColor:o?.accentColor||null,themeColors:i.pendingThemeColors!==void 0?i.pendingThemeColors:o?.themeColors||null,globalName:i.pendingGlobalName!==void 0?i.pendingGlobalName:t.globalName||null,pronouns:i.pendingPronouns!==void 0?i.pendingPronouns:o?.pronouns||null,avatarDecoration:l,profileEffect:c,nameplate:m,primaryGuildId:i.pendingPrimaryGuildId!==void 0?i.pendingPrimaryGuildId:n.primaryGuild?.identityGuildId||null,customStatus:a,displayNameStyles:y}}function AP(e,t){return e===t?!0:JSON.stringify(e)===JSON.stringify(t)}function Sft(e,t){return e==null&&t==null?!0:e==null||t==null?!1:e.text===t.text&&String(e.emojiId??"")===String(t.emojiId??"")&&e.emojiName===t.emojiName&&String(e.expiresAtMs??"0")===String(t.expiresAtMs??"0")}async function FCe(e,t){try{let o=await Fk(t);e.avatarDataUrl&&e.avatarDataUrl!==o.avatarDataUrl&&lm("USER_SETTINGS_ACCOUNT_SET_PENDING_AVATAR",{guildId:t,avatar:e.avatarDataUrl}),e?.bannerDataUrl&&e.bannerDataUrl!==o.bannerDataUrl&&lm("USER_SETTINGS_ACCOUNT_SET_PENDING_BANNER",{guildId:t,banner:e.bannerDataUrl}),e?.bio&&e.bio!==o.bio&&lm("USER_SETTINGS_ACCOUNT_SET_PENDING_BIO",{guildId:t,bio:e.bio}),e?.pronouns&&e.pronouns!==o.pronouns&&lm("USER_SETTINGS_ACCOUNT_SET_PENDING_PRONOUNS",{guildId:t,pronouns:e.pronouns}),e?.globalName&&e.globalName!==o.globalName&&lm("USER_SETTINGS_ACCOUNT_SET_PENDING_GLOBAL_NAME",{globalName:e.globalName}),e?.avatarDecoration&&!AP(e.avatarDecoration,o.avatarDecoration)&&lm("USER_SETTINGS_ACCOUNT_SET_PENDING_COLLECTIBLES_ITEM",{guildId:t,item:{type:0,value:e.avatarDecoration}}),e?.profileEffect&&!AP(e.profileEffect,o.profileEffect)&&lm("USER_SETTINGS_ACCOUNT_SET_PENDING_COLLECTIBLES_ITEM",{guildId:t,item:{type:1,value:e.profileEffect}}),e?.nameplate&&!AP(e.nameplate,o.nameplate)&&lm("USER_SETTINGS_ACCOUNT_SET_PENDING_COLLECTIBLES_ITEM",{guildId:t,item:{type:2,value:e.nameplate}}),e?.displayNameStyles&&!AP(e.displayNameStyles,o.displayNameStyles)&&lm("USER_SETTINGS_ACCOUNT_SET_PENDING_DISPLAY_NAME_STYLES",{guildId:t,displayNameStyles:e.displayNameStyles}),e?.primaryGuildId&&!t&&e.primaryGuildId!==o.primaryGuildId&&lm("USER_SETTINGS_SET_PENDING_PRIMARY_GUILD_ID",{primaryGuildId:e.primaryGuildId}),e.customStatus&&!t&&!Sft(e.customStatus,o.customStatus)&&OCe.updateSetting({text:e.customStatus.text||"",expiresAtMs:e.customStatus.expiresAtMs||"0",emojiId:e.customStatus.emojiId||"0",emojiName:e.customStatus.emojiName||""})}catch(o){throw LCe.error("Failed to load profile",o),o}}var LCe,bft,OCe,CP=x(()=>{"use strict";d();Ra();At();fe();B();LCe=new ke("ProfilePresets"),bft=Ft("UserProfileSettingsStore"),OCe=nr("status","customStatus")});async function HCe(){try{let e=await Oe.get($Ce);e&&Array.isArray(e)&&(En=e)}catch(e){UCe.error("Failed to load presets",e),En=[]}}async function Gy(){try{await Oe.set($Ce,En)}catch(e){UCe.error("Failed to save presets",e)}}function zCe(e){Uk=e}function GCe(e){En.push(e)}function UJ(e,t){e>=0&&e<En.length&&(En[e]=t)}function qCe(e){e>=0&&e<En.length&&(En.splice(e,1),Uk===e?Uk=-1:Uk>e&&Uk--)}function jCe(e,t){if(e<0||e>=En.length||t<0||t>=En.length)return;let[o]=En.splice(e,1);En.splice(t,0,o)}function $k(e){En=e}var UCe,$Ce,En,Uk,TP=x(()=>{"use strict";d();dr();At();UCe=new ke("ProfilePresets"),$Ce="ProfileDataset",En=[],Uk=-1});async function WCe(e,t){let o=await Fk(t),n={name:e,timestamp:Date.now(),...o};GCe(n),await Gy(),Re(`Profile "${e}" saved successfully`,D.Type.SUCCESS)}async function KCe(e,t,o){if(e<0||e>=En.length)return;let n={...En[e],[t]:o,timestamp:Date.now()};UJ(e,n),await Gy()}async function YCe(e){if(e<0||e>=En.length)return;let t=En[e];qCe(e),await Gy(),Re(`Profile "${t.name}" deleted`,D.Type.MESSAGE)}async function IP(e,t){e<0||e>=En.length||t<0||t>=En.length||(jCe(e,t),await Gy())}async function $J(e,t){if(e<0||e>=En.length||!t.trim())return;let o={...En[e],name:t.trim()};UJ(e,o),await Gy(),Re(`Profile renamed to "${t}"`,D.Type.SUCCESS)}function QCe(){try{let e=JSON.stringify(En,null,2),t=new Blob([e],{type:"application/json"}),o=URL.createObjectURL(t),n=document.createElement("a");n.href=o,n.download=`profile-presets-${Date.now()}.json`,n.click(),URL.revokeObjectURL(o),Re("Profiles exported successfully",D.Type.SUCCESS)}catch{Re("Failed to export profiles",D.Type.FAILURE)}}function wft(e,t){return e.avatarDataUrl===t.avatarDataUrl&&e.bannerDataUrl===t.bannerDataUrl&&e.bio===t.bio&&e.pronouns===t.pronouns&&JSON.stringify(e.themeColors)===JSON.stringify(t.themeColors)&&JSON.stringify(e.avatarDecoration)===JSON.stringify(t.avatarDecoration)&&JSON.stringify(e.profileEffect)===JSON.stringify(t.profileEffect)&&JSON.stringify(e.nameplate)===JSON.stringify(t.nameplate)}async function ZCe(e,t){let o=document.createElement("input");o.type="file",o.accept="application/json",o.onchange=async n=>{try{let i=n.target.files[0];if(!i)return;let s=await i.text(),a=JSON.parse(s);if(!Array.isArray(a)){Re("Invalid profile file format",D.Type.FAILURE);return}if(En.length>0)if(a.some(c=>En.some(u=>wft(c,u))))if(await t())$k(a);else{let u=[...En,...a];$k(u)}else{let c=[...En,...a];$k(c)}else $k(a);await Gy(),e(),Re(`Imported ${a.length} profiles successfully`,D.Type.SUCCESS)}catch{Re("Failed to import profiles",D.Type.FAILURE)}},o.click()}var HJ=x(()=>{"use strict";d();B();CP();TP()});function XCe({title:e,message:t,confirmText:o,cancelText:n,onConfirm:i,onCancel:s,onClose:a,transitionState:l}){return r(Pe,{transitionState:l},r(je,null,r(re,{tag:"h2"},e)),r($e,null,r(W,null,t)),r(ht,null,r(Me,{onClick:()=>{i(),a()}},o),r(Me,{variant:"secondary",onClick:()=>{s(),a()}},n)))}var JCe=x(()=>{"use strict";d();ut();Ad();wt();at()});function VCe({presets:e,allPresets:t,avatarSize:o,selectedPreset:n,onLoad:i,onUpdate:s,guildId:a,currentPage:l,onPageChange:c}){let[u,p]=X.useState(-1),[m,g]=X.useState("");return r("div",{className:Ai("list-container")},e.map(y=>{let b=t.indexOf(y),v=u===b,E=new Date(y.timestamp),A=E.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"}),C=E.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit"});return r("div",{key:b,tabIndex:v?-1:0,role:"button",onClick:()=>{v||(i(b),Re(`Profile "${y.name}" loaded successfully`,D.Type.SUCCESS))},onKeyDown:I=>{!v&&(I.key==="Enter"||I.key===" ")&&(I.preventDefault(),i(b),Re(`Profile "${y.name}" loaded successfully`,D.Type.SUCCESS))},className:me(Ai("row"),!v&&n===b?"selected":"")},r("div",{className:Ai("avatar-url")},y.avatarDataUrl&&r("img",{src:y.avatarDataUrl,alt:"",className:Ai("avatar"),style:{width:`${o}px`,height:`${o}px`}}),r("div",{className:Ai("rename")},v?r(qe,{value:m,onChange:g,onBlur:()=>{m.trim()&&($J(b,m),s()),p(-1)},onKeyDown:I=>{I.key==="Enter"?(m.trim()&&($J(b,m),s()),p(-1)):I.key==="Escape"&&p(-1),I.stopPropagation()},onClick:I=>I.stopPropagation(),autoFocus:!0}):r(f,null,r("div",{className:Ai("name")},y.name),r("div",{className:Ai("timestamp")},A," at ",C)))),r("div",{className:Ai("updated")},r("svg",{width:"20",height:"20",viewBox:"0 0 20 20",className:Ai("menu-icon"),onClick:I=>{I.stopPropagation();let N=I.currentTarget;Dt.openContextMenu(I,()=>r(M.Menu,{navId:"preset-options",onClose:Dt.closeContextMenu},r(M.MenuItem,{id:"rename",label:"Rename",action:()=>{p(b),g(y.name)}}),r(M.MenuItem,{id:"update",label:"Update",action:async()=>{let _=await Fk(a);Object.entries(_).forEach(([O,F])=>{F!=null&&KCe(b,O,F)}),Re("Profile updated successfully",D.Type.SUCCESS),s()}}),r(M.MenuSeparator,null),b>0&&r(M.MenuItem,{id:"move-up",label:"Move Up",action:()=>{IP(b,b-1),s()}}),b<t.length-1&&r(M.MenuItem,{id:"move-down",label:"Move Down",action:()=>{IP(b,b+1),s()}}),l>1&&r(M.MenuItem,{id:"move-to-page-1",label:"Move to Page 1",action:()=>{IP(b,0),c(1),s()}}),r(M.MenuSeparator,null),r(M.MenuItem,{id:"delete",label:"Delete",color:"danger",action:async()=>{await YCe(b),s()}})))}},r("path",{fill:"currentColor",d:"M10 3a1.5 1.5 0 110 3 1.5 1.5 0 010-3zm0 5a1.5 1.5 0 110 3 1.5 1.5 0 010-3zm0 5a1.5 1.5 0 110 3 1.5 1.5 0 010-3z"}))))}))}var e3e=x(()=>{"use strict";d();xt();B();DP();HJ();CP()});function t3e({guildId:e}){let[t,o]=X.useState(""),[,n]=X.useReducer(G=>G+1,0),[i,s]=X.useState(!1),[a,l]=X.useState(1),[c,u]=X.useState("1"),[p,m]=X.useState(-1),[g,y]=X.useState(!1),b=g?En.filter(G=>G.name.toLowerCase().includes(t.toLowerCase())):En,v=Math.ceil(b.length/Hk),E=(a-1)*Hk,A=b.slice(E,E+Hk),C=G=>{G>=1&&G<=v&&(l(G),u(String(G)))},I=async()=>{if(!t.trim())return;s(!0),await WCe(t.trim(),e),o(""),s(!1);let G=Math.ceil(En.length/Hk);C(G),n()},N=G=>{m(G),zCe(G),FCe(En[G],e),n()},_=()=>new Promise(G=>{Ee(te=>r(XCe,{...te,title:"Override Existing Presets?",message:"Some imported profiles match existing ones. Do you want to override all profiles or combine them?",confirmText:"Override",cancelText:"Combine",onConfirm:()=>G(!0),onCancel:()=>G(!1)}))}),O=zJ.store.avatarSize||40,F=En.length>0,J=b.length>Hk;return r("div",{className:Ai("section")},r(re,{tag:"h3",className:Ai("heading")},"Saved Profiles"),r("div",{className:Ai("text")},r(qe,{placeholder:g?"Search profiles...":"Profile Name",value:t,onChange:o,className:Ai("text-input")})),r("div",{className:Ai("search")},!g&&r(Me,{size:"small",disabled:i||!t.trim(),onClick:I,className:Ai("search-button")},i?"Saving...":"Save Profile"),F&&r(Me,{size:"small",variant:g?"primary":"secondary",onClick:()=>{y(!g),C(1)}},g?"Cancel Search":"Search")),F&&r(f,null,r(VCe,{presets:A,allPresets:En,avatarSize:O,selectedPreset:p,onLoad:N,onUpdate:n,guildId:e,currentPage:a,onPageChange:C}),J&&r("div",{className:Ai("pagination")},r(Me,{size:"small",variant:"secondary",disabled:a===1,onClick:()=>C(a-1)},"\u2190"),r("div",{className:Ai("page")},r("input",{type:"text",value:c,onChange:G=>{let{value:te}=G.target;u(te);let K=parseInt(te);!isNaN(K)&&K>=1&&K<=v&&l(K)},className:Ai("page-input")}),r("span",{className:Ai("page-of")},"/ ",v)),r(Me,{size:"small",variant:"secondary",disabled:a===v,onClick:()=>C(a+1)},"\u2192")),r("div",{className:Ai("import")},r(Me,{size:"small",variant:"secondary",onClick:()=>ZCe(n,_)},"Import"),r(Me,{size:"small",variant:"secondary",onClick:QCe},"Export All")),r("hr",{className:Ai("block")})))}var Hk,o3e=x(()=>{"use strict";d();ut();Ad();at();B();DP();HJ();CP();TP();JCe();e3e();Hk=5});var Ai,zJ,MP,DP=x(()=>{"use strict";d();_Ce();Q();H();nt();$();o3e();TP();Ai=de("vc-profile-presets-"),zJ=R({avatarSize:{type:5,description:"Avatar size in preset list.",default:40,markers:uo(32,96,8),stickToMarkers:!0}}),MP=k({name:"ProfileSets",description:"Allows you to save and load different profile presets, via the Profile Section in Settings.",authors:[j.omaw,j.justjxke],settings:zJ,patches:[{find:"DefaultCustomizationSections: user cannot be undefined",replacement:{match:/return.{0,50}children:\[(?<=\.getLegacyUsername\(\).*?)/,replace:"$&$self.renderPresetSection(),"}}],start(){HCe()},renderPresetSection(){return r(t3e,null)}})});function kft(e){return e.split("").every(o=>o==="?")?e.replace(/\?/g,n3e.store.replace):e}var n3e,NP,r3e=x(()=>{"use strict";d();vu();Q();H();$();n3e=R({replace:{type:0,description:"Replace with",default:":face_with_monocle:"}});NP=k({name:"QuestionMarkReplacement",description:"Replace all question marks with chosen string, if message only contains question marks.",authors:[w.nyx],settings:n3e,start(){this.preSend=qi((e,t)=>{t.content=kft(t.content)})},stop(){ji(this.preSend)}})});function i3e(){return r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},r("path",{d:"M21 3C21.5523 3 22 3.44772 22 4V18C22 18.5523 21.5523 19 21 19H6.455L2 22.5V4C2 3.44772 2.44772 3 3 3H21ZM20 5H4V18.385L5.76333 17H20V5ZM10.5153 7.4116L10.9616 8.1004C9.29402 9.0027 9.32317 10.4519 9.32317 10.7645C9.47827 10.7431 9.64107 10.7403 9.80236 10.7553C10.7045 10.8389 11.4156 11.5795 11.4156 12.5C11.4156 13.4665 10.6321 14.25 9.66558 14.25C9.12905 14.25 8.61598 14.0048 8.29171 13.6605C7.77658 13.1137 7.5 12.5 7.5 11.5052C7.5 9.75543 8.72825 8.18684 10.5153 7.4116ZM15.5153 7.4116L15.9616 8.1004C14.294 9.0027 14.3232 10.4519 14.3232 10.7645C14.4783 10.7431 14.6411 10.7403 14.8024 10.7553C15.7045 10.8389 16.4156 11.5795 16.4156 12.5C16.4156 13.4665 15.6321 14.25 14.6656 14.25C14.1291 14.25 13.616 14.0048 13.2917 13.6605C12.7766 13.1137 12.5 12.5 12.5 11.5052C12.5 9.75543 13.7283 8.18684 15.5153 7.4116Z"}))}var s3e=x(()=>{"use strict";d()});var Wc,Wa,Qu,GJ=x(()=>{"use strict";d();Wc={width:1200,height:600,quoteAreaWidth:520,quoteAreaX:640,maxContentHeight:480},Wa={initial:42,minimum:18,decrement:2,lineHeightMultiplier:1.25,authorMultiplier:.6,usernameMultiplier:.45,authorMinimum:22,usernameMinimum:18,watermark:18},Qu={authorTop:60,username:10,gradientStart:200,gradientWidth:400,watermarkPadding:20}});function l3e(e){let t=new URL(e);return t.searchParams.set("size","512"),t.toString()}function Eft(e){return new Promise((t,o)=>{e.toBlob(n=>{if(!n)return o(new Error("Failed to create Blob"));t(n)},"image/png")})}async function Aft(e){let t=await fetch(e);if(!t.ok)throw new Error(`Failed to fetch image: ${t.status} ${t.statusText}`);return await t.blob()}function Cft(e){let t=e.replace(/<a?:(\w+):(\d+)>/g,""),o=t.match(/<@!?\d+>/g);return o&&o.forEach(n=>{let i=n.replace(/[<@!>]/g,""),s=z.getUser(i);s?.username&&(t=t.replace(n,`@${s.username}`))}),t}function qJ(e){let t=e.split(" ");return t.length>6?t.slice(0,6).join(" "):t.join(" ")}function jJ(e){return e?"gif":"png"}function c3e(e){return e?"image/gif":"image/png"}async function WJ(){return zk||(zk=(async()=>{if(!document.getElementById("quoter-font-style")){let e=document.createElement("style");e.id="quoter-font-style",e.textContent=`
                @import url('https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@300&display=swap');
                @import url('https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap');
                @import url('https://fonts.googleapis.com/css2?family=Momo+Signature&display=swap');
                @import url('https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400..700;1,400..700&display=swap');
                @import url('https://fonts.googleapis.com/css2?family=Merriweather:wght@300;400;700&display=swap');
            `,document.head.appendChild(e),await new Promise(t=>setTimeout(t,300))}})(),zk)}function u3e(){zk=null}async function Tft(e){let t=(0,rS.GIFEncoder)(),o=e.getContext("2d");if(!o)throw new Error("Failed to get 2D rendering context");let{data:n}=o.getImageData(0,0,e.width,e.height),i=(0,rS.quantize)(n,256),s=(0,rS.applyPalette)(n,i);return t.writeFrame(s,e.width,e.height,{transparent:!1,palette:i}),t.finish(),new Blob([new Uint8Array(t.bytesView())],{type:"image/gif"})}async function Ift(e){let t=await Aft(e),o=new Image,n=URL.createObjectURL(t);try{return await new Promise((i,s)=>{o.onload=()=>i(),o.onerror=()=>s(new Error("Failed to load avatar image")),o.src=n}),o}finally{URL.revokeObjectURL(n)}}function Dft(e,t){e.globalCompositeOperation="saturation",e.fillStyle="#fff",e.fillRect(0,0,t.width,t.height),e.globalCompositeOperation="source-over"}function Mft(e,t){let o=e.createLinearGradient(t.height-Qu.gradientWidth,0,t.height,0);o.addColorStop(0,"rgba(0, 0, 0, 0)"),o.addColorStop(1,"rgba(0, 0, 0, 1)"),e.fillStyle=o,e.fillRect(t.height-Qu.gradientWidth,0,Qu.gradientWidth,t.height)}function a3e(e,t,o,n,i){e.font=`300 ${o}px '${n}', sans-serif`;let s=t.split(" "),a=[],l=[];return s.forEach(c=>{let u=[...l,c].join(" ");e.measureText(u).width>i&&l.length?(a.push(l.join(" ")),l=[c]):l.push(c)}),l.length&&a.push(l.join(" ")),a}function Nft(e,t,o,n){let i=Wa.initial;for(;i>=Wa.minimum;){let p=a3e(e,t,i,o,n.quoteAreaWidth),m=i*Wa.lineHeightMultiplier,g=Math.max(Wa.authorMinimum,i*Wa.authorMultiplier),y=Math.max(Wa.usernameMinimum,i*Wa.usernameMultiplier),b=p.length*m+Qu.authorTop+g+Qu.username+y;if(b<=n.maxContentHeight)return{fontSize:i,lineHeight:m,authorFontSize:g,usernameFontSize:y,lines:p,totalHeight:b};i-=Wa.decrement}let s=a3e(e,t,Wa.minimum,o,n.quoteAreaWidth),a=Wa.minimum*Wa.lineHeightMultiplier,l=Wa.authorMinimum,c=Wa.usernameMinimum,u=s.length*a+Qu.authorTop+l+Qu.username+c;return{fontSize:Wa.minimum,lineHeight:a,authorFontSize:l,usernameFontSize:c,lines:s,totalHeight:u}}function Bft(e,t,o,n){e.fillStyle="#fff",e.font=`300 ${t.fontSize}px '${o}', sans-serif`;let i=(n.height-t.totalHeight)/2;return t.lines.forEach(s=>{let a=(n.quoteAreaWidth-e.measureText(s).width)/2;i+=t.lineHeight,e.fillText(s,n.quoteAreaX+a,i)}),i}function Pft(e,t,o,n,i){let s=t.globalName||t.username;e.font=`italic 300 ${o.authorFontSize}px 'M PLUS Rounded 1c', sans-serif`,e.fillStyle="#fff";let a=`- ${s}`,l=n.quoteAreaX+(n.quoteAreaWidth-e.measureText(a).width)/2,c=i+Qu.authorTop;e.fillText(a,l,c),e.font=`300 ${o.usernameFontSize}px 'M PLUS Rounded 1c', sans-serif`,e.fillStyle="#888";let u=`@${t.username}`,p=n.quoteAreaX+(n.quoteAreaWidth-e.measureText(u).width)/2,m=c+Qu.username+o.usernameFontSize;e.fillText(u,p,m)}function _ft(e,t,o){e.fillStyle="#888",e.font=`300 ${Wa.watermark}px 'M PLUS Rounded 1c', sans-serif`;let n=t.slice(0,32),i=o.width-e.measureText(n).width-Qu.watermarkPadding,s=o.height-Qu.watermarkPadding;e.fillText(n,i,s)}async function d3e(e){let{avatarUrl:t,quote:o,grayScale:n,author:i,watermark:s,showWatermark:a,saveAsGif:l,quoteFont:c}=e;await WJ();let u=Cft(o),p=document.createElement("canvas"),m=p.getContext("2d");if(!m)throw new Error("Failed to get 2D rendering context");p.width=Wc.width,p.height=Wc.height,m.fillStyle="#000",m.fillRect(0,0,Wc.width,Wc.height);let g=await Ift(t);m.drawImage(g,0,0,Wc.height,Wc.height),n&&Dft(m,Wc),Mft(m,Wc);let y=Nft(m,u,c,Wc),b=Bft(m,y,c,Wc);return Pft(m,i,y,Wc,b),a&&s&&_ft(m,s,Wc),l?await Tft(p):await Eft(p)}var rS,zk,p3e=x(()=>{"use strict";d();B();rS=Ml(T5());GJ();zk=null});function Rft({message:e,...t}){let[o,n]=L(Wf.store.grayscale),[i,s]=L(Wf.store.showWatermark),[a,l]=L(Wf.store.saveAsGif),[c,u]=L(Wf.store.watermark),[p,m]=L(null),[g,y]=L(null),{quoteFont:b}=Wf.store;se(()=>{Wf.store.grayscale=o,Wf.store.showWatermark=i,Wf.store.saveAsGif=a},[o,i,a]);let v=async()=>{let C=await d3e({avatarUrl:l3e(e.author.getAvatarURL()),quote:e.content,grayScale:o,author:e.author,watermark:c,showWatermark:i,saveAsGif:a,quoteFont:b});m(C),g&&URL.revokeObjectURL(g);let I=URL.createObjectURL(C);y(I),document.getElementById("quoterPreview")?.setAttribute("src",I)};se(()=>{v()},[o,i,a,c,b]),se(()=>()=>{g&&URL.revokeObjectURL(g)},[g]);let E=()=>{if(!p)return;let C=qJ(e.content),I=jJ(a),N=URL.createObjectURL(p),_=document.createElement("a");_.href=N,_.download=`${C} - ${e.author.username}.${I}`,_.click(),_.remove(),URL.revokeObjectURL(N)},A=()=>{if(!p)return;let C=Cn();if(!C)return;let I=qJ(e.content),N=jJ(a),_=c3e(a),O=new File([p],`${I} - ${e.author.username}.${N}`,{type:_});ls.promptToUpload([O],C,0),t.onClose?.()};return r(Pe,{...t,size:"medium"},r(je,{separator:!1},r(Y,{color:"text-strong",size:"lg",weight:"semibold",tag:"h1",style:{flexGrow:1}},"Catch Them In 4K."),r(Ut,{onClick:t.onClose})),r($e,{scrollbarType:"none"},r("img",{alt:"Quote preview",src:"",id:"quoterPreview",style:{borderRadius:"20px",width:"100%",marginBottom:"20px"}}),r(fn,{title:"Grayscale",value:o,onChange:n}),r(fn,{title:"Save as GIF",value:a,onChange:l,description:"Saves/Sends the image as a GIF instead of a PNG"}),r(fn,{title:"Show Watermark",value:i,onChange:s,hideBorder:i}),i&&r("div",{style:{marginTop:"8px",marginBottom:"20px"}},r(qe,{value:c,onChange:u,placeholder:"Watermark text (max 32 characters)",maxLength:32})),r("div",{style:{display:"flex",gap:"8px",marginTop:"16px",marginBottom:"16px"}},r(U,{color:U.Colors.BRAND,size:U.Sizes.MEDIUM,onClick:E},"Export"),r(U,{color:U.Colors.BRAND,size:U.Sizes.MEDIUM,onClick:A},"Send"))))}var Wf,BP,m3e=x(()=>{"use strict";d();Q();Et();Qs();H();mt();at();$();B();s3e();GJ();p3e();Wf=R({quoteFont:{type:4,description:"Font for quote text (author/username always use M PLUS Rounded 1c)",options:[{label:"M PLUS Rounded 1c",value:"M PLUS Rounded 1c",default:!0},{label:"Open Sans",value:"Open Sans"},{label:"Momo Signature",value:"Momo Signature"},{label:"Lora",value:"Lora"},{label:"Merriweather",value:"Merriweather"}]},watermark:{type:0,description:"Custom watermark text (max 32 characters)",default:"Made with Equicord"},grayscale:{type:3,description:"Enable grayscale by default",default:!0,hidden:!0},showWatermark:{type:3,description:"Show watermark by default",default:!1,hidden:!0},saveAsGif:{type:3,description:"Save as GIF by default",default:!1,hidden:!0}}),BP=k({name:"Quoter",description:"Adds the ability to create an inspirational quote image from a message.",authors:[w.Samwich,w.thororen,j.neoarz,w.prism],settings:Wf,async start(){await WJ()},stop(){let e=document.getElementById("quoter-font-style");e&&e.remove(),u3e()},contextMenus:{message:(e,{message:t})=>{if(!t.content)return;let o=r(M.MenuItem,{id:"vc-quote",label:"Quote",icon:i3e,action:()=>Ee(n=>r(Rft,{message:t,...n}))});e.push(o)}}})});function f3e({className:e}){return r("svg",{className:e,width:"18",height:"18",viewBox:"0 0 24 24"},r("g",{fill:"currentColor"},r("path",{d:"M19,9H14a5.006,5.006,0,0,0-5,5v5a5.006,5.006,0,0,0,5,5h5a5.006,5.006,0,0,0,5-5V14A5.006,5.006,0,0,0,19,9Zm-5,6a1,1,0,1,1,1-1A1,1,0,0,1,14,15Zm5,5a1,1,0,1,1,1-1A1,1,0,0,1,19,20ZM15.6,5,12.069,1.462A5.006,5.006,0,0,0,5,1.462L1.462,5a5.006,5.006,0,0,0,0,7.071L5,15.6a4.961,4.961,0,0,0,2,1.223V14a7.008,7.008,0,0,1,7-7h2.827A4.961,4.961,0,0,0,15.6,5ZM5,10A1,1,0,1,1,6,9,1,1,0,0,1,5,10ZM9,6a1,1,0,1,1,1-1A1,1,0,0,1,9,6Z"})))}function Uft({iconForeground:e,hideTooltips:t,nameplate:o}){return r(zm,{onContextMenu:n=>Dt.openContextMenu(n,()=>r($ft,null)),onClick:()=>g3e(),role:"switch",tooltipText:t?void 0:"Random Voice",icon:r(f3e,{className:e}),plated:o!=null})}function $ft(){let e=[];Object.values(z.getUsers()).forEach(xe=>{let{channelId:Ze}=lo.getVoiceStateForUser(xe.id)??{};if(!Ze)return;let ge=ne.getChannel(Ze);ge&&e.push(ge.getGuildId())}),e=Array.from(new Set(e));let t=e.map(xe=>ct.getGuild(xe)).filter(xe=>xe&&xe.id),[o,n]=X.useState(it.store.Servers),[i,s]=X.useState(it.store.spacesLeftOperation),[a,l]=X.useState(it.store.UserAmountOperation),[c,u]=X.useState(it.store.vcLimitOperation),[p,m]=X.useState(it.store.autoNavigate),[g,y]=X.useState(it.store.avoidStages),[b,v]=X.useState(it.store.avoidAfk),[E,A]=X.useState(it.store.autoCamera),[C,I]=X.useState(it.store.autoStream),[N,_]=X.useState(it.store.leaveEmpty),[O,F]=X.useState(it.store.selfMute),[J,G]=X.useState(it.store.selfDeafen),[te,K]=X.useState(it.store.mute),[oe,le]=X.useState(it.store.deafen),[he,Ae]=X.useState(it.store.video),[Ce,ye]=X.useState(it.store.includeStates),[ce,pe]=X.useState(it.store.avoidStates);return r(M.Menu,{navId:"random-vc",onClose:()=>{},"aria-label":"Voice state modifier"},r(M.MenuItem,{id:"servers",label:"Select Servers",action:()=>{}},r(f,null,t.map(xe=>r(f,null,r(M.MenuCheckboxItem,{key:String(xe?.id??"invalid server"),id:String(xe?.name??"invalid server"),label:xe?.name??"invalid server",checked:o.includes(xe?.id??"invalid server"),action:()=>{it.store.Servers.includes(xe?.id??"invalid server")?it.store.Servers=it.store.Servers.replace(`/${xe.id}`,""):it.store.Servers+=`/${xe?.id??"invalid server"}`,n(it.store.Servers)}}))),r(M.MenuItem,{id:"selectAll",label:"Select List",action:()=>{let xe=t.filter(Ze=>Ze?.id).map(Ze=>Ze.id);it.store.Servers=`/${xe.join("/")}`,n(it.store.Servers)},disabled:o.length===t.filter(xe=>xe?.id).length,icon:()=>r(Lft,{className:"selectList",role:"img",width:"18",height:"18"})}),r(M.MenuItem,{id:"clear list ",label:"Reset List",disabled:o.length===0,action:()=>{it.store.Servers="",n("")},icon:()=>r("svg",{className:"reset-icon",role:"img",width:"22",height:"22",viewBox:"0 0 26 26"},r("g",{fill:"currentColor"},r("path",{d:"M12,2a10.032,10.032,0,0,1,7.122,3H16a1,1,0,0,0-1,1h0a1,1,0,0,0,1,1h4.143A1.858,1.858,0,0,0,22,5.143V1a1,1,0,0,0-1-1h0a1,1,0,0,0-1,1V3.078A11.981,11.981,0,0,0,.05,10.9a1.007,1.007,0,0,0,1,1.1h0a.982.982,0,0,0,.989-.878A10.014,10.014,0,0,1,12,2Z"}),r("path",{d:"M22.951,12a.982.982,0,0,0-.989.878A9.986,9.986,0,0,1,4.878,19H8a1,1,0,0,0,1-1H9a1,1,0,0,0-1-1H3.857A1.856,1.856,0,0,0,2,18.857V23a1,1,0,0,0,1,1H3a1,1,0,0,0,1-1V20.922A11.981,11.981,0,0,0,23.95,13.1a1.007,1.007,0,0,0-1-1.1Z"})))}))),r(M.MenuItem,{id:"Filter states",label:"Select Filters",action:()=>{}},r(f,null,r(M.MenuCheckboxItem,{key:"muted",id:"muted",label:"Muted",action:()=>{K(!te),it.store.mute=!te},checked:te}),r(M.MenuCheckboxItem,{key:"deafen",id:"deafen",label:"Deafened",action:()=>{le(!oe),it.store.deafen=!oe},checked:oe}),r(M.MenuCheckboxItem,{key:"video",id:"video",label:"Camera",action:()=>{Ae(!he),it.store.video=!he},checked:he}),r(M.MenuCheckboxItem,{key:"stream",id:"stream",label:"Stream",action:()=>{I(!C),it.store.stream=!C},checked:C}),r(M.MenuCheckboxItem,{key:"state",id:"state",label:"Include Filters",disabled:it.store.avoidStates||!it.store.includeStates&&!it.store.mute&&!it.store.deafen&&!it.store.video&&!it.store.stream,action:()=>{ye(!Ce),it.store.includeStates=!Ce},checked:Ce}),r(M.MenuCheckboxItem,{key:"notstate",id:"notstate",label:"Avoid Filters",disabled:it.store.includeStates||!it.store.avoidStates&&!it.store.avoidStates&&!it.store.mute&&!it.store.deafen&&!it.store.video&&!it.store.stream,action:()=>{pe(!ce),it.store.avoidStates=!ce},checked:ce}))),r(M.MenuSeparator,null),r(M.MenuGroup,{label:"USER AMOUNT"},r(M.MenuControlItem,{id:"min-user",label:"User Amount",control:(xe,Ze)=>r(M.MenuSliderControl,{ref:Ze,...xe,minValue:1,maxValue:15,value:it.store.UserAmount,onChange:rn(ge=>{it.store.UserAmount=Number(ge.toFixed(0))},50),renderValue:ge=>`${ge.toFixed(0)} user${Number(ge.toFixed(0))===1?"":"s"}`})}),r(M.MenuItem,{id:"minParms",label:"Parameters",action:()=>{}},r(f,null,r(M.MenuRadioItem,{key:"More than",group:"minGroup",id:"More than",label:"More than",checked:a==="<",action:()=>{l("<"),it.store.UserAmountOperation="<"}}),r(M.MenuRadioItem,{key:"Less than",group:"minGroup",id:"Less than",label:"Less than",checked:a===">",action:()=>{l(">"),it.store.UserAmountOperation=">"}}),r(M.MenuRadioItem,{key:"Equal to",group:"minGroup",id:"Equal to ",label:"Equal to ",checked:a==="==",action:()=>{l("=="),it.store.UserAmountOperation="=="}})))),r(M.MenuSeparator,null),r(M.MenuGroup,{label:"SPACES LEFT"},r(M.MenuControlItem,{id:"max-user",label:"Spaces Left",control:(xe,Ze)=>r(M.MenuSliderControl,{ref:Ze,...xe,minValue:1,maxValue:15,value:it.store.spacesLeft,onChange:rn(ge=>{it.store.spacesLeft=Number(ge.toFixed(0))},50),renderValue:ge=>`${ge.toFixed(0)} user${Number(ge.toFixed(0))===1?"":"s"}`})}),r(M.MenuItem,{id:"maxGroup",label:"Parameters",action:()=>{}},r(f,null,r(M.MenuRadioItem,{key:"More than",group:"maxGroup",id:"More than",label:"More than",checked:i==="<",action:()=>{s("<"),it.store.spacesLeftOperation="<"}}),r(M.MenuRadioItem,{key:"Less than",group:"maxGroup",id:"Less than",label:"Less than",checked:i===">",action:()=>{s(">"),it.store.spacesLeftOperation=">"}}),r(M.MenuRadioItem,{key:"Equal to",group:"maxGroup",id:"Equal to ",label:"Equal to ",checked:i==="==",action:()=>{s("=="),it.store.spacesLeftOperation="=="}})))),r(M.MenuSeparator,null),r(M.MenuGroup,{label:"VOICE LIMIT"},r(M.MenuControlItem,{id:"vc-limit",label:"Voice Limit",control:(xe,Ze)=>r(M.MenuSliderControl,{ref:Ze,...xe,minValue:1,maxValue:15,value:it.store.vcLimit,onChange:rn(ge=>{it.store.vcLimit=Number(ge.toFixed(0))},50),renderValue:ge=>`${ge.toFixed(0)} user${Number(ge.toFixed(0))===1?"":"s"}`})}),r(M.MenuItem,{id:"vcParms",label:"Parameters",action:()=>{}},r(f,null,r(M.MenuRadioItem,{key:"More than",group:"vcGroup",id:"More than",label:"More than",checked:c==="<",action:()=>{u("<"),it.store.vcLimitOperation="<"}}),r(M.MenuRadioItem,{key:"Less than",group:"vcGroup",id:"Less than",label:"Less than",checked:c===">",action:()=>{u(">"),it.store.vcLimitOperation=">"}}),r(M.MenuRadioItem,{key:"Equal to",group:"vcGroup",id:"Equal to ",label:"Equal to ",checked:c==="==",action:()=>{u("=="),it.store.vcLimitOperation="=="}})))),r(M.MenuSeparator,null),r(M.MenuGroup,{label:"SELF SETTINGS"},r(M.MenuItem,{id:"voiceOptions",label:"Voice Options",action:()=>{}},r(f,null,r(M.MenuCheckboxItem,{key:"selfMute",id:"selfMute",label:"Auto Mute",action:()=>{F(!O),it.store.selfMute=!O},checked:O}),r(M.MenuCheckboxItem,{key:"selfDeafen",id:"selfDeafen",label:"Auto Deafen",action:()=>{G(!J),it.store.selfDeafen=!J},checked:J}),r(M.MenuCheckboxItem,{key:"autoCamera",id:"autoCamera",label:"Auto Camera",action:()=>{A(!E),it.store.autoCamera=!E},checked:E}),r(M.MenuCheckboxItem,{key:"autoStream",id:"autoStream",label:"Auto Stream",action:()=>{I(!C),it.store.autoStream=!C},checked:C}),r(M.MenuCheckboxItem,{key:"leaveEmpty",id:"leaveEmpty",label:"Leave when Empty",action:()=>{_(!N),it.store.leaveEmpty=!N},checked:N}))),r(M.MenuCheckboxItem,{key:"autonavigate",id:"autonavigate",label:"Auto Navigate",action:()=>{m(!p),it.store.autoNavigate=!p},checked:p}),r(M.MenuCheckboxItem,{key:"avoidStage",id:"avoidStage",label:"Avoid Stage",action:()=>{y(!g),it.store.avoidStages=!g},checked:g}),r(M.MenuCheckboxItem,{key:"avoidAfk",id:"avoidAfk",label:"Avoid AFK",action:()=>{v(!b),it.store.avoidAfk=!b},checked:b})))}function g3e(){let e=[];if(Object.values(z.getUsers()).forEach(o=>{let{channelId:n,selfDeaf:i,selfMute:s,selfStream:a,selfVideo:l}=lo.getVoiceStateForUser(o.id)??{};if(!n||e.includes(n))return;let c=ne.getChannel(n);if(!c)return;let u=lo.getVoiceStatesForChannel(n);if(!it.store.Servers.split("/").includes(c.getGuildId())||it.store.avoidStages&&c.isGuildStageVoice())return;let p={">":(b,v)=>b<v,"<":(b,v)=>b>v,"==":(b,v)=>b===v},m=Object.keys(u).length,g=c.userLimit===0?99:c.userLimit,y=g-m;if(p[it.store.spacesLeftOperation](y,it.store.spacesLeft)&&p[it.store.UserAmountOperation](m,it.store.UserAmount)&&p[it.store.vcLimitOperation](g,it.store.vcLimit)&&Object.keys(u).length!==c?.userLimit&&!Object.keys(u).includes(z.getCurrentUser().id)&&Kt.can(Nt.CONNECT,c)&&!(it.store.avoidAfk&&!Kt.can(Nt.SPEAK,c))){if(it.store.avoidStates){let b=1/0,v=lo.getVoiceStatesForChannel(c.id),E=0,A=null;for(let C of Object.values(v))(it.store.deafen&&C.selfDeaf||!it.store.deafen&&!C.selfDeaf)&&E++,(it.store.video&&!C.selfVideo||!it.store.video&&C.selfVideo)&&E++,(it.store.stream&&!C.selfStream||!it.store.stream&&C.selfStream)&&E++,it.store.deafen||(it.store.mute&&C.selfMute||!it.store.mute&&!C.selfMute)&&E++;E<b&&(b=E,A=c.id),A&&e.push(n)}it.store.includeStates&&!it.store.avoidStates&&(it.store.deafen&&!i||!it.store.deafen&&i||it.store.video&&!l||!it.store.video&&l||it.store.stream&&!a||!it.store.stream&&a||!it.store.deafen&&(it.store.mute&&!s||!it.store.mute&&s))||e.push(n)}}),e.length===0){D.show({message:"Failed to find a Voice channel!",id:"Vc-not-found",type:D.Type.MESSAGE,options:{position:D.Position.BOTTOM}});return}let t=Math.floor(Math.random()*e.length);Hft(e[t])}function Hft(e){let t=ne.getChannel(e);Dh.selectVoiceChannel(e),it.store.autoNavigate&&pa.transitionToChannel(t.id),it.store.autoCamera&&Kt.can(Nt.STREAM,t)&&Gft(),it.store.autoStream&&Kt.can(Nt.STREAM,t)&&zft(),it.store.selfMute&&!On.isSelfMute()&&st.getVoiceChannelId()&&Ir.toggleSelfMute(),it.store.selfDeafen&&!On.isSelfDeaf()&&st.getVoiceChannelId()&&Ir.toggleSelfDeaf()}async function zft(){let e=On.getMediaEngine(),t=st.getVoiceChannelId();if(!t)return;let o=ne.getChannel(t),n=await Fft(e,["screen"],null);if(!n||n.length===0)return;let i=n[0];o.type===13||!Kt.can(Nt.STREAM,o)||Oft(o.guild_id,t,{pid:null,sourceId:i.id,sourceName:i.name,audioSourceId:null,sound:!0,previewDisabled:!1})}function Gft(){let e=setInterval(()=>{document.querySelector('[aria-label="Turn off Camera" i]')&&clearInterval(e);let o=document.querySelector('[aria-label="Turn on Camera" i]');o&&(clearInterval(e),o.click())},50)}var Lft,Oft,Fft,KJ,it,PP,h3e=x(()=>{"use strict";d();Q();Gh();la();H();$();fe();B();Lft=De("0l1.8-1.8c.17"),Oft=vt('type:"STREAM_START"'),Fft=vt("desktop sources"),KJ=[{label:"More than",value:"<",default:!1},{label:"Less than",value:">",default:!1},{label:"Equal to",value:"==",default:!0}],it=R({UserAmountOperation:{description:"Select an operation for the amounts of users",type:4,options:[...KJ]},UserAmount:{description:"Select amount of users",type:5,markers:uo(0,15,1),default:3,stickToMarkers:!0},spacesLeftOperation:{description:"Select an operation for the maximum amounts of users",type:4,options:[...KJ]},spacesLeft:{description:"Select amount of max users",type:5,markers:uo(0,15,1),default:3,stickToMarkers:!0},vcLimitOperation:{description:"Select an operation for the voice-channel.",type:4,options:[...KJ]},vcLimit:{description:"Select a voice-channel limit",type:5,markers:uo(1,15,1),default:5,stickToMarkers:!0},Servers:{description:"Servers that are included",type:0,default:""},autoNavigate:{type:3,description:"Automatically navigates to the voice-channel.",default:!1},autoCamera:{type:3,description:"Automatically turns on camera",default:!1},autoStream:{type:3,description:"Automatically turns on stream",default:!1},selfMute:{type:3,description:"Automatically mutes your mic when joining voice-channel.",default:!1},selfDeafen:{type:3,description:"Automatically deafems your mic when joining voice-channel.",default:!1},leaveEmpty:{type:3,description:"Finds a random-call, when the voice chat is empty.",default:!1},avoidStages:{type:3,description:"Avoids joining stage voice-channels.",default:!1},avoidAfk:{type:3,description:"Avoids joining AFK voice-channels.",default:!1},video:{type:3,description:"Searches for users with their video on",default:!1},stream:{type:3,description:"Searches for users who are streaming",default:!1},mute:{type:3,description:"Searches for users who are muted",default:!1},deafen:{type:3,description:"Searches for users who are deafened",default:!1},includeStates:{type:3,description:"Option to include states",default:!1},avoidStates:{type:3,description:"Option to avoid states",default:!1}});PP=k({name:"RandomVoice",description:"Adds a Button near the Mute button to join a random voice call.",authors:[j.xijexo,j.omaw,w.thororen],userAreaButton:{icon:f3e,render:Uft},flux:{VOICE_STATE_UPDATES(){let e=z.getCurrentUser().id,t=lo.getVoiceStateForUser(e)?.channelId;if(!t||!it.store.leaveEmpty)return;let o=lo.getVoiceStates();Object.values(o).filter(i=>i.channelId===t&&i.userId!==e).length===0&&g3e()}},settings:it})});var x3e=x(()=>{});function RP(e){if(!e)return!1;let t=ne.getChannel(e);if(!t)return!1;try{return!!(t.isDM()||t.isGroupDM())}catch{return!1}}function QJ(e){Kf=Kf.filter(t=>t!==e),Kf.unshift(e),Kf.length>Kc.store.amountOfUsers&&(Kf.length=Kc.store.amountOfUsers),Gt(ZJ,Kf)}function v3e(e){let t=new Set,o=[];for(let n of e)if(!(!n||t.has(n))&&ne.hasChannel(n)&&RP(n)&&(t.add(n),o.push(n),o.length>=Kc.store.amountOfUsers))break;return o}function qft(){if(Yf)return;Yf=!0,_P=!0;let e=st.getChannelId();lc=v3e([...RP(e)?[e]:[],...Kf]),Ka=0}function jft(e){if(!Yf||lc.length===0)return;let t=lc.length;if(t<=1)return;Ka=(Ka+e+t)%t;let o=lc[Ka];if(!o||!ne.hasChannel(o))return;let n=Kc.store?.visualStyle;n==="overlay"?Yft():n==="toast"&&Zft()}function Wft(){if(!Yf)return;if(Yf=!1,_P=!1,Ka>=0&&Ka<lc.length){let t=lc[Ka];t&&(pa.transitionToChannel(t),QJ(t))}lc=[],Ka=-1,Gk=null,Kc.store?.visualStyle==="overlay"&&k3e()}function S3e(e){try{e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()}catch{}}function y3e(e){(e.ctrlKey||ri&&e.metaKey)&&e.key==="Tab"&&(S3e(e),Yf||qft(),jft(e.shiftKey?-1:1))}function b3e(e){(e.key==="Control"||ri&&e.key==="Meta")&&(S3e(e),e.ctrlKey||e.metaKey||Wft())}function w3e(e){let t=ne.getChannel(e);if(!t)return{name:"Unknown",avatar:""};if(t.isDM()){let o=t.recipients?.[0],n=o?z.getUser(o):null;return{name:(n?Tt.getNickname(n.id):null)??n?.globalName??n?.username??"DM",avatar:n?To.getUserAvatarURL(n,!0,64):""}}return t.isGroupDM()?{name:t.name??"Group DM",avatar:To.getChannelIconURL?.(t)??""}:{name:t.name??"Channel",avatar:""}}function Kft(){qk||(qk=Ee(()=>r(Qft,null)))}function Yft(){Kc.store.visualStyle==="overlay"&&Yf&&(Kft(),YJ?.())}function k3e(){qk&&(vo(qk),qk=null)}function Qft(){let[,e]=X.useState(0);X.useEffect(()=>(YJ=()=>e(y=>y+1),()=>{YJ=null}),[]);let t=Kc.store.overlayMode,o=Kc.store.overlayShowAvatars,n=Math.max(3,Math.min(7,Kc.store.overlayRowLength)),i=t==="current"?1:n,s=t==="current"?[lc[Ka]]:lc,a=1,l=0;t!=="current"&&(a=Math.ceil(s.length/i),l=Math.min(a-1,Math.floor((Ka>=0?Ka:0)/i)));let c=l*i,u=Math.min(c+i,s.length),m=s.slice(c,u).map(y=>{let{name:b,avatar:v}=w3e(y),E=y===lc[Ka];return r("div",{key:y,className:oh("background"),style:{boxShadow:E?"0 0 0 2px var(--brand-500) inset, 0 4px 12px rgba(0,0,0,0.25)":"0 2px 8px rgba(0,0,0,0.15)"}},o&&v&&r("img",{alt:"",src:v,className:oh("avatar")}),r("div",{className:oh("name")},b))}),g=a>1?r("div",{className:oh("page-indicator-container")},Array.from({length:a}).map((y,b)=>r("div",{key:b,className:oh("page-indicator"),style:{background:b===l?"var(--brand-500)":"var(--interactive-muted)",opacity:b===l?1:.6}}))):null;return r("div",{className:oh("overlay-container")},r("div",{className:oh("cards-container")},r("div",{className:oh("cards")},m),g))}function Zft(){if(Kc.store.visualStyle!=="toast")return;let e=lc[Ka];if(!e)return;let{name:t}=w3e(e);Gk||(Gk=D.genId()),D.show({id:Gk,message:`Switching to: ${t}`,type:D.Type.MESSAGE,options:{position:D.Position.BOTTOM,duration:Kc.store.toastDurationMs}})}var ZJ,Kf,Yf,_P,lc,Ka,oh,Kc,Gk,qk,YJ,LP,E3e=x(()=>{"use strict";d();x3e();vn();Q();H();nt();at();$();B();ZJ="RDMSwitch_history",Kf=[],Yf=!1,_P=!1,lc=[],Ka=-1,oh=de("vc-rdms-"),Kc=R({visualStyle:{type:4,description:"Visual indicator style while cycling",options:[{label:"Overlay (Alt+Tab style)",value:"overlay",default:!0},{label:"Toast (status message)",value:"toast"},{label:"Off",value:"off"}]},overlayMode:{type:4,description:"Overlay content",options:[{label:"Row of recent",value:"row",default:!0},{label:"Current only",value:"current"}]},amountOfUsers:{type:5,description:"Number of users to show in overlay",markers:uo(10,50,10),stickToMarkers:!0,default:20},overlayRowLength:{type:5,description:"Number of recent DMs to show in row",markers:[3,4,5,6,7],default:5},overlayShowAvatars:{type:3,description:"Show avatars in overlay",default:!0},toastDurationMs:{type:5,description:"Toast hide delay (ms)",markers:[300,500,600,800,1e3,1500,2e3],default:600},clearRdms:{type:6,description:"Testing utility: Clear RDMS list",component:()=>r(U,{color:U.Colors.RED,onClick:async()=>{Kf=[],lc=[],Ka=-1,await Gt(ZJ,[]),D.show({id:D.genId(),type:D.Type.SUCCESS,message:"Cleared RDMS history"})}},'"Clear RDMS History')}}),Gk=null,qk=null,YJ=null;LP=k({name:"RecentDMSwitcher",description:"Ctrl+Tab between most recently used DMs (Ctrl+Shift+Tab reverse)",authors:[j.mmeta],settings:Kc,flux:{GUILD_SELECT({guildId:e}){if(Yf&&e){let t=lc[Ka];t&&pa.transitionToChannel(t)}},async CHANNEL_SELECT({channelId:e}){_P||e&&RP(e)&&QJ(e)}},async start(){let e=await zt(ZJ);Kf=Array.isArray(e)?v3e(e):[];let t=st.getChannelId();RP(t)&&QJ(t),document.addEventListener("keydown",y3e,!0),document.addEventListener("keyup",b3e,!0)},stop(){document.removeEventListener("keydown",y3e,!0),document.removeEventListener("keyup",b3e,!0),Yf=!1,_P=!1,lc=[],Ka=-1,Gk=null,Kc.store?.visualStyle==="overlay"&&k3e()}})});var OP,A3e=x(()=>{"use strict";d();OP=class{events;constructor(){this.events={}}on(t,o){this.events[t]||(this.events[t]=[]),this.events[t].push(o)}emit(t,o){this.events[t]&&this.events[t].forEach(n=>{n(o)})}off(t,o){this.events[t]&&(this.events[t]=this.events[t].filter(n=>n!==o))}clear(){this.events={}}once(t,o){let n=i=>{o(i),this.off(t,n)};this.on(t,n)}}});function C3e(){jt&&(jt.addEventListener("mousemove",e=>{bt.prevX=bt.x,bt.prevY=bt.y;let t=jt.getBoundingClientRect(),o=jt.width/t.width,n=jt.height/t.height;bt.x=(e.clientX-t.left)*o,bt.y=(e.clientY-t.top)*n,bt.dx=bt.x-bt.prevX,bt.dy=bt.y-bt.prevY,bt.event.emit("move",e)}),jt.addEventListener("mousedown",e=>{bt.down=!0,bt.event.emit("down",e)}),jt.addEventListener("mouseup",e=>{bt.down=!1,bt.event.emit("up",e)}),jt.addEventListener("mouseleave",e=>{bt.down=!1,bt.event.emit("up",e)}))}var bt,iS=x(()=>{"use strict";d();cm();A3e();bt={x:0,y:0,down:!1,dx:0,dy:0,prevX:0,prevY:0,event:new OP}});function jk(e,t,o,n=ar){n.beginPath(),n.arc(e,t,o,0,Math.PI*2),n.fill()}function Wk(e,t,o,n,i=ar){i.beginPath(),i.moveTo(e,t),i.lineTo(o,n),i.stroke()}function Kk(e,t,o,n){return Math.sqrt((o-e)**2+(n-t)**2)}function T3e(e){return e.right-e.left}function I3e(e){return e.bottom-e.top}async function D3e(e){return new Promise(t=>{let o=new Image;o.crossOrigin="anonymous",o.onload=()=>t(o),o.src=e})}function M3e(e){return new Promise(t=>{let o=document.createElement("canvas"),n=o.getContext("2d");o.width=e.width,o.height=e.height,n.drawImage(e,0,0),o.toBlob(i=>{i&&t(new File([i],"image.png",{type:"image/png"}))})})}var sS=x(()=>{"use strict";d();cm()});function Yk(){jt&&(Ct.top=0,Ct.left=0,Ct.right=jt.width,Ct.bottom=jt.height,XJ.update())}var Ct,XJ,FP=x(()=>{"use strict";d();cm();iS();sS();Ct={top:0,left:0,right:-1,bottom:-1};XJ={dragging:"",onMouseMove(){if(jt){if(this.dragging!==""){this.dragging.includes("left")&&(Ct.left=bt.x),this.dragging.includes("right")&&(Ct.right=bt.x),this.dragging.includes("top")&&(Ct.top=bt.y),this.dragging.includes("bottom")&&(Ct.bottom=bt.y),this.update();return}Kk(bt.x,bt.y,Ct.left,Ct.top)<30?bt.down?(Ct.left=bt.x,Ct.top=bt.y,this.dragging="left top"):jt.style.cursor="nwse-resize":Kk(bt.x,bt.y,Ct.right,Ct.top)<30?bt.down?(Ct.right=bt.x,Ct.top=bt.y,this.dragging="right top"):jt.style.cursor="nesw-resize":Kk(bt.x,bt.y,Ct.left,Ct.bottom)<30?bt.down?(Ct.left=bt.x,Ct.bottom=bt.y,this.dragging="left bottom"):jt.style.cursor="nesw-resize":Kk(bt.x,bt.y,Ct.right,Ct.bottom)<30?bt.down?(Ct.right=bt.x,Ct.bottom=bt.y,this.dragging="right bottom"):jt.style.cursor="nwse-resize":jt.style.cursor="default",this.dragging!==""&&this.update()}},onMouseUp(){this.dragging="",Ct.left>Ct.right&&([Ct.left,Ct.right]=[Ct.right,Ct.left]),Ct.top>Ct.bottom&&([Ct.top,Ct.bottom]=[Ct.bottom,Ct.top])},update(){jt&&(qr.clearRect(0,0,jt.width,jt.height),qr.fillStyle="rgba(0, 0, 0, 0.75)",qr.fillRect(0,0,jt.width,jt.height),qr.fillStyle="rgba(0, 0, 0, 0.25)",qr.clearRect(Ct.left,Ct.top,Ct.right-Ct.left,Ct.bottom-Ct.top),qr.fillRect(Ct.left,Ct.top,Ct.right-Ct.left,Ct.bottom-Ct.top),qr.fillStyle="white",qr.strokeStyle="white",qr.lineWidth=3,qr.strokeRect(Ct.left,Ct.top,Ct.right-Ct.left,Ct.bottom-Ct.top),jk(Ct.left,Ct.top,10,qr),jk(Ct.right,Ct.top,10,qr),jk(Ct.left,Ct.bottom,10,qr),jk(Ct.right,Ct.bottom,10,qr),Zu())},onMouseMoveCallback:void 0,onMouseUpCallback:void 0,selected(){jt&&(Ct.right===-1&&(Ct.right=jt.width),Ct.bottom===-1&&(Ct.bottom=jt.height),this.update(),this.onMouseMoveCallback=this.onMouseMove.bind(this),this.onMouseUpCallback=this.onMouseUp.bind(this),bt.event.on("move",this.onMouseMoveCallback),bt.event.on("up",this.onMouseUpCallback))},unselected(){jt&&(qr.clearRect(0,0,jt.width,jt.height),qr.fillStyle="rgba(0, 0, 0, 0.75)",qr.fillRect(0,0,jt.width,jt.height),qr.clearRect(Ct.left,Ct.top,Ct.right-Ct.left,Ct.bottom-Ct.top),Zu(),bt.event.off("move",this.onMouseMoveCallback),bt.event.off("up",this.onMouseUpCallback))}}});function N3e(){return new Promise(e=>{if(!jt||!Ws)return;Ws.clearRect(0,0,jt.width,jt.height),Ws.drawImage(cc,0,0),Ws.drawImage(ar.canvas,0,0),Ct.right===-1&&(Ct.right=jt.width),Ct.bottom===-1&&(Ct.bottom=jt.height);let t=document.createElement("canvas");t.width=T3e(Ct),t.height=I3e(Ct),t.getContext("2d").drawImage(jt,-Ct.left,-Ct.top),t.toBlob(n=>e(n)),Zu()})}function Zu(){!Ws||!jt||(Ws.clearRect(0,0,jt.width,jt.height),Ws.drawImage(cc,0,0),Ws.drawImage(ar.canvas,0,0),Ws.drawImage(es.canvas,0,0),Ws.drawImage(qr.canvas,0,0))}var jt,Ws,ar,es,qr,cc,B3e,cm=x(()=>{"use strict";d();iS();FP();sS();B();jt=null,Ws=null,ar=document.createElement("canvas").getContext("2d"),es=document.createElement("canvas").getContext("2d"),qr=document.createElement("canvas").getContext("2d");B3e=({file:e})=>{let t=kt(null);return se(()=>{cc=new Image,cc.src=URL.createObjectURL(e),cc.onload=()=>{jt=t.current,jt&&(jt.width=cc.width,jt.height=cc.height,ar.canvas.width=cc.width,ar.canvas.height=cc.height,es.canvas.width=cc.width,es.canvas.height=cc.height,qr.canvas.width=cc.width,qr.canvas.height=cc.height,Ws=jt.getContext("2d"),Ws.drawImage(cc,0,0),C3e())}}),r("canvas",{ref:t,className:"vc-remix-canvas"})}});var P3e,_3e=x(()=>{"use strict";d();cm();UP();iS();sS();P3e={onMouseMove(){!bt.down||!Ws||(Ws.lineCap="round",Ws.lineJoin="round",ar.lineWidth=aS,Wk(bt.prevX,bt.prevY,bt.x,bt.y),Zu())},selected(){bt.event.on("move",this.onMouseMove)},unselected(){bt.event.off("move",this.onMouseMove)}}});var R3e,L3e=x(()=>{"use strict";d();cm();UP();iS();R3e={onMouseMove(){bt.down&&(ar.lineCap="round",ar.lineJoin="round",ar.lineWidth=aS,ar.globalCompositeOperation="destination-out",ar.beginPath(),ar.moveTo(bt.prevX,bt.prevY),ar.lineTo(bt.x,bt.y),ar.stroke(),ar.globalCompositeOperation="source-over",Zu())},selected(){bt.event.on("move",this.onMouseMove)},unselected(){bt.event.off("move",this.onMouseMove)}}});function O3e(e){HP=e}function F3e(e){$P=e}var HP,$P,U3e,$3e=x(()=>{"use strict";d();cm();iS();sS();HP="rectangle";$P=!1;U3e={draggingFrom:{x:0,y:0},isDragging:!1,onMouseMove(){bt.down&&(this.isDragging||(this.draggingFrom.x=bt.x,this.draggingFrom.y=bt.y,this.isDragging=!0),es.clearRect(0,0,es.canvas.width,es.canvas.height),this.draw())},onMouseUp(){this.isDragging&&(es.clearRect(0,0,es.canvas.width,es.canvas.height),this.draw(ar),this.isDragging=!1)},onMouseMoveListener:null,onMouseUpListener:null,draw(e=es){switch(e.lineCap="butt",e.lineJoin="miter",HP){case"rectangle":$P?e.fillRect(this.draggingFrom.x,this.draggingFrom.y,bt.x-this.draggingFrom.x,bt.y-this.draggingFrom.y):e.strokeRect(this.draggingFrom.x,this.draggingFrom.y,bt.x-this.draggingFrom.x,bt.y-this.draggingFrom.y);break;case"ellipse":let t=bt.x-this.draggingFrom.x,o=bt.y-this.draggingFrom.y,n=this.draggingFrom.x+t/2,i=this.draggingFrom.y+o/2,s=Math.abs(t/2),a=Math.abs(o/2);e.beginPath(),e.ellipse(n,i,s,a,0,0,Math.PI*2),$P?e.fill():e.stroke();break;case"line":Wk(this.draggingFrom.x,this.draggingFrom.y,bt.x,bt.y,e);break;case"arrow":Wk(this.draggingFrom.x,this.draggingFrom.y,bt.x,bt.y,e);let l=Math.atan2(bt.y-this.draggingFrom.y,bt.x-this.draggingFrom.x),c=10;e.beginPath(),e.moveTo(bt.x,bt.y),e.lineTo(bt.x-c*Math.cos(l-Math.PI/6),bt.y-c*Math.sin(l-Math.PI/6)),e.lineTo(bt.x-c*Math.cos(l+Math.PI/6),bt.y-c*Math.sin(l+Math.PI/6)),e.closePath(),$P?e.fill():e.stroke();break}Zu()},selected(){this.onMouseMoveListener=this.onMouseMove.bind(this),this.onMouseUpListener=this.onMouseUp.bind(this),bt.event.on("move",this.onMouseMoveListener),bt.event.on("up",this.onMouseUpListener)},unselected(){es.clearRect(0,0,es.canvas.width,es.canvas.height),bt.event.off("move",this.onMouseMoveListener),bt.event.off("up",this.onMouseUpListener)}}});var H3e=x(()=>{});function Jft(e){return`#${e.toString(16).padStart(6,"0")}`}function z3e({name:e,onChange:t,color:o}){function n(i){t(Jft(i))}return r("section",null,r("div",{className:Xft("swatch-row")},r(si,{key:e,color:o,onChange:n})))}var Xft,G3e=x(()=>{"use strict";d();H3e();nt();B();Xft=de("vc-remix-settings-color-")});function Vft(e){return parseInt(e.replace("#",""),16)}var q3e,j3e,W3e,aS,JJ,K3e,UP=x(()=>{"use strict";d();wt();fa();_3e();FP();L3e();$3e();B();cm();G3e();q3e={none:void 0,brush:P3e,erase:R3e,crop:XJ,shape:U3e},j3e="none",W3e="#ff0000",aS=20,JJ=!1;K3e=()=>{let[e,t]=L(j3e),[o,n]=L(W3e),[i,s]=L(aS),[a,l]=L(JJ);function c(m){let g=e;t(m),u(g,m)}function u(m,g){q3e[m]?.unselected(),q3e[g]?.selected()}se(()=>{j3e=e,W3e=o,aS=i,JJ=a,ar.fillStyle=o,es.fillStyle=o,ar.strokeStyle=o,es.strokeStyle=o,ar.lineWidth=i,es.lineWidth=i,ar.lineCap="round",ar.lineJoin="round",F3e(JJ)},[e,o,i,a]);function p(){jt&&(ar.clearRect(0,0,jt.width,jt.height),es.clearRect(0,0,jt.width,jt.height),Yk(),e!=="crop"&&qr.clearRect(0,0,jt.width,jt.height),Zu())}return r("div",{className:"vc-remix-toolbar"},r("div",{className:"vc-remix-tools"},r(U,{className:e==="brush"?"tool-active":"",onClick:()=>c("brush")},"Brush"),r(U,{className:e==="erase"?"tool-active":"",onClick:()=>c("erase")},"Erase"),r(U,{className:e==="crop"?"tool-active":"",onClick:()=>c("crop")},"Crop"),r(U,{className:e==="shape"?"tool-active":"",onClick:()=>c("shape")},"Shape")),r("div",{className:"vc-remix-settings"},r("div",{className:"vc-remix-setting-section"},(e==="brush"||e==="shape")&&r(z3e,{name:"vc-remix-color-picker",onChange:n,color:Vft(o)}),(e==="brush"||e==="erase"||e==="shape")&&r(Tr,{minValue:1,maxValue:500,initialValue:i,onValueChange:s,markers:[1,50,100,150,200,250,300,350,400,450,500],hideBubble:!0})),e==="crop"&&r(U,{onClick:Yk},"Reset"),r("div",{className:"vc-remix-setting-section"},e==="shape"&&r(f,null,r(to,{select:O3e,isSelected:m=>m===HP,serialize:m=>String(m),placeholder:"Shape",options:["Rectangle","Ellipse","Line","Arrow"].map(m=>({label:m,value:m.toLowerCase()}))}),r(W,{className:"vc-remix-setting-switch"},"Fill ",r(os,{checked:a,onChange:l}))))),r("div",{className:"vc-remix-misc"},r(U,{onClick:p},"Clear")))}});var e0t,Y3e,Q3e=x(()=>{"use strict";d();fe();B();cm();UP();sS();e0t=De(".currentTarget.files","lineClamp:1"),Y3e=e=>{let[t,o]=L(void 0);return se(()=>{e.url&&D3e(e.url).then(n=>{M3e(n).then(i=>{o(new File([i],"remix.png"))})})},[]),r("div",{className:"vc-remix-editor"},!t&&r(e0t,{filename:void 0,placeholder:"Choose an image",buttonText:"Browse",filters:[{name:"Image",extensions:["png","jpeg"]}],onFileSelect:n=>o(n)}),t&&r(f,null,r(K3e,null),r(B3e,{file:t})))}});var Z3e,X3e=x(()=>{"use strict";d();Z3e=()=>r("svg",{className:"sendIcon__461ff","aria-hidden":"true",role:"img",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 24 24"},r("path",{fill:"currentColor",d:"M6.6 10.02 14 11.4a.6.6 0 0 1 0 1.18L6.6 14l-2.94 5.87a1.48 1.48 0 0 0 1.99 1.98l17.03-8.52a1.48 1.48 0 0 0 0-2.64L5.65 2.16a1.48 1.48 0 0 0-1.99 1.98l2.94 5.88Z"}))});function t0t(){Yk(),!(!Ws||!jt)&&(Ws.clearRect(0,0,jt.width,jt.height),ar.clearRect(0,0,jt.width,jt.height),es.clearRect(0,0,jt.width,jt.height),qr.clearRect(0,0,jt.width,jt.height))}async function VJ(e,t){t&&V3e(await N3e()),t0t(),e()}function zP({modalProps:e,close:t,url:o}){return r(Pe,{...e,size:"large"},r(je,null,r(Y,{size:"lg",weight:"semibold",style:{flexGrow:1}},"Remix"),r(Ut,{onClick:()=>VJ(t)})),r($e,null,r(Y3e,{url:o})),r(ht,{className:"vc-remix-modal-footer"},r(U,{onClick:()=>VJ(t,!0),className:"vc-remix-send"},r(Z3e,null)," Send"),r(U,{onClick:()=>VJ(t),color:U.Colors.RED},"Close")))}var J3e=x(()=>{"use strict";d();Et();at();B();eV();cm();Q3e();FP();X3e()});var tV,eTe=x(()=>{d();(window.VencordStyles??=new Map).set("src/equicordplugins/remix/styles.css",{name:"src/equicordplugins/remix/styles.css",source:`.vc-remix-toolbar {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 100%;
}

.vc-remix-tools,
.vc-remix-misc,
.vc-remix-settings {
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: center;
    margin-bottom: 5px;
    width: 100%;
    background-color: var(--modal-footer-background);
    padding: 10px 0;
    border-radius: 8px;
}

.vc-remix-settings {
    flex-direction: column;
}

.vc-remix-setting-section {
    display: flex;
    flex-direction: row;
    justify-content: center;
    width: 75%;
}

.vc-remix-toolbar button {
    min-width: 100px;
    height: 40px;
    background-color: var(--brand);
    color: var(--text-strong);
    border-radius: 8px;
    margin: 0 3px;
}

.vc-remix-canvas {
    max-width: 100%;
    max-height: 100%;
    min-width: 50%;
    min-height: 50%;
}

.vc-remix-editor {
    width: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding-top: 10px;
    padding-bottom: 10px;
}`,classNames:{},dom:null});tV="src/equicordplugins/remix/styles.css"});function V3e(e){let t=st.getChannelId(),o=ne.getChannel(t);r0t.getPendingReply(t)&&V.dispatch({type:"DELETE_PENDING_REPLY",currentChannelId:t});let i=new File([e],"remix.png",{type:"image/png"});ls.promptToUpload([i],o,sn.ChannelMessage)}var o0t,n0t,r0t,i0t,s0t,a0t,GP,eV=x(()=>{"use strict";d();Un();ps();ao();H();at();$();fe();B();J3e();eTe();o0t=Ds([".CREATE_STICKER_MODAL,","isDisplayingIndividualStickers"]),n0t=Ds(['type:"USER_SETTINGS_MODAL_OPEN"']),r0t=Ft("PendingReplyStore"),i0t=["image/png","image/jpeg","image/jpg","image/webp"],s0t=(e,t)=>{e.find(o=>o?.props?.id==="vc-remix")||e.push(r(M.MenuItem,{id:"vc-remix",label:"Remix",action:()=>{let o=Ee(n=>r(zP,{modalProps:n,close:()=>vo(o)}))}}))},a0t=(e,t)=>{let o=t.itemHref??t.itemSrc;if(!o||t.attachment&&!i0t.includes(t.attachment.content_type))return;let n=Qt("copy-text",e);if(!n||n.find(s=>s?.props?.id==="vc-remix"))return;let i=n.findIndex(s=>s?.props?.id==="copy-text");n.splice(i+1,0,r(M.MenuItem,{id:"vc-remix",label:"Remix",icon:Cm,action:()=>{let s=Ee(a=>r(zP,{modalProps:a,close:()=>vo(s),url:o}))}}))};GP=k({name:"RemixRevived",description:"Revives Remix and breings it to Desktop",authors:[j.MrDiamond,j.meowabyte],contextMenus:{"channel-attach":s0t,message:a0t},async start(){await o0t(),await n0t(),Or(tV)},stop(){Fr(tV)}})});function oV({className:e}){return r("svg",{viewBox:"0 -960 960 960",height:24,width:24,className:l0t("icon",e)},r("path",{fill:"currentColor",d:"m274-200 34 34q12 12 11.5 28T308-110q-12 12-28.5 12.5T251-109L148-212q-6-6-8.5-13t-2.5-15q0-8 2.5-15t8.5-13l103-103q12-12 28.5-11.5T308-370q11 12 11.5 28T308-314l-34 34h406v-120q0-17 11.5-28.5T720-440q17 0 28.5 11.5T760-400v120q0 33-23.5 56.5T680-200H274Zm412-480H280v120q0 17-11.5 28.5T240-520q-17 0-28.5-11.5T200-560v-120q0-33 23.5-56.5T280-760h406l-34-34q-12-12-11.5-28t11.5-28q12-12 28.5-12.5T709-851l103 103q6 6 8.5 13t2.5 15q0 8-2.5 15t-8.5 13L709-589q-12 12-28.5 11.5T652-590q-11-12-11.5-28t11.5-28l34-34Z"}))}function nTe(e){if(!e)return;let t="";t+=e.content;let o=[];e.attachments?.length&&o.push(...e.attachments.map(n=>({filename:n.filename,url:n.url}))),e.messageSnapshots&&e.messageSnapshots.forEach(n=>{n.message.attachments?.length&&o.push(...n.message.attachments.map(i=>({filename:i.filename,url:i.url})))}),o.length&&(t+=`
Attachments:`,o.forEach(n=>{t+=`
 - ${n.filename} (${n.url})`})),Na(e.channel_id,{content:t},!0,{allowedMentions:{parse:[],replied_user:!1},messageReference:qP?{channel_id:e.channel_id,message_id:e.id}:void 0,stickerIds:e.stickerItems.map(n=>n.id)})}var l0t,qP,c0t,tTe,oTe,jP,rTe=x(()=>{"use strict";d();Un();Q();H();nt();mt();qo();$();B();l0t=de("vc-repeat-");qP=!1;c0t=(e,{msg:t})=>{if(!t)return null;let o=Qt("copy-text",e);if(!o)return;let n=Vo();se(()=>{let i=()=>{n()};return window.addEventListener("keydown",i),window.addEventListener("keyup",i),()=>{window.removeEventListener("keydown",i),window.removeEventListener("keyup",i)}},[]),o.splice(o.findIndex(i=>i?.props?.id==="reply")+1,0,r(M.MenuItem,{id:"vc-repeat",label:qP?"Repeat and Reply":"Repeat",icon:oV,action:async()=>nTe(t)}))},tTe=e=>{e.key==="Shift"&&(qP=!1)},oTe=e=>{e.key==="Shift"&&(qP=!0)};jn("RepeatMessages","RepeatMessage");jP=k({name:"RepeatMessages",description:"Allows you to repeat messages quickly. If you hold shift while clicking the Repeat option, it will reply to the message.",authors:[j.Tolgchu,w.thororen],contextMenus:{message:c0t},messagePopoverButton:{icon:oV,render(e){return e?{label:"Repeat (Click) / Repeat and Reply (Shift + Click)",icon:oV,message:e,channel:ne.getChannel(e.channel_id),onClick:async()=>nTe(e)}:null}},start(){document.addEventListener("keyup",tTe),document.addEventListener("keydown",oTe)},stop(){document.removeEventListener("keyup",tTe),document.removeEventListener("keydown",oTe)}})});var Qk,WP,iTe=x(()=>{"use strict";d();Q();H();$();B();Qk=R({alwaysPingOnReply:{type:3,description:"Always get pinged when someone replies to your messages",default:!1},replyPingWhitelist:{type:0,description:"Comma-separated list of User IDs to always receive reply pings from",default:"",disabled:()=>Qk.store.alwaysPingOnReply}}),WP=k({name:"ReplyPingControl",description:"Control whether to always or never get pinged on message replies, with a whitelist feature",authors:[w.ant0n,j.MrDiamond],settings:Qk,patches:[{find:"_channelMessages",replacement:{match:/receiveMessage\((\i)\)\{/,replace:"$&$self.modifyMentions($1);"}}],modifyMentions(e){let t=z.getCurrentUser();if(e.author.id===t.id)return;let o=this.getRepliedMessage(e);if(!o||o.author.id!==t.id)return;let n=Qk.store.replyPingWhitelist.split(",").map(s=>s.trim());Qk.store.replyPingWhitelist.includes(e.author.id)||Qk.store.alwaysPingOnReply?e.mentions.some(s=>s.id===t.id)||e.mentions.push(t):e.mentions=e.mentions.filter(s=>s.id!==t.id)},getRepliedMessage(e){let t=e.message_reference;return t&&Rt.getMessage(t.channel_id,t.message_id)}})});var sTe=x(()=>{});var KP,aTe=x(()=>{"use strict";d();sTe();H();$();KP=k({authors:[j.cassie,j.mochienya,j.secp192k1],name:"RichMagnetLinks",description:"Renders magnet links like message links",patches:[{find:"AUTO_MODERATION_SYSTEM_MESSAGE_RULES:",replacement:{match:/mention:\{order:(\i\.\i\.order)/,replace:"magnet:$self.magnetLink($1),$&"}},{find:'"flattenMarkdown"',replacement:{match:/mention:{type:/,replace:'magnet:{type:"inlineObject"},$&'}}],magnetLink:e=>({order:e,requiredFirstCharacters:["magnet:?"],match(t){return/^magnet:\?[\w\W]+?(?=\s|$)/.exec(t)},parse(t,o,n){if(!n.messageId||n.isInsideOfLink)return{type:"text",content:t[0]};let i=t[0],s="unknown filename";try{let a=i.split("?")[1];if(a){let c=new URLSearchParams(a).get("dn");c&&(s=decodeURIComponent(c.replace(/\+/g," ")))}}catch(a){console.error("Failed to parse magnet link",a)}return{type:"magnet",filename:s,magnetLink:i}},react({magnetLink:t,filename:o}){return r("a",{href:t,className:"vc-magnet-link interactive"},r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 16 16"},r("path",{d:"M15 12h-4v3h4zM5 12H1v3h4zM0 8a8 8 0 1 1 16 0v8h-6V8a2 2 0 1 0-4 0v8H0z"})),o)}})})});function nV(e){return/^\d{17,20}$/.test(e)&&!Number.isNaN(ai.extractTimestamp(e))}function lTe(){let e=cr.getActivities(z.getCurrentUser().id);return r(f,null,r(so,null,"IDs of currently running activities"),e.length===0?r(W,null,"No running activities"):e.map(t=>(t.flags&48)===48?null:r(W,null,t.name,": ",t.application_id)),r(so,{className:Z.top8},"Available variables"),r(W,null,"In all fields (except stream URL), you can put in variables that'll automatically be replaced by their original content:",r("pre",{style:{fontFamily:"monospace"}},":name:, :details:, :state:",r("br",null),":large_image:, :large_text:, :small_image:, :small_text:")),r(so,{className:Z.top8},"More details"),r(W,null,"Leave a field empty to leave it as is.",r("br",null),'Set a field to "null" to hide it on the presence.',r("br",null),"You may need to reload Discord for changes to apply."))}function cTe({appIds:e,update:t,save:o}){async function n(i,s,a){s===e.length-1&&e.push(YP()),e[s][a]=i,o(),t()}return r(f,null,e.map((i,s)=>r(cn,{style:{padding:"1em",opacity:i.enabled?"":"60%"},key:s},nV(i.appId)?r(fn,{title:"Apply edits to app",value:i.enabled,onChange:a=>{n(a,s,"enabled")},className:Z.bottom8,hideBorder:!0}):r(so,null,"Add new application"),r(re,{className:`${Z.top8} ${Z.bottom8}`},"Application ID"),r(bp,{value:i.appId,onChange:async a=>{n(a,s,"appId")},validate:a=>!a||nV(a)||"Invalid application ID"}),nV(i.appId)&&r(f,null,r(re,{className:Z.top8},"New activity type"),r(to,{options:[{label:"Playing",value:0},{label:"Watching",value:3},{label:"Listening",value:2},{label:"Competing",value:5},{label:"Streaming",value:1}],select:a=>{n(a,s,"newActivityType")},className:Z.top8,isSelected:a=>i.newActivityType===a,serialize:Nl}),i.newActivityType===1&&r(f,null,r(re,{className:`${Z.top8} ${Z.bottom8}`},"Stream URL (must be YouTube or Twitch)"),r(bp,{value:i.newStreamUrl,onChange:async a=>{n(a,s,"newStreamUrl")},validate:a=>/https?:\/\/(www\.)?(twitch\.tv|youtube\.com)\/\w+/.test(a)||"Invalid stream URL"})),i.newActivityType!==1&&r(f,null,r(re,{className:Z.top8},"New name ",i.newActivityType===0&&"(first line)"),r(qe,{className:Z.top8,value:i.newName,onChange:async a=>{n(a,s,"newName")}})),r(re,{className:Z.top8},"New details ",i.newActivityType===0?"(second line)":"(first line)"),r(qe,{className:Z.top8,value:i.newDetails,onChange:async a=>{n(a,s,"newDetails")}}),r(re,{className:Z.top8},"New state ",i.newActivityType===0?"(third line)":"(second line)"),r(qe,{className:Z.top8,value:i.newState,onChange:async a=>{n(a,s,"newState")}}),!i.disableAssets&&r(f,null,r(W,{style:{fontSize:"1.05rem",fontWeight:"500"},className:Z.top8},"Large image"),r(re,{className:Z.top8},"Text ",i.newActivityType!==0&&"(also third line)"),r(qe,{className:Z.top8,value:i.newLargeImageText,onChange:async a=>{n(a,s,"newLargeImageText")}}),r(re,{className:Z.top8},"URL"),r(qe,{className:Z.top8,value:i.newLargeImageUrl,onChange:async a=>{n(a,s,"newLargeImageUrl")}}),r(W,{style:{fontSize:"1.05rem",fontWeight:"500"},className:Z.top8},"Small image"),r(re,{className:Z.top8},"Text"),r(qe,{className:Z.top8,value:i.newSmallImageText,onChange:async a=>{n(a,s,"newSmallImageText")}}),r(re,{className:Z.top8},"URL"),r(qe,{className:Z.top8,value:i.newSmallImageUrl,onChange:async a=>{n(a,s,"newSmallImageUrl")}})),r(fn,{title:"Hide assets (large & small images)",value:i.disableAssets,onChange:a=>{n(a,s,"disableAssets")},className:Z.top8,hideBorder:!0}),r(fn,{title:"Hide timestamps",value:i.disableTimestamps,onChange:a=>{n(a,s,"disableTimestamps")},className:Z.top8,hideBorder:!0})))))}var uTe=x(()=>{"use strict";d();fs();X1();Qs();ut();wt();co();xt();hr();B();rV()});var dTe,YP,QP,u0t,ZP,rV=x(()=>{"use strict";d();dr();Q();H();qo();$();hr();uTe();dTe="ReplaceActivityType_appids",YP=()=>({appId:"",enabled:!0,newActivityType:0,newName:"",newDetails:"",newState:"",newLargeImageUrl:"",newLargeImageText:"",newSmallImageUrl:"",newSmallImageText:"",newStreamUrl:"",disableTimestamps:!1,disableAssets:!1}),QP=[YP()],u0t=R({replacedAppIds:{type:6,description:"",component:()=>{let e=Vo();return r(f,null,r(cTe,{appIds:QP,update:e,save:async()=>Oe.set(dTe,QP)}))}}}),ZP=k({name:"RPCEditor",description:"Edit the type and content of any Rich Presence",authors:[w.Nyako,w.nin0dev],patches:[{find:'"LocalActivityStore"',replacement:{match:/\i\(\i\)\{.{0,25}activity:(\i).*?\}=\i;/,replace:"$&$self.patchActivity($1);"}}],settings:u0t,settingsAboutComponent:()=>r(lTe,null),async start(){QP=await Oe.get(dTe)??[YP()]},parseField(e,t){return e==="null"?"":e.replaceAll(":name:",t.name).replaceAll(":details:",t.details??"").replaceAll(":state:",t.state??"").replaceAll(":large_image:",t.assets?.large_image??"").replaceAll(":large_text:",t.assets?.large_text??"").replaceAll(":small_image:",t.assets?.small_image??"").replaceAll(":small_text:",t.assets?.small_text??"")},patchActivity(e){e&&QP.forEach(t=>{if(t.enabled&&t.appId===e.application_id){let o={...e};e.type=t.newActivityType,t.newName&&(e.name=this.parseField(t.newName,o)),t.newActivityType===1&&t.newStreamUrl&&(e.url=t.newStreamUrl),t.newDetails&&(e.details=this.parseField(t.newDetails,o)),t.newState&&(e.state=this.parseField(t.newState,o)),e.assets||(e.assets={}),t.newLargeImageText&&(e.assets.large_text=this.parseField(t.newLargeImageText,o)),t.newLargeImageUrl&&(e.assets.large_image=this.parseField(t.newLargeImageUrl,o)),t.newSmallImageText&&(e.assets.small_text=this.parseField(t.newSmallImageText,o)),t.newSmallImageUrl&&(e.assets.small_image=this.parseField(t.newSmallImageUrl,o)),t.disableAssets&&(e.assets={}),t.disableTimestamps&&(e.timestamps={})}})}})});async function pTe(e){return/https?:\/\/(cdn|media)\.discordapp\.(com|net)\/attachments\//.test(e)?"mp:"+e.replace(/https?:\/\/(cdn|media)\.discordapp\.(com|net)\//,""):(await zi.fetchAssetIds("0",[e]))[0]}async function XP(e,t,o){e||!Xd.store.lastFMApiKey.length&&Xd.store.statDisplay===2&&V.dispatch({type:"LOCAL_ACTIVITY_UPDATE",activity:null,socketId:"RPCStats"});let n={application_id:"0",name:Xd.store.RPCTitle,details:t||"No info right now :(",type:0,flags:1,assets:{large_image:o==null||!Xd.store.albumCoverImage?await pTe(Xd.store.assetURL.length?Xd.store.assetURL:z.getCurrentUser().getAvatarURL()):await pTe(o)}};V.dispatch({type:"LOCAL_ACTIVITY_UPDATE",activity:e?null:n,socketId:"RPCStats"})}function JP(){let e=new Date,t=e.getFullYear(),o=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");return`${t}-${o}-${n}`}async function um(){switch(Xd.store.statDisplay){case 0:let e;await Oe.get("RPCStatsDate")===JP()?e=await Oe.get("RPCStatsMessages"):(await Oe.set("RPCStatsDate",JP()),await Oe.set("RPCStatsMessages",0),e=0),XP(!1,`Messages sent today: ${e}
`);break;case 1:let t=await Oe.get("RPCStatsAllTimeMessages");t||(Oe.set("RPCStatsAllTimeMessages",0),t=0),XP(!1,`Messages sent all time: ${t}
`);break;case 2:let o=await d0t.fetchTopAlbum({apiKey:Xd.store.lastFMApiKey,user:Xd.store.lastFMUsername,period:"7day"});if(o==null)return;let n=JSON.parse(o);console.log(n),XP(!1,Xd.store.lastFMStatFormat.replace("$album",n.albumName).replace("$artist",n.artistName),n?.albumCoverUrl);break}}function p0t(){let e=JP();e!==mTe&&(mTe=e)}var Xd,d0t,VP,mTe,fTe=x(()=>{"use strict";d();dr();Q();H();$();B();Xd=R({assetURL:{type:0,description:"The image to use for your rpc. Your profile picture is used if left blank",default:"",restartNeeded:!1,onChange:()=>{um()}},RPCTitle:{type:0,description:"The title for the rpc",default:"RPCStats",restartNeeded:!1,onChange:()=>{um()}},statDisplay:{type:4,description:"What should the rpc display? (you can only have one line i'm pretty sure)",options:[{value:0,label:"The amount of messages sent today",default:!0},{value:1,label:"The amount of messages sent all time"},{value:2,label:"Your most listened album for the week"}],restartNeeded:!1,onChange:()=>{um()}},lastFMApiKey:{type:0,description:"Your last.fm API key",default:"",restartNeeded:!1,onChange:()=>{um()}},lastFMUsername:{type:0,description:"Your last.fm username",default:"",restartNeeded:!1,onChange:()=>{um()}},albumCoverImage:{type:3,description:"Should the album cover image be used as the rpc image? (if you have the last fm display chosen)",default:!0,restartNeeded:!1,onChange:()=>{um()}},lastFMStatFormat:{type:0,description:"How should the last fm stat be formatted? $album is replaced with the album name, and $artist is replaced with the artist name",default:'Top album this week: "$album - $artist"',restartNeeded:!1,onChange:()=>{um()}}});d0t=VencordNative.pluginHelpers.RPCStats;VP=k({name:"RPCStats",description:"Displays stats about your activity as an rpc",authors:[w.Samwich],async start(){um(),setInterval(()=>{p0t(),um()},1e3)},settings:Xd,stop(){XP(!0)},flux:{async MESSAGE_CREATE({optimistic:e,type:t,message:o}){e||t!=="MESSAGE_CREATE"||o.state!=="SENDING"&&o.author.id===z.getCurrentUser().id&&(await Oe.set("RPCStatsMessages",await Oe.get("RPCStatsMessages")+1),await Oe.set("RPCStatsAllTimeMessages",await Oe.get("RPCStatsAllTimeMessages")+1),um())}}}),mTe=JP()});async function xTe(e,t){try{{let o=new File([e],t,{type:"text/plain"});su(o)}qt({title:"Save Favorite GIFs",body:`Saved GIFs successfully as ${t}`,color:"var(--text-positive)"})}catch(o){console.error(o),qt({title:"Save Favorite GIFs",body:"Failed to save GIFs",color:"var(--text-danger)"})}}function yTe(){return Object.keys(al.FrecencyUserSettingsActionCreators.getCurrentValue().favoriteGifs.gifs)}async function gTe(){let e=`favorite-gifs-${new Date().toISOString().split("T")[0]}.txt`,t=yTe();if(t.length===0){qt({title:"Save Favorite GIFs",body:"No favorite GIFs found..?"});return}let o=t.join(`
`);await xTe(o,e)}async function m0t(){let e=yTe();if(e.length===0){qt({title:"Save Favorite GIFs",body:"No favorite GIFs found?"});return}qt({title:"Save Favorite GIFs",body:`Testing ${e.length} GIFs.. This may take a moment...`});let t=[];if(await Promise.all(e.map(async i=>{try{(await fetch(i,{method:"HEAD"})).ok&&t.push(i)}catch{try{(await fetch(i)).ok&&t.push(i)}catch{}}})),t.length===0){qt({title:"Save Favorite GIFs",body:"None of your saved GIFs appear to be working."});return}let o=`working-gifs-${new Date().toISOString().split("T")[0]}.txt`,n=t.join(`
`);await xTe(n,o),qt({title:"Save Favorite GIFs",body:`Filtered ${e.length-t.length} possibly broken GIFs. Saved ${t.length} working GIFs.`,color:"var(--text-positive)"})}var hTe,e_,bTe=x(()=>{"use strict";d();yi();_a();Wo();Q();Vb();H();$();rd();B();hTe=R({showToolboxButton:{description:"Show 'Save Favorite GIFs' button in Equicord Toolbox (Requires Reload)",type:3,default:!0,restartNeeded:!0,get hidden(){return!yt(Lu.name)}}}),e_=k({name:"SaveFavoriteGIFs",description:"Export favorited GIF urls",authors:[w.thororen],settings:hTe,commands:[{name:"savegifs",description:"Save all favorite GIF urls to a text file",inputType:0,execute:gTe},{name:"saveworkinggifs",description:"Test all favorite GIFs and only save the ones that are still working",inputType:0,execute:m0t}],toolboxActions(){let{showToolboxButton:e}=hTe.use(["showToolboxButton"]);return e?r(M.MenuItem,{id:"save-favorite-gifs-toolbox",label:"Save Favorite GIFs",action:gTe}):null}})});var vTe=x(()=>{});function lS({width:e=20,height:t=20,className:o,color:n}){return r("svg",{"aria-hidden":"true",role:"img",width:e,height:t,className:o,viewBox:"0 0 24 24"},r("g",{fill:"none",fillRule:"evenodd"},r("path",{fill:n??"currentColor",d:"M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM9 10H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm-8 4H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2z"}),r("rect",{width:"24",height:"24"})))}function t_({width:e=20,height:t=20,className:o}){return r("svg",{"aria-hidden":"true",role:"img",width:e,height:t,className:o,viewBox:"0 0 24 24",fill:"currentColor"},r("path",{d:"M15 1H9v2h6V1zm-4 13h2V8h-2v6zm8.03-6.61l1.42-1.42c-.43-.51-.9-.99-1.41-1.41l-1.42 1.42A8.962 8.962 0 0 0 12 4c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-2.12-.74-4.07-1.97-5.61zM12 20c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"}))}function STe(){return r("svg",{width:"20",height:"20",viewBox:"0 0 24 24"},r("path",{fill:"currentColor",d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"}))}var cS=x(()=>{"use strict";d()});async function ATe(){let e=await zt(ETe);Ya=Array.isArray(e)?e:[]}async function r_(){await Gt(ETe,Ya)}function aV(){return[...Ya]}function Xk(e){let t=ne.getChannel(e);if(!t)return{name:"Unknown",avatar:""};if(t.isDM()){let n=t.recipients?.[0]?z.getUser(t.recipients[0]):null;return n?{name:n.globalName??n.username,avatar:To.getUserAvatarURL(n,!0,64)}:{name:"DM",avatar:""}}if(t.isGroupDM()||t.isMultiUserDM())return{name:t.name||"Group DM",avatar:To.getChannelIconURL(t)??""};let o=ct.getGuild(t.guild_id);return{name:t.name||"Channel",avatar:o?To.getGuildIconURL({id:o.id,icon:o.icon,canAnimate:!0,size:512})??"":""}}function h0t(e){return new Promise(t=>{let o=new Image;o.onload=()=>t({width:o.naturalWidth,height:o.naturalHeight}),o.onerror=()=>t({width:400,height:300}),o.src=e})}function x0t(e){return new Promise(t=>{let o=document.createElement("video");o.preload="metadata",o.muted=!0,o.playsInline=!0;let n=setTimeout(()=>{o.src="",t(null)},5e3);o.onloadeddata=()=>{clearTimeout(n),o.currentTime=0},o.onerror=()=>{clearTimeout(n),t(null)},o.onseeked=()=>{let i=document.createElement("canvas");i.width=o.videoWidth,i.height=o.videoHeight;let s=i.getContext("2d");if(!s){t(null),o.src="";return}s.drawImage(o,0,0);let a=Math.min(i.width,i.height)*.2,l=i.width/2,c=i.height/2;s.fillStyle="rgba(0, 0, 0, 0.6)",s.beginPath(),s.arc(l,c,a,0,Math.PI*2),s.fill(),s.fillStyle="white",s.beginPath(),s.moveTo(l-a*.3,c-a*.4),s.lineTo(l-a*.3,c+a*.4),s.lineTo(l+a*.5,c),s.closePath(),s.fill(),t({width:o.videoWidth,height:o.videoHeight,previewUrl:i.toDataURL("image/png")}),o.src=""},o.src=e})}async function y0t(e){let t=[];for(let o=0;o<e.length;o++){let n=e[o],i=`data:${n.type};base64,${n.data}`,s={id:String(o),filename:n.filename,size:Math.ceil(n.data.length*.75),content_type:n.type};if(n.type.startsWith("image/")){let a=await h0t(i);Object.assign(s,{url:i,proxy_url:i,...a})}else if(["video/mp4","video/webm","video/ogg"].includes(n.type)){let a=await x0t(i);a&&Object.assign(s,{content_type:"image/png",url:a.previewUrl,proxy_url:a.previewUrl,width:a.width,height:a.height,filename:n.filename.replace(/\.[^.]+$/,"_preview.png")})}t.push(s)}return t}async function lV(e){if(!nh.store.showPhantomMessages)return;let t=z.getCurrentUser();if(!t)return;let o=`scheduled-${e.id}`;rh.set(o,{scheduledTime:e.scheduledTime,messageId:e.id,channelId:e.channelId}),e.reactions?.length&&uS.set(e.id,[...e.reactions]);let n=e.attachments?.length?await y0t(e.attachments):[],i=(e.reactions??[]).map(a=>({emoji:a.emoji,count:a.count,count_details:{burst:0,normal:a.count},me:!0,me_burst:!1,burst_count:0,burst_colors:[],burst_me:!1}));(Rt.hasPresent(e.channelId)?Promise.resolve():Fn.fetchMessages({channelId:e.channelId})).then(()=>{V.dispatch({type:"MESSAGE_CREATE",channelId:e.channelId,message:{id:o,channel_id:e.channelId,author:{id:t.id,username:t.username,discriminator:t.discriminator||"0",avatar:t.avatar,global_name:t.globalName??null,bot:!1},content:e.content,timestamp:new Date().toISOString(),edited_timestamp:null,tts:!1,mention_everyone:!1,mentions:[],mention_roles:[],attachments:n,embeds:[],pinned:!1,type:0,flags:0,components:[],reactions:i,nonce:o,scheduledMessageData:{scheduledTime:e.scheduledTime,messageId:e.id}},optimistic:!0,sendMessageOptions:{},isPushNotification:!1}),b0t(e.channelId,o)}).catch(()=>{})}function b0t(e,t){let o=(n=0)=>{let i=document.getElementById(`chat-messages-${e}-${t}`);return i?(i.classList.add("vc-scheduled-msg-phantom"),!0):(n<20&&setTimeout(()=>o(n+1),100+n*50),!1)};setTimeout(()=>o(),50)}function i_(e){let t=`scheduled-${e.id}`;rh.delete(t),V.dispatch({type:"MESSAGE_DELETE",channelId:e.channelId,id:t,mlDeleted:!0})}function CTe(e,t,o){let n=sV.get(e);n&&clearTimeout(n);let i=setTimeout(()=>{sV.delete(e),v0t(e,t,o)},g0t);sV.set(e,i)}function v0t(e,t,o){Aa.info("doRecreatePhantomMessage: Recreating phantom message with",o.length,"reactions");let n=rh.get(e);if(!n){Aa.warn("doRecreatePhantomMessage: No phantom data found");return}let i=Ya.find(s=>s.id===n.messageId);if(!i){Aa.warn("doRecreatePhantomMessage: No scheduled message found");return}V.dispatch({type:"MESSAGE_DELETE",channelId:t,id:e,mlDeleted:!0}),setTimeout(()=>{i.reactions=o,lV(i)},50)}async function S0t(e,t){return new Promise(o=>{let n=Uint8Array.from(atob(t.data),a=>a.charCodeAt(0)),i=new File([n],t.filename,{type:t.type}),s=new f0t({file:i,platform:1},e);s.on("complete",()=>o({id:"",filename:s.filename,uploaded_filename:s.uploadedFilename})),s.on("error",()=>o(null)),s.upload()})}async function wTe(e,t,o){await Ht.post({url:jo.Endpoints.MESSAGES(e),body:{content:t,nonce:ai.fromTimestamp(Date.now()),...o?.length?{channel_id:e,sticker_ids:[],type:0,attachments:o}:{}}})}async function w0t(e,t,o){for(let n of o){let i=n.emoji.id?`${n.emoji.name}:${n.emoji.id}`:encodeURIComponent(n.emoji.name);for(let s=0;s<5;s++)try{await Ht.put({url:`/channels/${e}/messages/${t}/reactions/${i}/@me`});break}catch(a){let l=a;if(l.status===429||l.body?.retry_after)await new Promise(c=>setTimeout(c,(l.body?.retry_after??1)*1e3+100));else if(l.status===404)await new Promise(c=>setTimeout(c,1e3*(s+1)));else break}await new Promise(s=>setTimeout(s,350))}}async function k0t(e){try{if(!ne.getChannel(e.channelId))return!1;let t=uS.get(e.id)??e.reactions??[];if(i_(e),uS.delete(e.id),e.attachments?.length){let o=(await Promise.all(e.attachments.map((n,i)=>S0t(e.channelId,n).then(s=>s?{...s,id:String(i)}:null)))).filter(Boolean);await wTe(e.channelId,e.content,o.length?o:void 0)}else await wTe(e.channelId,e.content);if(t.length){await new Promise(i=>setTimeout(i,1500));let o=Rt.getMessages(e.channelId)?._array??[],n=z.getCurrentUser()?.id;for(let i=o.length-1;i>=Math.max(0,o.length-10);i--){let s=o[i];if(s?.author?.id===n&&s?.content===e.content&&!s?.id?.startsWith("scheduled-")){await w0t(e.channelId,s.id,t);break}}}return nh.store.showNotifications&&Re(`Scheduled message sent to ${Xk(e.channelId).name}`,D.Type.SUCCESS),!0}catch{return nh.store.showNotifications&&Re("Failed to send scheduled message",D.Type.FAILURE),!1}}async function TTe(e,t,o,n){let i=Math.floor(o/6e4)*6e4;if(Ya.filter(l=>l.channelId===e&&l.scheduledTime>=i&&l.scheduledTime<i+6e4).length>=nh.store.maxMessagesPerMinute)return{success:!1,error:`Maximum of ${nh.store.maxMessagesPerMinute} messages per channel per minute reached`};let a={id:`${Date.now()}-${Math.random().toString(36).slice(2,9)}`,channelId:e,content:t,scheduledTime:o,createdAt:Date.now(),attachments:n};return Ya.push(a),Ya.sort((l,c)=>l.scheduledTime-c.scheduledTime),await r_(),lV(a),{success:!0}}async function cV(e){let t=Ya.find(o=>o.id===e);t&&i_(t),Ya=Ya.filter(o=>o.id!==e),await r_()}async function ITe(){for(let e of Ya)i_(e);Ya=[],await r_()}async function kTe(){if(!iV){iV=!0;try{let e=Date.now(),t=Ya.filter(o=>o.scheduledTime<=e);for(let o of t)await cV(o.id),await k0t(o)}finally{iV=!1}}}function uV(){Zk||(kTe(),Zk=setInterval(kTe,nh.store.checkIntervalSeconds*1e3))}function dV(){Zk&&(clearInterval(Zk),Zk=null)}async function DTe(){for(let e of Ya)await lV(e)}function MTe(){for(let e of Ya)i_(e)}function NTe(e,t,o,n){Aa.info("modifyReaction called:",{messageId:e,emoji:o.name,delta:n});let i=rh.get(e);if(!i){Aa.warn("modifyReaction: No phantom data found for messageId =",e);return}let s=Ya.find(c=>c.id===i.messageId);if(!s){Aa.warn("modifyReaction: No scheduled message found for id =",i.messageId);return}let a=uS.get(i.messageId)??[],l=a.findIndex(c=>c.emoji.name===o.name&&c.emoji.id===o.id);Aa.info("modifyReaction: Current reactions count =",a.length,"found at idx =",l),n>0?l>=0?a[l].count+=n:a.push({emoji:{id:o.id??null,name:o.name,animated:o.animated},count:1}):l>=0&&(a[l].count+=n,a[l].count<=0&&a.splice(l,1)),uS.set(i.messageId,a),s.reactions=a,r_(),Aa.info("modifyReaction: Updated reactions count =",a.length,"calling updatePhantomReactions"),CTe(e,t,a)}function BTe(e,t){return`${e}:${t.name}:${t.id??""}`}function PTe(e,t,o){let n=BTe(e,o),i=o_.get(n),s=Date.now();if(i&&i.action==="add"&&s-i.timestamp<n_){Aa.info("handleReactionAdd: Ignoring duplicate ADD within cooldown",{messageId:e,emoji:o.name});return}if(i&&i.action==="remove"&&s-i.timestamp<n_){Aa.info("handleReactionAdd: Ignoring Discord revert (ADD after our REMOVE)",{messageId:e,emoji:o.name}),s_(e,t);return}Aa.info("handleReactionAdd: Processing",{messageId:e,emoji:o.name}),o_.set(n,{action:"add",timestamp:s}),NTe(e,t,o,1)}function _Te(e,t,o){let n=BTe(e,o),i=o_.get(n),s=Date.now();if(i&&i.action==="remove"&&s-i.timestamp<n_){Aa.info("handleReactionRemove: Ignoring duplicate REMOVE within cooldown",{messageId:e,emoji:o.name});return}if(i&&i.action==="add"&&s-i.timestamp<n_){Aa.info("handleReactionRemove: Ignoring Discord revert (REMOVE after our ADD)",{messageId:e,emoji:o.name}),s_(e,t);return}Aa.info("handleReactionRemove: Processing",{messageId:e,emoji:o.name}),o_.set(n,{action:"remove",timestamp:s}),NTe(e,t,o,-1)}function RTe(e){return rh.has(e)}function s_(e,t){Aa.info("resyncPhantomReactions:",{messageId:e});let o=rh.get(e);if(!o){Aa.warn("resyncPhantomReactions: No phantom data for messageId =",e);return}let n=uS.get(o.messageId)??[];Aa.info("resyncPhantomReactions: Found",n.length,"reactions to sync"),CTe(e,t,n)}var Aa,f0t,ETe,Ya,Zk,iV,rh,uS,o_,n_,sV,g0t,Jk=x(()=>{"use strict";d();vn();At();hr();fe();B();pV();Aa=new ke("ScheduledMessages"),f0t=An(e=>e.prototype?.trackUploadFinished),ETe="ScheduledMessages_queue",Ya=[],Zk=null,iV=!1,rh=new Map,uS=new Map,o_=new Map,n_=2e3,sV=new Map,g0t=300});function E0t({rootProps:e,close:t}){let[o,n]=L(aV()),i=async a=>{await cV(a),n(aV()),Re("Scheduled message removed",D.Type.SUCCESS)},s=async()=>{await ITe(),n([]),Re("All scheduled messages cleared",D.Type.SUCCESS)};return r(Pe,{...e},r(je,{className:Yc("modal-header")},r(re,{tag:"h2",className:Yc("modal-title")},"Scheduled Messages"),o.length>0&&r(Me,{size:"small",variant:"dangerPrimary",onClick:s},"Clear All"),r(Ut,{onClick:t})),r($e,{className:Yc("modal-content")},o.length?r("div",{className:Yc("message-list")},o.map(a=>{let{name:l,avatar:c}=Xk(a.channelId),u=ne.getChannel(a.channelId);if(!u)return null;let p=u.isPrivate(),m=a.content.length>200?a.content.slice(0,200)+"...":a.content;return r("div",{key:a.id,className:Yc("message-item")},r("div",{className:Yc("message-info")},r("div",{className:Yc("message-header")},c&&r("img",{src:c,className:Yc("message-avatar"),alt:""}),r("span",{className:Yc("message-channel")},p?l:`#${l}`)),r("div",{className:Yc("message-time")},r(t_,{width:14,height:14}),r("span",null,new Date(a.scheduledTime).toLocaleString())),r("div",{className:Yc("message-content")},m)),r(Me,{size:"small",variant:"dangerPrimary",onClick:()=>i(a.id)},"Delete"))})):r("div",{className:Yc("empty-state")},r(lS,{width:48,height:48}),r("span",null,"No scheduled messages"))),r(ht,{className:Yc("modal-footer")},r(Me,{onClick:t,variant:"secondary"},"Close")))}function a_(){let e=Ee(t=>r(A0t,{rootProps:t,close:()=>vo(e)}))}var Yc,A0t,mV=x(()=>{"use strict";d();Co();tt();ut();nt();at();B();Jk();cS();Yc=de("vc-scheduled-msg-");A0t=ee.wrap(E0t,{noop:!0})});function gV(e){l_=e,fV.forEach(t=>t(e))}var l_,fV,LTe,OTe=x(()=>{"use strict";d();ma();B();cS();mV();l_=!1,fV=new Set;LTe=({isMainChat:e})=>{let[t,o]=L(l_);return se(()=>(fV.add(o),()=>{fV.delete(o)}),[]),e?r(Lr,{tooltip:t?"Schedule Mode ON (click to disable, right-click for list)":"Schedule Mode OFF (click to enable, right-click for list)",onClick:()=>{gV(!t)},onContextMenu:s=>{s.preventDefault(),a_()},buttonProps:{"aria-haspopup":"dialog"}},r(lS,{color:t?"var(--status-positive)":void 0})):null}});function FTe({message:e}){let t=rh.get(e?.id)??e?.scheduledMessageData;if(!t)return null;let{scheduledTime:o}=t,n=o-Date.now(),i="";if(n>0){let s=Math.floor(n/6e4),a=Math.floor(s/60),l=Math.floor(a/24);i=l>0?` (${l}d ${a%24}h remaining)`:a>0?` (${a}h ${s%60}m remaining)`:` (${s}m remaining)`}return r("div",{className:C0t("accessory")},r(t_,{width:14,height:14}),r("span",null,"Scheduled for ",new Date(o).toLocaleString(),i))}var C0t,UTe=x(()=>{"use strict";d();nt();Jk();cS();C0t=de("vc-scheduled-msg-")});function I0t({channelId:e,content:t,attachments:o,rootProps:n,close:i}){let[s,a]=L("delay"),[l,c]=L("5"),[u,p]=L(""),[m,g]=L(""),{name:y,avatar:b}=Xk(e),v=ne.getChannel(e);if(!v)return null;let E=v.isPrivate(),A=async()=>{let C;if(s==="delay"){let N=parseInt(l,10);if(isNaN(N)||N<1){g("Please enter a valid delay (minimum 1 minute)");return}C=Date.now()+N*60*1e3}else{let N=new Date(u).getTime();if(isNaN(N)||N<=Date.now()){g("Please select a future date and time");return}C=N}let I=await TTe(e,t,C,o);I.success?(T0t.dispatchToLastSubscribed("CLEAR_TEXT"),_l.clearAll(e,sn.ChannelMessage),Re("Message scheduled!",D.Type.SUCCESS),i()):g(I.error??"Failed to schedule message")};return r(Pe,{...n},r(je,{className:Qc("modal-header")},r(re,{tag:"h2",className:Qc("modal-title")},"Schedule Message"),r(Ut,{onClick:i})),r($e,{className:Qc("modal-content")},r("div",{className:Qc("channel-info")},b&&r("img",{src:b,className:Qc("channel-avatar"),alt:""}),r("span",{className:Qc("channel-text")},"Scheduling for: ",r("strong",null,E?y:`#${y}`))),r(re,{tag:"h5",className:Qc("field-label")},"Schedule Type"),r("div",{className:Qc("schedule-type-buttons")},r(Me,{size:"small",variant:s==="delay"?"primary":"secondary",onClick:()=>a("delay")},"Delay"),r(Me,{size:"small",variant:s==="time"?"primary":"secondary",onClick:()=>a("time")},"Specific Time")),s==="delay"?r(f,null,r(re,{tag:"h5",className:Qc("field-label")},"Delay (minutes)"),r(qe,{value:l,onChange:c,placeholder:"5",type:"number"})):r(f,null,r(re,{tag:"h5",className:Qc("field-label")},"Date & Time"),r("input",{type:"datetime-local",className:Qc("datetime-input"),value:u,onChange:C=>p(C.target.value),min:new Date().toISOString().slice(0,16)})),m&&r("div",{className:Qc("error")},r(STe,null),r("span",null,m))),r(ht,{className:Qc("modal-footer")},r(Me,{onClick:A,variant:"positive"},"Schedule"),r(Me,{variant:"secondary",onClick:i},"Cancel")))}function $Te(e,t,o){let n=Ee(i=>r(D0t,{channelId:e,content:t,attachments:o,rootProps:i,close:()=>vo(n)}))}var Qc,T0t,D0t,HTe=x(()=>{"use strict";d();Co();tt();ut();nt();at();fe();B();Jk();cS();Qc=de("vc-scheduled-msg-"),T0t=He("dispatchToLastSubscribed");D0t=ee.wrap(I0t,{noop:!0})});function zTe(e){let{messageId:t,channelId:o,emoji:n}=e;!t||!o||!n||!RTe(t)||(e.optimistic?e.type==="MESSAGE_REACTION_ADD"?PTe(t,o,n):e.type==="MESSAGE_REACTION_REMOVE"&&_Te(t,o,n):setTimeout(()=>{s_(t,o)},50))}var nh,c_,pV=x(()=>{"use strict";d();vTe();Q();H();$();OTe();cS();UTe();HTe();mV();Jk();nh=R({maxMessagesPerMinute:{type:5,description:"Max scheduled messages per channel that can fire in the same minute.",markers:[1,2,3,4,5],default:3,stickToMarkers:!0},checkIntervalSeconds:{type:5,description:"How often to check for messages to send (seconds).",markers:[5,10,15,30,60],default:10,stickToMarkers:!0,onChange:()=>{dV(),uV()}},showNotifications:{type:3,description:"Show toast notifications when messages are sent.",default:!0},showPhantomMessages:{type:3,description:"Show scheduled messages as phantom messages in chat.",default:!0}});c_=k({name:"ScheduledMessages",description:"Schedule messages to be sent at a specific time or after a delay.",authors:[j.mmeta,w.prism],settings:nh,flux:{MESSAGE_REACTION_ADD:zTe,MESSAGE_REACTION_REMOVE:zTe},chatBarButton:{icon:lS,render:LTe},toolboxActions:{"View Scheduled Messages":a_},patches:[{find:"}addReaction(",replacement:{match:/this\.channel_id=(\i)\.channel_id,/,replace:"$&this.scheduledMessageData=$1.scheduledMessageData,"}}],renderMessageAccessory(e){return r(FTe,{message:e.message})},async onBeforeMessageSend(e,t,o){if(!l_||!t.content.trim()&&!o.uploads?.length)return;gV(!1);let n;if(o.uploads?.length){n=[];for(let i of o.uploads){let{file:s}=i.item;try{let a=await new Promise((l,c)=>{let u=new FileReader;u.onload=()=>{let p=u.result;l(p.split(",")[1]??p)},u.onerror=()=>c(u.error),u.readAsDataURL(s)});n.push({filename:i.filename,data:a,type:s.type})}catch{continue}}}return $Te(e,t.content,n),{cancel:!0}},async start(){await ATe(),uV(),DTe()},stop(){dV(),MTe()}})});function M0t(){return r("span",{style:{color:"white"}},r("i",null,r("b",null,"This fix isn't perfect, so you may have to reload the search bar to fix issues.")),"Discord only allows a max offset of 5000 (this is what causes the magnifying glass error). This means that you can only see precisely 5000 messages into the past, and 5000 messages into the future (when sorting by old). This plugin just jumps to the opposite sorting method to try get around Discord's restriction, but if there is a large search result, and you try to view a message that is unobtainable with both methods of sorting, the plugin will simply show offset 0 (either newest or oldest message depending on the sorting method).")}var u_,GTe=x(()=>{"use strict";d();H();$();u_=k({name:"SearchFix",description:'Fixes the annoying "We dropped the magnifying glass!" error.',settingsAboutComponent:()=>M0t(),authors:[j.Jaxx],patches:[{find:'"SearchQueryStore";',replacement:{match:/\i\.searchResultsQuery=(\i)/,replace:"$&,$self.main($1)"}}],main(e){e.offset>5e3&&(e.sort_order=e.sort_order==="asc"?"desc":"asc",e.offset>0?e.offset=0:e.offset-=5e3)}})});var Cl,hV=x(()=>{"use strict";d();Cl=[{id:"3",name:"Airi 01",character:"airi",img:"airi/Airi_01.png",color:"#FB8AAC",defaultText:{text:"keep up",x:148,y:58,r:-2,s:47}},{id:"4",name:"Airi 02",character:"airi",img:"airi/Airi_02.png",color:"#FB8AAC",defaultText:{text:"nice to meet ya",x:148,y:58,r:0,s:28}},{id:"5",name:"Airi 03",character:"airi",img:"airi/Airi_03.png",color:"#FB8AAC",defaultText:{text:"keep at it!",x:140,y:79,r:2,s:47}},{id:"6",name:"Airi 04",character:"airi",img:"airi/Airi_04.png",color:"#FB8AAC",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"8",name:"Airi 06",character:"airi",img:"airi/Airi_06.png",color:"#FB8AAC",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"9",name:"Airi 07",character:"airi",img:"airi/Airi_07.png",color:"#FB8AAC",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"10",name:"Airi 08",character:"airi",img:"airi/Airi_08.png",color:"#FB8AAC",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"11",name:"Airi 09",character:"airi",img:"airi/Airi_09.png",color:"#FB8AAC",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"13",name:"Airi 11",character:"airi",img:"airi/Airi_11.png",color:"#FB8AAC",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"14",name:"Airi 12",character:"airi",img:"airi/Airi_12.png",color:"#FB8AAC",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"15",name:"Airi 13",character:"airi",img:"airi/Airi_13.png",color:"#FB8AAC",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"16",name:"Airi 14",character:"airi",img:"airi/Airi_14.png",color:"#FB8AAC",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"18",name:"Airi 16",character:"airi",img:"airi/Airi_16.png",color:"#FB8AAC",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"19",name:"Akito 01",character:"akito",img:"akito/Akito_01.png",color:"#FF7722",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"20",name:"Akito 02",character:"akito",img:"akito/Akito_02.png",color:"#FF7722",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"21",name:"Akito 03",character:"akito",img:"akito/Akito_03.png",color:"#FF7722",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"22",name:"Akito 04",character:"akito",img:"akito/Akito_04.png",color:"#FF7722",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"24",name:"Akito 06",character:"akito",img:"akito/Akito_06.png",color:"#FF7722",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"25",name:"Akito 07",character:"akito",img:"akito/Akito_07.png",color:"#FF7722",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"26",name:"Akito 08",character:"akito",img:"akito/Akito_08.png",color:"#FF7722",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"27",name:"Akito 09",character:"akito",img:"akito/Akito_09.png",color:"#FF7722",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"29",name:"Akito 11",character:"akito",img:"akito/Akito_11.png",color:"#FF7722",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"30",name:"Akito 12",character:"akito",img:"akito/Akito_12.png",color:"#FF7722",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"31",name:"Akito 13",character:"akito",img:"akito/Akito_13.png",color:"#FF7722",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"32",name:"Akito 14",character:"akito",img:"akito/Akito_14.png",color:"#FF7722",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"33",name:"Akito 16",character:"akito",img:"akito/Akito_16.png",color:"#FF7722",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"34",name:"An 01",character:"an",img:"an/An_01.png",color:"#00BADC",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"35",name:"An 02",character:"an",img:"an/An_02.png",color:"#00BADC",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"36",name:"An 03",character:"an",img:"an/An_03.png",color:"#00BADC",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"37",name:"An 04",character:"an",img:"an/An_04.png",color:"#00BADC",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"39",name:"An 06",character:"an",img:"an/An_06.png",color:"#00BADC",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"40",name:"An 07",character:"an",img:"an/An_07.png",color:"#00BADC",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"41",name:"An 08",character:"an",img:"an/An_08.png",color:"#00BADC",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"42",name:"An 09",character:"an",img:"an/An_09.png",color:"#00BADC",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"44",name:"An 11",character:"an",img:"an/An_11.png",color:"#00BADC",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"45",name:"An 12",character:"an",img:"an/An_12.png",color:"#00BADC",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"46",name:"An 13",character:"an",img:"an/An_13.png",color:"#00BADC",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"47",name:"An 14",character:"an",img:"an/An_14.png",color:"#00BADC",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"49",name:"An 16",character:"an",img:"an/An_16.png",color:"#00BADC",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"50",name:"Emu 01",character:"emu",img:"emu/Emu_01.png",color:"#FF66BB",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"51",name:"Emu 02",character:"emu",img:"emu/Emu_02.png",color:"#FF66BB",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"52",name:"Emu 03",character:"emu",img:"emu/Emu_03.png",color:"#FF66BB",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"53",name:"Emu 04",character:"emu",img:"emu/Emu_04.png",color:"#FF66BB",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"55",name:"Emu 06",character:"emu",img:"emu/Emu_06.png",color:"#FF66BB",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"56",name:"Emu 07",character:"emu",img:"emu/Emu_07.png",color:"#FF66BB",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"57",name:"Emu 08",character:"emu",img:"emu/Emu_08.png",color:"#FF66BB",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"58",name:"Emu 09",character:"emu",img:"emu/Emu_09.png",color:"#FF66BB",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"60",name:"Emu 11",character:"emu",img:"emu/Emu_11.png",color:"#FF66BB",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"61",name:"Emu 12",character:"emu",img:"emu/Emu_12.png",color:"#FF66BB",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"62",name:"Emu 13",character:"emu",img:"emu/Emu_13.png",color:"#FF66BB",defaultText:{text:"Wonderhoy!",x:148,y:70,r:-2,s:38}},{id:"63",name:"Emu 14",character:"emu",img:"emu/Emu_14.png",color:"#FF66BB",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"65",name:"Emu 16",character:"emu",img:"emu/Emu_16.png",color:"#FF66BB",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"66",name:"Ena 01",character:"ena",img:"ena/Ena_01.png",color:"#B18F6C",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"67",name:"Ena 02",character:"ena",img:"ena/Ena_02.png",color:"#B18F6C",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"68",name:"Ena 03",character:"ena",img:"ena/Ena_03.png",color:"#B18F6C",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"69",name:"Ena 04",character:"ena",img:"ena/Ena_04.png",color:"#B18F6C",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"71",name:"Ena 06",character:"ena",img:"ena/Ena_06.png",color:"#B18F6C",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"72",name:"Ena 07",character:"ena",img:"ena/Ena_07.png",color:"#B18F6C",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"73",name:"Ena 08",character:"ena",img:"ena/Ena_08.png",color:"#B18F6C",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"74",name:"Ena 09",character:"ena",img:"ena/Ena_09.png",color:"#B18F6C",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"76",name:"Ena 11",character:"ena",img:"ena/Ena_11.png",color:"#B18F6C",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"77",name:"Ena 12",character:"ena",img:"ena/Ena_12.png",color:"#B18F6C",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"78",name:"Ena 13",character:"ena",img:"ena/Ena_13.png",color:"#B18F6C",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"79",name:"Ena 14",character:"ena",img:"ena/Ena_14.png",color:"#B18F6C",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"81",name:"Ena 16",character:"ena",img:"ena/Ena_16.png",color:"#B18F6C",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"81",name:"Haruka 01",character:"Haruka",img:"Haruka/Haruka_01.png",color:"#6495F0",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"82",name:"Haruka 02",character:"Haruka",img:"Haruka/Haruka_02.png",color:"#6495F0",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"83",name:"Haruka 03",character:"Haruka",img:"Haruka/Haruka_03.png",color:"#6495F0",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"84",name:"Haruka 04",character:"Haruka",img:"Haruka/Haruka_04.png",color:"#6495F0",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"85",name:"Haruka 06",character:"Haruka",img:"Haruka/Haruka_06.png",color:"#6495F0",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"86",name:"Haruka 07",character:"Haruka",img:"Haruka/Haruka_07.png",color:"#6495F0",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"87",name:"Haruka 08",character:"Haruka",img:"Haruka/Haruka_08.png",color:"#6495F0",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"88",name:"Haruka 09",character:"Haruka",img:"Haruka/Haruka_09.png",color:"#6495F0",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"89",name:"Haruka 11",character:"Haruka",img:"Haruka/Haruka_11.png",color:"#6495F0",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"90",name:"Haruka 12",character:"Haruka",img:"Haruka/Haruka_12.png",color:"#6495F0",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"91",name:"Haruka 13",character:"Haruka",img:"Haruka/Haruka_13.png",color:"#6495F0",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"92",name:"Haruka 14",character:"Haruka",img:"Haruka/Haruka_14.png",color:"#6495F0",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"93",name:"Haruka 16",character:"Haruka",img:"Haruka/Haruka_16.png",color:"#6495F0",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"94",name:"Honami 01",character:"Honami",img:"Honami/Honami_01.png",color:"#F86666",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"95",name:"Honami 02",character:"Honami",img:"Honami/Honami_02.png",color:"#F86666",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"96",name:"Honami 03",character:"Honami",img:"Honami/Honami_03.png",color:"#F86666",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"97",name:"Honami 04",character:"Honami",img:"Honami/Honami_04.png",color:"#F86666",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"98",name:"Honami 06",character:"Honami",img:"Honami/Honami_06.png",color:"#F86666",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"99",name:"Honami 07",character:"Honami",img:"Honami/Honami_07.png",color:"#F86666",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"100",name:"Honami 08",character:"Honami",img:"Honami/Honami_08.png",color:"#F86666",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"101",name:"Honami 09",character:"Honami",img:"Honami/Honami_09.png",color:"#F86666",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"102",name:"Honami 11",character:"Honami",img:"Honami/Honami_11.png",color:"#F86666",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"103",name:"Honami 12",character:"Honami",img:"Honami/Honami_12.png",color:"#F86666",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"104",name:"Honami 13",character:"Honami",img:"Honami/Honami_13.png",color:"#F86666",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"105",name:"Honami 14",character:"Honami",img:"Honami/Honami_14.png",color:"#F86666",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"106",name:"Honami 16",character:"Honami",img:"Honami/Honami_16.png",color:"#F86666",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"107",name:"Honami 17",character:"Honami",img:"Honami/Honami_17.png",color:"#F86666",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"108",name:"Honami 18",character:"Honami",img:"Honami/Honami_18.png",color:"#F86666",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"109",name:"Ichika 01",character:"Ichika",img:"Ichika/Ichika_01.png",color:"#33AAEE",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"110",name:"Ichika 02",character:"Ichika",img:"Ichika/Ichika_02.png",color:"#33AAEE",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"111",name:"Ichika 03",character:"Ichika",img:"Ichika/Ichika_03.png",color:"#33AAEE",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"112",name:"Ichika 04",character:"Ichika",img:"Ichika/Ichika_04.png",color:"#33AAEE",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"113",name:"Ichika 06",character:"Ichika",img:"Ichika/Ichika_06.png",color:"#33AAEE",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"114",name:"Ichika 07",character:"Ichika",img:"Ichika/Ichika_07.png",color:"#33AAEE",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"115",name:"Ichika 08",character:"Ichika",img:"Ichika/Ichika_08.png",color:"#33AAEE",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"116",name:"Ichika 09",character:"Ichika",img:"Ichika/Ichika_09.png",color:"#33AAEE",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"117",name:"Ichika 11",character:"Ichika",img:"Ichika/Ichika_11.png",color:"#33AAEE",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"118",name:"Ichika 12",character:"Ichika",img:"Ichika/Ichika_12.png",color:"#33AAEE",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"119",name:"Ichika 13",character:"Ichika",img:"Ichika/Ichika_13.png",color:"#33AAEE",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"120",name:"Ichika 14",character:"Ichika",img:"Ichika/Ichika_14.png",color:"#33AAEE",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"121",name:"Ichika 16",character:"Ichika",img:"Ichika/Ichika_16.png",color:"#33AAEE",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"122",name:"Ichika 17",character:"Ichika",img:"Ichika/Ichika_17.png",color:"#33AAEE",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"123",name:"Ichika 18",character:"Ichika",img:"Ichika/Ichika_18.png",color:"#33AAEE",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"124",name:"KAITO 01",character:"KAITO",img:"KAITO/KAITO_01.png",color:"#3366CC",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"125",name:"KAITO 02",character:"KAITO",img:"KAITO/KAITO_02.png",color:"#3366CC",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"126",name:"KAITO 03",character:"KAITO",img:"KAITO/KAITO_03.png",color:"#3366CC",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"127",name:"KAITO 04",character:"KAITO",img:"KAITO/KAITO_04.png",color:"#3366CC",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"128",name:"KAITO 06",character:"KAITO",img:"KAITO/KAITO_06.png",color:"#3366CC",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"129",name:"KAITO 07",character:"KAITO",img:"KAITO/KAITO_07.png",color:"#3366CC",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"130",name:"KAITO 08",character:"KAITO",img:"KAITO/KAITO_08.png",color:"#3366CC",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"131",name:"KAITO 09",character:"KAITO",img:"KAITO/KAITO_09.png",color:"#3366CC",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"132",name:"KAITO 11",character:"KAITO",img:"KAITO/KAITO_11.png",color:"#3366CC",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"133",name:"KAITO 12",character:"KAITO",img:"KAITO/KAITO_12.png",color:"#3366CC",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"134",name:"KAITO 13",character:"KAITO",img:"KAITO/KAITO_13.png",color:"#3366CC",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"135",name:"KAITO 14",character:"KAITO",img:"KAITO/KAITO_14.png",color:"#3366CC",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"136",name:"KAITO 16",character:"KAITO",img:"KAITO/KAITO_16.png",color:"#3366CC",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"137",name:"Kanade 01",character:"Kanade",img:"Kanade/Kanade_01.png",color:"#BB6688",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"138",name:"Kanade 02",character:"Kanade",img:"Kanade/Kanade_02.png",color:"#BB6688",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"139",name:"Kanade 03",character:"Kanade",img:"Kanade/Kanade_03.png",color:"#BB6688",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"140",name:"Kanade 04",character:"Kanade",img:"Kanade/Kanade_04.png",color:"#BB6688",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"141",name:"Kanade 06",character:"Kanade",img:"Kanade/Kanade_06.png",color:"#BB6688",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"142",name:"Kanade 07",character:"Kanade",img:"Kanade/Kanade_07.png",color:"#BB6688",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"143",name:"Kanade 08",character:"Kanade",img:"Kanade/Kanade_08.png",color:"#BB6688",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"144",name:"Kanade 09",character:"Kanade",img:"Kanade/Kanade_09.png",color:"#BB6688",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"145",name:"Kanade 11",character:"Kanade",img:"Kanade/Kanade_11.png",color:"#BB6688",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"146",name:"Kanade 12",character:"Kanade",img:"Kanade/Kanade_12.png",color:"#BB6688",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"147",name:"Kanade 13",character:"Kanade",img:"Kanade/Kanade_13.png",color:"#BB6688",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"148",name:"Kanade 14",character:"Kanade",img:"Kanade/Kanade_14.png",color:"#BB6688",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"149",name:"Kanade 16",character:"Kanade",img:"Kanade/Kanade_16.png",color:"#BB6688",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"150",name:"Kanade 17",character:"Kanade",img:"Kanade/Kanade_17.png",color:"#BB6688",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"151",name:"Kohane 01",character:"Kohane",img:"Kohane/Kohane_01.png",color:"#FF6699",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"152",name:"Kohane 02",character:"Kohane",img:"Kohane/Kohane_02.png",color:"#FF6699",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"153",name:"Kohane 03",character:"Kohane",img:"Kohane/Kohane_03.png",color:"#FF6699",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"154",name:"Kohane 04",character:"Kohane",img:"Kohane/Kohane_04.png",color:"#FF6699",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"155",name:"Kohane 06",character:"Kohane",img:"Kohane/Kohane_06.png",color:"#FF6699",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"156",name:"Kohane 07",character:"Kohane",img:"Kohane/Kohane_07.png",color:"#FF6699",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"157",name:"Kohane 08",character:"Kohane",img:"Kohane/Kohane_08.png",color:"#FF6699",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"158",name:"Kohane 09",character:"Kohane",img:"Kohane/Kohane_09.png",color:"#FF6699",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"159",name:"Kohane 11",character:"Kohane",img:"Kohane/Kohane_11.png",color:"#FF6699",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"160",name:"Kohane 12",character:"Kohane",img:"Kohane/Kohane_12.png",color:"#FF6699",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"161",name:"Kohane 13",character:"Kohane",img:"Kohane/Kohane_13.png",color:"#FF6699",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"162",name:"Kohane 14",character:"Kohane",img:"Kohane/Kohane_14.png",color:"#FF6699",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"163",name:"Kohane 16",character:"Kohane",img:"Kohane/Kohane_16.png",color:"#FF6699",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"164",name:"Kohane 17",character:"Kohane",img:"Kohane/Kohane_17.png",color:"#FF6699",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"165",name:"Len 01",character:"Len",img:"Len/Len_01.png",color:"#D3BD00",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"166",name:"Len 02",character:"Len",img:"Len/Len_02.png",color:"#D3BD00",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"167",name:"Len 03",character:"Len",img:"Len/Len_03.png",color:"#D3BD00",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"168",name:"Len 04",character:"Len",img:"Len/Len_04.png",color:"#D3BD00",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"169",name:"Len 06",character:"Len",img:"Len/Len_06.png",color:"#D3BD00",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"170",name:"Len 07",character:"Len",img:"Len/Len_07.png",color:"#D3BD00",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"171",name:"Len 08",character:"Len",img:"Len/Len_08.png",color:"#D3BD00",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"172",name:"Len 09",character:"Len",img:"Len/Len_09.png",color:"#D3BD00",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"173",name:"Len 11",character:"Len",img:"Len/Len_11.png",color:"#D3BD00",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"174",name:"Len 12",character:"Len",img:"Len/Len_12.png",color:"#D3BD00",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"175",name:"Len 13",character:"Len",img:"Len/Len_13.png",color:"#D3BD00",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"176",name:"Len 14",character:"Len",img:"Len/Len_14.png",color:"#D3BD00",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"177",name:"Len 16",character:"Len",img:"Len/Len_16.png",color:"#D3BD00",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"178",name:"Len 17",character:"Len",img:"Len/Len_17.png",color:"#D3BD00",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"179",name:"Luka 01",character:"Luka",img:"Luka/Luka_01.png",color:"#F88CA7",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"180",name:"Luka 02",character:"Luka",img:"Luka/Luka_02.png",color:"#F88CA7",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"181",name:"Luka 03",character:"Luka",img:"Luka/Luka_03.png",color:"#F88CA7",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"182",name:"Luka 04",character:"Luka",img:"Luka/Luka_04.png",color:"#F88CA7",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"183",name:"Luka 06",character:"Luka",img:"Luka/Luka_06.png",color:"#F88CA7",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"184",name:"Luka 07",character:"Luka",img:"Luka/Luka_07.png",color:"#F88CA7",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"185",name:"Luka 08",character:"Luka",img:"Luka/Luka_08.png",color:"#F88CA7",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"186",name:"Luka 09",character:"Luka",img:"Luka/Luka_09.png",color:"#F88CA7",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"187",name:"Luka 11",character:"Luka",img:"Luka/Luka_11.png",color:"#F88CA7",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"188",name:"Luka 12",character:"Luka",img:"Luka/Luka_12.png",color:"#F88CA7",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"189",name:"Luka 13",character:"Luka",img:"Luka/Luka_13.png",color:"#F88CA7",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"190",name:"Luka 14",character:"Luka",img:"Luka/Luka_14.png",color:"#F88CA7",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"191",name:"Luka 16",character:"Luka",img:"Luka/Luka_16.png",color:"#F88CA7",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"192",name:"Mafuyu 01",character:"Mafuyu",img:"Mafuyu/Mafuyu_01.png",color:"#7171AF",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"193",name:"Mafuyu 02",character:"Mafuyu",img:"Mafuyu/Mafuyu_02.png",color:"#7171AF",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"194",name:"Mafuyu 03",character:"Mafuyu",img:"Mafuyu/Mafuyu_03.png",color:"#7171AF",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"195",name:"Mafuyu 04",character:"Mafuyu",img:"Mafuyu/Mafuyu_04.png",color:"#7171AF",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"196",name:"Mafuyu 06",character:"Mafuyu",img:"Mafuyu/Mafuyu_06.png",color:"#7171AF",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"197",name:"Mafuyu 07",character:"Mafuyu",img:"Mafuyu/Mafuyu_07.png",color:"#7171AF",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"198",name:"Mafuyu 08",character:"Mafuyu",img:"Mafuyu/Mafuyu_08.png",color:"#7171AF",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"199",name:"Mafuyu 09",character:"Mafuyu",img:"Mafuyu/Mafuyu_09.png",color:"#7171AF",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"200",name:"Mafuyu 11",character:"Mafuyu",img:"Mafuyu/Mafuyu_11.png",color:"#7171AF",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"201",name:"Mafuyu 12",character:"Mafuyu",img:"Mafuyu/Mafuyu_12.png",color:"#7171AF",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"202",name:"Mafuyu 13",character:"Mafuyu",img:"Mafuyu/Mafuyu_13.png",color:"#7171AF",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"203",name:"Mafuyu 14",character:"Mafuyu",img:"Mafuyu/Mafuyu_14.png",color:"#7171AF",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"204",name:"Mafuyu 16",character:"Mafuyu",img:"Mafuyu/Mafuyu_16.png",color:"#7171AF",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"205",name:"Mafuyu 17",character:"Mafuyu",img:"Mafuyu/Mafuyu_17.png",color:"#7171AF",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"206",name:"Meiko 01",character:"Meiko",img:"Meiko/Meiko_01.png",color:"#E4485F",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"207",name:"Meiko 02",character:"Meiko",img:"Meiko/Meiko_02.png",color:"#E4485F",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"208",name:"Meiko 03",character:"Meiko",img:"Meiko/Meiko_03.png",color:"#E4485F",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"209",name:"Meiko 04",character:"Meiko",img:"Meiko/Meiko_04.png",color:"#E4485F",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"210",name:"Meiko 06",character:"Meiko",img:"Meiko/Meiko_06.png",color:"#E4485F",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"211",name:"Meiko 07",character:"Meiko",img:"Meiko/Meiko_07.png",color:"#E4485F",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"212",name:"Meiko 08",character:"Meiko",img:"Meiko/Meiko_08.png",color:"#E4485F",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"213",name:"Meiko 09",character:"Meiko",img:"Meiko/Meiko_09.png",color:"#E4485F",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"214",name:"Meiko 11",character:"Meiko",img:"Meiko/Meiko_11.png",color:"#E4485F",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"215",name:"Meiko 12",character:"Meiko",img:"Meiko/Meiko_12.png",color:"#E4485F",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"216",name:"Meiko 13",character:"Meiko",img:"Meiko/Meiko_13.png",color:"#E4485F",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"217",name:"Meiko 14",character:"Meiko",img:"Meiko/Meiko_14.png",color:"#E4485F",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"218",name:"Meiko 16",character:"Meiko",img:"Meiko/Meiko_16.png",color:"#E4485F",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"219",name:"Miku 01",character:"Miku",img:"Miku/Miku_01.png",color:"#33CCBB",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"220",name:"Miku 02",character:"Miku",img:"Miku/Miku_02.png",color:"#33CCBB",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"221",name:"Miku 03",character:"Miku",img:"Miku/Miku_03.png",color:"#33CCBB",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"222",name:"Miku 04",character:"Miku",img:"Miku/Miku_04.png",color:"#33CCBB",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"223",name:"Miku 06",character:"Miku",img:"Miku/Miku_06.png",color:"#33CCBB",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"224",name:"Miku 07",character:"Miku",img:"Miku/Miku_07.png",color:"#33CCBB",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"225",name:"Miku 08",character:"Miku",img:"Miku/Miku_08.png",color:"#33CCBB",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"226",name:"Miku 09",character:"Miku",img:"Miku/Miku_09.png",color:"#33CCBB",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"227",name:"Miku 11",character:"Miku",img:"Miku/Miku_11.png",color:"#33CCBB",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"228",name:"Miku 12",character:"Miku",img:"Miku/Miku_12.png",color:"#33CCBB",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"229",name:"Miku 13",character:"Miku",img:"Miku/Miku_13.png",color:"#33CCBB",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"230",name:"Miku 14",character:"Miku",img:"Miku/Miku_14.png",color:"#33CCBB",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"231",name:"Miku 16",character:"Miku",img:"Miku/Miku_16.png",color:"#33CCBB",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"232",name:"Minori 01",character:"Minori",img:"Minori/Minori_01.png",color:"#F39E7D",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"233",name:"Minori 02",character:"Minori",img:"Minori/Minori_02.png",color:"#F39E7D",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"234",name:"Minori 03",character:"Minori",img:"Minori/Minori_03.png",color:"#F39E7D",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"235",name:"Minori 04",character:"Minori",img:"Minori/Minori_04.png",color:"#F39E7D",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"236",name:"Minori 06",character:"Minori",img:"Minori/Minori_06.png",color:"#F39E7D",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"237",name:"Minori 07",character:"Minori",img:"Minori/Minori_07.png",color:"#F39E7D",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"238",name:"Minori 08",character:"Minori",img:"Minori/Minori_08.png",color:"#F39E7D",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"239",name:"Minori 09",character:"Minori",img:"Minori/Minori_09.png",color:"#F39E7D",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"240",name:"Minori 11",character:"Minori",img:"Minori/Minori_11.png",color:"#F39E7D",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"241",name:"Minori 12",character:"Minori",img:"Minori/Minori_12.png",color:"#F39E7D",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"242",name:"Minori 13",character:"Minori",img:"Minori/Minori_13.png",color:"#F39E7D",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"243",name:"Minori 14",character:"Minori",img:"Minori/Minori_14.png",color:"#F39E7D",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"244",name:"Minori 16",character:"Minori",img:"Minori/Minori_16.png",color:"#F39E7D",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"245",name:"Minori 17",character:"Minori",img:"Minori/Minori_17.png",color:"#F39E7D",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"246",name:"Mizuki 01",character:"Mizuki",img:"Mizuki/Mizuki_01.png",color:"#CA8DB6",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"247",name:"Mizuki 02",character:"Mizuki",img:"Mizuki/Mizuki_02.png",color:"#CA8DB6",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"248",name:"Mizuki 03",character:"Mizuki",img:"Mizuki/Mizuki_03.png",color:"#CA8DB6",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"249",name:"Mizuki 04",character:"Mizuki",img:"Mizuki/Mizuki_04.png",color:"#CA8DB6",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"250",name:"Mizuki 06",character:"Mizuki",img:"Mizuki/Mizuki_06.png",color:"#CA8DB6",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"251",name:"Mizuki 07",character:"Mizuki",img:"Mizuki/Mizuki_07.png",color:"#CA8DB6",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"252",name:"Mizuki 08",character:"Mizuki",img:"Mizuki/Mizuki_08.png",color:"#CA8DB6",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"253",name:"Mizuki 09",character:"Mizuki",img:"Mizuki/Mizuki_09.png",color:"#CA8DB6",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"254",name:"Mizuki 11",character:"Mizuki",img:"Mizuki/Mizuki_11.png",color:"#CA8DB6",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"255",name:"Mizuki 12",character:"Mizuki",img:"Mizuki/Mizuki_12.png",color:"#CA8DB6",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"256",name:"Mizuki 13",character:"Mizuki",img:"Mizuki/Mizuki_13.png",color:"#CA8DB6",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"257",name:"Mizuki 14",character:"Mizuki",img:"Mizuki/Mizuki_14.png",color:"#CA8DB6",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"258",name:"Mizuki 16",character:"Mizuki",img:"Mizuki/Mizuki_16.png",color:"#CA8DB6",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"259",name:"Mizuki 17",character:"Mizuki",img:"Mizuki/Mizuki_17.png",color:"#CA8DB6",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"260",name:"Nene 01",character:"Nene",img:"Nene/Nene_01.png",color:"#19CD94",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"261",name:"Nene 02",character:"Nene",img:"Nene/Nene_02.png",color:"#19CD94",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"262",name:"Nene 03",character:"Nene",img:"Nene/Nene_03.png",color:"#19CD94",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"263",name:"Nene 04",character:"Nene",img:"Nene/Nene_04.png",color:"#19CD94",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"264",name:"Nene 06",character:"Nene",img:"Nene/Nene_06.png",color:"#19CD94",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"265",name:"Nene 07",character:"Nene",img:"Nene/Nene_07.png",color:"#19CD94",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"266",name:"Nene 08",character:"Nene",img:"Nene/Nene_08.png",color:"#19CD94",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"267",name:"Nene 09",character:"Nene",img:"Nene/Nene_09.png",color:"#19CD94",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"268",name:"Nene 11",character:"Nene",img:"Nene/Nene_11.png",color:"#19CD94",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"269",name:"Nene 12",character:"Nene",img:"Nene/Nene_12.png",color:"#19CD94",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"270",name:"Nene 13",character:"Nene",img:"Nene/Nene_13.png",color:"#19CD94",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"271",name:"Nene 14",character:"Nene",img:"Nene/Nene_14.png",color:"#19CD94",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"272",name:"Nene 16",character:"Nene",img:"Nene/Nene_16.png",color:"#19CD94",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"273",name:"Rin 01",character:"Rin",img:"Rin/Rin_01.png",color:"#E8A505",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"274",name:"Rin 02",character:"Rin",img:"Rin/Rin_02.png",color:"#E8A505",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"275",name:"Rin 03",character:"Rin",img:"Rin/Rin_03.png",color:"#E8A505",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"276",name:"Rin 04",character:"Rin",img:"Rin/Rin_04.png",color:"#E8A505",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"277",name:"Rin 06",character:"Rin",img:"Rin/Rin_06.png",color:"#E8A505",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"278",name:"Rin 07",character:"Rin",img:"Rin/Rin_07.png",color:"#E8A505",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"279",name:"Rin 08",character:"Rin",img:"Rin/Rin_08.png",color:"#E8A505",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"280",name:"Rin 09",character:"Rin",img:"Rin/Rin_09.png",color:"#E8A505",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"281",name:"Rin 11",character:"Rin",img:"Rin/Rin_11.png",color:"#E8A505",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"282",name:"Rin 12",character:"Rin",img:"Rin/Rin_12.png",color:"#E8A505",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"283",name:"Rin 13",character:"Rin",img:"Rin/Rin_13.png",color:"#E8A505",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"284",name:"Rin 14",character:"Rin",img:"Rin/Rin_14.png",color:"#E8A505",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"285",name:"Rin 16",character:"Rin",img:"Rin/Rin_16.png",color:"#E8A505",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"286",name:"Rui 01",character:"Rui",img:"Rui/Rui_01.png",color:"#BB88EE",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"287",name:"Rui 02",character:"Rui",img:"Rui/Rui_02.png",color:"#BB88EE",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"288",name:"Rui 03",character:"Rui",img:"Rui/Rui_03.png",color:"#BB88EE",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"289",name:"Rui 04",character:"Rui",img:"Rui/Rui_04.png",color:"#BB88EE",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"290",name:"Rui 06",character:"Rui",img:"Rui/Rui_06.png",color:"#BB88EE",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"291",name:"Rui 07",character:"Rui",img:"Rui/Rui_07.png",color:"#BB88EE",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"292",name:"Rui 08",character:"Rui",img:"Rui/Rui_08.png",color:"#BB88EE",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"293",name:"Rui 09",character:"Rui",img:"Rui/Rui_09.png",color:"#BB88EE",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"294",name:"Rui 11",character:"Rui",img:"Rui/Rui_11.png",color:"#BB88EE",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"295",name:"Rui 12",character:"Rui",img:"Rui/Rui_12.png",color:"#BB88EE",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"296",name:"Rui 13",character:"Rui",img:"Rui/Rui_13.png",color:"#BB88EE",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"297",name:"Rui 14",character:"Rui",img:"Rui/Rui_14.png",color:"#BB88EE",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"298",name:"Rui 16",character:"Rui",img:"Rui/Rui_16.png",color:"#BB88EE",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"299",name:"Rui 17",character:"Rui",img:"Rui/Rui_17.png",color:"#BB88EE",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"300",name:"Rui 18",character:"Rui",img:"Rui/Rui_18.png",color:"#BB88EE",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"301",name:"Rui 19",character:"Rui",img:"Rui/Rui_19.png",color:"#BB88EE",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"302",name:"Saki 01",character:"Saki",img:"Saki/Saki_01.png",color:"#F5B303",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"303",name:"Saki 02",character:"Saki",img:"Saki/Saki_02.png",color:"#F5B303",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"304",name:"Saki 03",character:"Saki",img:"Saki/Saki_03.png",color:"#F5B303",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"305",name:"Saki 04",character:"Saki",img:"Saki/Saki_04.png",color:"#F5B303",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"306",name:"Saki 06",character:"Saki",img:"Saki/Saki_06.png",color:"#F5B303",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"307",name:"Saki 07",character:"Saki",img:"Saki/Saki_07.png",color:"#F5B303",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"308",name:"Saki 08",character:"Saki",img:"Saki/Saki_08.png",color:"#F5B303",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"309",name:"Saki 09",character:"Saki",img:"Saki/Saki_09.png",color:"#F5B303",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"310",name:"Saki 11",character:"Saki",img:"Saki/Saki_11.png",color:"#F5B303",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"311",name:"Saki 12",character:"Saki",img:"Saki/Saki_12.png",color:"#F5B303",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"312",name:"Saki 13",character:"Saki",img:"Saki/Saki_13.png",color:"#F5B303",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"313",name:"Saki 14",character:"Saki",img:"Saki/Saki_14.png",color:"#F5B303",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"314",name:"Saki 16",character:"Saki",img:"Saki/Saki_16.png",color:"#F5B303",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"315",name:"Saki 17",character:"Saki",img:"Saki/Saki_17.png",color:"#F5B303",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"316",name:"Saki 18",character:"Saki",img:"Saki/Saki_18.png",color:"#F5B303",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"317",name:"Shiho 01",character:"Shiho",img:"Shiho/Shiho_01.png",color:"#A0C10B",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"318",name:"Shiho 02",character:"Shiho",img:"Shiho/Shiho_02.png",color:"#A0C10B",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"319",name:"Shiho 03",character:"Shiho",img:"Shiho/Shiho_03.png",color:"#A0C10B",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"320",name:"Shiho 04",character:"Shiho",img:"Shiho/Shiho_04.png",color:"#A0C10B",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"321",name:"Shiho 06",character:"Shiho",img:"Shiho/Shiho_06.png",color:"#A0C10B",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"322",name:"Shiho 07",character:"Shiho",img:"Shiho/Shiho_07.png",color:"#A0C10B",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"323",name:"Shiho 08",character:"Shiho",img:"Shiho/Shiho_08.png",color:"#A0C10B",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"324",name:"Shiho 09",character:"Shiho",img:"Shiho/Shiho_09.png",color:"#A0C10B",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"325",name:"Shiho 11",character:"Shiho",img:"Shiho/Shiho_11.png",color:"#A0C10B",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"326",name:"Shiho 12",character:"Shiho",img:"Shiho/Shiho_12.png",color:"#A0C10B",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"327",name:"Shiho 13",character:"Shiho",img:"Shiho/Shiho_13.png",color:"#A0C10B",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"328",name:"Shiho 14",character:"Shiho",img:"Shiho/Shiho_14.png",color:"#A0C10B",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"329",name:"Shiho 16",character:"Shiho",img:"Shiho/Shiho_16.png",color:"#A0C10B",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"330",name:"Shiho 17",character:"Shiho",img:"Shiho/Shiho_17.png",color:"#A0C10B",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"331",name:"Shiho 18",character:"Shiho",img:"Shiho/Shiho_18.png",color:"#A0C10B",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"332",name:"Shizuku 01",character:"Shizuku",img:"Shizuku/Shizuku_01.png",color:"#5CD0B9",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"333",name:"Shizuku 02",character:"Shizuku",img:"Shizuku/Shizuku_02.png",color:"#5CD0B9",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"334",name:"Shizuku 03",character:"Shizuku",img:"Shizuku/Shizuku_03.png",color:"#5CD0B9",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"335",name:"Shizuku 04",character:"Shizuku",img:"Shizuku/Shizuku_04.png",color:"#5CD0B9",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"336",name:"Shizuku 06",character:"Shizuku",img:"Shizuku/Shizuku_06.png",color:"#5CD0B9",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"337",name:"Shizuku 07",character:"Shizuku",img:"Shizuku/Shizuku_07.png",color:"#5CD0B9",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"338",name:"Shizuku 08",character:"Shizuku",img:"Shizuku/Shizuku_08.png",color:"#5CD0B9",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"339",name:"Shizuku 09",character:"Shizuku",img:"Shizuku/Shizuku_09.png",color:"#5CD0B9",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"340",name:"Shizuku 11",character:"Shizuku",img:"Shizuku/Shizuku_11.png",color:"#5CD0B9",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"341",name:"Shizuku 12",character:"Shizuku",img:"Shizuku/Shizuku_12.png",color:"#5CD0B9",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"342",name:"Shizuku 13",character:"Shizuku",img:"Shizuku/Shizuku_13.png",color:"#5CD0B9",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"343",name:"Shizuku 14",character:"Shizuku",img:"Shizuku/Shizuku_14.png",color:"#5CD0B9",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"344",name:"Shizuku 16",character:"Shizuku",img:"Shizuku/Shizuku_16.png",color:"#5CD0B9",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"345",name:"Touya 01",character:"Touya",img:"Touya/Touya_01.png",color:"#0077DD",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"346",name:"Touya 02",character:"Touya",img:"Touya/Touya_02.png",color:"#0077DD",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"347",name:"Touya 03",character:"Touya",img:"Touya/Touya_03.png",color:"#0077DD",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"348",name:"Touya 04",character:"Touya",img:"Touya/Touya_04.png",color:"#0077DD",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"349",name:"Touya 06",character:"Touya",img:"Touya/Touya_06.png",color:"#0077DD",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"350",name:"Touya 07",character:"Touya",img:"Touya/Touya_07.png",color:"#0077DD",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"351",name:"Touya 08",character:"Touya",img:"Touya/Touya_08.png",color:"#0077DD",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"352",name:"Touya 09",character:"Touya",img:"Touya/Touya_09.png",color:"#0077DD",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"353",name:"Touya 11",character:"Touya",img:"Touya/Touya_11.png",color:"#0077DD",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"354",name:"Touya 12",character:"Touya",img:"Touya/Touya_12.png",color:"#0077DD",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"355",name:"Touya 13",character:"Touya",img:"Touya/Touya_13.png",color:"#0077DD",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"356",name:"Touya 14",character:"Touya",img:"Touya/Touya_14.png",color:"#0077DD",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"357",name:"Touya 16",character:"Touya",img:"Touya/Touya_16.png",color:"#0077DD",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"358",name:"Touya 17",character:"Touya",img:"Touya/Touya_17.png",color:"#0077DD",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"359",name:"Touya 18",character:"Touya",img:"Touya/Touya_18.png",color:"#0077DD",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"360",name:"Tsukasa 01",character:"Tsukasa",img:"Tsukasa/Tsukasa_01.png",color:"#F09A04",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"361",name:"Tsukasa 02",character:"Tsukasa",img:"Tsukasa/Tsukasa_02.png",color:"#F09A04",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"362",name:"Tsukasa 03",character:"Tsukasa",img:"Tsukasa/Tsukasa_03.png",color:"#F09A04",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"363",name:"Tsukasa 04",character:"Tsukasa",img:"Tsukasa/Tsukasa_04.png",color:"#F09A04",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"364",name:"Tsukasa 06",character:"Tsukasa",img:"Tsukasa/Tsukasa_06.png",color:"#F09A04",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"365",name:"Tsukasa 07",character:"Tsukasa",img:"Tsukasa/Tsukasa_07.png",color:"#F09A04",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"366",name:"Tsukasa 08",character:"Tsukasa",img:"Tsukasa/Tsukasa_08.png",color:"#F09A04",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"367",name:"Tsukasa 09",character:"Tsukasa",img:"Tsukasa/Tsukasa_09.png",color:"#F09A04",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"368",name:"Tsukasa 11",character:"Tsukasa",img:"Tsukasa/Tsukasa_11.png",color:"#F09A04",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"369",name:"Tsukasa 12",character:"Tsukasa",img:"Tsukasa/Tsukasa_12.png",color:"#F09A04",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"370",name:"Tsukasa 13",character:"Tsukasa",img:"Tsukasa/Tsukasa_13.png",color:"#F09A04",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"371",name:"Tsukasa 14",character:"Tsukasa",img:"Tsukasa/Tsukasa_14.png",color:"#F09A04",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"372",name:"Tsukasa 16",character:"Tsukasa",img:"Tsukasa/Tsukasa_16.png",color:"#F09A04",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"373",name:"Tsukasa 17",character:"Tsukasa",img:"Tsukasa/Tsukasa_17.png",color:"#F09A04",defaultText:{text:"something",x:148,y:58,r:-2,s:47}},{id:"374",name:"Tsukasa 18",character:"Tsukasa",img:"Tsukasa/Tsukasa_18.png",color:"#F09A04",defaultText:{text:"something",x:148,y:58,r:-2,s:47}}]});var N0t,qTe,jTe=x(()=>{"use strict";d();B();N0t=e=>{let{draw:t,...o}=e,n=kt(null);return se(()=>{let s=n.current.getContext("2d");t(s)},[t]),r("canvas",{ref:n,...o})},qTe=N0t});function xV({modalProps:e,setCharacter:t}){let[o,n]=X.useState(""),i=X.useMemo(()=>{let s=o.toLowerCase();return Cl.map((a,l)=>s===a.id||a.name.toLowerCase().includes(s)||a.character.toLowerCase().includes(s)?r("img",{key:l,onClick:()=>{e.onClose(),t(l)},src:`https://st.ayaka.one/img/${a.img}`,srcSet:`https://st.ayaka.one/img/${a.img}`,loading:"lazy"}):null)},[o,Cl]);return r(Pe,{...e,size:"dynamic"},r(je,null,r(Y,{size:"lg",weight:"bold",style:{flexGrow:1}},"Select character menu"),r(Ut,{onClick:e.onClose})),r($e,null,r(Be,{flexDirection:"column",style:{paddingTop:12}},r(qe,{content:"mafuyu",placeholder:"Mafuyu",onChange:s=>n(s)}),r(dd,{style:{height:520}},r("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 330px)",rowGap:6,columnGap:5,gridTemplateRows:"repeat(3, 256px)"}},i)))))}var WTe=x(()=>{"use strict";d();Et();eo();hV();at();B()});function yV({modalProps:e,settings:t}){let[o,n]=X.useState("\u594F\u3067\u30FC\u304B\u308F\u3044\u3044"),[i,s]=X.useState(49),[a,l]=X.useState(Cl[i].defaultText.s),[c,u]=X.useState(Cl[i].defaultText.r),[p,m]=X.useState(!1),[g,y]=X.useState(!1),[b,v]=X.useState({x:Cl[i].defaultText.x,y:Cl[i].defaultText.y}),[E,A]=X.useState(1),C,I=new Image;I.crossOrigin="anonymous",I.src="https://st.ayaka.one/img/"+Cl[i].img,X.useEffect(()=>{v({x:Cl[i].defaultText.x,y:Cl[i].defaultText.y}),l(Cl[i].defaultText.s),u(Cl[i].defaultText.r),y(!1)},[i]),I.onload=()=>{y(!0)};let N=Math.PI*o.length/7,_=O=>{if(O.canvas.width=296,O.canvas.height=256,g&&document.fonts.check("12px YurukaStd")){let F=O.canvas.width/I.width,J=O.canvas.height/I.height,G=Math.min(F,J),te=(O.canvas.width-I.width*G)/2,K=(O.canvas.height-I.height*G)/2;O.clearRect(0,0,O.canvas.width,O.canvas.height),O.drawImage(I,0,0,I.width,I.height,te,K,I.width*G,I.height*G),O.font=`${a}px YurukaStd, SSFangTangTi`,O.lineWidth=9,O.save(),O.translate(b.x,b.y),O.rotate(c/10),O.textAlign="center",O.strokeStyle="white",O.fillStyle=Cl[i].color;let oe=o.split(`
`);if(p)for(let le of oe)for(let he=0;he<le.length;he++)O.rotate(N/le.length/2.5),O.save(),O.translate(0,-1*a*3.5),O.strokeText(le[he],0,-1*E),O.fillText(le[he],0,-1*E),O.restore();else{for(let le=0,he=0;le<oe.length;le++)O.strokeText(oe[le],0,he),O.fillText(oe[le],0,he),he+=E;O.restore()}C=O.canvas}};return r(Pe,{...e,size:"dynamic"},r(je,null,r(Y,{size:"lg",weight:"bold",style:{flexGrow:1}},"Sekai Stickers"),r(Ut,{onClick:e.onClose})),r($e,null,r(Be,{flexDirection:"row",style:{paddingTop:12}},r("div",{style:{marginRight:30}},r(qTe,{draw:_,id:"SekaiCard_Canvas"}),r(re,null,"Text Y Pos"),r(Tr,{minValue:0,maxValue:256,asValueChanges:O=>{O=Math.round(O),v({x:b.x,y:p?256+a*3-O:256-O})},initialValue:p?256-b.y+a*3:256-b.y,orientation:"vertical",onValueRender:O=>String(Math.round(O))}),r(re,null,"Text XZ Pos"),r(Tr,{minValue:0,maxValue:296,asValueChanges:O=>{O=Math.round(O),v({y:b.y,x:O})},initialValue:b.x,orientation:"horizontal",onValueRender:O=>String(Math.round(O))})),r("div",{style:{marginRight:10,width:"30vw"}},r(re,null,"Text"),r(cp,{onChange:n,placeholder:o,rows:4,spellCheck:!1}),r(re,null,"Rotation"),r(Tr,{markers:[-10,-5,0,5,10],stickToMarkers:!1,minValue:-10,maxValue:10,asValueChanges:O=>u(O),initialValue:c,keyboardStep:.2,orientation:"horizontal",onValueRender:O=>String(O.toFixed(2))}),r(re,null,"Font Size"),r(Tr,{minValue:10,asValueChanges:O=>l(Math.round(O)),maxValue:100,initialValue:a,keyboardStep:1,orientation:"horizontal",onValueRender:O=>String(Math.round(O))}),r(re,null,"Spacing"),r(Tr,{markers:[18,36,72,100],stickToMarkers:!1,minValue:18,maxValue:100,initialValue:E,asValueChanges:O=>A(O),onValueRender:O=>String(Math.round(O))}),r(fn,{title:"Enable curve",value:p,onChange:O=>m(O)}),r(U,{onClick:()=>Ee(O=>r(xV,{modalProps:O,setCharacter:s}))},"Switch Character")))),r(ht,null,r(Be,{flexDirection:"row",style:{gap:12}},r(U,{onClick:()=>{t.store.AutoCloseModal&&e.onClose(),C.toBlob(O=>{let F=new File([O],`${Cl[i].character}-sekai_cards.png`,{type:"image/png"});ls.promptToUpload([F],ne.getChannel(st.getChannelId()),0)})}},"Upload as Attachment"))))}var KTe=x(()=>{"use strict";d();Et();eo();Qs();ut();hV();at();B();jTe();WTe()});var bV,YTe=x(()=>{"use strict";d();bV=()=>r("svg",{width:"20px",height:"20px",viewBox:"0 0 24 24",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},r("defs",{id:"defs1"}),r("g",{display:"inline",transform:"translate(-86.43442,-121.0243)"},r("path",{display:"inline",fill:"#b5bac1",strokeWidth:.322584,d:"m 86.43442,144.56658 c 0,-0.35876 0.49639,-4.87067 0.55373,-5.03306 0.38696,-1.09601 0.56265,-5.24386 0.25974,-6.13243 -2.58179,-7.57364 4.72348,-13.88165 13.967,-12.06035 5.41424,1.0668 7.97981,4.26537 7.8317,9.764 -0.0217,0.80623 -0.035,2.54958 -0.0296,3.8741 0.0104,2.5241 0.0238,2.61704 0.74285,5.15284 0.66615,2.3493 0.88593,4.6371 0.44547,4.6371 -0.19782,0 -0.24112,-0.16283 -0.36885,-1.38734 -0.0796,-0.76304 -0.28215,-1.9292 -0.45012,-2.59146 -0.16797,-0.66226 -0.3891,-1.53393 -0.4914,-1.93704 -0.25872,-1.01952 -0.41856,-2.34765 -0.50404,-4.18822 -0.14085,-3.03288 -0.61199,-5.40629 -1.47053,-7.4079 -0.16673,-0.38872 -0.28108,-0.70676 -0.25411,-0.70676 0.19422,0 1.10671,1.94697 1.52125,3.24587 0.0956,0.29961 0.119,0.17372 0.12811,-0.69002 0.0874,-8.27303 -14.51973,-10.67028 -19.72052,-3.23643 -1.18128,1.68848 -1.50458,3.47584 -1.0567,5.84199 0.22369,1.18176 0.32492,1.21695 0.4298,0.14941 0.32598,-3.3181 1.60403,-6.89879 2.65947,-7.45099 0.22208,-0.11619 0.15983,0.0101 -0.31432,0.63756 -1.8298,2.42147 -2.29566,7.23761 -1.091,11.27894 0.74017,2.48308 2.29757,5.33887 3.16739,5.80803 0.15619,0.0842 0.13676,0.007 -0.083,-0.32927 -1.42439,-2.18071 -2.15792,-4.88443 -2.16071,-7.96411 -10e-4,-1.19072 -0.0114,-1.24021 -0.24849,-1.18773 -0.32456,0.0719 -0.31216,-0.0129 0.0496,-0.33873 0.23647,-0.21301 0.33874,-0.49646 0.50211,-1.39165 0.11283,-0.61829 0.28423,-1.32505 0.38087,-1.57058 0.17572,-0.44642 0.17572,-0.44642 0.10304,-0.0276 -0.15336,0.88365 -0.26391,2.30688 -0.18482,2.3793 0.25449,0.23307 0.97553,-0.0522 1.11288,-0.44029 0.33728,-0.95299 0.32834,-1.36313 -0.0297,-1.36313 -0.45193,0 -0.40969,-0.20048 0.059,-0.27983 0.29327,-0.0496 0.42872,-0.15505 0.56855,-0.44238 0.77872,-1.60023 1.57681,-2.72775 2.8239,-3.98953 0.9045,-0.91517 1.66474,-1.55356 1.66474,-1.39794 0,0.06 -0.11174,0.19462 -0.2483,0.29924 -0.13656,0.10462 -0.52595,0.55664 -0.86532,1.0045 -0.33936,0.44785 -0.67289,0.8435 -0.74119,0.87924 -0.0683,0.0357 -0.12417,0.1196 -0.12417,0.18639 0,0.0668 0.33395,-0.15833 0.74212,-0.50026 0.71666,-0.60035 1.08503,-0.62857 0.40912,-0.0313 -0.39166,0.34608 -0.51475,1.46233 -0.34081,3.09075 0.0982,0.91939 0.0982,0.91939 0.24305,-0.23236 0.0797,-0.63347 0.23686,-1.31667 0.34934,-1.51823 0.20449,-0.36647 0.20449,-0.36647 0.13338,0 -0.0391,0.20156 -0.0874,1.23814 -0.10726,2.30352 -0.0199,1.06537 -0.0141,1.70146 0.0128,1.41352 0.0602,-0.6432 0.50891,-2.99751 0.67356,-3.53381 0.17515,-0.57053 0.34829,-0.48211 0.20501,0.10471 -0.19409,0.79491 -0.18248,3.44559 0.018,4.10968 0.17029,0.56411 0.82376,1.97047 0.98263,2.11477 0.0442,0.0401 0.0828,-0.54882 0.0858,-1.30882 0.007,-1.8427 0.32207,-3.59171 0.95052,-5.2801 0.35913,-0.96484 0.61912,-0.82837 2.2901,1.20211 0.58055,0.70545 1.06761,1.28264 1.08234,1.28264 0.0919,0 -0.35909,-1.76336 -0.62925,-2.46057 -0.35534,-0.91702 -1.2776,-2.50594 -1.9682,-3.3909 -0.24201,-0.31012 -0.41729,-0.58309 -0.38952,-0.6066 0.21026,-0.17799 2.09926,2.19022 2.72926,3.42162 0.19151,0.37432 0.42766,0.7343 0.52478,0.79997 0.20408,0.13796 0.85283,2.30516 0.96726,3.23118 0.16891,1.36698 0.18958,1.4274 0.46321,1.35388 0.1673,-0.045 0.22294,-0.0288 0.16657,0.0484 -0.0465,0.0637 -0.16483,0.11592 -0.26286,0.11592 -0.21774,0 -0.24085,0.20807 -0.0236,0.21272 0.38859,0.008 0.98667,0.62492 0.60614,0.62492 -0.20922,0 -0.23519,0.13624 -0.30436,1.59676 -0.12353,2.60829 -1.12864,6.15531 -2.15183,7.59373 -0.39531,0.55574 -0.40217,0.57961 -0.0968,0.33702 0.43062,-0.34211 1.5512,-2.02996 2.05025,-3.08813 1.43209,-3.03661 1.9725,-10.83668 0.90245,-13.02571 -0.24405,-0.49928 -0.11481,-0.53267 0.17841,-0.0461 0.48707,0.80822 1.24196,2.92433 1.37619,3.85774 0.46142,3.20873 0.51143,4.32555 0.22319,4.98405 -0.1109,0.25334 -0.23558,0.76689 -0.27707,1.14121 -0.13574,1.2246 -0.96944,4.36158 -1.21424,4.56882 -0.0355,0.0301 0.0227,-3.05399 0.072,-3.80971 0.0431,-0.66174 -0.12213,-0.53853 -0.21064,0.15706 -1.05425,8.28558 -0.88932,7.71581 -2.24392,7.75187 -1.12122,0.0299 -1.12122,0.0299 -1.25764,-0.36647 -0.13642,-0.39632 -0.13642,-0.39632 -0.0709,-0.004 0.1039,0.62315 -2.04821,0.61693 -2.42423,-0.007 -0.24056,-0.39917 -0.62998,-0.75697 -0.62998,-0.57881 0,0.0518 0.076,0.18717 0.16887,0.30076 0.55198,0.67509 0.54535,0.6777 -1.72001,0.6777 -2.27573,0 -2.12438,0.0626 -1.83601,-0.75911 0.13997,-0.39886 -0.19031,-0.15481 -0.35426,0.26177 -0.17514,0.44499 -0.17514,0.44499 -2.71328,0.47325 -2.95541,0.0329 -2.7088,0.38268 -2.76751,-3.92543 -0.0275,-2.01757 -0.0776,-2.65971 -0.24528,-3.14116 -0.1159,-0.33283 -0.28821,-0.88786 -0.3829,-1.23339 -0.30644,-1.11814 -0.66292,-1.5995 -0.66292,-0.89515 0,0.16994 -0.0524,0.53509 -0.11643,0.81147 -0.62291,2.68843 -0.90367,4.55514 -1.07164,7.12511 -0.0774,1.18466 -0.66722,2.13971 -0.66722,1.08044 z m 15.27201,-1.08044 c -0.0466,-0.18716 -0.13035,-0.38154 -0.18615,-0.43196 -0.0558,-0.0504 -0.0432,0.10271 0.0281,0.34029 0.15298,0.51021 0.28068,0.58427 0.15807,0.0917 z m -0.34521,-1.04051 c -0.0395,-0.0835 -0.0688,-0.0587 -0.0747,0.0633 -0.005,0.11038 0.0239,0.17222 0.065,0.13743 0.0411,-0.0348 0.0455,-0.1251 0.01,-0.20069 z m -4.76068,-0.37301 c 0.44652,-0.44012 0.28353,-0.96852 -0.29875,-0.96852 -0.18504,0 -0.21834,-0.0485 -0.15294,-0.22296 0.0751,-0.20031 0.0448,-0.21815 -0.29786,-0.17557 -0.2098,0.0261 -0.40098,-0.002 -0.42483,-0.0628 -0.0684,-0.17368 -0.70478,0.23037 -0.70478,0.44748 0,0.2188 0.24545,0.4258 1.00772,0.84982 0.65119,0.36223 0.6401,0.36054 0.87144,0.13251 z m 4.637,-0.0458 c -0.0395,-0.0835 -0.0688,-0.0587 -0.0747,0.0633 -0.005,0.11038 0.0239,0.17222 0.065,0.13743 0.0411,-0.0348 0.0455,-0.1251 0.01,-0.20069 z m -0.24737,-0.62823 c -0.0395,-0.0835 -0.0688,-0.0587 -0.0747,0.0633 -0.005,0.11038 0.0239,0.17222 0.065,0.13743 0.0411,-0.0348 0.0455,-0.1251 0.01,-0.20069 z m 1.89841,-1.97636 c 0.65117,-1.092 1.48984,-4.44506 1.47637,-5.9026 -0.008,-0.81853 -0.32439,-0.12694 -0.4101,0.8952 -0.1632,1.94638 -0.75977,4.29396 -1.33402,5.24958 -0.12977,0.21596 -0.20779,0.39264 -0.17338,0.39264 0.0344,0 0.23293,-0.28566 0.44113,-0.63482 z m -5.16782,0.25136 c -0.085,-0.029 -0.22418,-0.029 -0.30921,0 -0.085,0.0291 -0.0155,0.0528 0.1546,0.0528 0.17007,0 0.23965,-0.0238 0.15461,-0.0528 z m 0.56203,-0.61124 c 0.0829,-0.7159 -1.16941,-0.9194 -1.45092,-0.23577 -0.2219,0.53885 -0.13597,0.59556 0.85797,0.56628 0.52284,-0.0154 0.55879,-0.0354 0.59295,-0.33051 z m -7.02016,-1.17205 c -0.22672,-0.67083 -0.29985,-2.72431 -0.12792,-3.59204 0.3795,-1.91533 0.38175,-1.86763 -0.0775,-1.6454 -0.24642,0.11925 -0.2534,0.15817 -0.11188,0.62453 0.13744,0.45294 0.0322,0.71398 -0.13717,0.34029 -0.28866,-0.63681 -0.40096,0.9802 -0.16725,2.40822 0.14756,0.9016 0.6648,2.65005 0.71776,2.42627 0.0213,-0.0898 -0.022,-0.34268 -0.096,-0.56187 z m 8.29162,0.11839 c 3.0333,-0.42582 3.69254,-0.85737 3.93502,-2.57593 0.084,-0.59518 0.17521,-1.20962 0.20274,-1.36544 0.0382,-0.21586 0.007,-0.26927 -0.13128,-0.22438 -0.22963,0.0746 -0.22775,-0.14354 0.004,-0.48703 0.26742,-0.396 0.23109,-0.69817 -0.0928,-0.77164 -0.61147,-0.13872 -0.65213,-0.10412 -0.60655,0.51612 0.0982,1.33567 -1.49209,2.12697 -2.52214,1.25499 -0.36096,-0.30557 -0.397,-0.51515 -0.0737,-0.42827 0.5512,0.1481 0.89029,-0.28649 0.35756,-0.45826 -0.19181,-0.0619 -0.34043,-0.0434 -0.47825,0.0593 -0.17938,0.13371 -0.20831,0.1049 -0.28096,-0.2797 -0.0714,-0.37818 -0.11207,-0.42041 -0.34441,-0.35799 -0.22142,0.0595 -0.24834,0.0396 -0.16884,-0.12454 0.052,-0.10742 0.12205,-0.276 0.15561,-0.37462 0.14495,-0.42592 1.10686,-0.65834 2.72465,-0.65834 1.7786,0 1.74449,0.0361 1.00299,-1.061 -0.45839,-0.67822 -0.55922,-0.76443 -0.95856,-0.81958 -0.47591,-0.0657 -2.12316,0.0796 -2.37077,0.20915 -0.0923,0.0483 -0.12803,0.0259 -0.0945,-0.0593 0.0945,-0.23991 0.98545,-0.42876 1.86465,-0.39522 0.45933,0.0175 0.83503,0.0217 0.83488,0.009 -7.1e-4,-0.0565 -1.81388,-2.22468 -2.19844,-2.6289 -0.5174,-0.54386 -0.55657,-0.51877 -0.95826,0.61388 -0.64099,1.80737 -0.95672,4.90403 -0.60456,5.9295 0.29095,0.84726 -0.24475,0.63952 -1.31979,-0.5118 -0.49195,-0.52687 -0.60172,-0.21441 -0.22223,0.63261 0.0882,0.19692 0.0707,0.23686 -0.0919,0.20941 -0.38045,-0.0642 -0.77173,-0.92388 -0.96859,-2.12803 -0.10356,-0.63347 -0.27455,-1.4109 -0.37997,-1.72764 -0.25023,-0.7518 -0.44969,-2.63303 -0.3497,-3.29822 0.1148,-0.76368 -0.54507,-0.21749 -1.49044,1.23368 -0.17698,0.27168 -0.46355,0.71163 -0.63682,0.97766 -0.17326,0.26604 -0.29849,0.49652 -0.27829,0.51218 0.0202,0.0156 0.39852,0.10616 0.84069,0.20114 0.44218,0.095 0.88745,0.24649 0.98949,0.33671 0.1669,0.14756 0.15447,0.15602 -0.12368,0.0843 -1.69192,-0.4364 -1.8901,-0.39438 -2.27386,0.48209 -0.45089,1.02975 -0.46625,1.0017 0.58579,1.06905 1.28268,0.0821 2.08966,0.42157 2.12753,0.89492 0.0196,0.24473 -0.0187,0.33193 -0.12981,0.29583 -0.11353,-0.0369 -0.17252,0.12364 -0.21102,0.57418 -0.16429,1.92268 -3.03932,1.66758 -3.0774,-0.27306 -0.0103,-0.52516 -0.0103,-0.52516 -0.19317,0.10307 -0.13175,0.45264 -0.14937,0.72339 -0.0631,0.96868 0.0683,0.19422 0.0716,0.31524 0.008,0.28176 -0.36144,-0.18911 -0.11173,2.34359 0.25697,2.60622 1.21621,0.86633 5.06923,1.33698 7.80326,0.95318 z m -2.23547,-0.44286 c -0.40128,-0.0542 -0.61997,-0.21059 -0.54028,-0.38638 0.0899,-0.1983 0.59018,-0.28212 0.9646,-0.16161 0.59981,0.19305 0.25403,0.63961 -0.42432,0.54799 z m -5.77617,-2.22051 c 0,-0.31674 0.0232,-0.44631 0.0515,-0.28794 0.0283,0.15836 0.0283,0.41751 0,0.57588 -0.0283,0.15836 -0.0515,0.0288 -0.0515,-0.28794 z m 8.45228,-3.66849 c 0.0705,-0.0597 0.34601,-0.13077 0.61224,-0.15799 0.48407,-0.0495 0.48407,-0.0495 0.11301,0.10379 -0.44181,0.18249 -0.91891,0.21814 -0.72525,0.0542 z m -5.61365,-0.0719 c -0.4156,-0.0437 -0.56892,-0.23948 -0.18553,-0.23695 0.35564,0.002 0.77304,0.12125 0.77304,0.2202 0,0.0509 -0.0417,0.085 -0.0928,0.0757 -0.051,-0.009 -0.27366,-0.0358 -0.49474,-0.059 z m 11.86431,4.0032 c 0.91051,-1.01568 0.96795,-2.80233 0.1027,-3.19434 -0.19534,-0.0885 -0.22853,0.0229 -0.3675,1.2339 -0.084,0.73216 -0.22368,1.6041 -0.31037,1.93765 -0.19161,0.73729 -0.0697,0.74212 0.57517,0.0228 z m -13.57383,-1.86879 c 0.10059,-0.13662 0.0878,-0.20411 -0.053,-0.28011 -0.42839,-0.23118 -0.80283,0.0536 -0.49001,0.37267 0.18342,0.18709 0.35917,0.15713 0.54302,-0.0926 z m -4.69093,10.58445 c 0.33919,-2.62937 0.82337,-5.02572 1.16651,-5.77332 0.26221,-0.5713 0.2664,-0.1928 0.01,0.89904 -0.27,1.1495 -0.28827,1.30636 -0.43961,3.77487 -0.0947,1.5444 -0.0947,1.5444 -0.44447,1.5444 -0.33806,0 -0.34786,-0.0149 -0.29238,-0.44499 z m 17.42396,0.11779 c 0.0425,-0.17996 0.0837,-0.75715 0.0915,-1.28264 0.0164,-1.10073 0.14767,-0.77731 0.30285,0.74602 0.0865,0.84938 0.0833,0.86382 -0.19185,0.86382 -0.24745,0 -0.27089,-0.0379 -0.20253,-0.3272 z m 2.01344,-0.9457 c -0.12105,-1.90577 -0.10059,-3.64824 0.0428,-3.64824 0.068,0 0.12443,0.10601 0.12534,0.23558 10e-4,0.12957 0.16714,0.63609 0.36941,1.12558 0.42872,1.03756 0.46106,0.94104 0.12101,-0.36116 -0.406,-1.55473 -0.31155,-1.62968 0.26024,-0.20651 0.98591,2.45382 1.19342,4.12765 0.51173,4.12765 -0.49638,0 -0.49638,0 -0.66376,-0.91617 -0.16738,-0.91617 -0.16738,-0.91617 -0.20312,0 -0.0616,1.58031 -0.45652,1.33041 -0.56368,-0.35673 z"})))});var ZTe,B0t,QTe,d_,XTe=x(()=>{"use strict";d();ma();Q();H();at();$();KTe();YTe();ZTe=R({AutoCloseModal:{type:3,description:"Auto close modal when done",default:!0}}),B0t=()=>r(Lr,{onClick:()=>Ee(e=>r(yV,{modalProps:e,settings:ZTe})),tooltip:"Sekai Stickers"},bV()),QTe=!1,d_=k({name:"SekaiStickers",description:"Sekai Stickers built in discord originally from github.com/TheOriginalAyaka",authors:[w.MaiKokain],settings:ZTe,chatBarButton:{icon:bV,render:B0t},async start(){QTe||([{name:"YurukaStd",url:"https://raw.githubusercontent.com/TheOriginalAyaka/sekai-stickers/47a2ca33b8cb35f59800e8faad48980e4ce5ea71/src/fonts/YurukaStd.woff2"},{name:"SSFangTangTi",url:"https://raw.githubusercontent.com/TheOriginalAyaka/sekai-stickers/main/src/fonts/ShangShouFangTangTi.woff2"}].map(t=>{new FontFace(t.name,`url(${t.url})`).load().then(o=>{document.fonts.add(o)},o=>{console.log(o)})}),QTe=!0)}})});var p_,JTe=x(()=>{"use strict";d();H();$();p_=k({name:"SelfForward",description:"Adds the current channel to the forward list popup",authors:[j.VillainsRule],patches:[{find:".getChannelHistory(),",replacement:[{match:/\i.id\]/,replace:"]"}]}]})});var VTe=x(()=>{});function P0t(){return r("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",id:"vc-searchbutton-icon"},r("path",{fill:"currentColor",fillRule:"evenodd",d:"M15.62 17.03a9 9 0 1 1 1.41-1.41l4.68 4.67a1 1 0 0 1-1.421.42l-4.67-4.68ZM17 10a7 7 0 1 1-14 0 7 7 0 0 1 14 0Z",clipRule:"evenodd"}))}var m_,eIe=x(()=>{"use strict";d();VTe();B0();tt();H();$();B();EO();m_=k({name:"ServerSearch",authors:[j.camila314],description:"Navigate your servers better with a quick search button",renderButton(){return r(ee,{noop:!0},r("div",{id:"vc-searchbutton-container"},r(Ue,{text:"Search",position:"right"},({onMouseEnter:e,onMouseLeave:t})=>r("div",{id:"vc-searchbutton",onMouseEnter:e,onMouseLeave:t,onClick:()=>V.dispatch({type:"QUICKSWITCHER_SHOW",query:"",queryMode:null})},r(P0t,null)))))},start(){kc(0,this.renderButton)},stop(){Ec(0,this.renderButton)}})});var tIe=x(()=>{});var oi,uc,_0t,oIe=x(()=>{"use strict";d();Q();Et();$();B();oi=R({showEquicordDonor:{type:3,description:"Enable to show Equicord Donor badges in chat.",hidden:!0,default:!0},EquicordDonorPosition:{type:1,description:"The position of the Equicord Donor badges.",hidden:!0,default:0},showEquicordContributor:{type:3,description:"Enable to show Equicord Contributor badges in chat.",hidden:!0,default:!0},EquicordContributorPosition:{type:1,description:"The position of the Equicord Contributor badge.",hidden:!0,default:1},showVencordDonor:{type:3,description:"Enable to show Vencord donor badges in chat.",hidden:!0,default:!0},VencordDonorPosition:{type:1,description:"The position of the Vencord Donor badges.",hidden:!0,default:4},showVencordContributor:{type:3,description:"Enable to show Vencord contributor badges in chat.",hidden:!0,default:!0},VencordContributorPosition:{type:1,description:"The position of the Vencord Contributor badge.",hidden:!0,default:5},showDiscordProfile:{type:3,description:"Enable to show Discord profile badges in chat.",hidden:!0,default:!0},DiscordProfilePosition:{type:1,description:"The position of the Discord profile badges.",hidden:!0,default:6},showDiscordNitro:{type:3,description:"Enable to show Discord Nitro badges in chat.",hidden:!0,default:!0},DiscordNitroPosition:{type:1,description:"The position of the Discord Nitro badge.",hidden:!0,default:7},badgeSettings:{type:6,description:"Setup badge layout and visibility",component:()=>r(_0t,null)}}),uc=oi,_0t=()=>{let[e,t]=L([{src:"https://badge.equicord.org/donor.webp",shown:oi.store.showEquicordDonor,title:"Equicord donor badges",key:"EquicordDonor",position:oi.store.EquicordDonorPosition},{src:"https://equicord.org/assets/favicon.png",shown:oi.store.showEquicordContributor,title:"Equicord contributor badge",key:"EquicordContributer",position:oi.store.EquicordContributorPosition},{src:"https://cdn.discordapp.com/emojis/1026533070955872337.png",shown:oi.store.showVencordDonor,title:"Vencord donor badges",key:"VencordDonor",position:oi.store.VencordDonorPosition},{src:"https://cdn.discordapp.com/emojis/1092089799109775453.png",shown:oi.store.showVencordContributor,title:"Vencord contributor badge",key:"VencordContributer",position:oi.store.VencordContributorPosition},{src:"https://cdn.discordapp.com/badge-icons/bf01d1073931f921909045f3a39fd264.png",shown:oi.store.showDiscordProfile,title:"Discord profile badges (HypeSquad, Discord Staff, Early Supporter, etc.)",key:"DiscordProfile",position:oi.store.DiscordProfilePosition},{src:"https://cdn.discordapp.com/badge-icons/2ba85e8026a8614b640c2837bcdfe21b.png",shown:oi.store.showDiscordNitro,title:"Nitro badge",key:"DiscordNitro",position:oi.store.DiscordNitroPosition}]);se(()=>{e.forEach(a=>{switch(a.key){case"EquicordDonor":oi.store.EquicordDonorPosition=a.position,oi.store.showEquicordDonor=a.shown;break;case"EquicordContributer":oi.store.EquicordContributorPosition=a.position,oi.store.showEquicordContributor=a.shown;break;case"VencordDonor":oi.store.VencordDonorPosition=a.position,oi.store.showVencordDonor=a.shown;break;case"VencordContributer":oi.store.VencordContributorPosition=a.position,oi.store.showVencordContributor=a.shown;break;case"DiscordProfile":oi.store.DiscordProfilePosition=a.position,oi.store.showDiscordProfile=a.shown;break;case"DiscordNitro":oi.store.DiscordNitroPosition=a.position,oi.store.showDiscordNitro=a.shown;break;default:break}})},[e]);let o=(a,l)=>{e[l].shown?a.dataTransfer.setData("index",l):a.preventDefault()},n=a=>{a.preventDefault()},i=(a,l)=>{let c=a.dataTransfer.getData("index"),u=[...e],p=u[c];u.splice(c,1),u.splice(l,0,p),u.forEach((m,g)=>{m.position=g}),t(u)},s=a=>{let l=[...e];l[a].shown=!l[a].shown,t(l)};return r(f,null,r(Y,null,"Drag the badges to reorder them, you can click to enable/disable a specific badge type."),r("div",{className:"vc-sbic-badge-settings"},r("img",{className:"vc-sbic-settings-avatar",src:z.getCurrentUser().getAvatarURL()}),r(Y,{className:"vc-sbic-settings-username"},z.getCurrentUser().globalName),e.sort((a,l)=>a.position-l.position).map((a,l)=>r("div",{key:a.key,className:`vc-sbic-image-container ${a.shown?"":"vc-sbic-disabled"}`,onDragOver:c=>n(c),onDrop:c=>i(c,l),onClick:()=>s(l)},r("img",{src:a.src,draggable:a.shown,onDragStart:c=>o(c,l),title:a.title})))))}});function mS({badge:e,author:t}){switch(e){case"EquicordDonor":return r("span",{style:{order:uc.store.EquicordDonorPosition}},Ul.getEquicordDonorBadges(t.id)?.map(n=>r(pS,{key:t.id,className:dS,name:n.description,size:20,src:n.iconSrc})));case"EquicordContributer":return _E(t.id)?r("span",{style:{order:uc.store.EquicordContributorPosition}},r(pS,{className:dS,name:"Equicord Contributor",size:20,src:"https://equicord.org/assets/favicon.png"})):null;case"VencordDonor":return r("span",{style:{order:uc.store.VencordDonorPosition}},Ul.getDonorBadges(t.id)?.map(n=>r(pS,{key:t.id,className:dS,name:n.description,size:20,src:n.iconSrc})));case"VencordContributer":return PE(t.id)?r("span",{style:{order:uc.store.VencordContributorPosition}},r(pS,{className:dS,name:"Vencord Contributor",size:20,src:"https://cdn.discordapp.com/emojis/1092089799109775453.png"})):null;case"DiscordProfile":let o=R0t.filter(n=>(t.flags||t.publicFlags)&1<<n[0]).map(n=>r(pS,{key:t.id,className:dS,name:n[1],size:20,src:`https://cdn.discordapp.com/badge-icons/${n[2]}.png`}));return o.length>0?r("span",{style:{order:uc.store.DiscordProfilePosition}},o):null;case"DiscordNitro":return(t?.premiumType??0)>0?r("span",{style:{order:uc.store.DiscordNitroPosition}},r(pS,{className:dS,name:"Discord Nitro"+(t.premiumType===3?" Basic":t.premiumType===1?" Classic":""),size:20,src:"https://cdn.discordapp.com/badge-icons/2ba85e8026a8614b640c2837bcdfe21b.png"})):null;default:return null}}function L0t({author:e}){return r("span",{className:"vc-sbic-badge-row",style:{margin:"2px"}},uc.store.showEquicordDonor&&r(mS,{badge:"EquicordDonor",author:e}),uc.store.showEquicordContributor&&r(mS,{badge:"EquicordContributer",author:e}),uc.store.showVencordDonor&&r(mS,{badge:"VencordDonor",author:e}),uc.store.showVencordContributor&&r(mS,{badge:"VencordContributer",author:e}),uc.store.showDiscordProfile&&r(mS,{badge:"DiscordProfile",author:e}),uc.store.showDiscordNitro&&r(mS,{badge:"DiscordNitro",author:e}))}var dS,pS,R0t,f_,nIe=x(()=>{"use strict";d();tIe();H();xt();$();fe();_h();oIe();({roleIcon:dS}=et("roleIcon","separator")),pS=De("#{intl::ROLE_ICON_ALT_TEXT}"),R0t=Object.freeze([[0,"Discord Staff","5e74e9b61934fc1f67c65515d1f7e60d"],[1,"Partnered Server Owner","3f9748e53446a137a052f3454e2de41e"],[2,"HypeSquad Events","bf01d1073931f921909045f3a39fd264"],[6,"HypeSquad Bravery","8a88d63823d8a71cd5e390baa45efa02"],[7,"HypeSquad Brilliance","011940fd013da3f7fb926e4a1cd2e618"],[8,"HypeSquad Balance","3aa41de486fa12454c3761e8e223442e"],[3,"Discord Bug Hunter","2717692c7dca7289b35297368a940dd0"],[14,"Discord Bug Hunter","848f79194d4be5ff5f81505cbd0ce1e6"],[17,"Early Verified Bot Developer","6df5892e0f35b051f8b61eace34f4967"],[9,"Early Supporter","7060786766c9c840eb3019e725d2b358"],[18,"Moderator Programs Alumni","fee1624003e2fee35cb398e125dc479b"]]);f_=k({name:"ShowBadgesInChat",authors:[w.Inbestigator,j.KrystalSkull],description:"Shows the message author's badges beside their name in chat.",settings:uc,renderMessageDecoration(e){return e.message?.author?r(L0t,{author:e.message.author}):null}})});function U0t(e,t){return e?.embeds?.some(o=>o?.url===t)||e?.attachments?.some(o=>o?.url===t)}function $0t(e,t){let o=e?.content?.match(/https?:\/\/[^\s]+/g)||[];for(let n of o)if(n===t||iIe(n)===t)return!0;for(let n of e.embeds)if(n.url!==t&&(n.rawDescription?.includes(t)||n.fields.some(i=>i.value.includes(t))))return!0;return!1}function iIe(e){let t=/(https?:\/\/)?(?:m\.|www\.)?(youtu\.be|youtube\.com)\/(embed\/|v\/|watch\?v=|watch\?.+&v=|shorts\/)?((\w|-){11})(?:\S+)?/;if(t.test(e)){let s=new URL(e),a=new URLSearchParams(s.search),l=0;if(a.has("t")||a.has("start")){let c=a.get("start")||a.get("t");if(c&&c.match(/^(?:(\d+h)?(\d+m)?(\d+s)?(\d+)?)?$/)){let u=c.match(/(\d+)h/),p=c.match(/(\d+)m/),m=c.match(/(\d+)s/),g=c.match(/(\d+)$/);u&&(l+=parseInt(u[1])*3600),p&&(l+=parseInt(p[1])*60),m&&(l+=parseInt(m[1])),g&&(l+=parseInt(g[1]))}}e=e.replace(t,`https://www.youtube.com/watch?v=$4${l?"&start="+l:""}`)}let o=/(https?:\/\/(?:www\.)?)x\.com(\/.*)?/;o.test(e)&&(e=e.replace(o,(s,a,l)=>a+"twitter.com"+(l||"")));let n=/(https?:\/\/(?:www\.)?)tiktok\.com(\/.*)?/,i=e.includes("?")?new URLSearchParams(e.split("?")[1]):new URLSearchParams;if(n.test(e)&&!i.has("enable_tiktok_webview")){i.append("enable_tiktok_webview","true");let s=i.toString();e=e.split("?")[0]+(s?"?"+s:"")}return e}async function z0t(e,t){let o=ne.getChannel(t.channel_id);if(!NL(e))return;let n=await Ht.post({url:jo.Endpoints.UNFURL_EMBED_URLS,body:{urls:[e]}}).catch(l=>{g_("Failed to get embed"),vV.error("Failed to get embed",l)});if(!n?.body?.embeds||n.body.embeds.length===0){g_("No embeds found");return}let{embeds:i}=n.body,s=[];for(let l of i)try{let c=H0t(o.id,t.id,l);if(!c){g_("Failed to get embed"),vV.error("embed object couldn't be converted",l);continue}s.push(c)}catch(c){g_("Failed to get embed"),vV.error("Failed to convert embed",c)}let a=[...t.embeds,...s];a.sort((l,c)=>t.content.indexOf(l.url)-t.content.indexOf(c.url)),wc(t.channel_id,t.id,{embeds:a})}function G0t(e,t){let o=t.embeds.filter(n=>n.url!==e);wc(t.channel_id,t.id,{embeds:o})}function g_(e){Re(e,D.Type.FAILURE,{position:D.Position.BOTTOM})}var vV,O0t,F0t,rIe,H0t,h_,sIe=x(()=>{"use strict";d();Un();z1();ao();H();At();xt();$();fe();B();vV=new ke("ShowMessageEmbeds"),O0t=(e,t)=>{if(t.itemSrc||!t.itemHref||!t.message)return;let o=Qt("copy-native-link",e);if(!o)return;let{message:n}=t;rIe(o,n,t.itemHref)},F0t=(e,t)=>{if(!t.attachmentUrl)return;let o=Rt.getMessage(t.channelId,t.messageId);o&&rIe(e,o,t.attachmentUrl)},rIe=(e,t,o)=>{o=iIe(o),U0t(t,o)?$0t(t,o)&&e.splice(0,0,r(M.MenuItem,{id:"vc-sme-remove",label:"Remove Embed",action:n=>G0t(o,t),icon:c0,key:"vc-sme-remove"})):e.splice(0,0,r(M.MenuItem,{id:"vc-sme-show",label:"Show Embed",action:n=>z0t(o,t),icon:Sh,key:"vc-sme-show"}))};H0t=vt('.uniqueId("embed_")');h_=k({name:"ShowMessageEmbeds",description:"Adds a context menu option to show embeds for links that don't have one",authors:[j.Suffocate],patches:[{find:'className:"attachmentLink",',replacement:{match:/(?:(\i).noStyleAndInteraction.*?)attachmentName:\i.attachmentName/,replace:"$&,channelId:$1.channelId,messageId:$1.messageId"}}],contextMenus:{message:O0t,"attachment-link-context":F0t}})});var x_,aIe=x(()=>{"use strict";d();H();$();x_=k({name:"ShowResourceChannels",description:"shows the channels hidden behind the server resources in the channel list",authors:[j.VillainsRule],patches:[{find:".GUILD_DIRECTORY:null",replacement:[{match:/\i\.hideResourceChannels&&/,replace:"false&&"}]}]})});var y_,lIe=x(()=>{"use strict";d();H();$();y_=k({name:"ShowSongName",description:"Shows song name instead of artist for Spotify activity",authors:[w.prism],patches:[{find:'.join(", ");return{text:',replacement:{match:/(?<=.join\(", "\);return\{text:)\i/,replace:"arguments[0]?.details??$&"}}]})});var cIe=x(()=>{});var b_,SV,uIe=x(()=>{"use strict";d();Q();Is();$();B();b_=R({persistSidebar:{type:3,description:"Keep the sidebar chat open across Discord restarts",default:!0},patchCommunity:{type:3,description:"Patch things like the Channel Browser or Members tab that community servers have.",default:!0,restartNeeded:!0}}),SV=_n(()=>{let e={guildId:"",channelId:"",width:0},t={...e};class o extends is.PersistedStore{static persistKey="SidebarStore";initialize(s){if(!b_.store.persistSidebar||!s)return;let{guildId:a,channelId:l,width:c}=s;e.guildId=a||"",e.channelId=l||"",e.width=c||0}getState(){return e}}let n=new o(V,{async VC_SIDEBAR_CHAT_NEW({guildId:i,id:s}){if(t={...e},e.guildId=i||"",e.guildId){e.channelId=s,n.emitChange();return}e.channelId=await xc.getOrEnsurePrivateChannel(s),n.emitChange()},VC_SIDEBAR_CHAT_PREVIOUS(){t.channelId&&(e.guildId=t.guildId,e.channelId=t.channelId),n.emitChange()},VC_SIDEBAR_CHAT_CLOSE(){t={...e},e.guildId="",e.channelId="",n.emitChange()}});return n})});var q0t,j0t,W0t,K0t,Y0t,Q0t,Z0t,X0t,J0t,V0t,egt,tgt,ogt,ngt,rgt,wV,igt,sgt,dIe,agt,kV,v_,lgt,cgt,pIe=x(()=>{"use strict";d();cIe();Hm();tt();H();nt();mt();$();fe();B();uIe();q0t=de("vc-sidebar-chat-"),j0t=De("toolbarClassName:","}),onDoubleClick:"),W0t=De("sidebarState"),K0t=({color:e,...t})=>r("svg",{"aria-hidden":"true",role:"img",xmlns:"http://www.w3.org/2000/svg",fill:e,viewBox:"0 0 24 24",...t},r("path",{d:"M2.3 7.7a1 1 0 0 1 0-1.4l4-4a1 1 0 0 1 1.4 1.4L5.42 6H21a1 1 0 1 1 0 2H5.41l2.3 2.3a1 1 0 1 1-1.42 1.4l-4-4ZM17.7 21.7l4-4a1 1 0 0 0 0-1.4l-4-4a1 1 0 0 0-1.4 1.4l2.29 2.3H3a1 1 0 1 0 0 2h15.59l-2.3 2.3a1 1 0 0 0 1.42 1.4Z"})),Y0t=De("1-1h6a1 1 0 1 0 0-2H5Z"),Q0t=De("1.4L12 13.42l5.3 5.3Z"),Z0t=De("filterAfterTimestamp:","chatInputType"),X0t=De("sidebarType:","RESIZE_HANDLE_WIDTH)"),J0t=De(".GUILD_ANNOUNCEMENT","`channel-"),V0t=De("Missing guestWindow reference"),egt=De(/showFollowButton:\i\?\.type===/),tgt=De('="wanderingCubes"'),ogt=He("FORM","NORMAL"),ngt=He("ThreadSidebar","MessageRequestSidebar"),rgt=et("threadSidebarOpen","loader"),wV=Ft("ChannelSectionStore"),igt=Ds(["&&this.handleActivitiesPopoutClose(),"],new RegExp(Th.source+".{1,250}hasActiveThread")),sgt=Ds(["Missing channel in Channel.renderHeaderToolbar"],new RegExp(Th.source+'.{1,150}name:"ForumChannel"')),dIe=(e,t)=>r(M.MenuItem,{id:`vc-sidebar-chat-${e}`,label:"Open Sidebar Chat",action:()=>{V.dispatch({type:"VC_SIDEBAR_CHAT_NEW",guildId:t,id:e})}}),agt=(e,t)=>{[t.user,t.user.id!==z.getCurrentUser().id].some(n=>!n)||e.push(dIe(t.user.id,null))},kV=(e,t)=>{[t.channel,t.channel.type!==4,Kt.can(Nt.VIEW_CHANNEL,t.channel)].some(n=>!n)||e.push(dIe(t.channel.id,t.channel.guild_id))},v_=k({name:"SidebarChat",authors:[w.Joona],description:"Open a another channel or a DM as a sidebar or as a popout",patches:[{find:'case"pendingFriends":',group:!0,replacement:[{match:/channel_renderer"\);/,replace:"$&const vc_SidebarChat=$self.renderSidebar();"},{match:/return(\(0,\i\.jsxs?\)\(\i\.\i,{}\))}/,replace:"return [$1, vc_SidebarChat]}"},{match:/(case \i\.\i.+?return)(.+?);(?=.+?params\.messageId)(?<=channel_renderer".+?)/g,replace:"$1[$2, vc_SidebarChat];",predicate:()=>b_.store.patchCommunity}]}],settings:b_,contextMenus:{"user-context":agt,"channel-context":kV,"thread-context":kV,"gdm-context":kV},toolboxActions:{"Open Previous Chat"(){V.dispatch({type:"VC_SIDEBAR_CHAT_PREVIOUS"})}},renderSidebar(){let{guild:e,channel:t}=Je([SV,ct,ne],()=>{let{channelId:c,guildId:u}=SV.getState();return{guild:ct.getGuild(u),channel:ne.getChannel(c)}},[]),[o,n]=Je([wV,st,ne],()=>{let c=st.getChannelId(),u=hn.getGuildId();return[wV.getSidebarState(c),wV.getGuildSidebarState(u)]},[]);se(()=>{!t?.id||Rt.getLastMessage(t.id)||Fn.fetchMessages({channelId:t.id,limit:50})},[t?.id]);let[i,s]=L(window.innerWidth);gu(()=>{let c=()=>s(window.innerWidth);return window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[]);let[a,l]=L(null);return se(()=>{t&&(t.isForumLikeChannel()?(sgt().then(()=>{l(r(W0t,{channel:t,guild:e,sidebarState:null}))}),l(r("div",{className:rgt.loader},r(tgt,null)))):l(r(Z0t,{channel:t,guild:e,chatInputType:ogt.SIDEBAR})))},[t]),!t||o||n?null:r(ee,{noop:!0},r(X0t,{sidebarType:ngt.MessageRequestSidebar,maxWidth:~~(i*.31)},r(lgt,{channel:t,guild:e}),a))}}),lgt=({guild:e,channel:t})=>{let o=t.isPrivate()?t.getRecipientId():null,n=Je([z,Tt],()=>{if(!o||t.name)return t.name;let c=z.getUser(o);return Tt.getNickname(o)||c?.globalName||c?.username},[o,t.name]),i=Je([ne],()=>ne.getChannel(t?.parent_id),[t?.parent_id]),s=()=>V.dispatch({type:"VC_SIDEBAR_CHAT_CLOSE"}),a=gn(async()=>{await igt(),qO.open(`DISCORD_VC_SC-${t.id}`,()=>r(cgt,{channel:t,name:n}),{defaultWidth:854,defaultHeight:480})},[t,n]),l=gn(()=>{let c=Cn();V.dispatch({type:"VC_SIDEBAR_CHAT_NEW",guildId:c.guild_id,id:c.id}),pa.transitionToChannel(t.id)},[t.id]);return r(j0t,{toolbar:r(f,null,r(ul,{icon:K0t,tooltip:"Switch channels",onClick:l}),r(ul,{icon:Y0t,tooltip:"Popout Chat",onClick:a}),r(ul,{icon:Q0t,tooltip:"Close Sidebar Chat",onClick:s}))},r(J0t,{channel:t,channelName:n,guild:e,parentChannel:i}))},cgt=ee.wrap(({channel:e,name:t})=>r(V0t,{withTitleBar:!0,windowKey:`DISCORD_VC_SC-${e.id}`,title:t||"Equicord",channelId:e.id,contentClassName:q0t("popout")},r(egt,{providedChannel:e})))});function dgt(){return r("svg",{width:"20",height:"20",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 21.333"},r("path",{fill:"currentColor",d:"M2 4.621a.5.5 0 0 1 .854-.353l6.01 6.01c.126.126.17.31.15.487a2 2 0 1 0 1.751-1.751a.59.59 0 0 1-.487-.15l-6.01-6.01A.5.5 0 0 1 4.62 2H11a9 9 0 0 1 8.468 12.054l2.24 2.239a1 1 0 0 1 0 1.414l-4 4a1 1 0 0 1-1.415 0l-2.239-2.239A9 9 0 0 1 2 11z"}))}function mgt(e){return`${e}
${Qa.store.textHeader?Qa.store.textHeader+" ":""}${Qa.store.name}`}var Qa,ugt,pgt,S_,mIe=x(()=>{"use strict";d();ma();yi();Un();Q();H();$();B();Qa=R({name:{type:0,description:"The signature that will be added to the end of your messages",default:"a chronic discord user"},textHeader:{description:"What header to preface text with",type:0,default:">"},showIcon:{type:3,default:!0,description:"Show an icon for toggling the plugin in the chat bar",restartNeeded:!0},contextMenu:{type:3,description:"Add option to toggle the functionality in the chat input context menu",default:!0},isEnabled:{type:3,description:"Toggle functionality",default:!0}}),ugt=({isMainChat:e})=>{let{isEnabled:t,showIcon:o}=Qa.use(["isEnabled","showIcon"]),n=()=>Qa.store.isEnabled=!Qa.store.isEnabled;return!e||!o?null:r(Lr,{tooltip:t?"Disable Signature":"Enable Signature",onClick:n},r("svg",{width:"20",height:"20",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 21.333"},r("path",{fill:"currentColor",mask:"url(#signature-msg-mask)",d:"M2 4.621a.5.5 0 0 1 .854-.353l6.01 6.01c.126.126.17.31.15.487a2 2 0 1 0 1.751-1.751a.59.59 0 0 1-.487-.15l-6.01-6.01A.5.5 0 0 1 4.62 2H11a9 9 0 0 1 8.468 12.054l2.24 2.239a1 1 0 0 1 0 1.414l-4 4a1 1 0 0 1-1.415 0l-2.239-2.239A9 9 0 0 1 2 11z"}),t&&r(f,null,r("mask",{id:"signature-msg-mask"}," ",r("path",{fill:"#fff",d:"M0 0h24v24H0Z"}),r("path",{stroke:"#000",strokeWidth:"5.99068",d:"M0 24 24 0"})," "),r("path",{fill:"var(--status-danger)",d:"m21.178 1.70703 1.414 1.414L4.12103 21.593l-1.414-1.415L21.178 1.70703Z"}))))};pgt=e=>{let{isEnabled:t,contextMenu:o}=Qa.use(["isEnabled","contextMenu"]);if(!o)return;let n=Qt("submit-button",e);if(!n)return;let i=n.findIndex(s=>s?.props?.id==="submit-button");n.splice(i+1,0,r(M.MenuCheckboxItem,{id:"vc-Signature",label:"Enable Signature",checked:t,action:()=>Qa.store.isEnabled=!Qa.store.isEnabled}))},S_=k({name:"Signature",description:"Automated fingerprint/end text",authors:[w.Ven,w.Rini,w.ImBanana,j.KrystalSkull],onBeforeMessageSend(e,t){Qa.store.isEnabled?t.content=mgt(t.content):t.content=t.content},start:()=>{Qa.store.isEnabled},stop:()=>{Qa.store.isEnabled},chatBarButton:{icon:dgt,render:ugt},settings:Qa,contextMenus:{"textarea-context":pgt},commands:[{name:"signature",description:"Toggle your signature",inputType:0,options:[{name:"value",description:"Toggle your signature (default is toggle)",required:!1,type:5}],execute:async(e,t)=>{Qa.store.isEnabled=!!Pt(e,"value",!Qa.store.isEnabled),Vt(t.channel.id,{content:Qa.store.isEnabled?"Signature enabled!":"Signature disabled!"})}}]})});var fgt,fIe,dc,EV,ggt,Vk,ih,w_,gIe=x(()=>{"use strict";d();Q();ut();wt();H();$();B();fgt=`
#snowfield {
    pointer-events: none;
    user-select: none;
    z-index: 100000;
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
}
.snowflake {
    position: absolute;
    color: #fff;
    line-height: 1;
    -webkit-font-smoothing: antialiased;
}
.snowflake-solid {
    border-radius: 50%;
    background: #ffffff;
}
.snowflake-image {
    filter: drop-shadow(0 0 2px rgba(255, 255, 255, 0.5));
}
`,fIe=["data:image/svg+xml,"+encodeURIComponent(`
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
            <path fill="white" d="M50,10 L55,45 L50,50 L45,45 Z M50,90 L55,55 L50,50 L45,55 Z M10,50 L45,55 L50,50 L45,45 Z M90,50 L55,55 L50,50 L55,45 Z M25,25 L45,45 L50,40 L40,30 Z M75,75 L55,55 L50,60 L60,70 Z M75,25 L55,45 L60,50 L70,40 Z M25,75 L45,55 L40,50 L30,60 Z"/>
            <circle cx="50" cy="50" r="8" fill="white"/>
        </svg>
    `),"data:image/svg+xml,"+encodeURIComponent(`
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
            <g fill="white">
                <rect x="47" y="5" width="6" height="90" rx="2"/>
                <rect x="5" y="47" width="90" height="6" rx="2"/>
                <rect x="47" y="5" width="6" height="90" rx="2" transform="rotate(45 50 50)"/>
                <rect x="47" y="5" width="6" height="90" rx="2" transform="rotate(-45 50 50)"/>
                <circle cx="50" cy="50" r="10" fill="white"/>
            </g>
        </svg>
    `),"data:image/svg+xml,"+encodeURIComponent(`
        <svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
            <defs>
                <symbol id="discord" viewBox="0 0 24 24">
                    <path d="M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.946 2.4189-2.1568 2.4189Z"/>
                </symbol>
            </defs>
            <!-- snowflake arms -->
            <line x1="100" y1="100" x2="150" y2="100" stroke="#FFF" stroke-width="1.5" stroke-linecap="round"/>
            <line x1="100" y1="100" x2="125" y2="143.3" stroke="#FFF" stroke-width="1.5" stroke-linecap="round"/>
            <line x1="100" y1="100" x2="75" y2="143.3" stroke="#FFF" stroke-width="1.5" stroke-linecap="round"/>
            <line x1="100" y1="100" x2="50" y2="100" stroke="#FFF" stroke-width="1.5" stroke-linecap="round"/>
            <line x1="100" y1="100" x2="75" y2="56.7" stroke="#FFF" stroke-width="1.5" stroke-linecap="round"/>
            <line x1="100" y1="100" x2="125" y2="56.7" stroke="#FFF" stroke-width="1.5" stroke-linecap="round"/>
            <!-- circle mask -->
            <mask id="logoMask">
                <rect width="200" height="200" fill="white"/>
                <circle cx="150" cy="100" r="18" fill="black"/> <!-- right -->
                <circle cx="125" cy="143.3" r="18" fill="black"/> <!-- top-right -->
                <circle cx="75" cy="143.3" r="18" fill="black"/> <!-- top-left -->
                <circle cx="50" cy="100" r="18" fill="black"/> <!-- left -->
                <circle cx="75" cy="56.7" r="18" fill="black"/> <!-- bottom-left -->
                <circle cx="125" cy="56.7" r="18" fill="black"/> <!-- bottom-right -->
            </mask>
            <!-- circle behind all elements -->
            <circle cx="100" cy="100" r="50" stroke="#FFF" stroke-width="1.5" fill="none" stroke-linecap="round" mask="url(#logoMask)" />
            <use href="#discord" fill="#FFF" x="135" y="85" width="30" height="30" transform="rotate(90, 150, 100)"/>
            <use href="#discord" fill="#FFF" x="110" y="128.3" width="30" height="30" transform="rotate(150, 125, 143.3)"/>
            <use href="#discord" fill="#FFF" x="60" y="128.3" width="30" height="30" transform="rotate(210, 75, 143.3)"/>
            <use href="#discord" fill="#FFF" x="35" y="85" width="30" height="30" transform="rotate(270, 50, 100)"/>
            <use href="#discord" fill="#FFF" x="60" y="41.7" width="30" height="30" transform="rotate(330, 75, 56.7)"/>
            <use href="#discord" fill="#FFF" x="110" y="41.7" width="30" height="30" transform="rotate(30, 125, 56.7)"/>
        </svg>
    `)],dc=R({typeOfSnow:{description:"Change the type of snow displayed (Affects performance).",type:4,options:[{label:"Solid (Highest Performance)",value:"solid"},{label:"Text (Medium Performance)",value:"text",default:!0},{label:"Image (Lowest Performance)",value:"image"}]},maxSize:{description:"Maximum snowflake size",type:5,default:30,markers:[10,20,30,40,50]},speed:{description:"Snowfall speed (higher = faster fall)",type:5,default:50,markers:[50,100,200,300,400,500]},flakesPerSecond:{description:"Snowflakes per second (higher = denser snowfall)",type:5,default:5,markers:[1,5,10,20,40,60],min:1,max:60}}),EV=class e{static winWidth=window.innerWidth;static winHeight=window.innerHeight;static defaultOptions={minSize:10,maxSize:30,type:"text",content:"\u2744",fadeOut:!0,autoplay:!0,interval:200};static cssPrefix(t){let o=t.charAt(0).toUpperCase()+t.slice(1),n=document.createElement("div"),{style:i}=n,s=["Webkit","Moz","ms","O"];if(t in i)return t;for(let a of s){let l=a+o;if(l in i)return l}return null}static cssPrefixedNames={transform:this.cssPrefix("transform"),transition:this.cssPrefix("transition")};static transitionEndEvent={WebkitTransition:"webkitTransitionEnd",OTransition:"oTransitionEnd",Moztransition:"transitionend",transition:"transitionend"}[this.cssPrefixedNames.transition??"transition"]??"transitionend";static random(t,o,n){return n!==void 0?(n*=o,o+=n,t=o-n):t=t||0,Math.floor(Math.random()*(o-t+1)+t)}static setStyle(t,o){for(let[n,i]of Object.entries(o)){let s=e.cssPrefixedNames[n]||n;t.style[s]=i}}options={...e.defaultOptions};queue=[];$snowfield;timer=null;playing=!1;constructor(t={}){Object.assign(this.options,t),this.$snowfield=document.createElement("div"),this.$snowfield.id="snowfield",document.body.appendChild(this.$snowfield);let o=()=>{e.winHeight=window.innerHeight,e.winWidth=window.innerWidth};window.addEventListener("resize",o),this._resizeHandler=o,this.$snowfield.addEventListener(e.transitionEndEvent,i=>{let s=i.target;s.classList.contains("snowflake")&&(this.$snowfield.removeChild(s),this.queue.push(s))});let n=()=>{document.hidden?this.stop():this.play()};document.addEventListener("visibilitychange",n),this._visibilityHandler=n,this.options.autoplay&&this.play()}createSnowflake(){let{type:t,content:o}=this.options,n=Array.isArray(o)?o.length:1,i;if(t==="image"){i=document.createElement("img");let s=typeof o=="string"?o:o[Math.floor(Math.random()*n)];i.src=s,i.setAttribute("draggable","false")}else if(i=document.createElement("div"),t==="text"){let s=typeof o=="string"?o:o[Math.floor(Math.random()*n)];i.textContent=s}return i.className=`snowflake snowflake-${t}`,i.dataset.type=t,i}animateSnowflake(){let{winWidth:t,winHeight:o}=e,n=e.random(this.options.minSize,this.options.maxSize),i=-2*n,s=e.random(0,t-n),a=e.random(5,10)/10,l=e.random(0,o*.8,1),c=e.random(-100,100),u=o+n*2,p=dc.store.speed,m=o*10/(p/50),g;if(this.queue.length>0){let b=this.queue.shift();if(b.dataset.type!==this.options.type)g=this.createSnowflake();else if(g=b,this.options.type==="text"){let{content:v}=this.options;Array.isArray(v)&&(g.textContent=v[Math.floor(Math.random()*v.length)])}else if(this.options.type==="image"){let{content:v}=this.options;Array.isArray(v)&&(g.src=v[Math.floor(Math.random()*v.length)])}}else g=this.createSnowflake();let y={top:`${i}px`,left:`${s}px`,opacity:a,transform:"none",transition:`${m}ms linear`};switch(this.options.type){case"solid":y.width=y.height=`${n}px`;break;case"text":y.fontSize=`${n}px`;break;case"image":y.width=`${n}px`,y.height="auto";break}e.setStyle(g,y),this.$snowfield.appendChild(g),setTimeout(()=>{e.setStyle(g,{transform:`translate(${c}px, ${u}px) rotate(${l}deg)`,opacity:this.options.fadeOut?0:a})},100)}play(){this.playing||(this.timer=window.setInterval(()=>this.animateSnowflake(),this.options.interval),this.playing=!0)}stop(){this.playing&&(this.timer!==null&&(clearInterval(this.timer),this.timer=null),this.playing=!1)}destroy(){this.stop(),this.$snowfield.parentNode&&this.$snowfield.remove(),window.removeEventListener("resize",this._resizeHandler),document.removeEventListener("visibilitychange",this._visibilityHandler)}updateOptions(t){Object.assign(this.options,t)}},ggt=()=>{let e=X.useRef(null),t=X.useRef(null);return X.useEffect(()=>{let o=document.createElement("style");o.id="snowfall-styles",o.textContent=fgt,document.head.appendChild(o),t.current=o;let n=dc.store.typeOfSnow,i={autoplay:!1,type:n,maxSize:dc.store.maxSize,interval:1e3/dc.store.flakesPerSecond};i.interval=dc.store.speed,n==="image"&&(i.content=fIe);let s=new EV(i);e.current=s;let a=()=>s.stop(),l=()=>{document.hasFocus()&&s.play()};window.addEventListener("blur",a),window.addEventListener("focus",l),document.hasFocus()&&s.play();let c={type:dc.store.typeOfSnow,maxSize:dc.store.maxSize,speed:dc.store.speed,flakesPerSecond:dc.store.flakesPerSecond},u=setInterval(()=>{let p={type:dc.store.typeOfSnow,maxSize:dc.store.maxSize,speed:dc.store.speed,flakesPerSecond:dc.store.flakesPerSecond};if(Object.keys(p).some(m=>p[m]!==c[m])){c=p;let m={type:p.type,maxSize:p.maxSize,interval:1e3/p.flakesPerSecond};p.type==="image"?m.content=fIe:p.type==="text"&&(m.content="\u2744"),s.updateOptions(m)}},5e3);return()=>{s.destroy(),e.current=null,window.removeEventListener("blur",a),window.removeEventListener("focus",l),clearInterval(u),o.parentNode&&o.remove(),t.current=null;let p=document.getElementById("snowfield");p&&p.remove()}},[]),null},Vk=null,ih=null,w_=k({name:"Snowfall",description:"Let it snow on Discord! Ported from the BetterDiscord plugin by square.",authors:[j.ZcraftElite,j.square],settingsAboutComponent:()=>r(f,null,r(re,null,"Information"),r(W,null,"This plugin adds a christmas-y snowfall effect on top of Discord's interface. You can change the type of snow in the settings below.",r("br",null),r("br",null),"NOTE: While on most computers this plugin will not impact performance any more than your average Equicord extension, it may cause some lag on lower end systems.")),settings:dc,start(){ih=document.createElement("div"),ih.id="snowfall-plugin-container",document.body.appendChild(ih),Vk=Ms(ih),Vk.render(r(ggt,null))},stop(){Vk&&(Vk.unmount(),Vk=null),ih&&(ih.parentNode&&ih.remove(),ih=null)}})});function hIe(e,t){fS?.delete(),fS=fd(e,{volume:t,preload:!0,persistent:!0}),fS.load()}function xIe(e,t){eE?.delete(),eE=fd(e,{volume:t,preload:!0,persistent:!0}),eE.load()}function hgt(e){Zc.store.songVolume!==0&&X.useEffect(()=>(fS?.loop(),()=>{fS?.stop()}),[]);let t=o=>{let{offsetX:n,offsetY:i}=o.nativeEvent,s={x:155,y:220,width:70,height:70};Zc.store.boopVolume!==0&&n>=s.x&&n<=s.x+s.width&&i>=s.y&&i<=s.y+s.height&&eE?.play()};return r(Pe,{...e},r("img",{src:Zc.store.imageLink,onClick:t,style:{display:"block"}}))}function xgt(){Ee(e=>r(hgt,{...e}))}function ygt(){return r(ul,{className:"soggy-button",tooltip:Zc.store.tooltipText,icon:()=>r("img",{alt:"",src:Zc.store.imageLink,width:24,height:24,draggable:!1,style:{pointerEvents:"none"}}),onClick:()=>xgt(),selected:!1})}var eE,fS,Zc,k_,yIe=x(()=>{"use strict";d();Ol();Hm();Q();H();at();$();B();Zc=R({songVolume:{description:"Volume of the song. 0 to disable",type:5,default:.25,markers:[0,.25,.5,.75,1],stickToMarkers:!1},boopVolume:{description:"Volume of the boop sound",type:5,default:.2,markers:[0,.25,.5,.75,1],stickToMarkers:!1},tooltipText:{description:"The text shown when hovering over the button",type:0,default:"the soggy"},imageLink:{description:"URL for the image (button and modal)",type:0,default:"https://equicord.org/assets/plugins/soggy/cat.png"},songLink:{description:"URL for the song to play",type:0,default:"https://github.com/Equicord/Equibored/raw/main/sounds/soggy/song.mp3?raw=true",onChange(e){hIe(e,Zc.store.songVolume*100)}},boopLink:{description:"URL for the boop sound",type:0,default:"https://github.com/Equicord/Equibored/raw/main/sounds/soggy/honk.wav?raw=true",onChange(e){xIe(e,Zc.store.boopVolume*100)}}}),k_=k({name:"Soggy",description:"Adds a soggy button to the toolbox",authors:[j.sliwka],settings:Zc,dependencies:["AudioPlayerAPI"],headerBarButton:{icon:()=>r("img",{alt:"",src:Zc.store.imageLink,width:24,height:24,draggable:!1,style:{pointerEvents:"none"}}),render:ygt},start(){xIe(Zc.store.boopLink,Zc.store.boopVolume*100),hIe(Zc.store.songLink,Zc.store.songVolume*100)},stop(){eE?.delete(),fS?.delete()}})});async function bIe(e){let t=await E_();if(!t)await Oe.set("SoundBoardLogList",[{...e,users:[{id:e.userId,plays:[+Date.now()]}]}]);else{if(t.some(i=>i.soundId===e.soundId)){let i=t.map(s=>s.soundId!==e.soundId?s:{...s,users:s.users.some(a=>a.id===e.userId)?s.users.map(a=>a.id!==e.userId?a:{id:e.userId,plays:[...a.plays,+Date.now()]}):[...s.users,{id:e.userId,plays:[+Date.now()]}]});await Oe.set("SoundBoardLogList",i);return}let o=Qf.store.SavedIds??50;o===0&&(o=1/0);let n=[{...e,users:[{id:e.userId,plays:[+Date.now()]}]},...t].slice(0,o);await Oe.set("SoundBoardLogList",n)}}async function vIe(){await Oe.set("SoundBoardLogList",[])}async function E_(){let e=await Oe.get("SoundBoardLogList");return e||(Oe.set("SoundBoardLogList",[]),[])}var AV=x(()=>{"use strict";d();dr();tE()});function SIe(e,t,o){let n=Ee(i=>r(ee,null,r(Pe,{...i},r(wIe,{item:e,users:t,onClickUser:o,closeModal:()=>vo(n)}))))}function wIe({item:e,users:t,onClickUser:o,closeModal:n}){return r($e,{className:Gn("more")},r("div",{className:Gn("more-header")},r("img",{className:Gn("more-emoji"),src:qy(e.emoji),alt:""}),r(Jo,{className:Gn("more-soundId")},e.soundId)),r("div",{className:Gn("more-users")},t.map(i=>{let s=e.users.find(({id:a})=>a===i.id)??{id:"",plays:[0]};return r(en,{onClick:()=>{n(),o(e,i)},key:i.id},r("div",{className:Gn("more-user"),style:{cursor:"pointer"}},r(Be,{flexDirection:"row",className:Gn("more-user-profile")},r("img",{className:Gn("user-avatar"),src:i.getAvatarURL(void 0,512,!0),alt:"",style:{cursor:"pointer"}}),r(Y,{size:"xs",weight:"medium",style:{cursor:"pointer"}},i.username)),r(Y,{size:"xs",weight:"medium",style:{cursor:"pointer"}},"Played ",s.plays.length," ",s.plays.length===1?"time":"times")))})))}var kIe=x(()=>{"use strict";d();Et();tt();eo();ut();gS();at();B()});var EIe=Ro((CV,hS)=>{d();(function(e,t){typeof CV=="object"&&typeof hS<"u"?hS.exports=t():typeof define=="function"&&define.amd?define(t):e.moment=t()})(CV,(function(){"use strict";var e;function t(){return e.apply(null,arguments)}function o(h){e=h}function n(h){return h instanceof Array||Object.prototype.toString.call(h)==="[object Array]"}function i(h){return h!=null&&Object.prototype.toString.call(h)==="[object Object]"}function s(h,S){return Object.prototype.hasOwnProperty.call(h,S)}function a(h){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(h).length===0;var S;for(S in h)if(s(h,S))return!1;return!0}function l(h){return h===void 0}function c(h){return typeof h=="number"||Object.prototype.toString.call(h)==="[object Number]"}function u(h){return h instanceof Date||Object.prototype.toString.call(h)==="[object Date]"}function p(h,S){var T=[],P,q=h.length;for(P=0;P<q;++P)T.push(S(h[P],P));return T}function m(h,S){for(var T in S)s(S,T)&&(h[T]=S[T]);return s(S,"toString")&&(h.toString=S.toString),s(S,"valueOf")&&(h.valueOf=S.valueOf),h}function g(h,S,T,P){return cte(h,S,T,P,!0).utc()}function y(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function b(h){return h._pf==null&&(h._pf=y()),h._pf}var v;Array.prototype.some?v=Array.prototype.some:v=function(h){var S=Object(this),T=S.length>>>0,P;for(P=0;P<T;P++)if(P in S&&h.call(this,S[P],P,S))return!0;return!1};function E(h){var S=null,T=!1,P=h._d&&!isNaN(h._d.getTime());if(P&&(S=b(h),T=v.call(S.parsedDateParts,function(q){return q!=null}),P=S.overflow<0&&!S.empty&&!S.invalidEra&&!S.invalidMonth&&!S.invalidWeekday&&!S.weekdayMismatch&&!S.nullInput&&!S.invalidFormat&&!S.userInvalidated&&(!S.meridiem||S.meridiem&&T),h._strict&&(P=P&&S.charsLeftOver===0&&S.unusedTokens.length===0&&S.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(h))h._isValid=P;else return P;return h._isValid}function A(h){var S=g(NaN);return h!=null?m(b(S),h):b(S).userInvalidated=!0,S}var C=t.momentProperties=[],I=!1;function N(h,S){var T,P,q,ue=C.length;if(l(S._isAMomentObject)||(h._isAMomentObject=S._isAMomentObject),l(S._i)||(h._i=S._i),l(S._f)||(h._f=S._f),l(S._l)||(h._l=S._l),l(S._strict)||(h._strict=S._strict),l(S._tzm)||(h._tzm=S._tzm),l(S._isUTC)||(h._isUTC=S._isUTC),l(S._offset)||(h._offset=S._offset),l(S._pf)||(h._pf=b(S)),l(S._locale)||(h._locale=S._locale),ue>0)for(T=0;T<ue;T++)P=C[T],q=S[P],l(q)||(h[P]=q);return h}function _(h){N(this,h),this._d=new Date(h._d!=null?h._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),I===!1&&(I=!0,t.updateOffset(this),I=!1)}function O(h){return h instanceof _||h!=null&&h._isAMomentObject!=null}function F(h){t.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+h)}function J(h,S){var T=!0;return m(function(){if(t.deprecationHandler!=null&&t.deprecationHandler(null,h),T){var P=[],q,ue,ze,Ot=arguments.length;for(ue=0;ue<Ot;ue++){if(q="",typeof arguments[ue]=="object"){q+=`
[`+ue+"] ";for(ze in arguments[0])s(arguments[0],ze)&&(q+=ze+": "+arguments[0][ze]+", ");q=q.slice(0,-2)}else q=arguments[ue];P.push(q)}F(h+`
Arguments: `+Array.prototype.slice.call(P).join("")+`
`+new Error().stack),T=!1}return S.apply(this,arguments)},S)}var G={};function te(h,S){t.deprecationHandler!=null&&t.deprecationHandler(h,S),G[h]||(F(S),G[h]=!0)}t.suppressDeprecationWarnings=!1,t.deprecationHandler=null;function K(h){return typeof Function<"u"&&h instanceof Function||Object.prototype.toString.call(h)==="[object Function]"}function oe(h){var S,T;for(T in h)s(h,T)&&(S=h[T],K(S)?this[T]=S:this["_"+T]=S);this._config=h,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function le(h,S){var T=m({},h),P;for(P in S)s(S,P)&&(i(h[P])&&i(S[P])?(T[P]={},m(T[P],h[P]),m(T[P],S[P])):S[P]!=null?T[P]=S[P]:delete T[P]);for(P in h)s(h,P)&&!s(S,P)&&i(h[P])&&(T[P]=m({},T[P]));return T}function he(h){h!=null&&this.set(h)}var Ae;Object.keys?Ae=Object.keys:Ae=function(h){var S,T=[];for(S in h)s(h,S)&&T.push(S);return T};var Ce={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function ye(h,S,T){var P=this._calendar[h]||this._calendar.sameElse;return K(P)?P.call(S,T):P}function ce(h,S,T){var P=""+Math.abs(h),q=S-P.length,ue=h>=0;return(ue?T?"+":"":"-")+Math.pow(10,Math.max(0,q)).toString().substr(1)+P}var pe=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,xe=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Ze={},ge={};function ae(h,S,T,P){var q=P;typeof P=="string"&&(q=function(){return this[P]()}),h&&(ge[h]=q),S&&(ge[S[0]]=function(){return ce(q.apply(this,arguments),S[1],S[2])}),T&&(ge[T]=function(){return this.localeData().ordinal(q.apply(this,arguments),h)})}function Ne(h){return h.match(/\[[\s\S]/)?h.replace(/^\[|\]$/g,""):h.replace(/\\/g,"")}function Fe(h){var S=h.match(pe),T,P;for(T=0,P=S.length;T<P;T++)ge[S[T]]?S[T]=ge[S[T]]:S[T]=Ne(S[T]);return function(q){var ue="",ze;for(ze=0;ze<P;ze++)ue+=K(S[ze])?S[ze].call(q,h):S[ze];return ue}}function Xe(h,S){return h.isValid()?(S=It(S,h.localeData()),Ze[S]=Ze[S]||Fe(S),Ze[S](h)):h.localeData().invalidDate()}function It(h,S){var T=5;function P(q){return S.longDateFormat(q)||q}for(xe.lastIndex=0;T>=0&&xe.test(h);)h=h.replace(xe,P),xe.lastIndex=0,T-=1;return h}var Ve={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function _t(h){var S=this._longDateFormat[h],T=this._longDateFormat[h.toUpperCase()];return S||!T?S:(this._longDateFormat[h]=T.match(pe).map(function(P){return P==="MMMM"||P==="MM"||P==="DD"||P==="dddd"?P.slice(1):P}).join(""),this._longDateFormat[h])}var Wt="Invalid date";function po(){return this._invalidDate}var no="%d",mo=/\d{1,2}/;function Sn(h){return this._ordinal.replace("%d",h)}var Br={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function be(h,S,T,P){var q=this._relativeTime[T];return K(q)?q(h,S,T,P):q.replace(/%d/i,h)}function Qe(h,S){var T=this._relativeTime[h>0?"future":"past"];return K(T)?T(S):T.replace(/%s/i,S)}var lt={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function we(h){return typeof h=="string"?lt[h]||lt[h.toLowerCase()]:void 0}function Te(h){var S={},T,P;for(P in h)s(h,P)&&(T=we(P),T&&(S[T]=h[P]));return S}var ft={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function Qo(h){var S=[],T;for(T in h)s(h,T)&&S.push({unit:T,priority:ft[T]});return S.sort(function(P,q){return P.priority-q.priority}),S}var ro=/\d/,Bn=/\d\d/,kr=/\d{3}/,hi=/\d{4}/,lr=/[+-]?\d{6}/,Eo=/\d\d?/,t0=/\d\d\d\d?/,Ca=/\d\d\d\d\d\d?/,gm=/\d{1,3}/,uh=/\d{1,4}/,op=/[+-]?\d{1,6}/,eu=/\d+/,Xa=/[+-]?\d+/,dh=/Z|[+-]\d\d:?\d\d/gi,Ja=/Z|[+-]\d\d(?::?\d\d)?/gi,ph=/[+-]?\d+(\.\d{1,3})?/,Vu=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,tu=/^[1-9]\d?/,hm=/^([1-9]\d|\d)/,ou;ou={};function Le(h,S,T){ou[h]=K(S)?S:function(P,q){return P&&T?T:S}}function Ye(h,S){return s(ou,h)?ou[h](S._strict,S._locale):new RegExp(fo(h))}function fo(h){return nu(h.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(S,T,P,q,ue){return T||P||q||ue}))}function nu(h){return h.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Dl(h){return h<0?Math.ceil(h)||0:Math.floor(h)}function ln(h){var S=+h,T=0;return S!==0&&isFinite(S)&&(T=Dl(S)),T}var IS={};function Jn(h,S){var T,P=S,q;for(typeof h=="string"&&(h=[h]),c(S)&&(P=function(ue,ze){ze[S]=ln(ue)}),q=h.length,T=0;T<q;T++)IS[h[T]]=P}function mh(h,S){Jn(h,function(T,P,q,ue){q._w=q._w||{},S(T,q._w,q,ue)})}function ZR(h,S,T){S!=null&&s(IS,h)&&IS[h](S,T._a,T,h)}function Zy(h){return h%4===0&&h%100!==0||h%400===0}var Ys=0,ed=1,ru=2,Fi=3,fc=4,td=5,Er=6,Xy=7,Jy=8;ae("Y",0,0,function(){var h=this.year();return h<=9999?ce(h,4):"+"+h}),ae(0,["YY",2],0,function(){return this.year()%100}),ae(0,["YYYY",4],0,"year"),ae(0,["YYYYY",5],0,"year"),ae(0,["YYYYYY",6,!0],0,"year"),Le("Y",Xa),Le("YY",Eo,Bn),Le("YYYY",uh,hi),Le("YYYYY",op,lr),Le("YYYYYY",op,lr),Jn(["YYYYY","YYYYYY"],Ys),Jn("YYYY",function(h,S){S[Ys]=h.length===2?t.parseTwoDigitYear(h):ln(h)}),Jn("YY",function(h,S){S[Ys]=t.parseTwoDigitYear(h)}),Jn("Y",function(h,S){S[Ys]=parseInt(h,10)});function xm(h){return Zy(h)?366:365}t.parseTwoDigitYear=function(h){return ln(h)+(ln(h)>68?1900:2e3)};var np=ym("FullYear",!0);function DS(){return Zy(this.year())}function ym(h,S){return function(T){return T!=null?(Yee(this,h,T),t.updateOffset(this,S),this):rp(this,h)}}function rp(h,S){if(!h.isValid())return NaN;var T=h._d,P=h._isUTC;switch(S){case"Milliseconds":return P?T.getUTCMilliseconds():T.getMilliseconds();case"Seconds":return P?T.getUTCSeconds():T.getSeconds();case"Minutes":return P?T.getUTCMinutes():T.getMinutes();case"Hours":return P?T.getUTCHours():T.getHours();case"Date":return P?T.getUTCDate():T.getDate();case"Day":return P?T.getUTCDay():T.getDay();case"Month":return P?T.getUTCMonth():T.getMonth();case"FullYear":return P?T.getUTCFullYear():T.getFullYear();default:return NaN}}function Yee(h,S,T){var P,q,ue,ze,Ot;if(!(!h.isValid()||isNaN(T))){switch(P=h._d,q=h._isUTC,S){case"Milliseconds":return void(q?P.setUTCMilliseconds(T):P.setMilliseconds(T));case"Seconds":return void(q?P.setUTCSeconds(T):P.setSeconds(T));case"Minutes":return void(q?P.setUTCMinutes(T):P.setMinutes(T));case"Hours":return void(q?P.setUTCHours(T):P.setHours(T));case"Date":return void(q?P.setUTCDate(T):P.setDate(T));case"FullYear":break;default:return}ue=T,ze=h.month(),Ot=h.date(),Ot=Ot===29&&ze===1&&!Zy(ue)?28:Ot,q?P.setUTCFullYear(ue,ze,Ot):P.setFullYear(ue,ze,Ot)}}function YMe(h){return h=we(h),K(this[h])?this[h]():this}function QMe(h,S){if(typeof h=="object"){h=Te(h);var T=Qo(h),P,q=T.length;for(P=0;P<q;P++)this[T[P].unit](h[T[P].unit])}else if(h=we(h),K(this[h]))return this[h](S);return this}function ZMe(h,S){return(h%S+S)%S}var Ui;Array.prototype.indexOf?Ui=Array.prototype.indexOf:Ui=function(h){var S;for(S=0;S<this.length;++S)if(this[S]===h)return S;return-1};function XR(h,S){if(isNaN(h)||isNaN(S))return NaN;var T=ZMe(S,12);return h+=(S-T)/12,T===1?Zy(h)?29:28:31-T%7%2}ae("M",["MM",2],"Mo",function(){return this.month()+1}),ae("MMM",0,0,function(h){return this.localeData().monthsShort(this,h)}),ae("MMMM",0,0,function(h){return this.localeData().months(this,h)}),Le("M",Eo,tu),Le("MM",Eo,Bn),Le("MMM",function(h,S){return S.monthsShortRegex(h)}),Le("MMMM",function(h,S){return S.monthsRegex(h)}),Jn(["M","MM"],function(h,S){S[ed]=ln(h)-1}),Jn(["MMM","MMMM"],function(h,S,T,P){var q=T._locale.monthsParse(h,P,T._strict);q!=null?S[ed]=q:b(T).invalidMonth=h});var XMe="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Qee="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Zee=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,JMe=Vu,VMe=Vu;function eNe(h,S){return h?n(this._months)?this._months[h.month()]:this._months[(this._months.isFormat||Zee).test(S)?"format":"standalone"][h.month()]:n(this._months)?this._months:this._months.standalone}function tNe(h,S){return h?n(this._monthsShort)?this._monthsShort[h.month()]:this._monthsShort[Zee.test(S)?"format":"standalone"][h.month()]:n(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function oNe(h,S,T){var P,q,ue,ze=h.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],P=0;P<12;++P)ue=g([2e3,P]),this._shortMonthsParse[P]=this.monthsShort(ue,"").toLocaleLowerCase(),this._longMonthsParse[P]=this.months(ue,"").toLocaleLowerCase();return T?S==="MMM"?(q=Ui.call(this._shortMonthsParse,ze),q!==-1?q:null):(q=Ui.call(this._longMonthsParse,ze),q!==-1?q:null):S==="MMM"?(q=Ui.call(this._shortMonthsParse,ze),q!==-1?q:(q=Ui.call(this._longMonthsParse,ze),q!==-1?q:null)):(q=Ui.call(this._longMonthsParse,ze),q!==-1?q:(q=Ui.call(this._shortMonthsParse,ze),q!==-1?q:null))}function nNe(h,S,T){var P,q,ue;if(this._monthsParseExact)return oNe.call(this,h,S,T);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),P=0;P<12;P++){if(q=g([2e3,P]),T&&!this._longMonthsParse[P]&&(this._longMonthsParse[P]=new RegExp("^"+this.months(q,"").replace(".","")+"$","i"),this._shortMonthsParse[P]=new RegExp("^"+this.monthsShort(q,"").replace(".","")+"$","i")),!T&&!this._monthsParse[P]&&(ue="^"+this.months(q,"")+"|^"+this.monthsShort(q,""),this._monthsParse[P]=new RegExp(ue.replace(".",""),"i")),T&&S==="MMMM"&&this._longMonthsParse[P].test(h))return P;if(T&&S==="MMM"&&this._shortMonthsParse[P].test(h))return P;if(!T&&this._monthsParse[P].test(h))return P}}function Xee(h,S){if(!h.isValid())return h;if(typeof S=="string"){if(/^\d+$/.test(S))S=ln(S);else if(S=h.localeData().monthsParse(S),!c(S))return h}var T=S,P=h.date();return P=P<29?P:Math.min(P,XR(h.year(),T)),h._isUTC?h._d.setUTCMonth(T,P):h._d.setMonth(T,P),h}function Jee(h){return h!=null?(Xee(this,h),t.updateOffset(this,!0),this):rp(this,"Month")}function rNe(){return XR(this.year(),this.month())}function iNe(h){return this._monthsParseExact?(s(this,"_monthsRegex")||Vee.call(this),h?this._monthsShortStrictRegex:this._monthsShortRegex):(s(this,"_monthsShortRegex")||(this._monthsShortRegex=JMe),this._monthsShortStrictRegex&&h?this._monthsShortStrictRegex:this._monthsShortRegex)}function sNe(h){return this._monthsParseExact?(s(this,"_monthsRegex")||Vee.call(this),h?this._monthsStrictRegex:this._monthsRegex):(s(this,"_monthsRegex")||(this._monthsRegex=VMe),this._monthsStrictRegex&&h?this._monthsStrictRegex:this._monthsRegex)}function Vee(){function h(No,bn){return bn.length-No.length}var S=[],T=[],P=[],q,ue,ze,Ot;for(q=0;q<12;q++)ue=g([2e3,q]),ze=nu(this.monthsShort(ue,"")),Ot=nu(this.months(ue,"")),S.push(ze),T.push(Ot),P.push(Ot),P.push(ze);S.sort(h),T.sort(h),P.sort(h),this._monthsRegex=new RegExp("^("+P.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+T.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+S.join("|")+")","i")}function aNe(h,S,T,P,q,ue,ze){var Ot;return h<100&&h>=0?(Ot=new Date(h+400,S,T,P,q,ue,ze),isFinite(Ot.getFullYear())&&Ot.setFullYear(h)):Ot=new Date(h,S,T,P,q,ue,ze),Ot}function MS(h){var S,T;return h<100&&h>=0?(T=Array.prototype.slice.call(arguments),T[0]=h+400,S=new Date(Date.UTC.apply(null,T)),isFinite(S.getUTCFullYear())&&S.setUTCFullYear(h)):S=new Date(Date.UTC.apply(null,arguments)),S}function xE(h,S,T){var P=7+S-T,q=(7+MS(h,0,P).getUTCDay()-S)%7;return-q+P-1}function ete(h,S,T,P,q){var ue=(7+T-P)%7,ze=xE(h,P,q),Ot=1+7*(S-1)+ue+ze,No,bn;return Ot<=0?(No=h-1,bn=xm(No)+Ot):Ot>xm(h)?(No=h+1,bn=Ot-xm(h)):(No=h,bn=Ot),{year:No,dayOfYear:bn}}function NS(h,S,T){var P=xE(h.year(),S,T),q=Math.floor((h.dayOfYear()-P-1)/7)+1,ue,ze;return q<1?(ze=h.year()-1,ue=q+bm(ze,S,T)):q>bm(h.year(),S,T)?(ue=q-bm(h.year(),S,T),ze=h.year()+1):(ze=h.year(),ue=q),{week:ue,year:ze}}function bm(h,S,T){var P=xE(h,S,T),q=xE(h+1,S,T);return(xm(h)-P+q)/7}ae("w",["ww",2],"wo","week"),ae("W",["WW",2],"Wo","isoWeek"),Le("w",Eo,tu),Le("ww",Eo,Bn),Le("W",Eo,tu),Le("WW",Eo,Bn),mh(["w","ww","W","WW"],function(h,S,T,P){S[P.substr(0,1)]=ln(h)});function lNe(h){return NS(h,this._week.dow,this._week.doy).week}var cNe={dow:0,doy:6};function uNe(){return this._week.dow}function dNe(){return this._week.doy}function pNe(h){var S=this.localeData().week(this);return h==null?S:this.add((h-S)*7,"d")}function mNe(h){var S=NS(this,1,4).week;return h==null?S:this.add((h-S)*7,"d")}ae("d",0,"do","day"),ae("dd",0,0,function(h){return this.localeData().weekdaysMin(this,h)}),ae("ddd",0,0,function(h){return this.localeData().weekdaysShort(this,h)}),ae("dddd",0,0,function(h){return this.localeData().weekdays(this,h)}),ae("e",0,0,"weekday"),ae("E",0,0,"isoWeekday"),Le("d",Eo),Le("e",Eo),Le("E",Eo),Le("dd",function(h,S){return S.weekdaysMinRegex(h)}),Le("ddd",function(h,S){return S.weekdaysShortRegex(h)}),Le("dddd",function(h,S){return S.weekdaysRegex(h)}),mh(["dd","ddd","dddd"],function(h,S,T,P){var q=T._locale.weekdaysParse(h,P,T._strict);q!=null?S.d=q:b(T).invalidWeekday=h}),mh(["d","e","E"],function(h,S,T,P){S[P]=ln(h)});function fNe(h,S){return typeof h!="string"?h:isNaN(h)?(h=S.weekdaysParse(h),typeof h=="number"?h:null):parseInt(h,10)}function gNe(h,S){return typeof h=="string"?S.weekdaysParse(h)%7||7:isNaN(h)?null:h}function JR(h,S){return h.slice(S,7).concat(h.slice(0,S))}var hNe="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),tte="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),xNe="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),yNe=Vu,bNe=Vu,vNe=Vu;function SNe(h,S){var T=n(this._weekdays)?this._weekdays:this._weekdays[h&&h!==!0&&this._weekdays.isFormat.test(S)?"format":"standalone"];return h===!0?JR(T,this._week.dow):h?T[h.day()]:T}function wNe(h){return h===!0?JR(this._weekdaysShort,this._week.dow):h?this._weekdaysShort[h.day()]:this._weekdaysShort}function kNe(h){return h===!0?JR(this._weekdaysMin,this._week.dow):h?this._weekdaysMin[h.day()]:this._weekdaysMin}function ENe(h,S,T){var P,q,ue,ze=h.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],P=0;P<7;++P)ue=g([2e3,1]).day(P),this._minWeekdaysParse[P]=this.weekdaysMin(ue,"").toLocaleLowerCase(),this._shortWeekdaysParse[P]=this.weekdaysShort(ue,"").toLocaleLowerCase(),this._weekdaysParse[P]=this.weekdays(ue,"").toLocaleLowerCase();return T?S==="dddd"?(q=Ui.call(this._weekdaysParse,ze),q!==-1?q:null):S==="ddd"?(q=Ui.call(this._shortWeekdaysParse,ze),q!==-1?q:null):(q=Ui.call(this._minWeekdaysParse,ze),q!==-1?q:null):S==="dddd"?(q=Ui.call(this._weekdaysParse,ze),q!==-1||(q=Ui.call(this._shortWeekdaysParse,ze),q!==-1)?q:(q=Ui.call(this._minWeekdaysParse,ze),q!==-1?q:null)):S==="ddd"?(q=Ui.call(this._shortWeekdaysParse,ze),q!==-1||(q=Ui.call(this._weekdaysParse,ze),q!==-1)?q:(q=Ui.call(this._minWeekdaysParse,ze),q!==-1?q:null)):(q=Ui.call(this._minWeekdaysParse,ze),q!==-1||(q=Ui.call(this._weekdaysParse,ze),q!==-1)?q:(q=Ui.call(this._shortWeekdaysParse,ze),q!==-1?q:null))}function ANe(h,S,T){var P,q,ue;if(this._weekdaysParseExact)return ENe.call(this,h,S,T);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),P=0;P<7;P++){if(q=g([2e3,1]).day(P),T&&!this._fullWeekdaysParse[P]&&(this._fullWeekdaysParse[P]=new RegExp("^"+this.weekdays(q,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[P]=new RegExp("^"+this.weekdaysShort(q,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[P]=new RegExp("^"+this.weekdaysMin(q,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[P]||(ue="^"+this.weekdays(q,"")+"|^"+this.weekdaysShort(q,"")+"|^"+this.weekdaysMin(q,""),this._weekdaysParse[P]=new RegExp(ue.replace(".",""),"i")),T&&S==="dddd"&&this._fullWeekdaysParse[P].test(h))return P;if(T&&S==="ddd"&&this._shortWeekdaysParse[P].test(h))return P;if(T&&S==="dd"&&this._minWeekdaysParse[P].test(h))return P;if(!T&&this._weekdaysParse[P].test(h))return P}}function CNe(h){if(!this.isValid())return h!=null?this:NaN;var S=rp(this,"Day");return h!=null?(h=fNe(h,this.localeData()),this.add(h-S,"d")):S}function TNe(h){if(!this.isValid())return h!=null?this:NaN;var S=(this.day()+7-this.localeData()._week.dow)%7;return h==null?S:this.add(h-S,"d")}function INe(h){if(!this.isValid())return h!=null?this:NaN;if(h!=null){var S=gNe(h,this.localeData());return this.day(this.day()%7?S:S-7)}else return this.day()||7}function DNe(h){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||VR.call(this),h?this._weekdaysStrictRegex:this._weekdaysRegex):(s(this,"_weekdaysRegex")||(this._weekdaysRegex=yNe),this._weekdaysStrictRegex&&h?this._weekdaysStrictRegex:this._weekdaysRegex)}function MNe(h){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||VR.call(this),h?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(s(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=bNe),this._weekdaysShortStrictRegex&&h?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function NNe(h){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||VR.call(this),h?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(s(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=vNe),this._weekdaysMinStrictRegex&&h?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function VR(){function h(Va,Em){return Em.length-Va.length}var S=[],T=[],P=[],q=[],ue,ze,Ot,No,bn;for(ue=0;ue<7;ue++)ze=g([2e3,1]).day(ue),Ot=nu(this.weekdaysMin(ze,"")),No=nu(this.weekdaysShort(ze,"")),bn=nu(this.weekdays(ze,"")),S.push(Ot),T.push(No),P.push(bn),q.push(Ot),q.push(No),q.push(bn);S.sort(h),T.sort(h),P.sort(h),q.sort(h),this._weekdaysRegex=new RegExp("^("+q.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+P.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+T.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+S.join("|")+")","i")}function eL(){return this.hours()%12||12}function BNe(){return this.hours()||24}ae("H",["HH",2],0,"hour"),ae("h",["hh",2],0,eL),ae("k",["kk",2],0,BNe),ae("hmm",0,0,function(){return""+eL.apply(this)+ce(this.minutes(),2)}),ae("hmmss",0,0,function(){return""+eL.apply(this)+ce(this.minutes(),2)+ce(this.seconds(),2)}),ae("Hmm",0,0,function(){return""+this.hours()+ce(this.minutes(),2)}),ae("Hmmss",0,0,function(){return""+this.hours()+ce(this.minutes(),2)+ce(this.seconds(),2)});function ote(h,S){ae(h,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),S)})}ote("a",!0),ote("A",!1);function nte(h,S){return S._meridiemParse}Le("a",nte),Le("A",nte),Le("H",Eo,hm),Le("h",Eo,tu),Le("k",Eo,tu),Le("HH",Eo,Bn),Le("hh",Eo,Bn),Le("kk",Eo,Bn),Le("hmm",t0),Le("hmmss",Ca),Le("Hmm",t0),Le("Hmmss",Ca),Jn(["H","HH"],Fi),Jn(["k","kk"],function(h,S,T){var P=ln(h);S[Fi]=P===24?0:P}),Jn(["a","A"],function(h,S,T){T._isPm=T._locale.isPM(h),T._meridiem=h}),Jn(["h","hh"],function(h,S,T){S[Fi]=ln(h),b(T).bigHour=!0}),Jn("hmm",function(h,S,T){var P=h.length-2;S[Fi]=ln(h.substr(0,P)),S[fc]=ln(h.substr(P)),b(T).bigHour=!0}),Jn("hmmss",function(h,S,T){var P=h.length-4,q=h.length-2;S[Fi]=ln(h.substr(0,P)),S[fc]=ln(h.substr(P,2)),S[td]=ln(h.substr(q)),b(T).bigHour=!0}),Jn("Hmm",function(h,S,T){var P=h.length-2;S[Fi]=ln(h.substr(0,P)),S[fc]=ln(h.substr(P))}),Jn("Hmmss",function(h,S,T){var P=h.length-4,q=h.length-2;S[Fi]=ln(h.substr(0,P)),S[fc]=ln(h.substr(P,2)),S[td]=ln(h.substr(q))});function PNe(h){return(h+"").toLowerCase().charAt(0)==="p"}var _Ne=/[ap]\.?m?\.?/i,RNe=ym("Hours",!0);function LNe(h,S,T){return h>11?T?"pm":"PM":T?"am":"AM"}var rte={calendar:Ce,longDateFormat:Ve,invalidDate:Wt,ordinal:no,dayOfMonthOrdinalParse:mo,relativeTime:Br,months:XMe,monthsShort:Qee,week:cNe,weekdays:hNe,weekdaysMin:xNe,weekdaysShort:tte,meridiemParse:_Ne},ni={},BS={},PS;function ONe(h,S){var T,P=Math.min(h.length,S.length);for(T=0;T<P;T+=1)if(h[T]!==S[T])return T;return P}function ite(h){return h&&h.toLowerCase().replace("_","-")}function FNe(h){for(var S=0,T,P,q,ue;S<h.length;){for(ue=ite(h[S]).split("-"),T=ue.length,P=ite(h[S+1]),P=P?P.split("-"):null;T>0;){if(q=yE(ue.slice(0,T).join("-")),q)return q;if(P&&P.length>=T&&ONe(ue,P)>=T-1)break;T--}S++}return PS}function UNe(h){return!!(h&&h.match("^[^/\\\\]*$"))}function yE(h){var S=null,T;if(ni[h]===void 0&&typeof hS<"u"&&hS&&hS.exports&&UNe(h))try{S=PS._abbr,T=Bte,T("./locale/"+h),o0(S)}catch{ni[h]=null}return ni[h]}function o0(h,S){var T;return h&&(l(S)?T=vm(h):T=tL(h,S),T?PS=T:typeof console<"u"&&console.warn&&console.warn("Locale "+h+" not found. Did you forget to load it?")),PS._abbr}function tL(h,S){if(S!==null){var T,P=rte;if(S.abbr=h,ni[h]!=null)te("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),P=ni[h]._config;else if(S.parentLocale!=null)if(ni[S.parentLocale]!=null)P=ni[S.parentLocale]._config;else if(T=yE(S.parentLocale),T!=null)P=T._config;else return BS[S.parentLocale]||(BS[S.parentLocale]=[]),BS[S.parentLocale].push({name:h,config:S}),null;return ni[h]=new he(le(P,S)),BS[h]&&BS[h].forEach(function(q){tL(q.name,q.config)}),o0(h),ni[h]}else return delete ni[h],null}function $Ne(h,S){if(S!=null){var T,P,q=rte;ni[h]!=null&&ni[h].parentLocale!=null?ni[h].set(le(ni[h]._config,S)):(P=yE(h),P!=null&&(q=P._config),S=le(q,S),P==null&&(S.abbr=h),T=new he(S),T.parentLocale=ni[h],ni[h]=T),o0(h)}else ni[h]!=null&&(ni[h].parentLocale!=null?(ni[h]=ni[h].parentLocale,h===o0()&&o0(h)):ni[h]!=null&&delete ni[h]);return ni[h]}function vm(h){var S;if(h&&h._locale&&h._locale._abbr&&(h=h._locale._abbr),!h)return PS;if(!n(h)){if(S=yE(h),S)return S;h=[h]}return FNe(h)}function HNe(){return Ae(ni)}function oL(h){var S,T=h._a;return T&&b(h).overflow===-2&&(S=T[ed]<0||T[ed]>11?ed:T[ru]<1||T[ru]>XR(T[Ys],T[ed])?ru:T[Fi]<0||T[Fi]>24||T[Fi]===24&&(T[fc]!==0||T[td]!==0||T[Er]!==0)?Fi:T[fc]<0||T[fc]>59?fc:T[td]<0||T[td]>59?td:T[Er]<0||T[Er]>999?Er:-1,b(h)._overflowDayOfYear&&(S<Ys||S>ru)&&(S=ru),b(h)._overflowWeeks&&S===-1&&(S=Xy),b(h)._overflowWeekday&&S===-1&&(S=Jy),b(h).overflow=S),h}var zNe=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,GNe=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,qNe=/Z|[+-]\d\d(?::?\d\d)?/,bE=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],nL=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],jNe=/^\/?Date\((-?\d+)/i,WNe=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,KNe={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function ste(h){var S,T,P=h._i,q=zNe.exec(P)||GNe.exec(P),ue,ze,Ot,No,bn=bE.length,Va=nL.length;if(q){for(b(h).iso=!0,S=0,T=bn;S<T;S++)if(bE[S][1].exec(q[1])){ze=bE[S][0],ue=bE[S][2]!==!1;break}if(ze==null){h._isValid=!1;return}if(q[3]){for(S=0,T=Va;S<T;S++)if(nL[S][1].exec(q[3])){Ot=(q[2]||" ")+nL[S][0];break}if(Ot==null){h._isValid=!1;return}}if(!ue&&Ot!=null){h._isValid=!1;return}if(q[4])if(qNe.exec(q[4]))No="Z";else{h._isValid=!1;return}h._f=ze+(Ot||"")+(No||""),iL(h)}else h._isValid=!1}function YNe(h,S,T,P,q,ue){var ze=[QNe(h),Qee.indexOf(S),parseInt(T,10),parseInt(P,10),parseInt(q,10)];return ue&&ze.push(parseInt(ue,10)),ze}function QNe(h){var S=parseInt(h,10);return S<=49?2e3+S:S<=999?1900+S:S}function ZNe(h){return h.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function XNe(h,S,T){if(h){var P=tte.indexOf(h),q=new Date(S[0],S[1],S[2]).getDay();if(P!==q)return b(T).weekdayMismatch=!0,T._isValid=!1,!1}return!0}function JNe(h,S,T){if(h)return KNe[h];if(S)return 0;var P=parseInt(T,10),q=P%100,ue=(P-q)/100;return ue*60+q}function ate(h){var S=WNe.exec(ZNe(h._i)),T;if(S){if(T=YNe(S[4],S[3],S[2],S[5],S[6],S[7]),!XNe(S[1],T,h))return;h._a=T,h._tzm=JNe(S[8],S[9],S[10]),h._d=MS.apply(null,h._a),h._d.setUTCMinutes(h._d.getUTCMinutes()-h._tzm),b(h).rfc2822=!0}else h._isValid=!1}function VNe(h){var S=jNe.exec(h._i);if(S!==null){h._d=new Date(+S[1]);return}if(ste(h),h._isValid===!1)delete h._isValid;else return;if(ate(h),h._isValid===!1)delete h._isValid;else return;h._strict?h._isValid=!1:t.createFromInputFallback(h)}t.createFromInputFallback=J("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(h){h._d=new Date(h._i+(h._useUTC?" UTC":""))});function Vy(h,S,T){return h??S??T}function eBe(h){var S=new Date(t.now());return h._useUTC?[S.getUTCFullYear(),S.getUTCMonth(),S.getUTCDate()]:[S.getFullYear(),S.getMonth(),S.getDate()]}function rL(h){var S,T,P=[],q,ue,ze;if(!h._d){for(q=eBe(h),h._w&&h._a[ru]==null&&h._a[ed]==null&&tBe(h),h._dayOfYear!=null&&(ze=Vy(h._a[Ys],q[Ys]),(h._dayOfYear>xm(ze)||h._dayOfYear===0)&&(b(h)._overflowDayOfYear=!0),T=MS(ze,0,h._dayOfYear),h._a[ed]=T.getUTCMonth(),h._a[ru]=T.getUTCDate()),S=0;S<3&&h._a[S]==null;++S)h._a[S]=P[S]=q[S];for(;S<7;S++)h._a[S]=P[S]=h._a[S]==null?S===2?1:0:h._a[S];h._a[Fi]===24&&h._a[fc]===0&&h._a[td]===0&&h._a[Er]===0&&(h._nextDay=!0,h._a[Fi]=0),h._d=(h._useUTC?MS:aNe).apply(null,P),ue=h._useUTC?h._d.getUTCDay():h._d.getDay(),h._tzm!=null&&h._d.setUTCMinutes(h._d.getUTCMinutes()-h._tzm),h._nextDay&&(h._a[Fi]=24),h._w&&typeof h._w.d<"u"&&h._w.d!==ue&&(b(h).weekdayMismatch=!0)}}function tBe(h){var S,T,P,q,ue,ze,Ot,No,bn;S=h._w,S.GG!=null||S.W!=null||S.E!=null?(ue=1,ze=4,T=Vy(S.GG,h._a[Ys],NS(Wr(),1,4).year),P=Vy(S.W,1),q=Vy(S.E,1),(q<1||q>7)&&(No=!0)):(ue=h._locale._week.dow,ze=h._locale._week.doy,bn=NS(Wr(),ue,ze),T=Vy(S.gg,h._a[Ys],bn.year),P=Vy(S.w,bn.week),S.d!=null?(q=S.d,(q<0||q>6)&&(No=!0)):S.e!=null?(q=S.e+ue,(S.e<0||S.e>6)&&(No=!0)):q=ue),P<1||P>bm(T,ue,ze)?b(h)._overflowWeeks=!0:No!=null?b(h)._overflowWeekday=!0:(Ot=ete(T,P,q,ue,ze),h._a[Ys]=Ot.year,h._dayOfYear=Ot.dayOfYear)}t.ISO_8601=function(){},t.RFC_2822=function(){};function iL(h){if(h._f===t.ISO_8601){ste(h);return}if(h._f===t.RFC_2822){ate(h);return}h._a=[],b(h).empty=!0;var S=""+h._i,T,P,q,ue,ze,Ot=S.length,No=0,bn,Va;for(q=It(h._f,h._locale).match(pe)||[],Va=q.length,T=0;T<Va;T++)ue=q[T],P=(S.match(Ye(ue,h))||[])[0],P&&(ze=S.substr(0,S.indexOf(P)),ze.length>0&&b(h).unusedInput.push(ze),S=S.slice(S.indexOf(P)+P.length),No+=P.length),ge[ue]?(P?b(h).empty=!1:b(h).unusedTokens.push(ue),ZR(ue,P,h)):h._strict&&!P&&b(h).unusedTokens.push(ue);b(h).charsLeftOver=Ot-No,S.length>0&&b(h).unusedInput.push(S),h._a[Fi]<=12&&b(h).bigHour===!0&&h._a[Fi]>0&&(b(h).bigHour=void 0),b(h).parsedDateParts=h._a.slice(0),b(h).meridiem=h._meridiem,h._a[Fi]=oBe(h._locale,h._a[Fi],h._meridiem),bn=b(h).era,bn!==null&&(h._a[Ys]=h._locale.erasConvertYear(bn,h._a[Ys])),rL(h),oL(h)}function oBe(h,S,T){var P;return T==null?S:h.meridiemHour!=null?h.meridiemHour(S,T):(h.isPM!=null&&(P=h.isPM(T),P&&S<12&&(S+=12),!P&&S===12&&(S=0)),S)}function nBe(h){var S,T,P,q,ue,ze,Ot=!1,No=h._f.length;if(No===0){b(h).invalidFormat=!0,h._d=new Date(NaN);return}for(q=0;q<No;q++)ue=0,ze=!1,S=N({},h),h._useUTC!=null&&(S._useUTC=h._useUTC),S._f=h._f[q],iL(S),E(S)&&(ze=!0),ue+=b(S).charsLeftOver,ue+=b(S).unusedTokens.length*10,b(S).score=ue,Ot?ue<P&&(P=ue,T=S):(P==null||ue<P||ze)&&(P=ue,T=S,ze&&(Ot=!0));m(h,T||S)}function rBe(h){if(!h._d){var S=Te(h._i),T=S.day===void 0?S.date:S.day;h._a=p([S.year,S.month,T,S.hour,S.minute,S.second,S.millisecond],function(P){return P&&parseInt(P,10)}),rL(h)}}function iBe(h){var S=new _(oL(lte(h)));return S._nextDay&&(S.add(1,"d"),S._nextDay=void 0),S}function lte(h){var S=h._i,T=h._f;return h._locale=h._locale||vm(h._l),S===null||T===void 0&&S===""?A({nullInput:!0}):(typeof S=="string"&&(h._i=S=h._locale.preparse(S)),O(S)?new _(oL(S)):(u(S)?h._d=S:n(T)?nBe(h):T?iL(h):sBe(h),E(h)||(h._d=null),h))}function sBe(h){var S=h._i;l(S)?h._d=new Date(t.now()):u(S)?h._d=new Date(S.valueOf()):typeof S=="string"?VNe(h):n(S)?(h._a=p(S.slice(0),function(T){return parseInt(T,10)}),rL(h)):i(S)?rBe(h):c(S)?h._d=new Date(S):t.createFromInputFallback(h)}function cte(h,S,T,P,q){var ue={};return(S===!0||S===!1)&&(P=S,S=void 0),(T===!0||T===!1)&&(P=T,T=void 0),(i(h)&&a(h)||n(h)&&h.length===0)&&(h=void 0),ue._isAMomentObject=!0,ue._useUTC=ue._isUTC=q,ue._l=T,ue._i=h,ue._f=S,ue._strict=P,iBe(ue)}function Wr(h,S,T,P){return cte(h,S,T,P,!1)}var aBe=J("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var h=Wr.apply(null,arguments);return this.isValid()&&h.isValid()?h<this?this:h:A()}),lBe=J("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var h=Wr.apply(null,arguments);return this.isValid()&&h.isValid()?h>this?this:h:A()});function ute(h,S){var T,P;if(S.length===1&&n(S[0])&&(S=S[0]),!S.length)return Wr();for(T=S[0],P=1;P<S.length;++P)(!S[P].isValid()||S[P][h](T))&&(T=S[P]);return T}function cBe(){var h=[].slice.call(arguments,0);return ute("isBefore",h)}function uBe(){var h=[].slice.call(arguments,0);return ute("isAfter",h)}var dBe=function(){return Date.now?Date.now():+new Date},_S=["year","quarter","month","week","day","hour","minute","second","millisecond"];function pBe(h){var S,T=!1,P,q=_S.length;for(S in h)if(s(h,S)&&!(Ui.call(_S,S)!==-1&&(h[S]==null||!isNaN(h[S]))))return!1;for(P=0;P<q;++P)if(h[_S[P]]){if(T)return!1;parseFloat(h[_S[P]])!==ln(h[_S[P]])&&(T=!0)}return!0}function mBe(){return this._isValid}function fBe(){return od(NaN)}function vE(h){var S=Te(h),T=S.year||0,P=S.quarter||0,q=S.month||0,ue=S.week||S.isoWeek||0,ze=S.day||0,Ot=S.hour||0,No=S.minute||0,bn=S.second||0,Va=S.millisecond||0;this._isValid=pBe(S),this._milliseconds=+Va+bn*1e3+No*6e4+Ot*1e3*60*60,this._days=+ze+ue*7,this._months=+q+P*3+T*12,this._data={},this._locale=vm(),this._bubble()}function SE(h){return h instanceof vE}function sL(h){return h<0?Math.round(-1*h)*-1:Math.round(h)}function gBe(h,S,T){var P=Math.min(h.length,S.length),q=Math.abs(h.length-S.length),ue=0,ze;for(ze=0;ze<P;ze++)(T&&h[ze]!==S[ze]||!T&&ln(h[ze])!==ln(S[ze]))&&ue++;return ue+q}function dte(h,S){ae(h,0,0,function(){var T=this.utcOffset(),P="+";return T<0&&(T=-T,P="-"),P+ce(~~(T/60),2)+S+ce(~~T%60,2)})}dte("Z",":"),dte("ZZ",""),Le("Z",Ja),Le("ZZ",Ja),Jn(["Z","ZZ"],function(h,S,T){T._useUTC=!0,T._tzm=aL(Ja,h)});var hBe=/([\+\-]|\d\d)/gi;function aL(h,S){var T=(S||"").match(h),P,q,ue;return T===null?null:(P=T[T.length-1]||[],q=(P+"").match(hBe)||["-",0,0],ue=+(q[1]*60)+ln(q[2]),ue===0?0:q[0]==="+"?ue:-ue)}function lL(h,S){var T,P;return S._isUTC?(T=S.clone(),P=(O(h)||u(h)?h.valueOf():Wr(h).valueOf())-T.valueOf(),T._d.setTime(T._d.valueOf()+P),t.updateOffset(T,!1),T):Wr(h).local()}function cL(h){return-Math.round(h._d.getTimezoneOffset())}t.updateOffset=function(){};function xBe(h,S,T){var P=this._offset||0,q;if(!this.isValid())return h!=null?this:NaN;if(h!=null){if(typeof h=="string"){if(h=aL(Ja,h),h===null)return this}else Math.abs(h)<16&&!T&&(h=h*60);return!this._isUTC&&S&&(q=cL(this)),this._offset=h,this._isUTC=!0,q!=null&&this.add(q,"m"),P!==h&&(!S||this._changeInProgress?gte(this,od(h-P,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?P:cL(this)}function yBe(h,S){return h!=null?(typeof h!="string"&&(h=-h),this.utcOffset(h,S),this):-this.utcOffset()}function bBe(h){return this.utcOffset(0,h)}function vBe(h){return this._isUTC&&(this.utcOffset(0,h),this._isUTC=!1,h&&this.subtract(cL(this),"m")),this}function SBe(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var h=aL(dh,this._i);h!=null?this.utcOffset(h):this.utcOffset(0,!0)}return this}function wBe(h){return this.isValid()?(h=h?Wr(h).utcOffset():0,(this.utcOffset()-h)%60===0):!1}function kBe(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function EBe(){if(!l(this._isDSTShifted))return this._isDSTShifted;var h={},S;return N(h,this),h=lte(h),h._a?(S=h._isUTC?g(h._a):Wr(h._a),this._isDSTShifted=this.isValid()&&gBe(h._a,S.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function ABe(){return this.isValid()?!this._isUTC:!1}function CBe(){return this.isValid()?this._isUTC:!1}function pte(){return this.isValid()?this._isUTC&&this._offset===0:!1}var TBe=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,IBe=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function od(h,S){var T=h,P=null,q,ue,ze;return SE(h)?T={ms:h._milliseconds,d:h._days,M:h._months}:c(h)||!isNaN(+h)?(T={},S?T[S]=+h:T.milliseconds=+h):(P=TBe.exec(h))?(q=P[1]==="-"?-1:1,T={y:0,d:ln(P[ru])*q,h:ln(P[Fi])*q,m:ln(P[fc])*q,s:ln(P[td])*q,ms:ln(sL(P[Er]*1e3))*q}):(P=IBe.exec(h))?(q=P[1]==="-"?-1:1,T={y:fh(P[2],q),M:fh(P[3],q),w:fh(P[4],q),d:fh(P[5],q),h:fh(P[6],q),m:fh(P[7],q),s:fh(P[8],q)}):T==null?T={}:typeof T=="object"&&("from"in T||"to"in T)&&(ze=DBe(Wr(T.from),Wr(T.to)),T={},T.ms=ze.milliseconds,T.M=ze.months),ue=new vE(T),SE(h)&&s(h,"_locale")&&(ue._locale=h._locale),SE(h)&&s(h,"_isValid")&&(ue._isValid=h._isValid),ue}od.fn=vE.prototype,od.invalid=fBe;function fh(h,S){var T=h&&parseFloat(h.replace(",","."));return(isNaN(T)?0:T)*S}function mte(h,S){var T={};return T.months=S.month()-h.month()+(S.year()-h.year())*12,h.clone().add(T.months,"M").isAfter(S)&&--T.months,T.milliseconds=+S-+h.clone().add(T.months,"M"),T}function DBe(h,S){var T;return h.isValid()&&S.isValid()?(S=lL(S,h),h.isBefore(S)?T=mte(h,S):(T=mte(S,h),T.milliseconds=-T.milliseconds,T.months=-T.months),T):{milliseconds:0,months:0}}function fte(h,S){return function(T,P){var q,ue;return P!==null&&!isNaN(+P)&&(te(S,"moment()."+S+"(period, number) is deprecated. Please use moment()."+S+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),ue=T,T=P,P=ue),q=od(T,P),gte(this,q,h),this}}function gte(h,S,T,P){var q=S._milliseconds,ue=sL(S._days),ze=sL(S._months);h.isValid()&&(P=P??!0,ze&&Xee(h,rp(h,"Month")+ze*T),ue&&Yee(h,"Date",rp(h,"Date")+ue*T),q&&h._d.setTime(h._d.valueOf()+q*T),P&&t.updateOffset(h,ue||ze))}var MBe=fte(1,"add"),NBe=fte(-1,"subtract");function hte(h){return typeof h=="string"||h instanceof String}function BBe(h){return O(h)||u(h)||hte(h)||c(h)||_Be(h)||PBe(h)||h===null||h===void 0}function PBe(h){var S=i(h)&&!a(h),T=!1,P=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],q,ue,ze=P.length;for(q=0;q<ze;q+=1)ue=P[q],T=T||s(h,ue);return S&&T}function _Be(h){var S=n(h),T=!1;return S&&(T=h.filter(function(P){return!c(P)&&hte(h)}).length===0),S&&T}function RBe(h){var S=i(h)&&!a(h),T=!1,P=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],q,ue;for(q=0;q<P.length;q+=1)ue=P[q],T=T||s(h,ue);return S&&T}function LBe(h,S){var T=h.diff(S,"days",!0);return T<-6?"sameElse":T<-1?"lastWeek":T<0?"lastDay":T<1?"sameDay":T<2?"nextDay":T<7?"nextWeek":"sameElse"}function OBe(h,S){arguments.length===1&&(arguments[0]?BBe(arguments[0])?(h=arguments[0],S=void 0):RBe(arguments[0])&&(S=arguments[0],h=void 0):(h=void 0,S=void 0));var T=h||Wr(),P=lL(T,this).startOf("day"),q=t.calendarFormat(this,P)||"sameElse",ue=S&&(K(S[q])?S[q].call(this,T):S[q]);return this.format(ue||this.localeData().calendar(q,this,Wr(T)))}function FBe(){return new _(this)}function UBe(h,S){var T=O(h)?h:Wr(h);return this.isValid()&&T.isValid()?(S=we(S)||"millisecond",S==="millisecond"?this.valueOf()>T.valueOf():T.valueOf()<this.clone().startOf(S).valueOf()):!1}function $Be(h,S){var T=O(h)?h:Wr(h);return this.isValid()&&T.isValid()?(S=we(S)||"millisecond",S==="millisecond"?this.valueOf()<T.valueOf():this.clone().endOf(S).valueOf()<T.valueOf()):!1}function HBe(h,S,T,P){var q=O(h)?h:Wr(h),ue=O(S)?S:Wr(S);return this.isValid()&&q.isValid()&&ue.isValid()?(P=P||"()",(P[0]==="("?this.isAfter(q,T):!this.isBefore(q,T))&&(P[1]===")"?this.isBefore(ue,T):!this.isAfter(ue,T))):!1}function zBe(h,S){var T=O(h)?h:Wr(h),P;return this.isValid()&&T.isValid()?(S=we(S)||"millisecond",S==="millisecond"?this.valueOf()===T.valueOf():(P=T.valueOf(),this.clone().startOf(S).valueOf()<=P&&P<=this.clone().endOf(S).valueOf())):!1}function GBe(h,S){return this.isSame(h,S)||this.isAfter(h,S)}function qBe(h,S){return this.isSame(h,S)||this.isBefore(h,S)}function jBe(h,S,T){var P,q,ue;if(!this.isValid())return NaN;if(P=lL(h,this),!P.isValid())return NaN;switch(q=(P.utcOffset()-this.utcOffset())*6e4,S=we(S),S){case"year":ue=wE(this,P)/12;break;case"month":ue=wE(this,P);break;case"quarter":ue=wE(this,P)/3;break;case"second":ue=(this-P)/1e3;break;case"minute":ue=(this-P)/6e4;break;case"hour":ue=(this-P)/36e5;break;case"day":ue=(this-P-q)/864e5;break;case"week":ue=(this-P-q)/6048e5;break;default:ue=this-P}return T?ue:Dl(ue)}function wE(h,S){if(h.date()<S.date())return-wE(S,h);var T=(S.year()-h.year())*12+(S.month()-h.month()),P=h.clone().add(T,"months"),q,ue;return S-P<0?(q=h.clone().add(T-1,"months"),ue=(S-P)/(P-q)):(q=h.clone().add(T+1,"months"),ue=(S-P)/(q-P)),-(T+ue)||0}t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",t.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function WBe(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function KBe(h){if(!this.isValid())return null;var S=h!==!0,T=S?this.clone().utc():this;return T.year()<0||T.year()>9999?Xe(T,S?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):K(Date.prototype.toISOString)?S?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Xe(T,"Z")):Xe(T,S?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function YBe(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var h="moment",S="",T,P,q,ue;return this.isLocal()||(h=this.utcOffset()===0?"moment.utc":"moment.parseZone",S="Z"),T="["+h+'("]',P=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",q="-MM-DD[T]HH:mm:ss.SSS",ue=S+'[")]',this.format(T+P+q+ue)}function QBe(h){h||(h=this.isUtc()?t.defaultFormatUtc:t.defaultFormat);var S=Xe(this,h);return this.localeData().postformat(S)}function ZBe(h,S){return this.isValid()&&(O(h)&&h.isValid()||Wr(h).isValid())?od({to:this,from:h}).locale(this.locale()).humanize(!S):this.localeData().invalidDate()}function XBe(h){return this.from(Wr(),h)}function JBe(h,S){return this.isValid()&&(O(h)&&h.isValid()||Wr(h).isValid())?od({from:this,to:h}).locale(this.locale()).humanize(!S):this.localeData().invalidDate()}function VBe(h){return this.to(Wr(),h)}function xte(h){var S;return h===void 0?this._locale._abbr:(S=vm(h),S!=null&&(this._locale=S),this)}var yte=J("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(h){return h===void 0?this.localeData():this.locale(h)});function bte(){return this._locale}var kE=1e3,e1=60*kE,EE=60*e1,vte=(365*400+97)*24*EE;function t1(h,S){return(h%S+S)%S}function Ste(h,S,T){return h<100&&h>=0?new Date(h+400,S,T)-vte:new Date(h,S,T).valueOf()}function wte(h,S,T){return h<100&&h>=0?Date.UTC(h+400,S,T)-vte:Date.UTC(h,S,T)}function ePe(h){var S,T;if(h=we(h),h===void 0||h==="millisecond"||!this.isValid())return this;switch(T=this._isUTC?wte:Ste,h){case"year":S=T(this.year(),0,1);break;case"quarter":S=T(this.year(),this.month()-this.month()%3,1);break;case"month":S=T(this.year(),this.month(),1);break;case"week":S=T(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":S=T(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":S=T(this.year(),this.month(),this.date());break;case"hour":S=this._d.valueOf(),S-=t1(S+(this._isUTC?0:this.utcOffset()*e1),EE);break;case"minute":S=this._d.valueOf(),S-=t1(S,e1);break;case"second":S=this._d.valueOf(),S-=t1(S,kE);break}return this._d.setTime(S),t.updateOffset(this,!0),this}function tPe(h){var S,T;if(h=we(h),h===void 0||h==="millisecond"||!this.isValid())return this;switch(T=this._isUTC?wte:Ste,h){case"year":S=T(this.year()+1,0,1)-1;break;case"quarter":S=T(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":S=T(this.year(),this.month()+1,1)-1;break;case"week":S=T(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":S=T(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":S=T(this.year(),this.month(),this.date()+1)-1;break;case"hour":S=this._d.valueOf(),S+=EE-t1(S+(this._isUTC?0:this.utcOffset()*e1),EE)-1;break;case"minute":S=this._d.valueOf(),S+=e1-t1(S,e1)-1;break;case"second":S=this._d.valueOf(),S+=kE-t1(S,kE)-1;break}return this._d.setTime(S),t.updateOffset(this,!0),this}function oPe(){return this._d.valueOf()-(this._offset||0)*6e4}function nPe(){return Math.floor(this.valueOf()/1e3)}function rPe(){return new Date(this.valueOf())}function iPe(){var h=this;return[h.year(),h.month(),h.date(),h.hour(),h.minute(),h.second(),h.millisecond()]}function sPe(){var h=this;return{years:h.year(),months:h.month(),date:h.date(),hours:h.hours(),minutes:h.minutes(),seconds:h.seconds(),milliseconds:h.milliseconds()}}function aPe(){return this.isValid()?this.toISOString():null}function lPe(){return E(this)}function cPe(){return m({},b(this))}function uPe(){return b(this).overflow}function dPe(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}ae("N",0,0,"eraAbbr"),ae("NN",0,0,"eraAbbr"),ae("NNN",0,0,"eraAbbr"),ae("NNNN",0,0,"eraName"),ae("NNNNN",0,0,"eraNarrow"),ae("y",["y",1],"yo","eraYear"),ae("y",["yy",2],0,"eraYear"),ae("y",["yyy",3],0,"eraYear"),ae("y",["yyyy",4],0,"eraYear"),Le("N",uL),Le("NN",uL),Le("NNN",uL),Le("NNNN",wPe),Le("NNNNN",kPe),Jn(["N","NN","NNN","NNNN","NNNNN"],function(h,S,T,P){var q=T._locale.erasParse(h,P,T._strict);q?b(T).era=q:b(T).invalidEra=h}),Le("y",eu),Le("yy",eu),Le("yyy",eu),Le("yyyy",eu),Le("yo",EPe),Jn(["y","yy","yyy","yyyy"],Ys),Jn(["yo"],function(h,S,T,P){var q;T._locale._eraYearOrdinalRegex&&(q=h.match(T._locale._eraYearOrdinalRegex)),T._locale.eraYearOrdinalParse?S[Ys]=T._locale.eraYearOrdinalParse(h,q):S[Ys]=parseInt(h,10)});function pPe(h,S){var T,P,q,ue=this._eras||vm("en")._eras;for(T=0,P=ue.length;T<P;++T){switch(typeof ue[T].since){case"string":q=t(ue[T].since).startOf("day"),ue[T].since=q.valueOf();break}switch(typeof ue[T].until){case"undefined":ue[T].until=1/0;break;case"string":q=t(ue[T].until).startOf("day").valueOf(),ue[T].until=q.valueOf();break}}return ue}function mPe(h,S,T){var P,q,ue=this.eras(),ze,Ot,No;for(h=h.toUpperCase(),P=0,q=ue.length;P<q;++P)if(ze=ue[P].name.toUpperCase(),Ot=ue[P].abbr.toUpperCase(),No=ue[P].narrow.toUpperCase(),T)switch(S){case"N":case"NN":case"NNN":if(Ot===h)return ue[P];break;case"NNNN":if(ze===h)return ue[P];break;case"NNNNN":if(No===h)return ue[P];break}else if([ze,Ot,No].indexOf(h)>=0)return ue[P]}function fPe(h,S){var T=h.since<=h.until?1:-1;return S===void 0?t(h.since).year():t(h.since).year()+(S-h.offset)*T}function gPe(){var h,S,T,P=this.localeData().eras();for(h=0,S=P.length;h<S;++h)if(T=this.clone().startOf("day").valueOf(),P[h].since<=T&&T<=P[h].until||P[h].until<=T&&T<=P[h].since)return P[h].name;return""}function hPe(){var h,S,T,P=this.localeData().eras();for(h=0,S=P.length;h<S;++h)if(T=this.clone().startOf("day").valueOf(),P[h].since<=T&&T<=P[h].until||P[h].until<=T&&T<=P[h].since)return P[h].narrow;return""}function xPe(){var h,S,T,P=this.localeData().eras();for(h=0,S=P.length;h<S;++h)if(T=this.clone().startOf("day").valueOf(),P[h].since<=T&&T<=P[h].until||P[h].until<=T&&T<=P[h].since)return P[h].abbr;return""}function yPe(){var h,S,T,P,q=this.localeData().eras();for(h=0,S=q.length;h<S;++h)if(T=q[h].since<=q[h].until?1:-1,P=this.clone().startOf("day").valueOf(),q[h].since<=P&&P<=q[h].until||q[h].until<=P&&P<=q[h].since)return(this.year()-t(q[h].since).year())*T+q[h].offset;return this.year()}function bPe(h){return s(this,"_erasNameRegex")||dL.call(this),h?this._erasNameRegex:this._erasRegex}function vPe(h){return s(this,"_erasAbbrRegex")||dL.call(this),h?this._erasAbbrRegex:this._erasRegex}function SPe(h){return s(this,"_erasNarrowRegex")||dL.call(this),h?this._erasNarrowRegex:this._erasRegex}function uL(h,S){return S.erasAbbrRegex(h)}function wPe(h,S){return S.erasNameRegex(h)}function kPe(h,S){return S.erasNarrowRegex(h)}function EPe(h,S){return S._eraYearOrdinalRegex||eu}function dL(){var h=[],S=[],T=[],P=[],q,ue,ze,Ot,No,bn=this.eras();for(q=0,ue=bn.length;q<ue;++q)ze=nu(bn[q].name),Ot=nu(bn[q].abbr),No=nu(bn[q].narrow),S.push(ze),h.push(Ot),T.push(No),P.push(ze),P.push(Ot),P.push(No);this._erasRegex=new RegExp("^("+P.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+S.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+h.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+T.join("|")+")","i")}ae(0,["gg",2],0,function(){return this.weekYear()%100}),ae(0,["GG",2],0,function(){return this.isoWeekYear()%100});function AE(h,S){ae(0,[h,h.length],0,S)}AE("gggg","weekYear"),AE("ggggg","weekYear"),AE("GGGG","isoWeekYear"),AE("GGGGG","isoWeekYear"),Le("G",Xa),Le("g",Xa),Le("GG",Eo,Bn),Le("gg",Eo,Bn),Le("GGGG",uh,hi),Le("gggg",uh,hi),Le("GGGGG",op,lr),Le("ggggg",op,lr),mh(["gggg","ggggg","GGGG","GGGGG"],function(h,S,T,P){S[P.substr(0,2)]=ln(h)}),mh(["gg","GG"],function(h,S,T,P){S[P]=t.parseTwoDigitYear(h)});function APe(h){return kte.call(this,h,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function CPe(h){return kte.call(this,h,this.isoWeek(),this.isoWeekday(),1,4)}function TPe(){return bm(this.year(),1,4)}function IPe(){return bm(this.isoWeekYear(),1,4)}function DPe(){var h=this.localeData()._week;return bm(this.year(),h.dow,h.doy)}function MPe(){var h=this.localeData()._week;return bm(this.weekYear(),h.dow,h.doy)}function kte(h,S,T,P,q){var ue;return h==null?NS(this,P,q).year:(ue=bm(h,P,q),S>ue&&(S=ue),NPe.call(this,h,S,T,P,q))}function NPe(h,S,T,P,q){var ue=ete(h,S,T,P,q),ze=MS(ue.year,0,ue.dayOfYear);return this.year(ze.getUTCFullYear()),this.month(ze.getUTCMonth()),this.date(ze.getUTCDate()),this}ae("Q",0,"Qo","quarter"),Le("Q",ro),Jn("Q",function(h,S){S[ed]=(ln(h)-1)*3});function BPe(h){return h==null?Math.ceil((this.month()+1)/3):this.month((h-1)*3+this.month()%3)}ae("D",["DD",2],"Do","date"),Le("D",Eo,tu),Le("DD",Eo,Bn),Le("Do",function(h,S){return h?S._dayOfMonthOrdinalParse||S._ordinalParse:S._dayOfMonthOrdinalParseLenient}),Jn(["D","DD"],ru),Jn("Do",function(h,S){S[ru]=ln(h.match(Eo)[0])});var Ete=ym("Date",!0);ae("DDD",["DDDD",3],"DDDo","dayOfYear"),Le("DDD",gm),Le("DDDD",kr),Jn(["DDD","DDDD"],function(h,S,T){T._dayOfYear=ln(h)});function PPe(h){var S=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return h==null?S:this.add(h-S,"d")}ae("m",["mm",2],0,"minute"),Le("m",Eo,hm),Le("mm",Eo,Bn),Jn(["m","mm"],fc);var _Pe=ym("Minutes",!1);ae("s",["ss",2],0,"second"),Le("s",Eo,hm),Le("ss",Eo,Bn),Jn(["s","ss"],td);var RPe=ym("Seconds",!1);ae("S",0,0,function(){return~~(this.millisecond()/100)}),ae(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),ae(0,["SSS",3],0,"millisecond"),ae(0,["SSSS",4],0,function(){return this.millisecond()*10}),ae(0,["SSSSS",5],0,function(){return this.millisecond()*100}),ae(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3}),ae(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4}),ae(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5}),ae(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6}),Le("S",gm,ro),Le("SS",gm,Bn),Le("SSS",gm,kr);var n0,Ate;for(n0="SSSS";n0.length<=9;n0+="S")Le(n0,eu);function LPe(h,S){S[Er]=ln(("0."+h)*1e3)}for(n0="S";n0.length<=9;n0+="S")Jn(n0,LPe);Ate=ym("Milliseconds",!1),ae("z",0,0,"zoneAbbr"),ae("zz",0,0,"zoneName");function OPe(){return this._isUTC?"UTC":""}function FPe(){return this._isUTC?"Coordinated Universal Time":""}var gt=_.prototype;gt.add=MBe,gt.calendar=OBe,gt.clone=FBe,gt.diff=jBe,gt.endOf=tPe,gt.format=QBe,gt.from=ZBe,gt.fromNow=XBe,gt.to=JBe,gt.toNow=VBe,gt.get=YMe,gt.invalidAt=uPe,gt.isAfter=UBe,gt.isBefore=$Be,gt.isBetween=HBe,gt.isSame=zBe,gt.isSameOrAfter=GBe,gt.isSameOrBefore=qBe,gt.isValid=lPe,gt.lang=yte,gt.locale=xte,gt.localeData=bte,gt.max=lBe,gt.min=aBe,gt.parsingFlags=cPe,gt.set=QMe,gt.startOf=ePe,gt.subtract=NBe,gt.toArray=iPe,gt.toObject=sPe,gt.toDate=rPe,gt.toISOString=KBe,gt.inspect=YBe,typeof Symbol<"u"&&Symbol.for!=null&&(gt[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),gt.toJSON=aPe,gt.toString=WBe,gt.unix=nPe,gt.valueOf=oPe,gt.creationData=dPe,gt.eraName=gPe,gt.eraNarrow=hPe,gt.eraAbbr=xPe,gt.eraYear=yPe,gt.year=np,gt.isLeapYear=DS,gt.weekYear=APe,gt.isoWeekYear=CPe,gt.quarter=gt.quarters=BPe,gt.month=Jee,gt.daysInMonth=rNe,gt.week=gt.weeks=pNe,gt.isoWeek=gt.isoWeeks=mNe,gt.weeksInYear=DPe,gt.weeksInWeekYear=MPe,gt.isoWeeksInYear=TPe,gt.isoWeeksInISOWeekYear=IPe,gt.date=Ete,gt.day=gt.days=CNe,gt.weekday=TNe,gt.isoWeekday=INe,gt.dayOfYear=PPe,gt.hour=gt.hours=RNe,gt.minute=gt.minutes=_Pe,gt.second=gt.seconds=RPe,gt.millisecond=gt.milliseconds=Ate,gt.utcOffset=xBe,gt.utc=bBe,gt.local=vBe,gt.parseZone=SBe,gt.hasAlignedHourOffset=wBe,gt.isDST=kBe,gt.isLocal=ABe,gt.isUtcOffset=CBe,gt.isUtc=pte,gt.isUTC=pte,gt.zoneAbbr=OPe,gt.zoneName=FPe,gt.dates=J("dates accessor is deprecated. Use date instead.",Ete),gt.months=J("months accessor is deprecated. Use month instead",Jee),gt.years=J("years accessor is deprecated. Use year instead",np),gt.zone=J("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",yBe),gt.isDSTShifted=J("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",EBe);function UPe(h){return Wr(h*1e3)}function $Pe(){return Wr.apply(null,arguments).parseZone()}function Cte(h){return h}var Pn=he.prototype;Pn.calendar=ye,Pn.longDateFormat=_t,Pn.invalidDate=po,Pn.ordinal=Sn,Pn.preparse=Cte,Pn.postformat=Cte,Pn.relativeTime=be,Pn.pastFuture=Qe,Pn.set=oe,Pn.eras=pPe,Pn.erasParse=mPe,Pn.erasConvertYear=fPe,Pn.erasAbbrRegex=vPe,Pn.erasNameRegex=bPe,Pn.erasNarrowRegex=SPe,Pn.months=eNe,Pn.monthsShort=tNe,Pn.monthsParse=nNe,Pn.monthsRegex=sNe,Pn.monthsShortRegex=iNe,Pn.week=lNe,Pn.firstDayOfYear=dNe,Pn.firstDayOfWeek=uNe,Pn.weekdays=SNe,Pn.weekdaysMin=kNe,Pn.weekdaysShort=wNe,Pn.weekdaysParse=ANe,Pn.weekdaysRegex=DNe,Pn.weekdaysShortRegex=MNe,Pn.weekdaysMinRegex=NNe,Pn.isPM=PNe,Pn.meridiem=LNe;function CE(h,S,T,P){var q=vm(),ue=g().set(P,S);return q[T](ue,h)}function Tte(h,S,T){if(c(h)&&(S=h,h=void 0),h=h||"",S!=null)return CE(h,S,T,"month");var P,q=[];for(P=0;P<12;P++)q[P]=CE(h,P,T,"month");return q}function pL(h,S,T,P){typeof h=="boolean"?(c(S)&&(T=S,S=void 0),S=S||""):(S=h,T=S,h=!1,c(S)&&(T=S,S=void 0),S=S||"");var q=vm(),ue=h?q._week.dow:0,ze,Ot=[];if(T!=null)return CE(S,(T+ue)%7,P,"day");for(ze=0;ze<7;ze++)Ot[ze]=CE(S,(ze+ue)%7,P,"day");return Ot}function HPe(h,S){return Tte(h,S,"months")}function zPe(h,S){return Tte(h,S,"monthsShort")}function GPe(h,S,T){return pL(h,S,T,"weekdays")}function qPe(h,S,T){return pL(h,S,T,"weekdaysShort")}function jPe(h,S,T){return pL(h,S,T,"weekdaysMin")}o0("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(h){var S=h%10,T=ln(h%100/10)===1?"th":S===1?"st":S===2?"nd":S===3?"rd":"th";return h+T}}),t.lang=J("moment.lang is deprecated. Use moment.locale instead.",o0),t.langData=J("moment.langData is deprecated. Use moment.localeData instead.",vm);var Sm=Math.abs;function WPe(){var h=this._data;return this._milliseconds=Sm(this._milliseconds),this._days=Sm(this._days),this._months=Sm(this._months),h.milliseconds=Sm(h.milliseconds),h.seconds=Sm(h.seconds),h.minutes=Sm(h.minutes),h.hours=Sm(h.hours),h.months=Sm(h.months),h.years=Sm(h.years),this}function Ite(h,S,T,P){var q=od(S,T);return h._milliseconds+=P*q._milliseconds,h._days+=P*q._days,h._months+=P*q._months,h._bubble()}function KPe(h,S){return Ite(this,h,S,1)}function YPe(h,S){return Ite(this,h,S,-1)}function Dte(h){return h<0?Math.floor(h):Math.ceil(h)}function QPe(){var h=this._milliseconds,S=this._days,T=this._months,P=this._data,q,ue,ze,Ot,No;return h>=0&&S>=0&&T>=0||h<=0&&S<=0&&T<=0||(h+=Dte(mL(T)+S)*864e5,S=0,T=0),P.milliseconds=h%1e3,q=Dl(h/1e3),P.seconds=q%60,ue=Dl(q/60),P.minutes=ue%60,ze=Dl(ue/60),P.hours=ze%24,S+=Dl(ze/24),No=Dl(Mte(S)),T+=No,S-=Dte(mL(No)),Ot=Dl(T/12),T%=12,P.days=S,P.months=T,P.years=Ot,this}function Mte(h){return h*4800/146097}function mL(h){return h*146097/4800}function ZPe(h){if(!this.isValid())return NaN;var S,T,P=this._milliseconds;if(h=we(h),h==="month"||h==="quarter"||h==="year")switch(S=this._days+P/864e5,T=this._months+Mte(S),h){case"month":return T;case"quarter":return T/3;case"year":return T/12}else switch(S=this._days+Math.round(mL(this._months)),h){case"week":return S/7+P/6048e5;case"day":return S+P/864e5;case"hour":return S*24+P/36e5;case"minute":return S*1440+P/6e4;case"second":return S*86400+P/1e3;case"millisecond":return Math.floor(S*864e5)+P;default:throw new Error("Unknown unit "+h)}}function wm(h){return function(){return this.as(h)}}var Nte=wm("ms"),XPe=wm("s"),JPe=wm("m"),VPe=wm("h"),e_e=wm("d"),t_e=wm("w"),o_e=wm("M"),n_e=wm("Q"),r_e=wm("y"),i_e=Nte;function s_e(){return od(this)}function a_e(h){return h=we(h),this.isValid()?this[h+"s"]():NaN}function gh(h){return function(){return this.isValid()?this._data[h]:NaN}}var l_e=gh("milliseconds"),c_e=gh("seconds"),u_e=gh("minutes"),d_e=gh("hours"),p_e=gh("days"),m_e=gh("months"),f_e=gh("years");function g_e(){return Dl(this.days()/7)}var km=Math.round,o1={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function h_e(h,S,T,P,q){return q.relativeTime(S||1,!!T,h,P)}function x_e(h,S,T,P){var q=od(h).abs(),ue=km(q.as("s")),ze=km(q.as("m")),Ot=km(q.as("h")),No=km(q.as("d")),bn=km(q.as("M")),Va=km(q.as("w")),Em=km(q.as("y")),r0=ue<=T.ss&&["s",ue]||ue<T.s&&["ss",ue]||ze<=1&&["m"]||ze<T.m&&["mm",ze]||Ot<=1&&["h"]||Ot<T.h&&["hh",Ot]||No<=1&&["d"]||No<T.d&&["dd",No];return T.w!=null&&(r0=r0||Va<=1&&["w"]||Va<T.w&&["ww",Va]),r0=r0||bn<=1&&["M"]||bn<T.M&&["MM",bn]||Em<=1&&["y"]||["yy",Em],r0[2]=S,r0[3]=+h>0,r0[4]=P,h_e.apply(null,r0)}function y_e(h){return h===void 0?km:typeof h=="function"?(km=h,!0):!1}function b_e(h,S){return o1[h]===void 0?!1:S===void 0?o1[h]:(o1[h]=S,h==="s"&&(o1.ss=S-1),!0)}function v_e(h,S){if(!this.isValid())return this.localeData().invalidDate();var T=!1,P=o1,q,ue;return typeof h=="object"&&(S=h,h=!1),typeof h=="boolean"&&(T=h),typeof S=="object"&&(P=Object.assign({},o1,S),S.s!=null&&S.ss==null&&(P.ss=S.s-1)),q=this.localeData(),ue=x_e(this,!T,P,q),T&&(ue=q.pastFuture(+this,ue)),q.postformat(ue)}var fL=Math.abs;function n1(h){return(h>0)-(h<0)||+h}function TE(){if(!this.isValid())return this.localeData().invalidDate();var h=fL(this._milliseconds)/1e3,S=fL(this._days),T=fL(this._months),P,q,ue,ze,Ot=this.asSeconds(),No,bn,Va,Em;return Ot?(P=Dl(h/60),q=Dl(P/60),h%=60,P%=60,ue=Dl(T/12),T%=12,ze=h?h.toFixed(3).replace(/\.?0+$/,""):"",No=Ot<0?"-":"",bn=n1(this._months)!==n1(Ot)?"-":"",Va=n1(this._days)!==n1(Ot)?"-":"",Em=n1(this._milliseconds)!==n1(Ot)?"-":"",No+"P"+(ue?bn+ue+"Y":"")+(T?bn+T+"M":"")+(S?Va+S+"D":"")+(q||P||h?"T":"")+(q?Em+q+"H":"")+(P?Em+P+"M":"")+(h?Em+ze+"S":"")):"P0D"}var wn=vE.prototype;wn.isValid=mBe,wn.abs=WPe,wn.add=KPe,wn.subtract=YPe,wn.as=ZPe,wn.asMilliseconds=Nte,wn.asSeconds=XPe,wn.asMinutes=JPe,wn.asHours=VPe,wn.asDays=e_e,wn.asWeeks=t_e,wn.asMonths=o_e,wn.asQuarters=n_e,wn.asYears=r_e,wn.valueOf=i_e,wn._bubble=QPe,wn.clone=s_e,wn.get=a_e,wn.milliseconds=l_e,wn.seconds=c_e,wn.minutes=u_e,wn.hours=d_e,wn.days=p_e,wn.weeks=g_e,wn.months=m_e,wn.years=f_e,wn.humanize=v_e,wn.toISOString=TE,wn.toString=TE,wn.toJSON=TE,wn.locale=xte,wn.localeData=bte,wn.toIsoString=J("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",TE),wn.lang=yte,ae("X",0,0,"unix"),ae("x",0,0,"valueOf"),Le("x",Xa),Le("X",ph),Jn("X",function(h,S,T){T._d=new Date(parseFloat(h)*1e3)}),Jn("x",function(h,S,T){T._d=new Date(ln(h))});return t.version="2.30.1",o(Wr),t.fn=gt,t.min=cBe,t.max=uBe,t.now=dBe,t.utc=g,t.unix=UPe,t.months=HPe,t.isDate=u,t.locale=o0,t.invalid=A,t.duration=od,t.isMoment=O,t.weekdays=GPe,t.parseZone=$Pe,t.localeData=vm,t.isDuration=SE,t.monthsShort=zPe,t.weekdaysMin=jPe,t.defineLocale=tL,t.updateLocale=$Ne,t.locales=HNe,t.weekdaysShort=qPe,t.normalizeUnits=we,t.relativeTimeRounding=y_e,t.relativeTimeThreshold=b_e,t.calendarFormat=LBe,t.prototype=gt,t.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},t}))});function TV(e,t,o){let n=Ee(i=>r(Pe,{...i},r(CIe,{item:e,user:t,sounds:o,closeModal:()=>vo(n)})))}function CIe({item:e,user:t,sounds:o,closeModal:n}){let i=e.users.find(({id:a})=>a===t.id)??{id:"",plays:[0]},s=o.filter(a=>a.users.some(l=>l.id===t.id)&&a.soundId!==e.soundId);return r($e,{className:Gn("user")},r(en,{onClick:()=>{n(),or(t.id)}},r("div",{className:Gn("user-header")},r("img",{className:Gn("user-avatar"),src:t.getAvatarURL(void 0,512,!0),alt:"",style:{cursor:"pointer"}}),r(Jo,{className:Gn("user-name"),style:{textTransform:"none",cursor:"pointer"}},t.username))),r(Be,{flexDirection:"row",style:{gap:"10px"}},r("img",{className:Gn("user-sound-emoji"),src:qy(e.emoji),alt:""}),r(Be,{flexDirection:"column",style:{gap:"7px",height:"68px",justifyContent:"space-between"}},r(Y,{size:"md",weight:"bold",style:{height:"20px"}},e.soundId),r(Y,{size:"md"},"Played ",i.plays.length," ",i.plays.length===1?"time":"times","."),r(Y,{size:"md"},"Last played: ",r(Di,{timestamp:new Date((0,AIe.default)(i.plays.at(-1)).toDate())})))),r(Y,{size:"lg",weight:"semibold",tag:"h2",className:me(Z.top16,Z.bottom8)},s.length?"Also played:":" "),r(Be,{style:{justifyContent:"space-between"}},r(I_,{users:s,count:s.length,guildId:void 0,renderIcon:!1,max:10,showDefaultAvatarsForNullUsers:!0,showUserPopout:!0,renderMoreUsers:()=>r("div",{className:dm.emptyUser},r("div",{className:dm.moreUsers},"...")),className:Gn("user-sounds"),renderUser:({soundId:a,emoji:l})=>r(en,{className:dm.clickableAvatar,onClick:()=>{n(),TV(o.find(c=>c.soundId===a),t,o)}},r("img",{className:dm.avatar,src:qy(l),alt:a,title:a}))}),r("div",{className:Gn("user-buttons")},r(A_,{text:"Download",icon:r(DIe,null),onClick:()=>T_(e.soundId)}),r(A_,{text:"Copy ID",icon:r(ol,null),onClick:()=>$t(e.soundId,"ID copied to clipboard!")}),r(A_,{text:"Play Sound",icon:r(IIe,null),onClick:()=>C_(e.soundId)}))))}var AIe,TIe=x(()=>{"use strict";d();Et();eo();ut();ao();gS();mt();co();xt();at();B();AIe=Ml(EIe());D_()});async function M_(){let e=await E_(),t=Ee(o=>r(ee,null,r(Pe,{...o,size:"large"},r(NIe,{data:e,closeModal:()=>vo(t)}))))}function MIe(){return r(ul,{className:"chatBarLogIcon",onClick:()=>M_(),tooltip:"Open SoundBoard Log",icon:B_})}function NIe({data:e,closeModal:t}){let[o,n]=L(e),[i,s]=L([]),a=async()=>n(await E_());se(()=>{let m=()=>a();return BIe(m),()=>PIe(m)},[]);let l=2;se(()=>{(async()=>{let m=o.flatMap(g=>g.users).map(g=>g.id).filter((g,y,b)=>y===b.indexOf(g)).filter(g=>!i.map(y=>y.id).includes(g));if(m.length)for(let g of m){let y=await as.getUser(g).catch(()=>{});y&&s(b=>[...b,y])}})()},[o]);function c(m,g){return r(en,{className:dm.clickableAvatar,onClick:()=>{u(m,g)}},r(Ue,{text:`${g.length-l} other people used this sound...`},({onMouseEnter:y,onMouseLeave:b})=>r("div",{className:dm.moreUsers,onMouseEnter:y,onMouseLeave:b},"+",g.length-l)))}function u(m,g){SIe(m,g,p)}function p(m,g){TV(m,g,o)}return r(f,null,r(je,{className:Gn("modal-header")},r(Y,{size:"lg",weight:"semibold",style:{flexGrow:1}},"SoundBoard log"),r(Ut,{onClick:t})),r($e,{className:me(Gn("modal-content"),Z.top8)},o.length?o.map(m=>{let g=i.filter(y=>m.users.map(b=>b.id).includes(y.id));return r("div",{key:Gn("sound"),className:Gn("sound")},r(Be,{flexDirection:"row",className:Gn("sound-info")},r("img",{src:qy(m.emoji),className:Gn("sound-emoji")}),r(Y,{size:"xs",weight:"medium",className:Gn("sound-id")},m.soundId)),r(I_,{users:g.slice(0,l),count:m.users.length-1,guildId:void 0,renderIcon:!1,max:l,showDefaultAvatarsForNullUsers:!0,showUserPopout:!0,renderMoreUsers:()=>c(m,g),className:Gn("sound-users"),renderUser:y=>r(en,{className:dm.clickableAvatar,onClick:()=>{p(m,y)}},r("img",{className:dm.avatar,src:y.getAvatarURL(void 0,80,!0),alt:y.username,title:y.username}))}),r(Be,{flexDirection:"row",className:Gn("sound-buttons")},r(U,{color:U.Colors.PRIMARY,size:U.Sizes.SMALL,onClick:()=>T_(m.soundId)},"Download"),r(U,{color:U.Colors.GREEN,size:U.Sizes.SMALL,onClick:()=>$t(m.soundId,"ID copied to clipboard!")},"Copy ID"),r(Ue,{text:`Soundboard volume: ${Math.floor(Qf.store.soundVolume*100)}%`},({onMouseEnter:y,onMouseLeave:b})=>r(U,{color:U.Colors.BRAND,size:U.Sizes.SMALL,onClick:()=>C_(m.soundId),onMouseEnter:y,onMouseLeave:b},"Play Sound"))))}):r("div",{style:{textAlign:"center"},className:Z.top16},r("img",{src:"https://raw.githubusercontent.com/fres621/assets/main/shiggy.png",height:"200px"}),r(Y,{size:"sm",weight:"medium",style:{color:"var(--text-muted)"},className:Z.bottom16},"No sounds logged yet. Join a voice chat to start logging!"))),r(ht,{className:Gn("modal-footer")},r(U,{color:U.Colors.RED,onClick:async()=>{await vIe(),a()}},"Clear logs")))}var N_=x(()=>{"use strict";d();Hm();Et();tt();eo();tE();AV();gS();mt();co();xt();at();B();D_();kIe();TIe()});var _Ie,Qf,tE=x(()=>{"use strict";d();Q();ut();wt();$();B();N_();_Ie=R({SavedIds:{description:"The amount of soundboard ids you want to save at a time (0 lets you save infinite)",type:6,component:({setValue:e})=>{let t=_Ie.store.SavedIds??50,[o,n]=L(`${t}`),[i,s]=L(!1),[a,l]=L(null);function c(u){let p=Number(u);if(Number.isNaN(p)||p%1!==0||p<0){let m="";m+=Number.isNaN(p)?`The value is not a number.
`:"",m+=p%1!==0?`The value can't be a decimal number.
`:"",m+=p<0?`The value can't be a negative number.
`:"",l(m);return}else l(null);p<t?s(!0):s(!1),n(u),e(p)}return r("section",null,r(re,null,"The amount of soundboard ids you want to save at a time (0 lets you save infinite)"),r(qe,{type:"number",pattern:"-?[0-9]+",value:o,onChange:c,placeholder:"Enter a number"}),i&&r(W,{style:{color:"var(--text-feedback-critical)"}},"Warning! Setting the number to a lower value will reset the log!"),a&&r(W,{style:{color:"var(--text-feedback-critical)"}},a))}},FileType:{description:"the format that you want to save your file",type:4,options:[{label:".ogg",value:".ogg",default:!0},{label:".mp3",value:".mp3"},{label:".wav",value:".wav"}]},OpenLogs:{type:6,description:"show the logs",component:()=>r(U,{color:U.Colors.LINK,size:U.Sizes.SMALL,onClick:M_},"Open Logs")},soundVolume:{description:"How loud the toggle sound is (0 to disable)",type:5,default:.5,markers:[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1]}}),Qf=_Ie});function qy(e){return e?e.id?`https://cdn.discordapp.com/emojis/${e.id}.png?size=32`:RIe.getURL(e.name):RIe.getURL("\u2753")}async function T_(e){let t=e+Qf.store.FileType,o=await fetch(`https://cdn.discordapp.com/soundboard-sounds/${e}`).then(n=>n.arrayBuffer());su(new File([o],t,{type:"audio/ogg"}))}function LIe(){return P_}function BIe(e){P_.push(e)}function PIe(e){P_=P_.filter(t=>t!==e)}var Gn,RIe,C_,P_,I_,dm,gS=x(()=>{"use strict";d();Ol();nt();qo();rd();fe();tE();Gn=de("vc-soundlog-"),RIe=He("getEmojiColors","getURL");C_=e=>{_s(`https://cdn.discordapp.com/soundboard-sounds/${e}`,{volume:Qf.store.soundVolume*100})};P_=[];I_=Rn(()=>ap("defaultRenderUser","showDefaultAvatarsForNullUsers")),dm=et("moreUsers","emptyUser","avatarContainer","clickableAvatar","avatar")});function IIe(){return r("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 20 20"},r("g",{fill:"none",fillRule:"evenodd",transform:"translate(-2 -2)"},r("circle",{cx:"12",cy:"12",r:"9",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"}),r("path",{fill:"currentColor",d:"m9.998 8.428 5.492 3.138a.5.5 0 0 1 0 .868l-5.492 3.139a.5.5 0 0 1-.748-.435V8.862a.5.5 0 0 1 .748-.435z"})))}function DIe(){return r("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none"},r("path",{stroke:"currentColor",strokeLinecap:"round",strokeWidth:"1.5",d:"M8 22h8c2.828 0 4.243 0 5.121-.879C22 20.243 22 18.828 22 16v-1c0-2.828 0-4.243-.879-5.121-.768-.769-1.946-.865-4.121-.877m-10 0c-2.175.012-3.353.108-4.121.877C2 10.757 2 12.172 2 15v1c0 2.828 0 4.243.879 5.121.3.3.662.498 1.121.628"}),r("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M12 2v13m0 0-3-3.5m3 3.5 3-3.5"}))}function B_({height:e=24,width:t=24,className:o="chatBarLogIcon"}){return r("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:e,className:me(Gn("icon"),o),viewBox:"1.134 10.59 87.732 68.821"},r("path",{fill:"currentColor",d:"M84.075 10.597 5.932 10.59a4.799 4.799 0 0 0-4.798 4.79v59.226a4.801 4.801 0 0 0 4.798 4.798l78.144.007a4.79 4.79 0 0 0 4.79-4.794V15.391a4.796 4.796 0 0 0-4.791-4.794zm-11.704 8.766c0-.283.229-.509.51-.509h7.105c.279 0 .501.226.501.509v7.102c0 .28-.222.509-.501.509h-7.105a.511.511 0 0 1-.51-.509v-7.102zm-63.968 0c0-.283.229-.509.509-.509h29.399c.28 0 .502.226.502.509v7.102c0 .28-.222.509-.502.509H8.912a.51.51 0 0 1-.509-.509v-7.102zm7.863 45.454a.727.727 0 0 1-.727.727H14.28v6.466c0 1-.822 1.821-1.829 1.821-.516 0-.97-.199-1.301-.53a1.829 1.829 0 0 1-.531-1.291v-6.466H9.51a.726.726 0 0 1-.727-.727v-6.854c0-.4.327-.727.727-.727h1.11V37.583c0-1.017.822-1.839 1.832-1.839.505 0 .96.211 1.291.542a1.8 1.8 0 0 1 .538 1.297v19.653h1.259c.4 0 .727.326.727.727v6.854zm11.02-13.204a.73.73 0 0 1-.727.728h-1.11v19.651a1.835 1.835 0 0 1-1.832 1.839c-.506 0-.96-.21-1.291-.541a1.8 1.8 0 0 1-.538-1.298V52.341H20.53a.73.73 0 0 1-.727-.728v-6.855c0-.403.327-.727.727-.727h1.259v-6.466a1.83 1.83 0 0 1 1.829-1.821c.516 0 .97.2 1.301.531.331.331.531.792.531 1.29v6.466h1.11c.4 0 .727.324.727.727v6.855zm11.268 13.204a.727.727 0 0 1-.727.727h-1.259v6.466c0 1-.821 1.821-1.829 1.821-.516 0-.97-.199-1.301-.53a1.828 1.828 0 0 1-.53-1.291v-6.466h-1.11a.726.726 0 0 1-.727-.727v-6.854c0-.4.327-.727.727-.727h1.11V37.583c0-1.017.821-1.839 1.832-1.839.505 0 .959.211 1.291.542a1.8 1.8 0 0 1 .538 1.297v19.653h1.259c.4 0 .727.326.727.727v6.854zm10.94-13.204a.73.73 0 0 1-.728.728h-1.11v19.651a1.835 1.835 0 0 1-1.832 1.839 1.82 1.82 0 0 1-1.29-.541 1.802 1.802 0 0 1-.539-1.298V52.341h-1.259a.73.73 0 0 1-.727-.728v-6.855c0-.403.327-.727.727-.727h1.259v-6.466c0-.999.822-1.821 1.829-1.821.516 0 .97.2 1.301.531.331.331.53.792.53 1.29v6.466h1.11c.4 0 .728.324.728.727v6.855zm8.703-32.25c0-.283.229-.509.508-.509h7.106c.279 0 .501.226.501.509v7.102c0 .28-.222.509-.501.509h-7.106a.51.51 0 0 1-.508-.509v-7.102zm4.176 53.927a4.083 4.083 0 0 1-4.082-4.082c0-2.25 1.828-4.078 4.082-4.078s4.078 1.828 4.078 4.078a4.08 4.08 0 0 1-4.078 4.082zm0-14.709a4.082 4.082 0 1 1 0-8.163 4.078 4.078 0 0 1 4.078 4.081 4.08 4.08 0 0 1-4.078 4.082zm0-14.713a4.082 4.082 0 0 1-4.082-4.081 4.08 4.08 0 0 1 8.16 0 4.079 4.079 0 0 1-4.078 4.081zM76.438 73.29a4.082 4.082 0 0 1-4.081-4.082 4.081 4.081 0 0 1 4.081-4.078 4.078 4.078 0 0 1 4.078 4.078 4.078 4.078 0 0 1-4.078 4.082zm0-14.709a4.081 4.081 0 0 1 0-8.163 4.078 4.078 0 0 1 4.078 4.081 4.08 4.08 0 0 1-4.078 4.082zm0-14.713a4.082 4.082 0 0 1-4.081-4.081 4.08 4.08 0 0 1 8.159 0 4.078 4.078 0 0 1-4.078 4.081z"}))}function A_({text:e,icon:t,onClick:o}){return r(Ue,{text:e},({onMouseEnter:n,onMouseLeave:i})=>r("div",{style:{display:"flex"}},r(U,{"aria-haspopup":"dialog","aria-label":e,size:"",look:U.Looks.FILLED,onMouseEnter:n,onMouseLeave:i,className:Gn("discord-button"),onClick:o,style:{padding:"0 4px"}},r("div",{className:Gn("button-wrapper")},t))))}var D_=x(()=>{"use strict";d();ma();gS();xt();B();N_()});var IV,OIe=x(()=>{d();(window.VencordStyles??=new Map).set("src/equicordplugins/soundBoardLogger/styles.css",{name:"src/equicordplugins/soundBoardLogger/styles.css",source:`.vc-soundlog-more-user,
.vc-soundlog-sound {
    box-sizing: border-box;
    position: relative;
    background: var(--background-secondary-alt);
    border-radius: var(--radius-sm);
    height: 40px;
    width: 100%;
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: space-between;
    font-weight: 600;
    border: 1px solid transparent;
    overflow: hidden;
    text-align: center;
    margin-top: 10px;
    padding-left: 10px;
    padding-right: 10px
}

.vc-soundlog-more-user-profile,
.vc-soundlog-sound-info {
    gap: 10px;
    align-content: center;
    align-items: center;
    flex: 2;
}

.vc-soundlog-sound-buttons {
    gap: 10px;
    align-content: center;
    flex: 1;
}

.vc-soundlog-sound-users {
    flex: 2;
}


.vc-soundlog-sound-emoji {
    width: 24px;
    height: 24px;
}

.vc-soundlog-more,
.vc-soundlog-user {
    padding: 1em;
}

.vc-soundlog-more-header,
.vc-soundlog-user-header {
    display: flex;
    align-items: center;
    margin-bottom: 1em;
    width: fit-content;
}

.vc-soundlog-more-soundid,
.vc-soundlog-user-name {
    text-transform: none;
    flex-grow: 0;
    background: var(--background-base-low);
    border-radius: 0 9999px 9999px 0;
    padding: 6px 0.8em 6px 0.5em;
    font-size: 20px;
    height: 20px;
    position: relative;
    text-wrap: nowrap;
}

.vc-soundlog-more-soundid {
    background: unset;
}

.vc-soundlog-user-name::before {
    content: "";
    display: block;
    position: absolute;
    height: 100%;
    width: 16px;
    background: var(--background-base-low);
    z-index: -1;
    left: -16px;
    top: 0;
}


.vc-soundlog-more-emoji,
.vc-soundlog-user-avatar {
    height: 32px;
    width: 32px;
    border-radius: 50%;
}

.vc-soundlog-more-emoji {
    border-radius: 0%;
}

.vc-soundlog-user-buttons {
    margin-left: auto;
    display: flex;
    gap: 0.2em;
}

.vc-soundlog-user-sound-emoji {
    height: 48px;
    margin-top: 20px;
}

/* input style from https://github.com/Vendicated/Vencord/blob/ea11f2244fde469ce308f8a4e7224430be62f8f1/src/plugins/sendTimestamps/styles.css#L1-L13 */
.vc-soundlog-clone-input {
    background-color: var(--input-background-default, var(--input-background));
    color: var(--text-default);
    width: 100%;
    padding: 8px 8px 8px 12px;
    outline: none;
    border: 1px solid var(--input-background-default, var(--input-background));
    border-radius: 4px;
    font-weight: 500;
    font-style: inherit;
    font-size: 100%;
    box-sizing: border-box;
    height: 40px;
}

/* FIXME: bad name
_7f7a2c5f23327d73 */
.vc-soundlog-discord-button {
    opacity: .7;
    align-items: center;
    align-self: center;
    border-radius: 8px;
    cursor: pointer;
    display: flex;
    justify-content: center;
    padding: 10px;

    &:hover {
        background: hsl(0deg 0% 100% / 10%);
        opacity: 1
    }
}

/* _3f4f204c3133fb93 */
.vc-soundlog-button-wrapper {
    align-self: center;
    display: flex;
    flex-direction: row;
    gap: 8px;
}`,classNames:{},dom:null});IV="src/equicordplugins/soundBoardLogger/styles.css"});var __,FIe=x(()=>{"use strict";d();ps();H();$();B();D_();N_();tE();AV();OIe();gS();__=k({name:"SoundBoardLogger",authors:[w.Moxxie,j.Fres,w.amy,w.thororen],description:"Logs all soundboards that are played in a voice chat and allows you to download them",dependencies:["AudioPlayerAPI"],settings:Qf,headerBarButton:{icon:B_,render:MIe},start(){Or(IV),V.subscribe("VOICE_CHANNEL_EFFECT_SEND",async e=>{e?.soundId&&(await bIe(e),LIe().forEach(t=>t()))})},stop(){Fr(IV)}})});var sh,bgt,UIe,vgt,Sgt,Zf,R_,$Ie=x(()=>{"use strict";d();Q();H();mt();$();B();sh=0,bgt=()=>{let e=Cn()?.rateLimitPerUser??0;return(Zf.store.splitInSlowmode?e<Zf.store.slowmodeMax:e<=0)&&Zf.store.disableFileConversion},UIe=()=>z.getCurrentUser().premiumType===2?4e3:2e3,vgt=async(e,t,o)=>{let n=async i=>{await Na(e,{content:i},!0)};for(let i=0;i<t.length;i++)await n(t[i]),i<t.length-1&&await new Promise(s=>setTimeout(s,o))},Sgt=async(e,t)=>{if(t.content.trim().length<sh||!bgt())return;let o=ne.getChannel(e),n=o.rateLimitPerUser>0;if(((o.accessPermissions&Nt.MANAGE_MESSAGES)===Nt.MANAGE_MESSAGES||(o.accessPermissions&Nt.MANAGE_CHANNELS)===Nt.MANAGE_CHANNELS)&&(n=!1),!n||Zf.store.splitInSlowmode&&o.rateLimitPerUser<Zf.store.slowmodeMax){let i=[],{hardSplit:s}=Zf.store;for(;t.content.length>sh;){t.content=t.content.trim();let a=Math.max(t.content.lastIndexOf(" ",sh),t.content.lastIndexOf(`
`,sh));s||a===-1?(i.push(t.content.slice(0,sh)),t.content=t.content.slice(sh)):(i.push(t.content.slice(0,a)),t.content=t.content.slice(a))}Bs.dispatchToLastSubscribed("CLEAR_TEXT"),await vgt(e,[...i,t.content],Zf.store.sendDelay*1e3)}return{cancel:!0}},Zf=R({maxLength:{type:1,description:"Maximum length of a message before it is split. Set to 0 to automatically detect.",default:0,max:4e3,onChange(e){e===0&&(sh=UIe())}},disableFileConversion:{type:3,description:"If true, disables file conversion for large messages.",default:!0},sendDelay:{type:5,description:"Delay between each chunk in seconds.",default:1,markers:[1,2,3,5,10]},hardSplit:{type:3,description:"If true, splits on the last character instead of the last space/newline.",default:!1},splitInSlowmode:{type:3,description:"Should messages be split if the channel has slowmode enabled?"},slowmodeMax:{type:1,description:"Maximum slowmode time if splitting in slowmode.",default:5,min:1,max:30}}),R_=k({name:"SplitLargeMessages",description:"Splits large messages into multiple to fit Discord's message limit.",authors:[j.Reycko],settings:Zf,onBeforeMessageSend:Sgt,start(){Zf.store.maxLength===0&&(sh=UIe())},patches:[{find:'type:"MESSAGE_LENGTH_UPSELL"',replacement:{match:/if\(\i.length>\i/,replace:"if(false"}},{find:".onHideAutocomplete?",replacement:{match:/(?<=getData\(\i\.type\);)if\(\i.length>\i\)/,replace:"if(false)"}}]})});function zIe({className:e,enabled:t}){return r("svg",{className:e,width:"20",height:"20",viewBox:"0 0 50 50"},r("path",{fill:t?"currentColor":"var(--status-danger)",mask:t?void 0:"url(#spotifyActivityMask)",d:"M25.009,1.982C12.322,1.982,2,12.304,2,24.991S12.322,48,25.009,48s23.009-10.321,23.009-23.009S37.696,1.982,25.009,1.982z M34.748,35.333c-0.289,0.434-0.765,0.668-1.25,0.668c-0.286,0-0.575-0.081-0.831-0.252C30.194,34.1,26,33,22.5,33.001 c-3.714,0.002-6.498,0.914-6.526,0.923c-0.784,0.266-1.635-0.162-1.897-0.948s0.163-1.636,0.949-1.897 c0.132-0.044,3.279-1.075,7.474-1.077C26,30,30.868,30.944,34.332,33.253C35.022,33.713,35.208,34.644,34.748,35.333z M37.74,29.193 c-0.325,0.522-0.886,0.809-1.459,0.809c-0.31,0-0.624-0.083-0.906-0.26c-4.484-2.794-9.092-3.385-13.062-3.35 c-4.482,0.04-8.066,0.895-8.127,0.913c-0.907,0.258-1.861-0.272-2.12-1.183c-0.259-0.913,0.272-1.862,1.184-2.12 c0.277-0.079,3.854-0.959,8.751-1c4.465-0.037,10.029,0.61,15.191,3.826C37.995,27.328,38.242,28.388,37.74,29.193z M40.725,22.013 C40.352,22.647,39.684,23,38.998,23c-0.344,0-0.692-0.089-1.011-0.275c-5.226-3.068-11.58-3.719-15.99-3.725 c-0.021,0-0.042,0-0.063,0c-5.333,0-9.44,0.938-9.481,0.948c-1.078,0.247-2.151-0.419-2.401-1.495 c-0.25-1.075,0.417-2.149,1.492-2.4C11.729,16.01,16.117,15,21.934,15c0.023,0,0.046,0,0.069,0 c4.905,0.007,12.011,0.753,18.01,4.275C40.965,19.835,41.284,21.061,40.725,22.013z"}),!t&&r(f,null,r("path",{fill:"var(--status-danger)",d:"M48.54 4.54a2.2 2.2 0 0 0-3.08-3.08l-44 44a2.2 2.2 0 1 0 3.08 3.08Z"}),r("mask",{id:"spotifyActivityMask"},r("rect",{fill:"white",x:"0",y:"0",width:"50",height:"50"}),r("path",{fill:"black",d:"M50.376 8.248 41.752-.376-.376 41.752 8.248 50.376Z"}))))}function wgt({iconForeground:e,hideTooltips:t,nameplate:o}){let{location:n}=DV.use(["location"]),[,i]=L(0);return se(()=>(L_=()=>i(s=>s+1),()=>{L_=null}),[]),!HIe||!oE||n!=="PANEL"&&yt(Lu.name)?null:r(zm,{tooltipText:t?void 0:Xc?"Turn off Spotify activity":"Turn on Spotify activity",icon:r(zIe,{className:e,enabled:Xc}),role:"switch","aria-checked":Xc,redGlow:!Xc,plated:o!=null,onClick:async()=>{Xc=!Xc,L_?.(),await Ht.patch({url:jo.Endpoints.CONNECTION("spotify",oE),body:{show_activity:Xc}})}})}var oE,Xc,HIe,L_,DV,O_,GIe=x(()=>{"use strict";d();Wo();Q();Gh();Vb();H();$();B();oE=null,Xc=!1,HIe=!1,L_=null;DV=R({location:{type:4,description:"Where to show the Spotify toggle button.",options:[{label:"Next to Mute/Deafen",value:"PANEL",default:!0},{label:"Equicord Toolbox",value:"TOOLBOX"}],get hidden(){return!yt(Lu.name)}}}),O_=k({name:"SpotifyActivityToggle",description:"Adds a toggle button for Spotify activity visibility.",authors:[w.thororen],settings:DV,userAreaButton:{icon:e=>r(zIe,{...e,enabled:Xc}),render:wgt},toolboxActions(){let{location:e}=DV.use(["location"]);return!oE||e!=="TOOLBOX"?null:r(M.MenuItem,{id:"spotify-activity-toggle-toolbox",label:Xc?"Disable Spotify Activity":"Enable Spotify Activity",action:async()=>{Xc=!Xc,await Ht.patch({url:jo.Endpoints.CONNECTION("spotify",oE),body:{show_activity:Xc}})}})},flux:{async CONNECTION_OPEN(){let{body:e}=await Ht.get({url:jo.Endpoints.CONNECTIONS});if(!e)return;let t=e.find(o=>o.type==="spotify");t&&(oE=t.id,Xc=t.show_activity),HIe=!0,L_?.()}}})});async function NV(e){return(await zi.fetchAssetIds(F_,[e]))[0]}function Egt(e){V.dispatch({type:"LOCAL_ACTIVITY_UPDATE",activity:e,socketId:"StatsfmPresence"})}var Lbn,F_,kgt,qIe,jIe,MV,Tl,U_,WIe=x(()=>{"use strict";d();Q();Ra();ut();wt();H();At();$();hr();fe();B();Lbn=nr("status","showCurrentGame"),F_="1325126169179197500",kgt="2a96cbd8b46e442fc41c2b86b821562f",qIe=new ke("StatsfmPresence"),jIe=He("getLocalPresence");Tl=R({username:{description:"Stats.fm username",type:0},shareUsername:{description:"Show link to stats.fm profile",type:3,default:!1},shareSong:{description:"Show link to song on stats.fm",type:3,default:!0},hideWithSpotify:{description:"Hide stats.fm presence if spotify is running",type:3,default:!1},hideWithExternalRPC:{description:"Hides stats.fm presence if an external RPC is running",type:3,default:!1},statusName:{description:"Custom status text",type:0,default:"Stats.fm"},nameFormat:{description:"Show name of song and artist in status name",type:4,options:[{label:"Use custom status name",value:"status-name",default:!0},{label:"Use format 'artist - song'",value:"artist-first"},{label:"Use format 'song - artist'",value:"song-first"},{label:"Use artist name only",value:"artist"},{label:"Use song name only",value:"song"},{label:"Use albums name (falls back to custom status text if song has no albums)",value:"albums"}]},useListeningStatus:{description:'Show "Listening to" status instead of "Playing"',type:3,default:!0},missingArt:{description:"When albums or albums art is missing",type:4,options:[{label:"Use large Stats.fm logo",value:"StatsFmLogo",default:!0},{label:"Use generic placeholder",value:"placeholder"}]},showStatsFmLogo:{description:"Show the Stats.fm next to the albums cover",type:3,default:!0},alwaysHideArt:{description:"Disable downloading album art",type:3,default:!1}}),U_=k({name:"StatsfmPresence",description:"Statsfm presence to track your music",authors:[j.Crxa],settingsAboutComponent:()=>r(f,null,r(so,null,"How does this work?"),r(W,null,"Hey this is just here to explain how this works. By putting your stats.fm username in the settings, it will show what you're currently listening to on your discord profile. (this doesnt require an api but requires you to have your listening history public)")),settings:Tl,start(){this.updatePresence(),MV=setInterval(()=>{this.updatePresence()},16e3)},stop(){clearInterval(MV),MV=void 0},async fetchTrackData(){if(!Tl.store.username)return null;try{let e=await fetch(`https://api.stats.fm/api/v1/users/${Tl.store.username}/streams/current`);if(!e.ok)throw`${e.status} ${e.statusText}`;let t=await e.json();if(!t.item)return qIe.error("Error from Stats.fm API",t),null;let o=t.item.track;return o?{name:o.name||"Unknown",albums:o.albums.map(n=>n.name).join(", ")??"Unknown",artists:o.artists[0].name??"Unknown",url:`https://stats.fm/track/${o.id}`,imageUrl:o.albums[0].image}:null}catch(e){return qIe.error("Failed to query Stats.fm API",e),null}},async updatePresence(){Egt(await this.getActivity())},getLargeImage(e){if(!Tl.store.alwaysHideArt&&e.imageUrl&&!e.imageUrl.includes(kgt))return e.imageUrl;if(Tl.store.missingArt==="placeholder")return"placeholder"},async getActivity(){if(Tl.store.hideWithExternalRPC&&jIe.getActivities().some(s=>s.application_id!==F_)||Tl.store.hideWithSpotify&&jIe.getActivities().some(s=>s.type===2&&s.application_id!==F_))return null;let e=await this.fetchTrackData();if(!e)return null;let t=this.getLargeImage(e),o=t?{large_image:await NV(t),large_text:e.albums||void 0,...Tl.store.showStatsFmLogo&&{small_image:await NV("statsfm-large"),small_text:"Stats.fm"}}:{large_image:await NV("statsfm-large"),large_text:e.albums||void 0},n=[];Tl.store.shareUsername&&n.push({label:"Stats.fm Profile",url:`https://stats.fm/${Tl.store.username}`}),Tl.store.shareSong&&n.push({label:"View Song",url:e.url});let i=(()=>{switch(Tl.store.nameFormat){case"artist-first":return e.artists+" - "+e.name;case"song-first":return e.name+" - "+e.artists;case"artist":return e.artists;case"song":return e.name;case"albums":return e.albums||Tl.store.statusName;default:return Tl.store.statusName}})();return{application_id:F_,name:i,details:e.name,state:e.artists,assets:o,buttons:n.length?n.map(s=>s.label):void 0,metadata:{button_urls:n.map(s=>s.url)},type:Tl.store.useListeningStatus?2:0,flags:1}}})});var KIe=x(()=>{});var YIe,QIe=x(()=>{d();(window.VencordStyles??=new Map).set("src/equicordplugins/statusPresets/fixActionBar.css",{name:"src/equicordplugins/statusPresets/fixActionBar.css",source:`[class*="outerContainer"] [class*="container"] [class*="actionBar"] {
    gap: 0;
}`,classNames:{},dom:null});YIe="src/equicordplugins/statusPresets/fixActionBar.css"});function Cgt(e){if(e!=="TODAY")return Date.now()+e;let t=new Date;return new Date(t.getFullYear(),t.getMonth(),t.getDate()+1).getTime()}function Tgt(e){BV.updateSetting({text:e.text.trim(),expiresAtMs:e.clearAfter!=null?String(Cgt(e.clearAfter)):"0",emojiId:e.emojiInfo?.id??"0",emojiName:e.emojiInfo?.name??"",createdAtMs:String(Date.now())})}function Dgt({isHovering:e,status:t}){return r("div",null,e?r(eDe,{className:"vc-sp-icon"}):t.emojiInfo!=null?r(tDe,{emoji:t.emojiInfo,animate:!1,hideTooltip:!1}):r("div",null))}var $_,eDe,ZIe,tDe,BV,XIe,Agt,JIe,Igt,Mgt,VIe,H_,oDe=x(()=>{"use strict";d();KIe();Q();Ra();tt();H();Is();xt();at();qo();$();fe();B();QIe();$_=R({StatusPresets:{type:6,description:"Status Presets",component:()=>r(f,null),default:{}}}),eDe=De("0-2h-5V6Z"),ZIe=De("#{intl::MORE_OPTIONS}",".ChevronSmallRightIcon"),tDe=De(/\.translateSurrogatesToInlineEmoji\(\i\.name\);/),BV=nr("status","customStatus"),XIe=_n(()=>{let e=sp(".customStatusInputTitle,");return Bo(Number(e))}),Agt=Ds(['action:"PRESS_ADD_CUSTOM_STATUS"',/\i\.\i\i\)/]),JIe=()=>Om(async()=>{await Agt();let e=Object.keys(XIe)[0],t=XIe[e];return o=>r(t,{...o})});Igt=()=>r(en,{onClick:e=>{e.stopPropagation(),BV?.updateSetting(null)}},r(eDe,{className:"vc-sp-icon"}));Mgt=({status:e,update:t,disabled:o})=>{let[n,i]=L(!1),s=()=>{i(!0)},a=()=>{i(!1)};return r("div",{className:me("vc-sp-item",o?"vc-sp-disabled":null),onMouseOver:s,onMouseOut:a},r(en,{onClick:l=>{l.stopPropagation(),$_.store.StatusPresets[e.text]=void 0,t()}},r(Dgt,{isHovering:n,status:e})),r("div",{style:{marginLeft:"2px"}},e.text))},VIe=()=>{let e=Ma.getState().premiumTypeActual??0,t=Vo();return r(M.Menu,{navId:"sp-custom-status-submenu",onClose:()=>{}},Object.entries($_.store.StatusPresets).map(([o,n])=>n!=null?r(M.MenuItem,{key:"status-presets-"+o,id:"status-presets-"+o,label:n.status,action:()=>(n.emojiInfo?.id!=null&&e>0||n.emojiInfo?.id==null)&&Tgt(n),render:()=>r(Mgt,{status:n,update:t,disabled:n.emojiInfo?.id!=null&&e===0})}):null))},H_=k({name:"StatusPresets",description:"Allows you to remember your statuses and set them later",authors:[j.iamme],settings:$_,dependencies:["UserSettingsAPI"],managedStyle:YIe,patches:[{find:'"CustomStatusModalWithPreview"',replacement:{match:/(?<=(\i)\?\.state\?\?.*?)\{text:\i\.\i\.\i\(\i\.\i#{intl::SAVE}\)/,replace:"$self.renderRememberButton($1),$&"}},{find:"#{intl::STATUS_MENU_LABEL}",replacement:{match:/(:void 0\}\))\]/,replace:"$1,$self.render()]"}}],render(){let e=BV.getSetting();return r(ee,null,r("div",null),e==null?r(ZIe,{id:"sp-custom/presets-status",action:"PRESS_SET_STATUS",onClick:JIe,icon:()=>r("div",null),label:"Set Custom Status",renderSubmenu:VIe}):r(ZIe,{id:"sp-edit/presets-status",action:"PRESS_EDIT_CUSTOM_STATUS",onClick:JIe,hint:r(Igt,null),icon:()=>e.emoji!=null?r(tDe,{emoji:e.emoji,animate:!1,hideTooltip:!1}):null,label:"Edit Custom Status",renderSubmenu:VIe}))},renderRememberButton(e){return{text:"Keep",style:{marginLeft:"20px"},onClick:()=>{$_.store.StatusPresets[e.text]=e,D.show({message:"Successfully Saved Status",type:D.Type.SUCCESS,id:D.genId()})}}},startAt:"WebpackReady"})});var PV,z_,nDe=x(()=>{"use strict";d();Q();H();$();PV=R({onlineStatus:{type:4,description:"Steam status when on Online",options:[{label:"Online",value:"online",default:!0},{label:"Away",value:"away"},{label:"Invisible",value:"invisible"},{label:"Offline (Disconnect Steam Chat)",value:"offline"},{label:"Disabled",value:"none"}]},idleStatus:{type:4,description:"Steam status when on Idle",options:[{label:"Online",value:"online"},{label:"Away",value:"away",default:!0},{label:"Invisible",value:"invisible"},{label:"Offline (Disconnect Steam Chat)",value:"offline"},{label:"Disabled",value:"none"}]},dndStatus:{type:4,description:"Steam status when on Do Not Disturb",options:[{label:"Online",value:"online"},{label:"Away",value:"away"},{label:"Invisible",value:"invisible"},{label:"Offline (Disconnect Steam Chat)",value:"offline"},{label:"Disabled",value:"none",default:!0}]},invisibleStatus:{type:4,description:"Steam status when on Invisible",options:[{label:"Online",value:"online"},{label:"Away",value:"away"},{label:"Invisible",value:"invisible",default:!0},{label:"Offline (Disconnect Steam Chat)",value:"offline"},{label:"Disabled",value:"none"}]},goInvisibleIfActivityIsHidden:{type:3,description:"Always go invisible if hiding game activity on Discord"}}),z_=k({name:"SteamStatusSync",description:"Sync your status to Steam!",authors:[j.niko],settings:PV,flux:{USER_SETTINGS_PROTO_UPDATE(e){let t=e.settings.proto.status;if(t!==void 0){let o=PV.store[`${t.status.value}Status`];if(PV.store.goInvisibleIfActivityIsHidden&&!t.showCurrentGame.value){open("steam://friends/status/invisible");return}if(o==="none")return;open(`steam://friends/status/${o}`)}}}})});function Pgt(e){let{showGif:t,showMessage:o,showButton:n}=Xu.store,i=[];return t&&i.push(r("img",{key:"gif",src:"https://equicord.org/assets/plugins/stickerBlocker/blocked.gif",style:{width:"160px",borderRadius:"20px"}})),o&&i.push(r("div",{key:"message",id:"vc-blocked-sticker",className:me(Ngt.markup,Bgt.messageContent)},r("span",null,"Blocked Sticker. ID: ",e.id,", NAME: ",e.name))),n&&i.push(r(U,{key:"button",onClick:()=>iDe(e.id),color:U.Colors.RED},"Unblock ",o?"":e.name)),r(f,null,i)}function rDe(e){return r(M.MenuItem,{id:"add-sticker-block",key:"add-sticker-block",label:sDe(e)?"Unblock Sticker":"Block Sticker",action:()=>iDe(e)})}function iDe(e){if(Xu.store.blockedStickers===void 0||Xu.store.blockedStickers==null)return;sDe(e)?Xu.store.blockedStickers=Xu.store.blockedStickers.split(", ").filter(o=>o!==e).join(", "):Xu.store.blockedStickers=Xu.store.blockedStickers.split(", ").concat(e).join(", ")}function sDe(e){if(!(Xu.store.blockedStickers===void 0||Xu.store.blockedStickers==null))return Xu.store.blockedStickers.split(", ").includes(e)}var Ngt,Bgt,Xu,_gt,Rgt,G_,aDe=x(()=>{"use strict";d();Un();dr();Q();tt();H();xt();$();fe();B();Ngt=et("markup","codeContainer"),Bgt=et("messageContent","messageContentTrailingIcon"),Xu=R({showGif:{type:3,description:"Whether to show a snazzy cat gif",default:!0,restartNeeded:!0},showMessage:{type:3,description:"Whether to show a message detailing which id was blocked",default:!1,restartNeeded:!0},showButton:{type:3,description:"Whether to show a button to unblock the gif",default:!0,restartNeeded:!0},blockedStickers:{type:0,description:"The list of blocked sticker IDs (don't edit unless you know what you're doing)",default:""}});_gt=(e,t)=>{let{favoriteableId:o,favoriteableType:n}=t??{};if(!o)return;let i=(()=>{switch(n){case"sticker":return t.message.stickerItems.find(a=>a.id===o)?.format_type===3?void 0:rDe(o)}})();i&&Qt("copy-link",e)?.push(i)},Rgt=(e,t)=>{let{id:o,type:n}=t?.target?.dataset??{};o&&n==="sticker"&&!t.target.className?.includes("lottieCanvas")&&e.push(rDe(o))};G_=k({name:"StickerBlocker",description:"Allows you to block stickers from being displayed.",authors:[w.Samwich],patches:[{find:".STICKERS_CONSTANTS_STICKER_DIMENSION)",replacement:{match:/}\),\(\i\?\?(\i)\)\.name\]\}\);/,replace:"$& if($self.isBlocked($1.id)) return($self.blockedComponent($1));"}}],contextMenus:{message:_gt,"expression-picker":Rgt},start(){Oe.createStore("StickerBlocker","data")},isBlocked(e){return!!Xu.store.blockedStickers.split(", ").includes(e)},blockedComponent:ee.wrap(Pgt,{fallback:()=>r("p",{style:{color:"red"}},"Failed to render :(")}),settings:Xu})});var nE,Lgt,q_,lDe=x(()=>{"use strict";d();Q();H();$();B();nE={AV1:!0,H265:!0,H264:!0,VP8:!0,VP9:!0},Lgt=R({disableAv1Codec:{description:"Make Discord not consider using AV1 for streaming.",type:3,default:!1},disableH265Codec:{description:"Make Discord not consider using H265 for streaming.",type:3,default:!1},disableH264Codec:{description:"Make Discord not consider using H264 for streaming.",type:3,default:!1},disableVP8Codec:{description:"Make Discord not consider using VP8 for streaming.",type:3,default:!1},disableVP9Codec:{description:"Make Discord not consider using VP9 for streaming.",type:3,default:!1}}),q_=k({name:"StreamingCodecDisabler",description:"Disable codecs for streaming of your choice",authors:[j.davidkra230],settings:Lgt,patches:[{find:"setVideoBroadcast(this.shouldConnectionBroadcastVideo",replacement:{match:/setGoLiveSource\(.,.\)\{/,replace:"$&$self.updateDisabledCodecs();"}}],async updateDisabledCodecs(){let e=On.getMediaEngine(),t=Object.keys(nE);JSON.parse(await new Promise(n=>e.getCodecCapabilities(n))).forEach(n=>{t.includes(n.codec)&&(nE[n.codec]=n.encode)}),e.setAv1Enabled(nE.AV1&&!Ge.plugins.StreamingCodecDisabler.disableAv1Codec),e.setH265Enabled(nE.H265&&!Ge.plugins.StreamingCodecDisabler.disableH265Codec),e.setH264Enabled(nE.H264&&!Ge.plugins.StreamingCodecDisabler.disableH264Codec)}})});function Fgt(){return r("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 -960 960 960",width:"20"},r("path",{fill:"currentColor",d:"M482-160q-134 0-228-93t-94-227v-7l-36 36q-11 11-28 11t-28-11q-11-11-11-28t11-28l104-104q12-12 28-12t28 12l104 104q11 11 11 28t-11 28q-11 11-28 11t-28-11l-36-36v7q0 100 70.5 170T482-240q16 0 31.5-2t30.5-7q17-5 32 1t23 21q8 16 1.5 31.5T577-175q-23 8-47 11.5t-48 3.5Zm-4-560q-16 0-31.5 2t-30.5 7q-17 5-32.5-1T360-733q-8-15-1.5-30.5T381-784q24-8 48-12t49-4q134 0 228 93t94 227v7l36-36q11-11 28-11t28 11q11 11 11 28t-11 28L788-349q-12 12-28 12t-28-12L628-453q-11-11-11-28t11-28q11-11 28-11t28 11l36 36v-7q0-100-70.5-170T478-720Z"}))}var cDe,Ogt,j_,uDe=x(()=>{"use strict";d();ma();vu();H();$();B();cDe=!1,Ogt=({isMainChat:e})=>{let[t,o]=L(cDe);function n(i){cDe=i,o(i)}return se(()=>{let i=async(s,a)=>{t&&a.content&&(a.content=a.content.split("").reverse().join(""))};return qi(i),()=>void ji(i)},[t]),e?r(Lr,{tooltip:t?"Disable Reverse Message":"Enable Reverse Message",onClick:()=>n(!t)},r("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 -960 960 960",width:"20"},r("path",{fill:t?"var(--green-360)":"currentColor",d:"M482-160q-134 0-228-93t-94-227v-7l-36 36q-11 11-28 11t-28-11q-11-11-11-28t11-28l104-104q12-12 28-12t28 12l104 104q11 11 11 28t-11 28q-11 11-28 11t-28-11l-36-36v7q0 100 70.5 170T482-240q16 0 31.5-2t30.5-7q17-5 32 1t23 21q8 16 1.5 31.5T577-175q-23 8-47 11.5t-48 3.5Zm-4-560q-16 0-31.5 2t-30.5 7q-17 5-32.5-1T360-733q-8-15-1.5-30.5T381-784q24-8 48-12t49-4q134 0 228 93t94 227v7l36-36q11-11 28-11t28 11q11 11 11 28t-11 28L788-349q-12 12-28 12t-28-12L628-453q-11-11-11-28t11-28q11-11 28-11t28 11l36 36v-7q0-100-70.5-170T478-720Z"}))):null};j_=k({name:"TalkInReverse",authors:[j.Tolgchu],description:"Reverses the message content before sending it.",dependencies:["MessageEventsAPI"],chatBarButton:{icon:Fgt,render:Ogt}})});var dDe=x(()=>{});var pDe=x(()=>{"use strict";d()});var mDe,fDe=x(()=>{"use strict";d();vn();_V();GI();B();jy();mDe=({themeId:e,likedThemes:t})=>{let[o,n]=L(0),[i,s]=L(t),a=kt(!1);se(()=>{let p=l(e);n(p)},[i,e]);function l(p){let m=i?.likes.find(g=>g.themeId===p);return m?m.likes:0}let c=async p=>{if(!gDe())return;let g=i?.likes.find(v=>v.themeId===p)?.hasLiked??!1,y=g?"/likes/remove":"/likes/add",b=await zt("ThemeLibrary_uniqueToken");if(!a.current){n(o+(g?-1:1)),a.current=!0;try{if(!(await Xf(y,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b}`},body:JSON.stringify({themeId:p})})).ok)return Za.error("Couldnt update likes, response not ok");(async()=>{try{let A=await zt("ThemeLibrary_uniqueToken"),I=await(await Xf("/likes/get",{headers:{Authorization:`Bearer ${A}`}})).json();s(I)}catch(A){Za.error(A)}})()}catch(v){Za.error(v)}a.current=!1}},u=i?.likes.some(p=>p.themeId===e&&p?.hasLiked===!0)??!1;return r("div",null,r(U,{onClick:()=>c(e),size:U.Sizes.MEDIUM,color:U.Colors.PRIMARY,look:U.Looks.FILLED,disabled:e==="preview",style:{marginLeft:"8px"}},mbe(u||e==="preview")," ",e==="preview"?143:o))}});async function hDe(e,t){try{await RV.downloadTheme(e,t),Re(`Downloaded ${t.name}!`,D.Type.SUCCESS)}catch(o){Za.error(o),Re(`Failed to download ${t.name}! (check console)`,D.Type.FAILURE)}}var RV,Ugt,xDe,yDe=x(()=>{"use strict";d();_0();ut();B1();wt();GI();cs();mt();co();xt();at();fe();B();jy();RV=VencordNative.pluginHelpers.ThemeLibrary,Ugt=De("defaultRenderUser","showDefaultAvatarsForNullUsers");xDe=({author:e,theme:t,...o})=>{let{type:n,content:i,likes:s,guild:a,tags:l,last_updated:c,requiresThemeAttributes:u}=t,p=window.atob(i),m=p.match(/\/\*\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\//g)?.[0]||"",g=m.match(/@donate\s+(.+)/)?.[1]||"",y=m.match(/@version\s+(.+)/)?.[1]||"",b=m.match(/@invite\s+(.+)/)?.[1]||"",v=Array.isArray(e)?e:[e],E=Math.floor(new Date(c??0).getTime()/1e3);return r(Pe,{...o},r(je,null,r(Vn,null,n," Details")),r($e,null,r(re,{style:{marginTop:"10px"}},v.length>1?"Authors":"Author"),r("div",{style:{display:"flex",alignItems:"center",marginBottom:"10px"}},r("div",null,r("div",{style:{display:"flex",alignItems:"center"}},r(Ugt,{users:v,count:v.length,guildId:void 0,renderIcon:!1,max:4,size:32,showDefaultAvatarsForNullUsers:!0,showUserPopout:!0,className:Z.right8}),r(W,{style:{maxWidth:"200px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},v.map(A=>A.username).join(", "))),y&&r(f,null,r(re,{style:{marginTop:"10px"}},"Version"),r(W,null,y)),r(re,{style:{marginTop:"10px"}},"Likes"),r(W,null,s===0?`Nobody liked this ${n} yet.`:`${s} users liked this ${n}!`),g&&r(f,null,r(re,{style:{marginTop:"10px"}},"Donate"),r(W,null,"You can support the author by donating below!"),r(W,{style:{marginTop:"10px"}},r(U,{onClick:()=>VencordNative.native.openExternal(g)},r(gp,null),"Donate"))),(a||b)&&r(f,null,r(re,{style:{marginTop:"10px"}},"Support Server"),a&&r(W,null,a.name),r(W,null,r(U,{color:U.Colors.BRAND,look:U.Looks.FILLED,className:Z.top8,onClick:async A=>{A.preventDefault();let C=a?a.invite_link?.split("discord.gg/")[1]:b;C!=null&&Gi(C).catch(()=>Re("Invalid or expired invite!",D.Type.FAILURE))}},"Join Discord Server"))),r(re,{style:{marginTop:"10px"}},"Source"),r(W,null,r(U,{disabled:!t.content||t.id==="preview",onClick:()=>Ee(A=>r(Pe,{...A,size:"large"},r(je,null,r(Vn,null,"Theme Source")),r($e,null,r(W,{style:{padding:"8px"}},r(Hl,{lang:"css",content:p}))),r(ht,null,r(U,{color:U.Colors.RED,look:U.Looks.FILLED,onClick:()=>A.onClose()},"Close"),r(U,{className:Z.right8,onClick:()=>{Oo(p),Re("Copied to Clipboard",D.Type.SUCCESS)}},"Copy to Clipboard"))))},"View Theme Source")),l&&r(f,null,r(re,{style:{marginTop:"10px"}},"Tags"),r(W,null,l.map(A=>r("span",{className:"vce-theme-info-tag",key:"vce-theme-info-tag"},A)))),u&&r(W,{style:{marginTop:"10px"}},r(gbe,null)," This theme requires the ",r("b",null,"ThemeAttributes")," plugin!"),c&&r(W,{style:{marginTop:"10px"}},r(zI,null)," This theme was last updated ",Jt.parse("<t:"+E+":F>")," (",Jt.parse("<t:"+E+":R>"),")")))),r(ht,null,r(U,{color:U.Colors.RED,look:U.Looks.FILLED,onClick:()=>o.onClose()},"Close"),r(U,{color:U.Colors.GREEN,look:U.Looks.FILLED,className:me("vce-button",Z.right8),disabled:!t.content||t.id==="preview",onClick:async()=>{let A=await VencordNative.themes.getThemesDir(),C=await RV.themeExists(A,t),I=await RV.getThemesDir(A,t);C?Ee(N=>r(Pe,{...N,size:"small"},r(je,null,r(Vn,null,"Conflict!")),r($e,null,r(W,{style:{padding:"8px"}},r("div",{style:{display:"flex",flexDirection:"column"}},r("p",null,"A theme with the same name ",r("b",null,"already exist")," in your themes directory! Do you want to overwrite it?"),r("div",{className:"vce-overwrite-modal"},r("code",{style:{wordWrap:"break-word"}},I))))),r(ht,null,r(U,{look:U.Looks.FILLED,color:U.Colors.RED,onClick:async()=>{await hDe(A,t),N.onClose()}},"Overwrite"),r(U,{color:U.Colors.GREEN,look:U.Looks.FILLED,className:Z.right8,onClick:()=>N.onClose()},"Keep my file")))):await hDe(A,t)}},r("div",{style:{display:"flex",alignItems:"center"}},"Download ",r(fbe,{style:{marginLeft:"5px"}})))))}});function Hgt(e){let t=new $gt({username:e.username,id:e.id??Lh(),avatar:e.avatar,bot:!0});return V.dispatch({type:"USER_UPDATE",user:t}),t}var $gt,LV,bDe=x(()=>{"use strict";d();yi();Q();fs();ut();ao();wt();Is();co();at();B();fDe();yDe();jy();$gt=_n(()=>z.getCurrentUser().constructor);LV=({theme:e,themeLinks:t,likedThemes:o,setThemeLinks:n,removeButtons:i,removePreview:s})=>{let a=(p,m)=>as.getUser(p)??Hgt({username:m,id:p}),l=()=>{let p=t.includes(`${Jd}/${e.id}`)?t.filter(m=>m!==`${Jd}/${e.id}`):[...t,`${Jd}/${e.id}`];n(p),Ge.themeLinks=p},c=()=>{(e.requiresThemeAttributes??!1)&&!Ge.plugins.ThemeAttributes.enabled?Ee(m=>r(Pe,{...m,size:"small"},r(je,null,r(Vn,null,"Hold on!")),r($e,null,r(W,{style:{padding:"8px"}},r("p",null,"This theme requires the ",r("b",null,"ThemeAttributes")," plugin to work properly!"),r("p",null,"Do you want to enable it?"))),r(ht,null,r(U,{look:U.Looks.FILLED,color:U.Colors.GREEN,onClick:()=>{Ge.plugins.ThemeAttributes.enabled=!0,m.onClose(),l()}},"Enable Plugin"),r(U,{color:U.Colors.RED,look:U.Looks.FILLED,className:Z.right8,onClick:()=>m.onClose()},"Cancel")))):l()},u=()=>{let g=(window.atob(e.content).match(/\/\*\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\//g)?.[0]||"").match(/@source\s+(.+)/)?.[1]||"";g?VencordNative.native.openExternal(g):VencordNative.native.openExternal(`${Jd}/${e.id}`)};return r(cn,{style:{padding:".5rem",marginBottom:".5em",marginTop:".5em",display:"flex",flexDirection:"column",backgroundColor:"var(--background-base-lower-alt)"},key:e.id},r(Jo,{style:{overflowWrap:"break-word",marginTop:8},className:"vce-theme-text"},e.name),r(W,{className:"vce-theme-text"},Jt.parse(e.description)),!s&&r("img",{role:"presentation",src:e.thumbnail_url,loading:"lazy",alt:e.name,className:"vce-theme-info-preview"}),r("div",{className:"vce-theme-info"},r("div",{style:{justifyContent:"flex-start",flexDirection:"column"}},e.tags&&r(W,null,e.tags.map(p=>r("span",{className:"vce-theme-info-tag",key:p},p))),!i&&r("div",{style:{marginTop:"8px",display:"flex",flexDirection:"row"}},r(U,{onClick:c,size:U.Sizes.MEDIUM,color:t.includes(`${Jd}/${e.id}`)?U.Colors.RED:U.Colors.GREEN,look:U.Looks.FILLED,className:Z.right8,disabled:!e.content||e.id==="preview"},t.includes(`${Jd}/${e.id}`)?"Remove Theme":"Add Theme"),r(U,{onClick:async()=>{let p=Array.isArray(e.author)?await Promise.all(e.author.map(m=>a(m.discord_snowflake,m.discord_name))):[await a(e.author.discord_snowflake,e.author.discord_name)];Ee(m=>r(xDe,{...m,author:p,theme:e}))},size:U.Sizes.MEDIUM,color:U.Colors.BRAND,look:U.Looks.FILLED},"Theme Info"),r(mDe,{themeId:e.id,likedThemes:o}),r(U,{onClick:u,size:U.Sizes.MEDIUM,color:U.Colors.LINK,look:U.Looks.LINK,disabled:!e.content||e.id==="preview",style:{display:"flex",alignItems:"center",justifyContent:"center"}},"View Source ",r(_r,{height:16,width:16}))))))}});var OV={};Ao(OV,{apiUrl:()=>Jd,default:()=>Kgt,fetchAllThemes:()=>vDe,logger:()=>Za,themeRequest:()=>Xf});async function vDe(){let t=await(await Xf("/themes")).json(),o=Object.values(t);return o.forEach(n=>{n.source||(n.source=`${Jd}/${n.id}`)}),o.sort((n,i)=>new Date(i.release_date).getTime()-new Date(n.release_date).getTime())}async function Xf(e,t={}){return fetch(Jd+e,{...t,headers:{...t.headers}})}function qgt(){let[e,t]=L([]),[o,n]=L([]),[i,s]=L(Ge.themeLinks),[a,l]=L(),[c,u]=L({value:"",status:0}),[p,m]=L(Ge.plugins.ThemeLibrary.hideWarningCard),[g,y]=L(!0),b=C=>u(I=>({...I,value:C})),v=C=>u(I=>({...I,status:C})),E=C=>{let I=i.includes(`${Jd}/${C.name}`),N=new Set(C.tags.map(F=>F?.toLowerCase()));if(!I&&c.status===1)return!1;let _=Ggt[c.status];if(_&&!N.has(_?.toLowerCase())||I&&c.status===2||!I&&c.status===1)return!1;if(!c.value.length)return!0;let O=c.value?.toLowerCase();return C.name?.toLowerCase().includes(O)||C.description?.toLowerCase().includes(O)||(Array.isArray(C.author)?C.author.some(F=>F.discord_name?.toLowerCase()?.includes(O)):C.author.discord_name?.toLowerCase()?.includes(O))||N.has(O)},A=async()=>{try{let C=await zt("ThemeLibrary_uniqueToken");return await(await Xf("/likes/get",{headers:{Authorization:`Bearer ${C}`}})).json()}catch(C){Za.error(C)}};return se(()=>{(async()=>{try{let[I,N]=await Promise.all([vDe(),A()]);t(I),l(N),n(I)}catch(I){Za.error(I)}finally{y(!1)}})()},[]),se(()=>{s(Ge.themeLinks)},[]),se(()=>{if(c.status===7){let I=e.sort((N,_)=>_.likes-N.likes).filter(N=>N.name.includes(c.value));n(I)}else{let I=e.sort((N,_)=>new Date(_.release_date).getTime()-new Date(N.release_date).getTime()).filter(E);n(I)}},[c,e]),r("div",null,r(f,null,g?r("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"70vh",fontSize:"1.5em",color:"var(--text-default)"}},r("p",null," Getting the latest themes... "),r("p",{style:{fontSize:".75em",color:"var(--text-muted)"}}," This won't take long! ")):r(f,null,p?null:r(Mi,null,r(Vn,null,"Want your theme removed?"),r(W,{className:Z.top8},"If you want your theme(s) permanently removed, please open an issue on ",r("a",{href:"https://github.com/Faf4a/plugins/issues/new?labels=removal&projects=&template=request_removal.yml&title=Theme+Removal"},"GitHub ",r(_r,{height:16,width:16}))),r(U,{onClick:()=>{Ge.plugins.ThemeLibrary.hideWarningCard=!0,m(!0)},size:U.Sizes.SMALL,color:U.Colors.RED,look:U.Looks.FILLED,className:me(Z.top16,"vce-warning-button")},"Hide")),r("div",{className:me(Z.bottom8,Z.top16)},r(Jo,{style:{overflowWrap:"break-word",marginTop:8}},c.status===7?"Most Liked":"Newest Additions"),e.slice(0,2).map(C=>r(LV,{key:C.id,theme:C,themeLinks:i,likedThemes:a,setThemeLinks:s,removePreview:!0}))),r(Jo,{style:{overflowWrap:"break-word",marginTop:20}},"Themes"),r("div",{className:me(Z.bottom20,"vce-search-grid")},r(qe,{value:c.value,placeholder:"Search for a theme...",onChange:b}),r("div",{className:zgt.inputWrapper},r(Ii,{options:[{label:"Show All",value:0,default:!0},{label:"Show Themes",value:3},{label:"Show Snippets",value:4},{label:"Show Most Liked",value:7},{label:"Show Dark",value:5},{label:"Show Light",value:6},{label:"Show Enabled",value:1},{label:"Show Disabled",value:2}],value:c.status,clearable:!1,onChange:C=>v(C),closeOnSelect:!0}))),r("div",null,o.length?o.map(C=>r(LV,{key:C.id,theme:C,themeLinks:i,likedThemes:a,setThemeLinks:s})):r("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},r("p",{style:{fontSize:"1em",color:"var(--text-default)"}}," No theme found. "),r("p",{style:{fontSize:".75em",color:"var(--text-muted)"}}," Try narrowing your search down. "))))))}function jgt(){return r("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"70vh",fontSize:"1.5em",color:"var(--text-default)"}},r("p",null,"This tab was replaced in favour of the new website:"," ",r("a",{href:"https://themes.equicord.org",target:"_blank",rel:"noreferrer"},"themes.equicord.org")),r("p",{style:{fontSize:".75em",color:"var(--text-muted)"}},"Thank you for your understanding!"))}function Wgt(){let[e,t]=L(0);return r(bi,null,r(Rr,{type:"top",look:"brand",className:"vc-settings-tab-bar",selectedItem:e,onItemSelect:t},r(Rr.Item,{className:"vc-settings-tab-bar-item",id:0},"Themes"),r(Rr.Item,{className:"vc-settings-tab-bar-item",id:1},"Submit Theme")),e===0?r(qgt,null):r(jgt,null))}var zgt,Jd,Za,Ggt,Kgt,jy=x(()=>{"use strict";d();dDe();vn();Q();vc();ut();ao();wt();fa();pDe();At();co();xt();fe();B();bDe();zgt=et("inputWrapper","inputError","error"),Jd="https://themes.equicord.org/api",Za=new ke("ThemeLibrary","#e5c890");Ggt={3:"THEME",4:"SNIPPET",7:"LIKED",5:"DARK",6:"LIGHT"};Kgt=Bi(Wgt,"Theme Library")});async function FV(e=!0){let t=await wDe();if(t===!1){if(!e)return!1;Ee(o=>r(pd,{...o,scopes:["identify","connections"],responseType:"code",redirectUri:"https://themes.equicord.org/api/user/auth",permissions:0n,clientId:"1257819493422465235",cancelCompletesFlow:!1,callback:async({location:n})=>{if(!n)return Za.error("No redirect location returned");try{let i=await fetch(n,{headers:{Accept:"application/json"}}),{token:s}=await i.json();s?(Za.debug("Authorized via OAuth2, got token"),await Gt("ThemeLibrary_uniqueToken",s),qt({title:"ThemeLibrary",body:"Successfully authorized with ThemeLibrary!"})):(Za.debug("Tried to authorize via OAuth2, but no token returned"),qt({title:"ThemeLibrary",body:"Failed to authorize, check console"}))}catch(i){Za.error("Failed to authorize",i),qt({title:"ThemeLibrary",body:"Failed to authorize, check console"})}}}))}else return t}async function SDe(){let e=await zt("ThemeLibrary_uniqueToken");if(!e)return D.show({message:"No uniqueToken present, try authorizing first!",id:D.genId(),type:D.Type.FAILURE,options:{duration:2e3,position:D.Position.BOTTOM}});if((await Xf("/user/revoke",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({userId:z.getCurrentUser().id})})).ok)await Ta("ThemeLibrary_uniqueToken"),qt({title:"ThemeLibrary",body:"Successfully deauthorized from ThemeLibrary!"});else try{await Ta("ThemeLibrary_uniqueToken")}catch(o){Za.error("Failed to delete token",o),qt({title:"ThemeLibrary",body:"Failed to deauthorize, check console"})}}async function wDe(){let e=await zt("ThemeLibrary_uniqueToken");if(e){let t=await Xf("/user/findUserByToken",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}});return t.status===400||t.status===500?!1:(Za.debug("User is already authorized, skipping"),e)}else return!1}async function gDe(e=!0){let t=await wDe(),o=await zt("ThemeLibrary_uniqueToken");if(t===!1||!o)await FV(e);else return!0}var _V=x(()=>{"use strict";d();vn();_a();jy();at();B()});var kDe,EDe,ADe=x(()=>{"use strict";d();vn();Q();ut();ao();wt();cs();nt();$();B();_V();kDe=de("vce-"),EDe=R({hideWarningCard:{type:3,default:!1,description:"Hide the warning card displayed at the top of the theme library tab",restartNeeded:!1},buttons:{type:6,description:"ThemeLibrary Buttons",component:()=>{let e=async()=>{let t=await zt("ThemeLibrary_uniqueToken");if(!t)return D.show({message:"No token to copy, try authorizing first!",id:D.genId(),type:D.Type.FAILURE,options:{duration:2500,position:D.Position.BOTTOM}});Oo(t),D.show({message:"Copied to Clipboard!",id:D.genId(),type:D.Type.SUCCESS,options:{duration:2500,position:D.Position.BOTTOM}})};return r("section",null,r(so,{style:{marginTop:0,marginBottom:8}},"ThemeLibrary Auth"),r("div",{className:kDe("button-grid")},r(U,{onClick:()=>FV()},"Authorize with ThemeLibrary"),r(U,{onClick:e},"Copy ThemeLibrary Token"),r(U,{color:U.Colors.RED,onClick:()=>SDe()},"Deauthorize ThemeLibrary")),r(so,{style:{marginTop:8,marginBottom:8}},"Theme Removal"),r(W,{style:{marginTop:0,marginBottom:8}}," All Theme Authors are given credit in the theme info, no source has been modified, if you wish your theme to be removed anyway, open an Issue by clicking below."),r("div",{className:kDe("button-grid")},r(U,{onClick:()=>VencordNative.native.openExternal("https://github.com/Faf4a/plugins/issues/new?labels=removal&projects=&template=request_removal.yml&title=Theme+Removal")},"Request Theme Removal ",r(_r,{height:16,width:16}))))}}})});var W_,CDe=x(()=>{"use strict";d();ao();Xm();H();$();B();ADe();W_=k({name:"ThemeLibrary",description:"A library of themes for Vencord.",authors:[j.Fafa],settings:EDe,toolboxActions:{"Open Theme Library":()=>{xi("equicord_theme_library")}},start(){let{customEntries:e,customSections:t}=vi;e.push({key:"theme_library",title:"Theme Library",Component:(jy(),hh(OV)).default,Icon:oO}),t.push(()=>({section:"EquicordThemeLibrary",label:"Theme Library",searchableTitles:["Theme Library"],element:(jy(),hh(OV)).default,id:"EquicordThemeLibrary"})),hs.push(["EquicordThemeLibrary","equicord_theme_library"])},stop(){let{customEntries:e,customSections:t}=vi,o=e.findIndex(s=>s.key==="equicord_theme_library");o!==-1&&e.splice(o,1);let n=t.findIndex(s=>s({}).id==="EquicordThemeLibrary");n!==-1&&t.splice(n,1);let i=hs.findIndex(s=>s[1]==="equicord_theme_library");i!==-1&&hs.splice(i,1)}})});var K_,TDe=x(()=>{"use strict";d();H();$();K_=k({name:"TidalEmbeds",description:"Embeds TIDAL songs to make them playable in Discord.",authors:[j.vmohammad],dependencies:["MessageUpdaterAPI"],patches:[{find:"renderEmbeds(",replacement:{match:/(?<=renderEmbeds\(\i\){.+?embeds\.map\(\((\i),\i\)?=>{)/,replace:"$&if($self.isTidalEmbed($1))return null;"}}],isTidalEmbed(e){return["https://tidal.com/album","https://tidal.com/track","https://tidal.com/browse/album","https://tidal.com/browse/track"].some(t=>e?.url?.startsWith?.(t))},renderMessageAccessory({message:e}){let t=e.embeds?.find(u=>this.isTidalEmbed(u));if(!t)return null;let{url:o}=t,n=o.match(/\/(album|track)\/([0-9]+)/);if(!n||!n[2])return null;let i=n[1]==="album",s=n[2],a=i?700:400,l=i?300:100,c=`https://embed.tidal.com/${i?"albums":"tracks"}/${s}?disableAnalytics=true`;return r("div",{className:"tidal-embed"},r("iframe",{src:c,width:a,height:l,allow:"encrypted-media",sandbox:"allow-same-origin allow-scripts allow-forms allow-popups",title:"TIDAL Embed Player"}))}})});function Qgt(e){try{let o=JSON.parse(e);if(o&&typeof o.data=="string")return o.data}catch{}let t=e.trim();return t.length>0?t:null}async function Zgt(e){let t={text:e,voice:"en_us_001",base64:!0},o=Math.max(0,Math.min(100,DDe.store.volume??50)),n=await fetch(`${Ygt}/api/generate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){console.error("TiktokTTS: API request failed",n.status,n.statusText);return}let i=await n.text(),s=Qgt(i);if(!s){console.error("TiktokTTS: missing base64 audio in response");return}await new Promise(a=>{let l=!1,c=()=>{l||(l=!0,a())},u=_s(`data:audio/mpeg;base64,${s}`,{volume:o,onEnded:c,onError:()=>c()}),p=setTimeout(c,3e4);(async()=>{try{let m=await u.duration;if(typeof m=="number"&&Number.isFinite(m)&&m>0){clearTimeout(p);let g=Math.max(15e3,Math.min(12e4,Math.ceil((m+1)*1e3)));p=setTimeout(c,g)}}catch{}})()})}function Xgt(e,t){let o=[],n=0;for(;n<e.length;){let i=e.length;for(;i>n;){let s=e.slice(n,i);if(rE.encode(s).length<=t){o.push(s),n=i;break}i--}if(i===n)break}return o}function Jgt(e){let t=rE.encode(e).length;if(t===0)return[];t>IDe&&(console.warn("TiktokTTS: text exceeds 2000-byte limit; truncating to fit"),e=new TextDecoder().decode(rE.encode(e).slice(0,IDe)));let o=[],n=e.split(/\s+/).filter(Boolean),i="",s=l=>{l&&(o.length>=Y_||o.push(l))},a=()=>{let l=i.trim();if(!l){i="";return}s(l),i=""};for(let l of n){let c=i?`${i} ${l}`:l;if(rE.encode(c).length<=UV){i=c;continue}if(a(),rE.encode(l).length>UV){for(let u of Xgt(l,UV))if(s(u),o.length>=Y_)break;if(i="",o.length>=Y_)break;continue}if(i=l,o.length>=Y_)break}return a(),o}function eht(e){HV.push(e),tht()}async function tht(){if(!$V){for($V=!0;HV.length>0;){let e=HV.shift();if(!e)break;for(let t of Jgt(e))await Zgt(t),await new Promise(o=>setTimeout(o,120))}$V=!1}}var Ygt,UV,IDe,Y_,rE,DDe,HV,$V,Vgt,Q_,MDe=x(()=>{"use strict";d();Ol();Q();H();$();B();Ygt="https://tiktok-tts-aio.exampleuser.workers.dev",UV=300,IDe=2e3,Y_=10,rE=new TextEncoder,DDe=R({volume:{type:5,description:"Playback volume",default:50,markers:[0,25,50,75,100],stickToMarkers:!1}});HV=[],$V=!1,Vgt=(e,{message:t})=>{!t?.content||t.content.length===0||e.some(o=>o?.props?.id==="tiktok-tts-play")||e.push(X.createElement(M.MenuItem,{id:"tiktok-tts-play",label:"Play TikTok TTS",action:()=>eht(t.content)}))};Q_=k({name:"TiktokTTS",description:"Adds a context menu option to read out chat messages with the good ol' Tiktok TTS voice :sob:",authors:[j.VillainsRule,j.examplegit],dependencies:["AudioPlayerAPI"],settings:DDe,contextMenus:{message:Vgt}})});var NDe=x(()=>{});function iE(){return Ks.store.databaseUrl||"https://timezone.creations.works"}function nht(){return`${iE()}/auth/discord/callback`}function xS(e,t){console.error(t,e);let o=e?.message||t;Re(o,D.Type.FAILURE)}async function GV(e){try{return await e.json()}catch(t){return console.warn("Failed to parse JSON response:",t),{message:"Invalid response format"}}}async function Z_(e,t){zV[e]={value:t}}function _De(e){return zV[e]?.value??null}async function qV(){try{let e=await fetch(`${iE()}/list`,{headers:{Accept:"application/json"}});if(e.ok){let t=await e.json();for(let o in t)zV[o]={value:t[o]?.timezone??null};return!0}return!1}catch(e){return console.error("Failed to fetch timezones list:",e),!1}}async function RDe(){try{return(await fetch(`${iE()}/me`,{credentials:"include",headers:{Accept:"application/json"}})).ok}catch(e){return console.error("Failed to check authentication:",e),!1}}async function LDe(e){return await RDe()?BDe(e):new Promise(o=>{FDe(()=>{BDe(e).then(o)})})}async function BDe(e){let t=new URLSearchParams;t.append("timezone",e);try{let o=await fetch(`${iE()}/set`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},credentials:"include",body:t});if(!o.ok){let n=await GV(o);return xS(n,"Failed to set timezone"),!1}return Re("Timezone updated successfully!",D.Type.SUCCESS),!0}catch(o){return xS(o,"Failed to set timezone"),!1}}async function ODe(){return await RDe()?PDe():new Promise(t=>{FDe(()=>{PDe().then(t)})})}async function PDe(){try{let e=await fetch(`${iE()}/delete`,{method:"DELETE",headers:{Accept:"application/json"},credentials:"include"});if(!e.ok){let t=await GV(e);return xS(t,"Failed to delete timezone"),!1}return Re("Timezone deleted successfully!",D.Type.SUCCESS),!0}catch(e){return xS(e,"Failed to delete timezone"),!1}}function FDe(e){Ee(t=>r(pd,{...t,clientId:oht,redirectUri:nht(),responseType:"code",scopes:["identify"],permissions:0n,cancelCompletesFlow:!1,callback:async o=>{if(!(!o||!o.location))try{let n=new URL(o.location),i=await fetch(n,{credentials:"include",headers:{Accept:"application/json"}}),s=await GV(i);if(!i.ok){xS(s,"Authorization failed");return}Re("Authorization successful!",D.Type.SUCCESS),e?.()}catch(n){xS(n,"Unexpected error during authorization")}}}))}var zV,oht,jV=x(()=>{"use strict";d();dv();B();X_();zV={},oht="1377021506810417173"});async function UDe(e,t){sE[e]=t,await Gt(KV,sE)}function aE({userId:e,modalProps:t,database:o}){let[n,i]=L(null);se(()=>{let a=YV(e);i(a??QV())},[e,Ks.store.useDatabase,Ks.store.preferDatabaseOverLocal]);let s=rt(()=>Intl.supportedValuesOf("timeZone").map(a=>{let l=new Intl.DateTimeFormat(void 0,{timeZone:a,timeZoneName:"short"}).formatToParts(new Date).find(c=>c.type==="timeZoneName").value;return{label:`${a} (${l})`,value:a}}),[]);return r(Pe,{...t},r(je,{className:WV("modal-header")},r(Jo,null,"Timezones"),r(Ut,{onClick:t.onClose})),r($e,{className:WV("modal-content")},r("section",{className:Z.bottom16},r(so,null,"Select Timezone"),r(Ii,{options:s,value:s.find(a=>a.value===n),placeholder:"Select a Timezone",maxVisibleItems:5,closeOnSelect:!0,onChange:a=>i(a)}))),r(ht,{className:WV("modal-footer")},!o&&r(U,{color:U.Colors.RED,onClick:async()=>{await UDe(e,null),t.onClose()}},"Delete Timezone"),r(U,{color:U.Colors.BRAND,disabled:n===null,onClick:async()=>{o?await LDe(n)&&await Z_(e,n):await UDe(e,n),t.onClose()}},"Save")))}var WV,$De=x(()=>{"use strict";d();vn();ut();nt();co();at();B();X_();jV();WV=de("vc-timezone-")});function YV(e){let t=sE[e];return Ks.store.useDatabase&&(Ks.store.preferDatabaseOverLocal||!t)?_De(e)??t:t}function QV(){return Intl.DateTimeFormat().resolvedOptions().timeZone}function ZV(e,t,o={}){let n=new Date(t);return new Intl.DateTimeFormat(zDe.getLocale()??"en-US",{hour12:!Ks.store["24h Time"],timeZone:e,...o}).format(n)}function iht(e,t){let o=new Date(t),s=new Intl.DateTimeFormat(zDe.getLocale()??"en-US",{timeZone:e,timeZoneName:"short"}).formatToParts(o).find(a=>a.type==="timeZoneName");return s?s.value:""}var sE,KV,rht,zDe,Ks,HDe,sht,J_,X_=x(()=>{"use strict";d();NDe();vn();Q();tt();H();at();$();fe();B();jV();$De();sE={},KV="vencord-timezones";rht=et("timestamp","compact","contentOnly"),zDe=He("getLocale"),Ks=R({"Show Own Timezone":{type:3,description:"Show your own timezone in profiles and message headers",default:!0},"24h Time":{type:3,description:"Show time in 24h format",default:!1},showTimezoneInfo:{type:3,description:"Show timezone info next to time",default:!0},showMessageHeaderTime:{type:3,description:"Show time in message headers",default:!0},showProfileTime:{type:3,description:"Show time in profiles",default:!0},useDatabase:{type:3,description:"Enable database for getting user timezones",default:!0},preferDatabaseOverLocal:{type:3,description:"Prefer database over local storage for timezones",default:!0},databaseUrl:{type:0,description:"Database URL for timezone storage",default:"https://timezone.creations.works"},setDatabaseTimezone:{description:"Set your timezone on the database",type:6,component:()=>r(U,{onClick:()=>{Ee(e=>r(aE,{userId:z.getCurrentUser().id,modalProps:e,database:!0}))}},"Set Timezone on Database")},resetDatabaseTimezone:{description:"Reset your timezone on the database",type:6,component:()=>r(U,{color:U.Colors.RED,onClick:async()=>{try{await Z_(z.getCurrentUser().id,null),await ODe()}catch(e){console.error("Error resetting database timezone:",e),Re("Failed to reset database timezone",D.Type.FAILURE)}}},"Reset Database Timezone")},askedTimezone:{type:3,description:"Whether the user has been asked to set their timezone",hidden:!0,default:!1}});HDe=ee.wrap(({userId:e,timestamp:t,type:o})=>{let[n,i]=L(t||Date.now()),[s,a]=L(null);if(se(()=>{a(YV(e))},[e,Ks.store.useDatabase,Ks.store.preferDatabaseOverLocal]),se(()=>{if(o!=="profile")return;i(Date.now());let g=new Date,y=(60-g.getSeconds())*1e3+1e3-g.getMilliseconds(),b=setTimeout(()=>{i(Date.now())},y),v=setInterval(()=>{i(Date.now())},6e4);return()=>{clearTimeout(b),clearInterval(v)}},[o]),!s)return null;let l=ZV(s,n,{hour:"numeric",minute:"numeric"}),c=l,u=!1;if(Ks.store.showTimezoneInfo){let g=QV();if(s===g)c="local",u=!0;else{let y=iht(s,n);c=`${l} ${y||s}`}}let p=ZV(s,n,{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}),m=u?`${p} (Your local timezone)`:p;return r(Ue,{position:"top",delay:750,allowOverflow:!1,spacing:8,hideOnClick:!0,tooltipClassName:"timezone-tooltip",text:m},g=>r("span",{...g,className:`${o==="message"?`timezone-message-item ${rht.timestamp}`:"timezone-profile-item"}${u?" timezone-local-text":""}`},o==="message"?`(${c})`:c))},{noop:!0}),sht=(e,{user:t})=>{if(t?.id==null)return;let o=r(M.MenuItem,{label:"Set Local Timezone",id:"set-timezone",action:()=>Ee(n=>r(aE,{userId:t.id,modalProps:n}))});e.push(r(M.MenuSeparator,null),o)},J_=k({name:"Timezones",authors:[w.Aria,j.creations],description:"Shows the local time of users in profiles and message headers",contextMenus:{"user-context":sht},patches:[{find:'backgroundColor:"COMPLETE"',replacement:{match:/(?<=backgroundImage.+?children:)!\i.{0,100}className:\i\.\i\}\)/,replace:"[$self.renderProfileTimezone(arguments[0]),$&]"}},{find:'"Message Username"',replacement:{match:/(?<=isVisibleOnlyOnHover.+?)id:.{1,11},timestamp.{1,50}}\),/,replace:"$&,$self.renderMessageTimezone(arguments[0]),"}}],toolboxActions:{"Set Database Timezone":()=>{Ee(e=>r(aE,{userId:z.getCurrentUser().id,modalProps:e,database:!0}))},"Refresh Database Timezones":async()=>{try{await qV()?Re("Timezones refreshed successfully!",D.Type.SUCCESS):Re("Timezones Failed to refresh!",D.Type.FAILURE)}catch(e){console.error("Failed to refresh timezone:",e),Re("Failed to refresh timezones.",D.Type.FAILURE)}}},async start(){sE=await zt(KV)||{},Ks.store.useDatabase&&(await qV(),Ks.store.askedTimezone||(Re("",D.Type.MESSAGE,{duration:1e4,component:r(U,{color:U.Colors.GREEN,onClick:()=>{Ee(e=>r(aE,{userId:z.getCurrentUser().id,modalProps:e,database:!0}))}},"Want to save your timezone to the database? Click here to set it."),position:D.Position.BOTTOM}),Ks.store.askedTimezone=!0))},settings:Ks,getTime:ZV,renderProfileTimezone:e=>!Ks.store.showProfileTime||!e?.user?.id||e.user.id===z.getCurrentUser().id&&!Ks.store["Show Own Timezone"]?null:r(HDe,{userId:e.user.id,type:"profile"}),renderMessageTimezone:e=>!Ks.store.showMessageHeaderTime||!e?.message||e.message.author.id===z.getCurrentUser().id&&!Ks.store["Show Own Timezone"]?null:r(HDe,{userId:e.message.author.id,timestamp:e.message.timestamp.toISOString(),type:"message"})})});function jDe(e){qDe.base=e||null,aht({messages:0})()}var aht,qDe,GDe,V_,WDe=x(()=>{"use strict";d();Q();H();$();fe();aht=vt("=>({flashQueue:[..."),qDe={base:null},GDe=R({title:{type:0,default:"Equicord",description:"Window title prefix",onChange:jDe}});V_=k({name:"Title",description:"Replaces the window title prefix",authors:[w.Kyuuhachi],settings:GDe,patches:[{find:'isPlatformEmbedded?void 0:"Discord"',replacement:{match:/\{base:\i\("?\d+?"?\)\.isPlatformEmbedded\?void 0:"Discord"\}/,replace:"$self.rootTitle"}}],start(){jDe(GDe.store.title)},rootTitle:qDe})});var KDe=x(()=>{});var YDe,QDe=x(()=>{"use strict";d();KDe();tt();eR();xt();B();YDe=ee.wrap(function({title:t,body:o,richBody:n,icon:i,image:s,permanent:a,dismissOnClick:l,index:c,onClick:u,onClose:p,attachments:m}){let[g,y]=L(!1),[b,v]=L(0),E=!0,A=!1;m>0&&(A=!0),o===""&&(E=!1);let C={position:`toastnotifications-position-${jr.store.position||"bottom-left"}`,timeout:jr.store.timeout*1e3||5e3,opacity:jr.store.opacity/100},I=rt(()=>Date.now(),[g]),N=rt(()=>{if(c===void 0)return{};let O=C.position.includes("top"),G=10+c%jr.store.maxNotifications*115;return O?{top:`${G}px`}:{bottom:`${G}px`}},[c,C.position]);se(()=>{if(g||a)return void v(0);let O=setInterval(()=>{let F=Date.now()-I;F>=C.timeout?p():v(F)},10);return()=>clearInterval(O)},[g]);let _=b/C.timeout;return r("button",{style:N,className:me("toastnotifications-notification-root",C.position),onClick:()=>{u?.(),l!==!1&&p()},onContextMenu:O=>{O.preventDefault(),O.stopPropagation(),p()},onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1)},r("div",{className:"toastnotifications-notification"},i&&r("img",{className:"toastnotifications-notification-icon",src:i,alt:"User Avatar"}),r("div",{className:"toastnotifications-notification-content"},r("div",{className:"toastnotifications-notification-header"},r("h2",{className:"toastnotifications-notification-title"},t),r("button",{className:"toastnotifications-notification-close-btn",onClick:O=>{O.preventDefault(),O.stopPropagation(),p()}},r("svg",{width:"24",height:"24",viewBox:"0 0 24 24",role:"img","aria-labelledby":"toastnotifications-notification-dismiss-title"},r("title",{id:"toastnotifications-notification-dismiss-title"},"Dismiss Notification"),r("path",{fill:"currentColor",d:"M18.4 4L12 10.4L5.6 4L4 5.6L10.4 12L4 18.4L5.6 20L12 13.6L18.4 20L20 18.4L13.6 12L20 5.6L18.4 4Z"})))),r("div",null,E?n??r("p",{className:"toastnotifications-notification-p"},o.length>500?o.slice(0,500)+"...":o):null,jr.store.renderImages&&s&&r("img",{className:"toastnotifications-notification-img",src:s,alt:"ToastNotification Image"}),A&&r("p",{className:"toastnotifications-notification-footer"},`${m} attachment${m>1?"s":""} ${m>1?"were":"was"} sent.`)))),C.timeout!==0&&!a&&r("div",{className:"toastnotifications-notification-progressbar",style:{width:`${(1-_)*100}%`,backgroundColor:"var(--toastnotifications-progressbar-color)"}}))},{onError:({props:e})=>e.onClose()})});function cht(){if(!XV){let e=document.createElement("div");e.id="toastnotifications-container",document.body.append(e),XV=Ms(e)}return XV}async function yS(e){let t=cht(),o=lht++;return new Promise(n=>{let i=r(YDe,{key:o.toString(),index:pm.length,...e,onClose:()=>{pm=pm.filter(s=>s.key!==o.toString()),e.onClose?.(),console.log(`[DEBUG] [ToastNotifications] Removed #${o} from queue.`),t.render(r(f,null,pm.map((s,a)=>{let l=pm.length-1-a;return X.cloneElement(s,{index:l})}))),n()}});pm.push(i),console.log(`[DEBUG] [ToastNotifications] Added #${o} to queue.`),pm.length>jr.store.maxNotifications&&pm.shift(),t.render(r(f,null,pm.map((s,a)=>{let l=pm.length-1-a;return X.cloneElement(s,{index:l})})))})}var pm,lht,XV,ZDe=x(()=>{"use strict";d();eR();B();QDe();pm=[],lht=0});var XDe=x(()=>{"use strict";d()});function oR(e){if(e!==""){let t=[];return e.replace(/\s/g,"").split(",").forEach(i=>{t.push(i)}),t}return[]}function e7e(e,t){return t&&e?.length>30?e.substring(0,27)+"...":e?.length>165?e.substring(0,162)+"...":e}function Wy(e){return Tt.getNickname(e.id)??dht.getName(e)}function JV(e,t){ne.hasChannel(t)&&ho.transitionTo(`/channels/${e??"@me"}/${t}/`)}function pht(e){let o=cd("UserGuildSettingsStore").getAllSettings().userGuildSettings[e.guild_id];if(!jr.store.determineServerNotifications||JDe.isGuildOrCategoryOrChannelMuted(e.guild_id,e.id))return 2;if(o){let n=o.channel_overrides?.[e.id],i=o.message_notifications;if(n&&typeof n=="object"&&"message_notifications"in n)return n.message_notifications;if(typeof i=="number")return i}return 2}async function mht(e){let t=ne.getChannel(e.channel_id),o=pht(t),n=!1,i=VV.includes(e.channel_id),s=jr.store.friendServerNotifications&&Tt.isFriend(e.author.id);if(!i&&!s){n=!0;let g=e.content.includes(`<@${z.getCurrentUser().id}>`);if(o===2||o!==0&&!g)return}let a=ne.getChannel(e.channel_id),l=e.content.length>0?e.content:!1,c=[],u={title:`${Wy(e.author)} (#${a.name})`,icon:`https://cdn.discordapp.com/avatars/${e.author.id}/${e.author.avatar}.png?size=128`,body:e.content,attachments:e.attachments?.length,richBody:null,permanent:!1,onClick(){JV(a.guild_id,a.id)}};if(e.embeds?.length!==0&&(u.body=l||"Sent an embed."),e?.stickerItems&&(u.body=l||"Sent a sticker."),e.attachments?.length!==0){let g=e.attachments.filter(y=>typeof y?.content_type=="string"&&y?.content_type.startsWith("image"));g?.length!==0?(u.body=l||"",u.image=g[0].url):u.body+=` [Attachment: ${e.attachments[0].filename}]`}let p=u.body.match(new RegExp("(<a?:\\w+:\\d+>)","g"));if(p)for(let g of p)u.body=u.body.replace(new RegExp(`${g}`,"g"),`:${g.split(":")[1]}:`);if(e.mentions?.length!==0||e.mentionRoles?.length>0){let g=0;u.body.replace(VDe,(y,b,v,E,A)=>(c.push(u.body.slice(g,A)),b?c.push(bS(b,"user")):v?c.push(bS(v,"channel")):E&&c.push(bS(E,"role",a.guild_id)),g=A+y?.length,y))}if(c?.length>0){let g=()=>r(f,null,c);u.richBody=r(g,null)}u.body=e7e(u.body,u.attachments>0),cd("ApplicationStreamingStore").getAnyStreamForUser(z.getCurrentUser()?.id)&&jr.store.streamingTreatment===1&&(u.body="Message content has been redacted."),jr.store.renderImages||(u.icon=void 0),console.log("noti that went through: "+n),await yS(u)}async function fht(e,t){if(e=z.getUser(e.id),!jr.store.friendActivity)return;let o={title:"",icon:e.getAvatarURL(),body:"",attachments:0};jr.store.renderImages||(o.icon=void 0),t===1?(o.title=`${e.username} is now your friend`,o.body="You can now message them directly.",o.onClick=()=>JV(null,e.id),await yS(o)):t===3&&(o.title=`${e.username} sent you a friend request`,o.body="You can accept or decline it in the Friends tab.",o.onClick=()=>JV(null,""),await yS(o))}function ght(){let e={title:"Example Notification",icon:`https://cdn.discordapp.com/avatars/${z.getCurrentUser().id}/${z.getCurrentUser().avatar}.png?size=128`,body:"This is an example toast notification!",attachments:0,permanent:!1};return jr.store.renderImages||(e.icon=void 0),yS(e)}var tR,VV,JDe,uht,dht,VDe,jr,bS,nR,eR=x(()=>{"use strict";d();Q();H();$();hr();fe();B();ZDe();XDe();tR=[],VV=[],JDe=He("isSuppressEveryoneEnabled"),uht=He("selectPrivateChannel"),dht=He("getGlobalName"),VDe=/<@!?(\d{17,20})>|<#(\d{17,20})>|<@&(\d{17,20})>/g,jr=R({position:{type:4,description:"The position of the toast notification",options:[{label:"Bottom Left",value:"bottom-left",default:!0},{label:"Top Left",value:"top-left"},{label:"Top Right",value:"top-right"},{label:"Bottom Right",value:"bottom-right"}]},timeout:{type:5,description:"Time in seconds notifications will be shown for",default:5,markers:uo(1,15,1)},opacity:{type:5,description:"Opacity of the notification",default:100,markers:uo(10,100,10)},maxNotifications:{type:5,description:"Maximum number of notifications displayed at once",default:3,markers:uo(1,5,1)},determineServerNotifications:{type:3,description:"Automatically determine what server notifications to show based on your channel/guild settings",default:!0},disableInStreamerMode:{type:3,description:"Disable notifications while in streamer mode",default:!0},renderImages:{type:3,description:"Render images in notifications",default:!0},directMessages:{type:3,description:"Show notifications for direct messages",default:!0},groupMessages:{type:3,description:"Show notifications for group messages",default:!0},friendServerNotifications:{type:3,description:"Show notifications when friends send messages in servers they share with you",default:!0},friendActivity:{type:3,description:"Show notifications for adding someone or receiving a friend request",default:!0},streamingTreatment:{type:4,description:"How to treat notifications while sharing your screen",options:[{label:"Normal - Show the notification as normal",value:0,default:!0},{label:"No Content - Hide the notification body",value:1},{label:"Ignore - Don't show the notification at all",value:2}]},notifyFor:{type:0,description:"Create a list of channel ids to receive notifications from (separate with commas)",onChange:()=>{VV=oR(jr.store.notifyFor)},default:""},ignoreUsers:{type:0,description:"Create a list of user ids to ignore all their notifications from (separate with commas)",onChange:()=>{tR=oR(jr.store.ignoreUsers)},default:""},exampleButton:{type:6,description:"Show an example toast notification.",component:()=>r(U,{onClick:ght},"Show Example Notification")}});bS=(e,t,o)=>{let n;return t==="user"?n=`@${z.getUser(e)?.username||"unknown-user"}`:t==="channel"?n=`#${ne.getChannel(e)?.name||"unknown-channel"}`:t==="role"&&o&&(n=`@${tr.getRole(o,e)?.name||"unknown-role"}`),r("span",{key:`${t}-${e}`,className:"toastnotifications-mention-class"},n)},nR=k({name:"ToastNotifications",description:"Show a toast notification whenever you receive a direct message.",authors:[j.Skully,j.Ethan,j.Buzzy],settings:jr,flux:{async MESSAGE_CREATE({message:e}){let t=ne.getChannel(e.channel_id),o=z.getCurrentUser(),n=cd("ApplicationStreamingStore").getAnyStreamForUser(z.getCurrentUser()?.id),i=jr.store.disableInStreamerMode,s=sl.enabled;if(i&&s||n&&jr.store.streamingTreatment===2||e.author.id===o.id||t.id===st.getChannelId()||tR.includes(e.author.id))return;if(t.guild_id){mht(e);return}if(!jr.store.directMessages&&t.isDM()||!jr.store.groupMessages&&t.isGroupDM()||JDe.isChannelMuted(null,t.id))return;let a={title:Wy(e.author),icon:`https://cdn.discordapp.com/avatars/${e.author.id}/${e.author.avatar}.png?size=128`,body:e.content,attachments:e.attachments?.length,richBody:null,permanent:!1,onClick(){uht.selectPrivateChannel(e.channel_id)}},l=e.content?.length>0?e.content:!1,c=[];if(t.isGroupDM()){let p=t.name?.trim()??!1;p||(p=t.rawRecipients.slice(0,3).map(g=>g.username).join(", "));let m=p?.length>20?p.substring(0,20)+"...":p;a.title=`${e.author.username} (${m})`}else t.guild_id&&(a.title=`${Wy(e.author)} (#${t.name})`);switch(e.type){case 3:{a.body="Started a call with you!";break}case 1:{let p=z.getUser(e.author.id),m=e.mentions[0],g=z.getUser(m.id);a.body=`${Wy(g)} was added to the group by ${Wy(p)}.`;break}case 2:{let p=z.getUser(e.author.id),m=e.mentions[0],g=z.getUser(m.id);p.id!==g.id?a.body=`${Wy(g)} was removed from the group by ${Wy(p)}.`:a.body="Left the group.";break}case 4:{a.body=`Changed the channel name to '${e.content}'.`;break}case 5:{a.body="Changed the channel icon.";break}case 6:{a.body="Pinned a message.";break}}if(e.embeds?.length!==0&&(a.body=l||"Sent an embed."),e?.stickerItems&&(a.body=l||"Sent a sticker."),e.attachments?.length!==0){let p=e.attachments.filter(m=>typeof m?.content_type=="string"&&m?.content_type.startsWith("image"));p?.length!==0?(a.body=l||"",a.image=p[0].url):a.body+=` [Attachment: ${e.attachments[0].filename}]`}let u=a.body.match(new RegExp("(<a?:\\w+:\\d+>)","g"));if(u)for(let p of u)a.body=a.body.replace(new RegExp(`${p}`,"g"),`:${p.split(":")[1]}:`);if(e.mentions?.length!==0||e.mentionRoles?.length>0){let p=0;a.body.replace(VDe,(m,g,y,b,v)=>(c.push(a.body.slice(p,v)),g?c.push(bS(g,"user")):y?c.push(bS(y,"channel")):b&&c.push(bS(b,"role",t.guild_id)),p=v+m?.length,m))}if(c?.length>0){let p=()=>r(f,null,c);a.richBody=r(p,null)}a.body=e7e(a.body,a.attachments>0),n&&jr.store.streamingTreatment===1&&(a.body="Message content has been redacted."),jr.store.renderImages||(a.icon=void 0),yS(a)},async RELATIONSHIP_ADD({relationship:e}){tR.includes(e.user.id)||fht(e.user,e.type)}},start(){tR=oR(jr.store.ignoreUsers),VV=oR(jr.store.notifyFor)}})});function t7e({code:e,ctrlKey:t,shiftKey:o,altKey:n}){let{keyBind:i,reqCtrl:s,reqShift:a,reqAlt:l}=o7e.store;i!==e||t!==s||o!==a||n!==l||V.dispatch({type:"MEDIA_ENGINE_SET_VIDEO_ENABLED",enabled:!xht()})}var hht,o7e,xht,rR,n7e=x(()=>{"use strict";d();Q();H();$();fe();B();hht=["Backspace","Tab","Enter","ShiftLeft","ShiftRight","ControlLeft","ControlRight","AltLeft","AltRight","Pause","CapsLock","Escape","Space","PageUp","PageDown","End","Home","ArrowLeft","ArrowUp","ArrowRight","ArrowDown","PrintScreen","Insert","Delete","Digit0","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","KeyA","KeyB","KeyC","KeyD","KeyE","KeyF","KeyG","KeyH","KeyI","KeyJ","KeyK","KeyL","KeyM","KeyN","KeyO","KeyP","KeyQ","KeyR","KeyS","KeyT","KeyU","KeyV","KeyW","KeyX","KeyY","KeyZ","MetaLeft","MetaRight","ContextMenu","Numpad0","Numpad1","Numpad2","Numpad3","Numpad4","Numpad5","Numpad6","Numpad7","Numpad8","Numpad9","NumpadMultiply","NumpadAdd","NumpadSubtract","NumpadDecimal","NumpadDivide","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","NumLock","ScrollLock"],o7e=R({keyBind:{description:"The key to toggle webcam when pressed.",type:0,default:"KeyX",isValid:e=>hht.includes(e)},reqCtrl:{description:"Require control to be held.",type:3,default:!0},reqShift:{description:"Require shift to be held.",type:3,default:!0},reqAlt:{description:"Require alt to be held.",type:3,default:!1}}),{isVideoEnabled:xht}=He("isVideoEnabled");rR=k({name:"ToggleVideoBind",description:"Adds a customizable bind to toggle webcam.",authors:[j.mochienya],settings:o7e,start(){document.addEventListener("keydown",t7e)},stop(){document.removeEventListener("keydown",t7e)}})});var yht,iR,r7e=x(()=>{"use strict";d();yht=new Map(Object.entries({j:"Joking",hj:"Half Joking",s:"Sarcastic",_sarc:"Sarcastic",gen:"Genuine",_g:"Genuine",genq:"Genuine Question",_gq:"Genuine Question",srs:"Serious",nsrs:"Non-Serious",pos:"Positive Connotation",_pc:"Positive Connotation",neu:"Neutral Connotation",neg:"Negative Connotation",_nc:"Negative Connotation",p:"Platonic",r:"Romantic",a:"Alterous",c:"Copypasta",l:"Lyrics",_ly:"Lyrics",lh:"Light-Hearted",nm:"Not Mad",lu:"A Little Upset",nbh:"Not Directed At Anybody Here",nay:"Not Directed At You",ay:"Directed At You",nsb:"Not Subtweeting",x:"Sexual Intent",_sx:"Sexual Intent",nx:"Non-Sexual Intent",_nsx:"Non-Sexual Intent",rh:"Rhetorical Question",_rt:"Rhetorical Question",t:"Teasing",ij:"Inside Joke",m:"Metaphorically",li:"Literally",hyp:"Hyperbole",ex:"Exaggeration",f:"Fake",q:"Quote",th:"Threat",cb:"Clickbait",ref:"Reference",nf:"Not Forced",nbr:"Not Being Rude",ot:"Off-Topic",nj:"Not Joking",naj:"Not A Joke"})),iR=yht});function eee({prefix:e,indicator:t,desc:o}){return r(Ue,{text:o},n=>r("span",{...n,style:{color:"var(--text-normal)",userSelect:"text"}},e,t))}var i7e=x(()=>{"use strict";d();B()});function s7e(){let e=vS.store.customIndicators||"",t={};return e.split("; ").forEach(o=>{let[n,...i]=o.split("=");n&&i.length>0&&(t[n.trim().toLowerCase()]=i.join("=").trim())}),t}function bht(e){e=e.toLowerCase();let t=s7e();return t[e]||t[`_${e}`]||iR.get(e)||iR.get(`_${e}`)||null}function vht(){let e=s7e(),t=new Set;iR.forEach((l,c)=>{t.add(c.replace(/^_/,""))}),Object.keys(e).forEach(l=>{t.add(l.replace(/^_/,""))});let o=Array.from(t).map(l=>l.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")).sort((l,c)=>c.length-l.length),n=vS.store.prefix||"/",i=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");/[*_~`|]/.test(n)&&(i=`(?:\\\\${i}|${i})`);let a=`(?:^|\\s)${i}(${o.join("|")})(?=\\s|$|[^\\s\\w/])`;return new RegExp(a,"giu")}function Sht(e){let t=[],o=0,n=0,i=vht(),s=vS.store.prefix||"/",a;for(;(a=i.exec(e))&&n<vS.store.maxIndicators;){let l=a[1],c=bht(l),u=a.index,p=i.lastIndex;u>o&&t.push(e.slice(o,u)),c&&(t.push(r(eee,{key:`ti-${u}`,prefix:s,indicator:l,desc:c})),n++),o=p}return o<e.length&&t.push(e.slice(o)),t}function wht(e){let t=o=>{if(o==null)return o;if(typeof o=="string"){let n=vS.store.prefix||"/",i=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");if(/[*_~`|]/.test(n)&&(i=`(?:\\\\${i}|${i})`),!new RegExp(`${i}[\\p{L}_]+`,"iu").test(o))return o;let a=Sht(o);return a.length===1?a[0]:a}if(o?.props?.children!=null){let n=o.props.children;return Array.isArray(n)?o.props.children=n.map(t).flat():o.props.children=t(n),o}return o};return Array.isArray(e)?e.map(t).flat():t(e)}var vS,sR,a7e=x(()=>{"use strict";d();Q();H();$();r7e();i7e();vS=R({prefix:{type:0,description:"Prefix character(s) for tone indicators.",default:"/"},customIndicators:{type:0,description:"Custom tone indicators (format: jk=Joking; srs=Serious)",default:""},maxIndicators:{type:1,description:"Maximum number of tone indicators to show per message",default:5}});sR=k({name:"ToneIndicators",description:"Show tooltips for tone indicators like /srs, /gen, etc. in sent messages.",authors:[j.justjxke],settings:vS,patches:[{find:'["strong","em","u","text","inlineCode","s","spoiler"]',replacement:[{match:/(?=return\{hasSpoilerEmbeds:\i,.{0,15}content:(\i))/,replace:"$1=$self.patchToneIndicators($1);"}]}],patchToneIndicators(e){try{return wht(e)}catch{return e}}})});var l7e=x(()=>{"use strict";d()});async function Dht(e){let t=JSON.parse(e);if(t.error)return V.dispatch({type:"LOCAL_ACTIVITY_UPDATE",activity:null,socketId:"tosu"});let{state:o,session:n,profile:i,beatmap:s,play:a,resultsScreen:l}=t,c={application_id:c7e,name:"osu!",type:0,assets:{large_image:kht,large_text:i.userStatus.number===65793?`${i.name} | #${i.globalRank} | ${Math.round(i.pp)}pp`:void 0},timestamps:{start:Date.now()-n.playTime},flags:1};switch(c.assets={},i.mode.number){case 0:c.assets.small_image=Eht,c.assets.small_text="osu!";break;case 3:c.assets.small_image=Aht,c.assets.small_text="osu!mania";break;case 1:c.assets.small_image=Cht,c.assets.small_text="osu!taiko";break;case 2:c.assets.small_image=Tht,c.assets.small_text="osu!catch";break}let u="",p="",m="",g="",y="",b="",v="",E="",A="";switch(o.number){case 2:c.type=i.banchoStatus.number===2?0:3,u=i.banchoStatus.number===2?"":`${a.playerName} | `,p=a.mods.name?`+${a.mods.name} `:"",c.name=`${u}${s.artist} - ${s.title} [${s.version}] ${p}(${s.mapper}, ${s.stats.stars.total.toFixed(2)}*)`,g=a.hits[0]===0&&a.hits.sliderBreaks===0?`${a.combo.current}x`:`${a.combo.current}x/${a.combo.max}x`,A=a.hits[0]===0&&a.hits.sliderBreaks===0?`${Math.round(a.pp.current)}pp`:`${Math.round(a.pp.current)}pp/${Math.round(a.pp.fc)}pp`,c.details=`${a.accuracy.toFixed(2)}% | ${g} | ${A}`,y=a.hits[100]>0?`${a.hits[100]}x100`:"",b=a.hits[50]>0?`${a.hits[50]}x50`:"",v=a.hits[0]>0?`${a.hits[0]}xMiss`:"",E=a.hits.sliderBreaks>0?`${a.hits.sliderBreaks}xSB`:"",c.state=[y,b,v,E].filter(Boolean).join(" | ");let C=await nee(`https://raw.githubusercontent.com/AutumnVN/gosu-rich-presence/main/grade/${a.rank.current.toLowerCase().replace("x","ss")}.png`);c.assets.small_image=C,c.assets.small_text=void 0;break;case 7:c.type=3,p=l.mods.name?`+${l.mods.name} `:"",c.name=`${l.playerName} | ${s.artist} - ${s.title} [${s.version}] ${p}(${s.mapper}, ${s.stats.stars.total.toFixed(2)}*)`,m=l.maxCombo===s.stats.maxCombo?"FC":`| ${l.maxCombo}x/${s.stats.maxCombo}x`,A=l.pp.current?Math.round(l.pp.current)===Math.round(l.pp.fc)?`| ${Math.round(l.pp.current)}pp`:`| ${Math.round(l.pp.current)}pp/${Math.round(l.pp.fc)}pp`:"",c.details=`${l.accuracy.toFixed(2)}% ${m} ${A}`,y=l.hits[100]>0?`${l.hits[100]}x100`:"",b=l.hits[50]>0?`${l.hits[50]}x50`:"",v=l.hits[0]>0?`${l.hits[0]}xMiss`:"",E=a.hits.sliderBreaks>0?`${a.hits.sliderBreaks}xSB`:"",c.state=[y,b,v].filter(Boolean).join(" | ");let I=await nee(`https://raw.githubusercontent.com/AutumnVN/gosu-rich-presence/main/grade/${l.rank.toLowerCase().replace("x","ss")}.png`);c.assets.small_image=I,c.assets.small_text=void 0;break;default:switch(c.type=2,p=a.mods.name?`+${a.mods.name} `:"",c.name=`${s.artist} - ${s.title} [${s.version}] ${p}(${s.mapper}, ${s.stats.stars.total.toFixed(2)}*)`,o.number){case 0:c.details="Main Menu";break;case 1:c.details="Edit";break;case 4:c.details="Song Select (Edit)";break;case 5:c.details="Song Select (Play)";break;case 6:c.details="Select Drawings";break;case 8:c.details="Update";break;case 9:c.details="Busy";break;case 11:c.details="Lobby";break;case 12:c.details="Match Setup";break;case 13:c.details="Select Multi";break;case 14:c.details="Ranking Vs";break;case 15:c.details="Online Selection";break;case 16:c.details="Options Offset Wizard";break;case 17:c.details="Ranking Tag Coop";break;case 18:c.details="Ranking Team";break;case 19:c.details="Beatmap Import";break;case 20:c.details="Package Updater";break;case 21:c.details="Benchmark";break;case 22:c.details="Tourney";break;case 23:c.details="Charts";break}switch(i.banchoStatus.number){case 0:c.state="Idle";break;case 1:c.state="AFK";break;case 2:c.state="Playing";break;case 3:c.state="Editing";break;case 4:c.state="Modding";break;case 5:c.state="Multiplayer";break;case 6:c.state="Watching";break;case 8:c.state="Testing";break;case 9:c.state="Submitting";break;case 10:c.state="Paused";break;case 11:c.state="Lobby";break;case 12:c.state="Multiplaying";break;case 13:c.state="osu!direct";break}break}if(s.set>0){let C=await nee(`https://assets.ppy.sh/beatmaps/${s.set}/covers/list@2x.jpg`);(await fetch(C.replace(/^mp:/,"https://media.discordapp.net/"),{method:"HEAD"})).ok&&(c.assets.large_image=C)}V.dispatch({type:"LOCAL_ACTIVITY_UPDATE",activity:c,socketId:"tosu"})}function Mht(e,t,o){let n,i;return function(...s){n||(e.apply(this,s),n=!0,setTimeout(()=>n=!1,t),o&&(clearTimeout(i),i=setTimeout(o,t*2)))}}async function nee(e){return/https?:\/\/(cdn|media)\.discordapp\.(com|net)\/attachments\//.test(e)?"mp:"+e.replace(/https?:\/\/(cdn|media)\.discordapp\.(com|net)\//,""):(await zi.fetchAssetIds(c7e,[e]))[0]}var c7e,kht,Eht,Aht,Cht,Tht,Iht,Ky,tee,oee,aR,u7e=x(()=>{"use strict";d();H();$();hr();B();l7e();c7e="367827983903490050",kht="373344233077211136",Eht="373370493127884800",Aht="373370588703621136",Cht="373370519891738624",Tht="373370543161999361",Iht=Mht(Dht,3e3,()=>V.dispatch({type:"LOCAL_ACTIVITY_UPDATE",activity:null,socketId:"tosu"})),oee=!1,aR=k({name:"TosuRPC",description:"osu! RPC with data from tosu",authors:[w.AutumnVN],start(){oee=!0,(function e(){Ky=new WebSocket("ws://127.0.0.1:24050/websocket/v2"),Ky.addEventListener("error",()=>Ky.close()),Ky.addEventListener("close",()=>{oee&&(tee=setTimeout(e,5e3))}),Ky.addEventListener("message",({data:t})=>Iht(t))})()},stop(){oee=!1,tee&&clearTimeout(tee),Ky&&Ky.close(),V.dispatch({type:"LOCAL_ACTIVITY_UPDATE",activity:null,socketId:"tosu"})}})});var d7e=x(()=>{});var lR,ree=x(()=>{"use strict";d();Q();$();lR=R({target:{type:0,description:"Target language",default:"en",restartNeeded:!0},toki:{type:3,description:"Enable Toki Pona",default:!0,restartNeeded:!0},sitelen:{type:3,description:"Enable Sitelen Pona",default:!0,restartNeeded:!0},shavian:{type:3,description:"Enable Shavian",default:!0,restartNeeded:!0}})});var p7e,m7e=x(()=>{"use strict";d();p7e={auto:"Detect language",af:"Afrikaans",sq:"Albanian",am:"Amharic",ar:"Arabic",hy:"Armenian",as:"Assamese",ay:"Aymara",az:"Azerbaijani",bm:"Bambara",eu:"Basque",be:"Belarusian",bn:"Bengali",bho:"Bhojpuri",bs:"Bosnian",bg:"Bulgarian",ca:"Catalan",ceb:"Cebuano",ny:"Chichewa","zh-CN":"Chinese (Simplified)","zh-TW":"Chinese (Traditional)",co:"Corsican",hr:"Croatian",cs:"Czech",da:"Danish",dv:"Dhivehi",doi:"Dogri",nl:"Dutch",en:"English",eo:"Esperanto",et:"Estonian",ee:"Ewe",tl:"Filipino",tp:"Toki Pona",sh:"Shavian",fi:"Finnish",fr:"French",fy:"Frisian",gl:"Galician",ka:"Georgian",de:"German",el:"Greek",gn:"Guarani",gu:"Gujarati",ht:"Haitian Creole",ha:"Hausa",haw:"Hawaiian",iw:"Hebrew",hi:"Hindi",hmn:"Hmong",hu:"Hungarian",is:"Icelandic",ig:"Igbo",ilo:"Ilocano",id:"Indonesian",ga:"Irish",it:"Italian",ja:"Japanese",jw:"Javanese",kn:"Kannada",kk:"Kazakh",km:"Khmer",rw:"Kinyarwanda",gom:"Konkani",ko:"Korean",kri:"Krio",ku:"Kurdish (Kurmanji)",ckb:"Kurdish (Sorani)",ky:"Kyrgyz",lo:"Lao",la:"Latin",lv:"Latvian",ln:"Lingala",lt:"Lithuanian",lg:"Luganda",lb:"Luxembourgish",mk:"Macedonian",mai:"Maithili",mg:"Malagasy",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi","mni-Mtei":"Meiteilon (Manipuri)",lus:"Mizo",mn:"Mongolian",my:"Myanmar (Burmese)",ne:"Nepali",no:"Norwegian",or:"Odia (Oriya)",om:"Oromo",ps:"Pashto",fa:"Persian",pl:"Polish",pt:"Portuguese",pa:"Punjabi",qu:"Quechua",ro:"Romanian",ru:"Russian",sm:"Samoan",sa:"Sanskrit",gd:"Scots Gaelic",nso:"Sepedi",sr:"Serbian",st:"Sesotho",sn:"Shona",sd:"Sindhi",si:"Sinhala",sk:"Slovak",sl:"Slovenian",so:"Somali",es:"Spanish",su:"Sundanese",sw:"Swahili",sv:"Swedish",tg:"Tajik",ta:"Tamil",tt:"Tatar",te:"Telugu",th:"Thai",ti:"Tigrinya",ts:"Tsonga",tr:"Turkish",tk:"Turkmen",ak:"Twi",uk:"Ukrainian",ur:"Urdu",ug:"Uyghur",uz:"Uzbek",vi:"Vietnamese",cy:"Welsh",xh:"Xhosa",yi:"Yiddish",yo:"Yoruba",zu:"Zulu"}});var SS,iee=x(()=>{"use strict";d();nt();SS=de("eq-trans-")});function cR(){return r("svg",{viewBox:"0 96 960 960",height:24,width:24,className:SS("icon")},r("path",{fill:"currentColor",d:"m475 976 181-480h82l186 480h-87l-41-126H604l-47 126h-82Zm151-196h142l-70-194h-2l-70 194Zm-466 76-55-55 204-204q-38-44-67.5-88.5T190 416h87q17 33 37.5 62.5T361 539q45-47 75-97.5T487 336H40v-80h280v-80h80v80h280v80H567q-22 69-58.5 135.5T419 598l98 99-30 81-127-122-200 200Z"}),r("path",{fill:"currentColor",d:"m 830.17456,136.43701 c -11.54729,0 -20.84473,8.71252 -20.84473,19.53369 v 66.21826 h -66.21826 c -10.82122,0 -19.53369,9.29373 -19.53369,20.84107 0,11.54734 8.71247,20.84473 19.53369,20.84473 h 66.21826 v 66.21826 c 0,10.8212 9.29742,19.53369 20.84473,19.53369 11.54731,0 20.84106,-8.71249 20.84106,-19.53369 v -66.21826 h 66.21827 c 10.82124,0 19.53369,-9.29737 19.53369,-20.84473 0,-11.54736 -8.71245,-20.84107 -19.53369,-20.84107 H 851.01562 V 155.9707 c 0,-10.82117 -9.29377,-19.53369 -20.84106,-19.53369 z"}),r("rect",{fill:"currentColor",width:"0.42110577",height:"2.1055288",x:"848.52814",y:"112.42313",ry:"0.2105529"}))}function f7e(){return r("svg",{viewBox:"0 96 960 960",height:16,width:16,className:SS("icon")},r("path",{fill:"currentColor",d:"m475 976 181-480h82l186 480h-87l-41-126H604l-47 126h-82Zm151-196h142l-70-194h-2l-70 194Zm-466 76-55-55 204-204q-38-44-67.5-88.5T190 416h87q17 33 37.5 62.5T361 539q45-47 75-97.5T487 336H40v-80h280v-80h80v80h280v80H567q-22 69-58.5 135.5T419 598l98 99-30 81-127-122-200 200Z"}),r("path",{fill:"currentColor",d:"m 830.17456,136.43701 c -11.54729,0 -20.84473,8.71252 -20.84473,19.53369 v 66.21826 h -66.21826 c -10.82122,0 -19.53369,9.29373 -19.53369,20.84107 0,11.54734 8.71247,20.84473 19.53369,20.84473 h 66.21826 v 66.21826 c 0,10.8212 9.29742,19.53369 20.84473,19.53369 11.54731,0 20.84106,-8.71249 20.84106,-19.53369 v -66.21826 h 66.21827 c 10.82124,0 19.53369,-9.29737 19.53369,-20.84473 0,-11.54736 -8.71245,-20.84107 -19.53369,-20.84107 H 851.01562 V 155.9707 c 0,-10.82117 -9.29377,-19.53369 -20.84106,-19.53369 z"}),r("rect",{fill:"currentColor",width:"0.42110577",height:"2.1055288",x:"848.52814",y:"112.42313",ry:"0.2105529"}))}var see=x(()=>{"use strict";d();iee()});function Nht(e){let t=/\b(?:leko|weka|pan|lete|linja|lipu|suli|nimi|akesi|misikeke|selo|ike|sijelo|sona|lili|pimeja|ante|jo|loje|telo|walo|kijetesantakalu|kasi|waso|wile|utala|lukin|sina|lape|ma|pilin|jasima|la|olin|pipi|meso|lawa|pi|pakala|oko|tan|ken|jaki|unpa|esun|seme|sitelen|len|kule|soko|open|ala|tenpo|lon|sinpin|pini|kokosila|mama|musi|monsi|mewika|taso|ona|mun|kiwen|tomo|mute|mi|nena|palisa|meli|laso|wawa|ale|kipisi|kulupu|ilo|lupa|nanpa|en|mu|jelo|kili|tonsi|moku|ni|kama|pu|poki|monsuta|sin|lasina|poka|soweli|sewi|elena|epiku|moli|pona|lanpan|alasa|anu|kute|uta|luka|suno|sama|awen|namako|suwi|noka|seli|mije|sike|jan|pali|tawa|inli|nasa|mani|wan|insa|nijon|nasin|kalama|ijo|toki|anpa|kala|kepeken|ko|kon|pana|tu|supa|kin|usawi|yupekosi)\b/gm;return(e.match(t)||[]).length>=e.split(/\s+/).length*.5}function g7e(e){return/(?:||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||)/gm.test(e)}function Bht(e){return/[\u{10450}-\u{1047F}]+/u.test(e)}async function Pht(e){let t=await(await fetch("https://raw.githubusercontent.com/ForkPrince/TranslatePlus/322199d5fdb1a9506591c9f4a2826338b5d67e38/shavian.json")).json(),o={'"':'"',"\xAB":'"',"\xBB":'"',",":",","!":"!","?":"?",".":".","(":"(",")":")","/":"/",";":";",":":":"},n="",i=e.split(/\s+/);for(let s of i){let a="",l="";s[0]in o&&(a=o[s[0]],s=s.slice(1)),s[s.length-1]in o&&(l=o[s[s.length-1]],s=s.slice(0,-1)),n+=a,s in t?n+=t[s]:n+=s,n+=l+" "}return n.trim()}async function _ht(e){e=Array.from(e).join(" ");let t=await(await fetch("https://raw.githubusercontent.com/ForkPrince/TranslatePlus/5ca152b134ea11433971f21b2ef8d556d4306717/sitelen-pona.json")).json(),o=Object.keys(t).sort((s,a)=>a.length-s.length),n=new RegExp(`(${o.join("|")})`,"g");return e.replace(n,s=>t[s])}async function aee(e,t){let o=await(await fetch(`https://translate.googleapis.com/translate_a/single?${new URLSearchParams({client:"gtx",sl:"auto",tl:e,dt:"t",dj:"1",source:"input",q:t})}`)).json();return{src:o.src,text:o.sentences.map(n=>n.trans).filter(Boolean).join("")}}async function h7e(e){let{target:t,toki:o,sitelen:n,shavian:i}=lR.store,s={src:"",text:""};if((Nht(e)||g7e(e))&&(o||n)){g7e(e)&&n&&(e=await _ht(e)),console.log(e);let a=await(await fetch("https://aiapi.serversmp.xyz/toki",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({text:e,src:"tl",target:"en"})})).json();console.log(a),s.src="tp",s.text=t==="en"?a.translation[0]:(await aee(t,a.translation[0])).text}else if(Bht(e)&&i){let a=await Pht(e);s.src="sh",s.text=t==="en"?a:(await aee(t,a)).text}else{let a=await aee(t,e);s.src=a.src,s.text=a.text}return s}var x7e=x(()=>{"use strict";d();ree()});function y7e({message:e}){let[t,o]=L(void 0);return se(()=>{if(!e.vencordEmbeddedBy)return lee.set(e.id,o),()=>void lee.delete(e.id)},[]),t?r("span",{className:SS("accessory")},r(f7e,null),Jt.parse(t.text)," ","(translated from ",p7e[t.src]??t.src," - ",r("button",{onClick:()=>o(void 0),className:SS("dismiss")},"Dismiss"),")"):null}async function cee(e){lee.get(e.id)(await h7e(e.content))}var lee,b7e=x(()=>{"use strict";d();m7e();iee();B();see();x7e();lee=new Map});var Rht,uR,v7e=x(()=>{"use strict";d();d7e();Un();H();$();B();ree();b7e();see();Rht=(e,{message:t})=>{if(!t.content)return;let o=Qt("copy-text",e);o&&o.splice(o.findIndex(n=>n?.props?.id==="copy-text")+1,0,r(M.MenuItem,{id:"ec-trans",label:"Translate",icon:cR,action:()=>cee(t)}))},uR=k({name:"Translate+",description:"Vencord's translate plugin but with support for artistic languages!",authors:[w.Ven,j.Prince527],settings:lR,contextMenus:{message:Rht},renderMessageAccessory:e=>r(y7e,{message:e.message}),messagePopoverButton:{icon:cR,render(e){return e.content?{label:"Translate",icon:cR,message:e,channel:ne.getChannel(e.channel_id),onClick:()=>cee(e)}:null}}})});var S7e=x(()=>{});function w7e(e){let t=e;if(uee.store.myUnits==="imperial")for(let o in wS.metric)t=t.replaceAll(wS.metric[o].regex,wS.metric[o].convert);else for(let o in wS.imperial)t=t.replaceAll(wS.imperial[o].regex,wS.imperial[o].convert);return t}var wS,k7e=x(()=>{"use strict";d();dee();wS={imperial:{farenheight:{regex:/(-?\d+(?:\.\d+)?)?(f)(?!\w)/ig,convert(...e){return`${((parseFloat(e[1])-32)*.5555555555555556).toFixed(2)}\xB0C`}},feetInchesMark:{regex:/(\d+)(') ?(\d+(?:\.\d+)?)("|'')?/g,convert(...e){let t=parseFloat(e[1])/3.281;return t+=parseFloat(e[3])/39.37,`${t.toFixed(2)}m`}},feetWord:{regex:/(\d+(?:\.\d+)?) *(f(ee)?t)(?! *\d)/ig,convert(...e){return`${(parseFloat(e[1])/3.281).toFixed(2)}m`}},inchesWord:{regex:/(?<!\d+ *(?:f(?:ee|oo)?t) *)(\d+(?:\.\d+)?) *(in(?:ches?)?)/ig,convert(...e){return`${(parseFloat(e[1])/2.54).toFixed(2)}cm`}},feetInchesWord:{regex:/(\d+) *(f(?:ee|oo)?t) *(\d+(?:\.\d+)?) *(in(?:ches?)?)/ig,convert(...e){let t=parseFloat(e[1])/3.281;return t+=parseFloat(e[3])/39.37,`${t.toFixed(2)}m`}},poundWord:{regex:/(\d+(?:\.\d+)?) *(lbs?|pounds?)(?! ?\d)/ig,convert(...e){return`${(parseFloat(e[1])/2.205).toFixed(2)}kg`}},poundOunceWord:{regex:/(\d+(?:\.\d+)?) *(lbs?|pounds?) *(\d+(?:\.\d+)?) *(ozs?|ounces?)/ig,convert(...e){let t=parseInt(e[1])/2.205;return t+=parseFloat(e[2])/35.274,`${t.toFixed(2)}kg`}},ounceWord:{regex:/(\d+(?:\.\d+)?) ?(ounces?|oz)/gi,convert(...e){return`${(parseFloat(e[1])*28.35).toFixed(2)}g`}},milesPerHour:{regex:/(\d+(?:\.\d+)?) ?(m(?:p|\/)h)/gi,convert(...e){return`${(parseFloat(e[1])*1.609).toFixed(2)}km/h`}}},metric:{celcius:{regex:/(-?\d+(?:\.\d+)?)\s??c(?!\w)/ig,convert(...e){return`${(parseFloat(e[1])*1.8+32).toFixed(2)}\xB0F`}},centimeters:{regex:/(\d+(?:\.\d+)?) ?(cm|centimeters?)(?!\w)/gi,convert(...e){return`${(parseFloat(e[1])/2.54).toFixed(2)}in`}},meters:{regex:/(\d+(?:\.\d+)?) ?(m|meters?)(?!\w)/gi,convert(...e){let t=parseFloat((parseFloat(e[1])*3.821).toFixed(2));return Number.isInteger(t)?`${t}ft`:`${t.toFixed(0)}ft${(t%1*12).toFixed(2)}in`}},kilometers:{regex:/(\d+(?:\.\d+)?) ?(km|kilometers?|kms?)(?!\w)/gi,convert(...e){return`${(parseFloat(e[1])/1.609).toFixed(2)}mi`}},grams:{regex:/(\d+(?:\.\d+)?) ?(grams?|g)/gi,convert(...e){return`${(parseFloat(e[1])/28.35).toFixed(2)}oz(s)`}},kilograms:{regex:/(\d+(?:\.\d+)?) ?(kg|kilo(?:gram)?s?)/gi,convert(...e){return`${(parseFloat(e[1])*2.205).toFixed(2)}lb(s)`}},kilometersPerHour:{regex:/(\d+(?:\.\d+)?) ?(km\/h|kmph|kph|kilometers?\/?h)/gi,convert(...e){return`${(parseFloat(e[1])/1.609).toFixed(2)}mph`}}}}});function Lht({onDismiss:e}){return r("button",{onClick:e,className:dR("dismiss")},"Dismiss")}function mee(){return r("svg",{viewBox:"0 0 98 98",height:24,width:24,className:dR("icon")},r("path",{fill:"currentColor",d:"m50 16.668v-7.4609c0-1.875-2.25-2.7891-3.543-1.457l-11.664 11.625c-0.83594 0.83203-0.83594 2.125 0 2.957l11.625 11.625c1.332 1.293 3.582 0.375 3.582-1.5v-7.457c13.793 0 25 11.207 25 25 0 3.293-0.625 6.5-1.832 9.375-0.625 1.5-0.16797 3.207 0.95703 4.332 2.125 2.125 5.707 1.375 6.832-1.4141 1.543-3.793 2.375-7.9609 2.375-12.293 0-18.418-14.914-33.332-33.332-33.332zm0 58.332c-13.793 0-25-11.207-25-25 0-3.293 0.625-6.5 1.832-9.375 0.625-1.5 0.16797-3.207-0.95703-4.332-2.125-2.125-5.707-1.375-6.832 1.4141-1.543 3.793-2.375 7.9609-2.375 12.293 0 18.418 14.914 33.332 33.332 33.332v7.4609c0 1.875 2.25 2.7891 3.543 1.457l11.625-11.625c0.83203-0.83203 0.83203-2.125 0-2.957l-11.625-11.625c-1.293-1.293-3.543-0.375-3.543 1.5z"}))}function Oht(){return r("svg",{viewBox:"0 0 98 98",height:16,width:16,className:dR("icon")},r("path",{fill:"currentColor",d:"m50 16.668v-7.4609c0-1.875-2.25-2.7891-3.543-1.457l-11.664 11.625c-0.83594 0.83203-0.83594 2.125 0 2.957l11.625 11.625c1.332 1.293 3.582 0.375 3.582-1.5v-7.457c13.793 0 25 11.207 25 25 0 3.293-0.625 6.5-1.832 9.375-0.625 1.5-0.16797 3.207 0.95703 4.332 2.125 2.125 5.707 1.375 6.832-1.4141 1.543-3.793 2.375-7.9609 2.375-12.293 0-18.418-14.914-33.332-33.332-33.332zm0 58.332c-13.793 0-25-11.207-25-25 0-3.293 0.625-6.5 1.832-9.375 0.625-1.5 0.16797-3.207-0.95703-4.332-2.125-2.125-5.707-1.375-6.832 1.4141-1.543 3.793-2.375 7.9609-2.375 12.293 0 18.418 14.914 33.332 33.332 33.332v7.4609c0 1.875 2.25 2.7891 3.543 1.457l11.625-11.625c0.83203-0.83203 0.83203-2.125 0-2.957l-11.625-11.625c-1.293-1.293-3.543-0.375-3.543 1.5z"}))}function E7e({message:e}){let[t,o]=L("");return pee.set(e.id,o),t?r("span",{className:dR("accessory")},r(Oht,null),t," - ",r(Lht,{onDismiss:()=>o("")})):null}var pee,dR,A7e=x(()=>{"use strict";d();nt();B();pee=new Map,dR=de("vc-converter-")});var uee,pR,dee=x(()=>{"use strict";d();S7e();ww();Q();H();$();B();k7e();A7e();uee=R({myUnits:{type:4,description:"the units you use and want things converted to. defaults to imperial",options:[{default:!0,label:"Imperial",value:"imperial"},{label:"Metric",value:"metric"}]}}),pR=k({name:"UnitConverter",description:"Converts metric units to Imperal units and vice versa",authors:[w.sadan],messagePopoverButton:{icon:mee,render(e){return e.content?{label:"Convert Units",icon:mee,message:e,channel:ne.getChannel(e.channel_id),onClick:async()=>{let t=pee.get(e.id);t&&t(w7e(e.content))}}:null}},start(){Oh("vc-converter",e=>r(E7e,{message:e.message}))},settings:uee})});function Fht(){return fee||(fee=Object.values(z.getUsers())),fee}var mR,fee,fR,C7e=x(()=>{"use strict";d();Q();gd();H();$();B();mR=R({globalMention:{type:3,description:"Mention users from any server, not just the current one",default:!1,restartNeeded:!0},onlyDMUsers:{type:3,description:"Only show users you've had DMs with",default:!1,restartNeeded:!0}}),fee=null;fR=k({name:"UniversalMention",authors:[j.justjxke],description:"Mention any user, regardless of channel access.",settings:mR,settingsAboutComponent:()=>r(ur.Warning,null,"Using Global Mention can cause performance issues and show an absurd amount of users in the autocomplete."),patches:[{find:",queryMentionResults(",replacement:[{match:/(filter:\i).{0,75}context:\i\}\)(?=,allowSnowflake)/,replace:"$1=>true"},{match:/(?<=\i=)\i\.\i\.getMembers\(.{0,25}\)\.filter\(\i\)/g,replace:"$self.useFilter()",predicate:()=>mR.store.globalMention||mR.store.onlyDMUsers},{match:/(?<=\i=)\i\.recipients\.map\(.{0,100}\?\?null\}\)\)/,replace:"$self.useFilter(true)"}]}],useFilter(e=!1){let t=Fht(),o=mR.store.onlyDMUsers?t.filter(n=>ne.getDMFromUserId(n.id)):t;return e?o.map(n=>({userId:n.id,nick:null})):o}})});var gee,gR,T7e=x(()=>{"use strict";d();Q();H();$();gee=R({maxAccounts:{description:"Number of accounts that can be added, or 0 for no limit",default:0,type:1,restartNeeded:!0}}),gR=k({name:"UnlimitedAccounts",description:"Increases the amount of accounts you can add.",authors:[w.thororen],settings:gee,patches:[{find:"pushSyncToken:null",replacement:[{match:/(\).length>)5/,replace:"$1$self.getMaxAccounts()"},{match:/(\i.splice\()5/,replace:"$1$self.getMaxAccounts()"}]},{find:"getCurrentUser(),multiAccountUsers",replacement:[{match:/(maxNumAccounts:)5/,replace:"$1$self.getMaxAccounts()"},{match:/(\i.length<)5/,replace:"$1$self.getMaxAccounts()"},{match:/(\i.length>=)5/,replace:"$1$self.getMaxAccounts()"}]}],getMaxAccounts(){return gee.store.maxAccounts===0?1/0:gee.store.maxAccounts}})});var Uht,$ht,Hht,hee,hR,I7e=x(()=>{"use strict";d();Q();tt();H();$();fe();B();Uht=Ft("UserGuildSettingsStore"),$ht=Ft("JoinedThreadsStore"),Hht=De("BADGE_NOTIFICATION_BACKGROUND","let{count:"),hee=R({showOnMutedChannels:{description:"Show unread count on muted channels",type:3,default:!1},notificationCountLimit:{description:"Show +99 instead of true amount",type:3,default:!1}}),hR=k({name:"UnreadCountBadge",authors:[w.Joona],description:"Shows unread message count badges on channels in the channel list",settings:hee,patches:[{find:"UNREAD_IMPORTANT:",replacement:[{match:/\.Children\.count.+?:null(?<=,channel:(\i).+?)/,replace:"$&,$self.CountBadge({channel: arguments[0].channel})"}]},{find:"M0 15H2c0 1.6569",replacement:[{match:/mentionsCount:\i.{0,50}?null/,replace:"$&,$self.CountBadge({channel: arguments[0].thread})"}]}],CountBadge:ee.wrap(({channel:e})=>{let t=Je([ss],()=>ss.getUnreadCount(e.id));return!t||!hee.store.showOnMutedChannels&&(Uht.isChannelMuted(e.guild_id,e.id)||$ht.isMuted(e.id))?null:r(Hht,{color:"var(--brand-500)",count:t>99&&hee.store.notificationCountLimit?"+99":t})},{noop:!0})})});var D7e=x(()=>{});function Yht(e){let t=e.replace(/[.+^${}()|[\]\\]/g,"\\$&").replace(/\*/g,".*").replace(/\?/g,".");return new RegExp(t,"i")}function Qht(e){for(let t of Jf.store.patterns){let o=t.pattern.trim();if(o&&Yht(o).test(e))return t}return null}var zht,Yy,Ght,qht,jht,Wht,Kht,Jf,xR,M7e=x(()=>{"use strict";d();D7e();Q();Co();tt();ut();H();nt();$();fe();B();zht="#eb7396",Yy=de("vc-url-hl-"),Ght=De("2.81h8.36a3"),qht=De("0v-5h5a1"),jht=e=>parseInt(e.replace("#",""),16),Wht=e=>"#"+e.toString(16).padStart(6,"0"),Kht=ee.wrap(()=>{let{patterns:e}=Jf.store;return r("section",null,r(re,null,"URL Patterns"),e.map((t,o)=>r("div",{key:o,className:Yy("pattern-wrapper")},r(qe,{value:t.pattern,onChange:n=>{e[o].pattern=n,Jf.store.patterns=e},placeholder:"*.example.com"}),r("div",{className:Yy("color-picker")},r(si,{color:jht(t.color),onChange:n=>{e[o].color=Wht(n),Jf.store.patterns=e},showEyeDropper:!1})),r(Me,{className:Yy("remove-button"),variant:"secondary",size:"small",onClick:()=>{e.splice(o,1),Jf.store.patterns=e}},r(Ght,{className:Yy("icon")})))),r(Me,{onClick:()=>Jf.store.patterns.push({pattern:"",color:zht}),className:Yy("add-button"),variant:"secondary",size:"small"},r(qht,{className:Yy("icon")})," Add New"))},{noop:!0}),Jf=R({patterns:{type:6,description:"URL patterns to highlight using glob patterns.",default:[],component:Kht},boldUrls:{type:3,description:"Make highlighted URLs bold.",default:!1},highlightEmbeds:{type:3,description:"Also highlight URLs in embed content.",default:!1}});xR=k({name:"UrlHighlighter",description:"Highlights URLs in messages that match your patterns.",authors:[w.prism],settings:Jf,patches:[{find:".MASKED_LINK),",replacement:{match:/,children:\i\?\?\i/,replace:"$&,...$self.getProps(arguments[0])"}}],getProps(e){if(!e.href)return{};if(!Jf.store.highlightEmbeds&&e.href!==e.title)return{};let t=Qht(e.href);return t?{className:Yy(Jf.store.boldUrls?"marked":"highlight"),style:{"--vc-url-hl-color":t.color}}:{}}})});var N7e=x(()=>{});function B7e({userId:e,modalProps:t}){let{avatars:o}=ah,n=o[e]||"",[i,s]=L(n);function a(u){u.key==="Enter"&&l()}async function l(){if(!i.trim()){await c();return}o[e]=i.trim(),await Gt(yR,o),t.onClose()}async function c(){delete o[e],await Gt(yR,o),t.onClose()}return r(Pe,{...t},r(je,{className:xee("modal-header")},r(re,{tag:"h3"},"Custom Avatar"),r(Ut,{onClick:t.onClose})),r($e,{className:xee("modal-content"),onKeyDown:a},r("section",{className:Z.bottom16},r(re,{tag:"h3"},"Enter PNG/GIF URL"),r(qe,{placeholder:"https://example.com/image.png",value:i,onChange:s,autoFocus:!0}))),r(ht,{className:xee("modal-footer")},r(Be,{gap:"8px"},o[e]&&r(Me,{variant:"dangerPrimary",onClick:c},"Delete"),r(Me,{onClick:l},"Save"))))}var xee,P7e=x(()=>{"use strict";d();vn();ps();Co();eo();ut();co();at();B();yee();xee=$h("vc-custom-avatars-")});var bR,Zht,Xht,Jht,yR,ah,vR,SR,yee=x(()=>{"use strict";d();N7e();vn();Q();Co();eo();B1();ao();w0();gd();H();nt();mt();at();$();fe();B();P7e();bR=de("vc-userpfp-"),Zht="https://ko-fi.com/coolesding",Xht="userpfp-1129784704267210844",Jht=Ds(['type:"USER_SETTINGS_MODAL_OPEN"']),yR="vencord-custom-avatars",ah={avatars:{}},vR=R({overrideServerAvatars:{type:3,description:"Override server avatars with custom avatars or the default user avatar if no custom avatar is set.",default:!0},preferNitro:{description:"Which avatar to use if both default animated (Nitro) pfp and UserPFP avatars are present",type:4,options:[{label:"UserPFP",value:!1},{label:"Nitro",value:!0,default:!0}]},databaseSource:{description:"URL to load database from",type:0,default:"https://userpfp.github.io/UserPFP/source/data.json",hidden:!0,isValid:(e=>e?!0:(e="https://userpfp.github.io/UserPFP/source/data.json",!1))}}),SR=k({name:"UserPFP",description:"Allows you to use an animated avatar without Nitro",authors:[j.nexpid,w.thororen,j.soapphia],settings:vR,data:ah,settingsAboutComponent:()=>r(f,null,r(ur.Info,{className:Z.bottom8},"Using the set avatar feature is local only meaning only you see it change."),r(Be,{className:bR("settings")},r(Me,{variant:"link",className:bR("settings-button"),onClick:()=>Gi(Xht)},"Join UserPFP Server"),r(Me,{variant:"secondary",className:bR("settings-button"),onClick:()=>VencordNative.native.openExternal(Zht)},"Support UserPFP here ",r(gp,{className:bR("settings-heart")})))),patches:[{find:"getUserAvatarURL:",replacement:[{match:/(getUserAvatarURL:)(\i),/,replace:"$1$self.getAvatarHook($2),"},{match:/(getGuildMemberAvatarURLSimple:)(\i),/,replace:"$1$self.getAvatarServerHook($2),",predicate:()=>vR.store.overrideServerAvatars}]}],contextMenus:{"user-context":(e,{user:t})=>{t?.id&&e.push(r(M.MenuSeparator,null),r(M.MenuItem,{label:"Set Avatar",id:"set-avatar",icon:zS,action:async()=>{await Jht(),Ee(o=>r(B7e,{userId:t.id,modalProps:o}))}}))}},getAvatarHook:e=>(t,o,n)=>{if(vR.store.preferNitro&&t.avatar?.startsWith("a_")||!ah.avatars[t.id])return e(t,o,n);let i=new URL(ah.avatars[t.id]);return i.searchParams.set("animated",o?"true":"false"),i&&!o&&(i.pathname=i.pathname.replaceAll(/\.gifv?/g,".png")),i.toString()},getAvatarServerHook:e=>t=>{let{userId:o,avatar:n,size:i,canAnimate:s}=t,{avatars:a}=ah;if(a[o]){let l=a[o];try{let c=new URL(l);return i&&c.searchParams.set("size",i.toString()),c.toString()}catch{return l}}if(n){let l=z.getUser(o);if(l?.avatar)return To.getUserAvatarURL(l,s,i)}return e(t)},async start(){ah.avatars=await zt(yR)||{},await fetch(vR.store.databaseSource).then(e=>e.ok&&e.json()).then(e=>e?.avatars&&Object.assign(ah.avatars,e.avatars)).catch(()=>null)}})});var _7e=x(()=>{});function kS(e){let t=new Map,o=e?.trim();if(!o)return t;if(o.includes(":")||o.includes("=")){for(let n of o.split(",").map(i=>i.trim()).filter(Boolean)){let[i,s]=n.split(/[:=]/).map(a=>a.trim());i&&s&&t.set(i,s)}return t}for(let n of o.split(/\n+/)){let[i,s]=n.split(",").map(a=>a.trim());i&&s&&t.set(i,s)}return t}function R7e(e){return Array.from(e.entries()).map(([t,o])=>`${t}:${o}`).join(",")}function L7e(e,t){let o=t.customVoice??t.defaultVoice??"en_us_001";return e?kS(t.userVoiceMap??"").get(e)??o:o}function O7e(e,t,o){let n=kS(e??"");return n.set(t,o),R7e(n)}function F7e(e,t){let o=kS(e??"");return o.delete(t),R7e(o)}function lE(e){let t=new Set,o=e?.trim();if(!o)return t;for(let n of o.split(",").map(i=>i.trim()).filter(Boolean))t.add(n);return t}function U7e(e){return Array.from(e).join(",")}function $7e(e,t){let o=lE(e);return o.add(t),U7e(o)}function H7e(e,t){let o=lE(e);return o.delete(t),U7e(o)}function mm(e,t){let o=t?/[^\p{Script=Latin}\p{Number}\p{Punctuation}\s]/gu:/[^\p{Letter}\p{Number}\p{Punctuation}\s]/gu;return e.normalize("NFKC").replace(o,"").replace(/_{2,}/g,"_").trim().slice(0,128)}function bee(e,t,o,n,i,s){return e.replaceAll("{{USER}}",mm(t,s)||(t?"Someone":"")).replaceAll("{{CHANNEL}}",mm(o,s)||"channel").replaceAll("{{DISPLAY_NAME}}",mm(n,s)||(n?"Someone":"")).replaceAll("{{NICKNAME}}",mm(i,s)||(i?"Someone":""))}function cE(){return new Promise((e,t)=>{let o=indexedDB.open(ext,txt);o.onupgradeneeded=n=>{let i=o.result,s=o.transaction;if(i.objectStoreNames.contains(Vd)||i.createObjectStore(Vd),i.objectStoreNames.contains(Jc)||i.createObjectStore(Jc).createIndex("by_lastAccess","lastAccess"),s&&(n?.oldVersion??0)<2){let a=Date.now(),l=s.objectStore(Vd),c=s.objectStore(Jc),u=l.openCursor();u.onsuccess=()=>{let p=u.result;if(!p)return;let m=p.value;c.put({size:m?.size??0,createdAt:a,lastAccess:a},String(p.key)),p.continue()}}},o.onsuccess=()=>e(o.result),o.onerror=()=>t(o.error)})}async function z7e(){let e=await cE();return new Promise((t,o)=>{let i=e.transaction(Jc,"readonly").objectStore(Jc),s=0,a=0,l=i.openCursor();l.onsuccess=()=>{let c=l.result;if(!c){t({bytes:s,entries:a});return}let u=c.value;u?.size&&(s+=u.size),a++,c.continue()},l.onerror=()=>o(l.error)})}async function G7e(){for(let t of Ju.values())try{URL.revokeObjectURL(t)}catch{}Ju.clear();let e=await cE();return new Promise((t,o)=>{let n=e.transaction([Vd,Jc],"readwrite");n.objectStore(Vd).clear(),n.objectStore(Jc).clear(),n.oncomplete=()=>t(),n.onerror=()=>o(n.error)})}async function oxt(e=Vht){let t=await cE();return new Promise((o,n)=>{let i=t.transaction([Vd,Jc],"readwrite"),s=i.objectStore(Vd),a=i.objectStore(Jc),l=a.index("by_lastAccess"),c=0,u=a.openCursor(),p=()=>{if(c<=e)return;let m=l.openCursor();m.onsuccess=()=>{let g=m.result;if(!g)return;let y=String(g.primaryKey),v=g.value?.size??0,E=Ju.get(y);if(E){try{URL.revokeObjectURL(E)}catch{}Ju.delete(y)}s.delete(y);let A=a.delete(y);A.onsuccess=()=>{c-=v,p()},A.onerror=()=>p()}};u.onsuccess=()=>{let m=u.result;if(m){let g=m.value;c+=g?.size??0,m.continue();return}p()},u.onerror=()=>n(u.error),i.oncomplete=()=>o(),i.onerror=()=>n(i.error)})}async function vee(e){let t=await cE();return new Promise((o,n)=>{let i=t.transaction([Vd,Jc],"readwrite"),s=i.objectStore(Vd),a=i.objectStore(Jc),l=s.get(e);l.onsuccess=()=>{let c=l.result??null;if(c){let u=Date.now(),p=a.get(e);p.onsuccess=()=>{let m=p.result,g={size:m?.size??c.size,createdAt:m?.createdAt??u,lastAccess:u};a.put(g,e)}}o(c)},l.onerror=()=>n(l.error)})}async function See(e,t){let o=await cE();await new Promise((n,i)=>{let s=o.transaction([Vd,Jc],"readwrite"),a=s.objectStore(Vd),l=s.objectStore(Jc),c=Date.now();a.put(t,e),l.put({size:t.size,createdAt:c,lastAccess:c},e),s.oncomplete=()=>n(),s.onerror=()=>i(s.error)}),await oxt()}var wR,Ju,Vht,ext,txt,Vd,Jc,q7e=x(()=>{"use strict";d();wR=[{label:"Asian: Indonesian Female (id_001)",value:"id_001"},{label:"Asian: Japanese Female 1 (jp_001)",value:"jp_001"},{label:"Asian: Japanese Female 2 (jp_003)",value:"jp_003"},{label:"Asian: Japanese Female 3 (jp_005)",value:"jp_005"},{label:"Asian: Japanese Male (jp_006)",value:"jp_006"},{label:"Asian: Korean Female (kr_003)",value:"kr_003"},{label:"Asian: Korean Male 1 (kr_002)",value:"kr_002"},{label:"Asian: Korean Male 2 (kr_004)",value:"kr_004"},{label:"English: AU Female (en_au_001)",value:"en_au_001"},{label:"English: AU Male (en_au_002)",value:"en_au_002"},{label:"English: Funny (en_male_funny)",value:"en_male_funny"},{label:"English: Narrator (en_male_narration)",value:"en_male_narration"},{label:"English: Peaceful (en_female_emotional)",value:"en_female_emotional"},{label:"English: Serious (en_male_cody)",value:"en_male_cody"},{label:"English: UK Male 1 (en_uk_001)",value:"en_uk_001"},{label:"English: UK Male 2 (en_uk_003)",value:"en_uk_003"},{label:"English: US Female 1 (en_us_001)",value:"en_us_001"},{label:"English: US Female 2 (en_us_002)",value:"en_us_002"},{label:"English: US Male 1 (en_us_006)",value:"en_us_006"},{label:"English: US Male 2 (en_us_007)",value:"en_us_007"},{label:"English: US Male 3 (en_us_009)",value:"en_us_009"},{label:"English: US Male 4 (en_us_010)",value:"en_us_010"},{label:"European: French Male 1 (fr_001)",value:"fr_001"},{label:"European: French Male 2 (fr_002)",value:"fr_002"},{label:"European: German Female (de_001)",value:"de_001"},{label:"European: German Male (de_002)",value:"de_002"},{label:"European: Italian Male (it_male_m18)",value:"it_male_m18"},{label:"European: Spanish Male (es_002)",value:"es_002"},{label:"Fun: C3PO (en_us_c3po)",value:"en_us_c3po"},{label:"Fun: Chewbacca (en_us_chewbacca)",value:"en_us_chewbacca"},{label:"Fun: Ghost Face (en_us_ghostface)",value:"en_us_ghostface"},{label:"Fun: Ghost Host (en_male_ghosthost)",value:"en_male_ghosthost"},{label:"Fun: Madame Leota (en_female_madam_leota)",value:"en_female_madam_leota"},{label:"Fun: Pirate (en_male_pirate)",value:"en_male_pirate"},{label:"Fun: Rocket (en_us_rocket)",value:"en_us_rocket"},{label:"Fun: Stitch (en_us_stitch)",value:"en_us_stitch"},{label:"Fun: Stormtrooper (en_us_stormtrooper)",value:"en_us_stormtrooper"},{label:"Latin American: Portuguese BR Female 1 (br_001)",value:"br_001"},{label:"Latin American: Portuguese BR Female 2 (br_003)",value:"br_003"},{label:"Latin American: Portuguese BR Female 3 (br_004)",value:"br_004"},{label:"Latin American: Portuguese BR Male (br_005)",value:"br_005"},{label:"Latin American: Spanish MX Male (es_mx_002)",value:"es_mx_002"}],Ju=new Map,Vht=100*1024*1024;ext="VcNarratorDB",txt=2,Vd="voices",Jc="voices_meta"});function X7e(e){Z7e=e;for(let t of Tee)t(e)}function Pee(e){X7e({at:Date.now(),status:e.status,message:e.ok?`Success (${e.status})`:`HTTP ${e.status}`})}function _ee(e){let t=e instanceof Error?e.message:String(e);X7e({at:Date.now(),message:t?`Network error: ${t}`:"Network error"})}function nxt(){let[e,t]=X.useState(null),[o,n]=X.useState(!1),[i,s]=X.useState(Z7e),a=X.useCallback(async()=>{try{t(await z7e())}catch{t(null)}},[]);X.useEffect(()=>{a()},[a]),X.useEffect(()=>(Tee.add(s),()=>void Tee.delete(s)),[]);let l=X.useCallback(async()=>{n(!0);try{await G7e()}finally{n(!1)}await a()},[a]),c=m=>{let g=m/1048576;return`${g.toFixed(g>=10?0:1)} MB`},u=i.at?new Date(i.at).toLocaleTimeString():"\u2014",p=i.status?i.status>=200&&i.status<300?gi("api-status-success"):gi("api-status-error"):gi("api-status-muted");return r("div",{className:gi("troubleshooting")},r(Bt,{className:gi("divider")}),r(er.FormTitle,{tag:"h3",className:gi("title")},"Troubleshooting"),r("div",{className:gi("row")},r("div",{className:gi("buttons")},r(Me,{variant:"dangerPrimary",size:"small",onClick:l,disabled:o},"Clear cache"),r(Me,{variant:"secondary",size:"xs",onClick:a,disabled:o},"Refresh size")),r(er.FormText,{className:gi("cache-text")},"Cache: ",e?`${c(e.bytes)} \u2022 ${e.entries} entries`:"Unknown")),r(er.FormText,{className:gi("api-text")},r("span",null,"Last API call: "),r("span",{className:p},i.message),r("span",{className:gi("api-time")}," \u2022 ",u)))}async function ixt(){if(!j7e){j7e=!0,await new Promise(e=>setTimeout(e,3e3));for(let e of rxt){let t=`${ER}_${e}`;if(!Ju.has(t)){try{let o=await vee(t);if(o){Ju.set(t,URL.createObjectURL(o));continue}}catch{}try{let o=await fetch(`${Bee}/api/generate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:e,voice:ER,base64:!0})});if(Pee(o),o.ok){let n=atob((await o.text()).trim()),i=new Uint8Array(n.length);for(let a=0;a<n.length;a++)i[a]=n.charCodeAt(a);let s=new Blob([i],{type:"audio/mpeg"});Ju.set(t,URL.createObjectURL(s)),await See(t,s)}}catch(o){_ee(o)}await new Promise(o=>setTimeout(o,2e3))}}}}function W7e(){return kR||Vf.length>0||fm.length>0}function J7e(e){Dee!==e||!uE||(Iee?.pause(),uE())}async function Ree(){if(kR)return;if(Vf.length===1&&fm.length===1&&Vf[0].userId===fm[0].userId&&!Vf[0].interruptKey){let o=Vf.shift(),n=fm.shift(),i={text:`${o.text} ${n.text}`,userId:o.userId,interruptKey:n.interruptKey,useDefaultVoice:!1};Vf.push(i)}let e=Vf.shift()??fm.shift();if(!e)return;kR=!0,AS?.();try{await sxt(e.text,e.userId,e.interruptKey,e.useDefaultVoice)}catch(o){console.error("TTS Error:",o)}let t=e.interruptKey?800:500;setTimeout(()=>{kR=!1,AS?.(),Ree()},t)}function V7e(e,t,o,n="main",i){if(e.trim().length===0)return;let s=n==="state"?fm:Vf;if(!(s.length>=5)){if(o){for(let a=s.length-1;a>=0;a--)s[a].interruptKey===o&&s.splice(a,1);J7e(o)}s.push({text:e,userId:t,interruptKey:o,useDefaultVoice:i}),AS?.(),Ree()}}async function sxt(e,t,o,n){return new Promise(i=>{let s=()=>{uE===s&&(Iee=null,Dee=void 0,uE=null),i()},a=l=>{let c=new Audio(l);c.volume=nn.store.volume,c.playbackRate=nn.store.rate,c.onended=s,c.onerror=s,Iee=c,Dee=o,uE=s,c.play().catch(s)};(async()=>{let l=n?ER:L7e(t,{userVoiceMap:nn.store.userVoiceMap,customVoice:nn.store.customVoice,defaultVoice:ER}),c=`${l}_${e}`;if(Ju.has(c)){a(Ju.get(c));return}try{let u=await vee(c);if(u){let p=URL.createObjectURL(u);Ju.set(c,p),a(p);return}}catch(u){console.error("Error accessing IndexedDB:",u)}try{let u=await fetch(`${Bee}/api/generate`,{method:"POST",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"},referrerPolicy:"no-referrer",body:JSON.stringify({text:e,voice:l,base64:!0})});if(Pee(u),!u.ok){console.error(`TTS failed: ${u.status}`),i();return}let p=atob((await u.text()).trim()),m=new Uint8Array(p.length);for(let b=0;b<p.length;b++)m[b]=p.charCodeAt(b);let g=new Blob([m],{type:"audio/mpeg"}),y=URL.createObjectURL(g);Ju.set(c,y),See(c,g).catch(console.error),a(y)}catch(u){_ee(u),console.error("TTS Network Error:",u),i()}})().catch(s)})}function Nee(e){return{muted:!!(e.mute||e.selfMute),deaf:!!(e.deaf||e.selfDeaf),streaming:!!(e.selfStream||e.stream)}}function kee(e){let t=nn.store.stateChangeCooldownMs??0;if(t<=0)return!0;let o=Date.now(),n=K7e.get(e)??0;return o-n<t?!1:(K7e.set(e,o),!0)}function Eee(e,t,o,n){let i=mm(o,nn.store.latinOnly)||(n?"You":"Someone");return e==="stream"?{intro:i,action:t?"started streaming":"stopped streaming"}:{intro:i,action:e==="mute"?t?"myooted":"un-myooted":t?"deafind":"un-deafind"}}function Aee(e,t,o){let n=t.trim(),i=n&&Date.now()-(Y7e.get(e)??0)>axt;i&&Y7e.set(e,Date.now());let s=`${e}:state:action`;for(let a=fm.length-1;a>=0;a--)fm[a].interruptKey===s&&fm.splice(a,1);J7e(s),i&&Vf.push({text:n,userId:e,interruptKey:void 0,useDefaultVoice:!1}),fm.push({text:o,userId:e,interruptKey:s,useDefaultVoice:!1}),AS?.(),Ree()}async function Cee(e){if(!wee){wee=!0,Mee=e,AR=!1;for(let t=0;t<15;t++){let o=lo.getVoiceStatesForChannel?.(e);if(o){Qy.clear();for(let n of Object.values(o))n?.userId&&Qy.set(n.userId,Nee(n));AR=!0;break}await new Promise(n=>setTimeout(n,200))}wee=!1}}function lxt({channelId:e,oldChannelId:t},o){if(o&&e!==ES&&(t=ES,ES=e),e!==t){if(e)return[t?"move":"join",e];if(t)return["leave",t]}return["",""]}function cxt(e,t){let o=Object.assign({},nn.store,e),n=z.getCurrentUser(),i=hn.getGuildId();V7e(bee(o[t+"Message"],n.username,"general",n.globalName??n.username,(i?Lt.getNick(i,n.id):null)??n.username,o.latinOnly))}function uxt({modalProps:e,user:t}){let o="__default__",n=rt(()=>[{label:`Default (${nn.store.customVoice})`,value:o},...wR.map(p=>({label:p.label,value:p.value}))],[nn.store.customVoice]),[i,s]=X.useState(o),[a,l]=X.useState(!1);X.useEffect(()=>{let p=kS(nn.store.userVoiceMap??"");s(p.get(t.id)??o)},[t.id,nn.store.userVoiceMap]);let c=t.globalName??t.username,u=async p=>{l(!0);let m=i===o?nn.store.customVoice??"en_us_001":i;try{let g=await fetch(`${Bee}/api/generate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:p,voice:m,base64:!0})});if(Pee(g),g.ok){let y=atob((await g.text()).trim()),b=new Uint8Array(y.length);for(let A=0;A<y.length;A++)b[A]=y.charCodeAt(A);let v=new Blob([b],{type:"audio/mpeg"}),E=new Audio(URL.createObjectURL(v));E.volume=nn.store.volume??1,E.playbackRate=nn.store.rate??1,E.onended=()=>l(!1),E.onerror=()=>l(!1),await E.play();return}}catch(g){_ee(g),console.error("Preview error:",g)}l(!1)};return r(Pe,{...e,size:"medium"},r(je,null,r(Jo,{className:gi("modal-title")},"VC Narrator Voice"),r(Ut,{onClick:e.onClose})),r($e,null,r("section",{className:Z.bottom16},r(so,null,"Select voice for ",t.username),r(Ii,{options:n,value:n.find(p=>p.value===i),placeholder:"Select a voice",maxVisibleItems:6,closeOnSelect:!0,onChange:p=>s(p)}),r(er.FormText,{className:gi("preview-hint")},"Preview how this voice sounds with their name:"),r("div",{className:gi("preview-buttons")},r(Me,{variant:"secondary",size:"small",disabled:a,onClick:()=>u(mm(c,nn.store.latinOnly)||"Someone")},a?"Playing...":`"${mm(c,nn.store.latinOnly)||"Someone"}"`),r(Me,{variant:"secondary",size:"small",disabled:a,onClick:()=>u(`${mm(c,nn.store.latinOnly)||"Someone"} joined`)},"Joined"),r(Me,{variant:"secondary",size:"small",disabled:a,onClick:()=>u(`${mm(c,nn.store.latinOnly)||"Someone"} left`)},"Left")))),r(ht,null,r("div",{className:gi("modal-footer")},r(U,{color:U.Colors.PRIMARY,onClick:e.onClose},"Cancel"),r(U,{color:U.Colors.BRAND,onClick:()=>{i===o?nn.store.userVoiceMap=F7e(nn.store.userVoiceMap,t.id):nn.store.userVoiceMap=O7e(nn.store.userVoiceMap,t.id,i),e.onClose()}},"Save"))))}function dxt(e){Ee(t=>r(ee,null,r(uxt,{modalProps:t,user:e})))}var gi,Bee,Tee,Z7e,Vf,fm,kR,AS,Iee,Dee,uE,rxt,ER,j7e,ES,Mee,AR,wee,Qy,K7e,Y7e,axt,nn,Q7e,CR,eMe=x(()=>{"use strict";d();_7e();Q();Co();Ar();tt();ut();H();nt();co();at();Da();$();B();q7e();gi=de("vc-narrator-"),Bee="https://tiktok-tts-aio.exampleuser.workers.dev",Tee=new Set,Z7e={at:0,message:"No API calls yet"};Vf=[],fm=[],kR=!1,AS=null,Iee=null,uE=null,rxt=["myooted","un-myooted","deafind","un-deafind","started streaming","stopped streaming"],ER="en_us_001",j7e=!1;Mee=null,AR=!1,wee=!1,Qy=new Map,K7e=new Map,Y7e=new Map,axt=2e3;nn=R({customVoice:{type:4,description:"Narrator voice",options:wR,default:"en_us_001"},volume:{type:5,description:"Narrator Volume",default:1,markers:[0,.25,.5,.75,1],stickToMarkers:!1},rate:{type:5,description:"Narrator Speed",default:1,markers:[.1,.5,1,2,5,10],stickToMarkers:!1},sayOwnName:{description:"Say own name",type:3,default:!1},ignoreSelf:{description:"Ignore yourself for all events.",type:3,default:!1},latinOnly:{description:"Strip non latin characters from names before saying them",type:3,default:!1},joinMessage:{type:0,description:"Placeholders: {{USER}}, {{DISPLAY_NAME}}, {{NICKNAME}}, {{CHANNEL}}",default:"{{DISPLAY_NAME}} joined"},leaveMessage:{type:0,description:"Leave Message",default:"{{DISPLAY_NAME}} left"},moveMessage:{type:0,description:"Move Message",default:"{{DISPLAY_NAME}} moved to {{CHANNEL}}"},announceOthersMute:{description:"Announce when other users mute/unmute in your current VC",type:3,default:!1},announceOthersDeafen:{description:"Announce when other users deafen/undeafen in your current VC",type:3,default:!1},announceOthersStream:{description:"Announce when other users start/stop streaming in your current VC",type:3,default:!1},announceSelfStream:{description:"Announce when you start/stop streaming",type:3,default:!1},stateChangeCooldownMs:{description:"State-change announce cooldown (ms)",type:5,default:1500,markers:[0,250,500,1e3,1500,2500,5e3,1e4],stickToMarkers:!0},userVoiceMap:{type:0,description:"Per-user voice overrides (format: userId:voiceId,userId2:voiceId2). Right-click users to set.",default:""},stateChangeFilterMode:{type:4,description:"Filter which users trigger state-change announcements",options:[{label:"Off",value:"off"},{label:"Whitelist (only announce listed users)",value:"whitelist"},{label:"Blacklist (announce everyone except listed)",value:"blacklist"}],default:"off"},stateChangeFilterList:{type:0,description:"Comma-separated user IDs for whitelist/blacklist. Right-click users to add/remove.",default:""},troubleshooting:{type:6,component:()=>r(nxt,null)}});Q7e=(e,{user:t})=>{if(!t)return;let n=kS(nn.store.userVoiceMap).get(t.id),i=n?wR.find(m=>m.value===n)?.label??n:"Default",s=nn.store.stateChangeFilterMode??"off",l=lE(nn.store.stateChangeFilterList).has(t.id),c=s==="whitelist"||s==="blacklist",u=s==="whitelist"?l?"Remove from whitelist":"Add to whitelist":s==="blacklist"?l?"Remove from blacklist":"Add to blacklist":"State-change filter (enable in settings)",p=c?()=>{l?nn.store.stateChangeFilterList=H7e(nn.store.stateChangeFilterList,t.id):nn.store.stateChangeFilterList=$7e(nn.store.stateChangeFilterList,t.id)}:void 0;e.push(r(M.MenuItem,{id:"vc-narrator-submenu",label:"VC Narrator"},r(M.MenuItem,{key:"voice",id:"vc-narrator-voice",label:`Voice: ${i}`,action:()=>dxt(t)}),r(M.MenuItem,{key:"filter",id:"vc-narrator-state-filter",label:u,disabled:!c,action:p})))},CR=k({name:"VcNarratorCustom",description:"Announces when users join, leave, or move voice channels via narrator using TikTok TTS. Revamped and back from the dead.",authors:[w.Ven,w.Nyako,j.Loukios,j.examplegit],settings:nn,contextMenus:{"user-context":Q7e,"user-profile-actions":Q7e},start(){ixt()},flux:{async VOICE_STATE_UPDATES({voiceStates:e}){let t=z.getCurrentUser().id,o=hn.getGuildId(),i=lo.getVoiceStateForUser(t)?.channelId;if(!i){let u=st.getVoiceChannelId();u&&lo.getVoiceStatesForChannel?.(u)?.[t]?.channelId===u&&(i=u)}let s=nn.store.stateChangeFilterMode??"off",a=lE(nn.store.stateChangeFilterList),l=(u,p)=>{if(p||s==="off")return!0;let m=a.has(u);return s==="whitelist"?m:!m};if(i&&ne.getChannel(i)?.type===13)return;if(i?Mee!==i&&await Cee(i):(Mee=null,AR=!1,Qy.clear()),e.length>1&&e.some(u=>!("oldChannelId"in u))&&i){await Cee(i);return}for(let u of e){let{userId:p,channelId:m}=u,{oldChannelId:g}=u,y=p===t;if(!y&&!i||(y&&m!==ES&&(g=ES,ES=m??void 0),!y&&!(m===i||g===i)))continue;i&&(g!==i&&m===i?Qy.set(p,Nee(u)):g===i&&m!==i&&Qy.delete(p));let[v,E]=lxt({...u,oldChannelId:g},y);if(v){let F=nn.store[v+"Message"],J=y&&!nn.store.sayOwnName?"":z.getUser(p).username,G=J&&(z.getUser(p).globalName??J),te=J&&((o?Lt.getNick(o,p):null)??G),K=ne.getChannel(E)?.name??"channel";V7e(bee(F,J,K,G,te,nn.store.latinOnly),p),y&&(v==="join"||v==="move")&&E&&await Cee(E);continue}if(m!==i||!AR)continue;let A=Qy.get(p),C=Nee(u);if(Qy.set(p,C),!A||!l(p,y))continue;let I=y&&!nn.store.sayOwnName?"":z.getUser(p).username,N=I&&(z.getUser(p).globalName??I),O=I&&((o?Lt.getNick(o,p):null)??N)||N||I||(y?"You":"Someone");if(A.streaming!==C.streaming&&(y?nn.store.announceSelfStream:nn.store.announceOthersStream)){let F=`${p}:stream`;if(kee(F)){let J=Eee("stream",C.streaming,O,y);Aee(p,J.intro,J.action)}}if(!y&&nn.store.announceOthersDeafen&&A.deaf!==C.deaf){let F=`${p}:deaf`;if(kee(F)){let J=Eee("deaf",C.deaf,O,y);Aee(p,J.intro,J.action)}}else if(!y&&nn.store.announceOthersMute&&A.muted!==C.muted){let F=`${p}:mute`;if(kee(F)){let J=Eee("mute",C.muted,O,y);Aee(p,J.intro,J.action)}}}}},settingsAboutComponent({tempSettings:e}){let t=["mute","unmute","deafen","undeafen","streamStart","streamStop","join","leave","move"],[o,n]=X.useState(W7e());X.useEffect(()=>(AS=()=>n(W7e()),()=>{AS=null}),[]);let i=z.getUser(String(j.examplegit.id)),s=i?To.getUserAvatarURL(i,!1,64):null;return r(f,null,r("div",{className:gi("author-note")},s&&r("img",{src:s,alt:"Author avatar",className:gi("author-avatar")}),r("div",{className:gi("author-content")},r(er.FormText,{className:gi("author-title")},"Note from example-git"),r(er.FormText,{className:gi("author-text")},"Old TikTok-TTS API died, so I set up a new cloudflare worker. It's rate-limited and stricter than the old one by design \u2014 please don't abuse it so it can stay available for plugins like this."))),r("div",{className:gi("preview-section")},r(er.FormTitle,{tag:"h3",className:gi("preview-title")},"Preview Sounds ",o&&"(playing...)"),r(er.FormText,{className:gi("preview-subtitle")},"Uses your selected narrator voice"),r("div",{className:gi("preview-grid")},t.map(a=>r(Me,{key:a,variant:"secondary",size:"small",disabled:o,onClick:()=>cxt(e,a)},Nm([a]))))))}})});var tMe=x(()=>{});function pxt(){let[e,t]=L(Vc.getOutputVolume());return se(()=>{let o=()=>t(Vc.getOutputVolume());V.subscribe("AUDIO_SET_OUTPUT_VOLUME",o)}),r(f,null,Il.store.showOutputVolumeHeader&&r(re,null,"Output volume"),r(Tr,{maxValue:200,minValue:0,onValueRender:o=>`${o.toFixed(0)}%`,initialValue:e,asValueChanges:o=>{V.dispatch({type:"AUDIO_SET_OUTPUT_VOLUME",volume:o})}}))}function mxt(){let[e,t]=L(Vc.getInputVolume());return se(()=>{let o=()=>t(Vc.getInputVolume());V.subscribe("AUDIO_SET_INPUT_VOLUME",o)}),r(f,null,Il.store.showInputVolumeHeader&&r(re,null,"Input volume"),r(Tr,{maxValue:100,minValue:0,initialValue:e,asValueChanges:o=>{V.dispatch({type:"AUDIO_SET_INPUT_VOLUME",volume:o})}}))}function fxt(){let[e,t]=L(Vc.getOutputDeviceId());return se(()=>{let o=()=>t(Vc.getOutputDeviceId());V.subscribe("AUDIO_SET_OUTPUT_DEVICE",o)}),r(f,null,Il.store.showOutputDeviceHeader&&r(re,null,"Output device"),r(to,{options:Object.values(Vc.getOutputDevices()).map(o=>({value:o.id,label:Il.store.showOutputDeviceHeader?o.name:`\u{1F50A} ${o.name}`})),serialize:Nl,isSelected:o=>o===e,select:o=>{V.dispatch({type:"AUDIO_SET_OUTPUT_DEVICE",id:o})}}))}function gxt(){let[e,t]=L(Vc.getInputDeviceId());return se(()=>{let o=()=>t(Vc.getInputDeviceId());V.subscribe("AUDIO_SET_INPUT_DEVICE",o)}),r("div",{style:{marginTop:"10px"}},Il.store.showInputDeviceHeader&&r(re,null,"Input device"),r(to,{options:Object.values(Vc.getInputDevices()).map(o=>({value:o.id,label:Il.store.showInputDeviceHeader?o.name:`\u{1F3A4} ${o.name}`})),serialize:Nl,isSelected:o=>o===e,select:o=>{V.dispatch({type:"AUDIO_SET_INPUT_DEVICE",id:o})}}))}function hxt(){let[e,t]=L(Vc.getVideoDeviceId());return se(()=>{let o=()=>t(Vc.getVideoDeviceId());V.subscribe("MEDIA_ENGINE_SET_VIDEO_DEVICE",o)}),r("div",{style:{marginTop:"10px"}},Il.store.showVideoDeviceHeader&&r(re,null,"Camera"),r(to,{options:Object.values(Vc.getVideoDevices()).map(o=>({value:o.id,label:Il.store.showVideoDeviceHeader?o.name:`\u{1F4F7} ${o.name}`})),serialize:Nl,isSelected:o=>o===e,select:o=>{V.dispatch({type:"MEDIA_ENGINE_SET_VIDEO_DEVICE",id:o})}}))}function xxt(){let[e,t]=L(Il.store.uncollapseSettingsByDefault);return r("div",{style:{marginTop:"20px"}},r("div",{style:{marginBottom:"10px"}},r(Go,{className:"vc-panelsettings-underline-on-hover",style:{color:"var(--text-default)"},onClick:()=>{t(!e)}},e?"\u25BC Hide":"\u25BA Settings")),e&&r(f,null,Il.store.outputVolume&&r(pxt,null),Il.store.inputVolume&&r(mxt,null),Il.store.outputDevice&&r(fxt,null),Il.store.inputDevice&&r(gxt,null),Il.store.camera&&r(hxt,null)))}var Vc,Il,TR,oMe=x(()=>{"use strict";d();tMe();Q();Et();ut();ts();H();xt();$();fe();B();Vc=He("getOutputVolume"),Il=R({title1:{type:6,component:()=>r(Y,{weight:"bold",style:{fontSize:"1.27rem"}},"Appearance"),description:""},uncollapseSettingsByDefault:{type:3,default:!1,description:"Automatically uncollapse voice settings by default"},title2:{type:6,component:()=>r(Y,{weight:"bold",style:{fontSize:"1.27rem"}},"Settings to show"),description:""},outputVolume:{type:3,default:!0,description:"Show an output volume slider"},inputVolume:{type:3,default:!0,description:"Show an input volume slider"},outputDevice:{type:3,default:!0,description:"Show an output device selector"},inputDevice:{type:3,default:!0,description:"Show an input device selector"},camera:{type:3,default:!1,description:"Show a camera selector"},title3:{type:6,component:()=>r(Y,{weight:"bold",style:{fontSize:"1.27rem"}},"Headers to show"),description:""},showOutputVolumeHeader:{type:3,default:!0,description:"Show header above output volume slider"},showInputVolumeHeader:{type:3,default:!0,description:"Show header above input volume slider"},showOutputDeviceHeader:{type:3,default:!1,description:"Show header above output device selector"},showInputDeviceHeader:{type:3,default:!1,description:"Show header above input device selector"},showVideoDeviceHeader:{type:3,default:!1,description:"Show header above camera selector"}});TR=k({name:"VCPanelSettings",description:"Control voice settings right from the voice panel",authors:[w.nin0dev],settings:Il,renderVoiceSettings(){return r(xxt,null)},patches:[{find:"this.renderChannelButtons()",replacement:{match:/this.renderChannelButtons\(\)/,replace:"this.renderChannelButtons(), $self.renderVoiceSettings()"}}]})});function bxt(e){let t={...e.author};return delete t.email,delete t.phone,delete t.mfaEnabled,delete t.personalConnectionId,delete e.editHistory,delete e.deleted,delete e.firstEditTimestamp,{...e,author:t}}function IR(e,t,o){let n=Ee(i=>r(ee,null,r(Pe,{...i,size:"large"},r(je,null,r(Y,{size:"lg",weight:"semibold",style:{flexGrow:1}},"View Raw ",t),r(Ut,{onClick:()=>vo(n)})),r($e,null,r("div",{style:{padding:"16px 0"}},o&&r(f,null,r(re,null,"Content"),r(Hl,{content:e.content,lang:"markdown"}),r(Bt,{className:Z.bottom20})),r(re,null,t," Data"),r(Hl,{content:JSON.stringify(e,null,4),lang:"json"}))))))}function DR(e,t){return(o,n)=>{if(n.label===St("CHANNEL_ACTIONS_MENU_LABEL"))return;let i=n[e];if(!i)return;let s=o.at(-1);if(s?.key==="developer-actions"){let a=s.props;Array.isArray(a.children)||(a.children=[a.children]),o=a.children}o.push(r(M.MenuItem,{id:`c98-view-${e}-raw`,label:"View Raw",action:()=>t(i),icon:yxt}))}}var yxt,MR,nMe=x(()=>{"use strict";d();Et();_0();Ar();tt();ut();H();mt();co();at();$();B();yxt=()=>r("svg",{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",width:"18",height:"18"},r("path",{d:"M12.9297 3.25007C12.7343 3.05261 12.4154 3.05226 12.2196 3.24928L11.5746 3.89824C11.3811 4.09297 11.3808 4.40733 11.5739 4.60245L16.5685 9.64824C16.7614 9.84309 16.7614 10.1569 16.5685 10.3517L11.5739 15.3975C11.3808 15.5927 11.3811 15.907 11.5746 16.1017L12.2196 16.7507C12.4154 16.9477 12.7343 16.9474 12.9297 16.7499L19.2604 10.3517C19.4532 10.1568 19.4532 9.84314 19.2604 9.64832L12.9297 3.25007Z"}),r("path",{d:"M8.42616 4.60245C8.6193 4.40733 8.61898 4.09297 8.42545 3.89824L7.78047 3.24928C7.58466 3.05226 7.26578 3.05261 7.07041 3.25007L0.739669 9.64832C0.5469 9.84314 0.546901 10.1568 0.739669 10.3517L7.07041 16.7499C7.26578 16.9474 7.58465 16.9477 7.78047 16.7507L8.42545 16.1017C8.61898 15.907 8.6193 15.5927 8.42616 15.3975L3.43155 10.3517C3.23869 10.1569 3.23869 9.84309 3.43155 9.64824L8.42616 4.60245Z"}));MR=k({name:"ViewRawVariant",description:"Copy/View raw content of any message, channel, or guild, but show in the right click menu.",authors:[w.KingFish,w.Ven,w.rad,w.ImLvna,w.Kyuuhachi],contextMenus:{"guild-context":DR("guild",e=>IR(e,"Guild")),"channel-context":DR("channel",e=>IR(e,"Channel")),"user-context":DR("user",e=>IR(e,"User")),message:DR("message",e=>IR(bxt(e),"Message",!0))}})});var aa,Lee=x(()=>{"use strict";d();Q();$();aa=R({showChatButton:{type:3,default:!0,description:"Whether you want to display the chat button",restartNeeded:!0},showMuteButton:{type:3,default:!0,description:"Whether you want to display the mute button",restartNeeded:!0},showDeafenButton:{type:3,default:!0,description:"Whether you want to display the deafen button",restartNeeded:!0},muteSoundboard:{type:3,default:!0,description:"Toggles their soundboard upon clicking deafen button.",restartNeeded:!1},disableVideo:{type:3,default:!0,description:"Toggles their video upon clicking deafen button.",restartNeeded:!1},useServer:{type:3,description:"Use server mute/deafen instead of local when you have permission.",default:!1,restartNeeded:!1},serverSelf:{type:3,description:"Deafen / Mute yourself on the server when using mute/deafen.",default:!1,restartNeeded:!1},showButtonsSelf:{type:4,default:"display",description:"Whether you want to display buttons for your own user. Same functionality as other button(s) except it'll open DMs panel and mute/deafen for yourself upon clicking button(s).",restartNeeded:!0,options:[{label:"Display",value:"display"},{label:"Hide",value:"hide"},{label:"Disable",value:"disable"}]},whichNameToShow:{type:4,default:"both",description:"Choose whether to show nickname or username in tooltip.",restartNeeded:!1,options:[{label:"Global Name",value:"global"},{label:"Default Username",value:"username"},{label:"Both",value:"both"}]}},{useServer:{disabled(){return!this.store.showMuteButton&&!this.store.showDeafenButton}},serverSelf:{disabled(){return!this.store.useServer&&!this.store.showMuteButton&&!this.store.showDeafenButton}}})});var rMe=x(()=>{});function Oee({user:e,tooltip:t,icon:o,onClick:n}){let i=e.id===z.getCurrentUser().id;if(i&&aa.store.showButtonsSelf==="hide")return null;let s=i&&aa.store.showButtonsSelf==="disable";return r("div",{className:"voice-user-button-container"},r(Ue,{text:t,shouldShow:!s},({onMouseEnter:a,onMouseLeave:l})=>r(U,{size:U.Sizes.MIN,color:U.Colors.TRANSPARENT,look:U.Looks.FILLED,disabled:s,onClick:c=>{c.preventDefault(),c.stopPropagation(),n()},onMouseEnter:a,onMouseLeave:l},o)))}function Fee(e){let t=`@${e.username}`;return aa.store.whichNameToShow==="global"?e.globalName??t:aa.store.whichNameToShow==="nickname"?t:aa.store.whichNameToShow==="both"&&e.globalName?`${e.globalName} / ${t}`:t}function iMe(e){if(!aa.store.useServer)return{canMute:!1,canDeafen:!1};let t=lo.getVoiceStateForUser(e),o=t?.channelId?ne.getChannel(t.channelId):null;if(!o?.guild_id)return{canMute:!1,canDeafen:!1};let n=Kt.can(Nt.MUTE_MEMBERS,o),i=Kt.can(Nt.DEAFEN_MEMBERS,o);return{canMute:n,canDeafen:i}}function sMe(e){let t=lo.getVoiceStateForUser(e);return t?{isServerMuted:t.mute??!1,isServerDeafened:t.deaf??!1}:{isServerMuted:!1,isServerDeafened:!1}}function aMe({user:e}){let t=e.id===z.getCurrentUser().id;return r(Oee,{user:e,tooltip:t?"Navigate to DMs":`Open DMs with ${Fee(e)}`,icon:r(kxt,{size:"sm"}),onClick:()=>{if(t){ho.transitionTo("/users/@me/");return}let o=ne.getDMFromUserId(e.id);ho.transitionTo(`/channels/@me/${o}/`)}})}function lMe({user:e}){let t=e.id===z.getCurrentUser().id,{canMute:o}=iMe(e.id),{isServerMuted:n}=sMe(e.id),i=t&&aa.store.serverSelf,s=t&&On.isSelfMute()||On.isLocalMute(e.id),a=o?n:s,l=a?"var(--status-danger)":"var(--channels-default)";return r(Oee,{user:e,tooltip:`${a?o&&(i||!t)?"Unserver Mute":"Unmute":o&&(i||!t)?"Server Mute":"Mute"} ${t?"yourself":`${Fee(e)}`}`,icon:t?r(Ext,{muted:a,size:"sm",color:l}):r(Axt,{muted:a,size:"sm",color:l}),onClick:()=>{if(o){if(!i){Ir.toggleSelfMute();return}let p=lo.getVoiceStateForUser(e.id),m=p?.channelId?ne.getChannel(p.channelId):null;m?.guild_id&&JE.setServerMute(m.guild_id,e.id,!n)}else t?Ir.toggleSelfMute():Ir.toggleLocalMute(e.id)}})}function cMe({user:e}){let t=e.id===z.getCurrentUser().id,{canDeafen:o}=iMe(e.id),{isServerDeafened:n}=sMe(e.id),i=t&&aa.store.serverSelf,s=On.isLocalMute(e.id),a=vxt.isLocalSoundboardMuted(e.id),l=On.isLocalVideoDisabled(e.id),c=t&&On.isSelfDeaf()||s&&a&&l,u=o&&(i||!t)?n:c,p=u?"var(--status-danger)":"var(--channels-default)";return r(Oee,{user:e,tooltip:`${u?o&&(i||!t)?"Unserver Deafen":"Undeafen":o&&(i||!t)?"Server Deafen":"Deafen"} ${t?"yourself":`${Fee(e)}`}`,icon:t?r(Sxt,{muted:u,size:"sm",color:p}):r(wxt,{muted:u,size:"sm",color:p}),onClick:()=>{if(o){if(!i){Ir.toggleSelfDeaf();return}let y=lo.getVoiceStateForUser(e.id),b=y?.channelId?ne.getChannel(y.channelId):null;b?.guild_id&&JE.setServerDeaf(b.guild_id,e.id,!n)}else{if(t){Ir.toggleSelfDeaf();return}s?(Ir.toggleLocalMute(e.id),aa.store.muteSoundboard&&a&&Ir.toggleLocalSoundboardMute(e.id),aa.store.disableVideo&&l&&Ir.setDisableLocalVideo(e.id,"ENABLED","default")):(Ir.toggleLocalMute(e.id),aa.store.muteSoundboard&&!a&&Ir.toggleLocalSoundboardMute(e.id),aa.store.disableVideo&&!l&&Ir.setDisableLocalVideo(e.id,"DISABLED","default"))}}})}var vxt,Sxt,wxt,kxt,Ext,Axt,uMe=x(()=>{"use strict";d();rMe();fe();B();Lee();vxt=Ft("SoundboardStore"),Sxt=De("M22.7 2.7a1","1.4l20-20ZM17"),wxt=De("M21.76.83a5.02","M12.38"),kxt=De('.css,d:"M12 22a10'),Ext=De('d:"m2.7 22.7 20-20a1',"1.4ZM10.8"),Axt=De("M21.76.83a5.02","M12 2c.33 0")});var NR,dMe=x(()=>{"use strict";d();eo();H();$();Lee();uMe();NR=k({name:"VoiceButtons",description:"Quickly DM, mute, or deafen any user right from the voice-call panel.",authors:[j.nicola02nb,j.omaw],settings:aa,patches:[{find:".VOICE_PANEL}}",replacement:[{match:/\[\i\.\i\]:\i\}\),children:\[/,replace:"$&$self.renderButtons(arguments[0].user),"}]}],renderButtons(e){return e?r(Be,{flexDirection:"row",className:"voice-user-buttons"},aa.store.showChatButton&&r(aMe,{user:e}),aa.store.showMuteButton&&r(lMe,{user:e}),aa.store.showDeafenButton&&r(cMe,{user:e})):null}})});async function Cxt(e){let t=[];for(let o=0;o<e.length;o++){let i=await e[o];t.push(i),o%Uee.store.waitAfter===0&&await new Promise(s=>setTimeout(s,Uee.store.waitSeconds*1e3))}return t}function CS(e,t,o=!1){let n=lo.getVoiceStatesForChannel(e.id),i=z.getCurrentUser().id,s=[];Object.keys(n).forEach((a,l)=>{let c=n[a];(o||c.userId!==i)&&s.push(Ht.patch({url:`/guilds/${e.guild_id}/members/${c.userId}`,body:t}))}),Cxt(s).catch(a=>{console.error("VoiceChatUtilities failed to run",a)})}var Txt,Uee,BR,pMe=x(()=>{"use strict";d();Q();H();$();B();Txt=(e,{channel:t})=>{if(!t||t.type!==2&&t.type!==13||Object.keys(lo.getVoiceStatesForChannel(t.id)).length===0)return;let i=rl.getChannels(t.guild_id).VOCAL.map(({channel:s})=>s).filter(({id:s})=>s!==t.id);e.splice(-1,0,r(M.MenuItem,{label:"Voice Tools",key:"voice-tools",id:"voice-tools"},r(M.MenuItem,{key:"voice-tools-disconnect-all",id:"voice-tools-disconnect-all",label:"Disconnect all",action:()=>CS(t,{channel_id:null})}),r(M.MenuItem,{key:"voice-tools-mute-all",id:"voice-tools-mute-all",label:"Mute all",action:()=>CS(t,{mute:!0})}),r(M.MenuItem,{key:"voice-tools-unmute-all",id:"voice-tools-unmute-all",label:"Unmute all",action:()=>CS(t,{mute:!1})}),r(M.MenuItem,{key:"voice-tools-deafen-all",id:"voice-tools-deafen-all",label:"Deafen all",action:()=>CS(t,{deaf:!0})}),r(M.MenuItem,{key:"voice-tools-undeafen-all",id:"voice-tools-undeafen-all",label:"Undeafen all",action:()=>CS(t,{deaf:!1})}),r(M.MenuItem,{label:"Move all",key:"voice-tools-move-all",id:"voice-tools-move-all"},i.map(s=>r(M.MenuItem,{key:s.id,id:s.id,label:s.name,action:()=>CS(t,{channel_id:s.id},!0)})))))},Uee=R({waitAfter:{type:5,description:"Amount of API actions to perform before waiting (to avoid rate limits)",default:5,markers:uo(1,20)},waitSeconds:{type:5,description:"Time to wait between each action (in seconds)",default:2,markers:uo(1,10,.5)}}),BR=k({name:"VoiceChatUtilities",description:"This plugin allows you to perform multiple actions on an entire channel (move, mute, disconnect, etc.) (originally by dutake)",authors:[w.D3SOX],settings:Uee,contextMenus:{"channel-context":Txt}})});function Dxt(){let e=64;return ep.store.friendDirectMessagesSilent&&(e+=4096),e}function Mxt(e,t,o){if(!e)return null;let n=Ixt({channelId:e,content:t,embeds:[]});return n.flags=Dxt(),n.author=z.getUser(o),(Rt.hasPresent(e)?new Promise(s=>s()):Fn.fetchMessages({channelId:e})).then(()=>{V.dispatch({type:"MESSAGE_CREATE",channelId:e,message:n,optimistic:!0,sendMessageOptions:{},isPushNotification:!1})}),n}function Nxt(e){if(!Tt.isFriend(e))return!1;let t=ep.store.allowedFriends.split(",").join(" ").split(" ").filter(o=>o.length>0);return t.join(" ").length<1?!0:t.includes(e)}var Ixt,ep,$ee,PR,mMe=x(()=>{"use strict";d();Q();H();Da();$();fe();B();Ixt=vt('username:"Clyde"'),ep=R({friendDirectMessages:{type:3,description:"Recieve notifications in your friends' DMs when they join a voice channel",default:!0},friendDirectMessagesShowMembers:{type:3,description:"Show a list of other members in the voice channel when recieving a DM notification of your friend joining a voice channel",default:!0},friendDirectMessagesShowMemberCount:{type:3,description:"Show the count of other members in the voice channel when recieving a DM notification of your friend joining a voice channel",default:!1},friendDirectMessagesSelf:{type:3,description:"Recieve notifications in your friends' DMs even if you are in the same voice channel as them",default:!1},friendDirectMessagesSilent:{type:3,description:"Join messages in your friends DMs will be silent",default:!1},allowedFriends:{type:0,description:"Comma or space separated list of friends' user IDs you want to recieve join messages from",default:""},ignoreBlockedUsers:{type:3,description:"Do not send messages about blocked users joining/leaving/moving voice channels",default:!0}});PR=k({name:"VoiceJoinMessages",description:"Recieve client-side ephemeral messages when your friends join voice channels",authors:[w.Sqaaakoi,w.thororen],settings:ep,flux:{VOICE_STATE_UPDATES({voiceStates:e}){let t=z.getCurrentUser().id;for(let o of e){let{userId:n,channelId:i}=o,{oldChannelId:s}=o;if(n===t&&i!==$ee&&(s=$ee,$ee=i),ep.store.ignoreBlockedUsers&&Tt.isBlocked(n)||s===i)return;if(ep.store.friendDirectMessages&&!s&&i&&n!==t&&Nxt(n)){let a=st.getVoiceChannelId()===i,l="";if(ep.store.friendDirectMessagesShowMembers||ep.store.friendDirectMessagesShowMemberCount){let p=Object.values(e).filter(g=>g.channelId===i).map(g=>z.getUser(g.userId)).filter(g=>g!=null).filter(g=>g.id!==n),m=p.length;m<=0?l+=", nobody else is in the voice channel":ep.store.friendDirectMessagesShowMemberCount&&(l+=` with ${m} other member${m===1?"s":""}`),ep.store.friendDirectMessagesShowMembers&&m>0&&(l+=ep.store.friendDirectMessagesShowMemberCount?", ":" with ",l+=pO(p.map(g=>`<@${g.id}>`)))}let c=ne.getDMFromUserId(n);c&&(!a||ep.store.friendDirectMessagesSelf)&&Mxt(c,`Joined voice channel <#${i}>${l}`,n)}}}}})});var Hee,e0,dE,_R,fMe=x(()=>{"use strict";d();vn();Q();H();$();B();Hee="VCLastVoiceChannel",e0="VCLastVoiceChannelSession",dE=R({rejoinDelay:{type:5,description:"Set Delay before rejoining voice channel.",markers:uo(1,10,1),default:2,stickToMarkers:!0},rejoinTimeout:{type:5,description:"Don't attempt to rejoin after this many seconds have passed since disconnecting.",markers:uo(5,120,5),default:30,stickToMarkers:!0},preventReconnectIfCallEnded:{type:4,description:"Do not reconnect if the call has ended or the voice channel is empty or does not exist.",options:[{label:"None",value:"none",default:!1},{label:"DMs only",value:"dms",default:!1},{label:"Servers only",value:"servers",default:!1},{label:"DMs and Servers",value:"both",default:!0}]},applyOnlyToDms:{type:3,description:"Only apply to DMs.",default:!1}}),_R=k({name:"VoiceRejoin",description:"Rejoins DM/Server call automatically when restarting Discord.",authors:[j.omaw],settings:dE,flux:{VOICE_STATE_UPDATES({voiceStates:e}){let t=z.getCurrentUser().id,o=e.find(n=>n.userId===t);if(o)if(o.channelId){let n={guildId:o.guildId??null,channelId:o.channelId,timestamp:Date.now()};Gt(Hee,n),Gt(e0,!0)}else Gt(e0,!1)},async CONNECTION_OPEN(){if(await zt(e0)===!1){Ta(Hee);return}setTimeout(async()=>{let t=await zt(Hee);if(!t?.channelId)return;let o=ne.getChannel(t.channelId),n=o.isDM()||o.isGroupDM()||o.isMultiUserDM(),i=z.getCurrentUser().id,s=lo.getVoiceStateForUser(i),a=dE.store.preventReconnectIfCallEnded,l=dE.store.rejoinTimeout*1e3;if(t.timestamp&&Date.now()-t.timestamp>l){Gt(e0,!1);return}if(dE.store.applyOnlyToDms&&!n){Gt(e0,!1);return}if(a!=="none"){if(!o){Gt(e0,!1);return}if(a==="both"||a==="dms"&&n||a==="servers"&&!n){let u=lo.getVoiceStatesForChannel(t.channelId);if(Object.values(u).filter(m=>m.userId!==z.getCurrentUser().id).length===0){Gt(e0,!1);return}}}if(s?.channelId){Gt(e0,!1);return}V.dispatch({type:"VOICE_CHANNEL_SELECT",guildId:t.guildId,channelId:t.channelId}),Gt(e0,!0)},dE.store.rejoinDelay*1e3)}}})});var gMe=x(()=>{});var lh,RR=x(()=>{"use strict";d();Is();B();lh=_n(()=>{let e=new Map,t=new Map,o;class n extends is.PersistedStore{static persistKey="WallpaperFreeStore";initialize(a){if(a){t.clear(),e.clear();for(let[l,c]of a.channelMap)e.set(l,c);for(let[l,c]of a.guildMap)t.set(l,c);o=a.globalDefault}}getState(){return{guildMap:Array.from(t),channelMap:Array.from(e),globalDefault:o}}getUrl(a){return e.get(a.id)??t.get(a.guild_id)??o}getForChannel(a){return e.get(a)}getForGuild(a){return t.get(a)}get globalDefault(){return o}}let i=new n(V,{VC_WALLPAPER_FREE_CHANGE({guildId:s,channelId:a,url:l}){s&&t.set(s,l),a&&e.set(a,l),i.emitChange()},VC_WALLPAPER_FREE_CHANGE_GLOBAL({url:s}){o=s,i.emitChange()},VC_WALLPAPER_FREE_RESET(){e.clear(),t.clear(),o=void 0,i.emitChange()}});return i})});function LR({props:e,onSelect:t,initialUrl:o}){let[n,i]=L(o??"");return r(Pe,{...e,size:"small"},r(je,null,r(Y,{size:"lg",style:{marginBottom:8}},"Set wallpaper")),r($e,null,r("div",{style:{display:"flex",flexDirection:"column",gap:16}},r(Y,null,"The image url"),r(qe,{value:n,onChange:s=>{i(s)},autoFocus:!0}),n&&r("img",{alt:"",src:n,style:{display:"block",width:"100%",height:"auto",objectFit:"cover",borderRadius:8}}),r("div",{style:{display:"flex",justifyContent:"flex-end",gap:8}},r(U,{onClick:e.onClose},"Cancel"),r(U,{color:U.Colors.BRAND,onClick:()=>{t(n),e.onClose()},disabled:!n},"Apply")))))}var zee=x(()=>{"use strict";d();Et();at();B()});var Gee,hMe,OR,xMe,yMe=x(()=>{"use strict";d();RR();at();B();zee();Gee=(e,t)=>{let o=i=>{V.dispatch({type:"VC_WALLPAPER_FREE_CHANGE",channelId:e,guildId:t,url:i})},n=e?lh.getForChannel(e):t?lh.getForGuild(t):void 0;return r(M.MenuItem,{label:"WallpaperFree",key:"vc-wpfree-menu",id:"vc-wpfree-menu"},r(M.MenuItem,{label:"Set Wallpaper",id:"vc-wpfree-set-wallpaper",action:()=>Ee(i=>r(LR,{props:i,onSelect:o,initialUrl:n}))}),r(M.MenuSeparator,null),r(M.MenuItem,{label:"Remove Wallpaper",id:"vc-wpfree-remove-wallpaper",color:"danger",disabled:!n,action:()=>o(void 0)}))},hMe=(e,t)=>{if(!t.user)return;let o=ne.getDMFromUserId(t.user.id);e.push(Gee(o))},OR=(e,t)=>{t.channel&&e.push(Gee(t.channel.id))},xMe=(e,t)=>{t.guild&&e.push(Gee(void 0,t.guild.id))}});function bMe(){let e=t=>{V.dispatch({type:"VC_WALLPAPER_FREE_CHANGE_GLOBAL",url:t})};return r(f,null,r(U,{onClick:()=>{Ee(t=>r(LR,{props:t,onSelect:e,initialUrl:lh.globalDefault}))}},"Set a global wallpaper"),r(U,{color:U.Colors.RED,onClick:()=>e(void 0)},"Remove global default wallpaper"),r(U,{color:U.Colors.RED,onClick:()=>{V.dispatch({type:"VC_WALLPAPER_FREE_RESET"})}},"Reset wallpaper data"))}function vMe(){return r("div",{style:{userSelect:"text"}},!1,Jt.parse(Bm(`
    .vc-wpfree-wp-container {
        transform: scaleX(-1); /* flip it horizontally */
        filter: blur(4px); /* apply a blur */
        opacity: 0.7; /* self-explanatory */
    }

    /* If you don't like embeds being transparent */

    [class*=embedFull__] {
        background: var(--background-surface-high) !important;
    }

    /* the same for codeblocks (or use ShikiCodeblocks) */

    .hljs {
        background-color: var(--background-base-lowest) !important;
    }`,"css")),r(U,{onClick:()=>VencordNative.quickCss.openEditor()},"Open QuickCSS"))}var SMe=x(()=>{"use strict";d();Et();RR();at();Da();B();zee()});var Bxt,FR,wMe=x(()=>{"use strict";d();gMe();Q();H();$();B();yMe();SMe();RR();Bxt=R({globalDefault:{description:"Set a global default wallpaper for all channels.",type:6,component:bMe},stylingTips:{description:"",type:6,component:vMe}}),FR=k({name:"WallpaperFree",authors:[w.Joona],description:"Recreation of the old DM wallpaper experiment; Set a background image for any channel, user or server.",patches:[{find:".handleSendMessage,onResize",group:!0,replacement:[{match:/return.{1,150},(?=keyboardModeEnabled)/,replace:"const vcWallpaperFreeUrl=$self.WallpaperState(arguments[0].channel);$&vcWallpaperFreeUrl,"},{match:/}\)]}\)](?=.{1,30}messages-)/,replace:"$&.toSpliced(0,0,$self.Wallpaper({url:this.props.vcWallpaperFreeUrl}))"}]}],settings:Bxt,contextMenus:{"user-context":hMe,"channel-context":OR,"thread-context":OR,"gdm-context":OR,"guild-context":xMe},Wallpaper({url:e}){return e?r("div",{className:"vc-wpfree-wp-container",style:{backgroundImage:`url(${e})`}}):null},WallpaperState(e){return Je([lh],()=>lh.getUrl(e))}})});var pE,kMe=x(()=>{"use strict";d();pE=class{buffers;constructor(){this.buffers=[]}addTextFile(t,o,n={}){this.addFile(t,new TextEncoder().encode(o),n)}addFile(t,o,{mtime:n=0}={}){this.buffers.push(this.header([[100,t.toString()],[8,420],[8,512],[8,512],[12,o.length],[12,n],[8,null],[1,"0"],[100,""],[255,""]])),this.buffers.push(o.buffer),this.buffers.push(new ArrayBuffer(-o.length&511))}header(t){let o=new ArrayBuffer(512),n=new Uint8Array(o),i=0,s=null,a=0;for(let[l,c]of t){let u;if(c===null)s=a,u=" ".repeat(l);else if(typeof c=="string")u=c;else if(typeof c=="number")u=c.toString(8).padStart(l-1,"0");else throw new Error("invalid value",c);if(u.length>l)throw new Error(`${u} is longer than ${l} characters`);Array.from(u).forEach((p,m)=>i+=n[a+m]=p.charCodeAt(0)),a+=l}return Array.from("\0".repeat(8)).forEach((l,c)=>n[s+c]=l.charCodeAt(0)),Array.from(i.toString(8).padStart(7,"0")).forEach((l,c)=>n[s+c]=l.charCodeAt(0)),o}save(t){let o=document.createElement("a");o.href=URL.createObjectURL(new Blob(this.buffers,{type:"application/x-tar"})),o.download=t,o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(o.href)}}});async function EMe(e,t){let o=Object.getOwnPropertyDescriptor(Function.prototype,"m");Object.defineProperty(Function.prototype,"m",{get(){throw"get require.m"},set(){throw"set require.m"},enumerable:!0,configurable:!0});try{return await t()}finally{Object.defineProperty(Function.prototype,"m",o)}}function qee(e){let{o:t}=e;try{e.o=o=>{throw o},e.f.j()}catch(o){return o}finally{e.o=t}throw new Error("getLoadedChunks failed")}function jee(e){let t=Symbol("getChunkPaths");try{Object.defineProperty(Object.prototype,t,{get(){throw this},set(){},configurable:!0}),e.u(t)}catch(o){return o}finally{delete Object.prototype[t]}throw new Error("getChunkPaths failed")}async function AMe(e,t=()=>{}){let o=jee(e),n=qee(e),i=Object.keys(o).filter(s=>n[s]!==0);await Promise.all(i.map(async s=>{try{await e.e(s)}catch{}t(s)}))}var CMe=x(()=>{"use strict";d()});async function _xt(e){let t=new pE,{buildNumber:o,builtAt:n}=TMe(),i=n.getTime()/1e3|0,s=e?`equicord-${o}`:`discord-${o}`;for(let[a,l]of Object.entries(Bo.m)){let c=Function.toString.call(l),u=l.toString();e&&c!==u&&t.addTextFile(`${s}/${a}.v.js`,`webpack[${JSON.stringify(a)}] = ${c}
`,{mtime:i}),t.addTextFile(`${s}/${a}.js`,`webpack[${JSON.stringify(a)}] = ${u}
`,{mtime:i})}t.save(`${s}.tar`)}function Rxt({modalProps:e,close:t}){let o=Bo,{buildNumber:n,builtAt:i}=TMe(),[,s]=L({}),[a,l]=L(!1),c=jee(o),u=Object.entries(qee(o)).filter(([E])=>o.o(c,E)).map(([,E])=>E),p=u.length,m=u.filter(E=>E===0||E===void 0).length,g=u.filter(E=>E===void 0).length,y=Object.keys(c).length,{patched:b}=UR.use(["patched"]),v="webpackChunkdiscord_app";return r(Pe,{...e},r(je,null,r(Jo,null,"Webpack Tarball"),r(Y,{size:"md"},r(Di,{timestamp:new Date(i),isInline:!1},"Build number ",n)),r(Ut,{onClick:t})),r($e,null,r("div",{style:{marginTop:"8px",marginBottom:"24px"}},r(re,null,"Lazy chunks"),r(Be,{alignItems:"center"},r(Y,{size:"md",style:{flexGrow:1}},m,"/",y,g?` (${g} errors)`:null),r(U,{disabled:p===y||a,onClick:async()=>{l(!0),await EMe(window[v],async()=>{await AMe(o,s)})}},m===y?"Loaded":p===y?"Loading":"Load all"))),r(fn,{value:b,onChange:E=>UR.store.patched=E,title:UR.def.patched.description,hideBorder:!0})),r(ht,null,r(U,{onClick:()=>{_xt(b),t()}},"Create")))}var UR,$R,TMe,IMe=x(()=>{"use strict";d();Q();Et();eo();Qs();ut();H();Is();at();$();fe();B();kMe();CMe();UR=R({patched:{type:3,default:!0,description:"Include patched modules",restartNeeded:!0}}),$R=k({name:"WebpackTarball",description:"Converts Discord's webpack sources into a tarball.",authors:[w.Kyuuhachi],settings:UR,toolboxActions:{"Webpack Tarball"(){let e=Ee(t=>r(Rxt,{modalProps:t,close:()=>vo(e)}))}}}),TMe=sd(()=>{try{let e=Ch("_getMetricWithDefaults")._flush.toString(),[,t,o]=e.match(/\{built_at:"(\d+)",build_number:"(\d+)"\}/);return{buildNumber:o,builtAt:new Date(Number(t))}}catch(e){return console.error("failed to get build number:",e),{buildNumber:"unknown",builtAt:new Date}}})});var DMe=x(()=>{});function MMe(e){return"uniqueName"in e?mc.some(t=>t.name===e.uniqueName):mc.some(t=>t.name===e.name)}function mE(e){return mc.some(t=>t.name===e.name)}async function Lxt(e){let o=(await Promise.all(e.map(async n=>{if(!mE(n)){let i;n.surrogates||(i=Hi.getCustomEmojiById(n.id));let s={type:"emoji",id:n.id,name:n.name,surrogates:n.surrogates};return i&&i.guildId&&(s.url=`https://cdn.discordapp.com/emojis/${i.id}.${i.animated?"gif":"png"}`,s.guildId=i.guildId,s.animated=i.animated),s}return null}))).filter(n=>n!==null);await Oe.set(ch,[...mc,...o]),pc.store.disableToasts||D.show({message:`Added ${o.length} emojis to the list, ${e.length-o.length} already in the list`,type:D.Type.SUCCESS,id:D.genId(),options:{duration:3e3,position:D.Position.BOTTOM}}),mc=await tp()}async function Oxt(e){let t=e.filter(o=>mE(o));await Oe.set(ch,mc.filter(o=>!t.some(n=>n.name===o.name))),pc.store.disableToasts||D.show({message:`Removed ${t.length} emojis from the list`,type:D.Type.SUCCESS,id:D.genId(),options:{duration:3e3,position:D.Position.BOTTOM}}),mc=await tp()}async function Fxt(e){if(mE(e))pc.store.disableToasts||D.show({message:`"${e.name}" is already in the list`,type:D.Type.FAILURE,id:D.genId(),options:{duration:3e3,position:D.Position.BOTTOM}});else{let t;e.surrogates||(t=Hi.getCustomEmojiById(e.id));let o={type:"emoji",id:e.id,name:e.name,surrogates:e.surrogates};t&&t.guildId&&(o.url=`https://cdn.discordapp.com/emojis/${t.id}.${t.animated?"gif":"png"}`,o.guildId=t.guildId,o.animated=t.animated),await Oe.set(ch,[...mc,{...o}]),pc.store.disableToasts||D.show({message:`Added "${e.name}" to the list`,type:D.Type.SUCCESS,id:D.genId(),options:{duration:3e3,position:D.Position.BOTTOM}})}mc=await tp()}async function Wee(e){mE(e)?(await Oe.set(ch,mc.filter(t=>t.name!==e.name)),pc.store.disableToasts||D.show({message:`Removed "${e.name}" from the list`,type:D.Type.SUCCESS,id:D.genId(),options:{duration:3e3,position:D.Position.BOTTOM}})):pc.store.disableToasts||D.show({message:`"${e.name}" is not in the list`,type:D.Type.FAILURE,id:D.genId(),options:{duration:3e3,position:D.Position.BOTTOM}}),mc=await tp()}function $xt(e){let t=mE(e)?"Remove":"Add";return r(f,null,r(M.MenuSeparator,null),r(M.MenuItem,{id:`white-list-emoji-${t}`,key:`white-list-emoji-${t}`,label:`${t} to Whitelist`,action:()=>{t==="Add"?Fxt(e):Wee(e)}}))}async function Gxt(){let e=await tp();return JSON.stringify({emojis:e},null,4)}var ch,mc,tp,NMe,BMe,Uxt,Hxt,zxt,qxt,jxt,Wxt,pc,HR,PMe=x(()=>{"use strict";d();DMe();Un();dr();Q();H();$();B();ch="whitelisted-emojis",mc=[],tp=async()=>await Oe.get(ch)??[];NMe=(e,{target:t})=>{let{dataset:o}=t;if(!o||o.type!=="emoji")return;let n=o;"name"in n&&e.push($xt(n))},BMe=(e,{guild:t})=>{e.push(Uxt(t))},Uxt=e=>r(M.MenuGroup,null,r(M.MenuItem,{id:"add-white-list-guild-emojis",key:"add-white-list-guild-emojis",label:"Add All Guild Emojis",action:()=>{let{id:t,name:o}=e,n=Hi.getGuildEmoji(t);Lxt(n.map(i=>({type:"emoji",id:i.id,name:i.name})))}}),r(M.MenuItem,{id:"remove-white-list-guild-emojis",key:"remove-white-list-guild-emojis",label:"Remove All Guild Emojis",action:()=>{let{id:t,name:o}=e,n=Hi.getGuildEmoji(t);Oxt(n.map(i=>({type:"emoji",id:i.id,name:i.name})))}}));Hxt=()=>{let[e,t]=L([]),[o,n]=L({});se(()=>{(async()=>{let u=await tp();t(u)})()},[]);let i=async c=>{await Wee(c),t(await tp())},s=async c=>{let u=e.filter(p=>p.guildId===c||c==="default"&&!p.guildId);for(let p of u)await Wee(p);t(await tp())},a=c=>{n(u=>({...u,[c]:!u[c]}))},l=e.reduce((c,u)=>{let p=u.guildId||"default";return c[p]||(c[p]=[]),c[p].push(u),c},{});return r("div",{className:"emoji-container"},Object.entries(l).map(([c,u])=>r("div",{key:c,className:"guild-section"},r("div",{className:"guild-header"},r("h3",{className:"guild-name",onClick:()=>a(c)},c==="default"?"Default Emojis":`${ct.getGuild(c)?.name||`Guild ${c}`} Emojis`),r(U,{className:"remove-all-button",size:"small",look:"outlined",color:"red",onClick:()=>s(c)},"Remove All")),!o[c]&&r("div",{className:"guild-emojis"},u.map(p=>r("div",{key:p.id||p.name,className:"emoji-item"},r("span",{className:"emoji-name"},p.name),p.surrogates?r("span",{className:"emoji-surrogate"},p.surrogates):r("img",{className:"emoji-image",src:`https://cdn.discordapp.com/emojis/${p.id}.${p.animated?"gif":"png"}`,alt:p.name}),r(U,{className:"remove-button",size:"small",look:"outlined",color:"red",onClick:()=>i(p)},"Remove")))))),e.length===0&&r("span",{className:"no-emoji-message"},"No emojis in the whitelist."))},zxt=async()=>{let e="whitelisted-emojis.json",t=await Gxt(),o=new TextEncoder().encode(t);{let n=new File([o],e,{type:"application/json"}),i=document.createElement("a");i.href=URL.createObjectURL(n),i.download=e,document.body.appendChild(i),i.click(),setImmediate(()=>{URL.revokeObjectURL(i.href),document.body.removeChild(i)})}pc.store.disableToasts||D.show({message:"Successfully exported emojis",type:D.Type.SUCCESS,id:D.genId(),options:{duration:3e3,position:D.Position.BOTTOM}})};qxt=async()=>{{let e=document.createElement("input");e.type="file",e.style.display="none",e.accept="application/json",e.onchange=async()=>{let t=e.files?.[0];if(!t)return;let o=new FileReader;o.onload=async()=>{let n=o.result;await jxt(n)},o.readAsText(t)},document.body.appendChild(e),e.click(),setImmediate(()=>{document.body.removeChild(e)})}},jxt=async e=>{try{let t=JSON.parse(e);t&&typeof t=="object"&&Array.isArray(t.emojis)?(await Oe.set(ch,t.emojis),mc=await tp(),pc.store.disableToasts||D.show({message:"Successfully imported emojis",type:D.Type.SUCCESS,id:D.genId(),options:{duration:3e3,position:D.Position.BOTTOM}})):pc.store.disableToasts||D.show({message:"Invalid JSON data",type:D.Type.FAILURE,id:D.genId(),options:{duration:3e3,position:D.Position.BOTTOM}})}catch(t){pc.store.disableToasts||D.show({message:`Failed to import emojis: ${t}`,type:D.Type.FAILURE,id:D.genId(),options:{duration:3e3,position:D.Position.BOTTOM}})}},Wxt=async()=>{await Oe.set(ch,[]),mc=await tp(),pc.store.disableToasts||D.show({message:"Reset emojis",type:D.Type.SUCCESS,id:D.genId(),options:{duration:3e3,position:D.Position.BOTTOM}})},pc=R({defaultEmojis:{type:3,description:"Hide default emojis",default:!0},serverEmojis:{type:3,description:"Hide server emojis",default:!0},disableToasts:{type:3,description:"Disable toasts",default:!1},whiteListedEmojis:{type:6,description:"Whitelisted Emojis",component:Hxt},exportEmojis:{type:6,description:"Export Emojis",component:()=>r(U,{onClick:zxt},"Export Emojis")},importEmojis:{type:6,description:"Import Emojis",component:()=>r(U,{onClick:()=>go.show({title:"Are you sure?",body:"This will overwrite your current whitelist.",confirmText:"Import",confirmColor:U.Colors.RED,cancelText:"Cancel",onConfirm:async()=>{await Oe.set(ch,[]),await qxt()}})},"Import Emojis")},resetEmojis:{type:6,description:"Reset Emojis",component:()=>r(U,{onClick:()=>go.show({title:"Are you sure?",body:"This will remove all emojis from your whitelist.",confirmText:"Reset",confirmColor:U.Colors.RED,cancelText:"Cancel",onConfirm:Wxt})},"Reset Emojis")}}),HR=k({name:"WhitelistedEmojis",description:"Adds the ability to disable all message emojis except for a whitelisted set.",authors:[j.creations],patches:[{find:"#{intl::EMOJI_MATCHING}",replacement:{match:/renderResults\((\i)\){/,replace:"$&$1.results.emojis=$self.filterEmojis($1);if($1.results.emojis.length===0)return;"}}],settings:pc,async start(){mc=await tp(),Ll("expression-picker",NMe),Ll("guild-context",BMe)},stop(){bu("expression-picker",NMe),bu("guild-context",BMe)},filterEmojis:e=>{let{emojis:t}=e.results,o=t;return pc.store.defaultEmojis&&(o=o.filter(n=>!("uniqueName"in n)||MMe(n))),pc.store.serverEmojis&&(o=o.filter(n=>"uniqueName"in n||MMe(n))),o}})});function Kxt(e){return Tt.getNickname(e.id)||e.globalName||e.username}function _Me({userIds:e,guildId:t}){let o=0,n=e.map(i=>z.getUser(i)).filter(i=>i?!0:(o+=1,!1));return r("div",{className:fE("content")},e.length?r(f,null,r(re,null,St("SPECTATORS",{numViewers:e.length})),r(Be,{flexDirection:"column",style:{gap:6}},n.map(i=>r(Be,{key:i.id,flexDirection:"row",style:{gap:6,alignContent:"center"},className:fE("user")},r("img",{src:i.getAvatarURL(t),style:{borderRadius:8,width:16,height:16},alt:""}),Kxt(i))),o>0&&r("span",{className:fE("more_users")},`+${St("NUM_USERS",{num:o})}`))):r("span",{className:fE("no_viewers")},"No spectators"))}var fE,Yxt,TS,Qxt,Kee,zR,RMe=x(()=>{"use strict";d();Q();tt();eo();ut();wt();H();nt();mt();co();xt();$();fe();B();fE=de("whosWatching-");Yxt=R({showPanel:{description:"Show spectators under screenshare panel",type:3,default:!0,restartNeeded:!0}});TS=Ft("ApplicationStreamingStore"),Qxt=De("defaultRenderUser","showDefaultAvatarsForNullUsers"),Kee=et("moreUsers","emptyUser","avatarContainer","clickableAvatar","avatar"),zR=k({name:"WhosWatching",description:"Hover over the screenshare icon to view what users are watching your stream",authors:[j.Fres],settings:Yxt,patches:[{find:".Masks.STATUS_SCREENSHARE,width:32",replacement:{match:/jsx\)\((\i\.\i),{mask:/,replace:"jsx)($self.component({OriginalComponent:$1}),{mask:"}},{find:"this.renderEmbeddedActivity()",replacement:{match:/"div"(?=.{0,50}this.renderActions)/,replace:"$self.WrapperComponent"}}],WrapperComponent:ee.wrap(e=>{let t=Je([TS],()=>TS.getCurrentUserActiveStream());if(!t)return r("div",{...e},e.children);let o=TS.getViewerIds(t),n=0,i=o.map(a=>z.getUser(a)).filter(a=>a?!0:(n+=1,!1));function s(a,l){let c=i.slice(l-1);return r(Ue,{text:r(_Me,{userIds:o,guildId:t.guildId})},({onMouseEnter:u,onMouseLeave:p})=>r("div",{className:Kee.moreUsers,onMouseEnter:u,onMouseLeave:p},"+",c.length+n))}return r(f,null,r("div",{...e},e.children),r("div",{className:me(fE("spectators_panel"),Z.top8)},r(so,{style:{marginTop:8,marginBottom:0,textTransform:"uppercase"}},St("SPECTATORS",{numViewers:o.length})),i.length?r(f,null,r(Qxt,{users:i,count:o.length,renderIcon:!1,max:12,showDefaultAvatarsForNullUsers:!0,renderMoreUsers:s,renderUser:(a,l)=>r(en,{key:l,className:Kee.clickableAvatar,onClick:()=>or(a.id)},r("img",{className:Kee.avatar,src:a.getAvatarURL(void 0,80,!0),alt:a.username,title:a.username}))})):r(W,null,"No spectators")))}),component:function({OriginalComponent:e}){return ee.wrap(t=>{let o=Je([TS],()=>TS.getCurrentUserActiveStream());if(!o)return null;let n=TS.getViewerIds(o);return r(Ue,{text:r(_Me,{userIds:n,guildId:o.guildId})},({onMouseEnter:i,onMouseLeave:s})=>r("div",{onMouseEnter:i,onMouseLeave:s},r(e,{...t})))})}})});function gE({wiggle:e,children:t}){return t.split("").map((o,n)=>r("span",{key:n},r("span",{className:`wiggle-inner wiggle-inner-${e}`,style:{animationDelay:`${n*25%1200}ms`}},o)))}var LMe=x(()=>{"use strict";d()});var FMe,GR,OMe,hE,UMe,qR,$Me=x(()=>{"use strict";d();Q();Et();H();$();LMe();FMe=R({intensity:{type:5,description:"Animation intensity in px",markers:uo(1,10,1),default:4,stickToMarkers:!0,onChange:()=>UMe()}}),GR={x:"0.6s wiggle-wavy-x alternate ease-in-out infinite",y:"1.2s wiggle-wavy-y linear infinite"},OMe=[{chars:["<",">"],className:"wiggle-inner-x"},{chars:["^","^"],className:"wiggle-inner-y"},{chars:[")","("],className:"wiggle-inner-xy"}],UMe=()=>{let e=FMe.store.intensity+"px";hE.textContent=`
.wiggle-example {
    list-style-type: disc;
    list-style-position: outside;
    margin: 4px 0 0 16px;
}

.wiggle-example li {
    white-space: break-spaces;
    margin-bottom: 4px;
}

.wiggle-inner {
    position: relative;
    top: 0;
    left: 0;

    &.wiggle-inner-x {
        animation: ${GR.x};
    }

    &.wiggle-inner-y {
        animation: ${GR.y};
    }

    &.wiggle-inner-xy {
        animation: ${GR.x}, ${GR.y};
    }
}

@keyframes wiggle-wavy-x {
    from {
        left: -${e};
    }

    to {
        left: ${e};
    }
}

@keyframes wiggle-wavy-y {
    0% {
        top: 0;
        animation-timing-function: ease-out;
    }

    25% {
        top: -${e};
        animation-timing-function: ease-in;
    }

    50% {
        top: 0;
        animation-timing-function: ease-out;
    }

    75% {
        top: ${e};
        animation-timing-function: ease-in;
    }
}`},qR=k({name:"WigglyText",description:"Adds a new markdown formatting that makes text wiggly.",authors:[j.nexpid],settings:FMe,settingsAboutComponent:()=>r(Y,null,"You can make text wiggle with the following:",r("br",null),r("ul",{className:"wiggle-example"},r("li",null,r(gE,{wiggle:"x"},"left and right")," by typing ",r("code",null,"<~text~>")),r("li",null,r(gE,{wiggle:"y"},"up and down")," by typing ",r("code",null,"^~text~^")),r("li",null,r(gE,{wiggle:"xy"},"in a circle")," by typing ",r("code",null,")~text~(")))),patches:[{find:"parseToAST:",replacement:{match:/(parse[\w]*):(.*?)\((\i)\),/g,replace:"$1:$2({...$3,wiggly:$self.wigglyRule}),"}}],wigglyRule:{order:24,match:e=>OMe.map(({chars:t})=>e.match(new RegExp(`^(\\${t[0]})~([\\s\\S]+?)~(\\${t[1]})(?!_)`))).find(t=>t!==null),parse:(e,t,o)=>{let n=OMe.find(({chars:i})=>i[0]===e[1]&&i[1]===e[3])?.className??"";return{content:t(e[2],o),className:n}},react:(e,t)=>{let o=0,n=i=>{let s=Array.isArray(i)?i:[i],a=!1,l=-1;for(let c of s)l++,typeof c=="string"?(a=!0,s[l]=c.split("").map((u,p)=>r("span",{key:p},r("span",{className:`wiggle-inner ${e.className}`,style:{animationDelay:`${o++*25%1200}ms`}},u)))):c?.props?.children&&(c.props.children=n(c.props.children));return a?s:i};return n(t(e.content))}},start:()=>{hE=document.createElement("style"),hE.id="WigglyText",document.head.appendChild(hE),UMe()},stop:()=>hE.remove()})});var zMe,HMe,jR,GMe=x(()=>{"use strict";d();vu();Q();H();$();zMe=R({blockedWords:{type:0,description:"Strings not to capitilise (seperate with a comma)",default:"http, https, ok"}}),HMe=(e,t)=>{let o=zMe.store.blockedWords.split(", "),n=t.content.split(/(?<=[.!?]+['")\]]*)(\s+)/);t.content=n.map((i,s)=>s%2===1||o.some(a=>i.toLowerCase().startsWith(a.toLocaleLowerCase()))?i:i.charAt(0).toUpperCase()+i.slice(1)).join("")},jR=k({name:"WriteUpperCase",description:"Changes the first Letter of each Sentence in Message Inputs to Uppercase",authors:[w.Samwich,j.KrystalSkull],settings:zMe,start(){qi(HMe)},stop(){ji(HMe)}})});var WR,qMe=x(()=>{"use strict";d();tt();H();$();B();WR=k({name:"YoutubeDescription",description:"Adds descriptions to youtube video embeds",authors:[w.arHSM],patches:[{find:"#{intl::SUPPRESS_ALL_EMBEDS}",replacement:{match:/case (\i\.\i\.VIDEO):(case \i\.\i\.\i:)*break;default:(\i)=(?:(this\.renderDescription)\(\))\}/,replace:"$2 break; case $1: $3 = $self.ToggleableDescriptionWrapper({ embed: this.props.embed, original: $4.bind(this) }); break; default: $3 = $4() }"}}],ToggleableDescription:ee.wrap(({embed:e,original:t})=>{let[o,n]=L(!1);return e.rawDescription?e.rawDescription.length<=20?t():r("div",{style:{cursor:"pointer",marginTop:o?"0px":"8px"},onClick:()=>n(i=>!i)},o?t():e.rawDescription.substring(0,20)+"..."):null}),ToggleableDescriptionWrapper(e){return r(this.ToggleableDescription,{...e})}})});var KR,jMe=x(()=>{"use strict";d();Ol();H();$();KR=k({name:"AudioPlayerAPI",description:"API to play internal Discord audio files or external audio links.",authors:[j.Etorix],AudioType:vA,playAudio:_s,patches:[{find:"could not play audio",group:!0,replacement:[{match:/(let \i=class.{0,900}?new Audio;\i.src=)((\i\(\d+\))(?:\(`\.\/\$\{|.{0,50}concat\())this.name((?:\}\.mp3`|,".mp3"\))\))/,replace:"$3;$1this.type!==$self.AudioType.DISCORD?this.audio:$2this.audio$4"},{match:/(?<=constructor\((\i,\i,\i,\i)).{0,200}outputChannel=\i/,replace:",options){$self.buildPlayer(this,$1,options);"},{match:/(\i.pause\(\),(\i).src="".{0,20}?null)/,replace:"$2.onerror=()=>{},$1"},{match:/(?<=(\i).onloadeddata=\(\)=>{)/,replace:"$1.playbackRate=this._speed,"},{match:/(onerror=\()(\)=>)(\i\(Error\("[^"]+"\)\)),/,replace:"$1error$2{this.onError?.(error);$3;},"},{match:/(?<=onended=\(\)=>)(.{0,40}?),/,replace:"{$self.stopAudio(this);this.onEnded?.();},"},{match:/(stop\()(\){)this.destroyAudio\(\)/,replace:"$1restart$2$self.stopAudio(this,restart);"},{match:/let \i=new Audio\((\(0,\i.\i\)\(\i\)).{0,35}?play\(\)/,replace:"$self.playAudio($1)"}]},{find:"UPDATE_OPEN_ON_STARTUP",group:!0,replacement:[{match:/(?<=discodo",\i)(\);return )\i.volume=1,/,replace:",1$1"},{match:/,(this._connectedSound.volume)=1/,replace:";"}]}],stopAudio(e,t){t?e.ensureAudio().then(o=>{o.currentTime=0,o.play()}):e.persistent?e._audio?.then(o=>{o.pause(),o.currentTime=0}):e.destroyAudio()},processAudio(e){e.preprocessDataPrevious=e.preprocessDataCurrent?structuredClone(e.preprocessDataCurrent):null,e.preprocessDataCurrent=structuredClone(e.preprocessDataOriginal),e.preprocessDataCurrent.volume*=100;for(let t of Object.values(Aw))t(e.preprocessDataCurrent);e.preprocessDataCurrent.volume/=100,e.audio=e.preprocessDataCurrent.audio,e.type=Cw(e.preprocessDataCurrent.audio),e._volume=Math.max(0,Math.min(1,e.preprocessDataCurrent.volume)),e._speed=Math.max(.0625,Math.min(16,e.preprocessDataCurrent.speed)),e.preprocessDataCurrent.audio!==e.preprocessDataPrevious?.audio&&(e.destroyAudio(),e.persistent&&e.ensureAudio()),e.preprocessDataCurrent.volume!==e.preprocessDataPrevious?.volume&&e._audio?.then(t=>{t.volume=e._volume}),e.preprocessDataCurrent.speed!==e.preprocessDataPrevious?.speed&&e._audio?.then(t=>{t.playbackRate=e._speed})},buildPlayer(e,t,o,n,i,s={}){e.preprocessDataOriginal={audio:t,type:Cw(t),volume:Math.max(0,Math.min(1,n||(s.volume?s.volume/100:1))),speed:Math.max(.0625,Math.min(16,s.speed??1))},e.audio=e.preprocessDataOriginal.audio,e._audio=null,e._volume=e.preprocessDataOriginal.volume,e._speed=e.preprocessDataOriginal.speed,e.preload=s.preload??!1,e.persistent=s.persistent??!1,e.type=Cw(t),e.outputChannel=i,e.onEnded=s.onEnded,e.onError=s.onError,e.processAudio=()=>this.processAudio(e),e.processAudio(),e.preload&&e.ensureAudio()}})});var YR,WMe=x(()=>{"use strict";d();H();$();YR=k({name:"HeaderBarAPI",description:"API to add buttons to the header bar and channel toolbar.",authors:[w.prism],patches:[{find:'?"BACK_FORWARD_NAVIGATION":',replacement:{match:/(?<="HELP".{0,150}className:\i\}\))(?=\])/,replace:",...Vencord.Api.HeaderBar._addHeaderBarButtons()"}},{find:"Missing channel in Channel.renderHeaderToolbar",replacement:{match:/(?<=renderHeaderToolbar"\);let (\i)=\[\];)/,replace:"Vencord.Api.HeaderBar._addChannelToolbarButtons($1);"}}]})});var Zxt,QR,KMe=x(()=>{"use strict";d();Wo();KK();H();$();fe();({iconForeground:Zxt}=et("iconForeground","autocompleteRowContent")),QR=k({name:"UserAreaAPI",description:"API to add buttons to the user area panel.",authors:[w.prism],patches:[{find:"#{intl::ACCOUNT_SPEAKING_WHILE_MUTED}",replacement:{match:/(?<=className:(\i)\.\i,style:\i,)children:\[/,replace:"children:[...$self.renderButtons(arguments[0],$1),"}}],renderButtons(e){return Vencord.Api.UserArea._renderButtons({nameplate:e.nameplate,iconForeground:e.nameplate!=null?Zxt:void 0,hideTooltips:this.shouldHideTooltips()})},shouldHideTooltips(){return yt(hy.name)&&hy.settings.store.removeButtonTooltips}})});var pt,Kr,jw,Ps=x(()=>{d();_h();Ase();Cse();Tse();Ise();Nse();Pse();_se();Ose();Fse();Use();$se();Hse();zse();Gse();qse();Wse();Xm();J$();Zse();Xse();Vse();tae();rH();rae();dme();Sq();xme();Aq();yme();Sme();wme();zme();Kme();Yme();Vme();ofe();Lq();mfe();qq();Tfe();Ife();Bfe();_fe();Lfe();qfe();jfe();Kfe();Yfe();Z$();e3();r0e();fj();T0e();I0e();N0e();Wq();B0e();rge();dge();pge();gge();hge();yge();bge();vge();Age();Tge();Ige();Nge();Bge();Lge();Hge();qge();jge();Kge();Yge();Dj();the();she();ahe();che();phe();$j();Yj();Lhe();Fhe();Ghe();lW();ixe();axe();pxe();hxe();pW();xxe();yxe();bxe();vxe();wxe();kxe();Exe();Axe();nT();Cxe();Txe();Ixe();Dxe();Mxe();RT();Nxe();Bxe();Pxe();bv();zxe();jxe();QT();mye();hye();bye();Sye();Aye();Cye();Iye();zye();Wye();Qye();Zye();Vye();C1e();T1e();D1e();N1e();L1e();QW();W1e();K1e();X1e();PI();tbe();Kj();ibe();tK();lbe();ube();dbe();pbe();xbe();ybe();vbe();Sbe();Cbe();Tbe();Ube();qbe();xK();jbe();Wbe();Kbe();ove();lve();vK();uve();mve();fve();xve();vve();wve();Eve();d4();Nve();Lve();Ove();Fve();zve();Kve();Zve();Xve();V$();Jve();e2e();t2e();a2e();c2e();f2e();zK();N2e();P2e();R2e();L2e();$2e();H2e();KK();dW();z2e();G2e();j2e();Y2e();OY();zSe();GSe();qSe();WSe();j4();qwe();Wwe();Kwe();Ywe();Vwe();n8e();vQ();kQ();uv();g8e();M8e();B8e();Z8e();r5e();Vb();a5e();c5e();d5e();m5e();g5e();_M();GQ();oH();H5e();W5e();K5e();Y5e();Q5e();V5e();o4e();r4e();s4e();u4e();rZ();sN();F4e();nk();iF();V4e();oke();rke();ike();xN();zg();Mke();Nke();Pke();zke();Gke();Wke();Kke();Yke();Xke();eEe();sEe();aEe();pEe();gEe();xEe();SEe();XN();PEe();LEe();UEe();zEe();WEe();nX();iAe();aAe();pAe();gAe();xAe();Ku();u9e();g9e();h9e();b9e();N9e();B9e();lJ();pJ();E6e();xJ();cCe();fCe();gCe();hCe();xCe();yCe();bCe();vCe();wCe();CCe();TCe();ICe();MCe();PCe();DP();I4();r3e();m3e();h3e();E3e();eV();rTe();iTe();aTe();rV();fTe();bTe();pV();GTe();XTe();JTe();eIe();nIe();sIe();aIe();lIe();pIe();mIe();gIe();yIe();FIe();$Ie();GIe();WIe();oDe();nDe();aDe();lDe();uDe();CDe();TDe();MDe();X_();WDe();eR();n7e();a7e();u7e();v7e();dee();C7e();T7e();I7e();M7e();yee();eMe();oMe();nMe();dMe();pMe();mMe();fMe();wMe();IMe();PMe();RMe();$Me();GMe();qMe();jMe();WMe();KMe();pt={[Ul.name]:Ul,[VA.name]:VA,[e9.name]:e9,[t9.name]:t9,[o9.name]:o9,[n9.name]:n9,[r9.name]:r9,[i9.name]:i9,[s9.name]:s9,[a9.name]:a9,[l9.name]:l9,[c9.name]:c9,[u9.name]:u9,[d9.name]:d9,[p9.name]:p9,[m9.name]:m9,[f9.name]:f9,[vi.name]:vi,[h9.name]:h9,[y9.name]:y9,[b9.name]:b9,[v9.name]:v9,[S9.name]:S9,[V1.name]:V1,[k9.name]:k9,[SC.name]:SC,[EC.name]:EC,[AC.name]:AC,[jx.name]:jx,[TC.name]:TC,[IC.name]:IC,[DC.name]:DC,[MC.name]:MC,[NC.name]:NC,[BC.name]:BC,[PC.name]:PC,[_C.name]:_C,[RC.name]:RC,[LC.name]:LC,[FC.name]:FC,[UC.name]:UC,[$C.name]:$C,[zC.name]:zC,[GC.name]:GC,[qC.name]:qC,[WC.name]:WC,[KC.name]:KC,[YC.name]:YC,[QC.name]:QC,[F0.name]:F0,[rg.name]:rg,[o3.name]:o3,[lv.name]:lv,[u3.name]:u3,[d3.name]:d3,[m3.name]:m3,[ov.name]:ov,[f3.name]:f3,[k3.name]:k3,[E3.name]:E3,[A3.name]:A3,[C3.name]:C3,[T3.name]:T3,[I3.name]:I3,[D3.name]:D3,[M3.name]:M3,[N3.name]:N3,[B3.name]:B3,[P3.name]:P3,[R3.name]:R3,[L3.name]:L3,[F3.name]:F3,[U3.name]:U3,[$3.name]:$3,[H3.name]:H3,[z3.name]:z3,[G3.name]:G3,[q3.name]:q3,[j3.name]:j3,[Y3.name]:Y3,[Z3.name]:Z3,[V3.name]:V3,[eT.name]:eT,[oT.name]:oT,[fv.name]:fv,[iT.name]:iT,[sT.name]:sT,[lT.name]:lT,[pT.name]:pT,[fT.name]:fT,[gT.name]:gT,[yT.name]:yT,[bT.name]:bT,[iy.name]:iy,[ST.name]:ST,[wT.name]:wT,[kT.name]:kT,[ET.name]:ET,[AT.name]:AT,[CT.name]:CT,[TT.name]:TT,[IT.name]:IT,[Ou.name]:Ou,[DT.name]:DT,[MT.name]:MT,[NT.name]:NT,[BT.name]:BT,[PT.name]:PT,[xf.name]:xf,[LT.name]:LT,[OT.name]:OT,[FT.name]:FT,[vv.name]:vv,[jT.name]:jT,[WT.name]:WT,[XT.name]:XT,[JT.name]:JT,[VT.name]:VT,[eI.name]:eI,[tI.name]:tI,[oI.name]:oI,[nI.name]:nI,[rI.name]:rI,[lI.name]:lI,[cI.name]:cI,[uI.name]:uI,[dI.name]:dI,[mI.name]:mI,[vI.name]:vI,[SI.name]:SI,[wI.name]:wI,[kI.name]:kI,[EI.name]:EI,[CI.name]:CI,[DI.name]:DI,[MI.name]:MI,[BI.name]:BI,[Nv.name]:Nv,[_I.name]:_I,[mv.name]:mv,[RI.name]:RI,[OI.name]:OI,[FI.name]:FI,[UI.name]:UI,[$I.name]:$I,[HI.name]:HI,[qI.name]:qI,[jI.name]:jI,[WI.name]:WI,[YI.name]:YI,[QI.name]:QI,[ZI.name]:ZI,[XI.name]:XI,[VI.name]:VI,[JI.name]:JI,[eD.name]:eD,[tD.name]:tD,[oD.name]:oD,[rD.name]:rD,[aD.name]:aD,[bg.name]:bg,[lD.name]:lD,[uD.name]:uD,[dD.name]:dD,[hD.name]:hD,[xD.name]:xD,[vD.name]:vD,[SD.name]:SD,[kD.name]:kD,[ED.name]:ED,[TD.name]:TD,[ID.name]:ID,[DD.name]:DD,[MD.name]:MD,[BD.name]:BD,[PD.name]:PD,[_D.name]:_D,[nx.name]:nx,[RD.name]:RD,[LD.name]:LD,[OD.name]:OD,[UD.name]:UD,[HD.name]:HD,[GD.name]:GD,[my.name]:my,[qD.name]:qD,[WD.name]:WD,[YD.name]:YD,[QD.name]:QD,[ZD.name]:ZD,[XD.name]:XD,[hy.name]:hy,[vT.name]:vT,[JD.name]:JD,[VD.name]:VD,[e7.name]:e7,[r7.name]:r7,[Yv.name]:Yv,[_7.name]:_7,[R7.name]:R7,[L7.name]:L7,[O7.name]:O7,[s2.name]:s2,[rM.name]:rM,[iM.name]:iM,[sM.name]:sM,[aM.name]:aM,[lM.name]:lM,[dM.name]:dM,[mM.name]:mM,[u2.name]:u2,[K3.name]:K3,[gM.name]:gM,[xM.name]:xM,[bM.name]:bM,[AM.name]:AM,[CM.name]:CM,[Lu.name]:Lu,[TM.name]:TM,[IM.name]:IM,[MM.name]:MM,[NM.name]:NM,[BM.name]:BM,[OM.name]:OM,[HM.name]:HM,[w9.name]:w9,[zM.name]:zM,[qM.name]:qM,[jM.name]:jM,[WM.name]:WM,[KM.name]:KM,[YM.name]:YM,[QM.name]:QM,[XM.name]:XM,[JM.name]:JM,[VM.name]:VM,[nN.name]:nN,[aN.name]:aN,[lN.name]:lN,[dN.name]:dN,[Ph.name]:Ph,[pN.name]:pN,[mN.name]:mN,[gN.name]:gN,[hN.name]:hN,[yN.name]:yN,[kN.name]:kN,[EN.name]:EN,[AN.name]:AN,[CN.name]:CN,[MN.name]:MN,[NN.name]:NN,[_N.name]:_N,[RN.name]:RN,[LN.name]:LN,[ON.name]:ON,[$N.name]:$N,[HN.name]:HN,[zN.name]:zN,[qN.name]:qN,[jN.name]:jN,[KN.name]:KN,[YN.name]:YN,[JN.name]:JN,[VN.name]:VN,[tB.name]:tB,[oB.name]:oB,[rB.name]:rB,[sB.name]:sB,[Py.name]:Py,[mB.name]:mB,[fB.name]:fB,[gB.name]:gB,[yB.name]:yB,[bB.name]:bB,[PB.name]:PB,[_B.name]:_B,[OB.name]:OB,[UB.name]:UB,[$B.name]:$B,[HB.name]:HB,[zB.name]:zB,[j2.name]:j2,[Y2.name]:Y2,[XB.name]:XB,[Z2.name]:Z2,[aP.name]:aP,[uP.name]:uP,[dP.name]:dP,[pP.name]:pP,[mP.name]:mP,[fP.name]:fP,[gP.name]:gP,[hP.name]:hP,[xP.name]:xP,[yP.name]:yP,[bP.name]:bP,[vP.name]:vP,[SP.name]:SP,[EP.name]:EP,[MP.name]:MP,[N7.name]:N7,[NP.name]:NP,[BP.name]:BP,[PP.name]:PP,[LP.name]:LP,[GP.name]:GP,[jP.name]:jP,[WP.name]:WP,[KP.name]:KP,[ZP.name]:ZP,[VP.name]:VP,[e_.name]:e_,[c_.name]:c_,[u_.name]:u_,[d_.name]:d_,[p_.name]:p_,[m_.name]:m_,[f_.name]:f_,[h_.name]:h_,[x_.name]:x_,[y_.name]:y_,[v_.name]:v_,[S_.name]:S_,[w_.name]:w_,[k_.name]:k_,[__.name]:__,[R_.name]:R_,[O_.name]:O_,[U_.name]:U_,[H_.name]:H_,[z_.name]:z_,[G_.name]:G_,[q_.name]:q_,[j_.name]:j_,[W_.name]:W_,[K_.name]:K_,[Q_.name]:Q_,[J_.name]:J_,[V_.name]:V_,[nR.name]:nR,[rR.name]:rR,[sR.name]:sR,[aR.name]:aR,[uR.name]:uR,[pR.name]:pR,[fR.name]:fR,[gR.name]:gR,[hR.name]:hR,[xR.name]:xR,[SR.name]:SR,[CR.name]:CR,[TR.name]:TR,[MR.name]:MR,[NR.name]:NR,[BR.name]:BR,[PR.name]:PR,[_R.name]:_R,[FR.name]:FR,[$R.name]:$R,[HR.name]:HR,[zR.name]:zR,[qR.name]:qR,[jR.name]:jR,[WR.name]:WR,[KR.name]:KR,[YR.name]:YR,[QR.name]:QR},Kr={[Ul.name]:{folderName:"src/plugins/_api/badges",userPlugin:!1},[VA.name]:{folderName:"src/plugins/_api/chatButtons.ts",userPlugin:!1},[e9.name]:{folderName:"src/plugins/_api/commands.ts",userPlugin:!1},[t9.name]:{folderName:"src/plugins/_api/contextMenu.ts",userPlugin:!1},[o9.name]:{folderName:"src/plugins/_api/dynamicImageModalApi.ts",userPlugin:!1},[n9.name]:{folderName:"src/plugins/_api/memberListDecorators",userPlugin:!1},[r9.name]:{folderName:"src/plugins/_api/menuItemDemangler.ts",userPlugin:!1},[i9.name]:{folderName:"src/plugins/_api/messageAccessories.ts",userPlugin:!1},[s9.name]:{folderName:"src/plugins/_api/messageDecorations",userPlugin:!1},[a9.name]:{folderName:"src/plugins/_api/messageEvents.ts",userPlugin:!1},[l9.name]:{folderName:"src/plugins/_api/messagePopover.ts",userPlugin:!1},[c9.name]:{folderName:"src/plugins/_api/messageUpdater.ts",userPlugin:!1},[u9.name]:{folderName:"src/plugins/_api/nicknameIcons.ts",userPlugin:!1},[d9.name]:{folderName:"src/plugins/_api/notices.ts",userPlugin:!1},[p9.name]:{folderName:"src/plugins/_api/serverList.ts",userPlugin:!1},[m9.name]:{folderName:"src/plugins/_api/userSettings.ts",userPlugin:!1},[f9.name]:{folderName:"src/plugins/_core/noTrack.ts",userPlugin:!1},[vi.name]:{folderName:"src/plugins/_core/settings.tsx",userPlugin:!1},[h9.name]:{folderName:"src/plugins/_core/supportHelper.tsx",userPlugin:!1},[y9.name]:{folderName:"src/plugins/accountPanelServerProfile",userPlugin:!1},[b9.name]:{folderName:"src/plugins/alwaysAnimate",userPlugin:!1},[v9.name]:{folderName:"src/plugins/alwaysExpandRoles",userPlugin:!1},[S9.name]:{folderName:"src/plugins/alwaysTrust",userPlugin:!1},[V1.name]:{folderName:"src/plugins/anonymiseFileNames",userPlugin:!1},[k9.name]:{folderName:"src/plugins/arRPC.web",userPlugin:!1},[SC.name]:{folderName:"src/plugins/bdCompatLayer",userPlugin:!1},[EC.name]:{folderName:"src/plugins/betterFolders",userPlugin:!1},[AC.name]:{folderName:"src/plugins/betterGifAltText",userPlugin:!1},[jx.name]:{folderName:"src/plugins/betterGifPicker",userPlugin:!1},[TC.name]:{folderName:"src/plugins/betterNotes",userPlugin:!1},[IC.name]:{folderName:"src/plugins/betterRoleContext",userPlugin:!1},[DC.name]:{folderName:"src/plugins/betterRoleDot",userPlugin:!1},[MC.name]:{folderName:"src/plugins/betterSessions",userPlugin:!1},[NC.name]:{folderName:"src/plugins/betterSettings",userPlugin:!1},[BC.name]:{folderName:"src/plugins/betterUploadButton",userPlugin:!1},[PC.name]:{folderName:"src/plugins/biggerStreamPreview",userPlugin:!1},[_C.name]:{folderName:"src/plugins/blurNsfw",userPlugin:!1},[RC.name]:{folderName:"src/plugins/callTimer",userPlugin:!1},[LC.name]:{folderName:"src/plugins/clearURLs",userPlugin:!1},[FC.name]:{folderName:"src/plugins/clientTheme",userPlugin:!1},[UC.name]:{folderName:"src/plugins/colorSighted",userPlugin:!1},[$C.name]:{folderName:"src/plugins/consoleJanitor",userPlugin:!1},[zC.name]:{folderName:"src/plugins/consoleShortcuts",userPlugin:!1},[GC.name]:{folderName:"src/plugins/copyEmojiMarkdown",userPlugin:!1},[qC.name]:{folderName:"src/plugins/copyFileContents",userPlugin:!1},[WC.name]:{folderName:"src/plugins/copyStickerLinks",userPlugin:!1},[KC.name]:{folderName:"src/plugins/copyUserURLs",userPlugin:!1},[YC.name]:{folderName:"src/plugins/crashHandler",userPlugin:!1},[QC.name]:{folderName:"src/plugins/ctrlEnterSend",userPlugin:!1},[F0.name]:{folderName:"src/plugins/customIdle",userPlugin:!1},[rg.name]:{folderName:"src/plugins/customRPC",userPlugin:!1},[o3.name]:{folderName:"src/plugins/dearrow",userPlugin:!1},[lv.name]:{folderName:"src/plugins/decor",userPlugin:!1},[u3.name]:{folderName:"src/plugins/disableCallIdle",userPlugin:!1},[d3.name]:{folderName:"src/plugins/dontRoundMyTimestamps",userPlugin:!1},[m3.name]:{folderName:"src/plugins/experiments",userPlugin:!1},[ov.name]:{folderName:"src/plugins/expressionCloner",userPlugin:!1},[f3.name]:{folderName:"src/plugins/f8break",userPlugin:!1},[k3.name]:{folderName:"src/plugins/fakeNitro",userPlugin:!1},[E3.name]:{folderName:"src/plugins/fakeProfileThemes",userPlugin:!1},[A3.name]:{folderName:"src/plugins/favEmojiFirst",userPlugin:!1},[C3.name]:{folderName:"src/plugins/favGifSearch",userPlugin:!1},[T3.name]:{folderName:"src/plugins/fixCodeblockGap",userPlugin:!1},[I3.name]:{folderName:"src/plugins/fixImagesQuality",userPlugin:!1},[D3.name]:{folderName:"src/plugins/forceOwnerCrown",userPlugin:!1},[M3.name]:{folderName:"src/plugins/friendInvites",userPlugin:!1},[N3.name]:{folderName:"src/plugins/friendsSince",userPlugin:!1},[B3.name]:{folderName:"src/plugins/fullSearchContext",userPlugin:!1},[P3.name]:{folderName:"src/plugins/fullUserInChatbox",userPlugin:!1},[R3.name]:{folderName:"src/plugins/gameActivityToggle",userPlugin:!1},[L3.name]:{folderName:"src/plugins/gifPaste",userPlugin:!1},[F3.name]:{folderName:"src/plugins/greetStickerPicker",userPlugin:!1},[U3.name]:{folderName:"src/plugins/hideAttachments",userPlugin:!1},[$3.name]:{folderName:"src/plugins/ignoreActivities",userPlugin:!1},[H3.name]:{folderName:"src/plugins/iLoveSpam",userPlugin:!1},[z3.name]:{folderName:"src/plugins/imageFilename",userPlugin:!1},[G3.name]:{folderName:"src/plugins/imageLink",userPlugin:!1},[q3.name]:{folderName:"src/plugins/imageZoom",userPlugin:!1},[j3.name]:{folderName:"src/plugins/implicitRelationships",userPlugin:!1},[Y3.name]:{folderName:"src/plugins/ircColors",userPlugin:!1},[Z3.name]:{folderName:"src/plugins/keepCurrentChannel",userPlugin:!1},[V3.name]:{folderName:"src/plugins/lastfmRichPresence",userPlugin:!1},[eT.name]:{folderName:"src/plugins/loadingQuotes",userPlugin:!1},[oT.name]:{folderName:"src/plugins/memberCount",userPlugin:!1},[fv.name]:{folderName:"src/plugins/mentionAvatars",userPlugin:!1},[iT.name]:{folderName:"src/plugins/messageClickActions",userPlugin:!1},[sT.name]:{folderName:"src/plugins/messageLatency",userPlugin:!1},[lT.name]:{folderName:"src/plugins/messageLinkEmbeds",userPlugin:!1},[pT.name]:{folderName:"src/plugins/messageLogger",userPlugin:!1},[fT.name]:{folderName:"src/plugins/messageTags",userPlugin:!1},[gT.name]:{folderName:"src/plugins/moreQuickReactions",userPlugin:!1},[yT.name]:{folderName:"src/plugins/mutualGroupDMs",userPlugin:!1},[bT.name]:{folderName:"src/plugins/newGuildSettings",userPlugin:!1},[iy.name]:{folderName:"src/plugins/noBlockedMessages",userPlugin:!1},[ST.name]:{folderName:"src/plugins/noDeepLinks.web",userPlugin:!1},[wT.name]:{folderName:"src/plugins/noDevtoolsWarning",userPlugin:!1},[kT.name]:{folderName:"src/plugins/noF1",userPlugin:!1},[ET.name]:{folderName:"src/plugins/noMaskedUrlPaste",userPlugin:!1},[AT.name]:{folderName:"src/plugins/noMosaic",userPlugin:!1},[CT.name]:{folderName:"src/plugins/noOnboardingDelay",userPlugin:!1},[TT.name]:{folderName:"src/plugins/noPendingCount",userPlugin:!1},[IT.name]:{folderName:"src/plugins/noProfileThemes",userPlugin:!1},[Ou.name]:{folderName:"src/plugins/noReplyMention",userPlugin:!1},[DT.name]:{folderName:"src/plugins/noServerEmojis",userPlugin:!1},[MT.name]:{folderName:"src/plugins/notificationVolume",userPlugin:!1},[NT.name]:{folderName:"src/plugins/noTypingAnimation",userPlugin:!1},[BT.name]:{folderName:"src/plugins/noUnblockToJump",userPlugin:!1},[PT.name]:{folderName:"src/plugins/onePingPerDM",userPlugin:!1},[xf.name]:{folderName:"src/plugins/openInApp",userPlugin:!1},[LT.name]:{folderName:"src/plugins/overrideForumDefaults",userPlugin:!1},[OT.name]:{folderName:"src/plugins/pauseInvitesForever",userPlugin:!1},[FT.name]:{folderName:"src/plugins/permissionFreeWill",userPlugin:!1},[vv.name]:{folderName:"src/plugins/permissionsViewer",userPlugin:!1},[jT.name]:{folderName:"src/plugins/petpet",userPlugin:!1},[WT.name]:{folderName:"src/plugins/pictureInPicture",userPlugin:!1},[XT.name]:{folderName:"src/plugins/pinDms",userPlugin:!1},[JT.name]:{folderName:"src/plugins/plainFolderIcon",userPlugin:!1},[VT.name]:{folderName:"src/plugins/platformIndicators",userPlugin:!1},[eI.name]:{folderName:"src/plugins/previewMessage",userPlugin:!1},[tI.name]:{folderName:"src/plugins/quickMention",userPlugin:!1},[oI.name]:{folderName:"src/plugins/quickReply",userPlugin:!1},[nI.name]:{folderName:"src/plugins/reactErrorDecoder",userPlugin:!1},[rI.name]:{folderName:"src/plugins/readAllNotificationsButton",userPlugin:!1},[lI.name]:{folderName:"src/plugins/relationshipNotifier",userPlugin:!1},[cI.name]:{folderName:"src/plugins/replaceGoogleSearch",userPlugin:!1},[uI.name]:{folderName:"src/plugins/replyTimestamp",userPlugin:!1},[dI.name]:{folderName:"src/plugins/revealAllSpoilers",userPlugin:!1},[mI.name]:{folderName:"src/plugins/reverseImageSearch",userPlugin:!1},[vI.name]:{folderName:"src/plugins/reviewDB",userPlugin:!1},[SI.name]:{folderName:"src/plugins/roleColorEverywhere",userPlugin:!1},[wI.name]:{folderName:"src/plugins/secretRingTone",userPlugin:!1},[kI.name]:{folderName:"src/plugins/seeSummaries",userPlugin:!1},[EI.name]:{folderName:"src/plugins/sendTimestamps",userPlugin:!1},[CI.name]:{folderName:"src/plugins/serverInfo",userPlugin:!1},[DI.name]:{folderName:"src/plugins/serverListIndicators",userPlugin:!1},[MI.name]:{folderName:"src/plugins/showAllMessageButtons",userPlugin:!1},[BI.name]:{folderName:"src/plugins/showConnections",userPlugin:!1},[Nv.name]:{folderName:"src/plugins/showHiddenChannels",userPlugin:!1},[_I.name]:{folderName:"src/plugins/showHiddenThings",userPlugin:!1},[mv.name]:{folderName:"src/plugins/showMeYourName",userPlugin:!1},[RI.name]:{folderName:"src/plugins/showTimeoutDuration",userPlugin:!1},[OI.name]:{folderName:"src/plugins/silentMessageToggle",userPlugin:!1},[FI.name]:{folderName:"src/plugins/silentTyping",userPlugin:!1},[UI.name]:{folderName:"src/plugins/sortFriendRequests",userPlugin:!1},[$I.name]:{folderName:"src/plugins/spotifyCrack",userPlugin:!1},[HI.name]:{folderName:"src/plugins/spotifyShareCommands",userPlugin:!1},[qI.name]:{folderName:"src/plugins/startupTimings",userPlugin:!1},[jI.name]:{folderName:"src/plugins/stickerPaste",userPlugin:!1},[WI.name]:{folderName:"src/plugins/streamerModeOnStream",userPlugin:!1},[YI.name]:{folderName:"src/plugins/superReactionTweaks",userPlugin:!1},[QI.name]:{folderName:"src/plugins/textReplace",userPlugin:!1},[ZI.name]:{folderName:"src/plugins/themeAttributes",userPlugin:!1},[XI.name]:{folderName:"src/plugins/translate",userPlugin:!1},[VI.name]:{folderName:"src/plugins/typingIndicator",userPlugin:!1},[JI.name]:{folderName:"src/plugins/typingTweaks",userPlugin:!1},[eD.name]:{folderName:"src/plugins/unindent",userPlugin:!1},[tD.name]:{folderName:"src/plugins/unlockedAvatarZoom",userPlugin:!1},[oD.name]:{folderName:"src/plugins/unsuppressEmbeds",userPlugin:!1},[rD.name]:{folderName:"src/plugins/userMessagesPronouns",userPlugin:!1},[aD.name]:{folderName:"src/plugins/userVoiceShow",userPlugin:!1},[bg.name]:{folderName:"src/plugins/usrbg",userPlugin:!1},[lD.name]:{folderName:"src/plugins/validReply",userPlugin:!1},[uD.name]:{folderName:"src/plugins/validUser",userPlugin:!1},[dD.name]:{folderName:"src/plugins/vcDoubleClick",userPlugin:!1},[hD.name]:{folderName:"src/plugins/vcNarrator",userPlugin:!1},[xD.name]:{folderName:"src/plugins/viewIcons",userPlugin:!1},[vD.name]:{folderName:"src/plugins/viewRaw",userPlugin:!1},[SD.name]:{folderName:"src/plugins/voiceDownload",userPlugin:!1},[kD.name]:{folderName:"src/plugins/voiceMessages",userPlugin:!1},[ED.name]:{folderName:"src/plugins/volumeBooster",userPlugin:!1},[TD.name]:{folderName:"src/plugins/webContextMenus.web",userPlugin:!1},[ID.name]:{folderName:"src/plugins/webKeybinds.web",userPlugin:!1},[DD.name]:{folderName:"src/plugins/webScreenShareFixes.web",userPlugin:!1},[MD.name]:{folderName:"src/plugins/whoReacted",userPlugin:!1},[BD.name]:{folderName:"src/plugins/xsOverlay",userPlugin:!1},[PD.name]:{folderName:"src/equicordplugins/absRPC",userPlugin:!1},[_D.name]:{folderName:"src/equicordplugins/altKrispSwitch",userPlugin:!1},[nx.name]:{folderName:"src/equicordplugins/alwaysExpandProfiles",userPlugin:!1},[RD.name]:{folderName:"src/equicordplugins/anammox",userPlugin:!1},[LD.name]:{folderName:"src/equicordplugins/animalese",userPlugin:!1},[OD.name]:{folderName:"src/equicordplugins/atSomeone",userPlugin:!1},[UD.name]:{folderName:"src/equicordplugins/autoZipper",userPlugin:!1},[HD.name]:{folderName:"src/equicordplugins/bannersEverywhere",userPlugin:!1},[GD.name]:{folderName:"src/equicordplugins/baseDecoder",userPlugin:!1},[my.name]:{folderName:"src/equicordplugins/betterActivities",userPlugin:!1},[qD.name]:{folderName:"src/equicordplugins/betterAudioPlayer",userPlugin:!1},[WD.name]:{folderName:"src/equicordplugins/betterBanReasons",userPlugin:!1},[YD.name]:{folderName:"src/equicordplugins/betterBlockedUsers",userPlugin:!1},[QD.name]:{folderName:"src/equicordplugins/betterCommands",userPlugin:!1},[ZD.name]:{folderName:"src/equicordplugins/betterInvites",userPlugin:!1},[XD.name]:{folderName:"src/equicordplugins/betterPlusReacts",userPlugin:!1},[hy.name]:{folderName:"src/equicordplugins/betterUserArea",userPlugin:!1},[vT.name]:{folderName:"src/equicordplugins/blockKeywords",userPlugin:!1},[JD.name]:{folderName:"src/equicordplugins/blockKrisp",userPlugin:!1},[VD.name]:{folderName:"src/equicordplugins/bypassPinPrompt",userPlugin:!1},[e7.name]:{folderName:"src/equicordplugins/bypassStatus",userPlugin:!1},[r7.name]:{folderName:"src/equicordplugins/channelBadges",userPlugin:!1},[Yv.name]:{folderName:"src/equicordplugins/channelTabs",userPlugin:!1},[_7.name]:{folderName:"src/equicordplugins/characterCounter",userPlugin:!1},[R7.name]:{folderName:"src/equicordplugins/cleanChannelName",userPlugin:!1},[L7.name]:{folderName:"src/equicordplugins/cleanerChannelGroups",userPlugin:!1},[O7.name]:{folderName:"src/equicordplugins/clientSideBlock",userPlugin:!1},[s2.name]:{folderName:"src/equicordplugins/commandPalette",userPlugin:!1},[rM.name]:{folderName:"src/equicordplugins/contentWarning",userPlugin:!1},[iM.name]:{folderName:"src/equicordplugins/copyProfileColors",userPlugin:!1},[sM.name]:{folderName:"src/equicordplugins/copyStatusUrls",userPlugin:!1},[aM.name]:{folderName:"src/equicordplugins/copyUserMention",userPlugin:!1},[lM.name]:{folderName:"src/equicordplugins/cursorBuddy",userPlugin:!1},[dM.name]:{folderName:"src/equicordplugins/customFolderIcons",userPlugin:!1},[mM.name]:{folderName:"src/equicordplugins/customSounds",userPlugin:!1},[u2.name]:{folderName:"src/equicordplugins/customTimestamps",userPlugin:!1},[K3.name]:{folderName:"src/equicordplugins/customUserColors",userPlugin:!1},[gM.name]:{folderName:"src/equicordplugins/disableCameras",userPlugin:!1},[xM.name]:{folderName:"src/equicordplugins/discordDevBanner",userPlugin:!1},[bM.name]:{folderName:"src/equicordplugins/dragFavoriteEmotes",userPlugin:!1},[AM.name]:{folderName:"src/equicordplugins/dragify",userPlugin:!1},[CM.name]:{folderName:"src/equicordplugins/equicordHelper",userPlugin:!1},[Lu.name]:{folderName:"src/equicordplugins/equicordToolbox",userPlugin:!1},[TM.name]:{folderName:"src/equicordplugins/equissant",userPlugin:!1},[IM.name]:{folderName:"src/equicordplugins/exitSounds",userPlugin:!1},[MM.name]:{folderName:"src/equicordplugins/exportMessages",userPlugin:!1},[NM.name]:{folderName:"src/equicordplugins/fastDeleteChannels",userPlugin:!1},[BM.name]:{folderName:"src/equicordplugins/favouriteAnything",userPlugin:!1},[OM.name]:{folderName:"src/equicordplugins/fileUpload",userPlugin:!1},[HM.name]:{folderName:"src/equicordplugins/findReply",userPlugin:!1},[w9.name]:{folderName:"src/equicordplugins/fixFileExtensions",userPlugin:!1},[zM.name]:{folderName:"src/equicordplugins/followVoiceUser",userPlugin:!1},[qM.name]:{folderName:"src/equicordplugins/fontLoader",userPlugin:!1},[jM.name]:{folderName:"src/equicordplugins/forwardAnywhere",userPlugin:!1},[WM.name]:{folderName:"src/equicordplugins/frequentQuickSwitcher",userPlugin:!1},[KM.name]:{folderName:"src/equicordplugins/friendCloud",userPlugin:!1},[YM.name]:{folderName:"src/equicordplugins/friendCodes",userPlugin:!1},[QM.name]:{folderName:"src/equicordplugins/friendshipRanks",userPlugin:!1},[XM.name]:{folderName:"src/equicordplugins/friendTags",userPlugin:!1},[JM.name]:{folderName:"src/equicordplugins/fullVcPfp",userPlugin:!1},[VM.name]:{folderName:"src/equicordplugins/gensokyoRadioRPC",userPlugin:!1},[nN.name]:{folderName:"src/equicordplugins/ghosted",userPlugin:!1},[aN.name]:{folderName:"src/equicordplugins/gifCollections",userPlugin:!1},[lN.name]:{folderName:"src/equicordplugins/gifRoulette",userPlugin:!1},[dN.name]:{folderName:"src/equicordplugins/githubRepos",userPlugin:!1},[Ph.name]:{folderName:"src/equicordplugins/globalBadges",userPlugin:!1},[pN.name]:{folderName:"src/equicordplugins/googleThat",userPlugin:!1},[mN.name]:{folderName:"src/equicordplugins/guildPickerDumper",userPlugin:!1},[gN.name]:{folderName:"src/equicordplugins/guildTagSettings",userPlugin:!1},[hN.name]:{folderName:"src/equicordplugins/hideChatButtons",userPlugin:!1},[yN.name]:{folderName:"src/equicordplugins/hideServers",userPlugin:!1},[kN.name]:{folderName:"src/equicordplugins/holyNotes",userPlugin:!1},[EN.name]:{folderName:"src/equicordplugins/homeTyping",userPlugin:!1},[AN.name]:{folderName:"src/equicordplugins/hopOn",userPlugin:!1},[CN.name]:{folderName:"src/equicordplugins/husk",userPlugin:!1},[MN.name]:{folderName:"src/equicordplugins/iconViewer",userPlugin:!1},[NN.name]:{folderName:"src/equicordplugins/idleAutoRestart",userPlugin:!1},[_N.name]:{folderName:"src/equicordplugins/ignoreCalls",userPlugin:!1},[RN.name]:{folderName:"src/equicordplugins/ignoreTerms",userPlugin:!1},[LN.name]:{folderName:"src/equicordplugins/imgToGif",userPlugin:!1},[ON.name]:{folderName:"src/equicordplugins/ingtoninator",userPlugin:!1},[$N.name]:{folderName:"src/equicordplugins/inRole",userPlugin:!1},[HN.name]:{folderName:"src/equicordplugins/instantScreenshare",userPlugin:!1},[zN.name]:{folderName:"src/equicordplugins/inviteDefaults",userPlugin:!1},[qN.name]:{folderName:"src/equicordplugins/iRememberYou",userPlugin:!1},[jN.name]:{folderName:"src/equicordplugins/jellyfinRichPresence",userPlugin:!1},[KN.name]:{folderName:"src/equicordplugins/jumpscare",userPlugin:!1},[YN.name]:{folderName:"src/equicordplugins/jumpTo",userPlugin:!1},[JN.name]:{folderName:"src/equicordplugins/keyboardNavigation",userPlugin:!1},[VN.name]:{folderName:"src/equicordplugins/keyboardSounds",userPlugin:!1},[tB.name]:{folderName:"src/equicordplugins/keywordNotify",userPlugin:!1},[oB.name]:{folderName:"src/equicordplugins/lastActive",userPlugin:!1},[rB.name]:{folderName:"src/equicordplugins/limitMiddleClickPaste",userPlugin:!1},[sB.name]:{folderName:"src/equicordplugins/listenBrainzRPC",userPlugin:!1},[Py.name]:{folderName:"src/equicordplugins/loginWithQR",userPlugin:!1},[mB.name]:{folderName:"src/equicordplugins/mediaPlaybackSpeed",userPlugin:!1},[fB.name]:{folderName:"src/equicordplugins/messageBurst",userPlugin:!1},[gB.name]:{folderName:"src/equicordplugins/messageColors",userPlugin:!1},[yB.name]:{folderName:"src/equicordplugins/messageFetchTimer",userPlugin:!1},[bB.name]:{folderName:"src/equicordplugins/messageLinkTooltip",userPlugin:!1},[PB.name]:{folderName:"src/equicordplugins/messageLoggerEnhanced",userPlugin:!1},[_B.name]:{folderName:"src/equicordplugins/messageNotifier",userPlugin:!1},[OB.name]:{folderName:"src/equicordplugins/messagePeek",userPlugin:!1},[UB.name]:{folderName:"src/equicordplugins/messageTranslate",userPlugin:!1},[$B.name]:{folderName:"src/equicordplugins/micLoopbackTester",userPlugin:!1},[HB.name]:{folderName:"src/equicordplugins/moreCommands",userPlugin:!1},[zB.name]:{folderName:"src/equicordplugins/moreKaomoji",userPlugin:!1},[j2.name]:{folderName:"src/equicordplugins/moreStickers",userPlugin:!1},[Y2.name]:{folderName:"src/equicordplugins/moreUserTags",userPlugin:!1},[XB.name]:{folderName:"src/equicordplugins/moyai",userPlugin:!1},[Z2.name]:{folderName:"src/equicordplugins/musicControls",userPlugin:!1},[aP.name]:{folderName:"src/equicordplugins/neverPausePreviews",userPlugin:!1},[uP.name]:{folderName:"src/equicordplugins/newPluginsManager",userPlugin:!1},[dP.name]:{folderName:"src/equicordplugins/noAppsAllowed",userPlugin:!1},[pP.name]:{folderName:"src/equicordplugins/noBulletPoints",userPlugin:!1},[mP.name]:{folderName:"src/equicordplugins/noModalAnimation",userPlugin:!1},[fP.name]:{folderName:"src/equicordplugins/noNitroUpsell",userPlugin:!1},[gP.name]:{folderName:"src/equicordplugins/normalizeMessageLinks",userPlugin:!1},[hP.name]:{folderName:"src/equicordplugins/noRoleHeaders",userPlugin:!1},[xP.name]:{folderName:"src/equicordplugins/orbolayBridge",userPlugin:!1},[yP.name]:{folderName:"src/equicordplugins/partyMode",userPlugin:!1},[bP.name]:{folderName:"src/equicordplugins/pingNotifications",userPlugin:!1},[vP.name]:{folderName:"src/equicordplugins/pinIcon",userPlugin:!1},[SP.name]:{folderName:"src/equicordplugins/platformSpoofer",userPlugin:!1},[EP.name]:{folderName:"src/equicordplugins/polishWording",userPlugin:!1},[MP.name]:{folderName:"src/equicordplugins/profileSets",userPlugin:!1},[N7.name]:{folderName:"src/equicordplugins/questify",userPlugin:!1},[NP.name]:{folderName:"src/equicordplugins/questionMarkReplacement",userPlugin:!1},[BP.name]:{folderName:"src/equicordplugins/quoter",userPlugin:!1},[PP.name]:{folderName:"src/equicordplugins/randomVoice",userPlugin:!1},[LP.name]:{folderName:"src/equicordplugins/recentDMSwitcher",userPlugin:!1},[GP.name]:{folderName:"src/equicordplugins/remix",userPlugin:!1},[jP.name]:{folderName:"src/equicordplugins/repeatMessages",userPlugin:!1},[WP.name]:{folderName:"src/equicordplugins/replyPingControl",userPlugin:!1},[KP.name]:{folderName:"src/equicordplugins/richMagnetLinks",userPlugin:!1},[ZP.name]:{folderName:"src/equicordplugins/rpcEditor",userPlugin:!1},[VP.name]:{folderName:"src/equicordplugins/rpcStats",userPlugin:!1},[e_.name]:{folderName:"src/equicordplugins/saveFavoriteGIFs",userPlugin:!1},[c_.name]:{folderName:"src/equicordplugins/scheduledMessages",userPlugin:!1},[u_.name]:{folderName:"src/equicordplugins/searchFix",userPlugin:!1},[d_.name]:{folderName:"src/equicordplugins/sekaiStickers",userPlugin:!1},[p_.name]:{folderName:"src/equicordplugins/selfForward",userPlugin:!1},[m_.name]:{folderName:"src/equicordplugins/serverSearch",userPlugin:!1},[f_.name]:{folderName:"src/equicordplugins/showBadgesInChat",userPlugin:!1},[h_.name]:{folderName:"src/equicordplugins/showMessageEmbeds",userPlugin:!1},[x_.name]:{folderName:"src/equicordplugins/showResourceChannels",userPlugin:!1},[y_.name]:{folderName:"src/equicordplugins/showSongName",userPlugin:!1},[v_.name]:{folderName:"src/equicordplugins/sidebarChat",userPlugin:!1},[S_.name]:{folderName:"src/equicordplugins/signature",userPlugin:!1},[w_.name]:{folderName:"src/equicordplugins/snowfall",userPlugin:!1},[k_.name]:{folderName:"src/equicordplugins/soggy",userPlugin:!1},[__.name]:{folderName:"src/equicordplugins/soundBoardLogger",userPlugin:!1},[R_.name]:{folderName:"src/equicordplugins/splitLargeMessages",userPlugin:!1},[O_.name]:{folderName:"src/equicordplugins/spotifyActivityToggle",userPlugin:!1},[U_.name]:{folderName:"src/equicordplugins/statsfmPresence",userPlugin:!1},[H_.name]:{folderName:"src/equicordplugins/statusPresets",userPlugin:!1},[z_.name]:{folderName:"src/equicordplugins/steamStatusSync",userPlugin:!1},[G_.name]:{folderName:"src/equicordplugins/stickerBlocker",userPlugin:!1},[q_.name]:{folderName:"src/equicordplugins/streamingCodecDisabler",userPlugin:!1},[j_.name]:{folderName:"src/equicordplugins/talkInReverse",userPlugin:!1},[W_.name]:{folderName:"src/equicordplugins/themeLibrary",userPlugin:!1},[K_.name]:{folderName:"src/equicordplugins/tidalEmbeds",userPlugin:!1},[Q_.name]:{folderName:"src/equicordplugins/tiktokTTS",userPlugin:!1},[J_.name]:{folderName:"src/equicordplugins/timezones",userPlugin:!1},[V_.name]:{folderName:"src/equicordplugins/title",userPlugin:!1},[nR.name]:{folderName:"src/equicordplugins/toastNotifications",userPlugin:!1},[rR.name]:{folderName:"src/equicordplugins/toggleVideoBind",userPlugin:!1},[sR.name]:{folderName:"src/equicordplugins/toneIndicators",userPlugin:!1},[aR.name]:{folderName:"src/equicordplugins/tosuRPC",userPlugin:!1},[uR.name]:{folderName:"src/equicordplugins/translatePlus",userPlugin:!1},[pR.name]:{folderName:"src/equicordplugins/unitConverter",userPlugin:!1},[fR.name]:{folderName:"src/equicordplugins/universalMention",userPlugin:!1},[gR.name]:{folderName:"src/equicordplugins/unlimitedAccounts",userPlugin:!1},[hR.name]:{folderName:"src/equicordplugins/unreadBadgeCount",userPlugin:!1},[xR.name]:{folderName:"src/equicordplugins/urlHighlighter",userPlugin:!1},[SR.name]:{folderName:"src/equicordplugins/userpfp",userPlugin:!1},[CR.name]:{folderName:"src/equicordplugins/vcNarratorCustom",userPlugin:!1},[TR.name]:{folderName:"src/equicordplugins/vcPanelSettings",userPlugin:!1},[MR.name]:{folderName:"src/equicordplugins/viewRawVariant",userPlugin:!1},[NR.name]:{folderName:"src/equicordplugins/voiceButtons",userPlugin:!1},[BR.name]:{folderName:"src/equicordplugins/voiceChatUtils",userPlugin:!1},[PR.name]:{folderName:"src/equicordplugins/voiceJoinMessages",userPlugin:!1},[_R.name]:{folderName:"src/equicordplugins/voiceRejoin",userPlugin:!1},[FR.name]:{folderName:"src/equicordplugins/wallpaperFree",userPlugin:!1},[$R.name]:{folderName:"src/equicordplugins/webpackTarball",userPlugin:!1},[HR.name]:{folderName:"src/equicordplugins/whitelistedEmojis",userPlugin:!1},[zR.name]:{folderName:"src/equicordplugins/whosWatching",userPlugin:!1},[qR.name]:{folderName:"src/equicordplugins/wigglyText",userPlugin:!1},[jR.name]:{folderName:"src/equicordplugins/writeUpperCase",userPlugin:!1},[WR.name]:{folderName:"src/equicordplugins/youtubeDescription",userPlugin:!1},[KR.name]:{folderName:"src/equicordplugins/_api/audioPlayer.ts",userPlugin:!1},[YR.name]:{folderName:"src/equicordplugins/_api/headerBar.ts",userPlugin:!1},[QR.name]:{folderName:"src/equicordplugins/_api/userArea.ts",userPlugin:!1}},jw={AppleMusicRichPresence:"desktop",AutoDNDWhilePlaying:"discordDesktop",DevCompanion:"dev",FixSpotifyEmbeds:"desktop",FixYoutubeEmbeds:"desktop",NoSystemBadge:"discordDesktop",ShikiCodeblocks:"desktop",YoutubeAdblock:"desktop",ClipsEnhancements:"discordDesktop",Components:"dev",ElementHighlighter:"dev",InvisibleChat:"desktop",NoRPC:"discordDesktop",NotificationTitle:"discordDesktop",QuickThemeSwitcher:"discordDesktop",ScreenRecorder:"equibop",SongLink:"desktop",StatusWhileActive:"desktop",VoiceChannelLog:"dev",VoiceMessageTranscriber:"desktop"}});async function Xxt(){ca.Vencord_cloudSyncDirection===void 0&&(ca.Vencord_cloudSyncDirection="both");let e=await zt("Vencord_cloudSecret");if(!e){Ge.cloud.authenticated&&(qt({title:"Cloud Settings",body:"Cloud sync was disabled because this account isn't connected to the cloud App. You can enable it again by connecting this account in Cloud Settings. (note: it will store your preferences separately)",color:"var(--yellow-360)",onClick:()=>Lm.openUserSettings("equicord_cloud_panel")}),Ge.cloud.authenticated=!1);return}if(Ge.cloud.authenticated&&!e){qt({title:"Cloud Integrations",body:"We've noticed you have cloud integrations enabled in another client! Due to limitations, you will need to re-authenticate to continue using them. Click here to go to the settings page to do so!",color:"var(--yellow-360)",onClick:()=>Lm.openUserSettings("equicord_cloud_panel")});return}Ge.cloud.settingsSync&&Ge.cloud.authenticated&&ca.Vencord_cloudSyncDirection!=="manual"&&(ca.Vencord_settingsDirty&&XA("push")?await t8():XA("pull")&&await JA(!1)&&qt({title:"Cloud Settings",body:"Your settings have been updated! Click here to restart to fully apply changes!",color:"var(--green-360)",onClick:xd}));let t=rn(async()=>{Ge.cloud.settingsSync&&Ge.cloud.authenticated&&XA("push")&&await t8()},6e4);Tn.addGlobalChangeListener(()=>{ca.Vencord_settingsDirty=!0,t()})}async function Jxt(){await p0,Tw("WebpackReady"),Xxt()}var Jh=x(()=>{"use strict";d();Ps();dr();Wo();Ad();dv();wu();bA();yA();ps();fa();la();H();nt();$();B();vn();T0();_a();Wo();Q();O$();r1();yd();wu();bA();yA();uU();FF();Tw("Init");Jxt();document.addEventListener("DOMContentLoaded",()=>{Tw("DOMContentLoaded")},{once:!0})});var Vxt={};Ao(Vxt,{Api:()=>VU,Components:()=>H$,PlainSettings:()=>Rl,Plugins:()=>Iw,Settings:()=>Ge,Updater:()=>FU,Util:()=>Hj,Webpack:()=>WF,WebpackPatcher:()=>jF});d();d();d();var _te='<!doctype html><html lang="en"><head><meta charset="utf-8"><title>Equicord QuickCSS Editor</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/monaco-editor@0.50.0/min/vs/editor/editor.main.css" integrity="sha256-tiJPQ2O04z/pZ/AwdyIghrOMzewf+PIvEl1YKbQvsZk=" crossorigin="anonymous" referrerpolicy="no-referrer"><style>#container,body,html{position:absolute;left:0;top:0;width:100%;height:100%;margin:0;padding:0;overflow:hidden}header{position:fixed;display:flex;justify-content:space-between;align-items:center;padding:10px;background:#1e1e1e;color:#1e1e1e;border-bottom:1px solid #444;width:100%;z-index:10}#container{margin-top:45px;background-color:#1e1e1e;border:1px solid #1e1e1e}.toolbar button:hover{background:rgba(255,255,255,.1)}</style></head><body><header><div><button id="selectAllButton" style="background:#1e1e1e;color:#fff;border:1px solid transparent;padding:5px 10px;margin-right:5px;border-radius:4px;transition:background .3s,border .3s">Select All</button> <button id="saveButton" style="background:#1e1e1e;color:#fff;border:1px solid transparent;padding:5px 10px;margin-right:5px;border-radius:4px;transition:background .3s,border .3s">Save</button> <button id="copyButton" style="background:#1e1e1e;color:#fff;border:1px solid transparent;padding:5px 10px;border-radius:4px;transition:background .3s,border .3s">Copy</button> <button id="undoButton" style="background:#1e1e1e;color:#fff;border:1px solid transparent;padding:5px 10px;border-radius:4px;transition:background .3s,border .3s">Undo</button> <button id="redoButton" style="background:#1e1e1e;color:#fff;border:1px solid transparent;padding:5px 10px;border-radius:4px;transition:background .3s,border .3s">Redo</button></div></header><div id="container"></div><script src="https://cdn.jsdelivr.net/npm/monaco-editor@0.50.0/min/vs/loader.js" integrity="sha256-KcU48TGr84r7unF7J5IgBo95aeVrEbrGe04S7TcFUjs=" crossorigin="anonymous" referrerpolicy="no-referrer"><\/script><script>require.config({paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.50.0/min/vs"}}),require(["vs/editor/editor.main"],(()=>{getCurrentCss().then((e=>{const t=monaco.editor.create(document.getElementById("container"),{value:e,language:"css",theme:getTheme()});t.onDidChangeModelContent((()=>setCss(t.getValue()))),document.getElementById("selectAllButton").onclick=()=>{t.setSelection(t.getModel().getFullModelRange()),t.focus()},document.getElementById("saveButton").onclick=()=>{const e=t.getValue(),n=new Blob([e],{type:"text/css"}),o=URL.createObjectURL(n),c=document.createElement("a");c.href=o,c.download="style.css",document.body.append(c),c.click(),c.remove(),URL.revokeObjectURL(o)},document.getElementById("copyButton").onclick=()=>{t.focus();const e=t.getSelection();t.setSelection(e),document.execCommand("copy")},document.getElementById("undoButton").onclick=()=>{t.trigger("keyboard","undo")},document.getElementById("redoButton").onclick=()=>{t.trigger("keyboard","redo")},window.addEventListener("resize",(()=>{t.layout()}))}))}))<\/script></body></html>';vn();la();r1();rd();d();var Rte,Lte,D_e,Ote=new Promise(e=>D_e=e);var voe=new Set,w1=()=>{},ARe=async()=>{},CRe=rn(e=>VencordNative.quickCss.set(e)),oA=i0("VencordThemes","VencordThemeData");window.VencordNative={themes:{uploadTheme:(e,t)=>Gt(e,t,oA),deleteTheme:e=>Ta(e,oA),getThemesDir:async()=>"",getThemesList:()=>vL(oA).then(e=>e.map(([t,o])=>({fileName:t,content:o}))),getThemeData:e=>zt(e,oA),getSystemValues:async()=>({}),openFolder:async()=>Promise.reject("themes:openFolder is not supported on web")},native:{getVersions:()=>({}),openExternal:async e=>void open(e,"_blank"),getRendererCss:async()=>(await Ote,fetch(Lte).then(e=>e.text())),onRendererCssUpdate:w1},updater:{getRepo:async()=>({ok:!0,value:"https://github.com/Equicord/Equicord"}),getUpdates:async()=>({ok:!0,value:[]}),update:async()=>({ok:!0,value:!1}),rebuild:async()=>({ok:!0,value:!0})},quickCss:{get:()=>zt("VencordQuickCss").then(e=>e??""),set:async e=>{await Gt("VencordQuickCss",e),voe.forEach(t=>t(e))},addChangeListener(e){voe.add(e)},addThemeChangeListener:w1,openFile:ARe,async openEditor(){let e=`popup,width=${Math.min(window.innerWidth,1e3)},height=${Math.min(window.innerHeight,1e3)}`,t=open("about:blank","VencordQuickCss",e);if(!t){alert("Failed to open QuickCSS popup. Make sure to allow popups!");return}t.baseUrl=Rte,t.setCss=CRe,t.getCurrentCss=()=>VencordNative.quickCss.get(),t.getTheme=this.getEditorTheme,t.document.write(_te)},getEditorTheme:()=>{let{getTheme:e,Theme:t}=(mt(),hh(boe));return e()===t.Light?"vs-light":"vs-dark"}},settings:{get:()=>{try{return JSON.parse(ca.getItem("EquicordSettings")||"{}")}catch(e){return console.error("Failed to parse settings from localStorage: ",e),{}}},set:async e=>ca.setItem("EquicordSettings",JSON.stringify(e)),getSettingsDir:async()=>"LocalStorage",openFolder:async()=>Promise.reject("settings:openFolder is not supported on web")},pluginHelpers:{},csp:{},tray:{setUpdateState:w1,onCheckUpdates:w1,onRepair:w1,onAbout:w1}};Jh();return hh(Vxt);})();
//# sourceURL=file:///VencordWeb
/*! For license information please see browser.js.LEGAL.txt */
